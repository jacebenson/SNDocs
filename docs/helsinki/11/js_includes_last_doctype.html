<!DOCTYPE html>

<html>
<head>
  <title>js_includes_last_doctype.jsx</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="SLARepairClient.html">
                  SLARepairClient.js
                </a>
              
                
                <a class="source" href="form_tags.html">
                  form_tags.jsx
                </a>
              
                
                <a class="source" href="glide-highcharts-v5.html">
                  glide-highcharts-v5.js
                </a>
              
                
                <a class="source" href="heisenberg_all.html">
                  heisenberg_all.jsx
                </a>
              
                
                <a class="source" href="js_guided_tours_includes.html">
                  js_guided_tours_includes.jsx
                </a>
              
                
                <a class="source" href="js_includes_amb.html">
                  js_includes_amb.jsx
                </a>
              
                
                <a class="source" href="js_includes_customer.html">
                  js_includes_customer.jsx
                </a>
              
                
                <a class="source" href="js_includes_doctype.html">
                  js_includes_doctype.jsx
                </a>
              
                
                <a class="source" href="js_includes_form_presence.html">
                  js_includes_form_presence.jsx
                </a>
              
                
                <a class="source" href="js_includes_last_doctype.html">
                  js_includes_last_doctype.jsx
                </a>
              
                
                <a class="source" href="js_includes_list_edit_doctype.html">
                  js_includes_list_edit_doctype.jsx
                </a>
              
                
                <a class="source" href="js_includes_listv2_doctype.html">
                  js_includes_listv2_doctype.jsx
                </a>
              
                
                <a class="source" href="js_includes_sorting_new.html">
                  js_includes_sorting_new.jsx
                </a>
              
                
                <a class="source" href="js_includes_sp.html">
                  js_includes_sp.jsx
                </a>
              
                
                <a class="source" href="magellan.CreateFavoriteModal.html">
                  magellan.CreateFavoriteModal.jsx
                </a>
              
                
                <a class="source" href="newtag-it.html">
                  newtag-it.jsx
                </a>
              
                
                <a class="source" href="transaction_scope_includes.html">
                  transaction_scope_includes.jsx
                </a>
              
                
                <a class="source" href="ui_policy.html">
                  ui_policy.jsx
                </a>
              
                
                <a class="source" href="z_last_include.html">
                  z_last_include.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>js_includes_last_doctype.jsx</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/*! RESOURCE: /scripts/popups.js */</span>
<span class="hljs-keyword">var</span> popupCurrent = <span class="hljs-literal">null</span>;
<span class="hljs-keyword">var</span> lastMouseX;
<span class="hljs-keyword">var</span> lastMouseY;
<span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.opener &amp;&amp; !<span class="hljs-built_in">window</span>.opener.closed &amp;&amp; <span class="hljs-built_in">window</span>.opener != <span class="hljs-built_in">window</span>.self) {
Event.observe(<span class="hljs-built_in">window</span>, <span class="hljs-string">'beforeunload'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.opener &amp;&amp; !<span class="hljs-built_in">window</span>.opener.closed &amp;&amp; <span class="hljs-built_in">window</span>.opener.popupCurrent &amp;&amp; <span class="hljs-built_in">window</span>.opener.popupCurrent == <span class="hljs-built_in">window</span>.self)
<span class="hljs-built_in">window</span>.opener.popupCurrent = <span class="hljs-literal">null</span>;
});
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">popupClose</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">if</span> (!popupCurrent)
<span class="hljs-keyword">return</span>;
<span class="hljs-keyword">try</span> {
<span class="hljs-keyword">if</span> (!popupCurrent.closed)
popupCurrent.close();
} <span class="hljs-keyword">catch</span> (e) {
}
popupCurrent = <span class="hljs-literal">null</span>;
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mousePositionSave</span>(<span class="hljs-params">e</span>) </span>{
<span class="hljs-keyword">if</span> (navigator.appName.indexOf(<span class="hljs-string">"Microsoft"</span>) != <span class="hljs-number">-1</span>)
e = <span class="hljs-built_in">window</span>.event;
lastMouseX = e.screenX;
lastMouseY = e.screenY;
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">imageListOpen</span>(<span class="hljs-params">elementName, img_dirs, ignore, name</span>) </span>{
<span class="hljs-keyword">var</span> url = <span class="hljs-keyword">new</span> GlideURL(<span class="hljs-string">"image_picker.do"</span>);
url.addParam(<span class="hljs-string">"sysparm_element"</span>, elementName);
url.addParam(<span class="hljs-string">"sysparm_img_dirs"</span>, img_dirs);
url.addParam(<span class="hljs-string">"sysparm_ignore"</span>, ignore);
url.addParam(<span class="hljs-string">"sysparm_name"</span>, name || <span class="hljs-string">""</span>);
popupOpenStandard(url.getURL(), <span class="hljs-string">"imagepicker"</span>);
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">imageBrowseOpen</span>(<span class="hljs-params">elementName, directory, name, color, icon</span>) </span>{
<span class="hljs-keyword">if</span> (!color)
color = <span class="hljs-string">"color-normal"</span>;
<span class="hljs-keyword">var</span> url = <span class="hljs-keyword">new</span> GlideURL(<span class="hljs-string">"icon_browse.do"</span>);
url.addParam(<span class="hljs-string">"sysparm_dir"</span>, directory);
url.addParam(<span class="hljs-string">"sysparm_name"</span>, name || <span class="hljs-string">""</span>);
url.addParam(<span class="hljs-string">"sysparm_element"</span>, elementName);
url.addParam(<span class="hljs-string">"sysparm_color"</span>, color);
url.addParam(<span class="hljs-string">"sysparm_icon"</span>, icon);
popupOpenStandard(url.getURL(), <span class="hljs-string">"imagepicker"</span>);
}
<span class="hljs-keyword">var</span> g_IconBrowseHelpers = {
<span class="hljs-attr">getIconColor</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
<span class="hljs-keyword">var</span> spanElem = jQuery(<span class="hljs-string">"span.bookmark_image"</span>);
<span class="hljs-keyword">if</span> (spanElem.length) {
<span class="hljs-keyword">var</span> color = jQuery.grep(spanElem.prop(<span class="hljs-string">'class'</span>).split(<span class="hljs-string">" "</span>), <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">v</span>) </span>{
<span class="hljs-keyword">return</span> v.indexOf(<span class="hljs-string">'color-'</span>) === <span class="hljs-number">0</span>;
});
<span class="hljs-keyword">return</span> color.length ? color[<span class="hljs-number">0</span>] : <span class="hljs-string">''</span>;
}
},
<span class="hljs-attr">getIcon</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
<span class="hljs-keyword">var</span> spanElem = jQuery(<span class="hljs-string">"span.bookmark_image"</span>);
<span class="hljs-keyword">if</span> (spanElem.length) {
<span class="hljs-keyword">var</span> fontIcon = jQuery.grep(spanElem.prop(<span class="hljs-string">'class'</span>).split(<span class="hljs-string">" "</span>), <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">v</span>) </span>{
<span class="hljs-keyword">return</span> v.indexOf(<span class="hljs-string">'icon-'</span>) === <span class="hljs-number">0</span>;
});
<span class="hljs-keyword">return</span> fontIcon.length ? fontIcon[<span class="hljs-number">0</span>] : <span class="hljs-string">''</span>;
}
}
};
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">imagePickedCustomEvent</span>(<span class="hljs-params">options</span>) </span>{
CustomEvent.fire(<span class="hljs-string">'glide:image_picked'</span>, options);
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">imageListPick</span>(<span class="hljs-params">elementName, value</span>) </span>{
<span class="hljs-keyword">var</span> element = <span class="hljs-built_in">document</span>.getElementById(elementName);
<span class="hljs-keyword">if</span> (element.nodeName == <span class="hljs-string">"IMG"</span> || element.nodeName == <span class="hljs-string">"INPUT"</span>) {
<span class="hljs-keyword">var</span> imgel = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"img."</span> + elementName);
element.value = value;
<span class="hljs-keyword">if</span> (element[<span class="hljs-string">'onchange'</span>])
element.onchange();
<span class="hljs-keyword">if</span> (imgel != <span class="hljs-literal">null</span>) {
<span class="hljs-keyword">if</span> (value &amp;&amp; value.length &gt; <span class="hljs-number">0</span>)
imgel.src = value;
<span class="hljs-keyword">else</span>
imgel.src = <span class="hljs-string">"images/s.gifx"</span>;
}
} <span class="hljs-keyword">else</span> {
element.className = <span class="hljs-string">""</span>;
element.className = <span class="hljs-string">"image-browse-icon "</span> + value;
}
popupClose();
<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reflistOpen</span>(<span class="hljs-params">target, elementName, refTableName, dependent, useQBE, refQualElements, additionalQual, parentID, forceReference</span>)</span>{
<span class="hljs-keyword">var</span> url = reflistOpenUrl(target, target, elementName, refTableName, dependent, useQBE, refQualElements, additionalQual, parentID, forceReference);
popupOpenStandard(url, <span class="hljs-string">"lookup"</span>);
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reflistOpenUrl</span>(<span class="hljs-params">target, targetElementID, elementName, refTableName, dependent, useQBE, refQualElements, additionalQual, parentID, forceReference</span>) </span>{
<span class="hljs-keyword">var</span> url;
<span class="hljs-keyword">if</span> (useQBE == <span class="hljs-string">'true'</span>)
url = <span class="hljs-keyword">new</span> GlideURL(refTableName + <span class="hljs-string">'_search.do'</span>);
<span class="hljs-keyword">else</span>
url = <span class="hljs-keyword">new</span> GlideURL(refTableName + <span class="hljs-string">'_list.do'</span>);
url.addParam(<span class="hljs-string">"sysparm_target"</span>, target);
<span class="hljs-keyword">var</span> et = gel(targetElementID);
<span class="hljs-keyword">if</span> (et)
url.addParam(<span class="hljs-string">"sysparm_target_value"</span>, et.value);
<span class="hljs-keyword">var</span> dspEl = gel(<span class="hljs-string">"sys_display."</span> + targetElementID);
<span class="hljs-keyword">if</span> (dspEl &amp;&amp; !et.value)
url.addParam(<span class="hljs-string">"sysparm_reference_value"</span>, dspEl.value);
url.addParam(<span class="hljs-string">"sysparm_nameofstack"</span>, <span class="hljs-string">"reflist"</span>);
url.addParam(<span class="hljs-string">"sysparm_clear_stack"</span>, <span class="hljs-string">"true"</span>);
url.addParam(<span class="hljs-string">"sysparm_element"</span>, elementName);
url.addParam(<span class="hljs-string">"sysparm_reference"</span>, refTableName);
url.addParam(<span class="hljs-string">"sysparm_view"</span>, <span class="hljs-string">"sys_ref_list"</span>);
url.addParam(<span class="hljs-string">"sysparm_additional_qual"</span>, additionalQual);
<span class="hljs-keyword">if</span> (parentID != <span class="hljs-literal">null</span> &amp;&amp; parentID != <span class="hljs-string">''</span>)
url.addParam(<span class="hljs-string">"sysparm_parent_id"</span>, parentID);
<span class="hljs-keyword">if</span>(forceReference)
url.addParam(<span class="hljs-string">"sysparm_force_ref"</span>, <span class="hljs-string">"true"</span>);
<span class="hljs-keyword">var</span> v = getDependentValue(target, dependent);
<span class="hljs-keyword">if</span> (v != <span class="hljs-literal">null</span>)
url.addParam(<span class="hljs-string">"sysparm_dependent"</span>, v);
<span class="hljs-keyword">var</span> refQual = getRefQualURI(target, refQualElements);
<span class="hljs-keyword">return</span> url.getURL() + refQual;
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">emailClientOpen</span>(<span class="hljs-params">e, table, row, rows</span>) </span>{
<span class="hljs-keyword">var</span> query = e.getAttribute(<span class="hljs-string">"query"</span>);
<span class="hljs-keyword">var</span> addOn = <span class="hljs-string">'&amp;sysparm_record_row='</span> + row + <span class="hljs-string">'&amp;sysparm_record_rows='</span> + rows + <span class="hljs-string">'&amp;sysparm_record_list='</span> + <span class="hljs-built_in">encodeURIComponent</span>(query);
emailClientOpenPop(table, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, addOn);
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showPopupLiveFeedList</span>(<span class="hljs-params">sysId, table</span>) </span>{
<span class="hljs-keyword">var</span> box = GlideBox.get(<span class="hljs-string">'showLiveFeed'</span>);
<span class="hljs-keyword">if</span> (box)
box.close(<span class="hljs-number">0</span>);
<span class="hljs-keyword">var</span> iframe_src = <span class="hljs-string">'show_live_feed.do?sysparm_stack=no&amp;sysparm_sys_id='</span> + sysId + <span class="hljs-string">'&amp;sysparm_table='</span> + table;
box = <span class="hljs-keyword">new</span> GlideBox({
<span class="hljs-attr">id</span> : <span class="hljs-string">'showLiveFeed'</span>,
<span class="hljs-attr">iframe</span> : iframe_src,
<span class="hljs-attr">width</span> : <span class="hljs-number">600</span>,
<span class="hljs-attr">height</span> : <span class="hljs-string">"95%"</span>,
<span class="hljs-attr">title</span> : <span class="hljs-string">"Live Feed"</span>,
<span class="hljs-attr">noTitle</span> : <span class="hljs-literal">true</span>
});
box.render();
<span class="hljs-keyword">var</span> g_feedResizer;
Event.observe(<span class="hljs-built_in">window</span>, <span class="hljs-string">'resize'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
g_feedResizer = setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
box.autoPosition();
box.autoDimension();
}, <span class="hljs-number">50</span>);
});
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">emailClientOpenPop</span>(<span class="hljs-params">table, immediate, replyType, replyID, addOn</span>) </span>{
<span class="hljs-keyword">var</span> id = <span class="hljs-built_in">document</span>.getElementsByName(<span class="hljs-string">"sys_uniqueValue"</span>)[<span class="hljs-number">0</span>];
<span class="hljs-keyword">if</span> (!id)
<span class="hljs-keyword">return</span>;
<span class="hljs-keyword">var</span> url = <span class="hljs-keyword">new</span> GlideURL(<span class="hljs-string">"email_client.do"</span>);
url.addParam(<span class="hljs-string">"sysparm_table"</span>, table);
url.addParam(<span class="hljs-string">"sysparm_sys_id"</span>, id.value);
url.addParam(<span class="hljs-string">"sysparm_target"</span>, table);
<span class="hljs-keyword">if</span> (replyType != <span class="hljs-literal">null</span>) {
url.addParam(<span class="hljs-string">"replytype"</span>, replyType);
url.addParam(<span class="hljs-string">"replyid"</span>, replyID);
}
popupOpenEmailClient(url.getURL() + g_form.serializeChangedAll());
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reflistPick</span>(<span class="hljs-params">elementName, value, display</span>) </span>{
<span class="hljs-meta">"use strict"</span>;
<span class="hljs-keyword">var</span> listName = <span class="hljs-string">"select_0"</span> + elementName;
<span class="hljs-keyword">var</span> list = $(listName);
<span class="hljs-keyword">if</span> (list) {
addGlideListChoice(listName, value, display, <span class="hljs-literal">true</span>);
popupClose();
<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}
<span class="hljs-keyword">if</span> (gel(<span class="hljs-string">"sys_display.LIST_EDIT_"</span> + elementName))
elementName = <span class="hljs-string">"LIST_EDIT_"</span> + elementName;
<span class="hljs-keyword">var</span> element = $(<span class="hljs-string">"sys_display."</span> + elementName);
<span class="hljs-keyword">if</span> (element &amp;&amp; element.onRefPick)
element.onRefPick(element);
<span class="hljs-keyword">if</span> (element &amp;&amp; element.ac &amp;&amp; <span class="hljs-keyword">typeof</span>(element.ac.referenceSelect) == <span class="hljs-string">"function"</span>) {
element.ac.referenceSelectTimeout(value, display);
popupClose();
<span class="hljs-keyword">return</span>;
}
<span class="hljs-keyword">var</span> elementActual = $(elementName);
elementActual.value = value;
element = $(<span class="hljs-string">"sys_display."</span> + elementName);
element.value = display;
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span>(elementActual.onchange) == <span class="hljs-string">"function"</span>)
elementActual.onchange();
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span>(element.onchange) == <span class="hljs-string">"function"</span>)
element.onchange();
<span class="hljs-keyword">var</span> eDep = element;
<span class="hljs-keyword">var</span> itemName = eDep.getAttribute(<span class="hljs-string">"function"</span>);
<span class="hljs-keyword">if</span> (itemName != <span class="hljs-literal">null</span>) {
<span class="hljs-built_in">eval</span>(itemName);
}
element = <span class="hljs-built_in">document</span>.getElementsByName(<span class="hljs-string">"sys_select."</span> + elementName)[<span class="hljs-number">0</span>];
<span class="hljs-keyword">if</span> (element != <span class="hljs-literal">null</span>) {
<span class="hljs-keyword">var</span> options = element.options;
<span class="hljs-keyword">var</span> optionFound = <span class="hljs-literal">false</span>;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i &lt; options.length; i++) {
<span class="hljs-keyword">var</span> option = options[i];
option.selected = <span class="hljs-literal">false</span>;
<span class="hljs-keyword">var</span> o = option.value;
<span class="hljs-keyword">if</span> (o == value ) {
option.selected = <span class="hljs-literal">true</span>;
optionFound = <span class="hljs-literal">true</span>;
}
}
<span class="hljs-keyword">if</span> (!optionFound) {
element.selectedIndex = <span class="hljs-number">-1</span>;
<span class="hljs-keyword">var</span> opt = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">"option"</span>);
opt.value = value;
opt.appendChild(<span class="hljs-built_in">document</span>.createTextNode(display));
opt.selected = <span class="hljs-literal">true</span>;
element.appendChild(opt);
<span class="hljs-keyword">var</span> options = element.options;
element.selectedIndex = options.length<span class="hljs-number">-1</span>;
element.disabled = <span class="hljs-literal">true</span>;
element.disabled = <span class="hljs-literal">false</span>;
}
element.onchange();
} <span class="hljs-keyword">else</span> {
<span class="hljs-keyword">var</span> fcs = <span class="hljs-string">"updateRelatedGivenNameAndValue('"</span> + elementName + <span class="hljs-string">"','"</span> + value + <span class="hljs-string">"');"</span>;
setTimeout(fcs, <span class="hljs-number">0</span>);
}
popupClose();
<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">picklistOpen</span>(<span class="hljs-params">baseURL, width, modified, searchParam, target, dependent</span>) </span>{
<span class="hljs-keyword">if</span> (modified == <span class="hljs-string">'1'</span>)
baseURL = baseURL + searchParam;
baseURL += getDependent(target, dependent);
popupOpenStandard(baseURL, <span class="hljs-string">"lookup"</span>);
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getDependent</span>(<span class="hljs-params">target, dependent</span>)</span>{
<span class="hljs-keyword">var</span> value = getDependentValue(target, dependent);
<span class="hljs-keyword">if</span> (value == <span class="hljs-literal">null</span>)
<span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
<span class="hljs-keyword">return</span> <span class="hljs-string">"&amp;sysparm_dependent="</span> + <span class="hljs-built_in">encodeURIComponent</span>(value);
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getDependentValue</span>(<span class="hljs-params">target, dependent</span>) </span>{
<span class="hljs-keyword">if</span> (dependent == <span class="hljs-literal">null</span>)
<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
<span class="hljs-keyword">var</span> table = target.split(<span class="hljs-string">'.'</span>)[<span class="hljs-number">0</span>];
<span class="hljs-keyword">var</span> tfield = dependent.split(<span class="hljs-string">','</span>)[<span class="hljs-number">0</span>];
<span class="hljs-keyword">var</span> elname = table + <span class="hljs-string">'.'</span> + tfield;
<span class="hljs-keyword">if</span> (tfield == <span class="hljs-string">'sys_id'</span>) {
tfield = <span class="hljs-string">'sys_uniquevalue'</span>;
elname = <span class="hljs-string">'sys_uniquevalue'</span>;
}
<span class="hljs-keyword">var</span> el = <span class="hljs-built_in">document</span>.getElementsByName(elname)[<span class="hljs-number">0</span>];
<span class="hljs-keyword">if</span> (el == <span class="hljs-literal">null</span>)
<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
<span class="hljs-keyword">var</span> selectValue = <span class="hljs-string">""</span>;
<span class="hljs-keyword">if</span> (el.tagName == <span class="hljs-string">"INPUT"</span>)
<span class="hljs-keyword">var</span> selectValue = el.value;
<span class="hljs-keyword">else</span>
selectValue = el.options[el.selectedIndex].value;
<span class="hljs-keyword">return</span> selectValue;
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getRefQualURI</span>(<span class="hljs-params">target, refQualElements</span>) </span>{
<span class="hljs-keyword">if</span> (!refQualElements || <span class="hljs-keyword">typeof</span> g_form == <span class="hljs-string">"undefined"</span>)
<span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
<span class="hljs-keyword">var</span> aj = <span class="hljs-keyword">new</span> GlideAjax(<span class="hljs-string">"FormStateAjax"</span>);
aj.addEncodedString(g_form.serialize());
aj.getXMLWait();
<span class="hljs-keyword">return</span> <span class="hljs-string">"&amp;sysparm_client_record=session"</span>;
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">picklistPick</span>(<span class="hljs-params">elementName, value</span>) </span>{
<span class="hljs-keyword">var</span> element = <span class="hljs-built_in">document</span>.getElementsByName(elementName)[<span class="hljs-number">0</span>];
element.value = value;
<span class="hljs-keyword">if</span> (element[<span class="hljs-string">"onchange"</span>]) {
element.onchange();
}
element.value = replaceRegEx(element.value, <span class="hljs-built_in">document</span>, elementName);
popupClose();
<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">popupOpenStandard</span>(<span class="hljs-params">url, name</span>) </span>{
<span class="hljs-keyword">var</span> width = <span class="hljs-built_in">document</span>.documentElement.getAttribute(<span class="hljs-string">'data-doctype'</span>) == <span class="hljs-string">'true'</span> ? <span class="hljs-number">800</span> : <span class="hljs-number">700</span>;
<span class="hljs-keyword">var</span> height = <span class="hljs-number">480</span>;
<span class="hljs-keyword">var</span> features = <span class="hljs-string">"width="</span>+ width +<span class="hljs-string">",height="</span>+ height +<span class="hljs-string">",toolbar=no,status=no,directories=no,menubar=no,resizable=yes,scrollbars=1"</span>;
popupOpen(url, name, width, height, features, <span class="hljs-literal">true</span> );
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">popupOpenEmailClient</span>(<span class="hljs-params">url</span>) </span>{
<span class="hljs-keyword">var</span> width = <span class="hljs-number">875</span>;
<span class="hljs-keyword">var</span> height = <span class="hljs-number">575</span>;
<span class="hljs-keyword">var</span> features = <span class="hljs-string">"width="</span>+ width +<span class="hljs-string">",height="</span>+ height +<span class="hljs-string">",toolbar=no,status=no,directories=no,menubar=no,resizable=yes,scrollbars=1"</span>;
popupOpenFocus(url, <span class="hljs-string">"Email_Client"</span>, width, height, features, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span> );
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">popupOpen</span>(<span class="hljs-params">url, name, pWidth, pHeight, features, snapToLastMousePosition</span>) </span>{
popupOpenFocus (url, name, pWidth, pHeight, features, snapToLastMousePosition, <span class="hljs-literal">true</span>);
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">popupOpenFocus</span>(<span class="hljs-params">url, name, pWidth, pHeight, features, snapToLastMousePosition, closeOnLoseFocus</span>) </span>{
popupClose();
<span class="hljs-keyword">if</span> (url.indexOf(<span class="hljs-string">"?"</span>) != <span class="hljs-number">-1</span>)
url += <span class="hljs-string">"&amp;"</span>;
<span class="hljs-keyword">else</span>
url += <span class="hljs-string">"?"</span>;
url += <span class="hljs-string">"sysparm_domain_restore=false"</span>;
<span class="hljs-keyword">var</span> domain = gel(<span class="hljs-string">"sysparm_domain"</span>);
<span class="hljs-keyword">if</span> (domain)
url += <span class="hljs-string">"&amp;sysparm_domain="</span> + domain.value;
<span class="hljs-keyword">if</span> (url.indexOf(<span class="hljs-string">"sysparm_nameofstack"</span>) == <span class="hljs-number">-1</span>)
url += <span class="hljs-string">"&amp;sysparm_stack=no"</span>;
<span class="hljs-keyword">if</span> (snapToLastMousePosition) {
<span class="hljs-keyword">if</span> (lastMouseX - pWidth &lt; <span class="hljs-number">0</span>) {
lastMouseX = pWidth;
}
<span class="hljs-keyword">if</span> (lastMouseY + pHeight &gt; screen.height) {
lastMouseY -= (lastMouseY + pHeight + <span class="hljs-number">50</span>) - screen.height;
}
lastMouseX -= pWidth;
lastMouseY += <span class="hljs-number">10</span>;
features += <span class="hljs-string">",screenX="</span> + lastMouseX + <span class="hljs-string">",left="</span> + lastMouseX + <span class="hljs-string">",screenY="</span> + lastMouseY + <span class="hljs-string">",top="</span> + lastMouseY;
}
<span class="hljs-keyword">if</span> (closeOnLoseFocus) {
popupCurrent = <span class="hljs-built_in">window</span>.open(url, name, features, <span class="hljs-literal">false</span>);
<span class="hljs-keyword">if</span> (!popupCurrent) {
alert(<span class="hljs-string">'Please disable your popup blocker to use this feature'</span>);
<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
} <span class="hljs-keyword">else</span> {
popupCurrent.focus();
popupCurrent.opener = <span class="hljs-built_in">window</span>.self;
<span class="hljs-keyword">return</span> popupCurrent;
}
} <span class="hljs-keyword">else</span> {
popupCurrent = <span class="hljs-literal">null</span>;
<span class="hljs-keyword">var</span> win = <span class="hljs-built_in">window</span>.open(url, name, features, <span class="hljs-literal">false</span>);
<span class="hljs-keyword">if</span> (win) {
win.focus();
win.opener = <span class="hljs-built_in">window</span>.self;
}
<span class="hljs-keyword">return</span> win;
}
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">xmlView</span>(<span class="hljs-params">ref, id</span>) </span>{
<span class="hljs-keyword">var</span> mytable = ref.split(<span class="hljs-string">'.'</span>)[<span class="hljs-number">0</span>];
<span class="hljs-keyword">var</span> myfield = ref.substring(mytable.length + <span class="hljs-number">1</span>);
<span class="hljs-keyword">var</span> w = <span class="hljs-number">700</span>;
<span class="hljs-keyword">var</span> h = <span class="hljs-number">500</span>;
<span class="hljs-keyword">var</span> url = <span class="hljs-keyword">new</span> GlideURL(mytable + <span class="hljs-string">".do"</span>);
url.addParam(<span class="hljs-string">"sys_id"</span>, id);
url.addParam(<span class="hljs-string">"sys_target"</span>, myfield);
url.addParam(<span class="hljs-string">"XML"</span>, <span class="hljs-string">""</span>);
popupOpen(url.getURL(), <span class="hljs-string">"xmlview"</span>, w, h,
<span class="hljs-string">"width="</span>+w+<span class="hljs-string">",height="</span>+h+<span class="hljs-string">",toolbar=no,status=no,directories=no,menubar=no,resizable=yes,scrollbars=1"</span>);
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">htmlView</span>(<span class="hljs-params">ref, id</span>) </span>{
<span class="hljs-keyword">var</span> mytable = ref.split(<span class="hljs-string">'.'</span>)[<span class="hljs-number">0</span>];
<span class="hljs-keyword">var</span> myfield = ref.split(<span class="hljs-string">'.'</span>)[<span class="hljs-number">1</span>];
<span class="hljs-keyword">var</span> w = <span class="hljs-number">1000</span>;
<span class="hljs-keyword">var</span> h = <span class="hljs-number">500</span>;
<span class="hljs-keyword">var</span> url = <span class="hljs-keyword">new</span> GlideURL(<span class="hljs-string">"diff_html_page.do"</span>);
url.addParam(<span class="hljs-string">"sysparm_id"</span>, id);
url.addParam(<span class="hljs-string">"sysparm_table"</span>, mytable);
popupOpen(url.getURL(), <span class="hljs-string">"htmlview"</span>, w, h,
<span class="hljs-string">"width="</span>+w+<span class="hljs-string">",height="</span>+h+<span class="hljs-string">",toolbar=no,status=no,directories=no,menubar=no,resizable=yes,scrollbars=1"</span>);
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">tearOffReference</span>(<span class="hljs-params">table, fieldName, view, navigate, refKey</span>) </span>{
<span class="hljs-keyword">var</span> widget = gel(fieldName);
<span class="hljs-keyword">if</span> (widget == <span class="hljs-literal">null</span>) {
alert(<span class="hljs-string">'Tear off called for a non existent reference field'</span>);
<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}
<span class="hljs-keyword">var</span> sys_id = widget.value;
<span class="hljs-keyword">if</span> (sys_id == <span class="hljs-literal">null</span> || sys_id == <span class="hljs-string">''</span>) {
alert(<span class="hljs-string">'Please select a reference before trying to tear it off'</span>);
<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}
tearOff(table, sys_id, view, navigate, refKey);
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">tearOff</span>(<span class="hljs-params">table, sys_id, view, navigate, refKey</span>) </span>{
<span class="hljs-keyword">var</span> key = sys_id;
<span class="hljs-keyword">var</span> url = <span class="hljs-keyword">new</span> GlideURL(table + <span class="hljs-string">'.do'</span>);
url.addParam(<span class="hljs-string">"sys_id"</span>, key);
url.addParam(<span class="hljs-string">"sysparm_view"</span>, view);
url.addParam(<span class="hljs-string">"sysparm_stack"</span>, <span class="hljs-string">"no"</span>);
url.addParam(<span class="hljs-string">"sysparm_referring_url"</span>, <span class="hljs-string">"tear_off"</span>);
<span class="hljs-keyword">if</span> (refKey)
url.addParam(<span class="hljs-string">"sysparm_refkey"</span>, refKey);
<span class="hljs-built_in">window</span>.open(url.getURL(), <span class="hljs-string">""</span>,
<span class="hljs-string">"toolbar=no,menubar=no,personalbar=no,width=800,height=600,"</span> +
<span class="hljs-string">"scrollbars=yes,resizable=yes"</span>);
<span class="hljs-keyword">if</span> (navigate) {
gsftSubmit(<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'sysverb_back'</span>));
}
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">tearOffAttachment</span>(<span class="hljs-params">sys_id</span>) </span>{
<span class="hljs-keyword">var</span> url = <span class="hljs-keyword">new</span> GlideURL(<span class="hljs-string">"sys_attachment.do"</span>);
url.addParam(<span class="hljs-string">"sysparm_referring_url"</span>, <span class="hljs-string">"tear_off"</span>);
url.addParam(<span class="hljs-string">"view"</span>, <span class="hljs-string">"true"</span>);
url.addParam(<span class="hljs-string">"sys_id"</span>, sys_id);
<span class="hljs-built_in">window</span>.open(url.getURL(), sys_id,
<span class="hljs-string">"toolbar=no,menubar=no,personalbar=no,width=800,height=600,"</span> +
<span class="hljs-string">"scrollbars=yes,resizable=yes"</span>);
}
;</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
