<!DOCTYPE html>

<html>
<head>
  <title>js_includes_listv2_doctype.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="AJAXCompleter.html">
                  AJAXCompleter.js
                </a>
              
                
                <a class="source" href="AJAXEmailClientCompleter.html">
                  AJAXEmailClientCompleter.js
                </a>
              
                
                <a class="source" href="AJAXOtherCompleter.html">
                  AJAXOtherCompleter.js
                </a>
              
                
                <a class="source" href="AJAXReferenceChoice.html">
                  AJAXReferenceChoice.js
                </a>
              
                
                <a class="source" href="AJAXReferenceCompleter.html">
                  AJAXReferenceCompleter.js
                </a>
              
                
                <a class="source" href="AJAXReferenceCompleterMulti.html">
                  AJAXReferenceCompleterMulti.js
                </a>
              
                
                <a class="source" href="AJAXReferenceControls.html">
                  AJAXReferenceControls.js
                </a>
              
                
                <a class="source" href="AJAXTableCompleter.html">
                  AJAXTableCompleter.js
                </a>
              
                
                <a class="source" href="AttachmentUploader.html">
                  AttachmentUploader.js
                </a>
              
                
                <a class="source" href="AutoComplete.html">
                  AutoComplete.js
                </a>
              
                
                <a class="source" href="BoundsUtil2.html">
                  BoundsUtil2.js
                </a>
              
                
                <a class="source" href="CookieJar.html">
                  CookieJar.js
                </a>
              
                
                <a class="source" href="CustomEventManager.html">
                  CustomEventManager.js
                </a>
              
                
                <a class="source" href="DaysOfWeekElement.html">
                  DaysOfWeekElement.js
                </a>
              
                
                <a class="source" href="DerivedFields.html">
                  DerivedFields.js
                </a>
              
                
                <a class="source" href="Draggable2.html">
                  Draggable2.js
                </a>
              
                
                <a class="source" href="DropTarget2.html">
                  DropTarget2.js
                </a>
              
                
                <a class="source" href="FieldListElement.html">
                  FieldListElement.js
                </a>
              
                
                <a class="source" href="GlideAPI1.html">
                  GlideAPI1.js
                </a>
              
                
                <a class="source" href="GlideAjax.html">
                  GlideAjax.js
                </a>
              
                
                <a class="source" href="GlideAjaxForm.html">
                  GlideAjaxForm.js
                </a>
              
                
                <a class="source" href="GlideBox.html">
                  GlideBox.js
                </a>
              
                
                <a class="source" href="GlideClientCache.html">
                  GlideClientCache.js
                </a>
              
                
                <a class="source" href="GlideDecoration.html">
                  GlideDecoration.js
                </a>
              
                
                <a class="source" href="GlideDialogForm.html">
                  GlideDialogForm.js
                </a>
              
                
                <a class="source" href="GlideDialogWindow.html">
                  GlideDialogWindow.js
                </a>
              
                
                <a class="source" href="GlideDraggable.html">
                  GlideDraggable.js
                </a>
              
                
                <a class="source" href="GlideDuration.html">
                  GlideDuration.js
                </a>
              
                
                <a class="source" href="GlideEvent.html">
                  GlideEvent.js
                </a>
              
                
                <a class="source" href="GlideEventHandler.html">
                  GlideEventHandler.js
                </a>
              
                
                <a class="source" href="GlideFilter14.html">
                  GlideFilter14.js
                </a>
              
                
                <a class="source" href="GlideFilterDate.html">
                  GlideFilterDate.js
                </a>
              
                
                <a class="source" href="GlideFilterDescription.html">
                  GlideFilterDescription.js
                </a>
              
                
                <a class="source" href="GlideFilterHandlers.html">
                  GlideFilterHandlers.js
                </a>
              
                
                <a class="source" href="GlideFilterItemVariables.html">
                  GlideFilterItemVariables.js
                </a>
              
                
                <a class="source" href="GlideFilterLabels.html">
                  GlideFilterLabels.js
                </a>
              
                
                <a class="source" href="GlideFilterQuestions.html">
                  GlideFilterQuestions.js
                </a>
              
                
                <a class="source" href="GlideFilterReference.html">
                  GlideFilterReference.js
                </a>
              
                
                <a class="source" href="GlideFilterReferenceMulti.html">
                  GlideFilterReferenceMulti.js
                </a>
              
                
                <a class="source" href="GlideFilterVariables.html">
                  GlideFilterVariables.js
                </a>
              
                
                <a class="source" href="GlideForm14.html">
                  GlideForm14.js
                </a>
              
                
                <a class="source" href="GlideHeaderSearch.html">
                  GlideHeaderSearch.js
                </a>
              
                
                <a class="source" href="GlideList2.html">
                  GlideList2.js
                </a>
              
                
                <a class="source" href="GlideList2FilterUtil.html">
                  GlideList2FilterUtil.js
                </a>
              
                
                <a class="source" href="GlideList2Handlers.html">
                  GlideList2Handlers.js
                </a>
              
                
                <a class="source" href="GlideList2InitEvents.html">
                  GlideList2InitEvents.js
                </a>
              
                
                <a class="source" href="GlideListAggregates.html">
                  GlideListAggregates.js
                </a>
              
                
                <a class="source" href="GlideListEditor.html">
                  GlideListEditor.js
                </a>
              
                
                <a class="source" href="GlideListEditorMessaging.html">
                  GlideListEditorMessaging.js
                </a>
              
                
                <a class="source" href="GlideListElement.html">
                  GlideListElement.js
                </a>
              
                
                <a class="source" href="GlideModal.html">
                  GlideModal.js
                </a>
              
                
                <a class="source" href="GlideModalForm.html">
                  GlideModalForm.js
                </a>
              
                
                <a class="source" href="GlideNavigation.html">
                  GlideNavigation.js
                </a>
              
                
                <a class="source" href="GlideOverlay.html">
                  GlideOverlay.js
                </a>
              
                
                <a class="source" href="GlidePane.html">
                  GlidePane.js
                </a>
              
                
                <a class="source" href="GlidePaneForm.html">
                  GlidePaneForm.js
                </a>
              
                
                <a class="source" href="GlideRecord.html">
                  GlideRecord.js
                </a>
              
                
                <a class="source" href="GlideTabs2.html">
                  GlideTabs2.js
                </a>
              
                
                <a class="source" href="GlideTabs2State.html">
                  GlideTabs2State.js
                </a>
              
                
                <a class="source" href="GlideTabs2Tab.html">
                  GlideTabs2Tab.js
                </a>
              
                
                <a class="source" href="GlideTimeElement.html">
                  GlideTimeElement.js
                </a>
              
                
                <a class="source" href="GlideTimerElement.html">
                  GlideTimerElement.js
                </a>
              
                
                <a class="source" href="GlideTransactionScope.html">
                  GlideTransactionScope.js
                </a>
              
                
                <a class="source" href="GlideUI.html">
                  GlideUI.js
                </a>
              
                
                <a class="source" href="GlideUIDefault.html">
                  GlideUIDefault.js
                </a>
              
                
                <a class="source" href="GlideUIElement.html">
                  GlideUIElement.js
                </a>
              
                
                <a class="source" href="GlideUINotification.html">
                  GlideUINotification.js
                </a>
              
                
                <a class="source" href="GlideURL.html">
                  GlideURL.js
                </a>
              
                
                <a class="source" href="GlideURLElement.html">
                  GlideURLElement.js
                </a>
              
                
                <a class="source" href="GlideUser.html">
                  GlideUser.js
                </a>
              
                
                <a class="source" href="GlideUserImageElement.html">
                  GlideUserImageElement.js
                </a>
              
                
                <a class="source" href="GlideWidgetFilter.html">
                  GlideWidgetFilter.js
                </a>
              
                
                <a class="source" href="GlideWidgetHideOnEmpty.html">
                  GlideWidgetHideOnEmpty.js
                </a>
              
                
                <a class="source" href="GlideWidgetSearch.html">
                  GlideWidgetSearch.js
                </a>
              
                
                <a class="source" href="GlideWidgetVCR.html">
                  GlideWidgetVCR.js
                </a>
              
                
                <a class="source" href="GlideWindow.html">
                  GlideWindow.js
                </a>
              
                
                <a class="source" href="GuidedTourElementTranslator.html">
                  GuidedTourElementTranslator.js
                </a>
              
                
                <a class="source" href="GwtCellEditor.html">
                  GwtCellEditor.js
                </a>
              
                
                <a class="source" href="GwtCellSelector.html">
                  GwtCellSelector.js
                </a>
              
                
                <a class="source" href="GwtContextMenu.html">
                  GwtContextMenu.js
                </a>
              
                
                <a class="source" href="GwtDate.html">
                  GwtDate.js
                </a>
              
                
                <a class="source" href="GwtDraggable.html">
                  GwtDraggable.js
                </a>
              
                
                <a class="source" href="GwtDraggableSnap.html">
                  GwtDraggableSnap.js
                </a>
              
                
                <a class="source" href="GwtExportScheduleDialog.html">
                  GwtExportScheduleDialog.js
                </a>
              
                
                <a class="source" href="GwtGridEdit.html">
                  GwtGridEdit.js
                </a>
              
                
                <a class="source" href="GwtListEditAjaxChangeSaver.html">
                  GwtListEditAjaxChangeSaver.js
                </a>
              
                
                <a class="source" href="GwtListEditAjaxValueLoader.html">
                  GwtListEditAjaxValueLoader.js
                </a>
              
                
                <a class="source" href="GwtListEditBoolean.html">
                  GwtListEditBoolean.js
                </a>
              
                
                <a class="source" href="GwtListEditCalendar.html">
                  GwtListEditCalendar.js
                </a>
              
                
                <a class="source" href="GwtListEditDependent.html">
                  GwtListEditDependent.js
                </a>
              
                
                <a class="source" href="GwtListEditDuration.html">
                  GwtListEditDuration.js
                </a>
              
                
                <a class="source" href="GwtListEditEncryptedText.html">
                  GwtListEditEncryptedText.js
                </a>
              
                
                <a class="source" href="GwtListEditGList.html">
                  GwtListEditGList.js
                </a>
              
                
                <a class="source" href="GwtListEditGlideRecord.html">
                  GwtListEditGlideRecord.js
                </a>
              
                
                <a class="source" href="GwtListEditGridSelector.html">
                  GwtListEditGridSelector.js
                </a>
              
                
                <a class="source" href="GwtListEditInternalType.html">
                  GwtListEditInternalType.js
                </a>
              
                
                <a class="source" href="GwtListEditJournal.html">
                  GwtListEditJournal.js
                </a>
              
                
                <a class="source" href="GwtListEditPassword.html">
                  GwtListEditPassword.js
                </a>
              
                
                <a class="source" href="GwtListEditRecordDecorations.html">
                  GwtListEditRecordDecorations.js
                </a>
              
                
                <a class="source" href="GwtListEditReference.html">
                  GwtListEditReference.js
                </a>
              
                
                <a class="source" href="GwtListEditRelatedTags.html">
                  GwtListEditRelatedTags.js
                </a>
              
                
                <a class="source" href="GwtListEditSavePolicy.html">
                  GwtListEditSavePolicy.js
                </a>
              
                
                <a class="source" href="GwtListEditSelect.html">
                  GwtListEditSelect.js
                </a>
              
                
                <a class="source" href="GwtListEditTableController.html">
                  GwtListEditTableController.js
                </a>
              
                
                <a class="source" href="GwtListEditText.html">
                  GwtListEditText.js
                </a>
              
                
                <a class="source" href="GwtListEditTranslatedField.html">
                  GwtListEditTranslatedField.js
                </a>
              
                
                <a class="source" href="GwtListEditUpdateTablename.html">
                  GwtListEditUpdateTablename.js
                </a>
              
                
                <a class="source" href="GwtListEditValueRenderer.html">
                  GwtListEditValueRenderer.js
                </a>
              
                
                <a class="source" href="GwtListEditWindow.html">
                  GwtListEditWindow.js
                </a>
              
                
                <a class="source" href="GwtListEditor.html">
                  GwtListEditor.js
                </a>
              
                
                <a class="source" href="GwtListEditorPendingChanges.html">
                  GwtListEditorPendingChanges.js
                </a>
              
                
                <a class="source" href="GwtMessage14.html">
                  GwtMessage14.js
                </a>
              
                
                <a class="source" href="GwtObservable.html">
                  GwtObservable.js
                </a>
              
                
                <a class="source" href="GwtPollDialog.html">
                  GwtPollDialog.js
                </a>
              
                
                <a class="source" href="InPlaceEdit.html">
                  InPlaceEdit.js
                </a>
              
                
                <a class="source" href="ListDraggableRow2.html">
                  ListDraggableRow2.js
                </a>
              
                
                <a class="source" href="ListSelectManager2.html">
                  ListSelectManager2.js
                </a>
              
                
                <a class="source" href="ListSortDual2.html">
                  ListSortDual2.js
                </a>
              
                
                <a class="source" href="ListSortWindow2.html">
                  ListSortWindow2.js
                </a>
              
                
                <a class="source" href="NOW.messaging.html">
                  NOW.messaging.js
                </a>
              
                
                <a class="source" href="NOW.messaging.record.html">
                  NOW.messaging.record.js
                </a>
              
                
                <a class="source" href="NameMapEntry.html">
                  NameMapEntry.js
                </a>
              
                
                <a class="source" href="NotificationMessage.html">
                  NotificationMessage.js
                </a>
              
                
                <a class="source" href="PageTiming14.html">
                  PageTiming14.js
                </a>
              
                
                <a class="source" href="PersonalizeForm.html">
                  PersonalizeForm.js
                </a>
              
                
                <a class="source" href="Point.html">
                  Point.js
                </a>
              
                
                <a class="source" href="SLARepairClient.html">
                  SLARepairClient.js
                </a>
              
                
                <a class="source" href="ScriptLoader.html">
                  ScriptLoader.js
                </a>
              
                
                <a class="source" href="Select.html">
                  Select.js
                </a>
              
                
                <a class="source" href="SlushBucket.html">
                  SlushBucket.js
                </a>
              
                
                <a class="source" href="SortDraggable2.html">
                  SortDraggable2.js
                </a>
              
                
                <a class="source" href="SortListManager2.html">
                  SortListManager2.js
                </a>
              
                
                <a class="source" href="SortUtil2.html">
                  SortUtil2.js
                </a>
              
                
                <a class="source" href="StopWatch.html">
                  StopWatch.js
                </a>
              
                
                <a class="source" href="Table.html">
                  Table.js
                </a>
              
                
                <a class="source" href="TableElement.html">
                  TableElement.js
                </a>
              
                
                <a class="source" href="TableExtension.html">
                  TableExtension.js
                </a>
              
                
                <a class="source" href="TemplateRecord.html">
                  TemplateRecord.js
                </a>
              
                
                <a class="source" href="TextAreaElement.html">
                  TextAreaElement.js
                </a>
              
                
                <a class="source" href="UserRolesElement.html">
                  UserRolesElement.js
                </a>
              
                
                <a class="source" href="UtilityAndOverrides2.html">
                  UtilityAndOverrides2.js
                </a>
              
                
                <a class="source" href="_module.html">
                  _module.js
                </a>
              
                
                <a class="source" href="ac.html">
                  ac.js
                </a>
              
                
                <a class="source" href="ac_derived_field_support.html">
                  ac_derived_field_support.js
                </a>
              
                
                <a class="source" href="accessibility_tabindex.html">
                  accessibility_tabindex.js
                </a>
              
                
                <a class="source" href="affix.html">
                  affix.js
                </a>
              
                
                <a class="source" href="alert.html">
                  alert.js
                </a>
              
                
                <a class="source" href="amb.Channel.html">
                  amb.Channel.js
                </a>
              
                
                <a class="source" href="amb.ChannelRedirect.html">
                  amb.ChannelRedirect.js
                </a>
              
                
                <a class="source" href="amb.Logger.html">
                  amb.Logger.js
                </a>
              
                
                <a class="source" href="amb.MessageClient.html">
                  amb.MessageClient.js
                </a>
              
                
                <a class="source" href="amb.ServerConnection.html">
                  amb.ServerConnection.js
                </a>
              
                
                <a class="source" href="amb_initialize.html">
                  amb_initialize.js
                </a>
              
                
                <a class="source" href="amb_properties.html">
                  amb_properties.js
                </a>
              
                
                <a class="source" href="annotations_toggle.html">
                  annotations_toggle.js
                </a>
              
                
                <a class="source" href="app.form_presence.html">
                  app.form_presence.js
                </a>
              
                
                <a class="source" href="app_guided_tours.html">
                  app_guided_tours.js
                </a>
              
                
                <a class="source" href="button.html">
                  button.js
                </a>
              
                
                <a class="source" href="calendar.html">
                  calendar.js
                </a>
              
                
                <a class="source" href="carousel.html">
                  carousel.js
                </a>
              
                
                <a class="source" href="collapse.html">
                  collapse.js
                </a>
              
                
                <a class="source" href="cometd.html">
                  cometd.js
                </a>
              
                
                <a class="source" href="condition14_new.html">
                  condition14_new.js
                </a>
              
                
                <a class="source" href="condition14_reporting.html">
                  condition14_reporting.js
                </a>
              
                
                <a class="source" href="condition14_templates.html">
                  condition14_templates.js
                </a>
              
                
                <a class="source" href="condition_global_variables14.html">
                  condition_global_variables14.js
                </a>
              
                
                <a class="source" href="constants_embedded_help.html">
                  constants_embedded_help.js
                </a>
              
                
                <a class="source" href="context_actions.html">
                  context_actions.js
                </a>
              
                
                <a class="source" href="controller.guidedTours.html">
                  controller.guidedTours.js
                </a>
              
                
                <a class="source" href="deferred_related_lists.html">
                  deferred_related_lists.js
                </a>
              
                
                <a class="source" href="depends.html">
                  depends.js
                </a>
              
                
                <a class="source" href="directive.snBindPopoverSelection.html">
                  directive.snBindPopoverSelection.js
                </a>
              
                
                <a class="source" href="directive.snComplexPopover.html">
                  directive.snComplexPopover.js
                </a>
              
                
                <a class="source" href="dropdown.html">
                  dropdown.js
                </a>
              
                
                <a class="source" href="dropdowns.html">
                  dropdowns.js
                </a>
              
                
                <a class="source" href="email_activity.html">
                  email_activity.js
                </a>
              
                
                <a class="source" href="event_initialize.html">
                  event_initialize.js
                </a>
              
                
                <a class="source" href="fixedHeaders.html">
                  fixedHeaders.js
                </a>
              
                
                <a class="source" href="form_submitted_mask.html">
                  form_submitted_mask.js
                </a>
              
                
                <a class="source" href="form_tags.html">
                  form_tags.js
                </a>
              
                
                <a class="source" href="formatting.html">
                  formatting.js
                </a>
              
                
                <a class="source" href="functions.html">
                  functions.js
                </a>
              
                
                <a class="source" href="functions_attachments.html">
                  functions_attachments.js
                </a>
              
                
                <a class="source" href="functions_bootstrap14.html">
                  functions_bootstrap14.js
                </a>
              
                
                <a class="source" href="functions_calendar.html">
                  functions_calendar.js
                </a>
              
                
                <a class="source" href="functions_clipboard.html">
                  functions_clipboard.js
                </a>
              
                
                <a class="source" href="functions_email.html">
                  functions_email.js
                </a>
              
                
                <a class="source" href="functions_fontsizer.html">
                  functions_fontsizer.js
                </a>
              
                
                <a class="source" href="functions_onchange.html">
                  functions_onchange.js
                </a>
              
                
                <a class="source" href="functions_reference.html">
                  functions_reference.js
                </a>
              
                
                <a class="source" href="functions_showloading.html">
                  functions_showloading.js
                </a>
              
                
                <a class="source" href="functions_user_image.html">
                  functions_user_image.js
                </a>
              
                
                <a class="source" href="glide-highcharts-v5.html">
                  glide-highcharts-v5.js
                </a>
              
                
                <a class="source" href="guided_tours_template.html">
                  guided_tours_template.js
                </a>
              
                
                <a class="source" href="heisenberg_all.html">
                  heisenberg_all.js
                </a>
              
                
                <a class="source" href="jquery-1.11.0_no_conflict.html">
                  jquery-1.11.0_no_conflict.js
                </a>
              
                
                <a class="source" href="jquery.cometd.html">
                  jquery.cometd.js
                </a>
              
                
                <a class="source" href="jquery_clean.html">
                  jquery_clean.js
                </a>
              
                
                <a class="source" href="jquery_includes.html">
                  jquery_includes.js
                </a>
              
                
                <a class="source" href="js_guided_tours_includes.html">
                  js_guided_tours_includes.js
                </a>
              
                
                <a class="source" href="js_includes_amb.html">
                  js_includes_amb.js
                </a>
              
                
                <a class="source" href="js_includes_customer.html">
                  js_includes_customer.js
                </a>
              
                
                <a class="source" href="js_includes_doctype.html">
                  js_includes_doctype.js
                </a>
              
                
                <a class="source" href="js_includes_form_presence.html">
                  js_includes_form_presence.js
                </a>
              
                
                <a class="source" href="js_includes_last_doctype.html">
                  js_includes_last_doctype.js
                </a>
              
                
                <a class="source" href="js_includes_list_edit_doctype.html">
                  js_includes_list_edit_doctype.js
                </a>
              
                
                <a class="source" href="js_includes_listv2_doctype.html">
                  js_includes_listv2_doctype.js
                </a>
              
                
                <a class="source" href="js_includes_sorting_new.html">
                  js_includes_sorting_new.js
                </a>
              
                
                <a class="source" href="js_includes_ui_popover.html">
                  js_includes_ui_popover.js
                </a>
              
                
                <a class="source" href="list_filter.html">
                  list_filter.js
                </a>
              
                
                <a class="source" href="magellan.CreateFavoriteModal.html">
                  magellan.CreateFavoriteModal.js
                </a>
              
                
                <a class="source" href="modal.html">
                  modal.js
                </a>
              
                
                <a class="source" href="modals.html">
                  modals.js
                </a>
              
                
                <a class="source" href="newtag-it.html">
                  newtag-it.js
                </a>
              
                
                <a class="source" href="popover.html">
                  popover.js
                </a>
              
                
                <a class="source" href="popovers.html">
                  popovers.js
                </a>
              
                
                <a class="source" href="popupdivs14.html">
                  popupdivs14.js
                </a>
              
                
                <a class="source" href="popups.html">
                  popups.js
                </a>
              
                
                <a class="source" href="prototype.effects.html">
                  prototype.effects.js
                </a>
              
                
                <a class="source" href="prototype.hidefix.html">
                  prototype.hidefix.js
                </a>
              
                
                <a class="source" href="prototype.html">
                  prototype.js
                </a>
              
                
                <a class="source" href="prototype.plugin.html">
                  prototype.plugin.js
                </a>
              
                
                <a class="source" href="prototype.template.html">
                  prototype.template.js
                </a>
              
                
                <a class="source" href="scoped_object_generators.html">
                  scoped_object_generators.js
                </a>
              
                
                <a class="source" href="scrollable.html">
                  scrollable.js
                </a>
              
                
                <a class="source" href="scrollspy.html">
                  scrollspy.js
                </a>
              
                
                <a class="source" href="section.html">
                  section.js
                </a>
              
                
                <a class="source" href="selects.html">
                  selects.js
                </a>
              
                
                <a class="source" href="service.guidedToursService.html">
                  service.guidedToursService.js
                </a>
              
                
                <a class="source" href="service.snComplexPopoverService.html">
                  service.snComplexPopoverService.js
                </a>
              
                
                <a class="source" href="service.userData.html">
                  service.userData.js
                </a>
              
                
                <a class="source" href="simpleStorage.html">
                  simpleStorage.js
                </a>
              
                
                <a class="source" href="snPopover.html">
                  snPopover.js
                </a>
              
                
                <a class="source" href="tables.html">
                  tables.js
                </a>
              
                
                <a class="source" href="tabs.html">
                  tabs.js
                </a>
              
                
                <a class="source" href="tabs2_14.html">
                  tabs2_14.js
                </a>
              
                
                <a class="source" href="textutil.html">
                  textutil.js
                </a>
              
                
                <a class="source" href="timeAgo.html">
                  timeAgo.js
                </a>
              
                
                <a class="source" href="tooltip.html">
                  tooltip.js
                </a>
              
                
                <a class="source" href="tooltips.html">
                  tooltips.js
                </a>
              
                
                <a class="source" href="transaction_scope_includes.html">
                  transaction_scope_includes.js
                </a>
              
                
                <a class="source" href="transition.html">
                  transition.js
                </a>
              
                
                <a class="source" href="ui_policy.html">
                  ui_policy.js
                </a>
              
                
                <a class="source" href="utils14.html">
                  utils14.js
                </a>
              
                
                <a class="source" href="xmlhttp.html">
                  xmlhttp.js
                </a>
              
                
                <a class="source" href="z_last_include.html">
                  z_last_include.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>js_includes_listv2_doctype.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/*! RESOURCE: /scripts/classes/doctype/js_includes_listv2_doctype.js */</span>
<span class="hljs-comment">/*! RESOURCE: /scripts/classes/doctype/GlideList2.js */</span>
<span class="hljs-keyword">var</span> GlideList2 = Class.create(GwtObservable, {
  <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">listID, tableName, query</span>) </span>{
    GwtObservable.prototype.initialize.call(<span class="hljs-keyword">this</span>);
    <span class="hljs-keyword">this</span>.filterQueryPrefix = <span class="hljs-string">""</span>;
    <span class="hljs-keyword">this</span>.listContainer = $(listID + <span class="hljs-string">"_list"</span>);
    <span class="hljs-keyword">this</span>.listDiv = $(listID);
    <span class="hljs-keyword">this</span>.listID = listID;
    <span class="hljs-keyword">this</span>.listName = listID;
    <span class="hljs-keyword">this</span>.properties = <span class="hljs-string">""</span>;
    GlideLists2[<span class="hljs-keyword">this</span>.listID] = <span class="hljs-keyword">this</span>;
    <span class="hljs-keyword">this</span>.lastChecked = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">this</span>.title = <span class="hljs-string">""</span>;
    <span class="hljs-keyword">this</span>.view = <span class="hljs-string">""</span>;
    <span class="hljs-keyword">this</span>.filter = <span class="hljs-string">""</span>;
    <span class="hljs-keyword">this</span>.parentTable = <span class="hljs-string">""</span>;
    <span class="hljs-keyword">this</span>.related = <span class="hljs-string">""</span>;
    <span class="hljs-keyword">this</span>.listControlID = <span class="hljs-string">"-1"</span>;
    <span class="hljs-keyword">this</span>.embedded = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">this</span>.orderBy = [];
    <span class="hljs-keyword">this</span>.groupBy = [];
    <span class="hljs-keyword">this</span>.orderBySet = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">this</span>.sortBy = <span class="hljs-string">""</span>;
    <span class="hljs-keyword">this</span>.sortDir = <span class="hljs-string">""</span>;
    <span class="hljs-keyword">this</span>.refreshPage = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">this</span>.firstRow = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">this</span>.lastRow = <span class="hljs-number">20</span>;
    <span class="hljs-keyword">this</span>.rowsPerPage = <span class="hljs-number">20</span>;
    <span class="hljs-keyword">this</span>.totalRows = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">this</span>.grandTotalRows = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">this</span>.submitValues = {};
    <span class="hljs-keyword">this</span>.doNotSubmitParams = {};
    <span class="hljs-keyword">this</span>.fields = <span class="hljs-string">""</span>;
    <span class="hljs-keyword">this</span>.tableName = tableName;
    <span class="hljs-keyword">this</span>.table = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">this</span>.referringURL = <span class="hljs-string">""</span>;
    <span class="hljs-keyword">this</span>.titleMenu = <span class="hljs-keyword">new</span> GlideMenu(<span class="hljs-keyword">this</span>.listID, <span class="hljs-string">'titleMenu'</span>);
    <span class="hljs-keyword">this</span>.headerMenu = <span class="hljs-keyword">new</span> GlideMenu(<span class="hljs-keyword">this</span>.listID, <span class="hljs-string">'headerMenu'</span>);
    <span class="hljs-keyword">this</span>.rowMenu = <span class="hljs-keyword">new</span> GlideMenu(<span class="hljs-keyword">this</span>.listID, <span class="hljs-string">'rowMenu'</span>);
    <span class="hljs-keyword">this</span>.userList = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">this</span>.onclickFunc = <span class="hljs-keyword">this</span>.click.bindAsEventListener(<span class="hljs-keyword">this</span>);
    <span class="hljs-keyword">this</span>.ondblclickFunc = <span class="hljs-keyword">this</span>.dblClick.bindAsEventListener(<span class="hljs-keyword">this</span>);
    <span class="hljs-keyword">this</span>.printFunc = <span class="hljs-keyword">this</span>.onPrint.bind(<span class="hljs-keyword">this</span>);
    <span class="hljs-keyword">this</span>._initMessageBus();
    <span class="hljs-keyword">this</span>._parseQuery(query, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>);
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isHierarchical()) {
      <span class="hljs-keyword">var</span> columnHeader = $(<span class="hljs-string">"hdr_"</span> + <span class="hljs-keyword">this</span>.listID);
      <span class="hljs-keyword">var</span> columnHeaderPref = columnHeader.getAttribute(<span class="hljs-string">"data-show_column_header"</span>);
      <span class="hljs-keyword">if</span> (columnHeader.visible() &amp;&amp; !columnHeaderPref)
        <span class="hljs-keyword">this</span>.toggleColumnHeader();
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!columnHeader.visible() &amp;&amp; columnHeaderPref)
        <span class="hljs-keyword">this</span>.toggleColumnHeader();
    }
  },
  <span class="hljs-attr">isHierarchical</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> $(<span class="hljs-keyword">this</span>.listID).hasClassName(<span class="hljs-string">"hierarchical"</span>);
  },
  <span class="hljs-attr">destroy</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.handlePrint(<span class="hljs-literal">false</span>);
    <span class="hljs-keyword">this</span>._clear();
    <span class="hljs-keyword">this</span>.listContainer = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">this</span>.listDiv = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">this</span>.titleMenu.destroy();
    <span class="hljs-keyword">this</span>.titleMenu = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">this</span>.headerMenu.destroy();
    <span class="hljs-keyword">this</span>.headerMenu = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">this</span>.rowMenu.destroy();
    <span class="hljs-keyword">this</span>.rowMenu = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">this</span>.form = <span class="hljs-literal">null</span>;
  },
  <span class="hljs-attr">getQuery</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">options</span>) </span>{
    options = options || {};
    <span class="hljs-keyword">var</span> q = [];
    <span class="hljs-keyword">if</span> (options.fixed || options.all) {
      <span class="hljs-keyword">var</span> fq = <span class="hljs-keyword">this</span>.submitValues[<span class="hljs-string">'sysparm_fixed_query'</span>];
      <span class="hljs-keyword">if</span> (fq)
        q.push(fq);
    }
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.filter)
      q.push(<span class="hljs-keyword">this</span>.filter);
    <span class="hljs-keyword">if</span> ((options.orderby || options.all) &amp;&amp; <span class="hljs-keyword">this</span>.orderBy.length &gt; <span class="hljs-number">0</span>)
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.orderBySet)
        q.push(<span class="hljs-keyword">this</span>.orderBy.join(<span class="hljs-string">'^'</span>));
    <span class="hljs-keyword">if</span> ((options.groupby || options.all) &amp;&amp; <span class="hljs-keyword">this</span>.groupBy.length &gt; <span class="hljs-number">0</span>)
      q.push(<span class="hljs-keyword">this</span>.groupBy.join(<span class="hljs-string">'^'</span>));
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; q.length; i++) {
      <span class="hljs-keyword">if</span> (q[i].indexOf(<span class="hljs-string">'^'</span>) === <span class="hljs-number">0</span>) {
        q[i] = q[i].substring(<span class="hljs-number">1</span>);
      }
    }
    <span class="hljs-keyword">return</span> q.join(<span class="hljs-string">'^'</span>);
  },
  <span class="hljs-attr">getRelatedQuery</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.getRelated())
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getSubmitValue(<span class="hljs-string">'sysparm_collection_key'</span>) + <span class="hljs-string">"="</span> + <span class="hljs-keyword">this</span>.getSubmitValue(<span class="hljs-string">'sysparm_collectionID'</span>);
  },
  <span class="hljs-attr">getFixedQuery</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.submitValues[<span class="hljs-string">'sysparm_fixed_query'</span>] + <span class="hljs-string">''</span>;
  },
  <span class="hljs-attr">getGroupBy</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.groupBy.join(<span class="hljs-string">","</span>);
  },
  <span class="hljs-attr">getHeaderCell</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName</span>) </span>{
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.table)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.table.down(<span class="hljs-string">'th.list_header_cell[name="'</span> + <span class="hljs-keyword">this</span>._stripFieldName(fieldName) + <span class="hljs-string">'"]'</span>);
  },
  <span class="hljs-attr">getRow</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId</span>) </span>{
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.table)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.table.down(<span class="hljs-string">'tr.list_row[sys_id="'</span> + sysId + <span class="hljs-string">'"]'</span>);
  },
  <span class="hljs-attr">getCell</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, fieldName</span>) </span>{
    <span class="hljs-keyword">var</span> tr = <span class="hljs-keyword">this</span>.getRow(sysId);
    <span class="hljs-keyword">if</span> (!tr)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">var</span> ndx = <span class="hljs-keyword">this</span>.fieldNdxs[<span class="hljs-keyword">this</span>._stripFieldName(fieldName)];
    <span class="hljs-keyword">if</span> (ndx == <span class="hljs-literal">null</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">return</span> tr.cells[ndx];
  },
  <span class="hljs-attr">getChecked</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> ids = [];
    <span class="hljs-keyword">var</span> chks = <span class="hljs-keyword">this</span>._getCheckboxes();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; chks.length; i++) {
      <span class="hljs-keyword">var</span> chk = chks[i];
      <span class="hljs-keyword">if</span> (chk.type != <span class="hljs-string">"checkbox"</span>)
        <span class="hljs-keyword">continue</span>;
      <span class="hljs-keyword">if</span> (!chk.checked)
        <span class="hljs-keyword">continue</span>;
      ids.push($(chk).up(<span class="hljs-string">'tr'</span>).getAttribute(<span class="hljs-string">"sys_id"</span>));
    }
    <span class="hljs-keyword">this</span>.checkedIds = ids.join(<span class="hljs-string">","</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.checkedIds;
  },
  <span class="hljs-attr">getContainer</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.listContainer;
  },
  <span class="hljs-attr">getContainerFrame</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">window</span>.self.frameElement;
  },
  <span class="hljs-attr">_stripFieldName</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName</span>) </span>{
    <span class="hljs-keyword">if</span> (fieldName &amp;&amp; fieldName.startsWith(<span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">'.'</span>))
      <span class="hljs-keyword">return</span> fieldName.substring(<span class="hljs-keyword">this</span>.tableName.length + <span class="hljs-number">1</span>);
    <span class="hljs-keyword">return</span> fieldName;
  },
  <span class="hljs-attr">loaded</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>._initList();
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.fireEvent(<span class="hljs-string">"list.loaded"</span>, <span class="hljs-keyword">this</span>.table, <span class="hljs-keyword">this</span>) === <span class="hljs-literal">false</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">if</span> (CustomEvent.fire(<span class="hljs-string">"list.loaded"</span>, <span class="hljs-keyword">this</span>.table, <span class="hljs-keyword">this</span>) === <span class="hljs-literal">false</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.getRelated() &amp;&amp; <span class="hljs-keyword">this</span>.titleMenu &amp;&amp; GlideList2.listsMap)
      <span class="hljs-keyword">this</span>.setupRelatedListContextMenuItems();
    <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">var</span> otherListsSpan = $(<span class="hljs-keyword">this</span>.listID + <span class="hljs-string">"_other_lists_span"</span>);
      <span class="hljs-keyword">if</span> (otherListsSpan &amp;&amp; otherListsSpan.visible())
        otherListsSpan.toggle();
    }
    <span class="hljs-keyword">this</span>.listDiv.on(<span class="hljs-string">'mouseover'</span>, <span class="hljs-string">'tr.list_row'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ev, el</span>) </span>{
      <span class="hljs-keyword">this</span>._addHoveredRowHighlight(el);
    }.bind(<span class="hljs-keyword">this</span>));
    <span class="hljs-keyword">this</span>.listDiv.on(<span class="hljs-string">'mouseout'</span>, <span class="hljs-string">'tr.list_row'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ev, el</span>) </span>{
      <span class="hljs-keyword">this</span>._removeHoveredRowHighlight(el);
    }.bind(<span class="hljs-keyword">this</span>));
    <span class="hljs-keyword">this</span>._restoreColumnHeaderToggleState();
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isHierarchical())
      GwtListEditor.forPage._prepareTable(<span class="hljs-keyword">this</span>.table, <span class="hljs-string">"click"</span>);
    CustomEvent.observe(<span class="hljs-string">'list.select_row'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">payload</span>) </span>{
      <span class="hljs-keyword">var</span> sysId = payload.sys_Id;
      <span class="hljs-keyword">var</span> table = payload.table;
      <span class="hljs-keyword">this</span>._highlightSelectedRow(table, sysId);
    }.bind(<span class="hljs-keyword">this</span>));
    <span class="hljs-keyword">this</span>._fireListReady();
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.onLoad();
  },
  <span class="hljs-attr">setupRelatedListContextMenuItems</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> listID, i, glideList;
    <span class="hljs-keyword">var</span> relatedParentSysId = $(<span class="hljs-keyword">this</span>.listID + <span class="hljs-string">"_table"</span>).up(<span class="hljs-string">"tr.list_hierarchical_hdr"</span>).previousSiblings()[<span class="hljs-number">0</span>].getAttribute(<span class="hljs-string">"sys_id"</span>);
    <span class="hljs-keyword">var</span> currentRelatedList = <span class="hljs-keyword">this</span>.getCurrentRelatedList();
    <span class="hljs-keyword">var</span> listElems = GlideList2.listsMap[relatedParentSysId];
    <span class="hljs-keyword">var</span> hasLists = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">if</span> (listElems &amp;&amp; listElems.length &gt; <span class="hljs-number">1</span>) {
      hasLists = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; listElems.length; i++) {
        listID = listElems[i].select(<span class="hljs-string">".list_div"</span>)[<span class="hljs-number">0</span>].getAttribute(<span class="hljs-string">"id"</span>);
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> GlideList2.get(listID) === <span class="hljs-string">'undefined'</span>) {
          hasLists = <span class="hljs-literal">false</span>;
        }
      }
    }
    <span class="hljs-keyword">if</span> (hasLists) {
      <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; listElems.length; i++) {
        listID = listElems[i].select(<span class="hljs-string">".list_div"</span>)[<span class="hljs-number">0</span>].getAttribute(<span class="hljs-string">"id"</span>);
        <span class="hljs-keyword">var</span> otherListsSpan = $(listID + <span class="hljs-string">"_other_lists_span"</span>);
        <span class="hljs-keyword">if</span> (otherListsSpan) {
          <span class="hljs-keyword">if</span> (!otherListsSpan.visible())
            otherListsSpan.toggle();
          otherListsSpan.update(<span class="hljs-string">" [1 "</span> + getMessage(<span class="hljs-string">"of"</span>) + <span class="hljs-string">" "</span> +
            listElems.length + <span class="hljs-string">" "</span> + getMessage(<span class="hljs-string">"Lists"</span>) + <span class="hljs-string">"]"</span>);
        }
      }
      <span class="hljs-keyword">this</span>.titleMenu.increaseItemsOrder(listElems.length + <span class="hljs-number">2</span>);
      <span class="hljs-keyword">var</span> title = <span class="hljs-string">"&lt;span style='font-weight: bold'&gt;"</span> + getMessage(<span class="hljs-string">"Related Lists"</span>) + <span class="hljs-string">"&lt;/span&gt;"</span>;
      <span class="hljs-keyword">this</span>.titleMenu.addItem(<span class="hljs-keyword">this</span>.listID, <span class="hljs-string">''</span>, title, <span class="hljs-string">'label'</span>, <span class="hljs-string">''</span>, <span class="hljs-number">0</span>);
      <span class="hljs-keyword">var</span> total = $(gel(<span class="hljs-keyword">this</span>.listID + <span class="hljs-string">"_table"</span>)).getAttribute(<span class="hljs-string">"total_rows"</span>);
      title = <span class="hljs-string">"&lt;span style='color: #888'&gt;&amp;nbsp;&amp;nbsp;"</span> + <span class="hljs-keyword">this</span>.getTitle() + <span class="hljs-string">" ("</span> + total + <span class="hljs-string">")&lt;/span&gt;"</span>;
      <span class="hljs-keyword">this</span>.titleMenu.addItem(<span class="hljs-keyword">this</span>.listID, <span class="hljs-string">''</span>, title, <span class="hljs-string">'action'</span>, <span class="hljs-string">''</span>, <span class="hljs-number">1</span>);
      <span class="hljs-keyword">var</span> count = <span class="hljs-number">2</span>;
      <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; listElems.length; i++) {
        listID = listElems[i].select(<span class="hljs-string">".list_div"</span>)[<span class="hljs-number">0</span>].getAttribute(<span class="hljs-string">"id"</span>);
        <span class="hljs-keyword">if</span> (listID != <span class="hljs-keyword">this</span>.listID) {
          total = $(gel(listID + <span class="hljs-string">"_table"</span>)).getAttribute(<span class="hljs-string">"total_rows"</span>);
          title = GlideList2.get(listID).getTitle() + <span class="hljs-string">" ("</span> + total + <span class="hljs-string">")"</span>;
          <span class="hljs-keyword">var</span> onClick = <span class="hljs-string">"GlideList2.get('"</span> + listID + <span class="hljs-string">"').relatedListSwitch('"</span> + <span class="hljs-keyword">this</span>.listContainer.getAttribute(<span class="hljs-string">"id"</span>) + <span class="hljs-string">"');"</span>;
          <span class="hljs-keyword">this</span>.titleMenu.addItem(listID, <span class="hljs-string">''</span>, <span class="hljs-string">"&amp;nbsp;&amp;nbsp;"</span> + title, <span class="hljs-string">'action'</span>, onClick, count);
          count++;
        }
      }
      <span class="hljs-keyword">this</span>.titleMenu.addItem(<span class="hljs-keyword">this</span>.listID + <span class="hljs-string">"_line2"</span>, <span class="hljs-string">''</span>, <span class="hljs-string">''</span>, <span class="hljs-string">'line'</span>, <span class="hljs-string">''</span>, count);
      <span class="hljs-keyword">var</span> foundMatch = <span class="hljs-literal">false</span>;
      <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; listElems.length; i++) {
        listID = listElems[i].select(<span class="hljs-string">".list_div"</span>)[<span class="hljs-number">0</span>].getAttribute(<span class="hljs-string">"id"</span>);
        glideList = GlideList2.get(listID);
        <span class="hljs-keyword">var</span> currentRelatedListName = $(listID + <span class="hljs-string">"_table"</span>).getAttribute(<span class="hljs-string">"hier_list_name"</span>);
        <span class="hljs-keyword">if</span> (currentRelatedList == currentRelatedListName)
          foundMatch = <span class="hljs-literal">true</span>;
      }
      <span class="hljs-keyword">if</span> (foundMatch) {
        <span class="hljs-keyword">var</span> alreadyDisplayingARelatedList = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; listElems.length; i++) {
          listID = listElems[i].select(<span class="hljs-string">".list_div"</span>)[<span class="hljs-number">0</span>].getAttribute(<span class="hljs-string">"id"</span>);
          glideList = GlideList2.get(listID);
          <span class="hljs-keyword">var</span> currentRelatedListName = $(listID + <span class="hljs-string">"_table"</span>).getAttribute(<span class="hljs-string">"hier_list_name"</span>);
          <span class="hljs-keyword">if</span> (currentRelatedList != currentRelatedListName || alreadyDisplayingARelatedList) {
            <span class="hljs-keyword">if</span> (listElems[i].visible())
              listElems[i].toggle();
          } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (currentRelatedList == currentRelatedListName &amp;&amp; !alreadyDisplayingARelatedList) {
            <span class="hljs-keyword">if</span> (!listElems[i].visible())
              listElems[i].toggle();
            alreadyDisplayingARelatedList = <span class="hljs-literal">true</span>;
          }
        }
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">if</span> (!listElems[<span class="hljs-number">0</span>].visible())
          listElems[<span class="hljs-number">0</span>].toggle();
      }
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">if</span> (listElems &amp;&amp; listElems.length == <span class="hljs-number">1</span> &amp;&amp; !listElems[<span class="hljs-number">0</span>].visible())
        listElems[<span class="hljs-number">0</span>].toggle();
      <span class="hljs-keyword">var</span> otherListsSpan = $(<span class="hljs-keyword">this</span>.listID + <span class="hljs-string">"_other_lists_span"</span>);
      <span class="hljs-keyword">if</span> (otherListsSpan &amp;&amp; otherListsSpan.visible())
        otherListsSpan.toggle();
    }
  },
  <span class="hljs-attr">relatedListSwitch</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">otherListElemID</span>) </span>{
    $(otherListElemID).toggle();
    <span class="hljs-keyword">this</span>.listContainer.toggle();
    <span class="hljs-keyword">this</span>.setCurrentRelatedList();
  },
  <span class="hljs-attr">click</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ev</span>) </span>{
    <span class="hljs-keyword">var</span> element = <span class="hljs-keyword">this</span>._getCellFromEvent(ev, <span class="hljs-string">"click"</span>);
    <span class="hljs-keyword">if</span> (!element)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.onClick(element, ev);
  },
  <span class="hljs-attr">dblClick</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ev</span>) </span>{
    <span class="hljs-keyword">var</span> element = <span class="hljs-keyword">this</span>._getCellFromEvent(ev, <span class="hljs-string">"dblclick"</span>);
    <span class="hljs-keyword">if</span> (!element)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.onDblClick(element, ev);
  },
  <span class="hljs-attr">clickTitle</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ev</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.titleMenu.isEmpty())
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">var</span> variables = {};
    variables[<span class="hljs-string">'g_list'</span>] = <span class="hljs-keyword">this</span>;
    <span class="hljs-keyword">this</span>.titleMenu.showContextMenu(ev, <span class="hljs-string">"context_list_title"</span>, variables);
    CustomEvent.fire(<span class="hljs-string">'list.title.clicked'</span>, <span class="hljs-keyword">this</span>.table, <span class="hljs-keyword">this</span>);
  },
  <span class="hljs-attr">hdrCellClick</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">th, ev</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.fireEvent(<span class="hljs-string">"hdrcell.click"</span>, <span class="hljs-keyword">this</span>, th, ev) === <span class="hljs-literal">false</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">this</span>.onHdrCellClick(th, ev);
  },
  <span class="hljs-attr">hdrCellContextMenu</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">th, ev</span>) </span>{
    <span class="hljs-keyword">if</span> (ev.ctrlKey)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.headerMenu.isEmpty())
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.fireEvent(<span class="hljs-string">"hdrcell.contextmenu"</span>, <span class="hljs-keyword">this</span>, th, ev) === <span class="hljs-literal">false</span>) {
      ev.stop();
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-keyword">var</span> ret = <span class="hljs-keyword">this</span>.onHdrCellContextMenu(th, ev);
    ev.stop();
    <span class="hljs-keyword">return</span> ret;
  },
  <span class="hljs-attr">rowContextMenu</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, ev</span>) </span>{
    <span class="hljs-keyword">if</span> (ev.ctrlKey)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.rowMenu.isEmpty())
      <span class="hljs-keyword">return</span>;
    element = <span class="hljs-keyword">this</span>._getCellFromEvent(ev);
    <span class="hljs-keyword">if</span> (!element)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.fireEvent(<span class="hljs-string">"cell.contextmenu"</span>, <span class="hljs-keyword">this</span>, element, ev) === <span class="hljs-literal">false</span>) {
      ev.stop();
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-keyword">var</span> ret = <span class="hljs-keyword">this</span>.onRowContextMenu(element, ev);
    ev.stop();
    <span class="hljs-keyword">return</span> ret;
  },
  <span class="hljs-attr">allChecked</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">chk</span>) </span>{
    <span class="hljs-keyword">var</span> checked = chk.checked;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.fireEvent(<span class="hljs-string">"all.checked"</span>, <span class="hljs-keyword">this</span>, chk, checked) === <span class="hljs-literal">false</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.onAllChecked(chk, checked);
  },
  <span class="hljs-attr">rowChecked</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">chk, ev</span>) </span>{
    <span class="hljs-keyword">var</span> checked = chk.checked;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.fireEvent(<span class="hljs-string">"row.checked"</span>, <span class="hljs-keyword">this</span>, checked, ev) === <span class="hljs-literal">false</span>) {
      ev.stop();
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.onRowChecked(chk, checked, ev);
  },
  <span class="hljs-attr">handlePrint</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">flag</span>) </span>{
    <span class="hljs-keyword">if</span> (flag)
      CustomEvent.observe(<span class="hljs-string">"print"</span>, <span class="hljs-keyword">this</span>.printFunc);
    <span class="hljs-keyword">else</span>
      CustomEvent.un(<span class="hljs-string">"print"</span>, <span class="hljs-keyword">this</span>.printFunc);
  },
  <span class="hljs-attr">onPrint</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">maxRows</span>) </span>{
    maxRows = <span class="hljs-built_in">parseInt</span>(maxRows, <span class="hljs-number">10</span>);
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNaN</span>(maxRows) || maxRows &lt; <span class="hljs-number">1</span>)
      maxRows = <span class="hljs-number">5000</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.totalRows &gt; <span class="hljs-built_in">parseInt</span>(maxRows)) {
      <span class="hljs-keyword">if</span> (!confirm(getMessage(<span class="hljs-string">"Printing large lists may affect system performance. Continue?"</span>)))
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-keyword">var</span> features = <span class="hljs-string">"resizable=yes,scrollbars=yes,status=yes,toolbar=no,menubar=yes,location=no"</span>;
    <span class="hljs-keyword">if</span> (isChrome &amp;&amp; isMacintosh)
      features = <span class="hljs-string">""</span>;
    <span class="hljs-keyword">var</span> href = <span class="hljs-built_in">window</span>.location.href;
    <span class="hljs-keyword">var</span> parts = href.split(<span class="hljs-string">'?'</span>);
    <span class="hljs-keyword">var</span> url = parts[<span class="hljs-number">0</span>];
    href = [];
    <span class="hljs-keyword">if</span> (parts.length &gt; <span class="hljs-number">1</span>) {
      parts = parts[<span class="hljs-number">1</span>].split(<span class="hljs-string">"&amp;"</span>);
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; parts.length; i++) {
        <span class="hljs-keyword">if</span> (parts[i].startsWith(<span class="hljs-string">"sysparm_query="</span>))
          <span class="hljs-keyword">continue</span>;
        <span class="hljs-keyword">if</span> (parts[i].startsWith(<span class="hljs-string">"sysparm_media="</span>))
          <span class="hljs-keyword">continue</span>;
        <span class="hljs-keyword">if</span> (parts[i].startsWith(<span class="hljs-string">"sysparm_stack="</span>))
          <span class="hljs-keyword">continue</span>;
        href.push(parts[i]);
      }
    }
    href.push(<span class="hljs-string">"sysparm_stack=no"</span>);
    <span class="hljs-keyword">var</span> veryLargeNumber = <span class="hljs-string">"999999999"</span>;
    href.push(<span class="hljs-string">"sysparm_force_row_count="</span> + veryLargeNumber);
    href.push(<span class="hljs-string">"sysparm_media=print"</span>);
    href.push(<span class="hljs-string">"sysparm_query="</span> + <span class="hljs-keyword">this</span>.getQuery({
      <span class="hljs-attr">all</span>: <span class="hljs-literal">true</span>
    }));
    win = <span class="hljs-built_in">window</span>.open(url + <span class="hljs-string">"?"</span> + href.join(<span class="hljs-string">"&amp;"</span>), <span class="hljs-string">"Printer_friendly_format"</span>, features);
    win.focus();
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  },
  <span class="hljs-attr">onLoad</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span>;
  },
  <span class="hljs-attr">onClick</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, ev</span>) </span>{
    <span class="hljs-keyword">return</span>;
  },
  <span class="hljs-attr">onDblClick</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, ev</span>) </span>{
    <span class="hljs-keyword">return</span>;
  },
  <span class="hljs-attr">onHdrCellClick</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, ev</span>) </span>{
    <span class="hljs-keyword">var</span> sortable = (element.getAttribute(<span class="hljs-string">'sortable'</span>) == <span class="hljs-string">"true"</span>);
    <span class="hljs-keyword">if</span> (!sortable)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">var</span> field = element.getAttribute(<span class="hljs-string">'name'</span>);
    <span class="hljs-keyword">var</span> dir = element.getAttribute(<span class="hljs-string">'sort_dir'</span>);
    <span class="hljs-keyword">var</span> type = element.getAttribute(<span class="hljs-string">'glide_type'</span>);
    dir = <span class="hljs-keyword">this</span>._toggleSortDir(dir, type);
    <span class="hljs-keyword">if</span> (dir == <span class="hljs-string">"DESC"</span>)
      <span class="hljs-keyword">this</span>.sortDescending(field);
    <span class="hljs-keyword">else</span>
      <span class="hljs-keyword">this</span>.sort(field);
  },
  <span class="hljs-attr">onHdrCellContextMenu</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, ev</span>) </span>{
    <span class="hljs-keyword">var</span> variables = {};
    variables[<span class="hljs-string">'g_list'</span>] = <span class="hljs-keyword">this</span>;
    variables[<span class="hljs-string">'g_fieldName'</span>] = element.getAttribute(<span class="hljs-string">'name'</span>);
    variables[<span class="hljs-string">'g_fieldLabel'</span>] = element.getAttribute(<span class="hljs-string">'glide_label'</span>);
    variables[<span class="hljs-string">'g_sysId'</span>] = <span class="hljs-string">''</span>;
    variables[<span class="hljs-string">'rowSysId'</span>] = <span class="hljs-string">''</span>;
    <span class="hljs-keyword">this</span>.headerMenu.showContextMenu(getEvent(ev), <span class="hljs-string">"context_list_header"</span>, variables);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  },
  <span class="hljs-attr">onRowContextMenu</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, ev</span>) </span>{
    <span class="hljs-keyword">var</span> variables = {};
    variables[<span class="hljs-string">'g_list'</span>] = <span class="hljs-keyword">this</span>;
    variables[<span class="hljs-string">'g_fieldName'</span>] = <span class="hljs-keyword">this</span>._getFieldName(element);
    variables[<span class="hljs-string">'g_fieldLabel'</span>] = element.getAttribute(<span class="hljs-string">'glide_label'</span>);
    variables[<span class="hljs-string">'g_sysId'</span>] = element.parentNode.getAttribute(<span class="hljs-string">'sys_id'</span>);
    variables[<span class="hljs-string">'rowSysId'</span>] = variables[<span class="hljs-string">'g_sysId'</span>];
    <span class="hljs-keyword">this</span>.rowMenu.showContextMenu(getEvent(ev), <span class="hljs-string">"context_list_row"</span>, variables);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  },
  <span class="hljs-attr">_getFieldName</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>) </span>{
    <span class="hljs-keyword">var</span> row = element.parentNode;
    <span class="hljs-keyword">if</span> (hasClassName(row, <span class="hljs-string">'list_row_detail'</span>)) {
      <span class="hljs-keyword">var</span> fqName = row.getAttribute(<span class="hljs-string">'data-detail-row'</span>);
      <span class="hljs-keyword">var</span> period = fqName.indexOf(<span class="hljs-string">'.'</span>);
      <span class="hljs-keyword">return</span> fqName.substring(period + <span class="hljs-number">1</span>);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.fieldNames[element.cellIndex];
  },
  <span class="hljs-attr">onAllChecked</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">chk, checked</span>) </span>{
    <span class="hljs-keyword">this</span>.lastChecked = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">var</span> chks = <span class="hljs-keyword">this</span>._getCheckboxes();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; chks.length; i++)
      chks[i].checked = checked;
  },
  <span class="hljs-attr">onRowChecked</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">chk, checked, ev</span>) </span>{
    <span class="hljs-keyword">var</span> checking = chk.checked;
    <span class="hljs-keyword">if</span> (!checking) {
      <span class="hljs-keyword">this</span>._setTheAllCheckbox(<span class="hljs-literal">false</span>);
      <span class="hljs-keyword">this</span>.lastChecked = <span class="hljs-literal">null</span>;
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">var</span> cBoxes = <span class="hljs-keyword">this</span>._getCheckboxes();
    <span class="hljs-keyword">if</span> (ev.shiftKey &amp;&amp; <span class="hljs-keyword">this</span>.lastChecked != chk) {
      <span class="hljs-keyword">var</span> start = <span class="hljs-number">-1</span>;
      <span class="hljs-keyword">var</span> end = <span class="hljs-number">-1</span>;
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; cBoxes.length; i++) {
        <span class="hljs-keyword">var</span> cBox = cBoxes[i];
        <span class="hljs-keyword">if</span> (cBox == <span class="hljs-keyword">this</span>.lastChecked)
          start = i;
        <span class="hljs-keyword">if</span> (cBox == chk)
          end = i;
      }
      <span class="hljs-keyword">if</span> (start &gt; <span class="hljs-number">-1</span> &amp;&amp; end &gt; <span class="hljs-number">-1</span>) {
        <span class="hljs-keyword">if</span> (start &gt; end) {
          <span class="hljs-keyword">var</span> t = start;
          start = end;
          end = t;
        }
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = start; i &lt; end; i++) {
          cBoxes[i].checked = <span class="hljs-literal">true</span>;
          CustomEvent.fire(<span class="hljs-string">"list_checkbox_autochecked"</span>, cBoxes[i]);
        }
      }
    }
    <span class="hljs-keyword">this</span>.lastChecked = chk;
    <span class="hljs-keyword">var</span> allChecked = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; cBoxes.length; i++) {
      <span class="hljs-keyword">if</span> (!cBoxes[i].checked) {
        allChecked = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">break</span>;
      }
    }
    <span class="hljs-keyword">if</span> (allChecked)
      <span class="hljs-keyword">this</span>._setTheAllCheckbox(<span class="hljs-literal">true</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  },
  <span class="hljs-attr">_getCheckboxes</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">document</span>.getElementsByName(<span class="hljs-string">'check_'</span> + <span class="hljs-keyword">this</span>.listID);
  },
  <span class="hljs-attr">_setTheAllCheckbox</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">flag</span>) </span>{
    <span class="hljs-keyword">var</span> chk = $(<span class="hljs-string">'allcheck_'</span> + <span class="hljs-keyword">this</span>.listID);
    <span class="hljs-keyword">if</span> (!chk)
      <span class="hljs-keyword">return</span>;
    chk.checked = flag;
  },
  <span class="hljs-attr">_isCell</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>) </span>{
    <span class="hljs-keyword">if</span> (!element)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">if</span> (element.tagName.toLowerCase() != <span class="hljs-string">"td"</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> hasClassName(element, <span class="hljs-string">"vt"</span>);
  },
  <span class="hljs-attr">_getCellFromEvent</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ev, eventName</span>) </span>{
    ev = getEvent(ev);
    <span class="hljs-keyword">var</span> element = <span class="hljs-keyword">this</span>._getSrcElement(ev);
    <span class="hljs-keyword">if</span> (!element)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">if</span> (element.tagName.toLowerCase() != <span class="hljs-string">"td"</span>)
      element = findParentByTag(element, <span class="hljs-string">"td"</span>);
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._isCell(element))
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.fireEvent(<span class="hljs-string">"cell."</span> + eventName, element, ev) === <span class="hljs-literal">false</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">return</span> element;
  },
  <span class="hljs-attr">_getSrcElement</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ev</span>) </span>{
    <span class="hljs-keyword">if</span> (ev)
      <span class="hljs-keyword">return</span> getSrcElement(ev);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  },
  <span class="hljs-attr">setSubmitValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n, v</span>) </span>{
    <span class="hljs-keyword">this</span>.submitValues[n] = v;
  },
  <span class="hljs-attr">getSubmitValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>) </span>{
    <span class="hljs-keyword">var</span> v = <span class="hljs-keyword">this</span>.submitValues[n];
    <span class="hljs-keyword">if</span> (!v)
      <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
    <span class="hljs-keyword">return</span> v;
  },
  <span class="hljs-attr">getOrderBy</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.orderBy.length == <span class="hljs-number">0</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
    <span class="hljs-keyword">var</span> field = <span class="hljs-keyword">this</span>.orderBy[<span class="hljs-number">0</span>].substring(<span class="hljs-number">7</span>);
    <span class="hljs-keyword">if</span> (field.startsWith(<span class="hljs-string">"DESC"</span>))
      field = field.substring(<span class="hljs-number">4</span>);
    <span class="hljs-keyword">return</span> field;
  },
  <span class="hljs-attr">getListName</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.listName;
  },
  <span class="hljs-attr">setListName</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>) </span>{
    <span class="hljs-keyword">this</span>.listName = n;
  },
  <span class="hljs-attr">setUserList</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">b</span>) </span>{
    <span class="hljs-keyword">this</span>.userList = b;
  },
  <span class="hljs-attr">isUserList</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.userList;
  },
  <span class="hljs-attr">getTitle</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.title)
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.tableName;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.title;
  },
  <span class="hljs-attr">setTitle</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">title</span>) </span>{
    <span class="hljs-keyword">this</span>.title = title;
  },
  <span class="hljs-attr">getView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.view;
  },
  <span class="hljs-attr">setView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">view</span>) </span>{
    <span class="hljs-keyword">this</span>.view = view;
  },
  <span class="hljs-attr">setProperties</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">properties</span>) </span>{
    <span class="hljs-keyword">this</span>.properties = properties;
  },
  <span class="hljs-attr">getReferringURL</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.referringURL || (<span class="hljs-built_in">window</span>.location.pathname + <span class="hljs-built_in">window</span>.location.search);
  },
  <span class="hljs-attr">setReferringURL</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">url</span>) </span>{
    <span class="hljs-keyword">this</span>.referringURL = url;
  },
  <span class="hljs-attr">getTableName</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.tableName;
  },
  <span class="hljs-attr">getParentTable</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.parentTable)
      <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.parentTable;
  },
  <span class="hljs-attr">getRelated</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.related;
  },
  <span class="hljs-attr">setRelated</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">parentTable, related</span>) </span>{
    <span class="hljs-keyword">this</span>.parentTable = parentTable;
    <span class="hljs-keyword">this</span>.related = related;
  },
  <span class="hljs-attr">getListControlID</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.listControlID;
  },
  <span class="hljs-attr">setListControlID</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">id</span>) </span>{
    <span class="hljs-keyword">this</span>.listControlID = id;
  },
  <span class="hljs-attr">isEmbedded</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.embedded;
  },
  <span class="hljs-attr">setEmbedded</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">flag</span>) </span>{
    <span class="hljs-keyword">this</span>.embedded = !!flag;
  },
  <span class="hljs-attr">addFilter</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">filter</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.filter) {
      <span class="hljs-keyword">var</span> parts = <span class="hljs-keyword">this</span>.filter.split(<span class="hljs-string">"^NQ"</span>);
      <span class="hljs-keyword">this</span>.filter = <span class="hljs-string">''</span>;
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; parts.length; i++) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.filter != <span class="hljs-string">''</span>)
          <span class="hljs-keyword">this</span>.filter += <span class="hljs-string">"^NQ"</span>;
        <span class="hljs-keyword">this</span>.filter += (parts[i] + <span class="hljs-string">"^"</span> + filter);
      }
    } <span class="hljs-keyword">else</span>
      <span class="hljs-keyword">this</span>.filter = filter;
  },
  <span class="hljs-attr">setFilter</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">filter, saveOrderBy, saveGroupBy</span>) </span>{
    <span class="hljs-keyword">this</span>._parseQuery(filter, saveOrderBy, saveGroupBy);
  },
  <span class="hljs-attr">setFilterAndRefresh</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">filter</span>) </span>{
    <span class="hljs-keyword">this</span>._parseQuery(filter, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>);
    <span class="hljs-keyword">var</span> parms = <span class="hljs-keyword">this</span>._getRefreshParms(filter);
    <span class="hljs-keyword">this</span>.refreshWithOrderBy(<span class="hljs-number">1</span>, parms);
  },
  <span class="hljs-attr">setDefaultFilter</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">filter</span>) </span>{
    <span class="hljs-keyword">this</span>.setFilter(filter);
    <span class="hljs-keyword">var</span> parms = <span class="hljs-keyword">this</span>._getRefreshParms(filter, <span class="hljs-literal">true</span>);
    <span class="hljs-keyword">this</span>.refresh(<span class="hljs-number">1</span>, parms);
  },
  <span class="hljs-attr">_getRefreshParms</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">filter, setAsDefaultFlag</span>) </span>{
    <span class="hljs-keyword">var</span> parms = {};
    <span class="hljs-keyword">var</span> related = <span class="hljs-keyword">this</span>.getRelated();
    <span class="hljs-keyword">if</span> (related) {
      <span class="hljs-keyword">var</span> parentSysId = <span class="hljs-keyword">this</span>.getSubmitValue(<span class="hljs-string">'sysparm_collectionID'</span>);
      <span class="hljs-keyword">var</span> key = <span class="hljs-keyword">this</span>.getParentTable() + <span class="hljs-string">"."</span> + parentSysId + <span class="hljs-string">"."</span> + related;
      <span class="hljs-keyword">var</span> n = <span class="hljs-string">'sysparm_list_filter'</span>;
      <span class="hljs-keyword">if</span> (setAsDefaultFlag)
        n += <span class="hljs-string">'_default'</span>;
      parms[n] = key + <span class="hljs-string">"="</span> + filter;
    }
    <span class="hljs-keyword">return</span> parms;
  },
  <span class="hljs-attr">setOrderBy</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">orderBy</span>) </span>{
    <span class="hljs-keyword">if</span> (!orderBy) {
      <span class="hljs-keyword">this</span>.orderBy = [];
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">this</span>.orderBy = orderBy.split(<span class="hljs-string">'^'</span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>.orderBy.length; i++) {
      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.orderBy[i].startsWith(<span class="hljs-string">'ORDERBY'</span>))
        <span class="hljs-keyword">this</span>.orderBy[i] = <span class="hljs-string">'ORDERBY'</span> + <span class="hljs-keyword">this</span>.orderBy[i];
    }
  },
  <span class="hljs-attr">setGroupBy</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">groupBy</span>) </span>{
    <span class="hljs-keyword">if</span> (!groupBy) {
      <span class="hljs-keyword">this</span>.groupBy = [];
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">this</span>.groupBy = groupBy.split(<span class="hljs-string">'^'</span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>.groupBy.length; i++) {
      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.groupBy[i].startsWith(<span class="hljs-string">'GROUPBY'</span>))
        <span class="hljs-keyword">this</span>.groupBy[i] = <span class="hljs-string">'GROUPBY'</span> + <span class="hljs-keyword">this</span>.groupBy[i];
    }
  },
  <span class="hljs-attr">setFirstRow</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rowNum</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNaN</span>(rowNum))
      <span class="hljs-keyword">this</span>.firstRow = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">else</span>
      <span class="hljs-keyword">this</span>.firstRow = <span class="hljs-built_in">parseInt</span>(rowNum, <span class="hljs-number">10</span>);
  },
  <span class="hljs-attr">setRowsPerPage</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rows</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNaN</span>(rows))
      <span class="hljs-keyword">this</span>.rowsPerPage = <span class="hljs-number">20</span>;
    <span class="hljs-keyword">else</span>
      <span class="hljs-keyword">this</span>.rowsPerPage = <span class="hljs-built_in">parseInt</span>(rows, <span class="hljs-number">10</span>);
    <span class="hljs-keyword">var</span> params = {};
    params[<span class="hljs-string">'sysparm_userpref_rowcount'</span>] = rows;
    <span class="hljs-keyword">this</span>._refreshAjax(<span class="hljs-number">1</span>, params);
  },
  <span class="hljs-attr">setFields</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fields</span>) </span>{
    <span class="hljs-keyword">var</span> numLeftCells = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">this</span>.fields = fields;
    <span class="hljs-keyword">this</span>.fieldNdxs = {};
    <span class="hljs-keyword">this</span>.fieldNames = [];
    <span class="hljs-keyword">this</span>.fieldNames.push(<span class="hljs-string">''</span>);
    <span class="hljs-keyword">this</span>.fieldNames.push(<span class="hljs-string">''</span>);
    numLeftCells = <span class="hljs-number">2</span>;
    <span class="hljs-keyword">var</span> names = <span class="hljs-keyword">this</span>.fields.split(<span class="hljs-string">","</span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; names.length; i++) {
      <span class="hljs-keyword">this</span>.fieldNdxs[names[i]] = i + numLeftCells;
      <span class="hljs-keyword">this</span>.fieldNames.push(names[i]);
    }
  },
  <span class="hljs-attr">toggleList</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> collapsed = <span class="hljs-keyword">this</span>.toggleListNoPref();
    <span class="hljs-keyword">var</span> prefName = <span class="hljs-string">"collapse."</span> + <span class="hljs-keyword">this</span>.listName;
    <span class="hljs-keyword">if</span> (collapsed)
      setPreference(prefName, <span class="hljs-string">'true'</span>);
    <span class="hljs-keyword">else</span>
      deletePreference(prefName);
    <span class="hljs-keyword">return</span> !collapsed;
  },
  <span class="hljs-attr">toggleListNoPref</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    toggleDivDisplay(<span class="hljs-keyword">this</span>.listID + <span class="hljs-string">"_collapsed"</span>);
    <span class="hljs-keyword">var</span> listDiv = toggleDivDisplayAndReturn(<span class="hljs-keyword">this</span>.listID + <span class="hljs-string">"_expanded"</span>);
    <span class="hljs-keyword">if</span> (!listDiv)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> listDiv.style.display == <span class="hljs-string">"none"</span>;
  },
  <span class="hljs-attr">showHideList</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">showFlag</span>) </span>{
    <span class="hljs-keyword">var</span> e = $(<span class="hljs-keyword">this</span>.listID + <span class="hljs-string">"_expanded"</span>);
    <span class="hljs-keyword">if</span> (!e)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">var</span> shown = e.style.display != <span class="hljs-string">"none"</span>;
    <span class="hljs-keyword">if</span> ((!shown &amp;&amp; showFlag) || (shown &amp;&amp; !showFlag))
      <span class="hljs-keyword">this</span>.toggleList();
  },
  <span class="hljs-attr">toggleGroups</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> a = <span class="hljs-keyword">this</span>._getGroupToggler();
    <span class="hljs-keyword">if</span> (!a)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">var</span> expand = (a.getAttribute(<span class="hljs-string">'data-expanded'</span>) != <span class="hljs-string">'true'</span>);
    <span class="hljs-keyword">this</span>.showHideGroups(expand);
  },
  <span class="hljs-attr">showHideGroups</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">showFlag</span>) </span>{
    <span class="hljs-keyword">var</span> a = <span class="hljs-keyword">this</span>._getGroupToggler();
    <span class="hljs-keyword">if</span> (!a)
      <span class="hljs-keyword">return</span>;
    a.setAttribute(<span class="hljs-string">'data-expanded'</span>, showFlag + <span class="hljs-string">""</span>);
    <span class="hljs-keyword">var</span> img = a.down(<span class="hljs-string">'img'</span>);
    <span class="hljs-keyword">var</span> rows = <span class="hljs-keyword">this</span>.table.rows;
    <span class="hljs-keyword">var</span> len = rows.length;
    <span class="hljs-keyword">var</span> listField = <span class="hljs-keyword">this</span>.getGroupBy().substring(<span class="hljs-number">7</span>);
    <span class="hljs-keyword">var</span> groups = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) {
      <span class="hljs-keyword">var</span> aRow = rows[i];
      <span class="hljs-keyword">if</span> (aRow.getAttribute(<span class="hljs-string">"group_row"</span>) != <span class="hljs-string">"true"</span>)
        <span class="hljs-keyword">continue</span>;
      <span class="hljs-keyword">var</span> id = aRow.id;
      <span class="hljs-keyword">var</span> value = id.substring(<span class="hljs-number">5</span> + <span class="hljs-keyword">this</span>.listID.length);
      groups.push(value);
      <span class="hljs-keyword">var</span> state = aRow.getAttribute(<span class="hljs-string">"collapsed"</span>);
      <span class="hljs-keyword">if</span> (<span class="hljs-string">"never"</span> === state)
        <span class="hljs-keyword">continue</span>;
      <span class="hljs-keyword">var</span> shown = (state != <span class="hljs-string">"true"</span>);
      <span class="hljs-keyword">if</span> ((!shown &amp;&amp; showFlag) || (shown &amp;&amp; !showFlag))
        <span class="hljs-keyword">this</span>._toggleGroup(<span class="hljs-keyword">this</span>.table, aRow);
    }
    <span class="hljs-keyword">if</span> (img) {
      <span class="hljs-keyword">if</span> (showFlag)
        img.src = <span class="hljs-string">"images/list_th_down.gifx"</span>;
      <span class="hljs-keyword">else</span>
        img.src = <span class="hljs-string">"images/list_th_right.gifx"</span>;
    }
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.listID == <span class="hljs-keyword">this</span>.listName)
      <span class="hljs-keyword">this</span>._sendGroupPreference(listField, showFlag, <span class="hljs-literal">true</span>, groups);
  },
  <span class="hljs-attr">toggleGroup</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">el</span>) </span>{
    <span class="hljs-keyword">var</span> row = findParentByTag(el, <span class="hljs-string">"TR"</span>);
    <span class="hljs-keyword">if</span> (!row)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">var</span> table = findParentByTag(row, <span class="hljs-string">"TABLE"</span>);
    <span class="hljs-keyword">if</span> (!table)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">var</span> shown = <span class="hljs-keyword">this</span>._toggleGroup(table, row);
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.listID == <span class="hljs-keyword">this</span>.listName) {
      <span class="hljs-keyword">var</span> id = row.id;
      <span class="hljs-keyword">var</span> value = id.substring(<span class="hljs-number">5</span> + <span class="hljs-keyword">this</span>.listID.length);
      <span class="hljs-keyword">var</span> colmn = row.getAttribute(<span class="hljs-string">'groupField'</span>);
      <span class="hljs-keyword">var</span> tmp = <span class="hljs-keyword">this</span>.listID;
      <span class="hljs-keyword">this</span>.listID = <span class="hljs-keyword">this</span>.listID + <span class="hljs-string">'_'</span> + colmn;
      <span class="hljs-keyword">this</span>._sendGroupPreference(value, shown);
      <span class="hljs-keyword">this</span>.listID = tmp;
    }
    CustomEvent.fire(<span class="hljs-string">'list.section.toggle'</span>, <span class="hljs-keyword">this</span>.table, <span class="hljs-keyword">this</span>);
    <span class="hljs-keyword">return</span> shown;
  },
  <span class="hljs-attr">_getGroupToggler</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> elements = <span class="hljs-keyword">this</span>.listDiv.select(<span class="hljs-string">'a.list_group_toggle'</span>);
    <span class="hljs-keyword">if</span> (elements.length == <span class="hljs-number">0</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">return</span> elements[<span class="hljs-number">0</span>];
  },
  <span class="hljs-attr">_toggleGroup</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">table, row</span>) </span>{
    <span class="hljs-keyword">var</span> shown = row.getAttribute(<span class="hljs-string">"collapsed"</span>) != <span class="hljs-string">"true"</span>;
    shown = !shown;
    <span class="hljs-keyword">this</span>._showHideGroup(table, row, shown);
    <span class="hljs-keyword">return</span> shown;
  },
  <span class="hljs-attr">_showHideGroup</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">table, row, showFlag</span>) </span>{
    <span class="hljs-keyword">var</span> collapsed = !showFlag;
    <span class="hljs-keyword">this</span>._showHideImage(row.id + <span class="hljs-string">"_group_toggle_image"</span>, showFlag);
    row.setAttribute(<span class="hljs-string">"collapsed"</span>, collapsed + <span class="hljs-string">''</span>);
    <span class="hljs-keyword">var</span> priorCalc = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">var</span> rows = table.rows;
    <span class="hljs-keyword">var</span> len = rows.length;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = row.rowIndex + <span class="hljs-number">1</span>; i &lt; len; i++) {
      <span class="hljs-keyword">var</span> aRow = $(rows[i]);
      <span class="hljs-keyword">if</span> (aRow.getAttribute(<span class="hljs-string">"group_row"</span>) == <span class="hljs-string">"true"</span>)
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">if</span> (aRow.hasClassName(<span class="hljs-string">'calculationLine'</span>)) {
        <span class="hljs-keyword">if</span> (priorCalc)
          <span class="hljs-keyword">break</span>;
        priorCalc = aRow;
      }
      <span class="hljs-keyword">if</span> (collapsed)
        aRow.style.display = <span class="hljs-string">"none"</span>;
      <span class="hljs-keyword">else</span>
        aRow.style.display = <span class="hljs-string">""</span>;
    }
    _frameChanged();
  },
  <span class="hljs-attr">_showHideImage</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">id, show</span>) </span>{
    <span class="hljs-keyword">var</span> img = $(id);
    <span class="hljs-keyword">if</span> (!img)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">if</span> (show) {
      img.src = <span class="hljs-string">"images/list_v2_heir_reveal.gifx"</span>;
      img.className = img.className.replace(<span class="hljs-regexp">/\bcollapsedGroup\b/</span>, <span class="hljs-string">''</span>);
    } <span class="hljs-keyword">else</span> {
      img.src = <span class="hljs-string">"images/list_v2_heir_hide.gifx"</span>;
      img.className += <span class="hljs-string">" collapsedGroup"</span>;
    }
    <span class="hljs-keyword">if</span> (show) {
      img.removeClassName(<span class="hljs-string">'icon-vcr-right'</span>);
      img.addClassName(<span class="hljs-string">'icon-vcr-down'</span>);
    } <span class="hljs-keyword">else</span> {
      img.removeClassName(<span class="hljs-string">'icon-vcr-down'</span>);
      img.addClassName(<span class="hljs-string">'icon-vcr-right'</span>);
    }
  },
  <span class="hljs-attr">_sendGroupPreference</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">groupValue, showFlag, allFlag, groups</span>) </span>{
    <span class="hljs-keyword">var</span> ajax = <span class="hljs-keyword">new</span> GlideAjax(<span class="hljs-string">"AJAXListGrouping"</span>);
    ajax.addParam(<span class="hljs-string">"list_id"</span>, <span class="hljs-keyword">this</span>.listID);
    ajax.addParam(<span class="hljs-string">"expanded"</span>, showFlag + <span class="hljs-string">''</span>);
    ajax.addParam(<span class="hljs-string">"value"</span>, groupValue);
    ajax.addParam(<span class="hljs-string">"all"</span>, allFlag);
    <span class="hljs-keyword">if</span> (groups)
      ajax.addParam(<span class="hljs-string">"groups"</span>, groups)
    ajax.getXML();
  },
  <span class="hljs-attr">toggleHierarchy</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">img, rowId, parentTable, parentSysId</span>) </span>{
    <span class="hljs-keyword">var</span> row = $(rowId);
    <span class="hljs-keyword">if</span> (!row)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">if</span> (row.getAttribute(<span class="hljs-string">"hierarchical"</span>) == <span class="hljs-string">"not_loaded"</span>) {
      row.setAttribute(<span class="hljs-string">"hierarchical"</span>, <span class="hljs-string">"loaded"</span>);
      <span class="hljs-keyword">this</span>._showHideImage(img, <span class="hljs-literal">true</span>);
      <span class="hljs-keyword">this</span>._showHideHierarchy(row, <span class="hljs-literal">true</span>);
      <span class="hljs-keyword">this</span>.toggleHierarchyLoadList(row, parentTable, parentSysId);
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">var</span> shown = row.getAttribute(<span class="hljs-string">"collapsed"</span>) != <span class="hljs-string">"true"</span>;
    shown = !shown;
    <span class="hljs-keyword">this</span>._showHideImage(img, shown);
    <span class="hljs-keyword">this</span>._showHideHierarchy(row, shown);
    CustomEvent.fire(<span class="hljs-string">'list.section.toggle'</span>, <span class="hljs-keyword">this</span>.table, <span class="hljs-keyword">this</span>);
    <span class="hljs-keyword">return</span> shown;
  },
  <span class="hljs-attr">toggleHierarchyLoadList</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">row, parentTable, parentSysId</span>) </span>{
    <span class="hljs-keyword">this</span>.loadList(row.firstChild, parentTable, parentSysId, <span class="hljs-string">"list2_hierarchical.xml"</span>, <span class="hljs-string">"hierarchical"</span>);
  },
  <span class="hljs-attr">_showHideHierarchy</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">row, showFlag</span>) </span>{
    <span class="hljs-keyword">var</span> collapsed = !showFlag;
    row.setAttribute(<span class="hljs-string">"collapsed"</span>, collapsed + <span class="hljs-string">''</span>);
    <span class="hljs-keyword">if</span> (collapsed)
      row.style.display = <span class="hljs-string">"none"</span>;
    <span class="hljs-keyword">else</span>
      row.style.display = <span class="hljs-string">""</span>;
  },
  <span class="hljs-attr">loadList</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">el, parentTable, parentSysId, template, listCss</span>) </span>{
    <span class="hljs-keyword">var</span> ajax = <span class="hljs-keyword">new</span> GlideAjax(<span class="hljs-string">"AJAXJellyRunner"</span>, <span class="hljs-string">"AJAXJellyRunner.do"</span>);
    ajax.addParam(<span class="hljs-string">"template"</span>, template);
    ajax.addParam(<span class="hljs-string">'sysparm_collection'</span>, parentTable);
    ajax.addParam(<span class="hljs-string">'sysparm_sys_id'</span>, parentSysId);
    ajax.addParam(<span class="hljs-string">'sysparm_view'</span>, <span class="hljs-keyword">this</span>.getView());
    <span class="hljs-keyword">if</span> (listCss)
      ajax.addParam(<span class="hljs-string">'sysparm_list_css'</span>, listCss);
    ajax.addParam(<span class="hljs-string">'sys_hint_nocache'</span>, <span class="hljs-string">'true'</span>);
    ajax.addParam(<span class="hljs-string">'sysparm_stack'</span>, <span class="hljs-string">'no'</span>);
    ajax.addParam(<span class="hljs-string">'twoPhase'</span>, <span class="hljs-string">'true'</span>);
    <span class="hljs-keyword">var</span> domain = gel(<span class="hljs-string">'sysparm_domain'</span>);
    <span class="hljs-keyword">if</span> (domain)
      ajax.addParam(<span class="hljs-string">'sysparm_domain'</span>, domain.value);
    el.innerHTML = GlideList2.LOADING_MSG;
    ajax.getXML(<span class="hljs-keyword">this</span>._loadListResponse.bind(<span class="hljs-keyword">this</span>), <span class="hljs-literal">null</span>, [el, parentSysId]);
  },
  <span class="hljs-attr">_loadListResponse</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response, args</span>) </span>{
    <span class="hljs-keyword">var</span> el = args[<span class="hljs-number">0</span>];
    <span class="hljs-keyword">var</span> parentSysId = args[<span class="hljs-number">1</span>];
    <span class="hljs-keyword">var</span> html = <span class="hljs-keyword">this</span>._getListBody(response.responseText);
    el.innerHTML = html;
    html.evalScripts(<span class="hljs-literal">true</span>);
    <span class="hljs-keyword">if</span> (!GlideList2.listsMap)
      GlideList2.listsMap = {};
    <span class="hljs-keyword">var</span> elemList = $(el).select(<span class="hljs-string">".tabs2_list"</span>);
    GlideList2.listsMap[parentSysId] = elemList;
  },
  <span class="hljs-attr">actionWithSysId</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">actionId, actionName, sysId</span>) </span>{
    <span class="hljs-keyword">this</span>._action(actionId, actionName, [sysId]);
  },
  <span class="hljs-attr">action</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">actionId, actionName, allowedCheckedIds</span>) </span>{
    <span class="hljs-keyword">this</span>._action(actionId, actionName, allowedCheckedIds);
  },
  <span class="hljs-attr">_action</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">actionId, actionName, ids</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isSubmitted())
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">if</span> (!ids)
      <span class="hljs-keyword">this</span>.getChecked();
    <span class="hljs-keyword">else</span>
      <span class="hljs-keyword">this</span>.checkedIds = ids;
    <span class="hljs-keyword">this</span>._createForm();
    <span class="hljs-keyword">this</span>.addToForm(<span class="hljs-string">'sysparm_referring_url'</span>, <span class="hljs-keyword">this</span>.referringURL);
    <span class="hljs-keyword">this</span>.addToForm(<span class="hljs-string">'sysparm_query'</span>, <span class="hljs-keyword">this</span>.getQuery({
      <span class="hljs-attr">groupby</span>: <span class="hljs-literal">true</span>
    }));
    <span class="hljs-keyword">this</span>.addToForm(<span class="hljs-string">'sysparm_view'</span>, <span class="hljs-keyword">this</span>.getView());
    <span class="hljs-keyword">if</span> (actionId)
      <span class="hljs-keyword">this</span>.addToForm(<span class="hljs-string">'sys_action'</span>, actionId);
    <span class="hljs-keyword">else</span>
      <span class="hljs-keyword">this</span>.addToForm(<span class="hljs-string">'sys_action'</span>, actionName);
    <span class="hljs-keyword">this</span>.doNotSubmitParams[<span class="hljs-string">'sysparm_record_scope'</span>] = actionName == <span class="hljs-string">'sysverb_new'</span>;
    <span class="hljs-keyword">if</span> (ids != <span class="hljs-literal">null</span>)
      <span class="hljs-keyword">this</span>.addToForm(<span class="hljs-string">'sysparm_checked_items'</span>, ids);
    <span class="hljs-keyword">else</span>
      <span class="hljs-keyword">this</span>.addToForm(<span class="hljs-string">'sysparm_checked_items'</span>, <span class="hljs-keyword">this</span>.checkedIds);
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._runHandlers(actionId, actionName) === <span class="hljs-literal">false</span>) {
      <span class="hljs-keyword">this</span>._cleanup();
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-keyword">this</span>._submitForm();
    <span class="hljs-keyword">this</span>._cleanup();
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  },
  <span class="hljs-attr">addToForm</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n, v</span>) </span>{
    <span class="hljs-keyword">this</span>.formElements[n] = v;
  },
  <span class="hljs-attr">_isSubmitted</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> g_submitted;
  },
  <span class="hljs-attr">_createForm</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.formElements = {};
    <span class="hljs-keyword">this</span>.formElements[<span class="hljs-string">'sys_target'</span>] = <span class="hljs-keyword">this</span>.tableName;
    <span class="hljs-keyword">this</span>.formElements[<span class="hljs-string">'sys_action'</span>] = <span class="hljs-string">''</span>;
    <span class="hljs-keyword">this</span>.formElements[<span class="hljs-string">'sys_is_list'</span>] = <span class="hljs-string">'true'</span>;
    <span class="hljs-keyword">this</span>.formElements[<span class="hljs-string">'sysparm_checked_items'</span>] = <span class="hljs-keyword">this</span>.checkedIds;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> g_ck != <span class="hljs-string">'undefined'</span> &amp;&amp; g_ck != <span class="hljs-string">""</span>)
      <span class="hljs-keyword">this</span>.formElements[<span class="hljs-string">'sysparm_ck'</span>] = g_ck;
    <span class="hljs-keyword">this</span>.form = $(<span class="hljs-string">"form_"</span> + <span class="hljs-keyword">this</span>.listID);
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.form)
      rel(<span class="hljs-keyword">this</span>.form);
    <span class="hljs-keyword">this</span>.form = cel(<span class="hljs-string">"form"</span>, <span class="hljs-keyword">this</span>.listDiv);
    <span class="hljs-keyword">this</span>.form.id = <span class="hljs-string">"form_"</span> + <span class="hljs-keyword">this</span>.listID;
    <span class="hljs-keyword">this</span>.form.method = <span class="hljs-string">"POST"</span>;
    <span class="hljs-keyword">this</span>.form.action = <span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">"_list.do"</span>;
    <span class="hljs-keyword">return</span>;
  },
  <span class="hljs-attr">_runHandlers</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">actionId, actionName</span>) </span>{
    <span class="hljs-keyword">return</span> CustomEvent.fire(<span class="hljs-string">"list.handler"</span>, <span class="hljs-keyword">this</span>, actionId, actionName);
  },
  <span class="hljs-attr">submit</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">parms</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isSubmitted())
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">this</span>._createForm();
    <span class="hljs-keyword">this</span>.addToForm(<span class="hljs-string">'sysparm_query'</span>, <span class="hljs-keyword">this</span>.getQuery({
      <span class="hljs-attr">groupby</span>: <span class="hljs-literal">true</span>
    }));
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> n <span class="hljs-keyword">in</span> parms)
      <span class="hljs-keyword">this</span>.addToForm(n, parms[n]);
    <span class="hljs-keyword">this</span>._submitForm();
    <span class="hljs-keyword">this</span>._cleanup();
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  },
  <span class="hljs-attr">_submitForm</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">method</span>) </span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> n <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.submitValues) {
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.doNotSubmitParams[n])
        <span class="hljs-keyword">continue</span>;
      <span class="hljs-keyword">this</span>.addToForm(n, <span class="hljs-keyword">this</span>.submitValues[n]);
    }
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> n <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.formElements) {
      <span class="hljs-keyword">var</span> v = <span class="hljs-keyword">this</span>.formElements[n];
      <span class="hljs-keyword">if</span> (!v)
        v = <span class="hljs-string">''</span>;
      <span class="hljs-keyword">var</span> opt = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'input'</span>);
      opt.type = <span class="hljs-string">"HIDDEN"</span>;
      opt.name = n;
      opt.id = n;
      opt.value = v;
      <span class="hljs-keyword">this</span>.form.appendChild(opt);
    }
    g_list = <span class="hljs-keyword">this</span>;
    g_submitted = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">if</span> (method)
        <span class="hljs-keyword">this</span>.form.method = method;
      <span class="hljs-keyword">this</span>.form.submit();
    } <span class="hljs-keyword">catch</span> (ex) {}
  },
  <span class="hljs-attr">_cleanup</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.formElements = {};
    g_submitted = <span class="hljs-literal">false</span>;
  },
  <span class="hljs-attr">sort</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">field</span>) </span>{
    <span class="hljs-keyword">this</span>._sort(field, <span class="hljs-string">""</span>);
  },
  <span class="hljs-attr">sortDescending</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">field</span>) </span>{
    <span class="hljs-keyword">this</span>._sort(field, <span class="hljs-string">"DESC"</span>);
  },
  <span class="hljs-attr">refresh</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">firstRow, additionalParms</span>) </span>{
    <span class="hljs-keyword">this</span>._refresh(firstRow, additionalParms, <span class="hljs-literal">false</span>);
  },
  <span class="hljs-attr">refreshWithOrderBy</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">firstRow, additionalParms</span>) </span>{
    <span class="hljs-keyword">this</span>._refresh(firstRow, additionalParms, <span class="hljs-literal">true</span>);
  },
  <span class="hljs-attr">_refresh</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">firstRow, additionalParms, includeOrderBy</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.refreshPage)
      <span class="hljs-keyword">this</span>._refreshPage(firstRow, additionalParms, includeOrderBy);
    <span class="hljs-keyword">else</span>
      <span class="hljs-keyword">this</span>._refreshAjax(firstRow, additionalParms, includeOrderBy);
  },
  <span class="hljs-attr">_refreshPage</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">firstRow, additionalParms, includeOrderBy</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> firstRow != <span class="hljs-string">"undefined"</span>)
      <span class="hljs-keyword">this</span>.firstRow = <span class="hljs-keyword">this</span>._validateFirstRow(firstRow);
    <span class="hljs-keyword">var</span> url = <span class="hljs-keyword">new</span> GlideURL(<span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">"_list.do"</span>);
    url.addParam(<span class="hljs-string">'sysparm_query'</span>, <span class="hljs-keyword">this</span>.getQuery({
      <span class="hljs-attr">orderby</span>: includeOrderBy,
      <span class="hljs-attr">groupby</span>: <span class="hljs-literal">true</span>
    }));
    url.addParam(<span class="hljs-string">'sysparm_first_row'</span>, <span class="hljs-keyword">this</span>.firstRow);
    url.addParam(<span class="hljs-string">'sysparm_view'</span>, <span class="hljs-keyword">this</span>.view);
    <span class="hljs-keyword">var</span> q = <span class="hljs-keyword">this</span>.submitValues[<span class="hljs-string">'sysparm_fixed_query'</span>];
    <span class="hljs-keyword">if</span> (q)
      url.addParam(<span class="hljs-string">'sysparm_fixed_query'</span>, q);
    <span class="hljs-keyword">var</span> css = <span class="hljs-keyword">this</span>.submitValues[<span class="hljs-string">'sysparm_list_css'</span>];
    <span class="hljs-keyword">if</span> (css)
      url.addParam(<span class="hljs-string">'sysparm_list_css'</span>, css);
    <span class="hljs-keyword">var</span> queryNoDomain = <span class="hljs-keyword">this</span>.submitValues[<span class="hljs-string">'sysparm_query_no_domain'</span>];
    <span class="hljs-keyword">if</span> (queryNoDomain)
      url.addParam(<span class="hljs-string">'sysparm_query_no_domain'</span>, queryNoDomain);
    <span class="hljs-keyword">var</span> s = url.getURL(additionalParms);
    <span class="hljs-built_in">window</span>.location.href = s;
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.GwtListEditor &amp;&amp; GwtListEditor.forPage &amp;&amp; !GwtListEditor.forPage.isDirty())
      <span class="hljs-keyword">this</span>._showLoading();
  },
  <span class="hljs-attr">_refreshAjax</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">firstRow, additionalParms, includeOrderBy</span>) </span>{
    <span class="hljs-keyword">this</span>._showLoading();
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isHierarchical())
      <span class="hljs-keyword">if</span> ($(<span class="hljs-keyword">this</span>.listName + <span class="hljs-string">"filterdiv"</span>))
        $(<span class="hljs-keyword">this</span>.listName + <span class="hljs-string">"filterdiv"</span>).setAttribute(<span class="hljs-string">"gsft_empty"</span>, <span class="hljs-string">"true"</span>);
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> firstRow != <span class="hljs-string">"undefined"</span>)
      <span class="hljs-keyword">this</span>.firstRow = <span class="hljs-keyword">this</span>._validateFirstRow(firstRow);
    <span class="hljs-keyword">var</span> ajax = <span class="hljs-keyword">new</span> GlideAjax(<span class="hljs-string">''</span>, <span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">'_list.do'</span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> n <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.submitValues)
      ajax.addParam(n, <span class="hljs-keyword">this</span>.submitValues[n]);
    <span class="hljs-keyword">var</span> query = <span class="hljs-keyword">this</span>.getQuery({
      <span class="hljs-attr">orderby</span>: includeOrderBy,
      <span class="hljs-attr">groupby</span>: <span class="hljs-literal">true</span>
    });
    ajax.addParam(<span class="hljs-string">'sysparm_view'</span>, <span class="hljs-keyword">this</span>.view);
    ajax.addParam(<span class="hljs-string">'sysparm_query'</span>, query);
    ajax.addParam(<span class="hljs-string">'sysparm_first_row'</span>, <span class="hljs-keyword">this</span>.firstRow);
    ajax.addParam(<span class="hljs-string">'stackparm_sysparm_first_row'</span>, <span class="hljs-keyword">this</span>.firstRow);
    ajax.addParam(<span class="hljs-string">'sysparm_properties'</span>, <span class="hljs-keyword">this</span>.properties);
    ajax.addParam(<span class="hljs-string">'sysparm_refresh'</span>, <span class="hljs-string">'true'</span>);
    ajax.addParam(<span class="hljs-string">'sys_hint_nocache'</span>, <span class="hljs-string">'true'</span>);
    ajax.addParam(<span class="hljs-string">'sysparm_stack'</span>, <span class="hljs-string">'no'</span>);
    ajax.addParam(<span class="hljs-string">'sysparm_list_type'</span>, (<span class="hljs-keyword">this</span>.isHierarchical() ? <span class="hljs-string">"hierarchical"</span> : <span class="hljs-string">""</span>));
    ajax.setErrorCallback(<span class="hljs-keyword">this</span>._errorResponse.bind(<span class="hljs-keyword">this</span>));
    ajax.getXML(<span class="hljs-keyword">this</span>._refreshResponse.bind(<span class="hljs-keyword">this</span>), additionalParms);
  },
  <span class="hljs-attr">_refreshResponse</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) </span>{
    <span class="hljs-keyword">this</span>._hideLoading();
    CustomEvent.fire(<span class="hljs-string">'partial.page.savePreviousEditor'</span>, <span class="hljs-keyword">this</span>.table, <span class="hljs-keyword">this</span>);
    <span class="hljs-keyword">var</span> e = $(<span class="hljs-keyword">this</span>.listID);
    e = e.down(<span class="hljs-string">"table"</span>);
    e = e.parentNode;
    <span class="hljs-keyword">var</span> html = <span class="hljs-keyword">this</span>._getListBody(response.responseText);
    e.innerHTML = html;
    <span class="hljs-keyword">this</span>._initList();
    html.evalScripts(<span class="hljs-literal">true</span>);
    <span class="hljs-keyword">var</span> nav = $(<span class="hljs-string">"list_nav_"</span> + <span class="hljs-keyword">this</span>.listID);
    <span class="hljs-keyword">var</span> canHideNav = $(<span class="hljs-keyword">this</span>.table).getAttribute(<span class="hljs-string">"can_hide_nav"</span>) == <span class="hljs-string">"true"</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.totalRows == <span class="hljs-number">0</span> &amp;&amp; canHideNav) {
      <span class="hljs-keyword">if</span> (nav &amp;&amp; nav.visible())
        nav.toggle();
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">if</span> (nav &amp;&amp; !nav.visible())
        nav.toggle();
      <span class="hljs-keyword">this</span>._restoreColumnHeaderToggleState();
    }
    <span class="hljs-keyword">var</span> groupedTotalRowsElem = $(<span class="hljs-keyword">this</span>.listID + <span class="hljs-string">"_total_grouped_rows_count"</span>);
    <span class="hljs-keyword">if</span> (groupedTotalRowsElem)
      $(<span class="hljs-keyword">this</span>.listID + <span class="hljs-string">"_total_grouped_rows_count"</span>).update($(<span class="hljs-keyword">this</span>.listID + <span class="hljs-string">"_table"</span>).getAttribute(<span class="hljs-string">"grand_total_rows"</span>));
    <span class="hljs-keyword">this</span>.fireEvent(<span class="hljs-string">'partial.page.reload'</span>, <span class="hljs-keyword">this</span>.table, <span class="hljs-keyword">this</span>);
    CustomEvent.fire(<span class="hljs-string">'partial.page.reload'</span>, <span class="hljs-keyword">this</span>.table, <span class="hljs-keyword">this</span>);
    <span class="hljs-keyword">this</span>._fireListReady();
    _frameChanged();
    CustomEvent.fire(<span class="hljs-string">'list_content_changed'</span>);
  },
  <span class="hljs-attr">_errorResponse</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) </span>{
    <span class="hljs-keyword">this</span>._hideLoading();
  },
  <span class="hljs-attr">_getListBody</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">text</span>) </span>{
    <span class="hljs-keyword">var</span> startPos = text.indexOf(GlideList2.LIST_BODY_START);
    <span class="hljs-keyword">if</span> (startPos == <span class="hljs-number">-1</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
    startPos += GlideList2.LIST_BODY_START.length;
    <span class="hljs-keyword">var</span> endPos = text.indexOf(GlideList2.LIST_BODY_END);
    <span class="hljs-keyword">if</span> (startPos == <span class="hljs-number">-1</span> || endPos == <span class="hljs-number">-1</span> || startPos &gt;= endPos)
      <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
    <span class="hljs-keyword">return</span> text.substring(startPos, endPos);
  },
  <span class="hljs-attr">_sort</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">field, dir</span>) </span>{
    <span class="hljs-keyword">var</span> parms = {};
    <span class="hljs-keyword">this</span>.setOrderBy(dir + field);
    parms[<span class="hljs-string">'sysparm_userpref.'</span> + <span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">'.db.order'</span>] = field;
    parms[<span class="hljs-string">'sysparm_userpref.'</span> + <span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">'.db.order.direction'</span>] = dir;
    CustomEvent.fire(<span class="hljs-string">'list.sort.fired'</span>, <span class="hljs-keyword">this</span>.table, <span class="hljs-keyword">this</span>);
    <span class="hljs-keyword">this</span>._refreshAjax(<span class="hljs-number">1</span>, parms);
  },
  <span class="hljs-attr">_setRowCounts</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.firstRow = <span class="hljs-keyword">this</span>._getAttributeInt(<span class="hljs-keyword">this</span>.table, <span class="hljs-string">"first_row"</span>, <span class="hljs-number">1</span>);
    <span class="hljs-keyword">this</span>.lastRow = <span class="hljs-keyword">this</span>._getAttributeInt(<span class="hljs-keyword">this</span>.table, <span class="hljs-string">"last_row"</span>, <span class="hljs-number">0</span>);
    <span class="hljs-keyword">this</span>.rowsPerPage = <span class="hljs-keyword">this</span>._getAttributeInt(<span class="hljs-keyword">this</span>.table, <span class="hljs-string">"rows_per_page"</span>, <span class="hljs-number">20</span>);
    <span class="hljs-keyword">this</span>.totalRows = <span class="hljs-keyword">this</span>._getAttributeInt(<span class="hljs-keyword">this</span>.table, <span class="hljs-string">"total_rows"</span>, <span class="hljs-number">0</span>);
    <span class="hljs-keyword">this</span>.grandTotalRows = <span class="hljs-keyword">this</span>._getAttributeInt(<span class="hljs-keyword">this</span>.table, <span class="hljs-string">"grand_total_rows"</span>, <span class="hljs-number">0</span>);
    <span class="hljs-keyword">var</span> e = $(<span class="hljs-keyword">this</span>.listID + <span class="hljs-string">"_collapsed_title"</span>);
    <span class="hljs-keyword">if</span> (!e)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.totalRows == <span class="hljs-number">0</span>)
      e.innerHTML = <span class="hljs-keyword">this</span>.getTitle();
    <span class="hljs-keyword">else</span>
      e.innerHTML = <span class="hljs-keyword">this</span>.getTitle() + <span class="hljs-string">" ("</span> + <span class="hljs-keyword">this</span>.totalRows + <span class="hljs-string">")"</span>;
  },
  <span class="hljs-attr">_clear</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.lastChecked = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">this</span>.table = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.loadingDiv)
      <span class="hljs-keyword">this</span>.loadingDiv = <span class="hljs-literal">null</span>;
  },
  <span class="hljs-attr">_getAttributeInt</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e, n, defaultValue</span>) </span>{
    <span class="hljs-keyword">if</span> (!e)
      <span class="hljs-keyword">return</span> defaultValue;
    <span class="hljs-keyword">var</span> v = e.getAttribute(n);
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNaN</span>(v))
      <span class="hljs-keyword">return</span> defaultValue;
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">parseInt</span>(v);
  },
  <span class="hljs-attr">_initList</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.table = $(<span class="hljs-keyword">this</span>.listID + <span class="hljs-string">"_table"</span>);
    <span class="hljs-keyword">this</span>.table.onclick = <span class="hljs-keyword">this</span>.onclickFunc;
    <span class="hljs-keyword">this</span>.table.ondblclick = <span class="hljs-keyword">this</span>.ondblclickFunc;
    <span class="hljs-keyword">this</span>._updateQuery();
    <span class="hljs-keyword">this</span>._setRowCounts();
    <span class="hljs-keyword">this</span>._setSortIndicator();
    CustomEvent.fire(<span class="hljs-string">'list2_init'</span>, <span class="hljs-keyword">this</span>);
  },
  <span class="hljs-attr">_getRowRecord</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">el</span>) </span>{
    <span class="hljs-keyword">var</span> tr = el.up(<span class="hljs-string">'tr'</span>);
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">sysId</span>: tr.readAttribute(<span class="hljs-string">'sys_id'</span>),
      <span class="hljs-attr">target</span>: tr.readAttribute(<span class="hljs-string">'record_class'</span>)
    };
  },
  <span class="hljs-attr">_parseQuery</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">queryString, saveOrderBy, saveGroupBy</span>) </span>{
    queryString = queryString || <span class="hljs-string">""</span>;
    <span class="hljs-keyword">var</span> q = <span class="hljs-keyword">this</span>._separateIntoTerms(queryString);
    <span class="hljs-keyword">var</span> filter = [];
    <span class="hljs-keyword">var</span> orderBy = [];
    <span class="hljs-keyword">var</span> groupBy = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; q.length; i++) {
      <span class="hljs-keyword">var</span> term = q[i];
      <span class="hljs-keyword">if</span> (term == <span class="hljs-string">"EQ"</span>)
        <span class="hljs-keyword">continue</span>;
      <span class="hljs-keyword">if</span> (term.indexOf(<span class="hljs-string">"ORDERBY"</span>) == <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">if</span> (saveOrderBy)
          orderBy.push(term);
        <span class="hljs-keyword">this</span>.orderBySet = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">continue</span>;
      }
      <span class="hljs-keyword">if</span> (term.indexOf(<span class="hljs-string">"GROUPBY"</span>) == <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">if</span> (saveGroupBy)
          groupBy.push(term);
        <span class="hljs-keyword">continue</span>;
      }
      term = <span class="hljs-keyword">this</span>._escapeEmbeddedQueryTermSeparator(term);
      filter.push(term);
    }
    <span class="hljs-keyword">this</span>.filter = filter.join(<span class="hljs-string">"^"</span>);
    <span class="hljs-keyword">if</span> (saveOrderBy)
      <span class="hljs-keyword">this</span>.setOrderBy(orderBy.join(<span class="hljs-string">'^'</span>));
    <span class="hljs-keyword">if</span> (saveGroupBy)
      <span class="hljs-keyword">this</span>.setGroupBy(groupBy.join(<span class="hljs-string">'^'</span>));
  },
  <span class="hljs-attr">_escapeEmbeddedQueryTermSeparator</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">s</span>) </span>{
    s = s.replace(<span class="hljs-regexp">/(\w)\^(\w)/g</span>, <span class="hljs-string">"$1^^$2"</span>);
    <span class="hljs-keyword">return</span> s;
  },
  <span class="hljs-attr">_separateIntoTerms</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">queryString</span>) </span>{
    <span class="hljs-keyword">var</span> terms = [];
    <span class="hljs-keyword">var</span> startIndex = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">while</span> (queryString.substring(startIndex).length &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">var</span> separatorIndex = queryString.indexOf(<span class="hljs-string">"^"</span>, startIndex);
      <span class="hljs-keyword">if</span> (separatorIndex == <span class="hljs-number">-1</span>) {
        terms.push(queryString.substring(startIndex));
        <span class="hljs-keyword">break</span>;
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (separatorIndex == queryString.length - <span class="hljs-number">1</span>) {
        terms.push(queryString.substring(startIndex, separatorIndex));
        <span class="hljs-keyword">break</span>;
      }
      <span class="hljs-keyword">if</span> (separatorIndex &lt; queryString.length - <span class="hljs-number">1</span>) {
        <span class="hljs-keyword">while</span> (queryString.charAt(separatorIndex + <span class="hljs-number">1</span>) == <span class="hljs-string">'^'</span>) {
          separatorIndex = queryString.indexOf(<span class="hljs-string">'^'</span>, separatorIndex + <span class="hljs-number">2</span>);
        }
        <span class="hljs-keyword">if</span> (separatorIndex == <span class="hljs-number">-1</span>)
          separatorIndex = queryString.length;
        <span class="hljs-keyword">var</span> term = queryString.substring(startIndex, separatorIndex);
        term = term.replace(<span class="hljs-regexp">/\^\^/g</span>, <span class="hljs-string">"^"</span>);
        terms.push(term);
        <span class="hljs-keyword">if</span> (++separatorIndex &gt; queryString.length)
          separatorIndex = queryString.length;
        startIndex = separatorIndex;
      }
    }
    <span class="hljs-keyword">return</span> terms;
  },
  <span class="hljs-attr">_updateQuery</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> q = <span class="hljs-keyword">this</span>.table.getAttribute(<span class="hljs-string">'query'</span>);
    <span class="hljs-keyword">if</span> (!q)
      q = <span class="hljs-string">""</span>;
    <span class="hljs-keyword">this</span>._parseQuery(q);
  },
  <span class="hljs-attr">_setSortIndicator</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.sortBy = <span class="hljs-keyword">this</span>.table.getAttribute(<span class="hljs-string">'sort'</span>);
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.sortBy)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.sortBy.startsWith(<span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">"."</span>))
      <span class="hljs-keyword">this</span>.sortBy = <span class="hljs-keyword">this</span>.sortBy.substring(<span class="hljs-keyword">this</span>.tableName.length + <span class="hljs-number">1</span>);
    <span class="hljs-keyword">this</span>.sortDir = <span class="hljs-keyword">this</span>.table.getAttribute(<span class="hljs-string">'sort_dir'</span>);
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.sortDir)
      <span class="hljs-keyword">this</span>.sortDir = <span class="hljs-string">""</span>;
    <span class="hljs-keyword">var</span> e = <span class="hljs-keyword">this</span>.getHeaderCell(<span class="hljs-keyword">this</span>.sortBy);
    <span class="hljs-keyword">if</span> (!e)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">var</span> sortable = (e.getAttribute(<span class="hljs-string">'sortable'</span>) == <span class="hljs-string">"true"</span>);
    <span class="hljs-keyword">if</span> (!sortable)
      <span class="hljs-keyword">return</span>;
    e.setAttribute(<span class="hljs-string">'sort_dir'</span>, <span class="hljs-keyword">this</span>.sortDir);
    <span class="hljs-keyword">var</span> img = $(e).down(<span class="hljs-string">'img'</span>);
    <span class="hljs-keyword">var</span> span = $(e).down(<span class="hljs-string">'span.sort-icon'</span>).down(<span class="hljs-string">'i'</span>);
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.sortDir == <span class="hljs-string">"ASC"</span>) {
      span.removeClassName(<span class="hljs-string">'icon-vcr-down'</span>);
      span.addClassName(<span class="hljs-string">'icon-vcr-up'</span>);
    } <span class="hljs-keyword">else</span> {
      span.removeClassName(<span class="hljs-string">'icon-vcr-up'</span>);
      span.addClassName(<span class="hljs-string">'icon-vcr-down'</span>);
    }
    span.style.visibility = <span class="hljs-string">"visible"</span>;
  },
  <span class="hljs-attr">_toggleSortDir</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">dir, type</span>) </span>{
    <span class="hljs-keyword">if</span> (dir == <span class="hljs-string">"ASC"</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-string">"DESC"</span>;
    <span class="hljs-keyword">if</span> (dir == <span class="hljs-string">"DESC"</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-string">"ASC"</span>;
    <span class="hljs-keyword">if</span> (dateTypes[type])
      <span class="hljs-keyword">return</span> <span class="hljs-string">"DESC"</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-string">"ASC"</span>;
  },
  <span class="hljs-attr">_validateFirstRow</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">row</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNaN</span>(row))
      <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    row = <span class="hljs-built_in">parseInt</span>(row, <span class="hljs-number">10</span>);
    <span class="hljs-keyword">if</span> (row &gt; <span class="hljs-keyword">this</span>.totalRows)
      row = (<span class="hljs-keyword">this</span>.totalRows - <span class="hljs-keyword">this</span>.rowsPerPage) + <span class="hljs-number">1</span>;
    <span class="hljs-keyword">if</span> (row &lt; <span class="hljs-number">1</span>)
      row = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">return</span> row;
  },
  <span class="hljs-attr">_showLoading</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.listContainer)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">var</span> b = getBounds(<span class="hljs-keyword">this</span>.listContainer, <span class="hljs-literal">false</span>);
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.loadingDiv) {
      <span class="hljs-keyword">this</span>.loadingDiv = cel(<span class="hljs-string">"div"</span>);
      addChild(<span class="hljs-keyword">this</span>.loadingDiv);
    }
    <span class="hljs-keyword">this</span>.loadingDiv.className = <span class="hljs-string">"list_loading"</span>;
    <span class="hljs-keyword">this</span>.loadingDiv.style.top = b.top;
    <span class="hljs-keyword">this</span>.loadingDiv.style.left = b.left;
    <span class="hljs-keyword">this</span>.loadingDiv.style.width = b.width;
    <span class="hljs-keyword">this</span>.loadingDiv.style.height = b.height;
    showObject(<span class="hljs-keyword">this</span>.loadingDiv);
  },
  <span class="hljs-attr">_hideLoading</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.loadingDiv)
      <span class="hljs-keyword">return</span>;
    hideObject(<span class="hljs-keyword">this</span>.loadingDiv);
  },
  <span class="hljs-attr">toggleColumnHeader</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> columnHeader = $(<span class="hljs-string">"hdr_"</span> + <span class="hljs-keyword">this</span>.listID);
    setPreference(<span class="hljs-string">"show.column.header"</span>, !columnHeader.visible());
    columnHeader.toggle();
    columnHeader.setAttribute(<span class="hljs-string">'data-show_column_header'</span>, columnHeader.visible() ? <span class="hljs-string">''</span> : <span class="hljs-string">'false'</span>);
    GlideList2.listHeaderVisibility[<span class="hljs-string">"hdr_"</span> + <span class="hljs-keyword">this</span>.listID] = columnHeader.visible();
  },
  <span class="hljs-attr">_restoreColumnHeaderToggleState</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> columnHeader = $(<span class="hljs-string">"hdr_"</span> + <span class="hljs-keyword">this</span>.listID);
    <span class="hljs-keyword">if</span> (!(<span class="hljs-keyword">typeof</span> GlideList2.listHeaderVisibility[<span class="hljs-string">"hdr_"</span> + <span class="hljs-keyword">this</span>.listID] == <span class="hljs-string">"undefined"</span>)) {
      <span class="hljs-keyword">if</span> (columnHeader.visible() &amp;&amp; !GlideList2.listHeaderVisibility[<span class="hljs-string">"hdr_"</span> + <span class="hljs-keyword">this</span>.listID])
        <span class="hljs-keyword">this</span>.toggleColumnHeader();
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!columnHeader.visible() &amp;&amp; GlideList2.listHeaderVisibility[<span class="hljs-string">"hdr_"</span> + <span class="hljs-keyword">this</span>.listID])
        <span class="hljs-keyword">this</span>.toggleColumnHeader();
    }
  },
  <span class="hljs-attr">setCurrentRelatedList</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> relatedParentRecordClass = $(<span class="hljs-keyword">this</span>.listID + <span class="hljs-string">"_table"</span>).getAttribute(<span class="hljs-string">"parent_table"</span>);
    <span class="hljs-keyword">var</span> relatedListName = $(<span class="hljs-keyword">this</span>.listID + <span class="hljs-string">"_table"</span>).getAttribute(<span class="hljs-string">"hier_list_name"</span>);
    setPreference(<span class="hljs-string">"selected.related.list."</span> + relatedParentRecordClass, relatedListName);
  },
  <span class="hljs-attr">getCurrentRelatedList</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> relatedParentRecordClass = $(<span class="hljs-keyword">this</span>.listID + <span class="hljs-string">"_table"</span>).getAttribute(<span class="hljs-string">"parent_table"</span>);
    <span class="hljs-keyword">return</span> getPreference(<span class="hljs-string">"selected.related.list."</span> + relatedParentRecordClass);
  },
  <span class="hljs-attr">listMechanicClick</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>) </span>{
    <span class="hljs-built_in">window</span>.g_table = element.getAttribute(<span class="hljs-string">'data-table'</span>);
    <span class="hljs-built_in">window</span>.g_list_parent_id = element.getAttribute(<span class="hljs-string">'data-parent-id'</span>);
    <span class="hljs-built_in">window</span>.g_list_parent = element.getAttribute(<span class="hljs-string">'data-parent-table'</span>);
    <span class="hljs-built_in">window</span>.g_list_view = element.getAttribute(<span class="hljs-string">'data-view'</span>);
    <span class="hljs-built_in">window</span>.g_list_relationship = element.getAttribute(<span class="hljs-string">'data-relationship'</span>);
    <span class="hljs-keyword">var</span> dialogClass = <span class="hljs-built_in">window</span>.GlideModal ? GlideModal : GlideDialogWindow;
    <span class="hljs-keyword">var</span> g = <span class="hljs-keyword">new</span> dialogClass(<span class="hljs-string">'list_mechanic'</span>);
    g.setTitle(element.getAttribute(<span class="hljs-string">'data-title'</span>));
    g.render();
    g.on(<span class="hljs-string">'bodyrendered'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
      _frameChanged();
    });
  },
  <span class="hljs-attr">setChannelDiscriminator</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">discriminator</span>) </span>{
    <span class="hljs-keyword">this</span>.channelName = <span class="hljs-string">'list'</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> discriminator === <span class="hljs-string">"string"</span>)
      <span class="hljs-keyword">this</span>.channelName += <span class="hljs-string">'-'</span> + discriminator;
    <span class="hljs-keyword">this</span>._initMessageBus();
  },
  <span class="hljs-attr">_initMessageBus</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.messageBus === <span class="hljs-string">'object'</span> &amp;&amp; <span class="hljs-keyword">this</span>.messageBus)
      <span class="hljs-keyword">this</span>.messageBus.destroy();
    <span class="hljs-keyword">this</span>.messageBus = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">if</span> (!NOW.MessageBus)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">this</span>.messageBus = NOW.MessageBus.channel(<span class="hljs-keyword">this</span>.channelName || <span class="hljs-string">'list'</span>);
    <span class="hljs-keyword">this</span>.messageBus.subscribe(<span class="hljs-string">'list.switch'</span>, <span class="hljs-keyword">this</span>._onMessageSwitch.bind(<span class="hljs-keyword">this</span>));
    <span class="hljs-keyword">this</span>.messageBus.subscribe(<span class="hljs-string">'list.refresh'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">this</span>._refreshAjax(<span class="hljs-literal">undefined</span>, <span class="hljs-literal">undefined</span>, <span class="hljs-literal">true</span>);
    }.bind(<span class="hljs-keyword">this</span>));
    <span class="hljs-keyword">this</span>.messageBus.subscribe(<span class="hljs-string">'record.highlight.select'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">payload</span>) </span>{
      <span class="hljs-keyword">var</span> table = payload.table;
      <span class="hljs-keyword">var</span> sysId = payload.record.sys_id;
      <span class="hljs-keyword">this</span>._highlightSelectedRow(table, sysId);
    }.bind(<span class="hljs-keyword">this</span>));
    <span class="hljs-keyword">this</span>.messageBus.subscribe(<span class="hljs-string">'record.highlight.unselect'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">payload</span>) </span>{
      <span class="hljs-keyword">this</span>._highlightSelectedRow();
    }.bind(<span class="hljs-keyword">this</span>));
    <span class="hljs-keyword">this</span>.messageBus.subscribe(<span class="hljs-string">'record.highlight.hover'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">payload</span>) </span>{
      <span class="hljs-keyword">var</span> sysId = payload.record.sys_id;
      <span class="hljs-keyword">var</span> el = <span class="hljs-built_in">window</span>.$$(<span class="hljs-string">'tr[sys_id="'</span> + sysId + <span class="hljs-string">'"]'</span>);
      <span class="hljs-keyword">if</span> (el[<span class="hljs-number">0</span>])
        <span class="hljs-keyword">this</span>._addHoveredRowHighlight(el[<span class="hljs-number">0</span>]);
    }.bind(<span class="hljs-keyword">this</span>));
    <span class="hljs-keyword">this</span>.messageBus.subscribe(<span class="hljs-string">'record.highlight.unhover'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">payload</span>) </span>{
      <span class="hljs-keyword">this</span>._removeHoveredRowHighlight();
    }.bind(<span class="hljs-keyword">this</span>));
  },
  <span class="hljs-attr">_publishMessage</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">topic, payload</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.messageBus)
      <span class="hljs-keyword">this</span>.messageBus.publish(topic, payload);
  },
  <span class="hljs-attr">_addHoveredRowHighlight</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">el</span>) </span>{
    el.addClassName(<span class="hljs-string">'hover'</span>);
    <span class="hljs-keyword">var</span> id = el.getAttribute(<span class="hljs-string">"id"</span>);
    <span class="hljs-keyword">if</span> (id) {
      <span class="hljs-keyword">var</span> hierRow = $(<span class="hljs-string">"hier_"</span> + id);
      <span class="hljs-keyword">if</span> (hierRow)
        hierRow.addClassName(<span class="hljs-string">'hoverHier'</span>);
      <span class="hljs-keyword">var</span> sysId = id.substr(id.lastIndexOf(<span class="hljs-string">'_'</span>) + <span class="hljs-number">1</span>);
      <span class="hljs-keyword">this</span>._publishMessage(<span class="hljs-string">'record.highlight.hovered'</span>, {
        <span class="hljs-attr">table</span>: <span class="hljs-keyword">this</span>.tableName,
        <span class="hljs-attr">record</span>: {
          <span class="hljs-attr">sys_id</span>: sysId
        }
      })
    }
  },
  <span class="hljs-attr">_removeHoveredRowHighlight</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">el</span>) </span>{
    <span class="hljs-built_in">window</span>.$$(<span class="hljs-string">'.list_row.hover'</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">elem</span>) </span>{
      elem.removeClassName(<span class="hljs-string">'hover'</span>);
      <span class="hljs-keyword">var</span> id = el.getAttribute(<span class="hljs-string">"id"</span>);
      <span class="hljs-keyword">if</span> (id) {
        <span class="hljs-keyword">var</span> hierRow = $(<span class="hljs-string">"hier_"</span> + id);
        <span class="hljs-keyword">if</span> (hierRow)
          hierRow.removeClassName(<span class="hljs-string">'hoverHier'</span>);
        <span class="hljs-keyword">var</span> sysId = id.substr(id.lastIndexOf(<span class="hljs-string">'_'</span>) + <span class="hljs-number">1</span>);
        <span class="hljs-keyword">this</span>._publishMessage(<span class="hljs-string">'record.highlight.unhovered'</span>, {
          <span class="hljs-attr">table</span>: <span class="hljs-keyword">this</span>.tableName,
          <span class="hljs-attr">record</span>: {
            <span class="hljs-attr">sys_id</span>: sysId
          }
        })
      }
    }.bind(<span class="hljs-keyword">this</span>));
    <span class="hljs-built_in">window</span>.$$(<span class="hljs-string">'.hoverHier'</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">elem</span>) </span>{
      elem.removeClassName(<span class="hljs-string">'hoverHier'</span>);
    });
  },
  <span class="hljs-attr">_highlightSelectedRow</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">table, sysId</span>) </span>{
    <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
    <span class="hljs-keyword">var</span> LIST_ITEM_SELECTED_CLASS = <span class="hljs-string">'ui11_list_item_selected'</span>;
    clearHighlight();
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.tableName !== table)
      <span class="hljs-keyword">return</span>;
    highlightRow(sysId);
    <span class="hljs-keyword">this</span>._publishMessage(<span class="hljs-string">'record.highlight.selected'</span>, {
      <span class="hljs-attr">table</span>: table,
      <span class="hljs-attr">record</span>: {
        <span class="hljs-attr">sys_id</span>: sysId
      }
    });

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">highlightRow</span>(<span class="hljs-params">sysId</span>) </span>{
      <span class="hljs-keyword">var</span> e = $j(<span class="hljs-string">'tr[sys_id="'</span> + sysId + <span class="hljs-string">'"]'</span>);
      <span class="hljs-keyword">if</span> (e.length) {
        e.addClass(LIST_ITEM_SELECTED_CLASS);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-built_in">window</span>.$$(<span class="hljs-string">'a[sys_id="'</span> + sysId + <span class="hljs-string">'"]'</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">elem</span>) </span>{
          elem.up(<span class="hljs-string">'td'</span>).addClassName(LIST_ITEM_SELECTED_CLASS);
        });
      }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">clearHighlight</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">var</span> e = $j(<span class="hljs-string">'.'</span> + LIST_ITEM_SELECTED_CLASS);
      e.removeClass(LIST_ITEM_SELECTED_CLASS);
      $j.each(e, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">index, elem</span>) </span>{
        <span class="hljs-keyword">var</span> sysId = elem.getAttribute(<span class="hljs-string">"sys_id"</span>);
        self._publishMessage(<span class="hljs-string">'record.highlight.unselected'</span>, {
          <span class="hljs-attr">table</span>: table,
          <span class="hljs-attr">record</span>: {
            <span class="hljs-attr">sys_id</span>: sysId
          }
        });
      })
    }
  },
  <span class="hljs-attr">_onMessageSwitch</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{
    <span class="hljs-keyword">if</span> (data.table != <span class="hljs-keyword">this</span>.tableName)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">if</span> (data.filter)
      <span class="hljs-keyword">this</span>.setFilter(data.filter, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>);
    <span class="hljs-keyword">var</span> desiredFirstRow = <span class="hljs-keyword">this</span>.firstRow;
    <span class="hljs-keyword">if</span> (data.page)
      desiredFirstRow = data.page * <span class="hljs-keyword">this</span>.rowsPerPage + <span class="hljs-number">1</span>;
    <span class="hljs-keyword">this</span>.refreshWithOrderBy(desiredFirstRow);
  },
  <span class="hljs-attr">_fireListReady</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>._publishMessage(<span class="hljs-string">'list.ready'</span>, {
      <span class="hljs-attr">table</span>: <span class="hljs-keyword">this</span>.getTableName(),
      <span class="hljs-attr">filter</span>: <span class="hljs-keyword">this</span>.getQuery(),
      <span class="hljs-attr">view</span>: <span class="hljs-keyword">this</span>.getView(),
      <span class="hljs-attr">records</span>: <span class="hljs-keyword">this</span>._getRecords()
    });
  },
  <span class="hljs-attr">_getRecords</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> records = [];
    <span class="hljs-keyword">this</span>.table.select(<span class="hljs-string">'tr.list_row'</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">el</span>) </span>{
      <span class="hljs-keyword">var</span> id = el.getAttribute(<span class="hljs-string">'sys_id'</span>);
      records.push({
        <span class="hljs-attr">sys_id</span>: id
      });
    });
    <span class="hljs-keyword">return</span> records;
  },
  <span class="hljs-attr">type</span>: <span class="hljs-string">'GlideList2'</span>
});
GlideList2.listHeaderVisibility = {};;
<span class="hljs-comment">/*! RESOURCE: /scripts/classes/GlideList2Statics.js */</span>
<span class="hljs-keyword">var</span> GlideLists2 = {};
GlideList2.LIST_BODY_START = <span class="hljs-string">"&lt;!--LIST_BODY_START--&gt;"</span>;
GlideList2.LIST_BODY_END = <span class="hljs-string">"&lt;!--LIST_BODY_END--&gt;"</span>;
GlideList2.LOADING_MSG = <span class="hljs-string">"&lt;div class='list_loading_div'&gt;Loading...&lt;img src='images/ajax-loader.gifx' alt='Loading...' style='padding-left: 2px;'&gt;&lt;/div&gt;"</span>;
GlideList2.unload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> id <span class="hljs-keyword">in</span> GlideLists2) {
    <span class="hljs-keyword">var</span> list = GlideLists2[id];
    list.destroy();
    GlideLists2[id] = <span class="hljs-literal">null</span>;
  }
  g_list = <span class="hljs-literal">null</span>;
  GlideLists2 = {};
  CustomEvent.un(<span class="hljs-string">"print.grouped.headers"</span>, GlideList2.breakGroupHeader);
}
GlideList2.get = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">idOrElement</span>) </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> idOrElement == <span class="hljs-string">'string'</span>)
    <span class="hljs-keyword">return</span> GlideLists2[idOrElement];
  <span class="hljs-keyword">return</span> GlideList2._getByElement(idOrElement);
}
GlideList2.getIdByElement = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>) </span>{
  element = $(element);
  <span class="hljs-keyword">if</span> (!element)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">var</span> div = element;
  <span class="hljs-keyword">do</span> {
    div = findParentByTag(div, <span class="hljs-string">'div'</span>);
    <span class="hljs-keyword">if</span> (!div)
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">var</span> type = getAttributeValue(div, <span class="hljs-string">"type"</span>);
    <span class="hljs-keyword">if</span> (type == <span class="hljs-string">"list_div"</span>)
      <span class="hljs-keyword">break</span>;
  } <span class="hljs-keyword">while</span> (div);
  <span class="hljs-keyword">if</span> (!div)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">return</span> div.id;
}
GlideList2.getByName = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name</span>) </span>{
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> id <span class="hljs-keyword">in</span> GlideLists2) {
    <span class="hljs-keyword">var</span> list = GlideLists2[id];
    <span class="hljs-keyword">if</span> (list.getListName() == name)
      <span class="hljs-keyword">return</span> list;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
}
GlideList2.getListsForTable = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">table</span>) </span>{
  <span class="hljs-keyword">var</span> lists = [];
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> id <span class="hljs-keyword">in</span> GlideLists2) {
    <span class="hljs-keyword">var</span> list = GlideLists2[id];
    <span class="hljs-keyword">if</span> (list.getTableName() == table)
      lists.push(list);
  }
  <span class="hljs-keyword">return</span> lists;
}
GlideList2._getByElement = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>) </span>{
  <span class="hljs-keyword">var</span> id = <span class="hljs-keyword">this</span>.getIdByElement(element);
  <span class="hljs-keyword">if</span> (!id)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">return</span> GlideLists2[id];
}
GlideList2.breakGroupHeader = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">checkedFlag</span>) </span>{
  <span class="hljs-keyword">var</span> breakStyle = <span class="hljs-string">"auto"</span>;
  <span class="hljs-keyword">if</span> (checkedFlag)
    breakStyle = <span class="hljs-string">"always"</span>;
  <span class="hljs-keyword">var</span> tds = <span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">"td"</span>);
  <span class="hljs-keyword">var</span> len = tds.length;
  <span class="hljs-keyword">var</span> first = <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) {
    <span class="hljs-keyword">var</span> td = tds[i];
    <span class="hljs-keyword">if</span> (getAttributeValue(td, <span class="hljs-string">"group_row_td"</span>) != <span class="hljs-string">"true"</span>)
      <span class="hljs-keyword">continue</span>;
    <span class="hljs-keyword">if</span> (first)
      first = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">else</span>
      td.style.pageBreakBefore = breakStyle;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}
GlideList2.toggleAll = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">expandFlag</span>) </span>{
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> id <span class="hljs-keyword">in</span> GlideLists2) {
    <span class="hljs-keyword">var</span> list = GlideLists2[id];
    list.showHideList(expandFlag);
  }
}
GlideList2.updateCellContents = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">cell, data</span>) </span>{
  $(cell).setStyle({
    <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">cssText</span>: data.getAttribute(<span class="hljs-string">'style'</span>)
  });
  <span class="hljs-keyword">var</span> work = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'div'</span>);
  cell.innerHTML = <span class="hljs-string">''</span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> child = data.firstChild; child; child = child.nextSibling) {
    work.innerHTML = getXMLString(child);
    <span class="hljs-keyword">if</span> (work.firstChild !== <span class="hljs-literal">null</span>)
      cell.appendChild(work.firstChild);
  }
  cell.innerHTML.evalScripts(<span class="hljs-literal">true</span>);
  cell.removeClassName(<span class="hljs-string">'list_edit_dirty'</span>);
  CustomEvent.fire(<span class="hljs-string">"list_cell_changed"</span>, cell);
};
<span class="hljs-comment">/*! RESOURCE: /scripts/classes/GlideList2Handlers.js */</span>
<span class="hljs-keyword">var</span> GlideList2NewHandler = Class.create();
GlideList2NewHandler.prototype = {
  <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    CustomEvent.observe(<span class="hljs-string">"list.handler"</span>, <span class="hljs-keyword">this</span>.process.bind(<span class="hljs-keyword">this</span>));
  },
  <span class="hljs-attr">process</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">list, actionId, actionName</span>) </span>{
    <span class="hljs-keyword">if</span> (actionName == <span class="hljs-string">"sysverb_new"</span>)
      list.addToForm(<span class="hljs-string">"sys_id"</span>, <span class="hljs-string">"-1"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  },
  <span class="hljs-attr">type</span>: <span class="hljs-string">'GlideList2NewHandler'</span>
};
<span class="hljs-keyword">var</span> GlideList2ChecksHandler = Class.create();
GlideList2ChecksHandler.prototype = {
  <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    CustomEvent.observe(<span class="hljs-string">"list.handler"</span>, <span class="hljs-keyword">this</span>.process.bind(<span class="hljs-keyword">this</span>));
  },
  <span class="hljs-attr">process</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">list, actionId, actionName</span>) </span>{
    <span class="hljs-keyword">if</span> (!actionName.startsWith(<span class="hljs-string">"sysverb"</span>)) {
      <span class="hljs-keyword">var</span> keys = [<span class="hljs-string">'No records selected'</span>, <span class="hljs-string">'Delete the selected item?'</span>, <span class="hljs-string">'Delete these'</span>, <span class="hljs-string">'items?'</span>];
      <span class="hljs-keyword">var</span> msgs = getMessages(keys);
      <span class="hljs-keyword">if</span> (list.checkedIds == <span class="hljs-string">''</span>) {
        alert(msgs[<span class="hljs-string">"No records selected"</span>]);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      }
      <span class="hljs-keyword">if</span> (actionName == <span class="hljs-string">"delete_checked"</span>) {
        <span class="hljs-keyword">var</span> items = list.checkedIds.split(<span class="hljs-string">","</span>);
        <span class="hljs-keyword">if</span> (items.length == <span class="hljs-number">1</span>) {
          <span class="hljs-keyword">if</span> (!confirm(msgs[<span class="hljs-string">"Delete the selected item?"</span>]))
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (items.length &gt; <span class="hljs-number">0</span>) {
          <span class="hljs-keyword">if</span> (!confirm(msgs[<span class="hljs-string">"Delete these"</span>] + <span class="hljs-string">" "</span> + items.length + <span class="hljs-string">" "</span> + msgs[<span class="hljs-string">"items?"</span>]))
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
      }
    }
    list.addToForm(<span class="hljs-string">'sysparm_checked_items'</span>, list.checkedIds);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  },
  <span class="hljs-attr">type</span>: <span class="hljs-string">'GlideList2ChecksHandler'</span>
};
<span class="hljs-keyword">var</span> GlideList2SecurityHandler = Class.create();
GlideList2SecurityHandler.prototype = {
  <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    CustomEvent.observe(<span class="hljs-string">"list.handler"</span>, <span class="hljs-keyword">this</span>.process.bind(<span class="hljs-keyword">this</span>));
  },
  <span class="hljs-attr">process</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">list, actionId, actionName</span>) </span>{
    <span class="hljs-keyword">var</span> element = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">if</span> (actionId)
      element = $(actionId);
    <span class="hljs-keyword">if</span> (!element)
      element = $(actionName);
    <span class="hljs-keyword">if</span> (element) {
      <span class="hljs-keyword">var</span> gsftc = element.getAttribute(<span class="hljs-string">'gsft_condition'</span>);
      <span class="hljs-keyword">if</span> (gsftc != <span class="hljs-literal">null</span> &amp;&amp; gsftc != <span class="hljs-string">'true'</span>)
        <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">if</span> (list.checkedIds.length == <span class="hljs-number">0</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">var</span> sysIds = list.checkedIds;
    <span class="hljs-keyword">var</span> ajax = <span class="hljs-keyword">new</span> GlideAjax(<span class="hljs-string">"AJAXActionSecurity"</span>);
    ajax.addParam(<span class="hljs-string">"sys_target"</span>, list.getTableName());
    ajax.addParam(<span class="hljs-string">"sys_action"</span>, actionId);
    ajax.addParam(<span class="hljs-string">"sysparm_checked_items"</span>, sysIds);
    ajax.addParam(<span class="hljs-string">"sysparm_view"</span>, list.getView());
    ajax.addParam(<span class="hljs-string">"sysparm_query"</span>, list.getSubmitValue(<span class="hljs-string">"sysparm_fixed_query"</span>));
    ajax.addParam(<span class="hljs-string">"sysparm_referring_url"</span>, list.getReferringURL());
    ajax.addParam(<span class="hljs-string">"sys_is_related_list"</span>, list.getSubmitValue(<span class="hljs-string">"sys_is_related_list"</span>));
    ajax.addParam(<span class="hljs-string">"sysparm_collection_related_file"</span>, list.getSubmitValue(<span class="hljs-string">"sysparm_collection_related_file"</span>));
    ajax.addParam(<span class="hljs-string">"sysparm_collection_key"</span>, list.getSubmitValue(<span class="hljs-string">"sysparm_collection_key"</span>));
    ajax.addParam(<span class="hljs-string">"sysparm_collection_relationship"</span>, list.getSubmitValue(<span class="hljs-string">"sysparm_collection_relationship"</span>));
    ajax.addParam(<span class="hljs-string">"sysparm_target"</span>, list.getTableName());
    <span class="hljs-keyword">var</span> xml = ajax.getXMLWait();
    <span class="hljs-keyword">var</span> answer = {};
    <span class="hljs-keyword">var</span> root = xml.getElementsByTagName(<span class="hljs-string">"action_"</span> + actionId)[<span class="hljs-number">0</span>];
    <span class="hljs-keyword">var</span> keys = root.childNodes;
    <span class="hljs-keyword">var</span> validIds = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; keys.length; i++) {
      <span class="hljs-keyword">var</span> key = keys[i];
      <span class="hljs-keyword">var</span> id = key.getAttribute(<span class="hljs-string">'sys_id'</span>);
      <span class="hljs-keyword">if</span> (key.getAttribute(<span class="hljs-string">'can_execute'</span>) == <span class="hljs-string">'true'</span>)
        validIds.push(id);
    }
    <span class="hljs-keyword">if</span> (validIds.length == sysIds.length)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">if</span> (validIds.length == <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">var</span> m = <span class="hljs-keyword">new</span> GwtMessage().getMessage(<span class="hljs-string">'Security does not allow the execution of that action against the specified record'</span>);
      <span class="hljs-keyword">if</span> (validIds.length &gt; <span class="hljs-number">1</span>)
        m = m + <span class="hljs-string">'s'</span>;
      alert(m);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-keyword">var</span> sysIds = sysIds.split(<span class="hljs-string">','</span>);
    <span class="hljs-keyword">if</span> (validIds.length != sysIds.length) {
      <span class="hljs-keyword">var</span> m = <span class="hljs-keyword">new</span> GwtMessage().getMessage(<span class="hljs-string">'Security allows the execution of that action against {0} of {1} records. Proceed?'</span>, validIds.length, sysIds.length);
      list.addToForm(<span class="hljs-string">'sysparm_checked_items'</span>, validIds.join(<span class="hljs-string">','</span>));
      <span class="hljs-keyword">return</span> confirm(m);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  },
  <span class="hljs-attr">type</span>: <span class="hljs-string">'GlideList2SecurityHandler'</span>
};;
<span class="hljs-comment">/*! RESOURCE: /scripts/classes/GlideListWidget.js */</span>
<span class="hljs-keyword">var</span> GlideListWidget = Class.create();
GlideListWidget.prototype = {
  <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">widgetID, listID</span>) </span>{
    <span class="hljs-keyword">this</span>.widgetID = widgetID;
    <span class="hljs-keyword">this</span>.listID = listID;
    GlideListWidgets[<span class="hljs-keyword">this</span>.widgetID] = <span class="hljs-keyword">this</span>;
    CustomEvent.observe(<span class="hljs-string">'list.loaded'</span>, <span class="hljs-keyword">this</span>.refresh.bind(<span class="hljs-keyword">this</span>));
    CustomEvent.observe(<span class="hljs-string">'partial.page.reload'</span>, <span class="hljs-keyword">this</span>.refreshPartial.bind(<span class="hljs-keyword">this</span>));
  },
  <span class="hljs-attr">refresh</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">listTable, list</span>) </span>{
    <span class="hljs-keyword">if</span> (!list || !list.listID)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">if</span> (list.listID != <span class="hljs-keyword">this</span>.listID)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">this</span>._refresh(listTable, list, <span class="hljs-literal">true</span>);
  },
  <span class="hljs-attr">refreshPartial</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">listTable, list</span>) </span>{
    <span class="hljs-keyword">if</span> (!list || !list.listID)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">if</span> (list.listID != <span class="hljs-keyword">this</span>.listID)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">this</span>._refresh(listTable, list, <span class="hljs-literal">false</span>);
  },
  <span class="hljs-attr">_refresh</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">listTable, list, isInitialLoad</span>) </span>{},
  <span class="hljs-attr">_getElement</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>) </span>{
    <span class="hljs-keyword">return</span> $(<span class="hljs-keyword">this</span>.widgetID + <span class="hljs-string">"_"</span> + n);
  },
  <span class="hljs-attr">_getValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>) </span>{
    <span class="hljs-keyword">var</span> e = <span class="hljs-keyword">this</span>._getElement(n);
    <span class="hljs-keyword">if</span> (!e)
      <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
    <span class="hljs-keyword">return</span> e.value;
  },
  <span class="hljs-attr">_setValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n, v</span>) </span>{
    <span class="hljs-keyword">var</span> e = <span class="hljs-keyword">this</span>._getElement(n);
    <span class="hljs-keyword">if</span> (!e)
      <span class="hljs-keyword">return</span>;
    e.value = v;
  },
  <span class="hljs-attr">_setInner</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n, v</span>) </span>{
    <span class="hljs-keyword">var</span> e = <span class="hljs-keyword">this</span>._getElement(n);
    <span class="hljs-keyword">if</span> (!e)
      <span class="hljs-keyword">return</span>;
    e.innerHTML = v;
  },
  <span class="hljs-attr">type</span>: <span class="hljs-string">'GlideListWidget'</span>
}
<span class="hljs-keyword">var</span> GlideListWidgets = {};
GlideListWidget.get = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">id</span>) </span>{
  <span class="hljs-keyword">return</span> GlideListWidgets[id];
};
<span class="hljs-comment">/*! RESOURCE: /scripts/classes/GlideWidgetVCR.js */</span>
<span class="hljs-keyword">var</span> GlideWidgetVCR = Class.create(GlideListWidget, {
  <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$super, widgetID, listID</span>) </span>{
    $<span class="hljs-keyword">super</span>(widgetID, listID);
    <span class="hljs-keyword">this</span>.backAllowed = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">this</span>.nextAllowed = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">this</span>._initEvents();
    CustomEvent.observe(<span class="hljs-string">"list_v2.orderby.update"</span>, <span class="hljs-keyword">this</span>._updateOrderBy.bind(<span class="hljs-keyword">this</span>));
  },
  <span class="hljs-attr">gotoAction</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ev, el</span>) </span>{
    ev.preventDefault();
    <span class="hljs-keyword">var</span> action = el.name.substring(<span class="hljs-number">4</span>);
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.backAllowed &amp;&amp; ((action == <span class="hljs-string">'first'</span>) || (action == <span class="hljs-string">'back'</span>)))
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.nextAllowed &amp;&amp; ((action == <span class="hljs-string">'next'</span>) || (action == <span class="hljs-string">'last'</span>)))
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">var</span> list = GlideList2.get(<span class="hljs-keyword">this</span>.listID);
    <span class="hljs-keyword">var</span> row;
    <span class="hljs-keyword">if</span> (action == <span class="hljs-string">'first'</span>)
      row = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (action == <span class="hljs-string">'back'</span>)
      row = list.firstRow - list.rowsPerPage;
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (action == <span class="hljs-string">'next'</span>)
      row = list.firstRow + list.rowsPerPage;
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (action == <span class="hljs-string">'last'</span>)
      row = (list.totalRows + <span class="hljs-number">1</span>) - list.rowsPerPage;
    <span class="hljs-keyword">else</span>
      <span class="hljs-keyword">return</span>;
    list._refreshAjax(row, {}, <span class="hljs-literal">true</span>);
  },
  <span class="hljs-attr">gotoRow</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ev</span>) </span>{
    ev = getEvent(ev);
    <span class="hljs-keyword">if</span> (!ev || ev.keyCode != <span class="hljs-number">13</span>)
      <span class="hljs-keyword">return</span>;
    ev.stop();
    <span class="hljs-keyword">var</span> row = <span class="hljs-keyword">this</span>._getElement(<span class="hljs-string">'first_row'</span>).value;
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNaN</span>(row))
      row = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">var</span> list = GlideList2.get(<span class="hljs-keyword">this</span>.listID);
    list._refreshAjax(row, {}, <span class="hljs-literal">true</span>);
  },
  <span class="hljs-attr">_initEvents</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.span = $(<span class="hljs-keyword">this</span>.widgetID + <span class="hljs-string">"_vcr"</span>);
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.span)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">this</span>.span.on(<span class="hljs-string">'click'</span>, <span class="hljs-string">"[data-nav=true]"</span>, <span class="hljs-keyword">this</span>.gotoAction.bind(<span class="hljs-keyword">this</span>));
    <span class="hljs-keyword">var</span> input = <span class="hljs-keyword">this</span>.span.getElementsByTagName(<span class="hljs-string">"INPUT"</span>)[<span class="hljs-number">0</span>];
    $(input).observe(<span class="hljs-string">'keypress'</span>, <span class="hljs-keyword">this</span>.gotoRow.bind(<span class="hljs-keyword">this</span>));
  },
  <span class="hljs-attr">_refresh</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">listTable, list</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.span.innerHTML == <span class="hljs-string">""</span>)
      <span class="hljs-keyword">this</span>.span = $(<span class="hljs-keyword">this</span>.widgetID + <span class="hljs-string">"_vcr"</span>);
    <span class="hljs-keyword">if</span> (list.totalRows == <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">this</span>._setVisible(<span class="hljs-literal">false</span>);
      <span class="hljs-keyword">this</span>._setRepVisible(<span class="hljs-literal">false</span>);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (list.totalRows &lt;= list.rowsPerPage &amp;&amp; GlideList2.get(<span class="hljs-keyword">this</span>.listID).isHierarchical()) {
      <span class="hljs-keyword">this</span>._setVisible(<span class="hljs-literal">false</span>);
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._setRepVisible(<span class="hljs-literal">true</span>, list.totalRows))
        <span class="hljs-keyword">this</span>._setInner(<span class="hljs-string">'rep_total_rows'</span>, list.totalRows);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">this</span>._setVisible(<span class="hljs-literal">true</span>);
      <span class="hljs-keyword">this</span>._setRepVisible(<span class="hljs-literal">false</span>);
      <span class="hljs-keyword">this</span>.backAllowed = (list.firstRow &gt; <span class="hljs-number">1</span>);
      <span class="hljs-keyword">this</span>.nextAllowed = (list.lastRow &lt; list.totalRows);
      <span class="hljs-keyword">this</span>._setRowNumbers(list);
      <span class="hljs-keyword">var</span> images = $(<span class="hljs-keyword">this</span>.span).select(<span class="hljs-string">"[data-nav=true]"</span>);
      <span class="hljs-keyword">if</span> (images &amp;&amp; images.length) {
        <span class="hljs-keyword">this</span>._setAction(images[<span class="hljs-number">0</span>], <span class="hljs-keyword">this</span>.backAllowed);
        <span class="hljs-keyword">this</span>._setAction(images[<span class="hljs-number">1</span>], <span class="hljs-keyword">this</span>.backAllowed);
        <span class="hljs-keyword">this</span>._setAction(images[<span class="hljs-number">2</span>], <span class="hljs-keyword">this</span>.nextAllowed);
        <span class="hljs-keyword">this</span>._setAction(images[<span class="hljs-number">3</span>], <span class="hljs-keyword">this</span>.nextAllowed);
      }
    }
  },
  <span class="hljs-attr">_setRowNumbers</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">list</span>) </span>{
    <span class="hljs-keyword">var</span> lastRow = $(<span class="hljs-keyword">this</span>.widgetID + <span class="hljs-string">'_last_row'</span>),
      totalRows = $(<span class="hljs-keyword">this</span>.widgetID + <span class="hljs-string">'_total_rows'</span>),
      firstRow = $(<span class="hljs-keyword">this</span>.widgetID + <span class="hljs-string">'_first_row'</span>);
    <span class="hljs-keyword">if</span> (lastRow)
      lastRow.innerHTML = list.lastRow;
    <span class="hljs-keyword">if</span> (totalRows)
      totalRows.innerHTML = list.totalRows;
    <span class="hljs-keyword">if</span> (firstRow)
      firstRow.value = list.firstRow;
  },
  <span class="hljs-attr">_setAction</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">img, allowed</span>) </span>{
    <span class="hljs-keyword">if</span> (img.tagName.toLowerCase() == <span class="hljs-string">"img"</span>) {
      <span class="hljs-keyword">if</span> (allowed) {
        img.addClassName(<span class="hljs-string">"pointerhand"</span>);
        <span class="hljs-keyword">this</span>._removeDis(img);
      } <span class="hljs-keyword">else</span> {
        img.removeClassName(<span class="hljs-string">"pointerhand"</span>);
        <span class="hljs-keyword">this</span>._addDis(img);
      }
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">if</span> (!allowed)
        img.addClassName(<span class="hljs-string">"tab_button_disabled"</span>);
      <span class="hljs-keyword">else</span>
        img.removeClassName(<span class="hljs-string">"tab_button_disabled"</span>);
    }
  },
  <span class="hljs-attr">_removeDis</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">img</span>) </span>{
    <span class="hljs-keyword">var</span> src = img.src;
    <span class="hljs-keyword">if</span> (src.indexOf(<span class="hljs-string">'_dis.gifx'</span>) != <span class="hljs-number">-1</span>)
      img.src = src.replace(<span class="hljs-regexp">/\_dis\.gifx/i</span>, <span class="hljs-string">".gifx"</span>);
  },
  <span class="hljs-attr">_addDis</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">img</span>) </span>{
    <span class="hljs-keyword">var</span> src = img.src;
    <span class="hljs-keyword">if</span> (src.indexOf(<span class="hljs-string">'_dis.gifx'</span>) == <span class="hljs-number">-1</span>)
      img.src = src.replace(<span class="hljs-regexp">/\.gifx/i</span>, <span class="hljs-string">"_dis.gifx"</span>);
  },
  <span class="hljs-attr">_setVisible</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">flag</span>) </span>{
    <span class="hljs-keyword">var</span> e = <span class="hljs-keyword">this</span>.span;
    <span class="hljs-keyword">if</span> (!e)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">if</span> ((flag &amp;&amp; !e.visible()) || (!flag &amp;&amp; e.visible()))
      e.toggle();
  },
  <span class="hljs-attr">_setRepVisible</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">flag, total_rows</span>) </span>{
    <span class="hljs-keyword">var</span> e = $(<span class="hljs-keyword">this</span>.widgetID + <span class="hljs-string">"_rep_vcr"</span>);
    <span class="hljs-keyword">if</span> (!e)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">if</span> ((flag &amp;&amp; !e.visible()) || (!flag &amp;&amp; e.visible()))
      e.toggle();
    <span class="hljs-keyword">if</span> (!flag)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">var</span> showPlural = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">var</span> showSingular = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">if</span> (total_rows &gt; <span class="hljs-number">1</span>)
      showPlural = flag;
    <span class="hljs-keyword">else</span>
      showSingular = flag;
    <span class="hljs-keyword">var</span> e = $(<span class="hljs-keyword">this</span>.widgetID + <span class="hljs-string">"_rep_plural_label"</span>);
    <span class="hljs-keyword">if</span> (e)
      <span class="hljs-keyword">if</span> ((showPlural &amp;&amp; !e.visible()) || (!showPlural &amp;&amp; e.visible()))
        e.toggle();
    <span class="hljs-keyword">var</span> e = $(<span class="hljs-keyword">this</span>.widgetID + <span class="hljs-string">"_rep_singular_label"</span>);
    <span class="hljs-keyword">if</span> (e)
      <span class="hljs-keyword">if</span> ((showSingular &amp;&amp; !e.visible()) || (!showSingular &amp;&amp; e.visible()))
        e.toggle();
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  },
  <span class="hljs-attr">_updateOrderBy</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">orderBy</span>) </span>{
    <span class="hljs-keyword">var</span> list = GlideList2.get(<span class="hljs-keyword">this</span>.listID);
    <span class="hljs-keyword">if</span> (list)
      list.setOrderBy(orderBy);
  },
  <span class="hljs-attr">type</span>: <span class="hljs-string">'GlideWidgetVCR'</span>
});;
<span class="hljs-comment">/*! RESOURCE: /scripts/classes/GlideWidgetActions.js */</span>
<span class="hljs-keyword">var</span> GlideWidgetActions = Class.create(GlideListWidget, {
  <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$super, widgetID, listID, ofText</span>) </span>{
    $<span class="hljs-keyword">super</span>(widgetID, listID);
    <span class="hljs-keyword">this</span>.ofText = ofText;
    <span class="hljs-keyword">this</span>.securityActions = {};
  },
  <span class="hljs-attr">_refresh</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">listTable, list</span>) </span>{
    <span class="hljs-keyword">this</span>.securityActions = {};
    list._setTheAllCheckbox(<span class="hljs-literal">false</span>);
  },
  <span class="hljs-attr">actionCheck</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">select</span>) </span>{
    <span class="hljs-keyword">if</span> (select.getAttribute(<span class="hljs-string">'gsft_sec_check'</span>) == <span class="hljs-string">'true'</span>)
      <span class="hljs-keyword">return</span>;
    select.setAttribute(<span class="hljs-string">'gsft_sec_check'</span>, <span class="hljs-string">'true'</span>);
    <span class="hljs-keyword">var</span> actions = [];
    <span class="hljs-keyword">var</span> sysIds = [];
    <span class="hljs-keyword">var</span> list = GlideList2.get(<span class="hljs-keyword">this</span>.listID);
    <span class="hljs-keyword">var</span> checkedIds = list.getChecked();
    <span class="hljs-keyword">if</span> (checkedIds)
      sysIds = checkedIds.split(<span class="hljs-string">","</span>);
    <span class="hljs-keyword">var</span> options = select.options;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; options.length; i++) {
      <span class="hljs-keyword">var</span> opt = options[i];
      opt.style.display = <span class="hljs-string">'inline'</span>;
      <span class="hljs-keyword">if</span> (getAttributeValue(opt, <span class="hljs-string">'gsft_is_action'</span>) != <span class="hljs-string">'true'</span>)
        <span class="hljs-keyword">continue</span>;
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._checkAction(opt, sysIds))
        actions.push(opt);
    }
    <span class="hljs-keyword">if</span> (actions.length &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">var</span> actionIds = [];
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; actions.length; i++)
        actionIds.push(actions[i].id);
      <span class="hljs-keyword">this</span>._canExecute(actionIds, sysIds, list.tableName);
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; actions.length; i++) {
        <span class="hljs-keyword">var</span> opt = actions[i];
        <span class="hljs-keyword">var</span> validIds = <span class="hljs-keyword">this</span>.securityActions[opt.id];
        opt.style.color = <span class="hljs-string">""</span>;
        <span class="hljs-keyword">if</span> (!validIds || (validIds.length == <span class="hljs-number">0</span>)) {
          opt.style.color = <span class="hljs-string">'#777'</span>;
          opt.disabled = <span class="hljs-literal">true</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (validIds.length == sysIds.length) {
          opt.disabled = <span class="hljs-literal">false</span>;
          <span class="hljs-keyword">if</span> (opt.getAttribute(<span class="hljs-string">"action_name"</span>))
            opt.innerHTML = <span class="hljs-string">"&amp;nbsp;&amp;nbsp;&amp;nbsp;"</span> + htmlEscape(getAttributeValue(opt, <span class="hljs-string">'gsft_base_label'</span>));
          <span class="hljs-keyword">else</span>
            opt.innerHTML = htmlEscape(getAttributeValue(opt, <span class="hljs-string">'gsft_base_label'</span>));
          opt.setAttribute(<span class="hljs-string">'gsft_allow'</span>, <span class="hljs-string">''</span>);
        } <span class="hljs-keyword">else</span> {
          opt.disabled = <span class="hljs-literal">false</span>;
          opt.innerHTML = getAttributeValue(opt, <span class="hljs-string">'gsft_base_label'</span>) + <span class="hljs-string">' ('</span> + validIds.length + <span class="hljs-string">' '</span> + <span class="hljs-keyword">this</span>.ofText + <span class="hljs-string">' '</span> + sysIds.length + <span class="hljs-string">')'</span>;
          opt.setAttribute(<span class="hljs-string">'gsft_allow'</span>, validIds.join(<span class="hljs-string">','</span>));
        }
      }
    }
    <span class="hljs-keyword">if</span> (<span class="hljs-string">''</span> == <span class="hljs-string">'true'</span> &amp;&amp; options.length &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; options.length; i++) {
        <span class="hljs-keyword">var</span> opt = options[i];
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._shouldHide(opt, select))
          opt.style.display = <span class="hljs-string">'none'</span>;
      }
    }
    select.focus();
  },
  <span class="hljs-attr">_shouldHide</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">opt, select</span>) </span>{
    <span class="hljs-keyword">var</span> options = select.options;
    <span class="hljs-keyword">var</span> ourId = opt.id;
    <span class="hljs-keyword">var</span> ourLabel = opt.innerHTML;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; options.length; i++) {
      <span class="hljs-keyword">var</span> actionLabel = options[i].innerHTML,
        actionEnabled = options[i].disabled != <span class="hljs-literal">true</span>,
        actionId = options[i].id;
      <span class="hljs-keyword">if</span> (ourId == actionId &amp;&amp; !opt.disabled)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      <span class="hljs-keyword">if</span> (ourLabel == actionLabel &amp;&amp; actionEnabled)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  },
  <span class="hljs-attr">_checkAction</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">opt, sysIds</span>) </span>{
    <span class="hljs-keyword">if</span> (sysIds.length == <span class="hljs-number">0</span>) {
      opt.disabled = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">if</span> (opt.getAttribute(<span class="hljs-string">"action_name"</span>))
        opt.innerHTML = <span class="hljs-string">"&amp;nbsp;&amp;nbsp;&amp;nbsp;"</span> + htmlEscape(getAttributeValue(opt, <span class="hljs-string">'gsft_base_label'</span>));
      <span class="hljs-keyword">else</span>
        opt.innerHTML = htmlEscape(getAttributeValue(opt, <span class="hljs-string">'gsft_base_label'</span>));
      opt.style.color = <span class="hljs-string">'#777'</span>;
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-keyword">if</span> (getAttributeValue(opt, <span class="hljs-string">'gsft_check_condition'</span>) != <span class="hljs-string">'true'</span>) {
      opt.disabled = <span class="hljs-literal">false</span>;
      opt.style.color = <span class="hljs-string">''</span>;
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  },
  <span class="hljs-attr">_canExecute</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">actionIds, sysIds, tableName</span>) </span>{
    <span class="hljs-keyword">var</span> ajax = <span class="hljs-keyword">new</span> GlideAjax(<span class="hljs-string">"AJAXActionSecurity"</span>);
    ajax.addParam(<span class="hljs-string">"sys_target"</span>, tableName);
    ajax.addParam(<span class="hljs-string">"sys_action"</span>, actionIds.join(<span class="hljs-string">","</span>));
    ajax.addParam(<span class="hljs-string">"sysparm_checked_items"</span>, sysIds.join(<span class="hljs-string">','</span>));
    <span class="hljs-keyword">var</span> xml = ajax.getXMLWait();
    <span class="hljs-keyword">var</span> answer = {};
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> n = <span class="hljs-number">0</span>; n &lt; actionIds.length; n++) {
      <span class="hljs-keyword">var</span> actionId = actionIds[n];
      <span class="hljs-keyword">var</span> root = xml.getElementsByTagName(<span class="hljs-string">"action_"</span> + actionId)[<span class="hljs-number">0</span>];
      <span class="hljs-keyword">var</span> keys = root.childNodes;
      <span class="hljs-keyword">this</span>.securityActions[actionId] = [];
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; keys.length; i++) {
        <span class="hljs-keyword">var</span> key = keys[i];
        <span class="hljs-keyword">var</span> id = key.getAttribute(<span class="hljs-string">'sys_id'</span>);
        <span class="hljs-keyword">if</span> (key.getAttribute(<span class="hljs-string">'can_execute'</span>) == <span class="hljs-string">'true'</span>)
          <span class="hljs-keyword">this</span>.securityActions[actionId].push(id);
      }
    }
  },
  <span class="hljs-attr">runAction</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">select</span>) </span>{
    <span class="hljs-keyword">var</span> opt = getSelectedOption(select);
    <span class="hljs-keyword">if</span> (!opt)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">if</span> (opt.id == <span class="hljs-string">'ignore'</span> || (!opt.value &amp;&amp; !opt.text))
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">if</span> (opt.disabled)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">var</span> list = GlideList2.get(<span class="hljs-keyword">this</span>.listID);
    <span class="hljs-keyword">if</span> (!list)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">var</span> id = opt.id;
    <span class="hljs-keyword">var</span> name = getAttributeValue(opt, <span class="hljs-string">'action_name'</span>);
    <span class="hljs-keyword">if</span> (!name)
      name = id;
    <span class="hljs-keyword">if</span> (getAttributeValue(opt, <span class="hljs-string">'client'</span>) == <span class="hljs-string">'true'</span>) {
      g_list = list;
      <span class="hljs-keyword">var</span> href = getAttributeValue(opt, <span class="hljs-string">'href'</span>);
      <span class="hljs-built_in">eval</span>(href);
      g_list = <span class="hljs-literal">null</span>;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">var</span> ids = opt.getAttribute(<span class="hljs-string">'gsft_allow'</span>);
      list.action(id, name, ids);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  },
  <span class="hljs-attr">type</span>: <span class="hljs-string">'GlideWidgetActions'</span>
});;
<span class="hljs-comment">/*! RESOURCE: /scripts/classes/GlideWidgetSearch.js */</span>
<span class="hljs-keyword">var</span> GlideWidgetSearch = Class.create(GlideListWidget, {
  <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$super, widgetID, listID, focusOnRefresh</span>) </span>{
    $<span class="hljs-keyword">super</span>(widgetID, listID);
    <span class="hljs-keyword">this</span>.field = <span class="hljs-string">""</span>;
    <span class="hljs-keyword">this</span>.focusOnRefresh = (focusOnRefresh == <span class="hljs-string">'true'</span>);
    <span class="hljs-keyword">this</span>._initEvents();
  },
  <span class="hljs-attr">_refresh</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">listTable, list, isInitialLoad</span>) </span>{
    <span class="hljs-keyword">var</span> field = list.sortBy;
    <span class="hljs-keyword">if</span> (!field)
      field = <span class="hljs-string">'zztextsearchyy'</span>;
    <span class="hljs-keyword">this</span>._setSelect(field);
    <span class="hljs-keyword">this</span>._setTitle();
    <span class="hljs-keyword">this</span>._clearText();
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.focusOnRefresh) {
      <span class="hljs-keyword">var</span> e = <span class="hljs-keyword">this</span>._getElement(<span class="hljs-string">"text"</span>);
      <span class="hljs-keyword">try</span> {
        e.focus();
      } <span class="hljs-keyword">catch</span> (er) {}
    }
  },
  <span class="hljs-attr">_initEvents</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>._getElement(<span class="hljs-string">'select'</span>).observe(<span class="hljs-string">'change'</span>, <span class="hljs-keyword">this</span>._setTitle.bind(<span class="hljs-keyword">this</span>));
    <span class="hljs-keyword">var</span> text = <span class="hljs-keyword">this</span>._getElement(<span class="hljs-string">'text'</span>);
    text.observe(<span class="hljs-string">'keypress'</span>, <span class="hljs-keyword">this</span>.searchKeyPress.bind(<span class="hljs-keyword">this</span>));
    <span class="hljs-keyword">var</span> a = text.nextSibling;
    <span class="hljs-keyword">var</span> spn = text.previousSibling;
    <span class="hljs-keyword">if</span> (spn &amp;&amp; spn.tagName.toUpperCase() == <span class="hljs-string">"SPAN"</span>)
      $(spn).observe(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">this</span>.search.bind(<span class="hljs-keyword">this</span>));
    <span class="hljs-keyword">while</span> (a &amp;&amp; a.tagName.toUpperCase() != <span class="hljs-string">"A"</span>)
      a = a.nextSibling;
    <span class="hljs-keyword">if</span> (!a)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">var</span> a = $(a);
    a.observe(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">this</span>.search.bind(<span class="hljs-keyword">this</span>));
  },
  <span class="hljs-attr">searchKeyPress</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ev</span>) </span>{
    <span class="hljs-keyword">if</span> (!ev || ev.keyCode != <span class="hljs-number">13</span>)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.search(ev);
  },
  <span class="hljs-attr">search</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ev</span>) </span>{
    <span class="hljs-keyword">var</span> select = <span class="hljs-keyword">new</span> Select(<span class="hljs-keyword">this</span>._getElement(<span class="hljs-string">'select'</span>));
    <span class="hljs-keyword">var</span> value = <span class="hljs-keyword">this</span>._getValue(<span class="hljs-string">"text"</span>);
    <span class="hljs-keyword">if</span> (!value)
      <span class="hljs-keyword">return</span>;
    ev.stop();
    <span class="hljs-keyword">var</span> field = select.getValue();
    <span class="hljs-keyword">var</span> list = GlideList2.get(<span class="hljs-keyword">this</span>.listID);
    <span class="hljs-keyword">var</span> parms = {};
    parms[<span class="hljs-string">'sysparm_goto_query'</span>] = value;
    parms[<span class="hljs-string">'sysparm_goto_field'</span>] = field;
    parms[<span class="hljs-string">'sys_target'</span>] = list.tableName;
    parms[<span class="hljs-string">'sysparm_userpref.'</span> + list.tableName + <span class="hljs-string">'.db.order'</span>] = field;
    parms[<span class="hljs-string">'sysparm_query'</span>] = list.getQuery({
      <span class="hljs-attr">groupby</span>: <span class="hljs-literal">true</span>
    });
    CustomEvent.fire(<span class="hljs-string">'list_v2.orderby.update'</span>, field);
    <span class="hljs-keyword">this</span>._clearText();
    list.refresh(<span class="hljs-number">1</span>, parms);
  },
  <span class="hljs-attr">setTitle</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>._setTitle();
  },
  <span class="hljs-attr">_clearText</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>._setValue(<span class="hljs-string">'text'</span>, <span class="hljs-string">''</span>);
  },
  <span class="hljs-attr">_setSelect</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">field</span>) </span>{
    <span class="hljs-keyword">var</span> select = <span class="hljs-keyword">new</span> Select(<span class="hljs-keyword">this</span>._getElement(<span class="hljs-string">'select'</span>));
    <span class="hljs-keyword">if</span> (select.contains(field))
      select.selectValue(field);
  },
  <span class="hljs-attr">_setTitle</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> opt = getSelectedOption(<span class="hljs-keyword">this</span>._getElement(<span class="hljs-string">'select'</span>));
    <span class="hljs-keyword">if</span> (!opt) {
      <span class="hljs-keyword">this</span>._setInner(<span class="hljs-string">'title'</span>, <span class="hljs-keyword">new</span> GwtMessage().getMessage(<span class="hljs-string">'Go to'</span>));
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">if</span> (opt.value == <span class="hljs-string">'zztextsearchyy'</span>)
      <span class="hljs-keyword">this</span>._setInner(<span class="hljs-string">'title'</span>, <span class="hljs-keyword">new</span> GwtMessage().getMessage(<span class="hljs-string">'Search'</span>));
    <span class="hljs-keyword">else</span>
      <span class="hljs-keyword">this</span>._setInner(<span class="hljs-string">'title'</span>, <span class="hljs-keyword">new</span> GwtMessage().getMessage(<span class="hljs-string">'Go to'</span>));
  },
  <span class="hljs-attr">type</span>: <span class="hljs-string">'GlideWidgetSearch'</span>
});;
<span class="hljs-comment">/*! RESOURCE: /scripts/classes/GlideWidgetHideOnEmpty.js */</span>
<span class="hljs-keyword">var</span> GlideWidgetHideOnEmpty = Class.create(GlideListWidget, {
  <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$super, widgetID, listID</span>) </span>{
    $<span class="hljs-keyword">super</span>(widgetID, listID);
  },
  <span class="hljs-attr">_refresh</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> list = GlideList2.get(<span class="hljs-keyword">this</span>.listID);
    <span class="hljs-keyword">var</span> empty = (list.totalRows == <span class="hljs-number">0</span>);
    <span class="hljs-keyword">var</span> elements = list.listContainer.select(<span class="hljs-string">'.list_hide_empty'</span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; elements.length; i++) {
      <span class="hljs-keyword">if</span> (empty)
        elements[i].hide();
      <span class="hljs-keyword">else</span>
        elements[i].show();
    }
  },
  <span class="hljs-attr">type</span>: <span class="hljs-string">'GlideWidgetHideOnEmpty'</span>
});;
<span class="hljs-comment">/*! RESOURCE: /scripts/classes/GlideList2FilterUtil.js */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">runFilterV2Lists</span>(<span class="hljs-params">name, filter</span>) </span>{
  <span class="hljs-keyword">var</span> list = GlideList2.get(name);
  <span class="hljs-keyword">if</span> (!list) {
    list = GlideList2.getByName(name);
  }
  <span class="hljs-keyword">if</span> (list) {
    <span class="hljs-keyword">var</span> groupBy = list.getGroupBy();
    <span class="hljs-keyword">if</span> (groupBy)
      filter += <span class="hljs-string">"^"</span> + groupBy;
    list.setFilterAndRefresh(filter);
  }
}
GlideList2.saveFilter = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">listID, listName</span>) </span>{
  <span class="hljs-keyword">var</span> list = GlideList2.get(listID);
  <span class="hljs-keyword">var</span> siname = gel(<span class="hljs-string">'save_filter_name'</span>);
  <span class="hljs-keyword">if</span> (!siname || !siname.value || siname.value.length &lt;= <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">var</span> msg = getMessage(<span class="hljs-string">"Enter a name to use for saving the filter"</span>);
    alert(msg);
    siname.focus();
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-keyword">var</span> filter = getFilter(listName);
  <span class="hljs-keyword">var</span> visibility = getFilterVisibility();
  <span class="hljs-keyword">var</span> groupBy = list.getGroupBy();
  <span class="hljs-keyword">if</span> (groupBy)
    filter += <span class="hljs-string">"^"</span> + groupBy;
  <span class="hljs-keyword">var</span> parms = {};
  parms[<span class="hljs-string">'filter_visible'</span>] = visibility;
  parms[<span class="hljs-string">'save_filter_query'</span>] = filter;
  parms[<span class="hljs-string">'save_filter_name'</span>] = siname.value;
  parms[<span class="hljs-string">'sys_target'</span>] = list.getTableName();
  parms[<span class="hljs-string">'sys_action'</span>] = <span class="hljs-string">'sysverb_save_filter'</span>;
  list.submit(parms);
}
GlideList2.setDefaultFilter = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">listID, listName</span>) </span>{
  <span class="hljs-keyword">var</span> filter = getFilter(listName, <span class="hljs-literal">false</span>);
  GlideList2.get(listID).setDefaultFilter(filter);
};
<span class="hljs-comment">/*! RESOURCE: /scripts/classes/GlideList2InitEvents.js */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">glideList2InitEvents</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-built_in">document</span>.body.on(<span class="hljs-string">'click'</span>, <span class="hljs-string">'a[data-type="list2_top_title"], button[data-type="list2_top_title"]'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt, element</span>) </span>{
    GlideList2.get(element.getAttribute(<span class="hljs-string">'data-list_id'</span>)).clickTitle(evt);
    evt.stop();
  });
  <span class="hljs-built_in">document</span>.body.on(<span class="hljs-string">'contextmenu'</span>, <span class="hljs-string">'.list_nav_top'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt, element</span>) </span>{
    <span class="hljs-keyword">if</span> (!element.hasAttribute(<span class="hljs-string">'data-list_id'</span>))
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">if</span> (evt.ctrlKey)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">if</span> (evt.target.tagName.toLowerCase() === <span class="hljs-string">'input'</span>)
      <span class="hljs-keyword">return</span>;
    GlideList2.get(element.getAttribute(<span class="hljs-string">'data-list_id'</span>)).clickTitle(evt);
    evt.stop();
  });
  <span class="hljs-built_in">document</span>.body.on(<span class="hljs-string">'click'</span>, <span class="hljs-string">'a[data-type="list2_toggle"]'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt, element</span>) </span>{
    GlideList2.get(element.getAttribute(<span class="hljs-string">'data-list_id'</span>)).toggleList();
    evt.stop();
  });
  <span class="hljs-keyword">if</span> (isDoctype()) {
    $j(<span class="hljs-string">'input[data-type="list2_checkbox"] + label.checkbox-label'</span>).on(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
      e.preventDefault();
      e.stopPropagation();
      <span class="hljs-keyword">var</span> input = $j(e.target).parent()[<span class="hljs-number">0</span>].querySelector(<span class="hljs-string">'input'</span>);
      input.checked = !input.checked;
      GlideList2.get(input.getAttribute(<span class="hljs-string">'data-list_id'</span>)).rowChecked(input, e);
      $j(input).change();
    });
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-built_in">document</span>.body.on(<span class="hljs-string">'click'</span>, <span class="hljs-string">'input[data-type="list2_checkbox"], label[data-type="list2_checkbox"]'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt, element</span>) </span>{
      GlideList2.get(element.getAttribute(<span class="hljs-string">'data-list_id'</span>)).rowChecked(element, evt);
      evt.stopPropagation();
    });
  }
  <span class="hljs-built_in">document</span>.body.on(<span class="hljs-string">'click'</span>, <span class="hljs-string">'input[data-type="list2_all_checkbox"]'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt, element</span>) </span>{
    GlideList2.get(element.getAttribute(<span class="hljs-string">'data-list_id'</span>)).allChecked(element);
    evt.stopPropagation();
  });
  <span class="hljs-built_in">document</span>.body.on(<span class="hljs-string">'click'</span>, <span class="hljs-string">'a[data-type="list2_group_toggle"]'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt, element</span>) </span>{
    <span class="hljs-keyword">var</span> toggleIcon = element.childNodes[<span class="hljs-number">0</span>];
    <span class="hljs-keyword">if</span> (toggleIcon &amp;&amp; toggleIcon.className.indexOf(<span class="hljs-string">'collapsedGroup'</span>) &gt; <span class="hljs-number">-1</span>)
      toggleIcon.className = toggleIcon.className.replace(<span class="hljs-regexp">/\bcollapsedGroup\b/</span>, <span class="hljs-string">''</span>);
    <span class="hljs-keyword">else</span>
      toggleIcon.className += <span class="hljs-string">'collapsedGroup'</span>;
    GlideList2.get(element.getAttribute(<span class="hljs-string">'data-list_id'</span>)).toggleGroups();
    evt.stop();
  });
  <span class="hljs-built_in">document</span>.body.on(<span class="hljs-string">'click'</span>, <span class="hljs-string">'img[data-type="list2_delete_row"], i[data-type="list2_delete_row"]'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt, element</span>) </span>{
    <span class="hljs-keyword">var</span> gl = GlideList2.get(element.getAttribute(<span class="hljs-string">'data-list_id'</span>));
    <span class="hljs-keyword">var</span> row = gl._getRowRecord(element);
    editListWithFormDeleteRow(row.sysId, gl.listID);
  });
  <span class="hljs-built_in">document</span>.body.on(<span class="hljs-string">'click'</span>, <span class="hljs-string">'img[data-type="list2_hier"], i[data-type="list2_hier"]'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt, element</span>) </span>{
    <span class="hljs-keyword">var</span> gl = GlideList2.get(element.getAttribute(<span class="hljs-string">'data-list_id'</span>));
    <span class="hljs-keyword">var</span> row = gl._getRowRecord(element);
    gl.toggleHierarchy(element, <span class="hljs-string">'hier_row_'</span> + gl.listID + <span class="hljs-string">'_'</span> + row.sysId, row.target, row.sysId);
    evt.stop();
  });
  <span class="hljs-built_in">document</span>.on(<span class="hljs-string">'mouseover'</span>, <span class="hljs-string">'img[data-type="list2_popup"], a[data-type="list2_popup"]'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt, element</span>) </span>{
    <span class="hljs-keyword">var</span> gl = GlideList2.get(element.getAttribute(<span class="hljs-string">'data-list_id'</span>));
    <span class="hljs-keyword">var</span> row = gl._getRowRecord(element);
    popListDiv(evt, row.target, row.sysId, gl.view, <span class="hljs-number">600</span>);
    evt.stop();
  });
  <span class="hljs-built_in">document</span>.on(<span class="hljs-string">'mouseout'</span>, <span class="hljs-string">'img[data-type="list2_popup"], a[data-type="list2_popup"]'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt, element</span>) </span>{
    lockPopup(evt);
    evt.stop();
  });
  <span class="hljs-built_in">document</span>.body.on(<span class="hljs-string">'click'</span>, <span class="hljs-string">'a[data-type="list2_hdrcell"]'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt, element</span>) </span>{
    element = element.up(<span class="hljs-string">"TH"</span>);
    GlideList2.get(element.getAttribute(<span class="hljs-string">'data-list_id'</span>)).hdrCellClick(element, evt);
    evt.stop();
  });
  <span class="hljs-built_in">document</span>.body.on(<span class="hljs-string">'contextmenu'</span>, <span class="hljs-string">'th[data-type="list2_hdrcell"]'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt, element</span>) </span>{
    GlideList2.get(element.getAttribute(<span class="hljs-string">'data-list_id'</span>)).hdrCellContextMenu(element, evt);
  });
  <span class="hljs-built_in">document</span>.body.on(<span class="hljs-string">'click'</span>, <span class="hljs-string">'a.list_header_context'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt, element</span>) </span>{
    element = element.parentElement;
    GlideList2.get(element.getAttribute(<span class="hljs-string">'data-list_id'</span>)).hdrCellContextMenu(element, evt);
    evt.stop();
  });
  <span class="hljs-built_in">document</span>.body.on(<span class="hljs-string">'click'</span>, <span class="hljs-string">'i.list_header_context'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt, element</span>) </span>{
    element = element.parentElement.parentElement;
    GlideList2.get(element.getAttribute(<span class="hljs-string">'data-list_id'</span>)).hdrCellContextMenu(element, evt);
    evt.stop();
  });
  <span class="hljs-built_in">document</span>.body.on(<span class="hljs-string">'click'</span>, <span class="hljs-string">'span[data-type="list2_hdrcell"]'</span>, list2Context);

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">list2Context</span>(<span class="hljs-params">evt, element</span>) </span>{
    element = element.up(<span class="hljs-string">"th"</span>);
    GlideList2.get(element.getAttribute(<span class="hljs-string">'data-list_id'</span>)).hdrCellContextMenu(element, evt);
  }
  <span class="hljs-built_in">document</span>.body.on(<span class="hljs-string">'contextmenu'</span>, <span class="hljs-string">'tr[data-type="list2_row"]'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt, element</span>) </span>{
    GlideList2.get(element.getAttribute(<span class="hljs-string">'data-list_id'</span>)).rowContextMenu(element, evt);
  });
  <span class="hljs-built_in">document</span>.body.on(<span class="hljs-string">'click'</span>, <span class="hljs-string">'a[data-type="list_mechanic2_open"], i[data-type="list_mechanic2_open"]'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt, element</span>) </span>{
    GlideList2.get(element.getAttribute(<span class="hljs-string">'data-list_id'</span>)).listMechanicClick(element);
    evt.stop();
  });
  <span class="hljs-built_in">document</span>.body.on(<span class="hljs-string">'click'</span>, <span class="hljs-string">'a.linked, a.web, a.kb_link, a.report_link, .list_decoration &gt; a'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt, el</span>) </span>{
    <span class="hljs-keyword">if</span> (!evt.shiftKey)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">var</span> url = <span class="hljs-keyword">new</span> GlideURL(el.getAttribute(<span class="hljs-string">'href'</span>));
    <span class="hljs-keyword">var</span> table = url.getContextPath().split(<span class="hljs-string">'.do'</span>)[<span class="hljs-number">0</span>];
    <span class="hljs-keyword">var</span> sys_id = url.getParam(<span class="hljs-string">'sys_id'</span>);
    <span class="hljs-keyword">var</span> view = url.getParam(<span class="hljs-string">'sysparm_view'</span>);
    popForm(evt, table, sys_id, view);
    evt.stop();
  })
}
<span class="hljs-keyword">if</span> (!<span class="hljs-built_in">window</span>[<span class="hljs-string">'g_isGlideList2InitEvents'</span>]) {
  addAfterPageLoadedEvent(glideList2InitEvents);
  <span class="hljs-built_in">window</span>.g_isGlideList2InitEvents = <span class="hljs-literal">true</span>;
};
<span class="hljs-comment">/*! RESOURCE: /scripts/GlideListEditorMessaging.js */</span>
(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-meta">  "use strict"</span>;
  <span class="hljs-built_in">window</span>.GlideListEditorMessaging = Class.create({
    <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">gle</span>) </span>{
      <span class="hljs-keyword">if</span> (!NOW || !NOW.MessageBus)
        <span class="hljs-keyword">return</span>;
      <span class="hljs-keyword">this</span>._recordMessage = NOW.messaging.record;
      <span class="hljs-keyword">this</span>._pendingNewRecords = [];
      <span class="hljs-keyword">this</span>._pendingSavedRecords = {};
      <span class="hljs-keyword">this</span>._listEditor = gle;
      <span class="hljs-keyword">this</span>._registerEvents(gle);
    },
    <span class="hljs-attr">_registerEvents</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">this</span>._listEditor.tableController.observe(
        <span class="hljs-string">'glide:list_v2.edit.save'</span>, <span class="hljs-keyword">this</span>._messageListEdit.bind(<span class="hljs-keyword">this</span>));
      <span class="hljs-keyword">this</span>._listEditor.tableController.observe(
        <span class="hljs-string">'glide:list_v2.edit.cells_changed'</span>, <span class="hljs-keyword">this</span>._messageCellsChanged.bind(<span class="hljs-keyword">this</span>));
      <span class="hljs-keyword">this</span>._listEditor.tableController.observe(
        <span class="hljs-string">'glide:list_v2.edit.row_added'</span>, <span class="hljs-keyword">this</span>._messageRowAdded.bind(<span class="hljs-keyword">this</span>));
      <span class="hljs-keyword">this</span>._listEditor.tableController.observe(
        <span class="hljs-string">'glide:list_v2.edit.changes_saved'</span>, <span class="hljs-keyword">this</span>._messageRowSaved.bind(<span class="hljs-keyword">this</span>));
      <span class="hljs-keyword">this</span>._listEditor.tableController.observe(
        <span class="hljs-string">'glide:list_v2.edit.rows_deleted'</span>, <span class="hljs-keyword">this</span>._messageRowDeleted.bind(<span class="hljs-keyword">this</span>));
    },
    <span class="hljs-attr">_messageListEdit</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._listEditor.hasChanges()) {
        <span class="hljs-keyword">var</span> modifiedRecords = <span class="hljs-keyword">this</span>._listEditor.cellEditor.changes.getModifiedRecords();
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> modifiedRecords) {
          <span class="hljs-keyword">if</span> (!modifiedRecords.hasOwnProperty(i) || i == <span class="hljs-string">'-1'</span>)
            <span class="hljs-keyword">continue</span>;
          <span class="hljs-keyword">this</span>._pendingSavedRecords[i] = <span class="hljs-keyword">this</span>._getRecordChanges(modifiedRecords[i]);
        }
      }
    },
    <span class="hljs-attr">_messageCellsChanged</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
      <span class="hljs-keyword">var</span> edits = <span class="hljs-keyword">this</span>._listEditor.savePolicy.getEdits(evt);
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; edits.length; i++) {
        <span class="hljs-keyword">var</span> recordSysId = edits[i][<span class="hljs-number">0</span>];
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isPendingNewRecord(recordSysId))
          <span class="hljs-keyword">continue</span>;
        <span class="hljs-keyword">var</span> savedRecord = <span class="hljs-keyword">this</span>._pendingSavedRecords[recordSysId];
        <span class="hljs-keyword">if</span> (!savedRecord)
          savedRecord = <span class="hljs-keyword">this</span>._getRecordChanges(<span class="hljs-keyword">this</span>._listEditor.cellEditor.changes.get(recordSysId));
      }
    },
    <span class="hljs-attr">_messageRowAdded</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
      <span class="hljs-keyword">var</span> recordSysId = evt.memo.sys_id;
      <span class="hljs-keyword">this</span>._pendingNewRecords.push(recordSysId);
    },
    <span class="hljs-attr">_messageRowSaved</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
      <span class="hljs-keyword">var</span> recordTableName = <span class="hljs-keyword">this</span>._getTableName();
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; evt.memo.saves.length; i++) {
        <span class="hljs-keyword">var</span> recordSysId = evt.memo.saves[i];
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isPendingNewRecord(recordSysId)) {
          <span class="hljs-keyword">this</span>._recordMessage.created(
            recordTableName, {
              <span class="hljs-attr">sys_id</span>: recordSysId
            }, {
              <span class="hljs-attr">name</span>: <span class="hljs-string">'list'</span>,
              <span class="hljs-attr">list_id</span>: evt.memo.listId
            }
          );
          <span class="hljs-keyword">var</span> pendingIndex = <span class="hljs-keyword">this</span>._pendingNewRecords.indexOf(recordSysId);
          <span class="hljs-keyword">this</span>._pendingNewRecords.splice(pendingIndex, <span class="hljs-number">1</span>);
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">var</span> savedRecord = <span class="hljs-keyword">this</span>._pendingSavedRecords[recordSysId];
          <span class="hljs-keyword">if</span> (!savedRecord)
            <span class="hljs-keyword">return</span>;
          <span class="hljs-keyword">this</span>._recordMessage.updated(
            recordTableName, {
              <span class="hljs-attr">sys_id</span>: recordSysId
            },
            savedRecord.changes, {
              <span class="hljs-attr">name</span>: <span class="hljs-string">'list'</span>,
              <span class="hljs-attr">list_id</span>: evt.memo.listId
            }
          );
          <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._pendingNewRecords[recordSysId];
        }
      }
    },
    <span class="hljs-attr">_messageRowDeleted</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
      <span class="hljs-keyword">var</span> recordTableName = <span class="hljs-keyword">this</span>._getTableName();
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; evt.memo.deletes; i++) {
        <span class="hljs-keyword">var</span> recordSysId = evt.memo.deletes[i];
        <span class="hljs-keyword">this</span>._recordMessage.deleted(
          recordTableName, {
            <span class="hljs-attr">sys_id</span>: recordSysId
          }, {
            <span class="hljs-attr">name</span>: <span class="hljs-string">'list'</span>,
            <span class="hljs-attr">list_id</span>: evt.memo.listId
          }
        );
      }
    },
    <span class="hljs-attr">_isPendingNewRecord</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">id</span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._pendingNewRecords.indexOf(id) != <span class="hljs-number">-1</span>;
    },
    <span class="hljs-attr">_getRecordChanges</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">modifiedRecord</span>) </span>{
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">changes</span>: <span class="hljs-keyword">this</span>._getFieldChanges(modifiedRecord)
      }
    },
    <span class="hljs-attr">_getFieldChanges</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">modifiedRecord</span>) </span>{
      <span class="hljs-keyword">var</span> fields = modifiedRecord.getFields();
      <span class="hljs-keyword">var</span> changes = {};
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> f <span class="hljs-keyword">in</span> fields) {
        <span class="hljs-keyword">if</span> (!fields.hasOwnProperty(f))
          <span class="hljs-keyword">continue</span>;
        <span class="hljs-keyword">var</span> field = fields[f];
        changes[f] = {
          <span class="hljs-attr">current</span>: {
            <span class="hljs-attr">value</span>: field.value,
            <span class="hljs-attr">displayValue</span>: field.renderValue
          },
          <span class="hljs-attr">previous</span>: {
            <span class="hljs-attr">value</span>: field.originalValue,
            <span class="hljs-attr">displayValue</span>: field.originalDisplay
          }
        };
      }
      <span class="hljs-keyword">return</span> changes;
    },
    <span class="hljs-attr">_getTableName</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._listEditor.tableController.tableName;
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-string">'GlideListEditorMessaging'</span>;
    }
  })
})();;
<span class="hljs-comment">/*! RESOURCE: /scripts/classes/doctype/fixedHeaders.js */</span>
CustomEvent.observe(<span class="hljs-string">'list2_init'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">list2</span>) </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> $j == <span class="hljs-string">'undefined'</span>)
    <span class="hljs-keyword">return</span>;
  <span class="hljs-keyword">if</span> (list2.getRelated() || <span class="hljs-built_in">window</span>.g_form)
    <span class="hljs-keyword">return</span>;
  <span class="hljs-keyword">if</span> ($j(<span class="hljs-string">'BODY'</span>).hasClass(<span class="hljs-string">'non_standard_lists'</span>))
    <span class="hljs-keyword">return</span>;
  <span class="hljs-keyword">var</span> enableStickyColumns = <span class="hljs-literal">false</span>;
  <span class="hljs-keyword">var</span> numColsSticky = <span class="hljs-number">2</span>;
  <span class="hljs-keyword">var</span> tableId = <span class="hljs-built_in">document</span>.getElementById(list2.listID);
  <span class="hljs-keyword">var</span> $cloneTable;

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cloneHeader</span>(<span class="hljs-params"></span>) </span>{
    $j(<span class="hljs-string">"#clone_table"</span>).remove();
    <span class="hljs-keyword">if</span> (enableStickyColumns) {
      $j(<span class="hljs-string">"#clone_table_columns"</span>).remove();
      $j(<span class="hljs-string">"#clone_column_headers"</span>).remove();
    }
    <span class="hljs-keyword">var</span> $origHeader = $j(<span class="hljs-string">'thead'</span>, tableId).first();
    <span class="hljs-keyword">var</span> $pageHeader = $j(<span class="hljs-string">'nav.list_nav_top.list_nav'</span>).first();
    <span class="hljs-keyword">var</span> pageHeaderHeight = $pageHeader.outerHeight();
    $pageHeader.css({
      <span class="hljs-string">'position'</span>: <span class="hljs-string">'fixed'</span>,
      <span class="hljs-string">'width'</span>: <span class="hljs-string">'100%'</span>,
      <span class="hljs-string">'top'</span>: <span class="hljs-number">0</span>,
      <span class="hljs-string">'z-index'</span>: <span class="hljs-number">10</span>
    });
    <span class="hljs-keyword">var</span> navbar = $j(<span class="hljs-string">'nav.navbar'</span>);
    <span class="hljs-keyword">var</span> navbarMarginTop = navbar.outerHeight() + <span class="hljs-built_in">parseInt</span>(navbar.css(<span class="hljs-string">'padding-bottom'</span>)) - <span class="hljs-built_in">parseInt</span>(navbar.css(<span class="hljs-string">'border-bottom-width'</span>));
    $j(<span class="hljs-string">'.list_nav_spacer'</span>).css({
      <span class="hljs-attr">marginTop</span>: navbarMarginTop,
      <span class="hljs-string">'display'</span>: <span class="hljs-string">'block'</span>
    });
    <span class="hljs-keyword">var</span> $header = $origHeader.first().clone();
    <span class="hljs-keyword">var</span> $originalTable = $j($j(<span class="hljs-string">'table'</span>, tableId)[<span class="hljs-number">0</span>].cloneNode(<span class="hljs-literal">false</span>));
    $originalTable.empty();
    $originalTable.removeClass(<span class="hljs-string">'list_table list_header_search'</span>);
    $originalTable.attr(<span class="hljs-string">'id'</span>, <span class="hljs-string">'table_clone'</span>);
    $originalTable.append($header);
    $cloneTable = $j($j(tableId)[<span class="hljs-number">0</span>].cloneNode(<span class="hljs-literal">false</span>));
    $cloneTable.empty();
    $cloneTable.append($originalTable);
    $cloneTable.attr(<span class="hljs-string">'id'</span>, <span class="hljs-string">'clone_table'</span>);
    $cloneTable.removeClass(<span class="hljs-string">"list_table"</span>).addClass(<span class="hljs-string">'list_table_clone'</span>);
    $cloneTable.css({
      <span class="hljs-string">'position'</span>: <span class="hljs-string">'fixed'</span>,
      <span class="hljs-string">'width'</span>: $j(tableId).width(),
      <span class="hljs-string">'display'</span>: <span class="hljs-string">'none'</span>,
      <span class="hljs-string">'top'</span>: pageHeaderHeight,
      <span class="hljs-string">'z-index'</span>: <span class="hljs-number">10</span>
    });
    $j(<span class="hljs-string">".list_v2"</span>).first().prepend($cloneTable);
    <span class="hljs-keyword">var</span> originalHeaders = $j(<span class="hljs-string">'thead th'</span>, tableId);
    <span class="hljs-keyword">var</span> cloneHeaders = $j(<span class="hljs-string">'#clone_table thead th'</span>);
    <span class="hljs-keyword">var</span> widths = [];
    addAfterPageLoadedEvent(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
      $j.each(originalHeaders, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        widths.push($j(<span class="hljs-keyword">this</span>).outerWidth());
      });
      $j.each(cloneHeaders, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">index, value</span>) </span>{
        $j(<span class="hljs-keyword">this</span>).css({
          <span class="hljs-string">'width'</span>: widths[index]
        });
      });
    });
    <span class="hljs-keyword">if</span> (enableStickyColumns) {
      <span class="hljs-keyword">var</span> curCol = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">var</span> rowHeights = [];
      <span class="hljs-keyword">var</span> $cloneTableColumns = $j(tableId).clone();
      <span class="hljs-keyword">var</span> $cloneOfClone = $cloneTable.clone();
      <span class="hljs-keyword">var</span> $tableBody = $($cloneTableColumns).find(<span class="hljs-string">'tbody'</span>);
      $cloneOfClone.attr(<span class="hljs-string">'id'</span>, <span class="hljs-string">'clone_column_headers'</span>);
      $cloneOfClone.css({
        <span class="hljs-string">"z-index"</span>: <span class="hljs-number">1000</span>
      });
      $cloneOfClone.find(<span class="hljs-string">'thead'</span>).find(<span class="hljs-string">'th'</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        curCol = curCol + <span class="hljs-number">1</span>;
        <span class="hljs-keyword">if</span> (curCol &gt; numColsSticky) {
          $j(<span class="hljs-keyword">this</span>).remove();
        }
      });
      curCol = <span class="hljs-number">0</span>;
      $j(<span class="hljs-string">".list_v2"</span>).first().prepend($cloneOfClone);
      $cloneTableColumns.find(<span class="hljs-string">'thead'</span>).find(<span class="hljs-string">'tr'</span>).find(<span class="hljs-string">'th'</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        curCol = curCol + <span class="hljs-number">1</span>;
        <span class="hljs-keyword">if</span> (curCol &gt; numColsSticky) {
          $j(<span class="hljs-keyword">this</span>).remove();
        }
      });
      curCol = <span class="hljs-number">0</span>;
      $j(tableId).find(<span class="hljs-string">'tbody'</span>).find(<span class="hljs-string">'tr'</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        rowHeights.push($j(<span class="hljs-keyword">this</span>).outerHeight());
      });
      $tableBody.find(<span class="hljs-string">"tr"</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">index</span>) </span>{
        $j(<span class="hljs-keyword">this</span>).css(<span class="hljs-string">'height'</span>, rowHeights[index]);
        $j(<span class="hljs-keyword">this</span>).find(<span class="hljs-string">'td'</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
          curCol = curCol + <span class="hljs-number">1</span>;
          <span class="hljs-keyword">if</span> (curCol &gt; numColsSticky) {
            $j(<span class="hljs-keyword">this</span>).remove();
          }
        });
        curCol = <span class="hljs-number">0</span>;
      });
      $cloneTableColumns.css({
        <span class="hljs-string">'position'</span>: <span class="hljs-string">'absolute'</span>
      });
      $cloneTableColumns.attr(<span class="hljs-string">'id'</span>, <span class="hljs-string">'clone_table_columns'</span>);
      $j(<span class="hljs-string">".list_v2"</span>).prepend($cloneTableColumns);
    }
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkPosition</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> $table = $j(tableId);
    <span class="hljs-keyword">if</span> (!$table.length) {
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">var</span> scrollLeft = $j(<span class="hljs-built_in">document</span>).scrollLeft();
    <span class="hljs-keyword">var</span> margin = <span class="hljs-built_in">parseInt</span>($j(<span class="hljs-string">"body"</span>).css(<span class="hljs-string">'margin-left'</span>));
    <span class="hljs-keyword">var</span> listHeaderSpacerHeight = $j(<span class="hljs-string">'.list_nav_spacer'</span>).offset().top;
    <span class="hljs-keyword">var</span> scrollTop = $j(<span class="hljs-built_in">window</span>).scrollTop();
    <span class="hljs-keyword">var</span> offset = $table.offset();
    <span class="hljs-keyword">var</span> tableTop = offset.top - listHeaderSpacerHeight;
    <span class="hljs-keyword">if</span> (g_text_direction == <span class="hljs-string">"rtl"</span>) {
      $cloneTable.css({
        <span class="hljs-string">"right"</span>: margin + scrollLeft
      });
    } <span class="hljs-keyword">else</span> {
      $cloneTable.css({
        <span class="hljs-string">"left"</span>: -scrollLeft + margin
      });
    }
    <span class="hljs-keyword">if</span> (enableStickyColumns) {
      <span class="hljs-keyword">var</span> $columns = $j(<span class="hljs-string">"#clone_table_columns"</span>);
      <span class="hljs-keyword">var</span> $columnHeaders = $j(<span class="hljs-string">"#clone_column_headers"</span>);
      $columns.css({
        <span class="hljs-string">"left"</span>: offset.left,
        <span class="hljs-string">"top"</span>: offset.top
      });
      <span class="hljs-keyword">if</span> (scrollLeft &gt; offset.left) {
        $columns.css(<span class="hljs-string">"left"</span>, scrollLeft);
        $columnHeaders.css(<span class="hljs-string">"left"</span>, <span class="hljs-number">0</span>);
      }
    }
    <span class="hljs-keyword">if</span> ((scrollTop &gt; tableTop)) {
      $cloneTable.css(<span class="hljs-string">'display'</span>, <span class="hljs-string">'block'</span>);
      <span class="hljs-keyword">if</span> (enableStickyColumns) {
        $columnHeaders.css(<span class="hljs-string">'display'</span>, <span class="hljs-string">'block'</span>);
      }
    } <span class="hljs-keyword">else</span> {
      $cloneTable.css(<span class="hljs-string">'display'</span>, <span class="hljs-string">'none'</span>);
      <span class="hljs-keyword">if</span> (enableStickyColumns) {
        $columnHeaders.css(<span class="hljs-string">'display'</span>, <span class="hljs-string">'none'</span>);
      }
    }
  }
  <span class="hljs-keyword">var</span> eventSet = <span class="hljs-literal">false</span>;
  <span class="hljs-keyword">var</span> cloneTimeout;

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reclone</span>(<span class="hljs-params">event</span>) </span>{
    clearTimeout(cloneTimeout);
    cloneTimeout = setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">var</span> sw = <span class="hljs-keyword">new</span> StopWatch();
      cloneHeader();
      checkPosition();
      <span class="hljs-keyword">if</span> (!eventSet)
        $j(<span class="hljs-built_in">window</span>).scroll(checkPosition).trigger(<span class="hljs-string">"scroll"</span>);
      eventSet = <span class="hljs-literal">true</span>;
      sw.jslog(<span class="hljs-string">"Reclone headers"</span>);
    }, <span class="hljs-number">100</span>);
  }
  CustomEvent.observe(<span class="hljs-string">'list.loaded'</span>, reclone);
  CustomEvent.observe(<span class="hljs-string">'list2_init'</span>, reclone);
  CustomEvent.observe(<span class="hljs-string">'listheadersearch.show_hide'</span>, reclone);
  CustomEvent.observe(<span class="hljs-string">'compact'</span>, reclone);
  $j(<span class="hljs-built_in">window</span>).load(reclone);
  $j(<span class="hljs-built_in">window</span>).resize(reclone);
});;
<span class="hljs-comment">/*! RESOURCE: /scripts/classes/doctype/GlideHeaderSearch.js */</span>
$j(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$</span>) </span>{
<span class="hljs-meta">  'use strict'</span>;
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.NOW.headerSearchLoaded)
    <span class="hljs-keyword">return</span>;
  <span class="hljs-built_in">window</span>.NOW.headerSearchLoaded = <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">var</span> keyEvents = isMSIE9 || isMSIE10 ? <span class="hljs-string">"keydown"</span> : <span class="hljs-string">"keyup"</span>
  $(<span class="hljs-built_in">document</span>).on(keyEvents, <span class="hljs-string">"INPUT.list_header_search"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
    $(<span class="hljs-keyword">this</span>).addClass(<span class="hljs-string">'modified'</span>);
    <span class="hljs-keyword">var</span> choiceType = $(<span class="hljs-keyword">this</span>).closest(<span class="hljs-string">'[data-choice]'</span>).attr(<span class="hljs-string">'data-choice'</span>);
    <span class="hljs-keyword">var</span> isReference = $(<span class="hljs-keyword">this</span>).closest(<span class="hljs-string">'[data-glide-type="reference"]'</span>).length &gt; <span class="hljs-number">0</span>;
    <span class="hljs-keyword">if</span> (!isReference &amp;&amp; (choiceType == <span class="hljs-string">'1'</span> || choiceType == <span class="hljs-string">'3'</span>)) {
      parseChoice($(<span class="hljs-keyword">this</span>).closest(<span class="hljs-string">'[data-choice]'</span>));
    }
    <span class="hljs-keyword">if</span> (evt.keyCode != <span class="hljs-number">13</span>)
      <span class="hljs-keyword">return</span>;
    evt.preventDefault();
    submitHeaderSearch(<span class="hljs-keyword">this</span>);
  });

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">submitHeaderSearch</span>(<span class="hljs-params">el</span>) </span>{
    <span class="hljs-keyword">var</span> $table = $(el).closest(<span class="hljs-string">'table.list_table'</span>);
    <span class="hljs-keyword">if</span> ($table.data(<span class="hljs-string">'choice_query_active'</span>)) {
      $table.data(<span class="hljs-string">'choice_query_submit_onresponse'</span>, <span class="hljs-literal">true</span>);
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">var</span> listID = $table.attr(<span class="hljs-string">'data-list_id'</span>);
    <span class="hljs-keyword">var</span> list = GlideList2.get(listID);
    <span class="hljs-keyword">var</span> query = getQueryFromTable($table);
    <span class="hljs-keyword">var</span> extraParms = {
      <span class="hljs-attr">sysparm_choice_query_raw</span>: getRawChoiceQuery($table),
      <span class="hljs-attr">sysparm_list_header_search</span>: <span class="hljs-literal">true</span>
    };
    list.setFilter(query);
    list.refresh(<span class="hljs-number">1</span>, extraParms);
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseChoice</span>(<span class="hljs-params">$el</span>) </span>{
    <span class="hljs-keyword">var</span> $table = $el.closest(<span class="hljs-string">'table.list_table'</span>);
    <span class="hljs-keyword">var</span> table = $table.attr(<span class="hljs-string">'glide_table'</span>);
    <span class="hljs-keyword">var</span> field = $el.attr(<span class="hljs-string">'name'</span>);
    <span class="hljs-keyword">var</span> $input = $el.find(<span class="hljs-string">'input.list_header_search.modified'</span>);
    <span class="hljs-keyword">var</span> value = $input.val();
    <span class="hljs-keyword">if</span> (!value) {
      $input.data(<span class="hljs-string">'choice_query'</span>, <span class="hljs-literal">null</span>);
      <span class="hljs-keyword">return</span>;
    }
    $table.data(<span class="hljs-string">'choice_query_active'</span>, <span class="hljs-literal">true</span>);
    <span class="hljs-keyword">var</span> term = buildTerm(field, value)
    <span class="hljs-keyword">var</span> partialTerm = term.operator + term.value;
    translateChoiceListQuery(table, field, partialTerm, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onSuccess</span>(<span class="hljs-params">values</span>) </span>{
      term.operator = <span class="hljs-string">'IN'</span>;
      term.value = values.join(<span class="hljs-string">','</span>);
      $input.data(<span class="hljs-string">'choice_query'</span>, term);
      submitIfNecessary($table);
    }, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onError</span>(<span class="hljs-params"></span>) </span>{
      submitIfNecessary($table);
    });
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">submitIfNecessary</span>(<span class="hljs-params">$table</span>) </span>{
    $table.data(<span class="hljs-string">'choice_query_active'</span>, <span class="hljs-literal">false</span>);
    <span class="hljs-keyword">if</span> ($table.data(<span class="hljs-string">'choice_query_submit_onresponse'</span>))
      submitHeaderSearch($table);
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getRawChoiceQuery</span>(<span class="hljs-params">$table</span>) </span>{
    <span class="hljs-keyword">var</span> query = [];
    $table.find(<span class="hljs-string">'tr.list_header_search_row td'</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">index, el</span>) </span>{
      <span class="hljs-keyword">var</span> choiceType = el.getAttribute(<span class="hljs-string">'data-choice'</span>);
      <span class="hljs-keyword">var</span> isReference = el.getAttribute(<span class="hljs-string">'data-glide-type'</span>) == <span class="hljs-string">"reference"</span>;
      <span class="hljs-keyword">if</span> (isReference || (choiceType != <span class="hljs-string">'1'</span> &amp;&amp; choiceType != <span class="hljs-string">'3'</span>))
        <span class="hljs-keyword">return</span>;
      <span class="hljs-keyword">var</span> field = el.getAttribute(<span class="hljs-string">'name'</span>);
      <span class="hljs-keyword">var</span> $input = $(el).find(<span class="hljs-string">'input.list_header_search'</span>);
      <span class="hljs-keyword">if</span> (!$input.val())
        <span class="hljs-keyword">return</span>;
      <span class="hljs-keyword">var</span> term = buildTerm(field, $input.val())
      query.push(term.field + term.operator + term.value);
    });
    <span class="hljs-keyword">return</span> query.join(<span class="hljs-string">'^'</span>);
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadFromTables</span>(<span class="hljs-params"></span>) </span>{
    $(<span class="hljs-string">'TABLE.list_table'</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">index, table</span>) </span>{
      <span class="hljs-keyword">var</span> $table = $(table);
      <span class="hljs-keyword">var</span> query = $table.attr(<span class="hljs-string">'query'</span>);
      <span class="hljs-keyword">if</span> (!query)
        <span class="hljs-keyword">return</span>;
      <span class="hljs-keyword">if</span> (query.indexOf(<span class="hljs-string">'^NQ'</span>) != <span class="hljs-number">-1</span> || query.indexOf(<span class="hljs-string">'^OR'</span>) != <span class="hljs-number">-1</span>) {
        <span class="hljs-keyword">var</span> orMatches = query.match(<span class="hljs-regexp">/\^OR/g</span>) !== <span class="hljs-literal">null</span> ? query.match(<span class="hljs-regexp">/\^OR/g</span>).length : <span class="hljs-number">0</span>;
        <span class="hljs-keyword">var</span> orderByMatches = query.match(<span class="hljs-regexp">/\^ORDERBY/g</span>) !== <span class="hljs-literal">null</span> ? query.match(<span class="hljs-regexp">/\^ORDERBY/g</span>).length : <span class="hljs-number">0</span>;
        <span class="hljs-keyword">if</span> (orMatches != orderByMatches || query.indexOf(<span class="hljs-string">'^NQ'</span>) != <span class="hljs-number">-1</span>) {
          $j($table).find(<span class="hljs-string">'button.list_header_search_toggle'</span>).attr(<span class="hljs-string">'disabled'</span>, <span class="hljs-literal">true</span>);
          $table.addClass(<span class="hljs-string">'list_header_search_disabled'</span>);
        }
      }
      <span class="hljs-keyword">var</span> listID = $table.attr(<span class="hljs-string">'data-list_id'</span>);
      <span class="hljs-keyword">var</span> enc = <span class="hljs-keyword">new</span> GlideEncodedQuery(listID, query);
      enc.partsXML = loadXML($table.attr(<span class="hljs-string">'parsed_query'</span>));
      enc.terms = [];
      enc.parseXML();
      <span class="hljs-keyword">var</span> parts = enc.getTerms();
      <span class="hljs-keyword">var</span> encChoice = <span class="hljs-keyword">new</span> GlideEncodedQuery(listID, $table.attr(<span class="hljs-string">'choice_query'</span>));
      encChoice.partsXML = loadXML($table.attr(<span class="hljs-string">'parsed_choice_query'</span>));
      encChoice.terms = [];
      encChoice.parseXML();
      parts = parts.concat(encChoice.getTerms());
      <span class="hljs-keyword">var</span> hasHeaderQueries = <span class="hljs-literal">false</span>;
      <span class="hljs-keyword">var</span> hasGotoQuery = <span class="hljs-literal">false</span>;
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; parts.length; i++) {
        <span class="hljs-keyword">var</span> p = parts[i];
        <span class="hljs-keyword">var</span> value = p.displayValue || p.value;
        <span class="hljs-keyword">if</span> (value &amp;&amp; value.indexOf(<span class="hljs-string">'javascript:'</span>) == <span class="hljs-number">0</span>) {
          p.script = <span class="hljs-literal">true</span>;
          <span class="hljs-keyword">continue</span>;
        }
        <span class="hljs-keyword">if</span> (p.Goto == <span class="hljs-string">'true'</span>)
          hasGotoQuery = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">if</span> (setInputValue($table, p.field, buildDisplayValue(p.operator, value)))
          hasHeaderQueries = <span class="hljs-literal">true</span>;
      }
      showHeaderSearchRow($table, hasHeaderQueries, hasGotoQuery);
      disableUnsupportedFields($table);
      $table.data(<span class="hljs-string">'g_enc_query'</span>, enc);
      <span class="hljs-keyword">if</span> ($table.hasClass(<span class="hljs-string">'list_header_search_disabled'</span>) &amp;&amp; $table.hasClass(<span class="hljs-string">'list_header_search'</span>))
        $table.removeClass(<span class="hljs-string">'list_header_search'</span>);
    });
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setInputValue</span>(<span class="hljs-params">$table, field, value</span>) </span>{
    <span class="hljs-keyword">if</span> (!value)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">var</span> columnInput = $table.find(<span class="hljs-string">'.list_header_search_row td[name="'</span> + field + <span class="hljs-string">'"] input'</span>);
    <span class="hljs-keyword">if</span> (columnInput.length == <span class="hljs-number">0</span> &amp;&amp; field.indexOf(<span class="hljs-string">'.'</span>) &gt; <span class="hljs-number">-1</span>) {
      <span class="hljs-keyword">var</span> lastDot = field.lastIndexOf(<span class="hljs-string">'.'</span>);
      <span class="hljs-keyword">var</span> refField = field.substring(<span class="hljs-number">0</span>, lastDot);
      <span class="hljs-keyword">var</span> refFieldDisplay = field.substring(lastDot + <span class="hljs-number">1</span>);
      columnInput = $table.find(<span class="hljs-string">'.list_header_search_row '</span> +
        <span class="hljs-string">'td[name=\''</span> + refField + <span class="hljs-string">'\']'</span> +
        <span class="hljs-string">'[data-glide-type=reference]'</span> +
        <span class="hljs-string">'[data-glide-reference-name='</span> + refFieldDisplay + <span class="hljs-string">']'</span> +
        <span class="hljs-string">' input'</span>);
    }
    columnInput.val(value);
    <span class="hljs-keyword">return</span> columnInput.length &gt; <span class="hljs-number">0</span>;
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getQueryFromTable</span>(<span class="hljs-params">$table</span>) </span>{
    <span class="hljs-keyword">var</span> enc_query = $table.data(<span class="hljs-string">'g_enc_query'</span>);
    <span class="hljs-keyword">var</span> terms = enc_query ? enc_query.getTerms() : [];
    $table.find(<span class="hljs-string">'tr.list_header_search_row td'</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">index, el</span>) </span>{
      <span class="hljs-keyword">var</span> field = el.getAttribute(<span class="hljs-string">'name'</span>);
      <span class="hljs-keyword">var</span> type = el.getAttribute(<span class="hljs-string">'data-glide-type'</span>);
      <span class="hljs-keyword">var</span> baseField = <span class="hljs-string">""</span>;
      <span class="hljs-keyword">var</span> reference_name = el.getAttribute(<span class="hljs-string">'data-glide-reference-name'</span>);
      <span class="hljs-keyword">if</span> (reference_name) {
        baseField = field;
        field = field + <span class="hljs-string">'.'</span> + reference_name;
      }
      <span class="hljs-keyword">var</span> $input = $(el).find(<span class="hljs-string">'input.list_header_search.modified'</span>);
      <span class="hljs-keyword">if</span> ($input.length === <span class="hljs-number">0</span>)
        <span class="hljs-keyword">return</span>;
      <span class="hljs-keyword">var</span> value = $input.val() || <span class="hljs-string">''</span>;
      <span class="hljs-keyword">var</span> newTerm;
      <span class="hljs-keyword">var</span> choiceQuery = $input.data(<span class="hljs-string">'choice_query'</span>);
      <span class="hljs-keyword">if</span> (choiceQuery)
        newTerm = choiceQuery;
      <span class="hljs-keyword">else</span>
        newTerm = buildTerm(field, value);
      <span class="hljs-keyword">var</span> found = <span class="hljs-literal">false</span>;
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = terms.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
        <span class="hljs-keyword">if</span> ((terms[i].field == newTerm.field || terms[i].field == baseField) &amp;&amp;
          terms[i].script !== <span class="hljs-literal">true</span>) {
          found = <span class="hljs-literal">true</span>;
          <span class="hljs-keyword">if</span> (newTerm.value || value)
            terms[i] = newTerm;
          <span class="hljs-keyword">else</span>
            terms.splice(i, <span class="hljs-number">1</span>);
          <span class="hljs-keyword">break</span>;
        }
      }
      <span class="hljs-keyword">if</span> (!found &amp;&amp; value)
        terms.push(newTerm);
    });
    <span class="hljs-keyword">var</span> query = <span class="hljs-string">""</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; terms.length; i++) {
      <span class="hljs-keyword">var</span> t = terms[i];
      <span class="hljs-keyword">if</span> (!t.field)
        <span class="hljs-keyword">continue</span>;
      query += <span class="hljs-string">'^'</span> + t.field + t.operator + t.value;
    }
    <span class="hljs-keyword">return</span> query;
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildTerm</span>(<span class="hljs-params">field, value</span>) </span>{
    <span class="hljs-keyword">var</span> operator = <span class="hljs-string">'STARTSWITH'</span>;
    <span class="hljs-keyword">if</span> (value.indexOf(<span class="hljs-string">'*'</span>) == <span class="hljs-number">0</span> || value.indexOf(<span class="hljs-string">'.'</span>) == <span class="hljs-number">0</span>) {
      operator = <span class="hljs-string">'LIKE'</span>;
      value = value.substring(<span class="hljs-number">1</span>);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value.indexOf(<span class="hljs-string">'='</span>) == <span class="hljs-number">0</span>) {
      operator = <span class="hljs-string">'='</span>;
      value = value.substring(<span class="hljs-number">1</span>);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value.indexOf(<span class="hljs-string">'!='</span>) == <span class="hljs-number">0</span>) {
      operator = <span class="hljs-string">'!='</span>;
      value = value.substring(<span class="hljs-number">2</span>);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value.indexOf(<span class="hljs-string">'%'</span>) == <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">if</span> (value.charAt(value.length - <span class="hljs-number">1</span>) == <span class="hljs-string">'%'</span>) {
        operator = <span class="hljs-string">'LIKE'</span>;
        value = value.substring(<span class="hljs-number">1</span>, value.length - <span class="hljs-number">1</span>);
      } <span class="hljs-keyword">else</span> {
        operator = <span class="hljs-string">'ENDSWITH'</span>;
        value = value.substring(<span class="hljs-number">1</span>);
      }
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value.charAt(value.length - <span class="hljs-number">1</span>) == <span class="hljs-string">'%'</span>) {
      operator = <span class="hljs-string">'STARTSWITH'</span>;
      value = value.substring(<span class="hljs-number">0</span>, value.length - <span class="hljs-number">1</span>);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value.indexOf(<span class="hljs-string">'!*'</span>) == <span class="hljs-number">0</span>) {
      operator = <span class="hljs-string">'NOT LIKE'</span>;
      value = value.substring(<span class="hljs-number">2</span>);
    }
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">field</span>: field,
      <span class="hljs-attr">operator</span>: operator,
      <span class="hljs-attr">value</span>: value
    }
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildDisplayValue</span>(<span class="hljs-params">operator, value</span>) </span>{
    <span class="hljs-keyword">switch</span> (operator) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">'LIKE'</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">'*'</span> + value;
      <span class="hljs-keyword">case</span> <span class="hljs-string">'STARTSWITH'</span>:
        <span class="hljs-keyword">return</span> value;
      <span class="hljs-keyword">case</span> <span class="hljs-string">'NOT LIKE'</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">'!*'</span> + value;
      <span class="hljs-keyword">case</span> <span class="hljs-string">'ENDSWITH'</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">'%'</span> + value;
      <span class="hljs-keyword">case</span> <span class="hljs-string">'='</span>:
      <span class="hljs-keyword">case</span> <span class="hljs-string">'!='</span>:
        <span class="hljs-keyword">return</span> operator + value;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
  }
  $(<span class="hljs-built_in">document</span>).on(<span class="hljs-string">"click"</span>, <span class="hljs-string">"button.list_header_search_toggle"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
    <span class="hljs-keyword">var</span> $table = $(<span class="hljs-keyword">this</span>).closest(<span class="hljs-string">'TABLE'</span>)
    <span class="hljs-keyword">if</span> ($table.hasClass(<span class="hljs-string">'list_header_search_disabled'</span>))
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">var</span> isActive;
    <span class="hljs-keyword">if</span> ($table.hasClass(<span class="hljs-string">'list_header_search'</span>)) {
      isActive = <span class="hljs-literal">false</span>;
      $table.removeClass(<span class="hljs-string">'list_header_search'</span>);
    } <span class="hljs-keyword">else</span> {
      isActive = <span class="hljs-literal">true</span>;
      disableUnsupportedFields($table);
      $table.addClass(<span class="hljs-string">'list_header_search'</span>);
    }
    <span class="hljs-keyword">if</span> (canUseListSearchPreference())
      setPreference(<span class="hljs-string">'glide.ui.list_header_search.open'</span>, isActive);
    CustomEvent.fire(<span class="hljs-string">'listheadersearch.show_hide'</span>);
    _frameChanged();
    evt.preventDefault();
  })

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">translateChoiceListQuery</span>(<span class="hljs-params">table, field, filter, callback, callbackError</span>) </span>{
    $.ajax({
      <span class="hljs-attr">url</span>: <span class="hljs-string">'xmlhttp.do?sysparm_processor=com.glide.ui.ChoiceListSearchProcessor'</span>,
      <span class="hljs-attr">data</span>: {
        <span class="hljs-attr">table</span>: table,
        <span class="hljs-attr">field</span>: field,
        <span class="hljs-attr">filter</span>: filter
      },
      <span class="hljs-attr">headers</span>: {
        <span class="hljs-string">'X-UserToken'</span>: <span class="hljs-built_in">window</span>.g_ck
      },
      <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) </span>{
        <span class="hljs-keyword">if</span> (response) {
          <span class="hljs-keyword">var</span> responseJSON = <span class="hljs-built_in">JSON</span>.parse(response.documentElement.getAttribute(<span class="hljs-string">'answer'</span>));
          callback.call(<span class="hljs-literal">null</span>, responseJSON.result);
        } <span class="hljs-keyword">else</span> {
          callbackError.call(<span class="hljs-literal">null</span>);
        }
      },
      <span class="hljs-attr">error</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        callbackError.call(<span class="hljs-literal">null</span>);
      }
    })
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showHeaderSearchRow</span>(<span class="hljs-params">$table, hasHeaderQueries, hasGoto</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.g_report)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">var</span> preferenceValue = $table.find(<span class="hljs-string">'tr.list_header_search_row'</span>).attr(<span class="hljs-string">'data-open-onload'</span>) == <span class="hljs-string">'true'</span> &amp;&amp;
      canUseListSearchPreference();
    <span class="hljs-keyword">if</span> (preferenceValue) {
      $table.addClass(<span class="hljs-string">'list_header_search'</span>);
      CustomEvent.fire(<span class="hljs-string">'listheadersearch.show_hide'</span>);
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">var</span> cameFromNavigator = location.search.indexOf(<span class="hljs-string">'sysparm_userpref_module='</span>) != <span class="hljs-number">-1</span>;
    <span class="hljs-keyword">if</span> (cameFromNavigator)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">var</span> onLoadShowSearch = $table.attr(<span class="hljs-string">'data-search-show'</span>) == <span class="hljs-string">'true'</span>;
    <span class="hljs-keyword">var</span> openWithGoto = $table.find(<span class="hljs-string">'tr.list_header_search_row'</span>).attr(<span class="hljs-string">'data-open-ongoto'</span>) == <span class="hljs-string">'true'</span>;
    <span class="hljs-keyword">if</span> ((onLoadShowSearch &amp;&amp; hasHeaderQueries) || (hasGoto &amp;&amp; openWithGoto))
      $table.addClass(<span class="hljs-string">'list_header_search'</span>);
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">disableUnsupportedFields</span>(<span class="hljs-params">$table</span>) </span>{
    $table.find(<span class="hljs-string">'tr.list_header_search_row td'</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">index, el</span>) </span>{
      <span class="hljs-keyword">var</span> type = el.getAttribute(<span class="hljs-string">'data-glide-type'</span>);
      <span class="hljs-keyword">if</span> (type == <span class="hljs-string">'user_roles'</span> || type == <span class="hljs-string">'glide_list'</span> || type == <span class="hljs-string">'related_tags'</span> || type == <span class="hljs-string">'sys_class_name'</span>)
        $(el).find(<span class="hljs-string">'input.list_header_search'</span>).prop(<span class="hljs-string">'disabled'</span>, <span class="hljs-literal">true</span>);
    })
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">canUseListSearchPreference</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> !<span class="hljs-built_in">window</span>.g_form;
  }
  loadFromTables();
  CustomEvent.observe(<span class="hljs-string">'partial.page.reload'</span>, loadFromTables);
});;
<span class="hljs-comment">/*! RESOURCE: /scripts/classes/doctype/GlideWidgetFilter.js */</span>
<span class="hljs-keyword">var</span> GlideWidgetFilter = Class.create(GlideListWidget, {
  <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$super, widgetID, listID, listName, query, pinned, saveFilterHidden</span>) </span>{
    $<span class="hljs-keyword">super</span>(widgetID, listID);
    <span class="hljs-keyword">this</span>.query = query;
    <span class="hljs-keyword">this</span>.listName = listName;
    <span class="hljs-keyword">this</span>.pinned = pinned;
    <span class="hljs-keyword">this</span>.pinned = (pinned == <span class="hljs-string">'true'</span>);
    <span class="hljs-keyword">this</span>.openOnRefresh = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">if</span> (!saveFilterHidden)
      <span class="hljs-keyword">this</span>.saveFilterHidden = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">else</span>
      <span class="hljs-keyword">this</span>.saveFilterHidden = saveFilterHidden;
  },
  <span class="hljs-attr">setOpenOnRefresh</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.openOnRefresh = <span class="hljs-literal">true</span>;
  },
  <span class="hljs-attr">toggleFilter</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> e = <span class="hljs-keyword">this</span>._getFilterDiv();
    <span class="hljs-keyword">if</span> (!e)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">if</span> (e.getAttribute(<span class="hljs-string">'gsft_empty'</span>) == <span class="hljs-string">'true'</span>) {
      <span class="hljs-keyword">this</span>._loadFilter(e);
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">var</span> showFlag = e.style.display == <span class="hljs-string">"none"</span>;
    <span class="hljs-keyword">this</span>._filterDisplay(showFlag);
  },
  <span class="hljs-attr">togglePin</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.pinned = !<span class="hljs-keyword">this</span>.pinned;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.pinned)
      setPreference(<span class="hljs-string">'filter.pinned.'</span> + <span class="hljs-keyword">this</span>.listName, <span class="hljs-string">'true'</span>);
    <span class="hljs-keyword">else</span>
      deletePreference(<span class="hljs-string">'filter.pinned.'</span> + <span class="hljs-keyword">this</span>.listName);
    <span class="hljs-keyword">this</span>._setPinned(<span class="hljs-keyword">this</span>.pinned);
  },
  <span class="hljs-attr">_setPinned</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> e = gel(<span class="hljs-keyword">this</span>.listName + <span class="hljs-string">"_pin"</span>);
    <span class="hljs-keyword">if</span> (!e)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">var</span> msgs = <span class="hljs-keyword">new</span> GwtMessage();
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.pinned) {
      writeTitle(e, msgs.getMessage(<span class="hljs-string">"Unpin the filters"</span>));
      e.className = <span class="hljs-string">"toolbarImgActive btn btn-default active"</span>;
    } <span class="hljs-keyword">else</span> {
      writeTitle(e, msgs.getMessage(<span class="hljs-string">"Pin the filters"</span>));
      e.className = <span class="hljs-string">"toolbarImgDisabled btn btn-default"</span>;
    }
  },
  <span class="hljs-attr">isPinned</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.pinned;
  },
  <span class="hljs-attr">_refresh</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">listTable, list, loadFlag</span>) </span>{
    <span class="hljs-keyword">if</span> (loadFlag) {
      <span class="hljs-keyword">this</span>._initEvents(list);
    } <span class="hljs-keyword">else</span>
      <span class="hljs-keyword">this</span>._updateBreadcrumbs();
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.isPinned()) {
      <span class="hljs-keyword">this</span>._filterDisplay(<span class="hljs-literal">false</span>);
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.openOnRefresh)
        <span class="hljs-keyword">this</span>.toggleFilter();
    }
    <span class="hljs-keyword">this</span>.openOnRefresh = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">var</span> query = list.getQuery({
      <span class="hljs-attr">orderby</span>: <span class="hljs-literal">true</span>
    });
    <span class="hljs-keyword">if</span> (query == <span class="hljs-keyword">this</span>.query)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">var</span> filter = getThing(list.tableName, list.listID + <span class="hljs-string">"gcond_filters"</span>);
    <span class="hljs-keyword">if</span> (filter &amp;&amp; filter.filterObject)
      filter.filterObject.setQueryAsync(query);
    <span class="hljs-keyword">this</span>.query = query;
  },
  <span class="hljs-attr">_updateBreadcrumbs</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> bc = $(<span class="hljs-keyword">this</span>.listID + <span class="hljs-string">"_breadcrumb"</span>);
    <span class="hljs-keyword">if</span> (!bc)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">var</span> bc_hidden = $(<span class="hljs-keyword">this</span>.listID + <span class="hljs-string">"_breadcrumb_hidden"</span>);
    <span class="hljs-keyword">if</span> (!bc_hidden)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">if</span> (!bc_hidden.innerHTML)
      <span class="hljs-keyword">return</span>;
    bc.innerHTML = bc_hidden.innerHTML;
    bc_hidden.innerHTML = <span class="hljs-string">""</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.opener != <span class="hljs-literal">null</span>)
      $j(<span class="hljs-built_in">window</span>).resize();
  },
  <span class="hljs-attr">_filterDisplay</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">showFlag</span>) </span>{
    <span class="hljs-keyword">var</span> e = <span class="hljs-keyword">this</span>._getFilterDiv();
    <span class="hljs-keyword">if</span> (!e)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">if</span> (showFlag)
      showObject(e);
    <span class="hljs-keyword">else</span>
      hideObject(e);
    e = gel(<span class="hljs-keyword">this</span>.listID + <span class="hljs-string">"_filter_toggle_image"</span>);
    <span class="hljs-keyword">if</span> (!e)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">this</span>._changeFilterToggleIcon(e, showFlag);
    writeTitle(e, <span class="hljs-keyword">new</span> GwtMessage().getMessage(<span class="hljs-string">"Show / hide filter"</span>));
    CustomEvent.fire(<span class="hljs-string">'list.section.toggle'</span>);
  },
  <span class="hljs-attr">_changeFilterToggleIcon</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e, showFlag</span>) </span>{
    <span class="hljs-keyword">if</span> (showFlag)
      e.src = <span class="hljs-string">"images/list_v2_filter_hide.gifx"</span>;
    <span class="hljs-keyword">else</span>
      e.src = <span class="hljs-string">"images/list_v2_filter_reveal.gifx"</span>;
  },
  <span class="hljs-attr">_loadFilter</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">targetDiv</span>) </span>{
    <span class="hljs-keyword">this</span>._filterDisplay(<span class="hljs-literal">true</span>);
    targetDiv.setAttribute(<span class="hljs-string">'gsft_empty'</span>, <span class="hljs-string">'false'</span>);
    <span class="hljs-keyword">var</span> list = GlideList2.get(<span class="hljs-keyword">this</span>.listID);
    <span class="hljs-keyword">var</span> ajax = <span class="hljs-keyword">new</span> GlideAjax(<span class="hljs-string">"AJAXJellyRunner"</span>, <span class="hljs-string">"AJAXJellyRunner.do"</span>);
    ajax.addParam(<span class="hljs-string">"template"</span>, <span class="hljs-string">"list2_filter_partial.xml"</span>);
    ajax.addParam(<span class="hljs-string">"sysparm_widget_id"</span>, <span class="hljs-keyword">this</span>.widgetID);
    ajax.addParam(<span class="hljs-string">"sysparm_list_id"</span>, <span class="hljs-keyword">this</span>.listID);
    ajax.addParam(<span class="hljs-string">"sysparm_list_name"</span>, <span class="hljs-keyword">this</span>.listName);
    ajax.addParam(<span class="hljs-string">"sysparm_query_encoded"</span>, list.getQuery({
      <span class="hljs-attr">groupby</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">orderby</span>: <span class="hljs-literal">true</span>
    }));
    ajax.addParam(<span class="hljs-string">"sysparm_table"</span>, list.getTableName());
    ajax.addParam(<span class="hljs-string">"sysparm_filter_query_prefix"</span>, list.filterQueryPrefix);
    ajax.addParam(<span class="hljs-string">"sysparm_save_filter_hidden"</span>, <span class="hljs-keyword">this</span>.saveFilterHidden);
    ajax.addParam(<span class="hljs-string">"sysparm_view"</span>, list.getView());
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">if</span> (getTopWindow().Table.isCached(list.getTableName(), <span class="hljs-literal">null</span>))
        ajax.addParam(<span class="hljs-string">"sysparm_want_metadata"</span>, <span class="hljs-string">"false"</span>);
      <span class="hljs-keyword">else</span>
        ajax.addParam(<span class="hljs-string">"sysparm_want_metadata"</span>, <span class="hljs-string">"true"</span>);
    } <span class="hljs-keyword">catch</span> (e) {
      ajax.addParam(<span class="hljs-string">"sysparm_want_metadata"</span>, <span class="hljs-string">"true"</span>);
    }
    <span class="hljs-keyword">var</span> related = list.getRelated();
    <span class="hljs-keyword">if</span> (related)
      ajax.addParam(<span class="hljs-string">"sysparm_is_related_list"</span>, <span class="hljs-string">"true"</span>);
    ajax.addParam(<span class="hljs-string">"sysparm_filter_pinned"</span>, <span class="hljs-keyword">this</span>.pinned);
    list = <span class="hljs-literal">null</span>;
    ajax.getXML(<span class="hljs-keyword">this</span>._loadFiltersResponse.bind(<span class="hljs-keyword">this</span>), <span class="hljs-literal">null</span>, targetDiv);
  },
  <span class="hljs-attr">_loadFiltersResponse</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response, targetDiv</span>) </span>{
    <span class="hljs-keyword">var</span> html = response.responseText;
    targetDiv.innerHTML = html;
    html.evalScripts(<span class="hljs-literal">true</span>);
    <span class="hljs-keyword">this</span>._setPinned();
    <span class="hljs-keyword">var</span> n = targetDiv.id.substring(<span class="hljs-number">0</span>, targetDiv.id.length - <span class="hljs-string">"filterdiv"</span>.length);
    columnsGet(n);
    refreshFilter(n);
    _frameChanged();
    CustomEvent.fire(<span class="hljs-string">'list.section.toggle'</span>);
  },
  <span class="hljs-attr">_getFilterDiv</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> gel(<span class="hljs-keyword">this</span>.listName + <span class="hljs-string">"filterdiv"</span>);
  },
  <span class="hljs-attr">_initEvents</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">list</span>) </span>{
    <span class="hljs-keyword">var</span> a = list.listContainer.select(<span class="hljs-string">'a.list_filter_toggle'</span>);
    <span class="hljs-keyword">if</span> (a.length == <span class="hljs-number">1</span>)
      <span class="hljs-keyword">this</span>._initFilterEvents(a[<span class="hljs-number">0</span>]);
    <span class="hljs-keyword">var</span> span = list.listContainer.select(<span class="hljs-string">'span.breadcrumb_container'</span>);
    <span class="hljs-keyword">if</span> (span.length == <span class="hljs-number">1</span>)
      <span class="hljs-keyword">this</span>._initBreadcrumbEvents(span[<span class="hljs-number">0</span>]);
  },
  <span class="hljs-attr">_initFilterEvents</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">a</span>) </span>{
    <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
    a.observe(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ev</span>) </span>{
      self.toggleFilter();
      ev.stop();
    });
  },
  <span class="hljs-attr">_initBreadcrumbEvents</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">span</span>) </span>{
    span.on(<span class="hljs-string">'mouseover'</span>, <span class="hljs-string">'a.breadcrumb_separator'</span>, <span class="hljs-keyword">this</span>._enterBreadcrumb.bind(<span class="hljs-keyword">this</span>));
    span.on(<span class="hljs-string">'mouseout'</span>, <span class="hljs-string">'a.breadcrumb_separator'</span>, <span class="hljs-keyword">this</span>._exitBreadcrumb.bind(<span class="hljs-keyword">this</span>));
    span.on(<span class="hljs-string">'click'</span>, <span class="hljs-string">'a.breadcrumb_separator'</span>, <span class="hljs-keyword">this</span>._runBreadcrumb.bind(<span class="hljs-keyword">this</span>));
    span.on(<span class="hljs-string">'click'</span>, <span class="hljs-string">'a.breadcrumb_link'</span>, <span class="hljs-keyword">this</span>._runBreadcrumb.bind(<span class="hljs-keyword">this</span>));
    span.on(<span class="hljs-string">'contextmenu'</span>, <span class="hljs-string">'a.breadcrumb_link'</span>, <span class="hljs-keyword">this</span>._onBreadcrumbContext.bind(<span class="hljs-keyword">this</span>));
  },
  <span class="hljs-attr">_enterBreadcrumb</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
    evt.target.next().addClassName(<span class="hljs-string">'breadcrumb_delete'</span>);
  },
  <span class="hljs-attr">_exitBreadcrumb</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
    evt.target.next().removeClassName(<span class="hljs-string">'breadcrumb_delete'</span>);
  },
  <span class="hljs-attr">_runBreadcrumb</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
    <span class="hljs-keyword">var</span> element = evt.target;
    <span class="hljs-keyword">var</span> container = element.up(<span class="hljs-string">'span.breadcrumb_container'</span>);
    <span class="hljs-keyword">var</span> listID = container.readAttribute(<span class="hljs-string">'list_id'</span>);
    <span class="hljs-keyword">var</span> filter = element.readAttribute(<span class="hljs-string">'filter'</span>);
    GlideList2.get(listID).setFilterAndRefresh(filter);
    evt.stop();
  },
  <span class="hljs-attr">_onBreadcrumbContext</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
    <span class="hljs-keyword">var</span> element = evt.target;
    <span class="hljs-keyword">var</span> container = element.up(<span class="hljs-string">'span.breadcrumb_container'</span>);
    <span class="hljs-keyword">var</span> list = GlideList2.get(container.readAttribute(<span class="hljs-string">'list_id'</span>));
    <span class="hljs-keyword">var</span> filter = element.readAttribute(<span class="hljs-string">'filter'</span>);
    <span class="hljs-keyword">var</span> fixedQuery = list.getFixedQuery();
    <span class="hljs-keyword">if</span> (fixedQuery)
      filter = fixedQuery + <span class="hljs-string">"^"</span> + filter;
    <span class="hljs-keyword">var</span> relatedQuery = list.getRelatedQuery();
    <span class="hljs-keyword">if</span> (relatedQuery)
      filter = relatedQuery + <span class="hljs-string">"^"</span> + filter;
    <span class="hljs-keyword">this</span>._setBreadcrumbMenu(list.getTableName(), filter);
    contextShow(evt, <span class="hljs-string">'context_breadcrumb_menu'</span>, <span class="hljs-number">-1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
    evt.stop();
  },
  <span class="hljs-attr">_setBreadcrumbMenu</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">tableName, query</span>) </span>{
    <span class="hljs-keyword">var</span> link = tableName + <span class="hljs-string">"_list.do?sysparm_query="</span> + <span class="hljs-built_in">encodeURIComponent</span>(query);
    <span class="hljs-keyword">var</span> msgs = <span class="hljs-keyword">new</span> GwtMessage();
    <span class="hljs-keyword">var</span> crumbMenu = <span class="hljs-keyword">new</span> GwtContextMenu(<span class="hljs-string">"context_breadcrumb_menu"</span>);
    crumbMenu.clear();
    crumbMenu.addURL(msgs.getMessage(<span class="hljs-string">'Open new window'</span>), link, <span class="hljs-string">"_blank"</span>, <span class="hljs-string">"open_new"</span>);
    <span class="hljs-keyword">var</span> baseURL = <span class="hljs-built_in">document</span>.baseURI || <span class="hljs-built_in">document</span>.URL;
    <span class="hljs-keyword">if</span> (baseURL &amp;&amp; baseURL.match(<span class="hljs-regexp">/(.*)\/([^\/]+)/</span>))
      baseURL = <span class="hljs-built_in">RegExp</span>.$<span class="hljs-number">1</span> + <span class="hljs-string">"/"</span>;
    crumbMenu.addFunc(msgs.getMessage(<span class="hljs-string">'Copy URL'</span>), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
      copyToClipboard(baseURL + link);
    }, <span class="hljs-string">"copy_url"</span>);
    <span class="hljs-keyword">var</span> item = crumbMenu.addFunc(msgs.getMessage(<span class="hljs-string">'Copy query'</span>), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
      copyToClipboard(query);
    }, <span class="hljs-string">"copy_query"</span>);
    <span class="hljs-keyword">if</span> (!query)
      crumbMenu.setDisabled(item);
  },
  <span class="hljs-attr">type</span>: <span class="hljs-string">'GlideWidgetFilter'</span>
});;
<span class="hljs-comment">/*! RESOURCE: /scripts/sn/common/messaging/deprecated/NOW.messaging.js */</span>
(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">global</span>) </span>{
<span class="hljs-meta">  "use strict"</span>;
  global.NOW = global.NOW || {};
  <span class="hljs-keyword">var</span> messaging = global.NOW.messaging = global.NOW.messaging || {};
  messaging.snCustomEventAdapter = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">snCustomEvent, snTopicRegistrar, snDate, snUuid</span>) </span>{
    <span class="hljs-keyword">var</span> busId = snUuid.generate();
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">channel</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">channelName</span>) </span>{
        <span class="hljs-keyword">var</span> topicRegistrations = snTopicRegistrar.create();
        <span class="hljs-keyword">var</span> fireCall = <span class="hljs-string">'fireAll'</span>;
        snCustomEvent.on(channelName, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">envelope</span>) </span>{
          <span class="hljs-keyword">var</span> topic = envelope.topic;
          topicRegistrations.subscribersTo(topic).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">subscription</span>) </span>{
            subscription.callback(envelope.data, envelope);
          });
        });
        <span class="hljs-keyword">return</span> {
          <span class="hljs-attr">publish</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">topic, payload</span>) </span>{
            <span class="hljs-keyword">if</span> (!topic)
              <span class="hljs-keyword">throw</span> <span class="hljs-string">"'topic' argument must be supplied to publish"</span>;
            snCustomEvent[fireCall](channelName, envelope(topic, payload));
          },
          <span class="hljs-attr">subscribe</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">topic, callback</span>) </span>{
            <span class="hljs-keyword">if</span> (!topic)
              <span class="hljs-keyword">throw</span> <span class="hljs-string">"'topic' argument must be supplied to subscribe"</span>;
            <span class="hljs-keyword">if</span> (!callback)
              <span class="hljs-keyword">throw</span> <span class="hljs-string">"'callback' argument must be supplied to subscribe"</span>;
            <span class="hljs-keyword">var</span> sub = subscription(topic, callback);
            topicRegistrations.registerSubscriber(sub);
            <span class="hljs-keyword">return</span> sub;
          },
          <span class="hljs-attr">unsubscribe</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">subscription</span>) </span>{
            <span class="hljs-keyword">if</span> (!subscription)
              <span class="hljs-keyword">throw</span> <span class="hljs-string">"'subscription' argument must be supplied to unsubscribe"</span>;
            <span class="hljs-keyword">return</span> topicRegistrations.deregisterSubscriber(subscription);
          },
          <span class="hljs-attr">destroy</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            topicRegistrations = <span class="hljs-literal">null</span>;
            snCustomEvent.un(channelName);
          }
        };

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">subscription</span>(<span class="hljs-params">topic, callback</span>) </span>{
          <span class="hljs-keyword">return</span> {
            get topic() {
              <span class="hljs-keyword">return</span> topic
            },
            get callback() {
              <span class="hljs-keyword">return</span> callback
            }
          }
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">envelope</span>(<span class="hljs-params">topic, payload</span>) </span>{
          <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">channel</span>: channelName,
            <span class="hljs-attr">topic</span>: topic,
            <span class="hljs-attr">data</span>: payload,
            <span class="hljs-attr">timestamp</span>: snDate.now(),
            <span class="hljs-attr">messageId</span>: snUuid.generate(),
            <span class="hljs-attr">busId</span>: busId
          }
        }
      }
    };
  };
  messaging.snTopicRegistrar = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> validTopicRegex = <span class="hljs-regexp">/^(\w+\.)*(\w+)$/</span>;

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validateSubscription</span>(<span class="hljs-params">subscription</span>) </span>{
      <span class="hljs-keyword">if</span> (!subscription)
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Subscription argument is required"</span>);
      <span class="hljs-keyword">if</span> (!subscription.topic || !subscription.callback)
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Subscription argument must be a valid subscription"</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validateTopic</span>(<span class="hljs-params">topic</span>) </span>{
      <span class="hljs-keyword">if</span> (!topic)
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Topic argument is required"</span>);
      <span class="hljs-keyword">if</span> (!validTopicRegex.test(topic))
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Invalid topic name: "</span> + topic);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">regexForBinding</span>(<span class="hljs-params">binding</span>) </span>{
      binding = binding.split(<span class="hljs-string">'.'</span>).map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">segment</span>) </span>{
        <span class="hljs-keyword">if</span> (segment === <span class="hljs-string">''</span>)
          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Empty segment not allowed in topic binding: "</span> + binding);
        <span class="hljs-keyword">if</span> (segment === <span class="hljs-string">'*'</span>)
          <span class="hljs-keyword">return</span> <span class="hljs-string">'[^.]+'</span>;
        <span class="hljs-keyword">if</span> (segment === <span class="hljs-string">'#'</span>)
          <span class="hljs-keyword">return</span> <span class="hljs-string">'(\\b.*\\b)?'</span>;
        <span class="hljs-keyword">if</span> (segment.match(<span class="hljs-regexp">/\W/</span>))
          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Segments may only contain wildcards or word characters: "</span> + binding + <span class="hljs-string">' ['</span> + segment + <span class="hljs-string">']'</span>);
        <span class="hljs-keyword">return</span> segment;
      }).join(<span class="hljs-string">'\\.'</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">'^'</span> + binding + <span class="hljs-string">'$'</span>);
    }
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">create</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> registrations = {};
        <span class="hljs-keyword">var</span> bindingRegExps = {};
        <span class="hljs-keyword">return</span> {
          <span class="hljs-attr">registerSubscriber</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">subscription</span>) </span>{
            validateSubscription(subscription);
            <span class="hljs-keyword">if</span> (!registrations[subscription.topic])
              registrations[subscription.topic] = [];
            registrations[subscription.topic].push(subscription);
            bindingRegExps[subscription.topic] = regexForBinding(subscription.topic);
            <span class="hljs-keyword">return</span> subscription;
          },
          <span class="hljs-attr">deregisterSubscriber</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">toRemove</span>) </span>{
            validateSubscription(toRemove);
            <span class="hljs-keyword">var</span> topic = toRemove.topic;
            <span class="hljs-keyword">var</span> regs = registrations[topic];
            <span class="hljs-keyword">if</span> (regs) {
              registrations[topic] = regs.filter(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">subscription</span>) </span>{
                <span class="hljs-keyword">return</span> subscription !== toRemove;
              });
              <span class="hljs-keyword">if</span> (registrations[topic].length === <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">delete</span> registrations[topic];
                <span class="hljs-keyword">delete</span> bindingRegExps[topic];
              }
            }
          },
          <span class="hljs-attr">subscribersTo</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">topic</span>) </span>{
            validateTopic(topic);
            <span class="hljs-keyword">var</span> bindings = <span class="hljs-built_in">Object</span>.keys(registrations);
            <span class="hljs-keyword">return</span> bindings.reduce(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">memo, binding</span>) </span>{
              <span class="hljs-keyword">var</span> regex = bindingRegExps[binding];
              <span class="hljs-keyword">if</span> (regex.test(topic))
                <span class="hljs-keyword">return</span> memo.concat(registrations[binding]);
              <span class="hljs-keyword">return</span> memo;
            }, []);
          }
        }
      }
    }
  };
  messaging.snDate = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">now</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
      }
    }
  };
  messaging.snUuid = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">generate</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> d = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime();
        <span class="hljs-keyword">return</span> <span class="hljs-string">'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'</span>.replace(<span class="hljs-regexp">/[xy]/g</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">c</span>) </span>{
          <span class="hljs-keyword">var</span> r = (d + <span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">16</span>) % <span class="hljs-number">16</span> | <span class="hljs-number">0</span>;
          d = <span class="hljs-built_in">Math</span>.floor(d / <span class="hljs-number">16</span>);
          <span class="hljs-keyword">return</span> (c === <span class="hljs-string">'x'</span> ? r : (r &amp; <span class="hljs-number">0x7</span> | <span class="hljs-number">0x8</span>)).toString(<span class="hljs-number">16</span>);
        });
      }
    };
  };
  global.NOW.MessageBus =
    messaging.snCustomEventAdapter(CustomEvent, messaging.snTopicRegistrar(), messaging.snDate(), messaging.snUuid());
})(<span class="hljs-keyword">this</span>);;
<span class="hljs-comment">/*! RESOURCE: /scripts/sn/common/messaging/deprecated/NOW.messaging.record.js */</span>
(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">global</span>) </span>{
<span class="hljs-meta">  "use strict"</span>;
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> global.NOW === <span class="hljs-string">'undefined'</span> || <span class="hljs-keyword">typeof</span> global.NOW.messaging === <span class="hljs-string">'undefined'</span>) {
    <span class="hljs-built_in">console</span>.error(<span class="hljs-string">"Messaging API not defined, skipping creating of record messaging API"</span>);
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-keyword">var</span> messaging = global.NOW.messaging = global.NOW.messaging || {};
  messaging.record = messaging.record || (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> recordChannel = global.NOW.MessageBus.channel(<span class="hljs-string">'record'</span>);

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">basePayload</span>(<span class="hljs-params">table, record, source</span>) </span>{
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">table</span>: table,
        <span class="hljs-attr">record</span>: record,
        <span class="hljs-attr">source</span>: source
      }
    }
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">created</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">tableName, record, source</span>) </span>{
        recordChannel.publish(<span class="hljs-string">'record.created'</span>, basePayload(tableName, record, source));
      },
      <span class="hljs-attr">updated</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">tableName, record, changes, source</span>) </span>{
        <span class="hljs-keyword">var</span> payload = basePayload(tableName, record, source);
        payload.changes = changes;
        recordChannel.publish(<span class="hljs-string">'record.updated.field'</span>, payload);
      },
      <span class="hljs-attr">deleted</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">tableName, record, source</span>) </span>{
        recordChannel.publish(<span class="hljs-string">'record.deleted'</span>, basePayload(tableName, record, source));
      },
      <span class="hljs-attr">commentAdded</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">tableName, record, comment, source</span>) </span>{
        <span class="hljs-keyword">var</span> payload = basePayload(tableName, record, source);
        payload.comment = comment;
        recordChannel.publish(<span class="hljs-string">'record.updated.comment.added'</span>, payload);
      }
    };
  })();
})(<span class="hljs-keyword">this</span>);;
<span class="hljs-comment">/*! RESOURCE: /scripts/classes/timeAgo.js */</span>
$j(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$</span>) </span>{
<span class="hljs-meta">  'use strict'</span>;
  <span class="hljs-keyword">var</span> ATTR = <span class="hljs-string">'timeago'</span>;
  <span class="hljs-keyword">var</span> TA_ATTRS = <span class="hljs-string">'timeago-attrs'</span>;
  <span class="hljs-keyword">var</span> EMPTY = <span class="hljs-string">'sn-timeago-empty-msg'</span>;
  <span class="hljs-keyword">var</span> settings = {
    <span class="hljs-attr">allowFuture</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">strings</span>: {}
  };
  updateMessages();
  findElements();
  setInterval(findElements, <span class="hljs-number">30</span> * <span class="hljs-number">1000</span>);
  CustomEvent.observe(<span class="hljs-string">'list_content_changed'</span>, findElements);
  CustomEvent.observe(<span class="hljs-string">'date_field_changed'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">payload</span>) </span>{
    updateFormElement(payload.id, payload.dateString);
  });

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findElements</span>(<span class="hljs-params">root</span>) </span>{
    <span class="hljs-keyword">var</span> elements = (root || <span class="hljs-built_in">document</span>).querySelectorAll(<span class="hljs-string">'['</span> + ATTR + <span class="hljs-string">']'</span>);
    <span class="hljs-keyword">var</span> i = elements.length;
    <span class="hljs-keyword">while</span> (i--)
      updateElement(elements[i]);
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateFormElement</span>(<span class="hljs-params">id, dateString</span>) </span>{
    <span class="hljs-keyword">var</span> element = <span class="hljs-built_in">document</span>.getElementById(id);
    <span class="hljs-keyword">if</span> (element) {
      <span class="hljs-keyword">if</span> (g_user_date_time_format) {
        <span class="hljs-keyword">var</span> int = getDateFromFormat(dateString, g_user_date_time_format);
        int = convertTimezone(int, <span class="hljs-literal">false</span>);
        dateString = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(int).toISOString().split(<span class="hljs-string">'.'</span>)[<span class="hljs-number">0</span>].replace(<span class="hljs-string">'T'</span>, <span class="hljs-string">' '</span>);
      }
      element.setAttribute(ATTR, dateString);
      element.setAttribute(<span class="hljs-string">'title'</span>, dateString);
      updateElement(element, <span class="hljs-literal">true</span>);
    }
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateMessages</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> msgs = getMessages([
      <span class="hljs-string">'prefix_ago'</span>,
      <span class="hljs-string">'prefix_from now'</span>,
      <span class="hljs-string">'suffix_ago'</span>,
      <span class="hljs-string">'suffix_from now'</span>,
      <span class="hljs-string">'just now'</span>,
      <span class="hljs-string">'less than a minute'</span>,
      <span class="hljs-string">'about a minute'</span>,
      <span class="hljs-string">'%d minutes'</span>,
      <span class="hljs-string">'about an hour'</span>,
      <span class="hljs-string">'about %d hours'</span>,
      <span class="hljs-string">'a day'</span>,
      <span class="hljs-string">'%d days'</span>,
      <span class="hljs-string">'about a month'</span>,
      <span class="hljs-string">'%d months'</span>,
      <span class="hljs-string">'about a year'</span>,
      <span class="hljs-string">'%d years'</span>,
      <span class="hljs-string">'(empty)'</span>
    ]);
    settings.strings = {
      <span class="hljs-attr">prefixAgo</span>: msgs[<span class="hljs-string">'prefix_ago'</span>],
      <span class="hljs-attr">prefixFromNow</span>: msgs[<span class="hljs-string">'prefix_from now'</span>],
      <span class="hljs-attr">suffixAgo</span>: msgs[<span class="hljs-string">'suffix_ago'</span>],
      <span class="hljs-attr">suffixFromNow</span>: msgs[<span class="hljs-string">"suffix_from now"</span>],
      <span class="hljs-attr">justNow</span>: msgs[<span class="hljs-string">"just now"</span>],
      <span class="hljs-attr">seconds</span>: msgs[<span class="hljs-string">"less than a minute"</span>],
      <span class="hljs-attr">minute</span>: msgs[<span class="hljs-string">"about a minute"</span>],
      <span class="hljs-attr">minutes</span>: msgs[<span class="hljs-string">"%d minutes"</span>],
      <span class="hljs-attr">hour</span>: msgs[<span class="hljs-string">"about an hour"</span>],
      <span class="hljs-attr">hours</span>: msgs[<span class="hljs-string">"about %d hours"</span>],
      <span class="hljs-attr">day</span>: msgs[<span class="hljs-string">"a day"</span>],
      <span class="hljs-attr">days</span>: msgs[<span class="hljs-string">"%d days"</span>],
      <span class="hljs-attr">month</span>: msgs[<span class="hljs-string">"about a month"</span>],
      <span class="hljs-attr">months</span>: msgs[<span class="hljs-string">"%d months"</span>],
      <span class="hljs-attr">year</span>: msgs[<span class="hljs-string">"about a year"</span>],
      <span class="hljs-attr">years</span>: msgs[<span class="hljs-string">"%d years"</span>],
      <span class="hljs-attr">wordSeparator</span>: msgs[<span class="hljs-string">"timeago_number_separator"</span>],
      <span class="hljs-attr">numbers</span>: [],
      <span class="hljs-attr">empty</span>: msgs[<span class="hljs-string">"(empty)"</span>]
    };
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">allowFuture</span>(<span class="hljs-params">bool</span>) </span>{
    settings.allowFuture = bool;
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toWords</span>(<span class="hljs-params">distanceMillis</span>) </span>{
    <span class="hljs-keyword">var</span> $l = settings.strings;
    <span class="hljs-keyword">var</span> seconds = <span class="hljs-built_in">Math</span>.abs(distanceMillis) / <span class="hljs-number">1000</span>;
    <span class="hljs-keyword">var</span> minutes = seconds / <span class="hljs-number">60</span>;
    <span class="hljs-keyword">var</span> hours = minutes / <span class="hljs-number">60</span>;
    <span class="hljs-keyword">var</span> days = hours / <span class="hljs-number">24</span>;
    <span class="hljs-keyword">var</span> years = days / <span class="hljs-number">365</span>;
    <span class="hljs-keyword">var</span> prefix = $l.prefixAgo;
    <span class="hljs-keyword">var</span> suffix = $l.suffixAgo;
    <span class="hljs-keyword">if</span> (seconds &lt; <span class="hljs-number">45</span>)
      prefix = suffix = <span class="hljs-string">''</span>;
    <span class="hljs-keyword">if</span> (settings.allowFuture) {
      <span class="hljs-keyword">if</span> (distanceMillis &lt; <span class="hljs-number">0</span>) {
        prefix = $l.prefixFromNow;
        suffix = $l.suffixFromNow;
      }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">substitute</span>(<span class="hljs-params">stringOrFunction, number</span>) </span>{
      <span class="hljs-keyword">var</span> string = isFunction(stringOrFunction) ?
        stringOrFunction(number, distanceMillis) : stringOrFunction;
      <span class="hljs-keyword">var</span> value = ($l.numbers &amp;&amp; $l.numbers[number]) || number;
      <span class="hljs-keyword">return</span> string.replace(<span class="hljs-regexp">/%d/i</span>, value);
    }
    <span class="hljs-keyword">var</span> words = seconds &lt; <span class="hljs-number">45</span> &amp;&amp; (distanceMillis &gt;= <span class="hljs-number">0</span> || !settings.allowFuture) &amp;&amp; substitute($l.justNow, <span class="hljs-built_in">Math</span>.round(seconds)) ||
      seconds &lt; <span class="hljs-number">45</span> &amp;&amp; substitute($l.seconds, <span class="hljs-built_in">Math</span>.round(seconds)) ||
      seconds &lt; <span class="hljs-number">90</span> &amp;&amp; substitute($l.minute, <span class="hljs-number">1</span>) ||
      minutes &lt; <span class="hljs-number">45</span> &amp;&amp; substitute($l.minutes, <span class="hljs-built_in">Math</span>.round(minutes)) ||
      minutes &lt; <span class="hljs-number">90</span> &amp;&amp; substitute($l.hour, <span class="hljs-number">1</span>) ||
      hours &lt; <span class="hljs-number">24</span> &amp;&amp; substitute($l.hours, <span class="hljs-built_in">Math</span>.round(hours)) ||
      hours &lt; <span class="hljs-number">42</span> &amp;&amp; substitute($l.day, <span class="hljs-number">1</span>) ||
      days &lt; <span class="hljs-number">30</span> &amp;&amp; substitute($l.days, <span class="hljs-built_in">Math</span>.ceil(days)) ||
      days &lt; <span class="hljs-number">45</span> &amp;&amp; substitute($l.month, <span class="hljs-number">1</span>) ||
      days &lt; <span class="hljs-number">365</span> &amp;&amp; substitute($l.months, <span class="hljs-built_in">Math</span>.round(days / <span class="hljs-number">30</span>)) ||
      years &lt; <span class="hljs-number">1.5</span> &amp;&amp; substitute($l.year, <span class="hljs-number">1</span>) ||
      substitute($l.years, <span class="hljs-built_in">Math</span>.round(years));
    <span class="hljs-keyword">var</span> separator = $l.wordSeparator === <span class="hljs-literal">undefined</span> ? <span class="hljs-string">" "</span> : $l.wordSeparator;
    <span class="hljs-keyword">return</span> [prefix, words, suffix].join(separator).trim();
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isFunction</span>(<span class="hljs-params">value</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'function'</span>;
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isNumber</span>(<span class="hljs-params">value</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'number'</span>;
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isDate</span>(<span class="hljs-params">value</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.prototype.toString.call(value) === <span class="hljs-string">'[object Date]'</span>;
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isNull</span>(<span class="hljs-params">value</span>) </span>{
    <span class="hljs-keyword">return</span> (value === <span class="hljs-literal">null</span> || value === <span class="hljs-string">''</span> || <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'undefined'</span>)
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getEmptyMessage</span>(<span class="hljs-params">element</span>) </span>{
    <span class="hljs-keyword">var</span> attr = element.getAttribute(EMPTY);
    <span class="hljs-keyword">if</span> (attr)
      <span class="hljs-keyword">return</span> attr;
    <span class="hljs-keyword">return</span> settings.strings.empty;
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parse</span>(<span class="hljs-params">iso8601</span>) </span>{
    <span class="hljs-keyword">if</span> (isDate(iso8601))
      <span class="hljs-keyword">return</span> iso8601;
    <span class="hljs-keyword">if</span> (isNull(iso8601))
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">if</span> (isNumber(iso8601))
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">parseInt</span>(iso8601, <span class="hljs-number">10</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(parseDateString(iso8601));
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseDateString</span>(<span class="hljs-params">iso8601</span>) </span>{
    <span class="hljs-keyword">var</span> s = iso8601.trim();
    s = s.replace(<span class="hljs-regexp">/\.\d+/</span>, <span class="hljs-string">""</span>);
    s = s.replace(<span class="hljs-regexp">/-/</span>, <span class="hljs-string">"/"</span>).replace(<span class="hljs-regexp">/-/</span>, <span class="hljs-string">"/"</span>);
    s = s.replace(<span class="hljs-regexp">/T/</span>, <span class="hljs-string">" "</span>).replace(<span class="hljs-regexp">/Z/</span>, <span class="hljs-string">" UTC"</span>);
    s = s.replace(<span class="hljs-regexp">/([\+\-]\d\d)\:?(\d\d)/</span>, <span class="hljs-string">" $1$2"</span>);
    <span class="hljs-keyword">return</span> s;
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateElement</span>(<span class="hljs-params">element, isLocalTime</span>) </span>{
    <span class="hljs-keyword">var</span> value = element.getAttribute(ATTR);
    <span class="hljs-keyword">var</span> time = parse(value);
    <span class="hljs-keyword">if</span> (!isDate(time) || <span class="hljs-built_in">isNaN</span>(time.getTime())) {
      <span class="hljs-keyword">return</span> element.innerHTML = isNull(value) ? getEmptyMessage(element) : value;
    }
    <span class="hljs-keyword">var</span> timeInWords = isLocalTime ? timeFromNow(time) : correctedTimeFromNow(time);
    <span class="hljs-keyword">var</span> attrToSet = element.getAttribute(TA_ATTRS);
    <span class="hljs-keyword">if</span> (attrToSet == <span class="hljs-string">'title'</span> &amp;&amp; element.hasAttribute(<span class="hljs-string">'data-original-title'</span>))
      element.setAttribute(<span class="hljs-string">'data-original-title'</span>, timeInWords);
    <span class="hljs-keyword">else</span>
      element.setAttribute(attrToSet, timeInWords);
    <span class="hljs-keyword">if</span> (element.hasClassName(<span class="hljs-string">'date-timeago'</span>))
      element.innerHTML = timeInWords;
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateInterval</span>(<span class="hljs-params">diff</span>) </span>{
    diff = <span class="hljs-built_in">Math</span>.abs(diff);
    <span class="hljs-keyword">var</span> SEC = <span class="hljs-number">1000</span>;
    <span class="hljs-keyword">var</span> MIN = <span class="hljs-number">60</span> * SEC;
    <span class="hljs-keyword">var</span> HR = <span class="hljs-number">60</span> * MIN;
    <span class="hljs-keyword">if</span> (diff &lt; MIN)
      <span class="hljs-keyword">return</span> <span class="hljs-number">2</span> * SEC;
    <span class="hljs-keyword">if</span> (diff &lt; (<span class="hljs-number">30</span> * MIN))
      <span class="hljs-keyword">return</span> <span class="hljs-number">12</span> * SEC;
    <span class="hljs-keyword">if</span> (diff &lt; HR)
      <span class="hljs-keyword">return</span> MIN;
    <span class="hljs-keyword">if</span> (diff &lt; (<span class="hljs-number">8</span> * HR))
      <span class="hljs-keyword">return</span> <span class="hljs-number">20</span> * MIN;
    <span class="hljs-keyword">return</span> <span class="hljs-number">24</span> * HR;
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">correctedTimeFromNow</span>(<span class="hljs-params">date</span>) </span>{
    <span class="hljs-keyword">var</span> isUserRecordTZ = <span class="hljs-keyword">typeof</span> g_tz_user_offset == <span class="hljs-string">'undefined'</span> ? <span class="hljs-literal">true</span> : g_tz_user_offset;
    <span class="hljs-keyword">var</span> offset = isUserRecordTZ ? <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTimezoneOffset() * <span class="hljs-number">60000</span> - <span class="hljs-built_in">Math</span>.abs(g_tz_offset) : <span class="hljs-number">0</span>;
    <span class="hljs-keyword">return</span> timeBetween(<span class="hljs-built_in">Date</span>.now() + offset, addTimeZone(date));
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">timeFromNow</span>(<span class="hljs-params">date</span>) </span>{
    <span class="hljs-keyword">return</span> timeBetween(<span class="hljs-built_in">Date</span>.now(), date);
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">timeBetween</span>(<span class="hljs-params">date1, date2</span>) </span>{
    <span class="hljs-keyword">return</span> toWords(date1 - date2);
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">convertTimezone</span>(<span class="hljs-params">date, toUTC</span>) </span>{
    <span class="hljs-keyword">var</span> timeZoneCorrection = (<span class="hljs-keyword">typeof</span> g_tz_offset === <span class="hljs-string">'number'</span>) ? <span class="hljs-built_in">Math</span>.abs(g_tz_offset) : <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTimezoneOffset() * <span class="hljs-number">60000</span>;
    <span class="hljs-keyword">if</span> (toUTC)
      <span class="hljs-keyword">return</span> date + timeZoneCorrection;
    <span class="hljs-keyword">else</span>
      <span class="hljs-keyword">return</span> date - timeZoneCorrection;
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeTimeZone</span>(<span class="hljs-params">time</span>) </span>{
    <span class="hljs-keyword">return</span> convertTimezone(time, <span class="hljs-literal">true</span>);
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addTimeZone</span>(<span class="hljs-params">time</span>) </span>{
    <span class="hljs-keyword">return</span> convertTimezone(time, <span class="hljs-literal">false</span>);
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setTimeagoValue</span>(<span class="hljs-params">id, date</span>) </span>{
    <span class="hljs-keyword">if</span> (isDate(date))
      date = date.toISOString();
    <span class="hljs-keyword">var</span> element = <span class="hljs-built_in">document</span>.querySelector(id) || <span class="hljs-built_in">document</span>.getElementById(id);
    <span class="hljs-keyword">if</span> (element)
      element.setAttribute(ATTR, date);
    updateElement(element);
  }
});;
<span class="hljs-comment">/*! RESOURCE: /scripts/classes/doctype/GlideListv3Compatibility.js */</span>
(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  $j(<span class="hljs-built_in">document</span>).on(<span class="hljs-string">'click'</span>, <span class="hljs-string">'.list-compat-check'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> $element = $j(<span class="hljs-keyword">this</span>);
    <span class="hljs-keyword">var</span> popoverTarget = <span class="hljs-keyword">this</span>.getAttribute(<span class="hljs-string">'data-target'</span>);
    <span class="hljs-keyword">if</span> (!popoverTarget)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">if</span> (popoverTarget.indexOf(<span class="hljs-string">'#'</span>) == <span class="hljs-number">0</span>)
      popoverTarget = <span class="hljs-built_in">document</span>.getElementById(popoverTarget.substring(<span class="hljs-number">1</span>));
    <span class="hljs-keyword">var</span> $popover = $j(popoverTarget);
    <span class="hljs-keyword">var</span> realTable = $element.attr(<span class="hljs-string">'data-table'</span>);
    <span class="hljs-keyword">var</span> parent = $element.attr(<span class="hljs-string">'data-parent'</span>);
    <span class="hljs-keyword">var</span> table = parent &amp;&amp; <span class="hljs-built_in">window</span>.g_form ? g_form.getTableName() : realTable;
    <span class="hljs-keyword">var</span> listControlID = $element.attr(<span class="hljs-string">'data-list-control'</span>);
    <span class="hljs-keyword">if</span> ($element.attr(<span class="hljs-string">'data-compat-rendered'</span>) == <span class="hljs-string">'true'</span>)
      <span class="hljs-keyword">return</span>;
    $j.ajax({
      <span class="hljs-attr">headers</span>: {
        <span class="hljs-string">'X-UserToken'</span>: <span class="hljs-built_in">window</span>.g_ck
      },
      <span class="hljs-attr">data</span>: {
        <span class="hljs-attr">sysparm_parent</span>: parent,
        <span class="hljs-attr">sysparm_realtable</span>: realTable
      },
      <span class="hljs-attr">url</span>: <span class="hljs-string">'/api/now/v1/ui/list_compatibility/'</span> + table
    }).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) </span>{
      <span class="hljs-keyword">var</span> tmpl = <span class="hljs-keyword">new</span> XMLTemplate(<span class="hljs-string">'listcompat_content'</span>);
      <span class="hljs-keyword">var</span> output = tmpl.evaluate({
        <span class="hljs-attr">related_lists_enabled</span>: convertResultToCheck(parent ? response.result.related_lists_enabled : <span class="hljs-literal">true</span>, <span class="hljs-literal">null</span>, <span class="hljs-string">'glide.ui.list_v3.related_list'</span>),
        <span class="hljs-attr">sys_control_enabled</span>: convertResultToCheck(response.result.checks.sys_control_enabled, listControlID),
        <span class="hljs-attr">hierarchical_lists</span>: convertResultToCheck(response.result.checks.hierarchical_lists, listControlID),
        <span class="hljs-attr">list_edit_insert_row</span>: convertResultToCheck(response.result.checks.list_edit_insert_row, listControlID),
        <span class="hljs-attr">compatible_ui_actions</span>: convertResultToCheck(response.result.checks.compatible_ui_actions)
      });
      $popover.find(<span class="hljs-string">'.popover-body'</span>).append(output);
      output = <span class="hljs-string">""</span>;
      <span class="hljs-keyword">if</span> (response.result.checks.ui_actions) {
        <span class="hljs-keyword">var</span> uiActions = response.result.checks.ui_actions;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; uiActions.length; i++) {
          <span class="hljs-keyword">if</span> (uiActions[i].count == <span class="hljs-string">'0'</span>)
            <span class="hljs-keyword">continue</span>;
          output += outputUIActionLine(uiActions[i], table);
        }
      }
      $popover.find(<span class="hljs-string">'.ui-actions'</span>).append(output);
      $popover.find(<span class="hljs-string">'[title]'</span>).tooltip().hideFix();
      $element.attr(<span class="hljs-string">'data-compat-rendered'</span>, <span class="hljs-string">'true'</span>).popover(<span class="hljs-string">'show'</span>);
    })
  });

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">outputUIActionLine</span>(<span class="hljs-params">action, table</span>) </span>{
    <span class="hljs-keyword">var</span> tmpl = <span class="hljs-keyword">new</span> XMLTemplate(action.action_name ? <span class="hljs-string">'listcompat_ui_action'</span> : <span class="hljs-string">'listcompat_ui_action_global'</span>);
    <span class="hljs-keyword">return</span> tmpl.evaluate($j.extend({}, action, {
      <span class="hljs-attr">table</span>: table
    }));
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">convertResultToCheck</span>(<span class="hljs-params">param, listControlID, propertyName</span>) </span>{
    <span class="hljs-keyword">var</span> href = <span class="hljs-string">""</span>;
    <span class="hljs-keyword">if</span> (listControlID &amp;&amp; listControlID != <span class="hljs-string">'-1'</span>) {
      href = <span class="hljs-string">'sys_ui_list_control.do?sys_id='</span> + listControlID;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (propertyName) {
      href = <span class="hljs-string">'sys_properties.do?sysparm_query=name='</span> + propertyName;
    }
    <span class="hljs-keyword">return</span> param ? {
      <span class="hljs-attr">msg</span>: getMessage(<span class="hljs-string">'Compatible'</span>),
      <span class="hljs-attr">rowStyle</span>: <span class="hljs-string">'hidden'</span>,
      <span class="hljs-attr">style</span>: <span class="hljs-string">'icon-success-circle color-green'</span>,
      <span class="hljs-attr">href</span>: <span class="hljs-string">''</span>
    } : {
      <span class="hljs-attr">msg</span>: getMessage(<span class="hljs-string">'Not compatible'</span>),
      <span class="hljs-attr">rowStyle</span>: <span class="hljs-string">''</span>,
      <span class="hljs-attr">style</span>: <span class="hljs-string">'icon-error-circle color-red'</span>,
      <span class="hljs-attr">href</span>: href
    };
  }
})();;;</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
