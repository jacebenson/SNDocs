<!DOCTYPE html>

<html>
<head>
  <title>js_includes_customer.jsx</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="SLARepairClient.html">
                  SLARepairClient.js
                </a>
              
                
                <a class="source" href="form_tags.html">
                  form_tags.jsx
                </a>
              
                
                <a class="source" href="glide-highcharts-v5.html">
                  glide-highcharts-v5.js
                </a>
              
                
                <a class="source" href="heisenberg_all.html">
                  heisenberg_all.jsx
                </a>
              
                
                <a class="source" href="js_guided_tours_includes.html">
                  js_guided_tours_includes.jsx
                </a>
              
                
                <a class="source" href="js_includes_amb.html">
                  js_includes_amb.jsx
                </a>
              
                
                <a class="source" href="js_includes_customer.html">
                  js_includes_customer.jsx
                </a>
              
                
                <a class="source" href="js_includes_doctype.html">
                  js_includes_doctype.jsx
                </a>
              
                
                <a class="source" href="js_includes_form_presence.html">
                  js_includes_form_presence.jsx
                </a>
              
                
                <a class="source" href="js_includes_last_doctype.html">
                  js_includes_last_doctype.jsx
                </a>
              
                
                <a class="source" href="js_includes_list_edit_doctype.html">
                  js_includes_list_edit_doctype.jsx
                </a>
              
                
                <a class="source" href="js_includes_listv2_doctype.html">
                  js_includes_listv2_doctype.jsx
                </a>
              
                
                <a class="source" href="js_includes_sorting_new.html">
                  js_includes_sorting_new.jsx
                </a>
              
                
                <a class="source" href="js_includes_sp.html">
                  js_includes_sp.jsx
                </a>
              
                
                <a class="source" href="magellan.CreateFavoriteModal.html">
                  magellan.CreateFavoriteModal.jsx
                </a>
              
                
                <a class="source" href="newtag-it.html">
                  newtag-it.jsx
                </a>
              
                
                <a class="source" href="transaction_scope_includes.html">
                  transaction_scope_includes.jsx
                </a>
              
                
                <a class="source" href="ui_policy.html">
                  ui_policy.jsx
                </a>
              
                
                <a class="source" href="z_last_include.html">
                  z_last_include.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>js_includes_customer.jsx</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/*! RESOURCE: /scripts/js_includes_customer.js */</span>
<span class="hljs-comment">/*! RESOURCE: ScrumReleaseImportGroupDialog */</span>
<span class="hljs-keyword">var</span> ScrumReleaseImportGroupDialog = Class.create();
ScrumReleaseImportGroupDialog.prototype = {
<span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">this</span>.setUpFacade();
},
<span class="hljs-attr">setUpFacade</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">var</span> dialogClass = <span class="hljs-built_in">window</span>.GlideModal ? GlideModal : GlideDialogWindow;
<span class="hljs-keyword">this</span>._mstrDlg = <span class="hljs-keyword">new</span> dialogClass(<span class="hljs-string">"task_window"</span>);
<span class="hljs-keyword">this</span>._mstrDlg.setTitle(getMessage(<span class="hljs-string">"Add Members From Group"</span>));
<span class="hljs-keyword">this</span>._mstrDlg.setBody(<span class="hljs-keyword">this</span>.getMarkUp(), <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>);
},
<span class="hljs-attr">setUpEvents</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>, dialog = <span class="hljs-keyword">this</span>._mstrDlg;
<span class="hljs-keyword">var</span> okButton = $(<span class="hljs-string">"ok"</span>);
<span class="hljs-keyword">if</span> (okButton) {
okButton.on(<span class="hljs-string">"click"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">var</span> mapData = {};
<span class="hljs-keyword">if</span> (self.fillDataMap (mapData)) {
<span class="hljs-keyword">var</span> processor = <span class="hljs-keyword">new</span> GlideAjax(<span class="hljs-string">"ScrumAjaxAddReleaseTeamMembersProcessor"</span>);
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> strKey <span class="hljs-keyword">in</span> mapData) {
processor.addParam(strKey, mapData[strKey]);
}
self.showStatus(getMessage(<span class="hljs-string">"Adding group users..."</span>));
processor.getXML(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
self.refresh();
dialog.destroy();
});
} <span class="hljs-keyword">else</span> {
dialog.destroy();
}
});
}
<span class="hljs-keyword">var</span> cancelButton = $(<span class="hljs-string">"cancel"</span>);
<span class="hljs-keyword">if</span> (cancelButton) {
cancelButton.on(<span class="hljs-string">"click"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
dialog.destroy();
});
}
<span class="hljs-keyword">var</span> okNGButton = $(<span class="hljs-string">"okNG"</span>);
<span class="hljs-keyword">if</span> (okNGButton) {
okNGButton.on(<span class="hljs-string">"click"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
dialog.destroy();
});
}
<span class="hljs-keyword">var</span> cancelNGButton = $(<span class="hljs-string">"cancelNG"</span>);
<span class="hljs-keyword">if</span> (cancelNGButton) {
cancelNGButton.on(<span class="hljs-string">"click"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
dialog.destroy();
});
}
},
<span class="hljs-attr">refresh</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
GlideList2.get(<span class="hljs-string">"scrum_pp_team.scrum_pp_release_team_member.team"</span>).refresh();
},
<span class="hljs-attr">getScrumReleaseTeamSysId</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">return</span> g_form.getUniqueValue() + <span class="hljs-string">""</span>;
},
<span class="hljs-attr">getUserChosenGroupSysIds</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">return</span> $F(<span class="hljs-string">'groupId'</span>) + <span class="hljs-string">""</span>;
},
<span class="hljs-attr">showStatus</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">strMessage</span>) </span>{
$(<span class="hljs-string">"task_controls"</span>).update(strMessage);
},
<span class="hljs-attr">display</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">bIsVisible</span>) </span>{
$(<span class="hljs-string">"task_window"</span>).style.visibility = (bIsVisible ? <span class="hljs-string">"visible"</span> : <span class="hljs-string">"hidden"</span>);
},
<span class="hljs-attr">getRoleIds</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">var</span> arrRoleNames = [<span class="hljs-string">"scrum_user"</span>, <span class="hljs-string">"scrum_admin"</span>, <span class="hljs-string">"scrum_release_planner"</span>, <span class="hljs-string">"scrum_sprint_planner"</span>, <span class="hljs-string">"scrum_story_creator"</span>];
<span class="hljs-keyword">var</span> arrRoleIds = [];
<span class="hljs-keyword">var</span> record = <span class="hljs-keyword">new</span> GlideRecord (<span class="hljs-string">"sys_user_role"</span>);
record.addQuery (<span class="hljs-string">"name"</span>, <span class="hljs-string">"IN"</span>, arrRoleNames.join (<span class="hljs-string">","</span>));
record.query ();
<span class="hljs-keyword">while</span> (record.next ())
arrRoleIds.push (record.sys_id + <span class="hljs-string">""</span>);
<span class="hljs-keyword">return</span> arrRoleIds;
},
<span class="hljs-attr">hasScrumRole</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">roleSysId, arrScrumRoleSysIds</span>) </span>{
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> index = <span class="hljs-number">0</span>; index &lt; arrScrumRoleSysIds.length; ++index)
<span class="hljs-keyword">if</span> (arrScrumRoleSysIds[index] == <span class="hljs-string">""</span> + roleSysId)
<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
<span class="hljs-keyword">var</span> record = <span class="hljs-keyword">new</span> GlideRecord (<span class="hljs-string">"sys_user_role_contains"</span>);
record.addQuery(<span class="hljs-string">"role"</span>, roleSysId);
record.query ();
<span class="hljs-keyword">while</span> (record.next())
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.hasScrumRole (record.contains, arrScrumRoleSysIds))
<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
},
<span class="hljs-attr">getGroupIds</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">var</span> arrScrumRoleIds = <span class="hljs-keyword">this</span>.getRoleIds ();
<span class="hljs-keyword">var</span> arrGroupIds = [];
<span class="hljs-keyword">var</span> record = <span class="hljs-keyword">new</span> GlideRecord (<span class="hljs-string">"sys_group_has_role"</span>);
record.query ();
<span class="hljs-keyword">while</span> (record.next ())
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.hasScrumRole (record.role, arrScrumRoleIds))
arrGroupIds.push (record.group + <span class="hljs-string">""</span>);
<span class="hljs-keyword">return</span> arrGroupIds;
},
<span class="hljs-attr">getGroupInfo</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">var</span> mapGroupInfo = {};
<span class="hljs-keyword">var</span> arrRoleIds = <span class="hljs-keyword">this</span>.getRoleIds ();
<span class="hljs-keyword">var</span> arrGroupIds = <span class="hljs-keyword">this</span>.getGroupIds (arrRoleIds);
<span class="hljs-keyword">var</span> record = <span class="hljs-keyword">new</span> GlideRecord (<span class="hljs-string">"sys_user_group"</span>);
record.addQuery(<span class="hljs-string">"sys_id"</span>, <span class="hljs-string">"IN"</span>, arrGroupIds.join (<span class="hljs-string">","</span>));
record.query ();
<span class="hljs-keyword">while</span> (record.next ()) {
<span class="hljs-keyword">var</span> strName = record.name + <span class="hljs-string">""</span>;
<span class="hljs-keyword">var</span> strSysId = record.sys_id + <span class="hljs-string">""</span>;
mapGroupInfo [strName] = {<span class="hljs-attr">name</span>: strName, <span class="hljs-attr">sysid</span>: strSysId};
}
<span class="hljs-keyword">return</span> mapGroupInfo;
},
<span class="hljs-attr">getMarkUp</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">var</span> groupAjax = <span class="hljs-keyword">new</span> GlideAjax(<span class="hljs-string">'ScrumUserGroupsAjax'</span>);
groupAjax.addParam(<span class="hljs-string">'sysparm_name'</span>, <span class="hljs-string">'getGroupInfo'</span>);
groupAjax.getXML(<span class="hljs-keyword">this</span>.generateMarkUp.bind(<span class="hljs-keyword">this</span>));
},
<span class="hljs-attr">generateMarkUp</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) </span>{
<span class="hljs-keyword">var</span> mapGroupInfo = {};
<span class="hljs-keyword">var</span> groupData = response.responseXML.getElementsByTagName(<span class="hljs-string">"group"</span>);
<span class="hljs-keyword">var</span> strName, strSysId;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; groupData.length; i++) {
strName = groupData[i].getAttribute(<span class="hljs-string">"name"</span>);
strSysId = groupData[i].getAttribute(<span class="hljs-string">"sysid"</span>);
mapGroupInfo[strName] = {
<span class="hljs-attr">name</span>: strName,
<span class="hljs-attr">sysid</span>: strSysId
};
}
<span class="hljs-keyword">var</span> arrGroupNames = [];
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> strGroupName <span class="hljs-keyword">in</span> mapGroupInfo) {
arrGroupNames.push (strGroupName + <span class="hljs-string">""</span>);
}
arrGroupNames.sort ();
<span class="hljs-keyword">var</span> strMarkUp = <span class="hljs-string">""</span>;
<span class="hljs-keyword">if</span> (arrGroupNames.length &gt; <span class="hljs-number">0</span>) {
<span class="hljs-keyword">var</span> strTable = <span class="hljs-string">"&lt;div class='row'&gt;&lt;div class='form-group'&gt;&lt;span class='col-sm-12'&gt;&lt;select class='form-control' id='groupId'&gt;"</span>;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> nSlot = <span class="hljs-number">0</span>; nSlot &lt; arrGroupNames.length; ++nSlot) {
strName = arrGroupNames[nSlot];
strSysId = mapGroupInfo [strName].sysid;
strTable += <span class="hljs-string">"&lt;option value='"</span> + strSysId + <span class="hljs-string">"'&gt;"</span> + strName + <span class="hljs-string">"&lt;/option&gt;"</span>;
}
strTable += <span class="hljs-string">"&lt;/select&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;"</span>;
strMarkUp = <span class="hljs-string">"&lt;div id='task_controls'&gt;"</span> + strTable +
<span class="hljs-string">"&lt;div style='text-align:right;padding-top:20px;'&gt;"</span> +
<span class="hljs-string">"&lt;button id='cancel' class='btn btn-default' type='button'&gt;"</span> + getMessage(<span class="hljs-string">"Cancel"</span>) + <span class="hljs-string">"&lt;/button&gt;"</span>+
<span class="hljs-string">"&amp;nbsp;&amp;nbsp;&lt;button id='ok' class='btn btn-primary' type='button'&gt;"</span> + getMessage(<span class="hljs-string">"OK"</span>) + <span class="hljs-string">"&lt;/button&gt;"</span> +
<span class="hljs-string">"&lt;/div&gt;&lt;/div&gt;"</span>;
} <span class="hljs-keyword">else</span> {
strMarkUp = <span class="hljs-string">"&lt;div id='task_controls'&gt;&lt;p&gt;No groups with scrum_user role found&lt;/p&gt;"</span> +
<span class="hljs-string">"&lt;div style='text-align: right;padding-top:20px;'&gt;"</span> +
<span class="hljs-string">"&lt;button id='cancelNG' class='btn btn-default' type='button'&gt;"</span> + getMessage(<span class="hljs-string">"Cancel"</span>) + <span class="hljs-string">"&lt;/button&gt;"</span>+
<span class="hljs-string">"&amp;nbsp;&amp;nbsp;&lt;button id='okNG' class='btn btn-primary' type='button'&gt;"</span> + getMessage(<span class="hljs-string">"OK"</span>) + <span class="hljs-string">"&lt;/button&gt;"</span> +
<span class="hljs-string">"&lt;/div&gt;&lt;/div&gt;"</span>;
}
<span class="hljs-keyword">this</span>._mstrDlg.setBody(strMarkUp, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>);
<span class="hljs-keyword">this</span>.setUpEvents();
<span class="hljs-keyword">this</span>.display(<span class="hljs-literal">true</span>);
},
<span class="hljs-attr">fillDataMap</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">mapData</span>) </span>{
<span class="hljs-keyword">var</span> strChosenGroupSysId = <span class="hljs-keyword">this</span>.getUserChosenGroupSysIds ();
<span class="hljs-keyword">if</span> (strChosenGroupSysId) {
mapData.sysparm_name = <span class="hljs-string">"createReleaseTeamMembers"</span>;
mapData.sysparm_sys_id = <span class="hljs-keyword">this</span>.getScrumReleaseTeamSysId ();
mapData.sysparm_groups = strChosenGroupSysId;
<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
} <span class="hljs-keyword">else</span> {
<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}
}
};
<span class="hljs-comment">/*! RESOURCE: Validate Client Script Functions */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validateFunctionDeclaration</span>(<span class="hljs-params">fieldName, functionName</span>) </span>{
<span class="hljs-keyword">var</span> code = g_form.getValue(fieldName);
<span class="hljs-keyword">if</span> (code == <span class="hljs-string">""</span>)
<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
code = removeCommentsFromClientScript(code);
<span class="hljs-keyword">var</span> patternString = <span class="hljs-string">"function(\\s+)"</span> + functionName + <span class="hljs-string">"((\\s+)|\\(|\\[\r\n])"</span>;
<span class="hljs-keyword">var</span> validatePattern = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(patternString);
<span class="hljs-keyword">if</span> (!validatePattern.test(code)) {
<span class="hljs-keyword">var</span> msg = <span class="hljs-keyword">new</span> GwtMessage().getMessage(<span class="hljs-string">'Missing function declaration for'</span>) + <span class="hljs-string">' '</span> + functionName;
g_form.showErrorBox(fieldName, msg);
<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}
<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validateNoServerObjectsInClientScript</span>(<span class="hljs-params">fieldName</span>) </span>{
<span class="hljs-keyword">var</span> code = g_form.getValue(fieldName);
<span class="hljs-keyword">if</span> (code == <span class="hljs-string">""</span>)
<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
code = removeCommentsFromClientScript(code);
<span class="hljs-keyword">var</span> doubleQuotePattern = <span class="hljs-regexp">/"[^"\r\n]*"/g</span>;
code = code.replace(doubleQuotePattern,<span class="hljs-string">""</span>);
<span class="hljs-keyword">var</span> singleQuotePattern = <span class="hljs-regexp">/'[^'\r\n]*'/g</span>;
code = code.replace(singleQuotePattern,<span class="hljs-string">""</span>);
<span class="hljs-keyword">var</span> rc = <span class="hljs-literal">true</span>;
<span class="hljs-keyword">var</span> gsPattern = <span class="hljs-regexp">/(\s|\W)gs\./</span>;
<span class="hljs-keyword">if</span> (gsPattern.test(code)) {
<span class="hljs-keyword">var</span> msg = <span class="hljs-keyword">new</span> GwtMessage().getMessage(<span class="hljs-string">'The object "gs" should not be used in client scripts.'</span>);
g_form.showErrorBox(fieldName, msg);
rc = <span class="hljs-literal">false</span>;
}
<span class="hljs-keyword">var</span> currentPattern = <span class="hljs-regexp">/(\s|\W)current\./</span>;
<span class="hljs-keyword">if</span> (currentPattern.test(code)) {
<span class="hljs-keyword">var</span> msg = <span class="hljs-keyword">new</span> GwtMessage().getMessage(<span class="hljs-string">'The object "current" should not be used in client scripts.'</span>);
g_form.showErrorBox(fieldName, msg);
rc = <span class="hljs-literal">false</span>;
}
<span class="hljs-keyword">return</span> rc;
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validateUIScriptIIFEPattern</span>(<span class="hljs-params">fieldName, scopeName, scriptName</span>) </span>{
<span class="hljs-keyword">var</span> code = g_form.getValue(fieldName);
<span class="hljs-keyword">var</span> rc = <span class="hljs-literal">true</span>;
<span class="hljs-keyword">if</span>(<span class="hljs-string">"global"</span> == scopeName)
<span class="hljs-keyword">return</span> rc;
code = removeCommentsFromClientScript(code);
code = removeSpacesFromClientScript(code);
code = removeNewlinesFromClientScript(code);
<span class="hljs-keyword">var</span> requiredStart =  <span class="hljs-string">"var"</span>+scopeName+<span class="hljs-string">"="</span>+scopeName+<span class="hljs-string">"||{};"</span>+scopeName+<span class="hljs-string">"."</span>+scriptName+<span class="hljs-string">"=(function(){\"usestrict\";"</span>;
<span class="hljs-keyword">var</span> requiredEnd = <span class="hljs-string">"})();"</span>;
<span class="hljs-keyword">if</span>(!code.startsWith(requiredStart)) {
<span class="hljs-keyword">var</span> msg = <span class="hljs-keyword">new</span> GwtMessage().getMessage(<span class="hljs-string">"Missing closure assignment."</span>);
g_form.showErrorBox(fieldName,msg);
rc = <span class="hljs-literal">false</span>;
}
<span class="hljs-keyword">if</span>(!code.endsWith(requiredEnd)) {
<span class="hljs-keyword">var</span> msg = <span class="hljs-keyword">new</span> GwtMessage().getMessage(<span class="hljs-string">"Missing immediately-invoked function declaration end."</span>);
g_form.showErrorBox(fieldName,msg);
rc = <span class="hljs-literal">false</span>;
}
<span class="hljs-keyword">return</span> rc;
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validateNotCallingFunction</span> (<span class="hljs-params">fieldName, functionName</span>) </span>{
<span class="hljs-keyword">var</span> code = g_form.getValue(fieldName);
<span class="hljs-keyword">var</span> rc = <span class="hljs-literal">true</span>;
<span class="hljs-keyword">var</span> reg = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(functionName, <span class="hljs-string">"g"</span>);
<span class="hljs-keyword">var</span> matches;
code = removeCommentsFromClientScript(code);
<span class="hljs-keyword">if</span> (code == <span class="hljs-string">''</span>)
<span class="hljs-keyword">return</span> rc;
matches = code.match(reg);
rc = (matches &amp;&amp; (matches.length == <span class="hljs-number">1</span>));
<span class="hljs-keyword">if</span>(!rc) {
<span class="hljs-keyword">var</span> msg = <span class="hljs-string">"Do not explicitly call the "</span> + functionName + <span class="hljs-string">" function in your business rule. It will be called automatically at execution time."</span>;
msg = <span class="hljs-keyword">new</span> GwtMessage().getMessage(msg);
g_form.showErrorBox(fieldName,msg);
}
<span class="hljs-keyword">return</span> rc;
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeCommentsFromClientScript</span>(<span class="hljs-params">code</span>) </span>{
<span class="hljs-keyword">var</span> pattern1 = <span class="hljs-regexp">/\/\*(.|[\r\n])*?\*\//g</span>;
code = code.replace(pattern1,<span class="hljs-string">""</span>);
<span class="hljs-keyword">var</span> pattern2 = <span class="hljs-regexp">/\/\/.*/g</span>;
code = code.replace(pattern2,<span class="hljs-string">""</span>);
<span class="hljs-keyword">return</span> code;
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeSpacesFromClientScript</span>(<span class="hljs-params">code</span>) </span>{
<span class="hljs-keyword">var</span> pattern = <span class="hljs-regexp">/\s*/g</span>;
<span class="hljs-keyword">return</span> code.replace(pattern,<span class="hljs-string">""</span>);
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeNewlinesFromClientScript</span>(<span class="hljs-params">code</span>) </span>{
<span class="hljs-keyword">var</span> pattern = <span class="hljs-regexp">/[\r\n]*/g</span>;
<span class="hljs-keyword">return</span> code.replace(pattern,<span class="hljs-string">""</span>);
}
<span class="hljs-comment">/*! RESOURCE: ScrumTaskDialog */</span>
<span class="hljs-keyword">var</span> ScrumTaskDialog = Class.create(GlideDialogWindow, {
<span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> g_list != <span class="hljs-string">"undefined"</span>)
<span class="hljs-keyword">this</span>.list = g_list;
<span class="hljs-keyword">else</span>
<span class="hljs-keyword">this</span>.list = <span class="hljs-literal">null</span>;
<span class="hljs-keyword">this</span>.storyID = <span class="hljs-keyword">typeof</span> rowSysId == <span class="hljs-string">'undefined'</span> ? (gel(<span class="hljs-string">'sys_uniqueValue'</span>) ? gel(<span class="hljs-string">'sys_uniqueValue'</span>).value : <span class="hljs-string">""</span>) : rowSysId;
<span class="hljs-keyword">this</span>.setUpFacade();
<span class="hljs-keyword">this</span>.setUpEvents();
<span class="hljs-keyword">this</span>.display(<span class="hljs-literal">true</span>);
<span class="hljs-keyword">this</span>.checkOKButton();
<span class="hljs-keyword">this</span>.setWidth(<span class="hljs-number">155</span>);
},
<span class="hljs-attr">toggleOKButton</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">visible</span>)</span>{
$(<span class="hljs-string">"ok"</span>).style.display = (visible?<span class="hljs-string">"inline"</span>:<span class="hljs-string">"none"</span>);
},
<span class="hljs-attr">setUpFacade</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
GlideDialogWindow.prototype.initialize.call(<span class="hljs-keyword">this</span>, <span class="hljs-string">"task_window"</span>, <span class="hljs-literal">false</span>);
<span class="hljs-keyword">this</span>.setTitle(getMessage(<span class="hljs-string">"Add Scrum Tasks"</span>));
<span class="hljs-keyword">var</span> mapCount = <span class="hljs-keyword">this</span>.getTypeCounts();
<span class="hljs-keyword">this</span>.setBody(<span class="hljs-keyword">this</span>.getMarkUp(mapCount), <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>);
},
<span class="hljs-attr">checkOKButton</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
<span class="hljs-keyword">var</span> visible = <span class="hljs-literal">false</span>;
<span class="hljs-keyword">var</span> thisDialog = <span class="hljs-keyword">this</span>;
<span class="hljs-keyword">this</span>.container.select(<span class="hljs-string">"select"</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">elem</span>)</span>{
<span class="hljs-keyword">if</span> (elem.value + <span class="hljs-string">""</span> != <span class="hljs-string">"0"</span>)
visible = <span class="hljs-literal">true</span>;
<span class="hljs-keyword">if</span> (!elem.onChangeAdded){
elem.onChangeAdded = <span class="hljs-literal">true</span>;
elem.on(<span class="hljs-string">"change"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
thisDialog.checkOKButton();
});
}
});
<span class="hljs-keyword">this</span>.toggleOKButton(visible);
},
<span class="hljs-attr">getTypeCounts</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">var</span> mapLabel = <span class="hljs-keyword">this</span>.getLabels(<span class="hljs-string">"rm_scrum_task"</span>, <span class="hljs-string">"type"</span>);
<span class="hljs-keyword">var</span> mapCount = {};
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> strKey <span class="hljs-keyword">in</span> mapLabel) {
mapCount[strKey] = getPreference(<span class="hljs-string">"com.snc.sdlc.scrum.pp.tasks."</span> + strKey, <span class="hljs-number">0</span>);
}
<span class="hljs-keyword">return</span> mapCount;
},
<span class="hljs-attr">setUpEvents</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">var</span> dialog = <span class="hljs-keyword">this</span>;
$(<span class="hljs-string">"ok"</span>).on(<span class="hljs-string">"click"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">var</span> mapTaskData = {};
<span class="hljs-keyword">if</span> (dialog.fillDataMap(mapTaskData)) {
<span class="hljs-keyword">var</span> taskProducer = <span class="hljs-keyword">new</span> GlideAjax(<span class="hljs-string">"ScrumAjaxTaskProducer"</span>);
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> strKey <span class="hljs-keyword">in</span> mapTaskData) {
taskProducer.addParam(<span class="hljs-string">"sysparm_"</span> + strKey, mapTaskData[strKey]);
}
dialog.showStatus(<span class="hljs-string">"Adding tasks..."</span>);
taskProducer.getXML(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
dialog.refresh();
dialog._onCloseClicked();
});
} <span class="hljs-keyword">else</span> {
dialog._onCloseClicked();
}
});
$(<span class="hljs-string">"cancel"</span>).on(<span class="hljs-string">"click"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
dialog._onCloseClicked();
});
},
<span class="hljs-attr">refresh</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.list)
<span class="hljs-keyword">this</span>.list.refresh();
<span class="hljs-keyword">else</span>
<span class="hljs-keyword">this</span>.reloadList(<span class="hljs-string">"rm_story.rm_scrum_task.story"</span>);
},
<span class="hljs-attr">getSysID</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.storyID;
},
<span class="hljs-attr">fillDataMap</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">mapTaskData</span>) </span>{
<span class="hljs-keyword">var</span> bTasksRequired = <span class="hljs-literal">false</span>;
mapTaskData.name = <span class="hljs-string">"createTasks"</span>;
mapTaskData.sys_id = <span class="hljs-keyword">this</span>.getSysID();
<span class="hljs-keyword">var</span> mapDetails = <span class="hljs-keyword">this</span>.getLabels(<span class="hljs-string">"rm_scrum_task"</span>, <span class="hljs-string">"type"</span>);
<span class="hljs-keyword">var</span> arrTaskTypes = [];
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> mapDetails) {
arrTaskTypes.push(key);
}
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> nSlot = <span class="hljs-number">0</span>; nSlot &lt; arrTaskTypes.length; ++nSlot) {
<span class="hljs-keyword">var</span> strTaskType = arrTaskTypes[nSlot];
<span class="hljs-keyword">var</span> strTaskData = $(strTaskType).getValue();
mapTaskData[strTaskType] = strTaskData;
setPreference(<span class="hljs-string">"com.snc.sdlc.scrum.pp.tasks."</span> + strTaskType, strTaskData);
<span class="hljs-keyword">if</span> (strTaskData != <span class="hljs-string">"0"</span>) {
bTasksRequired = <span class="hljs-literal">true</span>;
}
}
<span class="hljs-keyword">return</span> bTasksRequired;
},
<span class="hljs-attr">getMarkUp</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">mapCounts</span>) </span>{
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getSelectMarkUp</span>(<span class="hljs-params">strFieldId, nValue</span>) </span>{
<span class="hljs-keyword">var</span> strMarkUp = <span class="hljs-string">"&lt;select id='"</span> + strFieldId + <span class="hljs-string">"'&gt;"</span>;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> nSlot = <span class="hljs-number">0</span>; nSlot &lt;= <span class="hljs-number">10</span>; nSlot++) {
<span class="hljs-keyword">if</span> (nValue != <span class="hljs-number">0</span> &amp;&amp; nValue == nSlot) {
strMarkUp += <span class="hljs-string">"&lt;option value='"</span> + nSlot + <span class="hljs-string">"' + "</span> + <span class="hljs-string">"selected='selected'"</span> + <span class="hljs-string">"&gt;"</span> + nSlot + <span class="hljs-string">"&lt;/choice&gt;"</span>;
} <span class="hljs-keyword">else</span> {
strMarkUp += <span class="hljs-string">"&lt;option value='"</span> + nSlot + <span class="hljs-string">"'&gt;"</span> + nSlot + <span class="hljs-string">"&lt;/choice&gt;"</span>;
}
}
strMarkUp += <span class="hljs-string">"&lt;/select&gt;"</span>;
<span class="hljs-keyword">return</span> strMarkUp;
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildRow</span>(<span class="hljs-params">strMessage, strLabel, nValue</span>) </span>{
<span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;tr&gt;&lt;td&gt;&lt;label for='"</span> + strLabel + <span class="hljs-string">"'&gt;"</span> + getMessage(strMessage) + <span class="hljs-string">"&lt;/label&gt;&lt;/td&gt;&lt;td&gt;"</span> + getSelectMarkUp(strLabel, nValue) +<span class="hljs-string">"&lt;/td&gt;&lt;/tr&gt;"</span>;
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildTable</span>(<span class="hljs-params">mapDetails, mapCounts</span>) </span>{
<span class="hljs-keyword">var</span> arrDetails = [];
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> strKey <span class="hljs-keyword">in</span> mapDetails) {
arrDetails.push(strKey + <span class="hljs-string">""</span>);
}
arrDetails.sort();
<span class="hljs-keyword">var</span> strBuf = <span class="hljs-string">"&lt;table&gt;"</span>;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> index = <span class="hljs-number">0</span>; index &lt; arrDetails.length; ++index) {
<span class="hljs-keyword">var</span> strTitleCase = arrDetails[index].charAt(<span class="hljs-number">0</span>).toString().toUpperCase() + arrDetails[index].substring(<span class="hljs-number">1</span>);
<span class="hljs-keyword">var</span> nCount = mapCounts[arrDetails[index]];
strBuf += buildRow(strTitleCase, arrDetails[index], nCount);
}
strBuf += <span class="hljs-string">"&lt;/table&gt;"</span>;
<span class="hljs-keyword">return</span> strBuf;
}
<span class="hljs-keyword">var</span> mapLabels = <span class="hljs-keyword">this</span>.getLabels(<span class="hljs-string">"rm_scrum_task"</span>, <span class="hljs-string">"type"</span>);
<span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;div id='task_controls'&gt;"</span> + buildTable(mapLabels, mapCounts) +
<span class="hljs-string">"&lt;button id='ok' type='button'&gt;"</span> + getMessage(<span class="hljs-string">'OK'</span>) + <span class="hljs-string">"&lt;/button&gt;"</span> +
<span class="hljs-string">"&lt;button id='cancel' type='button'&gt;"</span> + getMessage(<span class="hljs-string">'Cancel'</span>) + <span class="hljs-string">"&lt;/button&gt;&lt;/div&gt;"</span>;
},
<span class="hljs-attr">reloadForm</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-built_in">document</span>.location.href = <span class="hljs-built_in">document</span>.location.href;
},
<span class="hljs-attr">reloadList</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">strListName</span>) </span>{
GlideList2.get(strListName).refresh();
},
<span class="hljs-attr">showStatus</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">strMessage</span>) </span>{
$(<span class="hljs-string">"task_controls"</span>).update(<span class="hljs-string">"Loading..."</span>);
},
<span class="hljs-attr">display</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">bIsVisible</span>) </span>{
$(<span class="hljs-string">"task_window"</span>).style.visibility = (bIsVisible ? <span class="hljs-string">"visible"</span> : <span class="hljs-string">"hidden"</span>);
},
<span class="hljs-attr">getLabels</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">strTable, strAttribute</span>) </span>{
<span class="hljs-keyword">var</span> taskProducer = <span class="hljs-keyword">new</span> GlideAjax(<span class="hljs-string">"ScrumAjaxTaskProducer"</span>);
taskProducer.addParam(<span class="hljs-string">"sysparm_name"</span> ,<span class="hljs-string">"getLabels"</span>);
taskProducer.addParam(<span class="hljs-string">"sysparm_table"</span>, strTable);
taskProducer.addParam(<span class="hljs-string">"sysparm_attribute"</span>, strAttribute);
<span class="hljs-keyword">var</span> result = taskProducer.getXMLWait();
<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._parseResponse(result);
},
<span class="hljs-attr">_parseResponse</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">resultXML</span>) </span>{
<span class="hljs-keyword">var</span> jsonStr = resultXML.documentElement.getAttribute(<span class="hljs-string">"answer"</span>);
<span class="hljs-keyword">var</span> map = (isMSIE7 || isMSIE8) ? <span class="hljs-built_in">eval</span>(<span class="hljs-string">"("</span> + jsonStr + <span class="hljs-string">")"</span>) : <span class="hljs-built_in">JSON</span>.parse(jsonStr);
<span class="hljs-keyword">return</span> map;
}
});
<span class="hljs-comment">/*! RESOURCE: AddScrumTask */</span>
<span class="hljs-keyword">var</span> AddScrumTask = Class.create();
AddScrumTask.prototype = {
<span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">this</span>.list = (<span class="hljs-keyword">typeof</span> g_list != <span class="hljs-string">"undefined"</span>) ? g_list : <span class="hljs-literal">null</span>;
<span class="hljs-keyword">this</span>.storyID = <span class="hljs-keyword">typeof</span> rowSysId == <span class="hljs-string">'undefined'</span> ? (gel(<span class="hljs-string">'sys_uniqueValue'</span>) ? gel(<span class="hljs-string">'sys_uniqueValue'</span>).value : <span class="hljs-string">""</span>) : rowSysId;
<span class="hljs-keyword">this</span>.setUpFacade();
<span class="hljs-keyword">this</span>.setUpEvents();
<span class="hljs-keyword">this</span>.display(<span class="hljs-literal">true</span>);
<span class="hljs-keyword">this</span>.checkOKButton();
},
<span class="hljs-attr">toggleOKButton</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">visible</span>) </span>{
$(<span class="hljs-string">"ok"</span>).style.display = (visible?<span class="hljs-string">"inline"</span>:<span class="hljs-string">"none"</span>);
},
<span class="hljs-attr">setUpFacade</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">var</span> dialogClass = <span class="hljs-built_in">window</span>.GlideModal ? GlideModal : GlideDialogWindow;
<span class="hljs-keyword">this</span>.dialog = <span class="hljs-keyword">new</span> dialogClass(<span class="hljs-string">"task_window"</span>);
<span class="hljs-keyword">this</span>.dialog.setTitle(getMessage(<span class="hljs-string">"Add Scrum Tasks"</span>));
<span class="hljs-keyword">var</span> mapCount = <span class="hljs-keyword">this</span>.getTypeCounts();
<span class="hljs-keyword">this</span>.dialog.setBody(<span class="hljs-keyword">this</span>.getMarkUp(mapCount), <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>);
},
<span class="hljs-attr">checkOKButton</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">var</span> visible = <span class="hljs-literal">false</span>;
<span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
$(<span class="hljs-string">'task_window'</span>).select(<span class="hljs-string">"select"</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">elem</span>) </span>{
<span class="hljs-keyword">if</span> (elem.value + <span class="hljs-string">""</span> != <span class="hljs-string">"0"</span>) visible = <span class="hljs-literal">true</span>;
<span class="hljs-keyword">if</span> (!elem.onChangeAdded) {
elem.onChangeAdded = <span class="hljs-literal">true</span>;
elem.on(<span class="hljs-string">"change"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
self.checkOKButton();
});
}
});
<span class="hljs-keyword">this</span>.toggleOKButton(visible);
},
<span class="hljs-attr">getTypeCounts</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">var</span> mapLabel = <span class="hljs-keyword">this</span>.getLabels(<span class="hljs-string">"rm_scrum_task"</span>, <span class="hljs-string">"type"</span>);
<span class="hljs-keyword">var</span> mapCount = {};
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> strKey <span class="hljs-keyword">in</span> mapLabel) {
mapCount[strKey] = getPreference(<span class="hljs-string">"com.snc.sdlc.scrum.pp.tasks."</span> + strKey, <span class="hljs-number">0</span>);
}
<span class="hljs-keyword">return</span> mapCount;
},
<span class="hljs-attr">setUpEvents</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>, dialog = <span class="hljs-keyword">this</span>.dialog;
$(<span class="hljs-string">"ok"</span>).on(<span class="hljs-string">"click"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">var</span> mapTaskData = {};
<span class="hljs-keyword">if</span> (self.fillDataMap(mapTaskData)) {
<span class="hljs-keyword">var</span> taskProducer = <span class="hljs-keyword">new</span> GlideAjax(<span class="hljs-string">"ScrumAjaxTaskProducer"</span>);
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> strKey <span class="hljs-keyword">in</span> mapTaskData) {
taskProducer.addParam(<span class="hljs-string">"sysparm_"</span> + <span class="hljs-built_in">encodeURIComponent</span>(strKey), mapTaskData[strKey]);
}
self.showStatus(<span class="hljs-string">"Adding tasks..."</span>);
taskProducer.getXML(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
self.refresh();
dialog.destroy();
});
} <span class="hljs-keyword">else</span> {
dialog.destroy();
}
});
$(<span class="hljs-string">"cancel"</span>).on(<span class="hljs-string">"click"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
dialog.destroy();
});
},
<span class="hljs-attr">refresh</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.list) <span class="hljs-keyword">this</span>.list.refresh();
<span class="hljs-keyword">else</span> <span class="hljs-keyword">this</span>.reloadList(<span class="hljs-string">"rm_story.rm_scrum_task.story"</span>);
},
<span class="hljs-attr">getSysID</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.storyID;
},
<span class="hljs-attr">fillDataMap</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">mapTaskData</span>) </span>{
<span class="hljs-keyword">var</span> bTasksRequired = <span class="hljs-literal">false</span>;
mapTaskData.name = <span class="hljs-string">"createTasks"</span>;
mapTaskData.sys_id = <span class="hljs-keyword">this</span>.getSysID();
<span class="hljs-keyword">var</span> mapDetails = <span class="hljs-keyword">this</span>.getLabels(<span class="hljs-string">"rm_scrum_task"</span>, <span class="hljs-string">"type"</span>);
<span class="hljs-keyword">var</span> arrTaskTypes = [];
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> mapDetails) {
arrTaskTypes.push(key);
}
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> nSlot = <span class="hljs-number">0</span>; nSlot &lt; arrTaskTypes.length; ++nSlot) {
<span class="hljs-keyword">var</span> strTaskType = arrTaskTypes[nSlot];
<span class="hljs-keyword">var</span> strTaskData = $(strTaskType).getValue();
mapTaskData[strTaskType] = strTaskData;
setPreference(<span class="hljs-string">"com.snc.sdlc.scrum.pp.tasks."</span> + strTaskType, strTaskData);
<span class="hljs-keyword">if</span> (strTaskData != <span class="hljs-string">"0"</span>) {
bTasksRequired = <span class="hljs-literal">true</span>;
}
}
<span class="hljs-keyword">return</span> bTasksRequired;
},
<span class="hljs-attr">getMarkUp</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">mapCounts</span>) </span>{
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getSelectMarkUp</span>(<span class="hljs-params">strFieldId, nValue</span>) </span>{
<span class="hljs-keyword">var</span> strMarkUp = <span class="hljs-string">'&lt;select class="form-control select2" id="'</span> + strFieldId + <span class="hljs-string">'" name="'</span> + strFieldId + <span class="hljs-string">'"&gt;'</span>;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> nSlot = <span class="hljs-number">0</span>; nSlot &lt;= <span class="hljs-number">10</span>; nSlot++) {
<span class="hljs-keyword">if</span> (nValue != <span class="hljs-number">0</span> &amp;&amp; nValue == nSlot) {
strMarkUp += <span class="hljs-string">'&lt;option value="'</span>+nSlot+<span class="hljs-string">'" selected="selected"&gt;'</span>+nSlot+<span class="hljs-string">'&lt;/option&gt;'</span>;
} <span class="hljs-keyword">else</span> {
strMarkUp += <span class="hljs-string">'&lt;option value="'</span>+nSlot+<span class="hljs-string">'"&gt;'</span>+nSlot+<span class="hljs-string">'&lt;/option&gt;'</span>;
}
}
strMarkUp += <span class="hljs-string">"&lt;/select&gt;"</span>;
<span class="hljs-keyword">return</span> strMarkUp;
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildRow</span>(<span class="hljs-params">strMessage, nValue</span>) </span>{
<span class="hljs-keyword">var</span> row = <span class="hljs-string">''</span>;
row += <span class="hljs-string">'&lt;div class="row" style="padding-top:10px;"&gt;'</span>;
row +=     <span class="hljs-string">'&lt;div class="form-group"&gt;'</span>;
row +=         <span class="hljs-string">'&lt;label class="control-label col-sm-3" for="'</span>+strMessage+<span class="hljs-string">'" style="white-space:nowrap;"&gt;'</span>;
row +=             getMessage(strMessage);
row +=         <span class="hljs-string">'&lt;/label&gt;'</span>;
row +=         <span class="hljs-string">'&lt;span class="col-sm-9"&gt;'</span>;
row +=             getSelectMarkUp(strMessage, nValue);
row +=         <span class="hljs-string">'&lt;/span&gt;'</span>;
row +=     <span class="hljs-string">'&lt;/div&gt;'</span>;
row += <span class="hljs-string">'&lt;/div&gt;'</span>;
<span class="hljs-keyword">return</span> row;
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildTable</span>(<span class="hljs-params">mapDetails, mapCounts</span>) </span>{
<span class="hljs-keyword">var</span> arrDetails = [];
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> strKey <span class="hljs-keyword">in</span> mapDetails) {
arrDetails.push(strKey + <span class="hljs-string">""</span>);
}
arrDetails.sort();
<span class="hljs-keyword">var</span> strBuf = <span class="hljs-string">''</span>;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> index = <span class="hljs-number">0</span>; index &lt; arrDetails.length; ++index) {
<span class="hljs-keyword">var</span> nCount = mapCounts[arrDetails[index]];
strBuf += buildRow(arrDetails[index], nCount);
}
strBuf += <span class="hljs-string">''</span>;
<span class="hljs-keyword">return</span> strBuf;
}
<span class="hljs-keyword">var</span> mapLabels = <span class="hljs-keyword">this</span>.getLabels(<span class="hljs-string">"rm_scrum_task"</span>, <span class="hljs-string">"type"</span>);
<span class="hljs-keyword">return</span> buildTable(mapLabels, mapCounts) + <span class="hljs-string">"&lt;div id='task_controls' style='text-align:right;padding-top:20px;'&gt;"</span> +
<span class="hljs-string">"&lt;button id='cancel' type='button' class='btn btn-default'&gt;"</span> + getMessage(<span class="hljs-string">'Cancel'</span>) + <span class="hljs-string">"&lt;/button&gt;"</span> +
<span class="hljs-string">"&amp;nbsp;&amp;nbsp;&lt;button id='ok' type='button' class='btn btn-primary'&gt;"</span> + getMessage(<span class="hljs-string">'OK'</span>) + <span class="hljs-string">"&lt;/button&gt;&lt;/div&gt;"</span>;
},
<span class="hljs-attr">reloadForm</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-built_in">document</span>.location.href = <span class="hljs-built_in">document</span>.location.href;
},
<span class="hljs-attr">reloadList</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">strListName</span>) </span>{
<span class="hljs-keyword">var</span> list = GlideList2.get(strListName);
<span class="hljs-keyword">if</span>(list)
list.refresh();
},
<span class="hljs-attr">showStatus</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">strMessage</span>) </span>{
$(<span class="hljs-string">"task_controls"</span>).update(<span class="hljs-string">"Loading..."</span>);
},
<span class="hljs-attr">display</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">bIsVisible</span>) </span>{
$(<span class="hljs-string">"task_window"</span>).style.visibility = (bIsVisible ? <span class="hljs-string">"visible"</span> : <span class="hljs-string">"hidden"</span>);
},
<span class="hljs-attr">getLabels</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">strTable, strAttribute</span>) </span>{
<span class="hljs-keyword">var</span> taskProducer = <span class="hljs-keyword">new</span> GlideAjax(<span class="hljs-string">"ScrumAjaxTaskProducer"</span>);
taskProducer.addParam(<span class="hljs-string">"sysparm_name"</span> ,<span class="hljs-string">"getLabels"</span>);
taskProducer.addParam(<span class="hljs-string">"sysparm_table"</span>, strTable);
taskProducer.addParam(<span class="hljs-string">"sysparm_attribute"</span>, strAttribute);
<span class="hljs-keyword">var</span> result = taskProducer.getXMLWait();
<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._parseResponse(result);
},
<span class="hljs-attr">_parseResponse</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">resultXML</span>) </span>{
<span class="hljs-keyword">var</span> jsonStr = resultXML.documentElement.getAttribute(<span class="hljs-string">"answer"</span>);
<span class="hljs-keyword">var</span> map = <span class="hljs-built_in">JSON</span>.parse(jsonStr);
<span class="hljs-keyword">return</span> map;
}
};
<span class="hljs-comment">/*! RESOURCE: UI Action Context Menu */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showUIActionContext</span>(<span class="hljs-params">event</span>) </span>{
<span class="hljs-keyword">if</span> (!g_user.hasRole(<span class="hljs-string">"ui_action_admin"</span>))
<span class="hljs-keyword">return</span>;
<span class="hljs-keyword">var</span> element = Event.element(event);
<span class="hljs-keyword">if</span> (element.tagName.toLowerCase() == <span class="hljs-string">"span"</span>)
element = element.parentNode;
<span class="hljs-keyword">var</span> id = element.getAttribute(<span class="hljs-string">"gsft_id"</span>);
<span class="hljs-keyword">var</span> mcm = <span class="hljs-keyword">new</span> GwtContextMenu(<span class="hljs-string">'context_menu_action_'</span> + id);
mcm.clear();
mcm.addURL(getMessage(<span class="hljs-string">'Edit UI Action'</span>), <span class="hljs-string">"sys_ui_action.do?sys_id="</span> + id, <span class="hljs-string">"gsft_main"</span>);
contextShow(event, mcm.getID(), <span class="hljs-number">500</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
Event.stop(event);
}
addLoadEvent(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-built_in">document</span>.on(<span class="hljs-string">'contextmenu'</span>, <span class="hljs-string">'.action_context'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">evt, element</span>) </span>{
showUIActionContext(evt);
});
});
<span class="hljs-comment">/*! RESOURCE: AddMembersFromGroup */</span>
<span class="hljs-keyword">var</span> AddMembersFromGroup = Class.create(GlideDialogWindow, {
<span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">this</span>.setUpFacade();
},
<span class="hljs-attr">setUpFacade</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
GlideDialogWindow.prototype.initialize.call(<span class="hljs-keyword">this</span>, <span class="hljs-string">"task_window"</span>, <span class="hljs-literal">false</span>);
<span class="hljs-keyword">this</span>.setTitle(getMessage(<span class="hljs-string">"Add Members From Group"</span>));
<span class="hljs-keyword">this</span>.setBody(<span class="hljs-keyword">this</span>.getMarkUp(), <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>);
},
<span class="hljs-attr">setUpEvents</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">var</span> dialog = <span class="hljs-keyword">this</span>;
<span class="hljs-keyword">var</span> okButton = $(<span class="hljs-string">"ok"</span>);
<span class="hljs-keyword">if</span> (okButton) {
okButton.on(<span class="hljs-string">"click"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">var</span> mapData = {};
<span class="hljs-keyword">if</span> (dialog.fillDataMap (mapData)) {
<span class="hljs-keyword">var</span> processor = <span class="hljs-keyword">new</span> GlideAjax(<span class="hljs-string">"ScrumAjaxAddReleaseTeamMembersProcessor"</span>);
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> strKey <span class="hljs-keyword">in</span> mapData) {
processor.addParam(strKey, mapData[strKey]);
}
dialog.showStatus(getMessage(<span class="hljs-string">"Adding group users..."</span>));
processor.getXML(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
dialog.refresh();
dialog._onCloseClicked();
});
} <span class="hljs-keyword">else</span> {
dialog._onCloseClicked();
}
});
}
<span class="hljs-keyword">var</span> cancelButton = $(<span class="hljs-string">"cancel"</span>);
<span class="hljs-keyword">if</span> (cancelButton) {
cancelButton.on(<span class="hljs-string">"click"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
dialog._onCloseClicked();
});
}
<span class="hljs-keyword">var</span> okNGButton = $(<span class="hljs-string">"okNG"</span>);
<span class="hljs-keyword">if</span> (okNGButton) {
okNGButton.on(<span class="hljs-string">"click"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
dialog._onCloseClicked();
});
}
<span class="hljs-keyword">var</span> cancelNGButton = $(<span class="hljs-string">"cancelNG"</span>);
<span class="hljs-keyword">if</span> (cancelNGButton) {
cancelNGButton.on(<span class="hljs-string">"click"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
dialog._onCloseClicked();
});
}
},
<span class="hljs-attr">refresh</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
GlideList2.get(<span class="hljs-string">"scrum_pp_team.scrum_pp_release_team_member.team"</span>).refresh();
},
<span class="hljs-attr">getScrumReleaseTeamSysId</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">return</span> g_form.getUniqueValue() + <span class="hljs-string">""</span>;
},
<span class="hljs-attr">getUserChosenGroupSysIds</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">return</span> $F(<span class="hljs-string">'groupId'</span>) + <span class="hljs-string">""</span>;
},
<span class="hljs-attr">showStatus</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">strMessage</span>) </span>{
$(<span class="hljs-string">"task_controls"</span>).update(strMessage);
},
<span class="hljs-attr">display</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">bIsVisible</span>) </span>{
$(<span class="hljs-string">"task_window"</span>).style.visibility = (bIsVisible ? <span class="hljs-string">"visible"</span> : <span class="hljs-string">"hidden"</span>);
},
<span class="hljs-attr">getRoleIds</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">var</span> arrRoleNames = [<span class="hljs-string">"scrum_user"</span>, <span class="hljs-string">"scrum_admin"</span>, <span class="hljs-string">"scrum_release_planner"</span>, <span class="hljs-string">"scrum_sprint_planner"</span>, <span class="hljs-string">"scrum_story_creator"</span>];
<span class="hljs-keyword">var</span> arrRoleIds = [];
<span class="hljs-keyword">var</span> record = <span class="hljs-keyword">new</span> GlideRecord (<span class="hljs-string">"sys_user_role"</span>);
record.addQuery (<span class="hljs-string">"name"</span>, <span class="hljs-string">"IN"</span>, arrRoleNames.join (<span class="hljs-string">","</span>));
record.query ();
<span class="hljs-keyword">while</span> (record.next ())
arrRoleIds.push (record.sys_id + <span class="hljs-string">""</span>);
<span class="hljs-keyword">return</span> arrRoleIds;
},
<span class="hljs-attr">hasScrumRole</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">roleSysId, arrScrumRoleSysIds</span>) </span>{
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> index = <span class="hljs-number">0</span>; index &lt; arrScrumRoleSysIds.length; ++index)
<span class="hljs-keyword">if</span> (arrScrumRoleSysIds[index] == <span class="hljs-string">""</span> + roleSysId)
<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
<span class="hljs-keyword">var</span> record = <span class="hljs-keyword">new</span> GlideRecord (<span class="hljs-string">"sys_user_role_contains"</span>);
record.addQuery(<span class="hljs-string">"role"</span>, roleSysId);
record.query ();
<span class="hljs-keyword">while</span> (record.next())
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.hasScrumRole (record.contains, arrScrumRoleSysIds))
<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
},
<span class="hljs-attr">getGroupIds</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">var</span> arrScrumRoleIds = <span class="hljs-keyword">this</span>.getRoleIds ();
<span class="hljs-keyword">var</span> arrGroupIds = [];
<span class="hljs-keyword">var</span> record = <span class="hljs-keyword">new</span> GlideRecord (<span class="hljs-string">"sys_group_has_role"</span>);
record.query ();
<span class="hljs-keyword">while</span> (record.next ())
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.hasScrumRole (record.role, arrScrumRoleIds))
arrGroupIds.push (record.group + <span class="hljs-string">""</span>);
<span class="hljs-keyword">return</span> arrGroupIds;
},
<span class="hljs-attr">getGroupInfo</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">var</span> mapGroupInfo = {};
<span class="hljs-keyword">var</span> arrRoleIds = <span class="hljs-keyword">this</span>.getRoleIds ();
<span class="hljs-keyword">var</span> arrGroupIds = <span class="hljs-keyword">this</span>.getGroupIds (arrRoleIds);
<span class="hljs-keyword">var</span> record = <span class="hljs-keyword">new</span> GlideRecord (<span class="hljs-string">"sys_user_group"</span>);
record.addQuery(<span class="hljs-string">"sys_id"</span>, <span class="hljs-string">"IN"</span>, arrGroupIds.join (<span class="hljs-string">","</span>));
record.query ();
<span class="hljs-keyword">while</span> (record.next ()) {
<span class="hljs-keyword">var</span> strName = record.name + <span class="hljs-string">""</span>;
<span class="hljs-keyword">var</span> strSysId = record.sys_id + <span class="hljs-string">""</span>;
mapGroupInfo [strName] = {<span class="hljs-attr">name</span>: strName, <span class="hljs-attr">sysid</span>: strSysId};
}
<span class="hljs-keyword">return</span> mapGroupInfo;
},
<span class="hljs-attr">getMarkUp</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">var</span> groupAjax = <span class="hljs-keyword">new</span> GlideAjax(<span class="hljs-string">'ScrumUserGroupsAjax'</span>);
groupAjax.addParam(<span class="hljs-string">'sysparm_name'</span>, <span class="hljs-string">'getGroupInfo'</span>);
groupAjax.getXML(<span class="hljs-keyword">this</span>.generateMarkUp.bind(<span class="hljs-keyword">this</span>));
},
<span class="hljs-attr">generateMarkUp</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) </span>{
<span class="hljs-keyword">var</span> mapGroupInfo = {};
<span class="hljs-keyword">var</span> groupData = response.responseXML.getElementsByTagName(<span class="hljs-string">"group"</span>);
<span class="hljs-keyword">var</span> strName, strSysId;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; groupData.length; i++) {
strName = groupData[i].getAttribute(<span class="hljs-string">"name"</span>);
strSysId = groupData[i].getAttribute(<span class="hljs-string">"sysid"</span>);
mapGroupInfo[strName] = {
<span class="hljs-attr">name</span>: strName,
<span class="hljs-attr">sysid</span>: strSysId
};
}
<span class="hljs-keyword">var</span> arrGroupNames = [];
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> strGroupName <span class="hljs-keyword">in</span> mapGroupInfo) {
arrGroupNames.push (strGroupName + <span class="hljs-string">""</span>);
}
arrGroupNames.sort ();
<span class="hljs-keyword">var</span> strMarkUp = <span class="hljs-string">""</span>;
<span class="hljs-keyword">if</span> (arrGroupNames.length &gt; <span class="hljs-number">0</span>) {
<span class="hljs-keyword">var</span> strTable = <span class="hljs-string">"&lt;table&gt;&lt;tr&gt;&lt;td&gt;&lt;label for='groupId'&gt;&lt;select id='groupId'&gt;"</span>;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> nSlot = <span class="hljs-number">0</span>; nSlot &lt; arrGroupNames.length; ++nSlot) {
strName = arrGroupNames[nSlot];
strSysId = mapGroupInfo [strName].sysid;
strTable += <span class="hljs-string">"&lt;option value='"</span> + strSysId + <span class="hljs-string">"'&gt;"</span> + strName + <span class="hljs-string">"&lt;/option&gt;"</span>;
}
strTable += <span class="hljs-string">"&lt;/select&gt;&lt;/label&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;"</span>;
strMarkUp = <span class="hljs-string">"&lt;div id='task_controls'&gt;"</span> + strTable +
<span class="hljs-string">"&lt;div style='text-align: right;'&gt;"</span> +
<span class="hljs-string">"&lt;button id='ok' type='button'&gt;"</span> + getMessage(<span class="hljs-string">"OK"</span>) + <span class="hljs-string">"&lt;/button&gt;"</span> +
<span class="hljs-string">"&lt;button id='cancel' type='button'&gt;"</span> + getMessage(<span class="hljs-string">"Cancel"</span>) + <span class="hljs-string">"&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;"</span>;
} <span class="hljs-keyword">else</span> {
strMarkUp = <span class="hljs-string">"&lt;div id='task_controls'&gt;&lt;p&gt;No groups with scrum_user role found&lt;/p&gt;"</span> +
<span class="hljs-string">"&lt;div style='text-align: right;'&gt;"</span> +
<span class="hljs-string">"&lt;button id='okNG' type='button'&gt;"</span> + getMessage(<span class="hljs-string">"OK"</span>) + <span class="hljs-string">"&lt;/button&gt;"</span> +
<span class="hljs-string">"&lt;button id='cancelNG' type='button'&gt;"</span> + getMessage(<span class="hljs-string">"Cancel"</span>) +
<span class="hljs-string">"&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;"</span>;
}
<span class="hljs-keyword">this</span>.setBody(strMarkUp, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>);
<span class="hljs-keyword">this</span>.setUpEvents();
<span class="hljs-keyword">this</span>.display(<span class="hljs-literal">true</span>);
<span class="hljs-keyword">this</span>.setWidth(<span class="hljs-number">180</span>);
},
<span class="hljs-attr">fillDataMap</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">mapData</span>) </span>{
<span class="hljs-keyword">var</span> strChosenGroupSysId = <span class="hljs-keyword">this</span>.getUserChosenGroupSysIds ();
<span class="hljs-keyword">if</span> (strChosenGroupSysId) {
mapData.sysparm_name = <span class="hljs-string">"createReleaseTeamMembers"</span>;
mapData.sysparm_sys_id = <span class="hljs-keyword">this</span>.getScrumReleaseTeamSysId ();
mapData.sysparm_groups = strChosenGroupSysId;
<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
} <span class="hljs-keyword">else</span> {
<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}
}
});
<span class="hljs-comment">/*! RESOURCE: AddTeamMembers */</span>
<span class="hljs-keyword">var</span> AddTeamMembers = Class.create(GlideDialogWindow, {
<span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">this</span>.setUpFacade();
},
<span class="hljs-attr">setUpFacade</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
GlideDialogWindow.prototype.initialize.call(<span class="hljs-keyword">this</span>, <span class="hljs-string">"task_window"</span>, <span class="hljs-literal">false</span>);
<span class="hljs-keyword">this</span>.setTitle(getMessage(<span class="hljs-string">"Add Team Members"</span>));
<span class="hljs-keyword">this</span>.setBody(<span class="hljs-keyword">this</span>.getMarkUp(), <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>);
},
<span class="hljs-attr">setUpEvents</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">var</span> dialog = <span class="hljs-keyword">this</span>;
<span class="hljs-keyword">var</span> okButton = $(<span class="hljs-string">"ok"</span>);
<span class="hljs-keyword">if</span> (okButton) {
okButton.on(<span class="hljs-string">"click"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">var</span> mapData = {};
<span class="hljs-keyword">if</span> (dialog.fillDataMap (mapData)) {
<span class="hljs-keyword">var</span> processor = <span class="hljs-keyword">new</span> GlideAjax(<span class="hljs-string">"ScrumAjaxAddReleaseTeamMembers2Processor"</span>);
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> strKey <span class="hljs-keyword">in</span> mapData) {
processor.addParam(strKey, mapData[strKey]);
}
dialog.showStatus(getMessage(<span class="hljs-string">"Adding team members..."</span>));
processor.getXML(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
dialog.refresh();
dialog._onCloseClicked();
});
} <span class="hljs-keyword">else</span> {
dialog._onCloseClicked();
}
});
}
<span class="hljs-keyword">var</span> cancelButton = $(<span class="hljs-string">"cancel"</span>);
<span class="hljs-keyword">if</span> (cancelButton) {
cancelButton.on(<span class="hljs-string">"click"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
dialog._onCloseClicked();
});
}
<span class="hljs-keyword">var</span> okNGButton = $(<span class="hljs-string">"okNG"</span>);
<span class="hljs-keyword">if</span> (okNGButton) {
okNGButton.on(<span class="hljs-string">"click"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
dialog._onCloseClicked();
});
}
<span class="hljs-keyword">var</span> cancelNGButton = $(<span class="hljs-string">"cancelNG"</span>);
<span class="hljs-keyword">if</span> (cancelNGButton) {
cancelNGButton.on(<span class="hljs-string">"click"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
dialog._onCloseClicked();
});
}
<span class="hljs-keyword">var</span> teamCombo = $(<span class="hljs-string">"teamId"</span>);
<span class="hljs-keyword">if</span> (teamCombo) {
teamCombo.on(<span class="hljs-string">"change"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)</span>{
dialog.updateMembers ();
});
}
},
<span class="hljs-attr">updateMembers</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">var</span> arrMemberInfo = [];
<span class="hljs-keyword">var</span> teamCombo = $(<span class="hljs-string">"teamId"</span>);
<span class="hljs-keyword">if</span> (teamCombo) {
<span class="hljs-keyword">var</span> strTeamSysId = teamCombo.value;
<span class="hljs-keyword">var</span> recTeamMember = <span class="hljs-keyword">new</span> GlideRecord (<span class="hljs-string">"scrum_pp_release_team_member"</span>);
recTeamMember.addQuery (<span class="hljs-string">"team"</span>, strTeamSysId);
recTeamMember.query ();
<span class="hljs-keyword">while</span> (recTeamMember.next ()) {
<span class="hljs-keyword">var</span> recSysUser = <span class="hljs-keyword">new</span> GlideRecord (<span class="hljs-string">"sys_user"</span>);
recSysUser.addQuery (<span class="hljs-string">"sys_id"</span>, recTeamMember.name);
recSysUser.query ();
<span class="hljs-keyword">var</span> strName = recSysUser.next () ? recSysUser.name : <span class="hljs-string">""</span>;
<span class="hljs-keyword">var</span> strPoints = recTeamMember.default_sprint_points + <span class="hljs-string">""</span>;
arrMemberInfo.push ({<span class="hljs-attr">name</span>: strName, <span class="hljs-attr">points</span>: strPoints});
}
}
<span class="hljs-keyword">if</span> (arrMemberInfo.length &gt; <span class="hljs-number">0</span>) {
<span class="hljs-keyword">var</span> strHtml = <span class="hljs-string">"&lt;tr&gt;&lt;th style='text-align: left; white-space: nowrap'&gt;"</span> +
<span class="hljs-string">"Member&lt;/th&gt;&lt;th style='text-align: left; white-space: nowrap'&gt;Sprint Points&lt;/th&gt;&lt;tr&gt;"</span>;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> nSlot = <span class="hljs-number">0</span>; nSlot &lt; arrMemberInfo.length; ++nSlot) {
<span class="hljs-keyword">var</span> strMemberName = arrMemberInfo[nSlot].name + <span class="hljs-string">""</span>;
<span class="hljs-keyword">var</span> strMemberPoints = arrMemberInfo[nSlot].points + <span class="hljs-string">""</span>;
strHtml += <span class="hljs-string">"&lt;tr&gt;&lt;td  style='text-align: left; white-space: nowrap'&gt;"</span> + strMemberName +
<span class="hljs-string">"&lt;/td&gt;&lt;td style='text-align: left; white-space: nowrap'&gt;"</span> + strMemberPoints + <span class="hljs-string">"&lt;/td&gt;&lt;/tr&gt;"</span>;
}
$(<span class="hljs-string">"memberId"</span>).update (strHtml);
} <span class="hljs-keyword">else</span> {
$(<span class="hljs-string">"memberId"</span>).update (<span class="hljs-string">"&lt;tr&gt;&lt;td style='font-weight: bold'&gt;"</span>+getMessage(<span class="hljs-string">"No team members"</span>)+<span class="hljs-string">"&lt;/td&gt;&lt;/tr&gt;"</span>);
}
},
<span class="hljs-attr">refresh</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
GlideList2.get(<span class="hljs-string">"scrum_pp_team.scrum_pp_release_team_member.team"</span>).refresh();
},
<span class="hljs-attr">getScrumReleaseTeamSysId</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">return</span> g_form.getUniqueValue() + <span class="hljs-string">""</span>;
},
<span class="hljs-attr">getUserChosenTeamSysIds</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">return</span> $F(<span class="hljs-string">'teamId'</span>) + <span class="hljs-string">""</span>;
},
<span class="hljs-attr">showStatus</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">strMessage</span>) </span>{
$(<span class="hljs-string">"task_controls"</span>).update(strMessage);
},
<span class="hljs-attr">display</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">bIsVisible</span>) </span>{
$(<span class="hljs-string">"task_window"</span>).style.visibility = (bIsVisible ? <span class="hljs-string">"visible"</span> : <span class="hljs-string">"hidden"</span>);
},
<span class="hljs-attr">getMarkUp</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">var</span> groupAjax = <span class="hljs-keyword">new</span> GlideAjax(<span class="hljs-string">'ScrumUserGroupsAjax'</span>);
groupAjax.addParam(<span class="hljs-string">'sysparm_name'</span>, <span class="hljs-string">'getTeamInfo'</span>);
groupAjax.addParam(<span class="hljs-string">'sysparm_scrum_team_sysid'</span>, <span class="hljs-keyword">this</span>.getScrumReleaseTeamSysId());
groupAjax.getXML(<span class="hljs-keyword">this</span>.generateMarkUp.bind(<span class="hljs-keyword">this</span>));
},
<span class="hljs-attr">generateMarkUp</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) </span>{
<span class="hljs-keyword">var</span> mapTeamInfo = {};
<span class="hljs-keyword">var</span> teamData = response.responseXML.getElementsByTagName(<span class="hljs-string">"team"</span>);
<span class="hljs-keyword">var</span> strName, strSysId;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; teamData.length; i++) {
strName = teamData[i].getAttribute(<span class="hljs-string">"name"</span>);
strSysId = teamData[i].getAttribute(<span class="hljs-string">"sysid"</span>);
mapTeamInfo[strName] = {
<span class="hljs-attr">name</span>: strName,
<span class="hljs-attr">sysid</span>: strSysId
};
}
<span class="hljs-keyword">var</span> arrTeamNames = [];
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> strTeamName <span class="hljs-keyword">in</span> mapTeamInfo) {
arrTeamNames.push (strTeamName + <span class="hljs-string">""</span>);
}
arrTeamNames.sort ();
<span class="hljs-keyword">var</span> strMarkUp = <span class="hljs-string">""</span>;
<span class="hljs-keyword">if</span> (arrTeamNames.length &gt; <span class="hljs-number">0</span>) {
<span class="hljs-keyword">var</span> strTable = <span class="hljs-string">"&lt;table&gt;&lt;tr&gt;&lt;td&gt;&lt;label for='teamId'&gt;"</span>+getMessage(<span class="hljs-string">"Team"</span>)+<span class="hljs-string">"&lt;/label&gt;&amp;nbsp;&lt;select id='teamId'&gt;"</span>;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> nSlot = <span class="hljs-number">0</span>; nSlot &lt; arrTeamNames.length; ++nSlot) {
strName = arrTeamNames[nSlot];
strSysId = mapTeamInfo [strName].sysid;
strTable += <span class="hljs-string">"&lt;option value='"</span> + strSysId + <span class="hljs-string">"'&gt;"</span> + strName + <span class="hljs-string">"&lt;/option&gt;"</span>;
}
strTable += <span class="hljs-string">"&lt;/select&gt;&lt;/label&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;"</span>;
<span class="hljs-keyword">var</span> strTable2 = <span class="hljs-string">"&lt;table style='width: 100%;'&gt;&lt;tr&gt;&lt;td style='width: 50%;'&gt;&lt;/td&gt;&lt;td&gt;&lt;table id='memberId'&gt;&lt;/table&gt;&lt;/td&gt;&lt;td style='width: 50%;'&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;"</span>;
strMarkUp = <span class="hljs-string">"&lt;div id='task_controls' style='overflow: auto;&gt;"</span> + strTable + strTable2 +
<span class="hljs-string">"&lt;/div&gt;&lt;table style='width: 100%'&gt;&lt;tr&gt;&lt;td style='white-space: nowrap; text-align: right;'&gt;&lt;button id='ok' type='button'&gt;"</span> + getMessage(<span class="hljs-string">"OK"</span>) + <span class="hljs-string">"&lt;/button&gt;"</span> +
<span class="hljs-string">"&lt;button id='cancel' type='button'&gt;"</span> + getMessage(<span class="hljs-string">"Cancel"</span>) + <span class="hljs-string">"&lt;/button&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;"</span>;
} <span class="hljs-keyword">else</span> {
strMarkUp = <span class="hljs-string">"&lt;div id='task_controls'&gt;&lt;p&gt;No release teams found&lt;/p&gt;"</span> +
<span class="hljs-string">"&lt;table style='width: 100%'&gt;&lt;tr&gt;&lt;td style='white-space: nowrap; text-align: right;'&gt;&lt;button id='okNG' type='button'&gt;"</span> + getMessage(<span class="hljs-string">"OK"</span>) + <span class="hljs-string">"&lt;/button&gt;"</span> +
<span class="hljs-string">"&lt;button id='cancelNG' type='button'&gt;"</span> + getMessage(<span class="hljs-string">"Cancel"</span>) + <span class="hljs-string">"&lt;/button&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;"</span>;
}
<span class="hljs-keyword">this</span>.setBody(strMarkUp, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>);
<span class="hljs-keyword">this</span>.setUpEvents();
<span class="hljs-keyword">this</span>.display(<span class="hljs-literal">true</span>);
<span class="hljs-keyword">this</span>.setWidth(<span class="hljs-number">280</span>);
},
<span class="hljs-attr">fillDataMap</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">mapData</span>) </span>{
<span class="hljs-keyword">var</span> strChosenTeamSysId = <span class="hljs-keyword">this</span>.getUserChosenTeamSysIds ();
<span class="hljs-keyword">if</span> (strChosenTeamSysId) {
mapData.sysparm_name = <span class="hljs-string">"createReleaseTeamMembers"</span>;
mapData.sysparm_sys_id = <span class="hljs-keyword">this</span>.getScrumReleaseTeamSysId ();
mapData.sysparm_teams = strChosenTeamSysId;
<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
} <span class="hljs-keyword">else</span> {
<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}
}
});
<span class="hljs-comment">/*! RESOURCE: ScrumAddSprints */</span>
<span class="hljs-keyword">var</span> ScrumAddSprints = Class.create({
<span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">gr</span>) </span>{
<span class="hljs-keyword">this</span>._gr=gr;
<span class="hljs-keyword">this</span>._prmNms  = [<span class="hljs-string">"spName"</span>,<span class="hljs-string">"spDuration"</span>,<span class="hljs-string">"spStartDate"</span>,<span class="hljs-string">"spStartNum"</span>,<span class="hljs-string">"spNum"</span>,<span class="hljs-string">"_tn"</span>,<span class="hljs-string">"_sys_id"</span>];
<span class="hljs-keyword">this</span>._dateFN = [<span class="hljs-string">"spStartDate"</span>];
<span class="hljs-keyword">this</span>._refObs = [];
<span class="hljs-keyword">this</span>._prmVls = [];
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-keyword">this</span>._prmNms.length;i++) {
<span class="hljs-keyword">this</span>._prmVls[<span class="hljs-keyword">this</span>._prmNms[i]]=<span class="hljs-string">""</span>;
}
<span class="hljs-keyword">this</span>._prmErr = [];
<span class="hljs-keyword">var</span> dialogClass = <span class="hljs-built_in">window</span>.GlideModal ? GlideModal : GlideDialogWindow;
<span class="hljs-keyword">this</span>._crtDlg = <span class="hljs-keyword">new</span> dialogClass(<span class="hljs-string">"scrum_add_sprints_dialog"</span>);
<span class="hljs-keyword">this</span>._crtDlg.setTitle(<span class="hljs-string">"Add Sprints"</span>);
<span class="hljs-keyword">this</span>._crtDlg.setPreference(<span class="hljs-string">"_tn"</span>,<span class="hljs-keyword">this</span>._gr.getTableName());
<span class="hljs-keyword">this</span>._crtDlg.setPreference(<span class="hljs-string">"_sys_id"</span>, (<span class="hljs-keyword">this</span>._gr.getUniqueValue()));
<span class="hljs-keyword">this</span>._crtDlg.setPreference(<span class="hljs-string">"handler"</span>,<span class="hljs-keyword">this</span>);
},
<span class="hljs-attr">showDialog</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">this</span>._crtDlg.render();
},
<span class="hljs-attr">onSubmit</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">this</span>._readFormValues();
<span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._validate()) {
<span class="hljs-keyword">var</span> errMsg = <span class="hljs-string">"Before you submit:"</span>;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>._prmErr.length; i++) {
errMsg += <span class="hljs-string">"\n * "</span>+<span class="hljs-keyword">this</span>._prmErr[i];
}
alert(errMsg);
<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}
<span class="hljs-keyword">this</span>._crtDlg.destroy();
<span class="hljs-keyword">var</span> ga = <span class="hljs-keyword">new</span> GlideAjax(<span class="hljs-string">"ScrumAddSprintsAjaxProcessor"</span>);
ga.addParam(<span class="hljs-string">"sysparm_name"</span>,<span class="hljs-string">"checkDuration"</span>);
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>._prmNms.length; i++ ) {
ga.addParam(<span class="hljs-keyword">this</span>._prmNms[i],<span class="hljs-keyword">this</span>._prmVls[<span class="hljs-keyword">this</span>._prmNms[i]]);
}
ga.getXML(<span class="hljs-keyword">this</span>.checkComplete.bind(<span class="hljs-keyword">this</span>));
<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
},
<span class="hljs-attr">checkComplete</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) </span>{
<span class="hljs-keyword">var</span> resp = response.responseXML.getElementsByTagName(<span class="hljs-string">"item"</span>);
<span class="hljs-keyword">if</span> (resp[<span class="hljs-number">0</span>].getAttribute(<span class="hljs-string">"result"</span>) == <span class="hljs-string">"success"</span>) {
<span class="hljs-keyword">var</span> dialogClass = <span class="hljs-built_in">window</span>.GlideModal ? GlideModal : GlideDialogWindow;
<span class="hljs-keyword">this</span>._plsWtDlg = <span class="hljs-keyword">new</span> dialogClass(<span class="hljs-string">"scrum_please_wait"</span>);
<span class="hljs-keyword">this</span>._plsWtDlg.setTitle(<span class="hljs-string">"Working.  Please wait."</span>);
<span class="hljs-keyword">this</span>._plsWtDlg.render();
<span class="hljs-keyword">var</span> ga = <span class="hljs-keyword">new</span> GlideAjax(<span class="hljs-string">"ScrumAddSprintsAjaxProcessor"</span>);
ga.addParam(<span class="hljs-string">"sysparm_name"</span>,<span class="hljs-string">"addSprints"</span>);
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>._prmNms.length; i++ ) {
ga.addParam(<span class="hljs-keyword">this</span>._prmNms[i],<span class="hljs-keyword">this</span>._prmVls[<span class="hljs-keyword">this</span>._prmNms[i]]);
}
ga.getXML(<span class="hljs-keyword">this</span>.createComplete.bind(<span class="hljs-keyword">this</span>));
<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}
<span class="hljs-keyword">var</span> dialogClass = <span class="hljs-built_in">window</span>.GlideModal ? GlideModal : GlideDialogWindow;
<span class="hljs-keyword">this</span>._rlsPshDlg = <span class="hljs-keyword">new</span> dialogClass(<span class="hljs-string">"scrum_release_push_confirm_dialog"</span>);
<span class="hljs-keyword">this</span>._rlsPshDlg.setTitle(<span class="hljs-string">"Modify Release Dates"</span>);
<span class="hljs-keyword">this</span>._rlsPshDlg.setPreference(<span class="hljs-string">"handler"</span>,<span class="hljs-keyword">this</span>);
<span class="hljs-keyword">this</span>._rlsPshDlg.render();
},
<span class="hljs-attr">confirmReleasePush</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">this</span>._rlsPshDlg.destroy();
<span class="hljs-keyword">var</span> dialogClass = <span class="hljs-built_in">window</span>.GlideModal ? GlideModal : GlideDialogWindow;
<span class="hljs-keyword">this</span>._plsWtDlg = <span class="hljs-keyword">new</span> dialogClass(<span class="hljs-string">"scrum_please_wait"</span>);
<span class="hljs-keyword">this</span>._plsWtDlg.setTitle(<span class="hljs-string">"Working.  Please wait."</span>);
<span class="hljs-keyword">this</span>._plsWtDlg.render();
<span class="hljs-keyword">var</span> ga = <span class="hljs-keyword">new</span> GlideAjax(<span class="hljs-string">"ScrumAddSprintsAjaxProcessor"</span>);
ga.addParam(<span class="hljs-string">"sysparm_name"</span>,<span class="hljs-string">"addSprints"</span>);
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>._prmNms.length; i++ ) {
ga.addParam(<span class="hljs-keyword">this</span>._prmNms[i],<span class="hljs-keyword">this</span>._prmVls[<span class="hljs-keyword">this</span>._prmNms[i]]);
}
ga.getXML(<span class="hljs-keyword">this</span>.createComplete.bind(<span class="hljs-keyword">this</span>));
<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
},
<span class="hljs-attr">cancelReleasePush</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) </span>{
<span class="hljs-keyword">this</span>._rlsPshDlg.destroy();
<span class="hljs-built_in">window</span>.location.reload();
<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
},
<span class="hljs-attr">createComplete</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) </span>{
<span class="hljs-keyword">this</span>._plsWtDlg.destroy();
<span class="hljs-keyword">var</span> resp = response.responseXML.getElementsByTagName(<span class="hljs-string">"item"</span>);
<span class="hljs-keyword">if</span> (resp[<span class="hljs-number">0</span>].getAttribute(<span class="hljs-string">"result"</span>) == <span class="hljs-string">"success"</span>) {
<span class="hljs-keyword">this</span>._sprints = response.responseXML.documentElement.getAttribute(<span class="hljs-string">"answer"</span>);
<span class="hljs-keyword">var</span> dialogClass = <span class="hljs-built_in">window</span>.GlideModal ? GlideModal : GlideDialogWindow;
<span class="hljs-keyword">this</span>._viewConfirm = <span class="hljs-keyword">new</span> dialogClass(<span class="hljs-string">"scrum_sprints_view_confirm_dialog"</span>);
<span class="hljs-keyword">this</span>._viewConfirm.setTitle(<span class="hljs-string">"Sprints Created"</span>);
<span class="hljs-keyword">this</span>._viewConfirm.setPreference(<span class="hljs-string">"handler"</span>,<span class="hljs-keyword">this</span>);
<span class="hljs-keyword">this</span>._viewConfirm.render();
}
<span class="hljs-keyword">else</span> {
<span class="hljs-keyword">var</span> dialogClass = <span class="hljs-built_in">window</span>.GlideModal ? GlideModal : GlideDialogWindow;
<span class="hljs-keyword">this</span>._createError = <span class="hljs-keyword">new</span> dialogClass(<span class="hljs-string">"scrum_error"</span>);
<span class="hljs-keyword">this</span>._createError.setTitle(<span class="hljs-string">"Error Creating Sprints"</span>);
<span class="hljs-keyword">this</span>._createError.setPreference(<span class="hljs-string">"handler"</span>,<span class="hljs-keyword">this</span>);
<span class="hljs-keyword">this</span>._createError.render();
}
},
<span class="hljs-attr">viewConfirmed</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">this</span>._viewConfirm.destroy();
<span class="hljs-built_in">window</span>.location=<span class="hljs-string">"rm_sprint_list.do?sysparm_query=numberIN"</span>+<span class="hljs-keyword">this</span>._sprints+<span class="hljs-string">"&amp;sysparm_view=scrum"</span>;
<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
},
<span class="hljs-attr">viewCancelled</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">this</span>._viewConfirm.destroy();
<span class="hljs-built_in">window</span>.location.reload();
<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
},
<span class="hljs-attr">popCal</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">dateFieldId</span>) </span>{
<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> GwtDateTimePicker(dateFieldId,g_user_date_time_format, <span class="hljs-literal">true</span>);
},
<span class="hljs-attr">_validate</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">var</span> valid = <span class="hljs-literal">true</span>;
<span class="hljs-keyword">this</span>._prmErr = [];
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._prmVls[<span class="hljs-string">"spName"</span>] == <span class="hljs-string">""</span>) {
<span class="hljs-keyword">this</span>._prmErr.push(<span class="hljs-string">"You must supply a Name"</span>);
valid = <span class="hljs-literal">false</span>;
}
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._prmVls[<span class="hljs-string">"spDuration"</span>] == <span class="hljs-string">""</span> || <span class="hljs-built_in">isNaN</span>(<span class="hljs-keyword">this</span>._prmVls[<span class="hljs-string">'spDuration'</span>])) {
<span class="hljs-keyword">this</span>._prmErr.push(<span class="hljs-string">"You must supply a valid numeric duration"</span>);
valid = <span class="hljs-literal">false</span>;
}
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._prmVls[<span class="hljs-string">"spStartDate"</span>] == <span class="hljs-string">""</span>) {
<span class="hljs-keyword">this</span>._prmErr.push(<span class="hljs-string">"You must supply a Start Date"</span>);
valid = <span class="hljs-literal">false</span>;
}
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._prmVls[<span class="hljs-string">"spNum"</span>] == <span class="hljs-string">""</span> || <span class="hljs-built_in">isNaN</span>(<span class="hljs-keyword">this</span>._prmVls[<span class="hljs-string">'spNum'</span>])) {
<span class="hljs-keyword">this</span>._prmErr.push(<span class="hljs-string">"You must supply a valid Number of Sprints to create"</span>);
valid = <span class="hljs-literal">false</span>;
}
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._prmVls[<span class="hljs-string">"spStartNum"</span>] == <span class="hljs-string">""</span> || <span class="hljs-built_in">isNaN</span>(<span class="hljs-keyword">this</span>._prmVls[<span class="hljs-string">'spStartNum'</span>])) {
<span class="hljs-keyword">this</span>._prmErr.push(<span class="hljs-string">"You must supply a valid starting number"</span>);
valid = <span class="hljs-literal">false</span>;
}
<span class="hljs-keyword">return</span> valid;
},
<span class="hljs-attr">_readFormValues</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-keyword">this</span>._prmNms.length;i++) {
<span class="hljs-keyword">var</span> frmVl = <span class="hljs-keyword">this</span>._getValue(<span class="hljs-keyword">this</span>._prmNms[i]);
<span class="hljs-keyword">if</span> ((<span class="hljs-keyword">typeof</span> frmVl === <span class="hljs-string">"undefined"</span>) || frmVl == <span class="hljs-string">"undefined"</span> || frmVl == <span class="hljs-literal">null</span> || frmVl == <span class="hljs-string">"null"</span>) {
frmVl = <span class="hljs-string">""</span>;
}
<span class="hljs-keyword">this</span>._prmVls[<span class="hljs-keyword">this</span>._prmNms[i]] = frmVl;
}
},
<span class="hljs-attr">_getValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">inptNm</span>) </span>{
<span class="hljs-keyword">return</span> gel(inptNm).value;
},
<span class="hljs-attr">type</span>: <span class="hljs-string">"ScrumAddSprints"</span>
});
<span class="hljs-comment">/*! RESOURCE: ScrumCloneReleaseTeamDialog */</span>
<span class="hljs-keyword">var</span> ScrumCloneReleaseTeamDialog = Class.create();
ScrumCloneReleaseTeamDialog.prototype = {
<span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">this</span>.setUpFacade();
},
<span class="hljs-attr">setUpFacade</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">var</span> dialogClass = <span class="hljs-built_in">window</span>.GlideModal ? GlideModal : GlideDialogWindow;
<span class="hljs-keyword">this</span>._mstrDlg = <span class="hljs-keyword">new</span> dialogClass(<span class="hljs-string">"task_window"</span>);
<span class="hljs-keyword">this</span>._mstrDlg.setTitle(getMessage(<span class="hljs-string">"Add Team Members"</span>));
<span class="hljs-keyword">this</span>._mstrDlg.setBody(<span class="hljs-keyword">this</span>.getMarkUp(), <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>);
},
<span class="hljs-attr">setUpEvents</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">var</span> dialog = <span class="hljs-keyword">this</span>._mstrDlg;
<span class="hljs-keyword">var</span> _this = <span class="hljs-keyword">this</span>;
<span class="hljs-keyword">var</span> okButton = $(<span class="hljs-string">"ok"</span>);
<span class="hljs-keyword">if</span> (okButton) {
okButton.on(<span class="hljs-string">"click"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">var</span> mapData = {};
<span class="hljs-keyword">if</span> (_this.fillDataMap (mapData)) {
<span class="hljs-keyword">var</span> processor = <span class="hljs-keyword">new</span> GlideAjax(<span class="hljs-string">"ScrumAjaxAddReleaseTeamMembers2Processor"</span>);
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> strKey <span class="hljs-keyword">in</span> mapData) {
processor.addParam(strKey, mapData[strKey]);
}
_this.showStatus(getMessage(<span class="hljs-string">"Adding team members..."</span>));
processor.getXML(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
_this.refresh();
dialog.destroy();
});
} <span class="hljs-keyword">else</span> {
dialog.destroy();
}
});
}
<span class="hljs-keyword">var</span> cancelButton = $(<span class="hljs-string">"cancel"</span>);
<span class="hljs-keyword">if</span> (cancelButton) {
cancelButton.on(<span class="hljs-string">"click"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
dialog.destroy();
});
}
<span class="hljs-keyword">var</span> okNGButton = $(<span class="hljs-string">"okNG"</span>);
<span class="hljs-keyword">if</span> (okNGButton) {
okNGButton.on(<span class="hljs-string">"click"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
dialog.destroy();
});
}
<span class="hljs-keyword">var</span> cancelNGButton = $(<span class="hljs-string">"cancelNG"</span>);
<span class="hljs-keyword">if</span> (cancelNGButton) {
cancelNGButton.on(<span class="hljs-string">"click"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
dialog.destroy();
});
}
<span class="hljs-keyword">var</span> teamCombo = $(<span class="hljs-string">"teamId"</span>);
<span class="hljs-keyword">if</span> (teamCombo) {
teamCombo.on(<span class="hljs-string">"change"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)</span>{
_this.updateMembers ();
});
}
},
<span class="hljs-attr">updateMembers</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">var</span> arrMemberInfo = [];
<span class="hljs-keyword">var</span> teamCombo = $(<span class="hljs-string">"teamId"</span>);
<span class="hljs-keyword">if</span> (teamCombo) {
<span class="hljs-keyword">var</span> strTeamSysId = teamCombo.value;
<span class="hljs-keyword">var</span> recTeamMember = <span class="hljs-keyword">new</span> GlideRecord (<span class="hljs-string">"scrum_pp_release_team_member"</span>);
recTeamMember.addQuery (<span class="hljs-string">"team"</span>, strTeamSysId);
recTeamMember.query ();
<span class="hljs-keyword">while</span> (recTeamMember.next ()) {
<span class="hljs-keyword">var</span> recSysUser = <span class="hljs-keyword">new</span> GlideRecord (<span class="hljs-string">"sys_user"</span>);
recSysUser.addQuery (<span class="hljs-string">"sys_id"</span>, recTeamMember.name);
recSysUser.query ();
<span class="hljs-keyword">var</span> strName = recSysUser.next () ? recSysUser.name : <span class="hljs-string">""</span>;
<span class="hljs-keyword">var</span> strPoints = recTeamMember.default_sprint_points + <span class="hljs-string">""</span>;
arrMemberInfo.push ({<span class="hljs-attr">name</span>: strName, <span class="hljs-attr">points</span>: strPoints});
}
}
<span class="hljs-keyword">if</span> (arrMemberInfo.length &gt; <span class="hljs-number">0</span>) {
<span class="hljs-keyword">var</span> strHtml = <span class="hljs-string">"&lt;tr&gt;&lt;th style='text-align: left; white-space: nowrap'&gt;"</span> +
<span class="hljs-string">"Member&lt;/th&gt;&lt;th style='text-align: left; white-space: nowrap'&gt;Sprint Points&lt;/th&gt;&lt;tr&gt;"</span>;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> nSlot = <span class="hljs-number">0</span>; nSlot &lt; arrMemberInfo.length; ++nSlot) {
<span class="hljs-keyword">var</span> strMemberName = arrMemberInfo[nSlot].name + <span class="hljs-string">""</span>;
<span class="hljs-keyword">var</span> strMemberPoints = arrMemberInfo[nSlot].points + <span class="hljs-string">""</span>;
strHtml += <span class="hljs-string">"&lt;tr&gt;&lt;td  style='text-align: left; white-space: nowrap'&gt;"</span> + strMemberName +
<span class="hljs-string">"&lt;/td&gt;&lt;td style='text-align: left; white-space: nowrap'&gt;"</span> + strMemberPoints + <span class="hljs-string">"&lt;/td&gt;&lt;/tr&gt;"</span>;
}
$(<span class="hljs-string">"memberId"</span>).update (strHtml);
} <span class="hljs-keyword">else</span> {
$(<span class="hljs-string">"memberId"</span>).update (<span class="hljs-string">"&lt;tr&gt;&lt;td style='font-weight: bold'&gt;"</span>+getMessage(<span class="hljs-string">"No team members"</span>)+<span class="hljs-string">"&lt;/td&gt;&lt;/tr&gt;"</span>);
}
},
<span class="hljs-attr">refresh</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
GlideList2.get(<span class="hljs-string">"scrum_pp_team.scrum_pp_release_team_member.team"</span>).refresh();
},
<span class="hljs-attr">getScrumReleaseTeamSysId</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">return</span> g_form.getUniqueValue() + <span class="hljs-string">""</span>;
},
<span class="hljs-attr">getUserChosenTeamSysIds</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">return</span> $F(<span class="hljs-string">'teamId'</span>) + <span class="hljs-string">""</span>;
},
<span class="hljs-attr">showStatus</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">strMessage</span>) </span>{
$(<span class="hljs-string">"task_controls"</span>).update(strMessage);
},
<span class="hljs-attr">display</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">bIsVisible</span>) </span>{
$(<span class="hljs-string">"task_window"</span>).style.visibility = (bIsVisible ? <span class="hljs-string">"visible"</span> : <span class="hljs-string">"hidden"</span>);
},
<span class="hljs-attr">getMarkUp</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">var</span> groupAjax = <span class="hljs-keyword">new</span> GlideAjax(<span class="hljs-string">'ScrumUserGroupsAjax'</span>);
groupAjax.addParam(<span class="hljs-string">'sysparm_name'</span>, <span class="hljs-string">'getTeamInfo'</span>);
groupAjax.addParam(<span class="hljs-string">'sysparm_scrum_team_sysid'</span>, <span class="hljs-keyword">this</span>.getScrumReleaseTeamSysId());
groupAjax.getXML(<span class="hljs-keyword">this</span>.generateMarkUp.bind(<span class="hljs-keyword">this</span>));
},
<span class="hljs-attr">generateMarkUp</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) </span>{
<span class="hljs-keyword">var</span> mapTeamInfo = {};
<span class="hljs-keyword">var</span> teamData = response.responseXML.getElementsByTagName(<span class="hljs-string">"team"</span>);
<span class="hljs-keyword">var</span> strName, strSysId;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; teamData.length; i++) {
strName = teamData[i].getAttribute(<span class="hljs-string">"name"</span>);
strSysId = teamData[i].getAttribute(<span class="hljs-string">"sysid"</span>);
mapTeamInfo[strName] = {
<span class="hljs-attr">name</span>: strName,
<span class="hljs-attr">sysid</span>: strSysId
};
}
<span class="hljs-keyword">var</span> arrTeamNames = [];
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> strTeamName <span class="hljs-keyword">in</span> mapTeamInfo) {
arrTeamNames.push (strTeamName + <span class="hljs-string">""</span>);
}
arrTeamNames.sort ();
<span class="hljs-keyword">var</span> strMarkUp = <span class="hljs-string">""</span>;
<span class="hljs-keyword">if</span> (arrTeamNames.length &gt; <span class="hljs-number">0</span>) {
<span class="hljs-keyword">var</span> strTable = <span class="hljs-string">"&lt;div class='row'&gt;&lt;div class='form-group'&gt;&lt;label class='col-sm-3 control-label' for='teamId'&gt;"</span>+getMessage(<span class="hljs-string">"Team"</span>)+<span class="hljs-string">"&lt;/label&gt;&lt;span class='col-sm-9'&gt;&lt;select class='form-control' id='teamId'&gt;"</span>;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> nSlot = <span class="hljs-number">0</span>; nSlot &lt; arrTeamNames.length; ++nSlot) {
strName = arrTeamNames[nSlot];
strSysId = mapTeamInfo [strName].sysid;
strTable += <span class="hljs-string">"&lt;option value='"</span> + strSysId + <span class="hljs-string">"'&gt;"</span> + strName + <span class="hljs-string">"&lt;/option&gt;"</span>;
}
strTable += <span class="hljs-string">"&lt;/select&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;"</span>;
<span class="hljs-keyword">var</span> strTable2 = <span class="hljs-string">"&lt;div class='row' style='padding-top:10px;'&gt;&lt;div id='memberId' class='col-sm-12'&gt;&lt;/div&gt;&lt;/div&gt;"</span>;
strMarkUp = <span class="hljs-string">"&lt;div id='task_controls'&gt;"</span> + strTable + strTable2 +
<span class="hljs-string">"&lt;div style='text-align:right;padding-top:20px;'&gt;"</span>+
<span class="hljs-string">"&lt;button id='cancel' class='btn btn-default' type='button'&gt;"</span> + getMessage(<span class="hljs-string">"Cancel"</span>) + <span class="hljs-string">"&lt;/button&gt;"</span>+
<span class="hljs-string">"&amp;nbsp;&amp;nbsp;&lt;button id='ok' class='btn btn-primary' type='button'&gt;"</span> + getMessage(<span class="hljs-string">"OK"</span>) + <span class="hljs-string">"&lt;/button&gt;"</span> +
<span class="hljs-string">"&lt;/div&gt;&lt;/div&gt;"</span>;
} <span class="hljs-keyword">else</span> {
strMarkUp = <span class="hljs-string">"&lt;div id='task_controls'&gt;&lt;p&gt;No release teams found&lt;/p&gt;"</span> +
<span class="hljs-string">"&lt;div style='padding-top:20px;text-align:right;'&gt;"</span>+
<span class="hljs-string">"&lt;button id='cancelNG' class='btn btn-default' type='button'&gt;"</span> + getMessage(<span class="hljs-string">"Cancel"</span>) + <span class="hljs-string">"&lt;/button&gt;"</span>+
<span class="hljs-string">"&amp;nbsp;&amp;nbsp;&lt;button id='okNG' class='btn btn-primary' type='button'&gt;"</span> + getMessage(<span class="hljs-string">"OK"</span>) + <span class="hljs-string">"&lt;/button&gt;"</span> +
<span class="hljs-string">"&lt;/div&gt;&lt;/div&gt;"</span>;
}
<span class="hljs-keyword">this</span>._mstrDlg.setBody(strMarkUp, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>);
<span class="hljs-keyword">this</span>.setUpEvents();
<span class="hljs-keyword">this</span>.display(<span class="hljs-literal">true</span>);
},
<span class="hljs-attr">fillDataMap</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">mapData</span>) </span>{
<span class="hljs-keyword">var</span> strChosenTeamSysId = <span class="hljs-keyword">this</span>.getUserChosenTeamSysIds ();
<span class="hljs-keyword">if</span> (strChosenTeamSysId) {
mapData.sysparm_name = <span class="hljs-string">"createReleaseTeamMembers"</span>;
mapData.sysparm_sys_id = <span class="hljs-keyword">this</span>.getScrumReleaseTeamSysId ();
mapData.sysparm_teams = strChosenTeamSysId;
<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
} <span class="hljs-keyword">else</span> {
<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}
}
};
<span class="hljs-comment">/*! RESOURCE: /scripts/lib/jquery/jquery_clean.js */</span>
(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">if</span> (!<span class="hljs-built_in">window</span>.jQuery)
<span class="hljs-keyword">return</span>;
<span class="hljs-keyword">if</span> (!<span class="hljs-built_in">window</span>.$j_glide)
<span class="hljs-built_in">window</span>.$j = jQuery.noConflict();
<span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.$j_glide &amp;&amp; jQuery != <span class="hljs-built_in">window</span>.$j_glide) {
<span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.$j_glide)
jQuery.noConflict(<span class="hljs-literal">true</span>);
<span class="hljs-built_in">window</span>.$j = <span class="hljs-built_in">window</span>.$j_glide;
}
})();
;
;</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
