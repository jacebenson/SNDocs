<!DOCTYPE html>

<html>
<head>
  <title>angular_includes_no_min_1.5.8.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="AJAXCompleter.html">
                  AJAXCompleter.js
                </a>
              
                
                <a class="source" href="AJAXEmailClientCompleter.html">
                  AJAXEmailClientCompleter.js
                </a>
              
                
                <a class="source" href="AJAXOtherCompleter.html">
                  AJAXOtherCompleter.js
                </a>
              
                
                <a class="source" href="AJAXReferenceChoice.html">
                  AJAXReferenceChoice.js
                </a>
              
                
                <a class="source" href="AJAXReferenceCompleter.html">
                  AJAXReferenceCompleter.js
                </a>
              
                
                <a class="source" href="AJAXReferenceCompleterMulti.html">
                  AJAXReferenceCompleterMulti.js
                </a>
              
                
                <a class="source" href="AJAXReferenceControls.html">
                  AJAXReferenceControls.js
                </a>
              
                
                <a class="source" href="AJAXTableCompleter.html">
                  AJAXTableCompleter.js
                </a>
              
                
                <a class="source" href="AttachmentUploader.html">
                  AttachmentUploader.js
                </a>
              
                
                <a class="source" href="AutoComplete.html">
                  AutoComplete.js
                </a>
              
                
                <a class="source" href="BoundsUtil2.html">
                  BoundsUtil2.js
                </a>
              
                
                <a class="source" href="CookieJar.html">
                  CookieJar.js
                </a>
              
                
                <a class="source" href="CustomEventManager.html">
                  CustomEventManager.js
                </a>
              
                
                <a class="source" href="DaysOfWeekElement.html">
                  DaysOfWeekElement.js
                </a>
              
                
                <a class="source" href="DerivedFields.html">
                  DerivedFields.js
                </a>
              
                
                <a class="source" href="Draggable2.html">
                  Draggable2.js
                </a>
              
                
                <a class="source" href="DropTarget2.html">
                  DropTarget2.js
                </a>
              
                
                <a class="source" href="FieldListElement.html">
                  FieldListElement.js
                </a>
              
                
                <a class="source" href="GlideAPI1.html">
                  GlideAPI1.js
                </a>
              
                
                <a class="source" href="GlideAjax.html">
                  GlideAjax.js
                </a>
              
                
                <a class="source" href="GlideAjaxForm.html">
                  GlideAjaxForm.js
                </a>
              
                
                <a class="source" href="GlideBox.html">
                  GlideBox.js
                </a>
              
                
                <a class="source" href="GlideClientCache.html">
                  GlideClientCache.js
                </a>
              
                
                <a class="source" href="GlideDecoration.html">
                  GlideDecoration.js
                </a>
              
                
                <a class="source" href="GlideDialogForm.html">
                  GlideDialogForm.js
                </a>
              
                
                <a class="source" href="GlideDialogWindow.html">
                  GlideDialogWindow.js
                </a>
              
                
                <a class="source" href="GlideDraggable.html">
                  GlideDraggable.js
                </a>
              
                
                <a class="source" href="GlideDuration.html">
                  GlideDuration.js
                </a>
              
                
                <a class="source" href="GlideEvent.html">
                  GlideEvent.js
                </a>
              
                
                <a class="source" href="GlideEventHandler.html">
                  GlideEventHandler.js
                </a>
              
                
                <a class="source" href="GlideFilter14.html">
                  GlideFilter14.js
                </a>
              
                
                <a class="source" href="GlideFilterDate.html">
                  GlideFilterDate.js
                </a>
              
                
                <a class="source" href="GlideFilterDescription.html">
                  GlideFilterDescription.js
                </a>
              
                
                <a class="source" href="GlideFilterHandlers.html">
                  GlideFilterHandlers.js
                </a>
              
                
                <a class="source" href="GlideFilterItemVariables.html">
                  GlideFilterItemVariables.js
                </a>
              
                
                <a class="source" href="GlideFilterLabels.html">
                  GlideFilterLabels.js
                </a>
              
                
                <a class="source" href="GlideFilterQuestions.html">
                  GlideFilterQuestions.js
                </a>
              
                
                <a class="source" href="GlideFilterReference.html">
                  GlideFilterReference.js
                </a>
              
                
                <a class="source" href="GlideFilterReferenceMulti.html">
                  GlideFilterReferenceMulti.js
                </a>
              
                
                <a class="source" href="GlideFilterVariableMap.html">
                  GlideFilterVariableMap.js
                </a>
              
                
                <a class="source" href="GlideFilterVariables.html">
                  GlideFilterVariables.js
                </a>
              
                
                <a class="source" href="GlideForm14.html">
                  GlideForm14.js
                </a>
              
                
                <a class="source" href="GlideHeaderSearch.html">
                  GlideHeaderSearch.js
                </a>
              
                
                <a class="source" href="GlideList2.html">
                  GlideList2.js
                </a>
              
                
                <a class="source" href="GlideList2FilterUtil.html">
                  GlideList2FilterUtil.js
                </a>
              
                
                <a class="source" href="GlideList2Handlers.html">
                  GlideList2Handlers.js
                </a>
              
                
                <a class="source" href="GlideList2InitEvents.html">
                  GlideList2InitEvents.js
                </a>
              
                
                <a class="source" href="GlideList2Statics.html">
                  GlideList2Statics.js
                </a>
              
                
                <a class="source" href="GlideListAggregates.html">
                  GlideListAggregates.js
                </a>
              
                
                <a class="source" href="GlideListEditor.html">
                  GlideListEditor.js
                </a>
              
                
                <a class="source" href="GlideListEditorMessaging.html">
                  GlideListEditorMessaging.js
                </a>
              
                
                <a class="source" href="GlideListElement.html">
                  GlideListElement.js
                </a>
              
                
                <a class="source" href="GlideListWidget.html">
                  GlideListWidget.js
                </a>
              
                
                <a class="source" href="GlideListv3Compatibility.html">
                  GlideListv3Compatibility.js
                </a>
              
                
                <a class="source" href="GlideModal.html">
                  GlideModal.js
                </a>
              
                
                <a class="source" href="GlideModalForm.html">
                  GlideModalForm.js
                </a>
              
                
                <a class="source" href="GlideNavigation.html">
                  GlideNavigation.js
                </a>
              
                
                <a class="source" href="GlideOverlay.html">
                  GlideOverlay.js
                </a>
              
                
                <a class="source" href="GlidePane.html">
                  GlidePane.js
                </a>
              
                
                <a class="source" href="GlidePaneForm.html">
                  GlidePaneForm.js
                </a>
              
                
                <a class="source" href="GlideRecord.html">
                  GlideRecord.js
                </a>
              
                
                <a class="source" href="GlideTabs2.html">
                  GlideTabs2.js
                </a>
              
                
                <a class="source" href="GlideTabs2State.html">
                  GlideTabs2State.js
                </a>
              
                
                <a class="source" href="GlideTabs2Tab.html">
                  GlideTabs2Tab.js
                </a>
              
                
                <a class="source" href="GlideTimeElement.html">
                  GlideTimeElement.js
                </a>
              
                
                <a class="source" href="GlideTimerElement.html">
                  GlideTimerElement.js
                </a>
              
                
                <a class="source" href="GlideTransactionScope.html">
                  GlideTransactionScope.js
                </a>
              
                
                <a class="source" href="GlideUI.html">
                  GlideUI.js
                </a>
              
                
                <a class="source" href="GlideUIDefault.html">
                  GlideUIDefault.js
                </a>
              
                
                <a class="source" href="GlideUIElement.html">
                  GlideUIElement.js
                </a>
              
                
                <a class="source" href="GlideUINotification.html">
                  GlideUINotification.js
                </a>
              
                
                <a class="source" href="GlideURL.html">
                  GlideURL.js
                </a>
              
                
                <a class="source" href="GlideURLElement.html">
                  GlideURLElement.js
                </a>
              
                
                <a class="source" href="GlideUser.html">
                  GlideUser.js
                </a>
              
                
                <a class="source" href="GlideUserImageElement.html">
                  GlideUserImageElement.js
                </a>
              
                
                <a class="source" href="GlideWidgetActions.html">
                  GlideWidgetActions.js
                </a>
              
                
                <a class="source" href="GlideWidgetFilter.html">
                  GlideWidgetFilter.js
                </a>
              
                
                <a class="source" href="GlideWidgetHideOnEmpty.html">
                  GlideWidgetHideOnEmpty.js
                </a>
              
                
                <a class="source" href="GlideWidgetSearch.html">
                  GlideWidgetSearch.js
                </a>
              
                
                <a class="source" href="GlideWidgetVCR.html">
                  GlideWidgetVCR.js
                </a>
              
                
                <a class="source" href="GlideWindow.html">
                  GlideWindow.js
                </a>
              
                
                <a class="source" href="GuidedTourElementTranslator.html">
                  GuidedTourElementTranslator.js
                </a>
              
                
                <a class="source" href="GwtCellEditor.html">
                  GwtCellEditor.js
                </a>
              
                
                <a class="source" href="GwtCellSelector.html">
                  GwtCellSelector.js
                </a>
              
                
                <a class="source" href="GwtContextMenu.html">
                  GwtContextMenu.js
                </a>
              
                
                <a class="source" href="GwtCursor.html">
                  GwtCursor.js
                </a>
              
                
                <a class="source" href="GwtDate.html">
                  GwtDate.js
                </a>
              
                
                <a class="source" href="GwtDraggable.html">
                  GwtDraggable.js
                </a>
              
                
                <a class="source" href="GwtDraggableSnap.html">
                  GwtDraggableSnap.js
                </a>
              
                
                <a class="source" href="GwtExportScheduleDialog.html">
                  GwtExportScheduleDialog.js
                </a>
              
                
                <a class="source" href="GwtGridEdit.html">
                  GwtGridEdit.js
                </a>
              
                
                <a class="source" href="GwtListEditAjaxChangeSaver.html">
                  GwtListEditAjaxChangeSaver.js
                </a>
              
                
                <a class="source" href="GwtListEditAjaxValueLoader.html">
                  GwtListEditAjaxValueLoader.js
                </a>
              
                
                <a class="source" href="GwtListEditBoolean.html">
                  GwtListEditBoolean.js
                </a>
              
                
                <a class="source" href="GwtListEditCalendar.html">
                  GwtListEditCalendar.js
                </a>
              
                
                <a class="source" href="GwtListEditDependent.html">
                  GwtListEditDependent.js
                </a>
              
                
                <a class="source" href="GwtListEditDuration.html">
                  GwtListEditDuration.js
                </a>
              
                
                <a class="source" href="GwtListEditEncryptedText.html">
                  GwtListEditEncryptedText.js
                </a>
              
                
                <a class="source" href="GwtListEditError.html">
                  GwtListEditError.js
                </a>
              
                
                <a class="source" href="GwtListEditGList.html">
                  GwtListEditGList.js
                </a>
              
                
                <a class="source" href="GwtListEditGlideRecord.html">
                  GwtListEditGlideRecord.js
                </a>
              
                
                <a class="source" href="GwtListEditGridSelector.html">
                  GwtListEditGridSelector.js
                </a>
              
                
                <a class="source" href="GwtListEditInternalType.html">
                  GwtListEditInternalType.js
                </a>
              
                
                <a class="source" href="GwtListEditJournal.html">
                  GwtListEditJournal.js
                </a>
              
                
                <a class="source" href="GwtListEditMultiText.html">
                  GwtListEditMultiText.js
                </a>
              
                
                <a class="source" href="GwtListEditPassword.html">
                  GwtListEditPassword.js
                </a>
              
                
                <a class="source" href="GwtListEditRecord.html">
                  GwtListEditRecord.js
                </a>
              
                
                <a class="source" href="GwtListEditRecordDecorations.html">
                  GwtListEditRecordDecorations.js
                </a>
              
                
                <a class="source" href="GwtListEditReference.html">
                  GwtListEditReference.js
                </a>
              
                
                <a class="source" href="GwtListEditRelatedTags.html">
                  GwtListEditRelatedTags.js
                </a>
              
                
                <a class="source" href="GwtListEditSavePolicy.html">
                  GwtListEditSavePolicy.js
                </a>
              
                
                <a class="source" href="GwtListEditSelect.html">
                  GwtListEditSelect.js
                </a>
              
                
                <a class="source" href="GwtListEditTableController.html">
                  GwtListEditTableController.js
                </a>
              
                
                <a class="source" href="GwtListEditTablename.html">
                  GwtListEditTablename.js
                </a>
              
                
                <a class="source" href="GwtListEditText.html">
                  GwtListEditText.js
                </a>
              
                
                <a class="source" href="GwtListEditTranslatedField.html">
                  GwtListEditTranslatedField.js
                </a>
              
                
                <a class="source" href="GwtListEditUpdateTablename.html">
                  GwtListEditUpdateTablename.js
                </a>
              
                
                <a class="source" href="GwtListEditValueRenderer.html">
                  GwtListEditValueRenderer.js
                </a>
              
                
                <a class="source" href="GwtListEditWindow.html">
                  GwtListEditWindow.js
                </a>
              
                
                <a class="source" href="GwtListEditor.html">
                  GwtListEditor.js
                </a>
              
                
                <a class="source" href="GwtListEditorPendingChanges.html">
                  GwtListEditorPendingChanges.js
                </a>
              
                
                <a class="source" href="GwtMessage14.html">
                  GwtMessage14.js
                </a>
              
                
                <a class="source" href="GwtObservable.html">
                  GwtObservable.js
                </a>
              
                
                <a class="source" href="GwtPollDialog.html">
                  GwtPollDialog.js
                </a>
              
                
                <a class="source" href="ISO9075.html">
                  ISO9075.js
                </a>
              
                
                <a class="source" href="InPlaceEdit.html">
                  InPlaceEdit.js
                </a>
              
                
                <a class="source" href="LAB.min.html">
                  LAB.min.js
                </a>
              
                
                <a class="source" href="ListDraggableRow2.html">
                  ListDraggableRow2.js
                </a>
              
                
                <a class="source" href="ListSelectManager2.html">
                  ListSelectManager2.js
                </a>
              
                
                <a class="source" href="ListSortDual2.html">
                  ListSortDual2.js
                </a>
              
                
                <a class="source" href="ListSortWindow2.html">
                  ListSortWindow2.js
                </a>
              
                
                <a class="source" href="NOW.messaging.html">
                  NOW.messaging.js
                </a>
              
                
                <a class="source" href="NOW.messaging.record.html">
                  NOW.messaging.record.js
                </a>
              
                
                <a class="source" href="NameMapEntry.html">
                  NameMapEntry.js
                </a>
              
                
                <a class="source" href="NotificationMessage.html">
                  NotificationMessage.js
                </a>
              
                
                <a class="source" href="PageTiming14.html">
                  PageTiming14.js
                </a>
              
                
                <a class="source" href="PersonalizeForm.html">
                  PersonalizeForm.js
                </a>
              
                
                <a class="source" href="Point.html">
                  Point.js
                </a>
              
                
                <a class="source" href="SLARepairClient.html">
                  SLARepairClient.js
                </a>
              
                
                <a class="source" href="ScriptLoader.html">
                  ScriptLoader.js
                </a>
              
                
                <a class="source" href="Select.html">
                  Select.js
                </a>
              
                
                <a class="source" href="SlushBucket.html">
                  SlushBucket.js
                </a>
              
                
                <a class="source" href="SortDraggable2.html">
                  SortDraggable2.js
                </a>
              
                
                <a class="source" href="SortDropTarget2.html">
                  SortDropTarget2.js
                </a>
              
                
                <a class="source" href="SortListManager2.html">
                  SortListManager2.js
                </a>
              
                
                <a class="source" href="SortUtil2.html">
                  SortUtil2.js
                </a>
              
                
                <a class="source" href="StopWatch.html">
                  StopWatch.js
                </a>
              
                
                <a class="source" href="Table.html">
                  Table.js
                </a>
              
                
                <a class="source" href="TableElement.html">
                  TableElement.js
                </a>
              
                
                <a class="source" href="TableExtension.html">
                  TableExtension.js
                </a>
              
                
                <a class="source" href="TemplateRecord.html">
                  TemplateRecord.js
                </a>
              
                
                <a class="source" href="TextAreaElement.html">
                  TextAreaElement.js
                </a>
              
                
                <a class="source" href="UserRolesElement.html">
                  UserRolesElement.js
                </a>
              
                
                <a class="source" href="UtilityAndOverrides2.html">
                  UtilityAndOverrides2.js
                </a>
              
                
                <a class="source" href="_module.heisenberg.html">
                  _module.heisenberg.js
                </a>
              
                
                <a class="source" href="_module.html">
                  _module.js
                </a>
              
                
                <a class="source" href="ac.html">
                  ac.js
                </a>
              
                
                <a class="source" href="ac_derived_field_support.html">
                  ac_derived_field_support.js
                </a>
              
                
                <a class="source" href="accessibility.html">
                  accessibility.js
                </a>
              
                
                <a class="source" href="accessibility_tabindex.html">
                  accessibility_tabindex.js
                </a>
              
                
                <a class="source" href="affix.html">
                  affix.js
                </a>
              
                
                <a class="source" href="alert.html">
                  alert.js
                </a>
              
                
                <a class="source" href="amb.Channel.html">
                  amb.Channel.js
                </a>
              
                
                <a class="source" href="amb.ChannelListener.html">
                  amb.ChannelListener.js
                </a>
              
                
                <a class="source" href="amb.ChannelRedirect.html">
                  amb.ChannelRedirect.js
                </a>
              
                
                <a class="source" href="amb.EventManager.html">
                  amb.EventManager.js
                </a>
              
                
                <a class="source" href="amb.Logger.html">
                  amb.Logger.js
                </a>
              
                
                <a class="source" href="amb.MessageClient.html">
                  amb.MessageClient.js
                </a>
              
                
                <a class="source" href="amb.MessageClientBuilder.html">
                  amb.MessageClientBuilder.js
                </a>
              
                
                <a class="source" href="amb.ServerConnection.html">
                  amb.ServerConnection.js
                </a>
              
                
                <a class="source" href="amb_properties.html">
                  amb_properties.js
                </a>
              
                
                <a class="source" href="angular-animate.html">
                  angular-animate.js
                </a>
              
                
                <a class="source" href="angular-animate.min.html">
                  angular-animate.min.js
                </a>
              
                
                <a class="source" href="angular-aria.html">
                  angular-aria.js
                </a>
              
                
                <a class="source" href="angular-aria.min.html">
                  angular-aria.min.js
                </a>
              
                
                <a class="source" href="angular-cookies.html">
                  angular-cookies.js
                </a>
              
                
                <a class="source" href="angular-cookies.min.html">
                  angular-cookies.min.js
                </a>
              
                
                <a class="source" href="angular-file-upload-all.html">
                  angular-file-upload-all.js
                </a>
              
                
                <a class="source" href="angular-resource.html">
                  angular-resource.js
                </a>
              
                
                <a class="source" href="angular-resource.min.html">
                  angular-resource.min.js
                </a>
              
                
                <a class="source" href="angular-route.html">
                  angular-route.js
                </a>
              
                
                <a class="source" href="angular-route.min.html">
                  angular-route.min.js
                </a>
              
                
                <a class="source" href="angular-sanitize.html">
                  angular-sanitize.js
                </a>
              
                
                <a class="source" href="angular-sanitize.min.html">
                  angular-sanitize.min.js
                </a>
              
                
                <a class="source" href="angular-tooltips.min.html">
                  angular-tooltips.min.js
                </a>
              
                
                <a class="source" href="angular-touch.html">
                  angular-touch.js
                </a>
              
                
                <a class="source" href="angular-touch.min.html">
                  angular-touch.min.js
                </a>
              
                
                <a class="source" href="angular-ui-tinymce.html">
                  angular-ui-tinymce.js
                </a>
              
                
                <a class="source" href="angular.html">
                  angular.js
                </a>
              
                
                <a class="source" href="angular.min.html">
                  angular.min.js
                </a>
              
                
                <a class="source" href="angular_includes_1.4.html">
                  angular_includes_1.4.js
                </a>
              
                
                <a class="source" href="angular_includes_no_min_1.5.8.html">
                  angular_includes_no_min_1.5.8.js
                </a>
              
                
                <a class="source" href="annotations_toggle.html">
                  annotations_toggle.js
                </a>
              
                
                <a class="source" href="app.$sp.html">
                  app.$sp.js
                </a>
              
                
                <a class="source" href="app.config.html">
                  app.config.js
                </a>
              
                
                <a class="source" href="app.form_presence.html">
                  app.form_presence.js
                </a>
              
                
                <a class="source" href="app.ng.amb.html">
                  app.ng.amb.js
                </a>
              
                
                <a class="source" href="appResourcesProvider.html">
                  appResourcesProvider.js
                </a>
              
                
                <a class="source" href="app_guided_tours.html">
                  app_guided_tours.js
                </a>
              
                
                <a class="source" href="attachments.html">
                  attachments.js
                </a>
              
                
                <a class="source" href="auth.html">
                  auth.js
                </a>
              
                
                <a class="source" href="autosize-3.0.17.min.html">
                  autosize-3.0.17.min.js
                </a>
              
                
                <a class="source" href="bootstrap-datetimepicker.html">
                  bootstrap-datetimepicker.js
                </a>
              
                
                <a class="source" href="bootstrap-iconpicker.html">
                  bootstrap-iconpicker.js
                </a>
              
                
                <a class="source" href="bootstrap_336.html">
                  bootstrap_336.js
                </a>
              
                
                <a class="source" href="button.html">
                  button.js
                </a>
              
                
                <a class="source" href="cabrillo.factory.html">
                  cabrillo.factory.js
                </a>
              
                
                <a class="source" href="calendar.html">
                  calendar.js
                </a>
              
                
                <a class="source" href="camera.html">
                  camera.js
                </a>
              
                
                <a class="source" href="carousel.html">
                  carousel.js
                </a>
              
                
                <a class="source" href="catalogDataLookup.html">
                  catalogDataLookup.js
                </a>
              
                
                <a class="source" href="catalogGlideFormFactory.html">
                  catalogGlideFormFactory.js
                </a>
              
                
                <a class="source" href="catalogItemFactory.html">
                  catalogItemFactory.js
                </a>
              
                
                <a class="source" href="clientScript_components.html">
                  clientScript_components.js
                </a>
              
                
                <a class="source" href="collapse.html">
                  collapse.js
                </a>
              
                
                <a class="source" href="cometd.html">
                  cometd.js
                </a>
              
                
                <a class="source" href="condition14_new.html">
                  condition14_new.js
                </a>
              
                
                <a class="source" href="condition14_reporting.html">
                  condition14_reporting.js
                </a>
              
                
                <a class="source" href="condition14_templates.html">
                  condition14_templates.js
                </a>
              
                
                <a class="source" href="condition_global_variables14.html">
                  condition_global_variables14.js
                </a>
              
                
                <a class="source" href="constants_embedded_help.html">
                  constants_embedded_help.js
                </a>
              
                
                <a class="source" href="context_actions.html">
                  context_actions.js
                </a>
              
                
                <a class="source" href="controller.AMBRecordWatcher.html">
                  controller.AMBRecordWatcher.js
                </a>
              
                
                <a class="source" href="controller.Stream.html">
                  controller.Stream.js
                </a>
              
                
                <a class="source" href="controller.formStream.html">
                  controller.formStream.js
                </a>
              
                
                <a class="source" href="controller.guidedTours.html">
                  controller.guidedTours.js
                </a>
              
                
                <a class="source" href="controller.spLogin.html">
                  controller.spLogin.js
                </a>
              
                
                <a class="source" href="controller.spPage.html">
                  controller.spPage.js
                </a>
              
                
                <a class="source" href="controller.spWidgetDebug.html">
                  controller.spWidgetDebug.js
                </a>
              
                
                <a class="source" href="core.html">
                  core.js
                </a>
              
                
                <a class="source" href="debug.html">
                  debug.js
                </a>
              
                
                <a class="source" href="decorator.uiTinymce.html">
                  decorator.uiTinymce.js
                </a>
              
                
                <a class="source" href="deferred_related_lists.html">
                  deferred_related_lists.js
                </a>
              
                
                <a class="source" href="depends.html">
                  depends.js
                </a>
              
                
                <a class="source" href="directive.contenteditable.html">
                  directive.contenteditable.js
                </a>
              
                
                <a class="source" href="directive.formStreamEntry.html">
                  directive.formStreamEntry.js
                </a>
              
                
                <a class="source" href="directive.glideFormField.html">
                  directive.glideFormField.js
                </a>
              
                
                <a class="source" href="directive.glyph.html">
                  directive.glyph.js
                </a>
              
                
                <a class="source" href="directive.message.html">
                  directive.message.js
                </a>
              
                
                <a class="source" href="directive.nowAttachmentsList.html">
                  directive.nowAttachmentsList.js
                </a>
              
                
                <a class="source" href="directive.recursiveHelper.html">
                  directive.recursiveHelper.js
                </a>
              
                
                <a class="source" href="directive.scroll_form.html">
                  directive.scroll_form.js
                </a>
              
                
                <a class="source" href="directive.snAttachmentList.html">
                  directive.snAttachmentList.js
                </a>
              
                
                <a class="source" href="directive.snAttachmentPreview.html">
                  directive.snAttachmentPreview.js
                </a>
              
                
                <a class="source" href="directive.snAvatar.html">
                  directive.snAvatar.js
                </a>
              
                
                <a class="source" href="directive.snAvatarPopover.html">
                  directive.snAvatarPopover.js
                </a>
              
                
                <a class="source" href="directive.snBindI18n.html">
                  directive.snBindI18n.js
                </a>
              
                
                <a class="source" href="directive.snBindOnce.html">
                  directive.snBindOnce.js
                </a>
              
                
                <a class="source" href="directive.snBindPopoverSelection.html">
                  directive.snBindPopoverSelection.js
                </a>
              
                
                <a class="source" href="directive.snBlurOnEnter.html">
                  directive.snBlurOnEnter.js
                </a>
              
                
                <a class="source" href="directive.snBootstrapPopover.html">
                  directive.snBootstrapPopover.js
                </a>
              
                
                <a class="source" href="directive.snChoiceList.html">
                  directive.snChoiceList.js
                </a>
              
                
                <a class="source" href="directive.snCloak.html">
                  directive.snCloak.js
                </a>
              
                
                <a class="source" href="directive.snComplexPopover.html">
                  directive.snComplexPopover.js
                </a>
              
                
                <a class="source" href="directive.snComposing.html">
                  directive.snComposing.js
                </a>
              
                
                <a class="source" href="directive.snConfirmModal.html">
                  directive.snConfirmModal.js
                </a>
              
                
                <a class="source" href="directive.snContextMenu.html">
                  directive.snContextMenu.js
                </a>
              
                
                <a class="source" href="directive.snDayAgo.html">
                  directive.snDayAgo.js
                </a>
              
                
                <a class="source" href="directive.snDialog.html">
                  directive.snDialog.js
                </a>
              
                
                <a class="source" href="directive.snExpandedEmail.html">
                  directive.snExpandedEmail.js
                </a>
              
                
                <a class="source" href="directive.snFieldReference.html">
                  directive.snFieldReference.js
                </a>
              
                
                <a class="source" href="directive.snFileUploadInput.html">
                  directive.snFileUploadInput.js
                </a>
              
                
                <a class="source" href="directive.snFlyout.html">
                  directive.snFlyout.js
                </a>
              
                
                <a class="source" href="directive.snFocus.html">
                  directive.snFocus.js
                </a>
              
                
                <a class="source" href="directive.snGlyph.html">
                  directive.snGlyph.js
                </a>
              
                
                <a class="source" href="directive.snGroupAvatar.html">
                  directive.snGroupAvatar.js
                </a>
              
                
                <a class="source" href="directive.snImageUploader.html">
                  directive.snImageUploader.js
                </a>
              
                
                <a class="source" href="directive.snLinkContent.html">
                  directive.snLinkContent.js
                </a>
              
                
                <a class="source" href="directive.snLinkContentArticle.html">
                  directive.snLinkContentArticle.js
                </a>
              
                
                <a class="source" href="directive.snLinkContentAttachment.html">
                  directive.snLinkContentAttachment.js
                </a>
              
                
                <a class="source" href="directive.snLinkContentError.html">
                  directive.snLinkContentError.js
                </a>
              
                
                <a class="source" href="directive.snLinkContentImage.html">
                  directive.snLinkContentImage.js
                </a>
              
                
                <a class="source" href="directive.snLinkContentRecord.html">
                  directive.snLinkContentRecord.js
                </a>
              
                
                <a class="source" href="directive.snLinkContentSoundcloud.html">
                  directive.snLinkContentSoundcloud.js
                </a>
              
                
                <a class="source" href="directive.snLinkContentYoutube.html">
                  directive.snLinkContentYoutube.js
                </a>
              
                
                <a class="source" href="directive.snMentionPopover.html">
                  directive.snMentionPopover.js
                </a>
              
                
                <a class="source" href="directive.snModal.html">
                  directive.snModal.js
                </a>
              
                
                <a class="source" href="directive.snModalShow.html">
                  directive.snModalShow.js
                </a>
              
                
                <a class="source" href="directive.snNotification.html">
                  directive.snNotification.js
                </a>
              
                
                <a class="source" href="directive.snPasteFileHandler.html">
                  directive.snPasteFileHandler.js
                </a>
              
                
                <a class="source" href="directive.snPopoverBasic.html">
                  directive.snPopoverBasic.js
                </a>
              
                
                <a class="source" href="directive.snPresence.html">
                  directive.snPresence.js
                </a>
              
                
                <a class="source" href="directive.snRecordPicker.html">
                  directive.snRecordPicker.js
                </a>
              
                
                <a class="source" href="directive.snReferencePicker.html">
                  directive.snReferencePicker.js
                </a>
              
                
                <a class="source" href="directive.snResizeHeight.html">
                  directive.snResizeHeight.js
                </a>
              
                
                <a class="source" href="directive.snSelectBasic.html">
                  directive.snSelectBasic.js
                </a>
              
                
                <a class="source" href="directive.snStickyHeaders.html">
                  directive.snStickyHeaders.js
                </a>
              
                
                <a class="source" href="directive.snStream.html">
                  directive.snStream.js
                </a>
              
                
                <a class="source" href="directive.snSyncWith.html">
                  directive.snSyncWith.js
                </a>
              
                
                <a class="source" href="directive.snTableReference.html">
                  directive.snTableReference.js
                </a>
              
                
                <a class="source" href="directive.snTabs.html">
                  directive.snTabs.js
                </a>
              
                
                <a class="source" href="directive.snTabsBasic.html">
                  directive.snTabsBasic.js
                </a>
              
                
                <a class="source" href="directive.snTextExpander.html">
                  directive.snTextExpander.js
                </a>
              
                
                <a class="source" href="directive.snTimeAgo.html">
                  directive.snTimeAgo.js
                </a>
              
                
                <a class="source" href="directive.snTooltipBasic.html">
                  directive.snTooltipBasic.js
                </a>
              
                
                <a class="source" href="directive.snUserAvatar.html">
                  directive.snUserAvatar.js
                </a>
              
                
                <a class="source" href="directive.snUserProfile.html">
                  directive.snUserProfile.js
                </a>
              
                
                <a class="source" href="directive.spAttachmentButton.html">
                  directive.spAttachmentButton.js
                </a>
              
                
                <a class="source" href="directive.spAutosize.html">
                  directive.spAutosize.js
                </a>
              
                
                <a class="source" href="directive.spCLink.html">
                  directive.spCLink.js
                </a>
              
                
                <a class="source" href="directive.spCatItem.html">
                  directive.spCatItem.js
                </a>
              
                
                <a class="source" href="directive.spChoiceList.html">
                  directive.spChoiceList.js
                </a>
              
                
                <a class="source" href="directive.spCodeMirror.html">
                  directive.spCodeMirror.js
                </a>
              
                
                <a class="source" href="directive.spColorPicker.html">
                  directive.spColorPicker.js
                </a>
              
                
                <a class="source" href="directive.spContextMenu.html">
                  directive.spContextMenu.js
                </a>
              
                
                <a class="source" href="directive.spCssEditor.html">
                  directive.spCssEditor.js
                </a>
              
                
                <a class="source" href="directive.spCurrencyElement.html">
                  directive.spCurrencyElement.js
                </a>
              
                
                <a class="source" href="directive.spDatePicker.html">
                  directive.spDatePicker.js
                </a>
              
                
                <a class="source" href="directive.spDropdownTree.html">
                  directive.spDropdownTree.js
                </a>
              
                
                <a class="source" href="directive.spDurationElement.html">
                  directive.spDurationElement.js
                </a>
              
                
                <a class="source" href="directive.spEditableField.html">
                  directive.spEditableField.js
                </a>
              
                
                <a class="source" href="directive.spFieldListElement.html">
                  directive.spFieldListElement.js
                </a>
              
                
                <a class="source" href="directive.spFormField.html">
                  directive.spFormField.js
                </a>
              
                
                <a class="source" href="directive.spGlyph.html">
                  directive.spGlyph.js
                </a>
              
                
                <a class="source" href="directive.spGlyphPicker.html">
                  directive.spGlyphPicker.js
                </a>
              
                
                <a class="source" href="directive.spHTMLEditor.html">
                  directive.spHTMLEditor.js
                </a>
              
                
                <a class="source" href="directive.spHtmlContent.html">
                  directive.spHtmlContent.js
                </a>
              
                
                <a class="source" href="directive.spMessageDialog.html">
                  directive.spMessageDialog.js
                </a>
              
                
                <a class="source" href="directive.spModel.html">
                  directive.spModel.js
                </a>
              
                
                <a class="source" href="directive.spNavbarToggle.html">
                  directive.spNavbarToggle.js
                </a>
              
                
                <a class="source" href="directive.spNotifications.html">
                  directive.spNotifications.js
                </a>
              
                
                <a class="source" href="directive.spOnTransition.html">
                  directive.spOnTransition.js
                </a>
              
                
                <a class="source" href="directive.spPageRow.html">
                  directive.spPageRow.js
                </a>
              
                
                <a class="source" href="directive.spPanel.html">
                  directive.spPanel.js
                </a>
              
                
                <a class="source" href="directive.spReferenceElement.html">
                  directive.spReferenceElement.js
                </a>
              
                
                <a class="source" href="directive.spReferenceField.html">
                  directive.spReferenceField.js
                </a>
              
                
                <a class="source" href="directive.spScriptEditor.html">
                  directive.spScriptEditor.js
                </a>
              
                
                <a class="source" href="directive.spTinymceEditor.html">
                  directive.spTinymceEditor.js
                </a>
              
                
                <a class="source" href="directive.spWidget.html">
                  directive.spWidget.js
                </a>
              
                
                <a class="source" href="dropdown.html">
                  dropdown.js
                </a>
              
                
                <a class="source" href="dropdowns.html">
                  dropdowns.js
                </a>
              
                
                <a class="source" href="email_activity.html">
                  email_activity.js
                </a>
              
                
                <a class="source" href="event_initialize.html">
                  event_initialize.js
                </a>
              
                
                <a class="source" href="factory.AMBOverlay.html">
                  factory.AMBOverlay.js
                </a>
              
                
                <a class="source" href="factory.ArraySynchronizer.html">
                  factory.ArraySynchronizer.js
                </a>
              
                
                <a class="source" href="factory.glideUrlBuilder.html">
                  factory.glideUrlBuilder.js
                </a>
              
                
                <a class="source" href="factory.notificationWrapper.html">
                  factory.notificationWrapper.js
                </a>
              
                
                <a class="source" href="factory.nowAttachmentHandler.html">
                  factory.nowAttachmentHandler.js
                </a>
              
                
                <a class="source" href="factory.paneManager.html">
                  factory.paneManager.js
                </a>
              
                
                <a class="source" href="factory.snAttachmentHandler.html">
                  factory.snAttachmentHandler.js
                </a>
              
                
                <a class="source" href="factory.snPresence.html">
                  factory.snPresence.js
                </a>
              
                
                <a class="source" href="factory.snRecordPresence.html">
                  factory.snRecordPresence.js
                </a>
              
                
                <a class="source" href="factory.snRecordWatcher.html">
                  factory.snRecordWatcher.js
                </a>
              
                
                <a class="source" href="factory.spInterceptor.html">
                  factory.spInterceptor.js
                </a>
              
                
                <a class="source" href="factory.spMacro.html">
                  factory.spMacro.js
                </a>
              
                
                <a class="source" href="factory.spServer.html">
                  factory.spServer.js
                </a>
              
                
                <a class="source" href="factory.spUIActionFactory.html">
                  factory.spUIActionFactory.js
                </a>
              
                
                <a class="source" href="factory.spWidget.html">
                  factory.spWidget.js
                </a>
              
                
                <a class="source" href="factory.unwrappedHTTPPromise.html">
                  factory.unwrappedHTTPPromise.js
                </a>
              
                
                <a class="source" href="filter.spTruncate.html">
                  filter.spTruncate.js
                </a>
              
                
                <a class="source" href="fixedHeaders.html">
                  fixedHeaders.js
                </a>
              
                
                <a class="source" href="floating_scrollbar.min.html">
                  floating_scrollbar.min.js
                </a>
              
                
                <a class="source" href="focus-trap.html">
                  focus-trap.js
                </a>
              
                
                <a class="source" href="form.html">
                  form.js
                </a>
              
                
                <a class="source" href="form_submitted_mask.html">
                  form_submitted_mask.js
                </a>
              
                
                <a class="source" href="form_tags.html">
                  form_tags.js
                </a>
              
                
                <a class="source" href="formatting.html">
                  formatting.js
                </a>
              
                
                <a class="source" href="functions.html">
                  functions.js
                </a>
              
                
                <a class="source" href="functions_attachments.html">
                  functions_attachments.js
                </a>
              
                
                <a class="source" href="functions_bootstrap14.html">
                  functions_bootstrap14.js
                </a>
              
                
                <a class="source" href="functions_calendar.html">
                  functions_calendar.js
                </a>
              
                
                <a class="source" href="functions_clipboard.html">
                  functions_clipboard.js
                </a>
              
                
                <a class="source" href="functions_email.html">
                  functions_email.js
                </a>
              
                
                <a class="source" href="functions_fontsizer.html">
                  functions_fontsizer.js
                </a>
              
                
                <a class="source" href="functions_onchange.html">
                  functions_onchange.js
                </a>
              
                
                <a class="source" href="functions_reference.html">
                  functions_reference.js
                </a>
              
                
                <a class="source" href="functions_showloading.html">
                  functions_showloading.js
                </a>
              
                
                <a class="source" href="functions_user_image.html">
                  functions_user_image.js
                </a>
              
                
                <a class="source" href="geolocation.html">
                  geolocation.js
                </a>
              
                
                <a class="source" href="glideAjaxFactory.html">
                  glideAjaxFactory.js
                </a>
              
                
                <a class="source" href="glideFormEnvironmentFactory.html">
                  glideFormEnvironmentFactory.js
                </a>
              
                
                <a class="source" href="glideFormFactory.html">
                  glideFormFactory.js
                </a>
              
                
                <a class="source" href="glideFormFieldFactory.html">
                  glideFormFieldFactory.js
                </a>
              
                
                <a class="source" href="glideFormMessageHandler.html">
                  glideFormMessageHandler.js
                </a>
              
                
                <a class="source" href="glideListFactory.html">
                  glideListFactory.js
                </a>
              
                
                <a class="source" href="glideModalFactory.html">
                  glideModalFactory.js
                </a>
              
                
                <a class="source" href="glideRecordData.html">
                  glideRecordData.js
                </a>
              
                
                <a class="source" href="glideRecordFactory.html">
                  glideRecordFactory.js
                </a>
              
                
                <a class="source" href="glideRequest.html">
                  glideRequest.js
                </a>
              
                
                <a class="source" href="glideUIActionsApi.html">
                  glideUIActionsApi.js
                </a>
              
                
                <a class="source" href="glideUIActionsFactory.html">
                  glideUIActionsFactory.js
                </a>
              
                
                <a class="source" href="glideUserFactory.html">
                  glideUserFactory.js
                </a>
              
                
                <a class="source" href="glideUserSession.html">
                  glideUserSession.js
                </a>
              
                
                <a class="source" href="guided_tours_template.html">
                  guided_tours_template.js
                </a>
              
                
                <a class="source" href="heisenberg_all.html">
                  heisenberg_all.js
                </a>
              
                
                <a class="source" href="html_class_setter.html">
                  html_class_setter.js
                </a>
              
                
                <a class="source" href="iconset-fontawesome-4.2.0.html">
                  iconset-fontawesome-4.2.0.js
                </a>
              
                
                <a class="source" href="jQueryRequestShim.html">
                  jQueryRequestShim.js
                </a>
              
                
                <a class="source" href="jquery-2.1.html">
                  jquery-2.1.js
                </a>
              
                
                <a class="source" href="jquery-2.2.3.min.html">
                  jquery-2.2.3.min.js
                </a>
              
                
                <a class="source" href="jquery-ui-1.9.2.custom.html">
                  jquery-ui-1.9.2.custom.js
                </a>
              
                
                <a class="source" href="jquery.cometd.html">
                  jquery.cometd.js
                </a>
              
                
                <a class="source" href="jquery2_includes.html">
                  jquery2_includes.js
                </a>
              
                
                <a class="source" href="jquery_clean.html">
                  jquery_clean.js
                </a>
              
                
                <a class="source" href="jquery_no_conflict.html">
                  jquery_no_conflict.js
                </a>
              
                
                <a class="source" href="js_guided_tours_includes.html">
                  js_guided_tours_includes.js
                </a>
              
                
                <a class="source" href="js_includes_amb.html">
                  js_includes_amb.js
                </a>
              
                
                <a class="source" href="js_includes_angular.html">
                  js_includes_angular.js
                </a>
              
                
                <a class="source" href="js_includes_attachments.html">
                  js_includes_attachments.js
                </a>
              
                
                <a class="source" href="js_includes_avatar.html">
                  js_includes_avatar.js
                </a>
              
                
                <a class="source" href="js_includes_cabrillo.html">
                  js_includes_cabrillo.js
                </a>
              
                
                <a class="source" href="js_includes_clientScript.html">
                  js_includes_clientScript.js
                </a>
              
                
                <a class="source" href="js_includes_common.html">
                  js_includes_common.js
                </a>
              
                
                <a class="source" href="js_includes_controls.html">
                  js_includes_controls.js
                </a>
              
                
                <a class="source" href="js_includes_customer.html">
                  js_includes_customer.js
                </a>
              
                
                <a class="source" href="js_includes_data.html">
                  js_includes_data.js
                </a>
              
                
                <a class="source" href="js_includes_datetime.html">
                  js_includes_datetime.js
                </a>
              
                
                <a class="source" href="js_includes_doctype.html">
                  js_includes_doctype.js
                </a>
              
                
                <a class="source" href="js_includes_form.html">
                  js_includes_form.js
                </a>
              
                
                <a class="source" href="js_includes_form_presence.html">
                  js_includes_form_presence.js
                </a>
              
                
                <a class="source" href="js_includes_glide.html">
                  js_includes_glide.js
                </a>
              
                
                <a class="source" href="js_includes_i18n.html">
                  js_includes_i18n.js
                </a>
              
                
                <a class="source" href="js_includes_last_doctype.html">
                  js_includes_last_doctype.js
                </a>
              
                
                <a class="source" href="js_includes_link.html">
                  js_includes_link.js
                </a>
              
                
                <a class="source" href="js_includes_list_edit_doctype.html">
                  js_includes_list_edit_doctype.js
                </a>
              
                
                <a class="source" href="js_includes_listv2_doctype.html">
                  js_includes_listv2_doctype.js
                </a>
              
                
                <a class="source" href="js_includes_mention.html">
                  js_includes_mention.js
                </a>
              
                
                <a class="source" href="js_includes_messaging.html">
                  js_includes_messaging.js
                </a>
              
                
                <a class="source" href="js_includes_ng_amb.html">
                  js_includes_ng_amb.js
                </a>
              
                
                <a class="source" href="js_includes_notification.html">
                  js_includes_notification.js
                </a>
              
                
                <a class="source" href="js_includes_presence.html">
                  js_includes_presence.js
                </a>
              
                
                <a class="source" href="js_includes_resources.html">
                  js_includes_resources.js
                </a>
              
                
                <a class="source" href="js_includes_sorting_new.html">
                  js_includes_sorting_new.js
                </a>
              
                
                <a class="source" href="js_includes_sp.html">
                  js_includes_sp.js
                </a>
              
                
                <a class="source" href="js_includes_sp_core.html">
                  js_includes_sp_core.js
                </a>
              
                
                <a class="source" href="js_includes_sp_deps.html">
                  js_includes_sp_deps.js
                </a>
              
                
                <a class="source" href="js_includes_sp_tinymce.html">
                  js_includes_sp_tinymce.js
                </a>
              
                
                <a class="source" href="js_includes_stream.html">
                  js_includes_stream.js
                </a>
              
                
                <a class="source" href="js_includes_ui.html">
                  js_includes_ui.js
                </a>
              
                
                <a class="source" href="js_includes_ui16_form.html">
                  js_includes_ui16_form.js
                </a>
              
                
                <a class="source" href="js_includes_ui_popover.html">
                  js_includes_ui_popover.js
                </a>
              
                
                <a class="source" href="js_includes_user_profile.html">
                  js_includes_user_profile.js
                </a>
              
                
                <a class="source" href="js_includes_util.html">
                  js_includes_util.js
                </a>
              
                
                <a class="source" href="list.html">
                  list.js
                </a>
              
                
                <a class="source" href="list_filter.html">
                  list_filter.js
                </a>
              
                
                <a class="source" href="lodash.min.html">
                  lodash.min.js
                </a>
              
                
                <a class="source" href="magellan.CreateFavoriteModal.html">
                  magellan.CreateFavoriteModal.js
                </a>
              
                
                <a class="source" href="mentio.html">
                  mentio.js
                </a>
              
                
                <a class="source" href="modal.html">
                  modal.js
                </a>
              
                
                <a class="source" href="modals.html">
                  modals.js
                </a>
              
                
                <a class="source" href="moment-2.14.1.min.html">
                  moment-2.14.1.min.js
                </a>
              
                
                <a class="source" href="navigation.html">
                  navigation.js
                </a>
              
                
                <a class="source" href="newtag-it.html">
                  newtag-it.js
                </a>
              
                
                <a class="source" href="ng-sortable.html">
                  ng-sortable.js
                </a>
              
                
                <a class="source" href="ocLazyLoad.min.html">
                  ocLazyLoad.min.js
                </a>
              
                
                <a class="source" href="page_title.html">
                  page_title.js
                </a>
              
                
                <a class="source" href="popover.html">
                  popover.js
                </a>
              
                
                <a class="source" href="popovers.html">
                  popovers.js
                </a>
              
                
                <a class="source" href="popupdivs14.html">
                  popupdivs14.js
                </a>
              
                
                <a class="source" href="popups.html">
                  popups.js
                </a>
              
                
                <a class="source" href="prism.html">
                  prism.js
                </a>
              
                
                <a class="source" href="prototype.effects.html">
                  prototype.effects.js
                </a>
              
                
                <a class="source" href="prototype.hidefix.html">
                  prototype.hidefix.js
                </a>
              
                
                <a class="source" href="prototype.html">
                  prototype.js
                </a>
              
                
                <a class="source" href="prototype.min.html">
                  prototype.min.js
                </a>
              
                
                <a class="source" href="prototype.plugin.html">
                  prototype.plugin.js
                </a>
              
                
                <a class="source" href="prototype.template.html">
                  prototype.template.js
                </a>
              
                
                <a class="source" href="provider.defaultJSAutocomplete.html">
                  provider.defaultJSAutocomplete.js
                </a>
              
                
                <a class="source" href="provider.lazyloader.html">
                  provider.lazyloader.js
                </a>
              
                
                <a class="source" href="provider.linkContentTypes.html">
                  provider.linkContentTypes.js
                </a>
              
                
                <a class="source" href="scoped_object_generators.html">
                  scoped_object_generators.js
                </a>
              
                
                <a class="source" href="scrollable.html">
                  scrollable.js
                </a>
              
                
                <a class="source" href="scrollspy.html">
                  scrollspy.js
                </a>
              
                
                <a class="source" href="section.html">
                  section.js
                </a>
              
                
                <a class="source" href="select2.html">
                  select2.js
                </a>
              
                
                <a class="source" href="select2.min.html">
                  select2.min.js
                </a>
              
                
                <a class="source" href="selects.html">
                  selects.js
                </a>
              
                
                <a class="source" href="service.AMB.html">
                  service.AMB.js
                </a>
              
                
                <a class="source" href="service.authInterceptor.html">
                  service.authInterceptor.js
                </a>
              
                
                <a class="source" href="service.avatarProfilePersister.html">
                  service.avatarProfilePersister.js
                </a>
              
                
                <a class="source" href="service.dateUtils.html">
                  service.dateUtils.js
                </a>
              
                
                <a class="source" href="service.debounceFn.html">
                  service.debounceFn.js
                </a>
              
                
                <a class="source" href="service.filterExpressionParser.html">
                  service.filterExpressionParser.js
                </a>
              
                
                <a class="source" href="service.getTemplateUrl.html">
                  service.getTemplateUrl.js
                </a>
              
                
                <a class="source" href="service.guidedToursService.html">
                  service.guidedToursService.js
                </a>
              
                
                <a class="source" href="service.i18n.html">
                  service.i18n.js
                </a>
              
                
                <a class="source" href="service.md5.html">
                  service.md5.js
                </a>
              
                
                <a class="source" href="service.nowServer.html">
                  service.nowServer.js
                </a>
              
                
                <a class="source" href="service.nowStream.html">
                  service.nowStream.js
                </a>
              
                
                <a class="source" href="service.priorityQueue.html">
                  service.priorityQueue.js
                </a>
              
                
                <a class="source" href="service.progressDialog.html">
                  service.progressDialog.js
                </a>
              
                
                <a class="source" href="service.queryFilter.html">
                  service.queryFilter.js
                </a>
              
                
                <a class="source" href="service.snComplexPopoverService.html">
                  service.snComplexPopoverService.js
                </a>
              
                
                <a class="source" href="service.snComposingPresence.html">
                  service.snComposingPresence.js
                </a>
              
                
                <a class="source" href="service.snConnect.html">
                  service.snConnect.js
                </a>
              
                
                <a class="source" href="service.snCustomEvent.html">
                  service.snCustomEvent.js
                </a>
              
                
                <a class="source" href="service.snMention.html">
                  service.snMention.js
                </a>
              
                
                <a class="source" href="service.snNotification.html">
                  service.snNotification.js
                </a>
              
                
                <a class="source" href="service.snNotifier.html">
                  service.snNotifier.js
                </a>
              
                
                <a class="source" href="service.snResource.html">
                  service.snResource.js
                </a>
              
                
                <a class="source" href="service.snTabActivity.html">
                  service.snTabActivity.js
                </a>
              
                
                <a class="source" href="service.spCodeEditorAutocomplete.html">
                  service.spCodeEditorAutocomplete.js
                </a>
              
                
                <a class="source" href="service.spCommunicator.html">
                  service.spCommunicator.js
                </a>
              
                
                <a class="source" href="service.spFileSelect.html">
                  service.spFileSelect.js
                </a>
              
                
                <a class="source" href="service.spIs.html">
                  service.spIs.js
                </a>
              
                
                <a class="source" href="service.spModal.html">
                  service.spModal.js
                </a>
              
                
                <a class="source" href="service.spPreference.html">
                  service.spPreference.js
                </a>
              
                
                <a class="source" href="service.spThrottle.html">
                  service.spThrottle.js
                </a>
              
                
                <a class="source" href="service.spUtil.html">
                  service.spUtil.js
                </a>
              
                
                <a class="source" href="service.urlTools.html">
                  service.urlTools.js
                </a>
              
                
                <a class="source" href="service.userData.html">
                  service.userData.js
                </a>
              
                
                <a class="source" href="service.userPreferences.html">
                  service.userPreferences.js
                </a>
              
                
                <a class="source" href="simpleStorage.html">
                  simpleStorage.js
                </a>
              
                
                <a class="source" href="snPolyfill.html">
                  snPolyfill.js
                </a>
              
                
                <a class="source" href="snPopover.html">
                  snPopover.js
                </a>
              
                
                <a class="source" href="snTimeAgoSettings.html">
                  snTimeAgoSettings.js
                </a>
              
                
                <a class="source" href="snm.auth.data.module.html">
                  snm.auth.data.module.js
                </a>
              
                
                <a class="source" href="snm.serviceCatalog.data.shim.html">
                  snm.serviceCatalog.data.shim.js
                </a>
              
                
                <a class="source" href="snm.serviceCatalog.form.module.html">
                  snm.serviceCatalog.form.module.js
                </a>
              
                
                <a class="source" href="sortable.min.html">
                  sortable.min.js
                </a>
              
                
                <a class="source" href="sp.geo.html">
                  sp.geo.js
                </a>
              
                
                <a class="source" href="streamButton.html">
                  streamButton.js
                </a>
              
                
                <a class="source" href="tabbable.html">
                  tabbable.js
                </a>
              
                
                <a class="source" href="tables.html">
                  tables.js
                </a>
              
                
                <a class="source" href="tabs.html">
                  tabs.js
                </a>
              
                
                <a class="source" href="tabs2_14.html">
                  tabs2_14.js
                </a>
              
                
                <a class="source" href="templates.html">
                  templates.js
                </a>
              
                
                <a class="source" href="textutil.html">
                  textutil.js
                </a>
              
                
                <a class="source" href="theme.min.html">
                  theme.min.js
                </a>
              
                
                <a class="source" href="timeAgo.html">
                  timeAgo.js
                </a>
              
                
                <a class="source" href="tinymce.min.html">
                  tinymce.min.js
                </a>
              
                
                <a class="source" href="tooltip.html">
                  tooltip.js
                </a>
              
                
                <a class="source" href="tooltips.html">
                  tooltips.js
                </a>
              
                
                <a class="source" href="transaction_scope_includes.html">
                  transaction_scope_includes.js
                </a>
              
                
                <a class="source" href="transition.html">
                  transition.js
                </a>
              
                
                <a class="source" href="ui-bootstrap-tpls-1.1.2.html">
                  ui-bootstrap-tpls-1.1.2.js
                </a>
              
                
                <a class="source" href="uiPolicyFactory.html">
                  uiPolicyFactory.js
                </a>
              
                
                <a class="source" href="uiPolicyTypes.html">
                  uiPolicyTypes.js
                </a>
              
                
                <a class="source" href="ui_policy.html">
                  ui_policy.js
                </a>
              
                
                <a class="source" href="utils14.html">
                  utils14.js
                </a>
              
                
                <a class="source" href="velocity.min.html">
                  velocity.min.js
                </a>
              
                
                <a class="source" href="velocity.ui.html">
                  velocity.ui.js
                </a>
              
                
                <a class="source" href="viewLayout.html">
                  viewLayout.js
                </a>
              
                
                <a class="source" href="xmlUtil.html">
                  xmlUtil.js
                </a>
              
                
                <a class="source" href="xmlhttp.html">
                  xmlhttp.js
                </a>
              
                
                <a class="source" href="z_last_include.html">
                  z_last_include.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>angular_includes_no_min_1.5.8.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/*! RESOURCE: /scripts/angular_includes_no_min_1.5.8.js */</span>
<span class="hljs-comment">/*! RESOURCE: /scripts/angular_1.5.8/angular.js */</span>
(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">window</span>) </span>{
<span class="hljs-meta">    'use strict'</span>;

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">minErr</span>(<span class="hljs-params">module, ErrorConstructor</span>) </span>{
        ErrorConstructor = ErrorConstructor || <span class="hljs-built_in">Error</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> SKIP_INDEXES = <span class="hljs-number">2</span>;
            <span class="hljs-keyword">var</span> templateArgs = <span class="hljs-built_in">arguments</span>,
                code = templateArgs[<span class="hljs-number">0</span>],
                message = <span class="hljs-string">'['</span> + (<span class="hljs-built_in">module</span> ? <span class="hljs-built_in">module</span> + <span class="hljs-string">':'</span> : <span class="hljs-string">''</span>) + code + <span class="hljs-string">'] '</span>,
                template = templateArgs[<span class="hljs-number">1</span>],
                paramPrefix, i;
            message += template.replace(<span class="hljs-regexp">/\{\d+\}/g</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">match</span>) </span>{
                <span class="hljs-keyword">var</span> index = +match.slice(<span class="hljs-number">1</span>, <span class="hljs-number">-1</span>),
                    shiftedIndex = index + SKIP_INDEXES;
                <span class="hljs-keyword">if</span> (shiftedIndex &lt; templateArgs.length) {
                    <span class="hljs-keyword">return</span> toDebugString(templateArgs[shiftedIndex]);
                }
                <span class="hljs-keyword">return</span> match;
            });
            message += <span class="hljs-string">'\nhttp://errors.angularjs.org/1.5.8/'</span> +
                (<span class="hljs-built_in">module</span> ? <span class="hljs-built_in">module</span> + <span class="hljs-string">'/'</span> : <span class="hljs-string">''</span>) + code;
            <span class="hljs-keyword">for</span> (i = SKIP_INDEXES, paramPrefix = <span class="hljs-string">'?'</span>; i &lt; templateArgs.length; i++, paramPrefix = <span class="hljs-string">'&amp;'</span>) {
                message += paramPrefix + <span class="hljs-string">'p'</span> + (i - SKIP_INDEXES) + <span class="hljs-string">'='</span> +
                    <span class="hljs-built_in">encodeURIComponent</span>(toDebugString(templateArgs[i]));
            }
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ErrorConstructor(message);
        };
    }
    <span class="hljs-keyword">var</span> REGEX_STRING_REGEXP = <span class="hljs-regexp">/^\/(.+)\/([a-z]*)$/</span>;
    <span class="hljs-keyword">var</span> VALIDITY_STATE_PROPERTY = <span class="hljs-string">'validity'</span>;
    <span class="hljs-keyword">var</span> hasOwnProperty = <span class="hljs-built_in">Object</span>.prototype.hasOwnProperty;
    <span class="hljs-keyword">var</span> lowercase = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">string</span>) </span>{
        <span class="hljs-keyword">return</span> isString(string) ? string.toLowerCase() : string;
    };
    <span class="hljs-keyword">var</span> uppercase = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">string</span>) </span>{
        <span class="hljs-keyword">return</span> isString(string) ? string.toUpperCase() : string;
    };
    <span class="hljs-keyword">var</span> manualLowercase = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">s</span>) </span>{
        <span class="hljs-keyword">return</span> isString(s) ?
            s.replace(<span class="hljs-regexp">/[A-Z]/g</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ch</span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-built_in">String</span>.fromCharCode(ch.charCodeAt(<span class="hljs-number">0</span>) | <span class="hljs-number">32</span>);
            }) :
            s;
    };
    <span class="hljs-keyword">var</span> manualUppercase = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">s</span>) </span>{
        <span class="hljs-keyword">return</span> isString(s) ?
            s.replace(<span class="hljs-regexp">/[a-z]/g</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ch</span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-built_in">String</span>.fromCharCode(ch.charCodeAt(<span class="hljs-number">0</span>) &amp; ~<span class="hljs-number">32</span>);
            }) :
            s;
    };
    <span class="hljs-keyword">if</span> (<span class="hljs-string">'i'</span> !== <span class="hljs-string">'I'</span>.toLowerCase()) {
        lowercase = manualLowercase;
        uppercase = manualUppercase;
    }
    <span class="hljs-keyword">var</span>
        msie,
        jqLite,
        jQuery,
        slice = [].slice,
        splice = [].splice,
        push = [].push,
        toString = <span class="hljs-built_in">Object</span>.prototype.toString,
        getPrototypeOf = <span class="hljs-built_in">Object</span>.getPrototypeOf,
        ngMinErr = minErr(<span class="hljs-string">'ng'</span>),
        angular = <span class="hljs-built_in">window</span>.angular || (<span class="hljs-built_in">window</span>.angular = {}),
        angularModule,
        uid = <span class="hljs-number">0</span>;
    msie = <span class="hljs-built_in">window</span>.document.documentMode;

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isArrayLike</span>(<span class="hljs-params">obj</span>) </span>{
        <span class="hljs-keyword">if</span> (obj == <span class="hljs-literal">null</span> || isWindow(obj)) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">if</span> (isArray(obj) || isString(obj) || (jqLite &amp;&amp; obj <span class="hljs-keyword">instanceof</span> jqLite)) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">var</span> length = <span class="hljs-string">"length"</span> <span class="hljs-keyword">in</span> <span class="hljs-built_in">Object</span>(obj) &amp;&amp; obj.length;
        <span class="hljs-keyword">return</span> isNumber(length) &amp;&amp;
            (length &gt;= <span class="hljs-number">0</span> &amp;&amp; ((length - <span class="hljs-number">1</span>) <span class="hljs-keyword">in</span> obj || obj <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Array</span>) || <span class="hljs-keyword">typeof</span> obj.item == <span class="hljs-string">'function'</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">forEach</span>(<span class="hljs-params">obj, iterator, context</span>) </span>{
        <span class="hljs-keyword">var</span> key, length;
        <span class="hljs-keyword">if</span> (obj) {
            <span class="hljs-keyword">if</span> (isFunction(obj)) {
                <span class="hljs-keyword">for</span> (key <span class="hljs-keyword">in</span> obj) {
                    <span class="hljs-keyword">if</span> (key != <span class="hljs-string">'prototype'</span> &amp;&amp; key != <span class="hljs-string">'length'</span> &amp;&amp; key != <span class="hljs-string">'name'</span> &amp;&amp; (!obj.hasOwnProperty || obj.hasOwnProperty(key))) {
                        iterator.call(context, obj[key], key, obj);
                    }
                }
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isArray(obj) || isArrayLike(obj)) {
                <span class="hljs-keyword">var</span> isPrimitive = <span class="hljs-keyword">typeof</span> obj !== <span class="hljs-string">'object'</span>;
                <span class="hljs-keyword">for</span> (key = <span class="hljs-number">0</span>, length = obj.length; key &lt; length; key++) {
                    <span class="hljs-keyword">if</span> (isPrimitive || key <span class="hljs-keyword">in</span> obj) {
                        iterator.call(context, obj[key], key, obj);
                    }
                }
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (obj.forEach &amp;&amp; obj.forEach !== forEach) {
                obj.forEach(iterator, context, obj);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isBlankObject(obj)) {
                <span class="hljs-keyword">for</span> (key <span class="hljs-keyword">in</span> obj) {
                    iterator.call(context, obj[key], key, obj);
                }
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> obj.hasOwnProperty === <span class="hljs-string">'function'</span>) {
                <span class="hljs-keyword">for</span> (key <span class="hljs-keyword">in</span> obj) {
                    <span class="hljs-keyword">if</span> (obj.hasOwnProperty(key)) {
                        iterator.call(context, obj[key], key, obj);
                    }
                }
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">for</span> (key <span class="hljs-keyword">in</span> obj) {
                    <span class="hljs-keyword">if</span> (hasOwnProperty.call(obj, key)) {
                        iterator.call(context, obj[key], key, obj);
                    }
                }
            }
        }
        <span class="hljs-keyword">return</span> obj;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">forEachSorted</span>(<span class="hljs-params">obj, iterator, context</span>) </span>{
        <span class="hljs-keyword">var</span> keys = <span class="hljs-built_in">Object</span>.keys(obj).sort();
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; keys.length; i++) {
            iterator.call(context, obj[keys[i]], keys[i]);
        }
        <span class="hljs-keyword">return</span> keys;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reverseParams</span>(<span class="hljs-params">iteratorFn</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, key</span>) </span>{
            iteratorFn(key, value);
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">nextUid</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> ++uid;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setHashKey</span>(<span class="hljs-params">obj, h</span>) </span>{
        <span class="hljs-keyword">if</span> (h) {
            obj.$$hashKey = h;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">delete</span> obj.$$hashKey;
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">baseExtend</span>(<span class="hljs-params">dst, objs, deep</span>) </span>{
        <span class="hljs-keyword">var</span> h = dst.$$hashKey;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, ii = objs.length; i &lt; ii; ++i) {
            <span class="hljs-keyword">var</span> obj = objs[i];
            <span class="hljs-keyword">if</span> (!isObject(obj) &amp;&amp; !isFunction(obj)) <span class="hljs-keyword">continue</span>;
            <span class="hljs-keyword">var</span> keys = <span class="hljs-built_in">Object</span>.keys(obj);
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>, jj = keys.length; j &lt; jj; j++) {
                <span class="hljs-keyword">var</span> key = keys[j];
                <span class="hljs-keyword">var</span> src = obj[key];
                <span class="hljs-keyword">if</span> (deep &amp;&amp; isObject(src)) {
                    <span class="hljs-keyword">if</span> (isDate(src)) {
                        dst[key] = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(src.valueOf());
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isRegExp(src)) {
                        dst[key] = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(src);
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (src.nodeName) {
                        dst[key] = src.cloneNode(<span class="hljs-literal">true</span>);
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isElement(src)) {
                        dst[key] = src.clone();
                    } <span class="hljs-keyword">else</span> {
                        <span class="hljs-keyword">if</span> (!isObject(dst[key])) dst[key] = isArray(src) ? [] : {};
                        baseExtend(dst[key], [src], <span class="hljs-literal">true</span>);
                    }
                } <span class="hljs-keyword">else</span> {
                    dst[key] = src;
                }
            }
        }
        setHashKey(dst, h);
        <span class="hljs-keyword">return</span> dst;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">extend</span>(<span class="hljs-params">dst</span>) </span>{
        <span class="hljs-keyword">return</span> baseExtend(dst, slice.call(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">1</span>), <span class="hljs-literal">false</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">merge</span>(<span class="hljs-params">dst</span>) </span>{
        <span class="hljs-keyword">return</span> baseExtend(dst, slice.call(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">1</span>), <span class="hljs-literal">true</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toInt</span>(<span class="hljs-params">str</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">parseInt</span>(str, <span class="hljs-number">10</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">inherit</span>(<span class="hljs-params">parent, extra</span>) </span>{
        <span class="hljs-keyword">return</span> extend(<span class="hljs-built_in">Object</span>.create(parent), extra);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">noop</span>(<span class="hljs-params"></span>) </span>{}
    noop.$inject = [];

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">identity</span>(<span class="hljs-params">$</span>) </span>{
        <span class="hljs-keyword">return</span> $;
    }
    identity.$inject = [];

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">valueFn</span>(<span class="hljs-params">value</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">valueRef</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> value;
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hasCustomToString</span>(<span class="hljs-params">obj</span>) </span>{
        <span class="hljs-keyword">return</span> isFunction(obj.toString) &amp;&amp; obj.toString !== toString;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isUndefined</span>(<span class="hljs-params">value</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'undefined'</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isDefined</span>(<span class="hljs-params">value</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> value !== <span class="hljs-string">'undefined'</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isObject</span>(<span class="hljs-params">value</span>) </span>{
        <span class="hljs-keyword">return</span> value !== <span class="hljs-literal">null</span> &amp;&amp; <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'object'</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isBlankObject</span>(<span class="hljs-params">value</span>) </span>{
        <span class="hljs-keyword">return</span> value !== <span class="hljs-literal">null</span> &amp;&amp; <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'object'</span> &amp;&amp; !getPrototypeOf(value);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isString</span>(<span class="hljs-params">value</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'string'</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isNumber</span>(<span class="hljs-params">value</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'number'</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isDate</span>(<span class="hljs-params">value</span>) </span>{
        <span class="hljs-keyword">return</span> toString.call(value) === <span class="hljs-string">'[object Date]'</span>;
    }
    <span class="hljs-keyword">var</span> isArray = <span class="hljs-built_in">Array</span>.isArray;

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isFunction</span>(<span class="hljs-params">value</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'function'</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isRegExp</span>(<span class="hljs-params">value</span>) </span>{
        <span class="hljs-keyword">return</span> toString.call(value) === <span class="hljs-string">'[object RegExp]'</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isWindow</span>(<span class="hljs-params">obj</span>) </span>{
        <span class="hljs-keyword">return</span> obj &amp;&amp; obj.window === obj;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isScope</span>(<span class="hljs-params">obj</span>) </span>{
        <span class="hljs-keyword">return</span> obj &amp;&amp; obj.$evalAsync &amp;&amp; obj.$watch;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isFile</span>(<span class="hljs-params">obj</span>) </span>{
        <span class="hljs-keyword">return</span> toString.call(obj) === <span class="hljs-string">'[object File]'</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isFormData</span>(<span class="hljs-params">obj</span>) </span>{
        <span class="hljs-keyword">return</span> toString.call(obj) === <span class="hljs-string">'[object FormData]'</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isBlob</span>(<span class="hljs-params">obj</span>) </span>{
        <span class="hljs-keyword">return</span> toString.call(obj) === <span class="hljs-string">'[object Blob]'</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isBoolean</span>(<span class="hljs-params">value</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'boolean'</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isPromiseLike</span>(<span class="hljs-params">obj</span>) </span>{
        <span class="hljs-keyword">return</span> obj &amp;&amp; isFunction(obj.then);
    }
    <span class="hljs-keyword">var</span> TYPED_ARRAY_REGEXP = <span class="hljs-regexp">/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/</span>;

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isTypedArray</span>(<span class="hljs-params">value</span>) </span>{
        <span class="hljs-keyword">return</span> value &amp;&amp; isNumber(value.length) &amp;&amp; TYPED_ARRAY_REGEXP.test(toString.call(value));
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isArrayBuffer</span>(<span class="hljs-params">obj</span>) </span>{
        <span class="hljs-keyword">return</span> toString.call(obj) === <span class="hljs-string">'[object ArrayBuffer]'</span>;
    }
    <span class="hljs-keyword">var</span> trim = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
        <span class="hljs-keyword">return</span> isString(value) ? value.trim() : value;
    };
    <span class="hljs-keyword">var</span> escapeForRegexp = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">s</span>) </span>{
        <span class="hljs-keyword">return</span> s.replace(<span class="hljs-regexp">/([-()\[\]{}+?*.$\^|,:#&lt;!\\])/g</span>, <span class="hljs-string">'\\$1'</span>).
        replace(<span class="hljs-regexp">/\x08/g</span>, <span class="hljs-string">'\\x08'</span>);
    };

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isElement</span>(<span class="hljs-params">node</span>) </span>{
        <span class="hljs-keyword">return</span> !!(node &amp;&amp;
            (node.nodeName ||
                (node.prop &amp;&amp; node.attr &amp;&amp; node.find)));
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeMap</span>(<span class="hljs-params">str</span>) </span>{
        <span class="hljs-keyword">var</span> obj = {},
            items = str.split(<span class="hljs-string">','</span>),
            i;
        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; items.length; i++) {
            obj[items[i]] = <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">return</span> obj;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">nodeName_</span>(<span class="hljs-params">element</span>) </span>{
        <span class="hljs-keyword">return</span> lowercase(element.nodeName || (element[<span class="hljs-number">0</span>] &amp;&amp; element[<span class="hljs-number">0</span>].nodeName));
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">includes</span>(<span class="hljs-params">array, obj</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Array</span>.prototype.indexOf.call(array, obj) != <span class="hljs-number">-1</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">arrayRemove</span>(<span class="hljs-params">array, value</span>) </span>{
        <span class="hljs-keyword">var</span> index = array.indexOf(value);
        <span class="hljs-keyword">if</span> (index &gt;= <span class="hljs-number">0</span>) {
            array.splice(index, <span class="hljs-number">1</span>);
        }
        <span class="hljs-keyword">return</span> index;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">copy</span>(<span class="hljs-params">source, destination</span>) </span>{
        <span class="hljs-keyword">var</span> stackSource = [];
        <span class="hljs-keyword">var</span> stackDest = [];
        <span class="hljs-keyword">if</span> (destination) {
            <span class="hljs-keyword">if</span> (isTypedArray(destination) || isArrayBuffer(destination)) {
                <span class="hljs-keyword">throw</span> ngMinErr(<span class="hljs-string">'cpta'</span>, <span class="hljs-string">"Can't copy! TypedArray destination cannot be mutated."</span>);
            }
            <span class="hljs-keyword">if</span> (source === destination) {
                <span class="hljs-keyword">throw</span> ngMinErr(<span class="hljs-string">'cpi'</span>, <span class="hljs-string">"Can't copy! Source and destination are identical."</span>);
            }
            <span class="hljs-keyword">if</span> (isArray(destination)) {
                destination.length = <span class="hljs-number">0</span>;
            } <span class="hljs-keyword">else</span> {
                forEach(destination, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, key</span>) </span>{
                    <span class="hljs-keyword">if</span> (key !== <span class="hljs-string">'$$hashKey'</span>) {
                        <span class="hljs-keyword">delete</span> destination[key];
                    }
                });
            }
            stackSource.push(source);
            stackDest.push(destination);
            <span class="hljs-keyword">return</span> copyRecurse(source, destination);
        }
        <span class="hljs-keyword">return</span> copyElement(source);

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">copyRecurse</span>(<span class="hljs-params">source, destination</span>) </span>{
            <span class="hljs-keyword">var</span> h = destination.$$hashKey;
            <span class="hljs-keyword">var</span> key;
            <span class="hljs-keyword">if</span> (isArray(source)) {
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, ii = source.length; i &lt; ii; i++) {
                    destination.push(copyElement(source[i]));
                }
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isBlankObject(source)) {
                <span class="hljs-keyword">for</span> (key <span class="hljs-keyword">in</span> source) {
                    destination[key] = copyElement(source[key]);
                }
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (source &amp;&amp; <span class="hljs-keyword">typeof</span> source.hasOwnProperty === <span class="hljs-string">'function'</span>) {
                <span class="hljs-keyword">for</span> (key <span class="hljs-keyword">in</span> source) {
                    <span class="hljs-keyword">if</span> (source.hasOwnProperty(key)) {
                        destination[key] = copyElement(source[key]);
                    }
                }
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">for</span> (key <span class="hljs-keyword">in</span> source) {
                    <span class="hljs-keyword">if</span> (hasOwnProperty.call(source, key)) {
                        destination[key] = copyElement(source[key]);
                    }
                }
            }
            setHashKey(destination, h);
            <span class="hljs-keyword">return</span> destination;
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">copyElement</span>(<span class="hljs-params">source</span>) </span>{
            <span class="hljs-keyword">if</span> (!isObject(source)) {
                <span class="hljs-keyword">return</span> source;
            }
            <span class="hljs-keyword">var</span> index = stackSource.indexOf(source);
            <span class="hljs-keyword">if</span> (index !== <span class="hljs-number">-1</span>) {
                <span class="hljs-keyword">return</span> stackDest[index];
            }
            <span class="hljs-keyword">if</span> (isWindow(source) || isScope(source)) {
                <span class="hljs-keyword">throw</span> ngMinErr(<span class="hljs-string">'cpws'</span>,
                    <span class="hljs-string">"Can't copy! Making copies of Window or Scope instances is not supported."</span>);
            }
            <span class="hljs-keyword">var</span> needsRecurse = <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">var</span> destination = copyType(source);
            <span class="hljs-keyword">if</span> (destination === <span class="hljs-literal">undefined</span>) {
                destination = isArray(source) ? [] : <span class="hljs-built_in">Object</span>.create(getPrototypeOf(source));
                needsRecurse = <span class="hljs-literal">true</span>;
            }
            stackSource.push(source);
            stackDest.push(destination);
            <span class="hljs-keyword">return</span> needsRecurse ?
                copyRecurse(source, destination) :
                destination;
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">copyType</span>(<span class="hljs-params">source</span>) </span>{
            <span class="hljs-keyword">switch</span> (toString.call(source)) {
                <span class="hljs-keyword">case</span> <span class="hljs-string">'[object Int8Array]'</span>:
                <span class="hljs-keyword">case</span> <span class="hljs-string">'[object Int16Array]'</span>:
                <span class="hljs-keyword">case</span> <span class="hljs-string">'[object Int32Array]'</span>:
                <span class="hljs-keyword">case</span> <span class="hljs-string">'[object Float32Array]'</span>:
                <span class="hljs-keyword">case</span> <span class="hljs-string">'[object Float64Array]'</span>:
                <span class="hljs-keyword">case</span> <span class="hljs-string">'[object Uint8Array]'</span>:
                <span class="hljs-keyword">case</span> <span class="hljs-string">'[object Uint8ClampedArray]'</span>:
                <span class="hljs-keyword">case</span> <span class="hljs-string">'[object Uint16Array]'</span>:
                <span class="hljs-keyword">case</span> <span class="hljs-string">'[object Uint32Array]'</span>:
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> source.constructor(copyElement(source.buffer), source.byteOffset, source.length);
                <span class="hljs-keyword">case</span> <span class="hljs-string">'[object ArrayBuffer]'</span>:
                    <span class="hljs-keyword">if</span> (!source.slice) {
                        <span class="hljs-keyword">var</span> copied = <span class="hljs-keyword">new</span> <span class="hljs-built_in">ArrayBuffer</span>(source.byteLength);
                        <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(copied).set(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(source));
                        <span class="hljs-keyword">return</span> copied;
                    }
                    <span class="hljs-keyword">return</span> source.slice(<span class="hljs-number">0</span>);
                <span class="hljs-keyword">case</span> <span class="hljs-string">'[object Boolean]'</span>:
                <span class="hljs-keyword">case</span> <span class="hljs-string">'[object Number]'</span>:
                <span class="hljs-keyword">case</span> <span class="hljs-string">'[object String]'</span>:
                <span class="hljs-keyword">case</span> <span class="hljs-string">'[object Date]'</span>:
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> source.constructor(source.valueOf());
                <span class="hljs-keyword">case</span> <span class="hljs-string">'[object RegExp]'</span>:
                    <span class="hljs-keyword">var</span> re = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(source.source, source.toString().match(<span class="hljs-regexp">/[^\/]*$/</span>)[<span class="hljs-number">0</span>]);
                    re.lastIndex = source.lastIndex;
                    <span class="hljs-keyword">return</span> re;
                <span class="hljs-keyword">case</span> <span class="hljs-string">'[object Blob]'</span>:
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> source.constructor([source], {
                        <span class="hljs-attr">type</span>: source.type
                    });
            }
            <span class="hljs-keyword">if</span> (isFunction(source.cloneNode)) {
                <span class="hljs-keyword">return</span> source.cloneNode(<span class="hljs-literal">true</span>);
            }
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">equals</span>(<span class="hljs-params">o1, o2</span>) </span>{
        <span class="hljs-keyword">if</span> (o1 === o2) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">if</span> (o1 === <span class="hljs-literal">null</span> || o2 === <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">if</span> (o1 !== o1 &amp;&amp; o2 !== o2) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">var</span> t1 = <span class="hljs-keyword">typeof</span> o1,
            t2 = <span class="hljs-keyword">typeof</span> o2,
            length, key, keySet;
        <span class="hljs-keyword">if</span> (t1 == t2 &amp;&amp; t1 == <span class="hljs-string">'object'</span>) {
            <span class="hljs-keyword">if</span> (isArray(o1)) {
                <span class="hljs-keyword">if</span> (!isArray(o2)) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">if</span> ((length = o1.length) == o2.length) {
                    <span class="hljs-keyword">for</span> (key = <span class="hljs-number">0</span>; key &lt; length; key++) {
                        <span class="hljs-keyword">if</span> (!equals(o1[key], o2[key])) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                    }
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                }
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isDate(o1)) {
                <span class="hljs-keyword">if</span> (!isDate(o2)) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">return</span> equals(o1.getTime(), o2.getTime());
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isRegExp(o1)) {
                <span class="hljs-keyword">if</span> (!isRegExp(o2)) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">return</span> o1.toString() == o2.toString();
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">if</span> (isScope(o1) || isScope(o2) || isWindow(o1) || isWindow(o2) ||
                    isArray(o2) || isDate(o2) || isRegExp(o2)) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                keySet = createMap();
                <span class="hljs-keyword">for</span> (key <span class="hljs-keyword">in</span> o1) {
                    <span class="hljs-keyword">if</span> (key.charAt(<span class="hljs-number">0</span>) === <span class="hljs-string">'$'</span> || isFunction(o1[key])) <span class="hljs-keyword">continue</span>;
                    <span class="hljs-keyword">if</span> (!equals(o1[key], o2[key])) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                    keySet[key] = <span class="hljs-literal">true</span>;
                }
                <span class="hljs-keyword">for</span> (key <span class="hljs-keyword">in</span> o2) {
                    <span class="hljs-keyword">if</span> (!(key <span class="hljs-keyword">in</span> keySet) &amp;&amp;
                        key.charAt(<span class="hljs-number">0</span>) !== <span class="hljs-string">'$'</span> &amp;&amp;
                        isDefined(o2[key]) &amp;&amp;
                        !isFunction(o2[key])) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                }
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-keyword">var</span> csp = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (!isDefined(csp.rules)) {
            <span class="hljs-keyword">var</span> ngCspElement = (<span class="hljs-built_in">window</span>.document.querySelector(<span class="hljs-string">'[ng-csp]'</span>) ||
                <span class="hljs-built_in">window</span>.document.querySelector(<span class="hljs-string">'[data-ng-csp]'</span>));
            <span class="hljs-keyword">if</span> (ngCspElement) {
                <span class="hljs-keyword">var</span> ngCspAttribute = ngCspElement.getAttribute(<span class="hljs-string">'ng-csp'</span>) ||
                    ngCspElement.getAttribute(<span class="hljs-string">'data-ng-csp'</span>);
                csp.rules = {
                    <span class="hljs-attr">noUnsafeEval</span>: !ngCspAttribute || (ngCspAttribute.indexOf(<span class="hljs-string">'no-unsafe-eval'</span>) !== <span class="hljs-number">-1</span>),
                    <span class="hljs-attr">noInlineStyle</span>: !ngCspAttribute || (ngCspAttribute.indexOf(<span class="hljs-string">'no-inline-style'</span>) !== <span class="hljs-number">-1</span>)
                };
            } <span class="hljs-keyword">else</span> {
                csp.rules = {
                    <span class="hljs-attr">noUnsafeEval</span>: noUnsafeEval(),
                    <span class="hljs-attr">noInlineStyle</span>: <span class="hljs-literal">false</span>
                };
            }
        }
        <span class="hljs-keyword">return</span> csp.rules;

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">noUnsafeEval</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">new</span> <span class="hljs-built_in">Function</span>(<span class="hljs-string">''</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            } <span class="hljs-keyword">catch</span> (e) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
        }
    };
    <span class="hljs-keyword">var</span> jq = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (isDefined(jq.name_)) <span class="hljs-keyword">return</span> jq.name_;
        <span class="hljs-keyword">var</span> el;
        <span class="hljs-keyword">var</span> i, ii = ngAttrPrefixes.length,
            prefix, name;
        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; ii; ++i) {
            prefix = ngAttrPrefixes[i];
            <span class="hljs-keyword">if</span> (el = <span class="hljs-built_in">window</span>.document.querySelector(<span class="hljs-string">'['</span> + prefix.replace(<span class="hljs-string">':'</span>, <span class="hljs-string">'\\:'</span>) + <span class="hljs-string">'jq]'</span>)) {
                name = el.getAttribute(prefix + <span class="hljs-string">'jq'</span>);
                <span class="hljs-keyword">break</span>;
            }
        }
        <span class="hljs-keyword">return</span> (jq.name_ = name);
    };

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">concat</span>(<span class="hljs-params">array1, array2, index</span>) </span>{
        <span class="hljs-keyword">return</span> array1.concat(slice.call(array2, index));
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sliceArgs</span>(<span class="hljs-params">args, startIndex</span>) </span>{
        <span class="hljs-keyword">return</span> slice.call(args, startIndex || <span class="hljs-number">0</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bind</span>(<span class="hljs-params">self, fn</span>) </span>{
        <span class="hljs-keyword">var</span> curryArgs = <span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">2</span> ? sliceArgs(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">2</span>) : [];
        <span class="hljs-keyword">if</span> (isFunction(fn) &amp;&amp; !(fn <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">RegExp</span>)) {
            <span class="hljs-keyword">return</span> curryArgs.length ?
                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">return</span> <span class="hljs-built_in">arguments</span>.length ?
                        fn.apply(self, concat(curryArgs, <span class="hljs-built_in">arguments</span>, <span class="hljs-number">0</span>)) :
                        fn.apply(self, curryArgs);
                } :
                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">return</span> <span class="hljs-built_in">arguments</span>.length ?
                        fn.apply(self, <span class="hljs-built_in">arguments</span>) :
                        fn.call(self);
                };
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> fn;
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toJsonReplacer</span>(<span class="hljs-params">key, value</span>) </span>{
        <span class="hljs-keyword">var</span> val = value;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> key === <span class="hljs-string">'string'</span> &amp;&amp; key.charAt(<span class="hljs-number">0</span>) === <span class="hljs-string">'$'</span> &amp;&amp; key.charAt(<span class="hljs-number">1</span>) === <span class="hljs-string">'$'</span>) {
            val = <span class="hljs-literal">undefined</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isWindow(value)) {
            val = <span class="hljs-string">'$WINDOW'</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value &amp;&amp; <span class="hljs-built_in">window</span>.document === value) {
            val = <span class="hljs-string">'$DOCUMENT'</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isScope(value)) {
            val = <span class="hljs-string">'$SCOPE'</span>;
        }
        <span class="hljs-keyword">return</span> val;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toJson</span>(<span class="hljs-params">obj, pretty</span>) </span>{
        <span class="hljs-keyword">if</span> (isUndefined(obj)) <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>;
        <span class="hljs-keyword">if</span> (!isNumber(pretty)) {
            pretty = pretty ? <span class="hljs-number">2</span> : <span class="hljs-literal">null</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">JSON</span>.stringify(obj, toJsonReplacer, pretty);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fromJson</span>(<span class="hljs-params">json</span>) </span>{
        <span class="hljs-keyword">return</span> isString(json) ?
            <span class="hljs-built_in">JSON</span>.parse(json) :
            json;
    }
    <span class="hljs-keyword">var</span> ALL_COLONS = <span class="hljs-regexp">/:/g</span>;

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">timezoneToOffset</span>(<span class="hljs-params">timezone, fallback</span>) </span>{
        timezone = timezone.replace(ALL_COLONS, <span class="hljs-string">''</span>);
        <span class="hljs-keyword">var</span> requestedTimezoneOffset = <span class="hljs-built_in">Date</span>.parse(<span class="hljs-string">'Jan 01, 1970 00:00:00 '</span> + timezone) / <span class="hljs-number">60000</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">isNaN</span>(requestedTimezoneOffset) ? fallback : requestedTimezoneOffset;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addDateMinutes</span>(<span class="hljs-params">date, minutes</span>) </span>{
        date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(date.getTime());
        date.setMinutes(date.getMinutes() + minutes);
        <span class="hljs-keyword">return</span> date;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">convertTimezoneToLocal</span>(<span class="hljs-params">date, timezone, reverse</span>) </span>{
        reverse = reverse ? <span class="hljs-number">-1</span> : <span class="hljs-number">1</span>;
        <span class="hljs-keyword">var</span> dateTimezoneOffset = date.getTimezoneOffset();
        <span class="hljs-keyword">var</span> timezoneOffset = timezoneToOffset(timezone, dateTimezoneOffset);
        <span class="hljs-keyword">return</span> addDateMinutes(date, reverse * (timezoneOffset - dateTimezoneOffset));
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">startingTag</span>(<span class="hljs-params">element</span>) </span>{
        element = jqLite(element).clone();
        <span class="hljs-keyword">try</span> {
            element.empty();
        } <span class="hljs-keyword">catch</span> (e) {}
        <span class="hljs-keyword">var</span> elemHtml = jqLite(<span class="hljs-string">'&lt;div&gt;'</span>).append(element).html();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> element[<span class="hljs-number">0</span>].nodeType === NODE_TYPE_TEXT ? lowercase(elemHtml) :
                elemHtml.
            match(<span class="hljs-regexp">/^(&lt;[^&gt;]+&gt;)/</span>)[<span class="hljs-number">1</span>].
            replace(<span class="hljs-regexp">/^&lt;([\w\-]+)/</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">match, nodeName</span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-string">'&lt;'</span> + lowercase(nodeName);
            });
        } <span class="hljs-keyword">catch</span> (e) {
            <span class="hljs-keyword">return</span> lowercase(elemHtml);
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">tryDecodeURIComponent</span>(<span class="hljs-params">value</span>) </span>{
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">decodeURIComponent</span>(value);
        } <span class="hljs-keyword">catch</span> (e) {}
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseKeyValue</span>(<span class="hljs-params">keyValue</span>) </span>{
        <span class="hljs-keyword">var</span> obj = {};
        forEach((keyValue || <span class="hljs-string">""</span>).split(<span class="hljs-string">'&amp;'</span>), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">keyValue</span>) </span>{
            <span class="hljs-keyword">var</span> splitPoint, key, val;
            <span class="hljs-keyword">if</span> (keyValue) {
                key = keyValue = keyValue.replace(<span class="hljs-regexp">/\+/g</span>, <span class="hljs-string">'%20'</span>);
                splitPoint = keyValue.indexOf(<span class="hljs-string">'='</span>);
                <span class="hljs-keyword">if</span> (splitPoint !== <span class="hljs-number">-1</span>) {
                    key = keyValue.substring(<span class="hljs-number">0</span>, splitPoint);
                    val = keyValue.substring(splitPoint + <span class="hljs-number">1</span>);
                }
                key = tryDecodeURIComponent(key);
                <span class="hljs-keyword">if</span> (isDefined(key)) {
                    val = isDefined(val) ? tryDecodeURIComponent(val) : <span class="hljs-literal">true</span>;
                    <span class="hljs-keyword">if</span> (!hasOwnProperty.call(obj, key)) {
                        obj[key] = val;
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isArray(obj[key])) {
                        obj[key].push(val);
                    } <span class="hljs-keyword">else</span> {
                        obj[key] = [obj[key], val];
                    }
                }
            }
        });
        <span class="hljs-keyword">return</span> obj;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toKeyValue</span>(<span class="hljs-params">obj</span>) </span>{
        <span class="hljs-keyword">var</span> parts = [];
        forEach(obj, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, key</span>) </span>{
            <span class="hljs-keyword">if</span> (isArray(value)) {
                forEach(value, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">arrayValue</span>) </span>{
                    parts.push(encodeUriQuery(key, <span class="hljs-literal">true</span>) +
                        (arrayValue === <span class="hljs-literal">true</span> ? <span class="hljs-string">''</span> : <span class="hljs-string">'='</span> + encodeUriQuery(arrayValue, <span class="hljs-literal">true</span>)));
                });
            } <span class="hljs-keyword">else</span> {
                parts.push(encodeUriQuery(key, <span class="hljs-literal">true</span>) +
                    (value === <span class="hljs-literal">true</span> ? <span class="hljs-string">''</span> : <span class="hljs-string">'='</span> + encodeUriQuery(value, <span class="hljs-literal">true</span>)));
            }
        });
        <span class="hljs-keyword">return</span> parts.length ? parts.join(<span class="hljs-string">'&amp;'</span>) : <span class="hljs-string">''</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">encodeUriSegment</span>(<span class="hljs-params">val</span>) </span>{
        <span class="hljs-keyword">return</span> encodeUriQuery(val, <span class="hljs-literal">true</span>).
        replace(<span class="hljs-regexp">/%26/gi</span>, <span class="hljs-string">'&amp;'</span>).
        replace(<span class="hljs-regexp">/%3D/gi</span>, <span class="hljs-string">'='</span>).
        replace(<span class="hljs-regexp">/%2B/gi</span>, <span class="hljs-string">'+'</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">encodeUriQuery</span>(<span class="hljs-params">val, pctEncodeSpaces</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">encodeURIComponent</span>(val).
        replace(<span class="hljs-regexp">/%40/gi</span>, <span class="hljs-string">'@'</span>).
        replace(<span class="hljs-regexp">/%3A/gi</span>, <span class="hljs-string">':'</span>).
        replace(<span class="hljs-regexp">/%24/g</span>, <span class="hljs-string">'$'</span>).
        replace(<span class="hljs-regexp">/%2C/gi</span>, <span class="hljs-string">','</span>).
        replace(<span class="hljs-regexp">/%3B/gi</span>, <span class="hljs-string">';'</span>).
        replace(<span class="hljs-regexp">/%20/g</span>, (pctEncodeSpaces ? <span class="hljs-string">'%20'</span> : <span class="hljs-string">'+'</span>));
    }
    <span class="hljs-keyword">var</span> ngAttrPrefixes = [<span class="hljs-string">'ng-'</span>, <span class="hljs-string">'data-ng-'</span>, <span class="hljs-string">'ng:'</span>, <span class="hljs-string">'x-ng-'</span>];

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getNgAttribute</span>(<span class="hljs-params">element, ngAttr</span>) </span>{
        <span class="hljs-keyword">var</span> attr, i, ii = ngAttrPrefixes.length;
        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; ii; ++i) {
            attr = ngAttrPrefixes[i] + ngAttr;
            <span class="hljs-keyword">if</span> (isString(attr = element.getAttribute(attr))) {
                <span class="hljs-keyword">return</span> attr;
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">angularInit</span>(<span class="hljs-params">element, bootstrap</span>) </span>{
        <span class="hljs-keyword">var</span> appElement,
            <span class="hljs-built_in">module</span>,
            config = {};
        forEach(ngAttrPrefixes, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">prefix</span>) </span>{
            <span class="hljs-keyword">var</span> name = prefix + <span class="hljs-string">'app'</span>;
            <span class="hljs-keyword">if</span> (!appElement &amp;&amp; element.hasAttribute &amp;&amp; element.hasAttribute(name)) {
                appElement = element;
                <span class="hljs-built_in">module</span> = element.getAttribute(name);
            }
        });
        forEach(ngAttrPrefixes, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">prefix</span>) </span>{
            <span class="hljs-keyword">var</span> name = prefix + <span class="hljs-string">'app'</span>;
            <span class="hljs-keyword">var</span> candidate;
            <span class="hljs-keyword">if</span> (!appElement &amp;&amp; (candidate = element.querySelector(<span class="hljs-string">'['</span> + name.replace(<span class="hljs-string">':'</span>, <span class="hljs-string">'\\:'</span>) + <span class="hljs-string">']'</span>))) {
                appElement = candidate;
                <span class="hljs-built_in">module</span> = candidate.getAttribute(name);
            }
        });
        <span class="hljs-keyword">if</span> (appElement) {
            config.strictDi = getNgAttribute(appElement, <span class="hljs-string">"strict-di"</span>) !== <span class="hljs-literal">null</span>;
            bootstrap(appElement, <span class="hljs-built_in">module</span> ? [<span class="hljs-built_in">module</span>] : [], config);
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bootstrap</span>(<span class="hljs-params">element, modules, config</span>) </span>{
        <span class="hljs-keyword">if</span> (!isObject(config)) config = {};
        <span class="hljs-keyword">var</span> defaultConfig = {
            <span class="hljs-attr">strictDi</span>: <span class="hljs-literal">false</span>
        };
        config = extend(defaultConfig, config);
        <span class="hljs-keyword">var</span> doBootstrap = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            element = jqLite(element);
            <span class="hljs-keyword">if</span> (element.injector()) {
                <span class="hljs-keyword">var</span> tag = (element[<span class="hljs-number">0</span>] === <span class="hljs-built_in">window</span>.document) ? <span class="hljs-string">'document'</span> : startingTag(element);
                <span class="hljs-keyword">throw</span> ngMinErr(
                    <span class="hljs-string">'btstrpd'</span>,
                    <span class="hljs-string">"App already bootstrapped with this element '{0}'"</span>,
                    tag.replace(<span class="hljs-regexp">/&lt;/</span>, <span class="hljs-string">'&amp;lt;'</span>).replace(<span class="hljs-regexp">/&gt;/</span>, <span class="hljs-string">'&amp;gt;'</span>));
            }
            modules = modules || [];
            modules.unshift([<span class="hljs-string">'$provide'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$provide</span>) </span>{
                $provide.value(<span class="hljs-string">'$rootElement'</span>, element);
            }]);
            <span class="hljs-keyword">if</span> (config.debugInfoEnabled) {
                modules.push([<span class="hljs-string">'$compileProvider'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$compileProvider</span>) </span>{
                    $compileProvider.debugInfoEnabled(<span class="hljs-literal">true</span>);
                }]);
            }
            modules.unshift(<span class="hljs-string">'ng'</span>);
            <span class="hljs-keyword">var</span> injector = createInjector(modules, config.strictDi);
            injector.invoke([<span class="hljs-string">'$rootScope'</span>, <span class="hljs-string">'$rootElement'</span>, <span class="hljs-string">'$compile'</span>, <span class="hljs-string">'$injector'</span>,
                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bootstrapApply</span>(<span class="hljs-params">scope, element, compile, injector</span>) </span>{
                    scope.$apply(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        element.data(<span class="hljs-string">'$injector'</span>, injector);
                        compile(element)(scope);
                    });
                }
            ]);
            <span class="hljs-keyword">return</span> injector;
        };
        <span class="hljs-keyword">var</span> NG_ENABLE_DEBUG_INFO = <span class="hljs-regexp">/^NG_ENABLE_DEBUG_INFO!/</span>;
        <span class="hljs-keyword">var</span> NG_DEFER_BOOTSTRAP = <span class="hljs-regexp">/^NG_DEFER_BOOTSTRAP!/</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span> &amp;&amp; NG_ENABLE_DEBUG_INFO.test(<span class="hljs-built_in">window</span>.name)) {
            config.debugInfoEnabled = <span class="hljs-literal">true</span>;
            <span class="hljs-built_in">window</span>.name = <span class="hljs-built_in">window</span>.name.replace(NG_ENABLE_DEBUG_INFO, <span class="hljs-string">''</span>);
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span> &amp;&amp; !NG_DEFER_BOOTSTRAP.test(<span class="hljs-built_in">window</span>.name)) {
            <span class="hljs-keyword">return</span> doBootstrap();
        }
        <span class="hljs-built_in">window</span>.name = <span class="hljs-built_in">window</span>.name.replace(NG_DEFER_BOOTSTRAP, <span class="hljs-string">''</span>);
        angular.resumeBootstrap = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">extraModules</span>) </span>{
            forEach(extraModules, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module</span>) </span>{
                modules.push(<span class="hljs-built_in">module</span>);
            });
            <span class="hljs-keyword">return</span> doBootstrap();
        };
        <span class="hljs-keyword">if</span> (isFunction(angular.resumeDeferredBootstrap)) {
            angular.resumeDeferredBootstrap();
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reloadWithDebugInfo</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-built_in">window</span>.name = <span class="hljs-string">'NG_ENABLE_DEBUG_INFO!'</span> + <span class="hljs-built_in">window</span>.name;
        <span class="hljs-built_in">window</span>.location.reload();
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getTestability</span>(<span class="hljs-params">rootElement</span>) </span>{
        <span class="hljs-keyword">var</span> injector = angular.element(rootElement).injector();
        <span class="hljs-keyword">if</span> (!injector) {
            <span class="hljs-keyword">throw</span> ngMinErr(<span class="hljs-string">'test'</span>,
                <span class="hljs-string">'no injector found for element argument to getTestability'</span>);
        }
        <span class="hljs-keyword">return</span> injector.get(<span class="hljs-string">'$$testability'</span>);
    }
    <span class="hljs-keyword">var</span> SNAKE_CASE_REGEXP = <span class="hljs-regexp">/[A-Z]/g</span>;

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">snake_case</span>(<span class="hljs-params">name, separator</span>) </span>{
        separator = separator || <span class="hljs-string">'_'</span>;
        <span class="hljs-keyword">return</span> name.replace(SNAKE_CASE_REGEXP, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">letter, pos</span>) </span>{
            <span class="hljs-keyword">return</span> (pos ? separator : <span class="hljs-string">''</span>) + letter.toLowerCase();
        });
    }
    <span class="hljs-keyword">var</span> bindJQueryFired = <span class="hljs-literal">false</span>;

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bindJQuery</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> originalCleanData;
        <span class="hljs-keyword">if</span> (bindJQueryFired) {
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">var</span> jqName = jq();
        jQuery = isUndefined(jqName) ? <span class="hljs-built_in">window</span>.jQuery :
            !jqName ? <span class="hljs-literal">undefined</span> :
            <span class="hljs-built_in">window</span>[jqName];
        <span class="hljs-keyword">if</span> (jQuery &amp;&amp; jQuery.fn.on) {
            jqLite = jQuery;
            extend(jQuery.fn, {
                <span class="hljs-attr">scope</span>: JQLitePrototype.scope,
                <span class="hljs-attr">isolateScope</span>: JQLitePrototype.isolateScope,
                <span class="hljs-attr">controller</span>: JQLitePrototype.controller,
                <span class="hljs-attr">injector</span>: JQLitePrototype.injector,
                <span class="hljs-attr">inheritedData</span>: JQLitePrototype.inheritedData
            });
            originalCleanData = jQuery.cleanData;
            jQuery.cleanData = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">elems</span>) </span>{
                <span class="hljs-keyword">var</span> events;
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, elem;
                    (elem = elems[i]) != <span class="hljs-literal">null</span>; i++) {
                    events = jQuery._data(elem, <span class="hljs-string">"events"</span>);
                    <span class="hljs-keyword">if</span> (events &amp;&amp; events.$destroy) {
                        jQuery(elem).triggerHandler(<span class="hljs-string">'$destroy'</span>);
                    }
                }
                originalCleanData(elems);
            };
        } <span class="hljs-keyword">else</span> {
            jqLite = JQLite;
        }
        angular.element = jqLite;
        bindJQueryFired = <span class="hljs-literal">true</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">assertArg</span>(<span class="hljs-params">arg, name, reason</span>) </span>{
        <span class="hljs-keyword">if</span> (!arg) {
            <span class="hljs-keyword">throw</span> ngMinErr(<span class="hljs-string">'areq'</span>, <span class="hljs-string">"Argument '{0}' is {1}"</span>, (name || <span class="hljs-string">'?'</span>), (reason || <span class="hljs-string">"required"</span>));
        }
        <span class="hljs-keyword">return</span> arg;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">assertArgFn</span>(<span class="hljs-params">arg, name, acceptArrayAnnotation</span>) </span>{
        <span class="hljs-keyword">if</span> (acceptArrayAnnotation &amp;&amp; isArray(arg)) {
            arg = arg[arg.length - <span class="hljs-number">1</span>];
        }
        assertArg(isFunction(arg), name, <span class="hljs-string">'not a function, got '</span> +
            (arg &amp;&amp; <span class="hljs-keyword">typeof</span> arg === <span class="hljs-string">'object'</span> ? arg.constructor.name || <span class="hljs-string">'Object'</span> : <span class="hljs-keyword">typeof</span> arg));
        <span class="hljs-keyword">return</span> arg;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">assertNotHasOwnProperty</span>(<span class="hljs-params">name, context</span>) </span>{
        <span class="hljs-keyword">if</span> (name === <span class="hljs-string">'hasOwnProperty'</span>) {
            <span class="hljs-keyword">throw</span> ngMinErr(<span class="hljs-string">'badname'</span>, <span class="hljs-string">"hasOwnProperty is not a valid {0} name"</span>, context);
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getter</span>(<span class="hljs-params">obj, path, bindFnToScope</span>) </span>{
        <span class="hljs-keyword">if</span> (!path) <span class="hljs-keyword">return</span> obj;
        <span class="hljs-keyword">var</span> keys = path.split(<span class="hljs-string">'.'</span>);
        <span class="hljs-keyword">var</span> key;
        <span class="hljs-keyword">var</span> lastInstance = obj;
        <span class="hljs-keyword">var</span> len = keys.length;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) {
            key = keys[i];
            <span class="hljs-keyword">if</span> (obj) {
                obj = (lastInstance = obj)[key];
            }
        }
        <span class="hljs-keyword">if</span> (!bindFnToScope &amp;&amp; isFunction(obj)) {
            <span class="hljs-keyword">return</span> bind(lastInstance, obj);
        }
        <span class="hljs-keyword">return</span> obj;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getBlockNodes</span>(<span class="hljs-params">nodes</span>) </span>{
        <span class="hljs-keyword">var</span> node = nodes[<span class="hljs-number">0</span>];
        <span class="hljs-keyword">var</span> endNode = nodes[nodes.length - <span class="hljs-number">1</span>];
        <span class="hljs-keyword">var</span> blockNodes;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>; node !== endNode &amp;&amp; (node = node.nextSibling); i++) {
            <span class="hljs-keyword">if</span> (blockNodes || nodes[i] !== node) {
                <span class="hljs-keyword">if</span> (!blockNodes) {
                    blockNodes = jqLite(slice.call(nodes, <span class="hljs-number">0</span>, i));
                }
                blockNodes.push(node);
            }
        }
        <span class="hljs-keyword">return</span> blockNodes || nodes;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createMap</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>);
    }
    <span class="hljs-keyword">var</span> NODE_TYPE_ELEMENT = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">var</span> NODE_TYPE_ATTRIBUTE = <span class="hljs-number">2</span>;
    <span class="hljs-keyword">var</span> NODE_TYPE_TEXT = <span class="hljs-number">3</span>;
    <span class="hljs-keyword">var</span> NODE_TYPE_COMMENT = <span class="hljs-number">8</span>;
    <span class="hljs-keyword">var</span> NODE_TYPE_DOCUMENT = <span class="hljs-number">9</span>;
    <span class="hljs-keyword">var</span> NODE_TYPE_DOCUMENT_FRAGMENT = <span class="hljs-number">11</span>;

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setupModuleLoader</span>(<span class="hljs-params">window</span>) </span>{
        <span class="hljs-keyword">var</span> $injectorMinErr = minErr(<span class="hljs-string">'$injector'</span>);
        <span class="hljs-keyword">var</span> ngMinErr = minErr(<span class="hljs-string">'ng'</span>);

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ensure</span>(<span class="hljs-params">obj, name, factory</span>) </span>{
            <span class="hljs-keyword">return</span> obj[name] || (obj[name] = factory());
        }
        <span class="hljs-keyword">var</span> angular = ensure(<span class="hljs-built_in">window</span>, <span class="hljs-string">'angular'</span>, <span class="hljs-built_in">Object</span>);
        angular.$$minErr = angular.$$minErr || minErr;
        <span class="hljs-keyword">return</span> ensure(angular, <span class="hljs-string">'module'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> modules = {};
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">module</span>(<span class="hljs-params">name, requires, configFn</span>) </span>{
                <span class="hljs-keyword">var</span> assertNotHasOwnProperty = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name, context</span>) </span>{
                    <span class="hljs-keyword">if</span> (name === <span class="hljs-string">'hasOwnProperty'</span>) {
                        <span class="hljs-keyword">throw</span> ngMinErr(<span class="hljs-string">'badname'</span>, <span class="hljs-string">'hasOwnProperty is not a valid {0} name'</span>, context);
                    }
                };
                assertNotHasOwnProperty(name, <span class="hljs-string">'module'</span>);
                <span class="hljs-keyword">if</span> (requires &amp;&amp; modules.hasOwnProperty(name)) {
                    modules[name] = <span class="hljs-literal">null</span>;
                }
                <span class="hljs-keyword">return</span> ensure(modules, name, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">if</span> (!requires) {
                        <span class="hljs-keyword">throw</span> $injectorMinErr(<span class="hljs-string">'nomod'</span>, <span class="hljs-string">"Module '{0}' is not available! You either misspelled "</span> +
                            <span class="hljs-string">"the module name or forgot to load it. If registering a module ensure that you "</span> +
                            <span class="hljs-string">"specify the dependencies as the second argument."</span>, name);
                    }
                    <span class="hljs-keyword">var</span> invokeQueue = [];
                    <span class="hljs-keyword">var</span> configBlocks = [];
                    <span class="hljs-keyword">var</span> runBlocks = [];
                    <span class="hljs-keyword">var</span> config = invokeLater(<span class="hljs-string">'$injector'</span>, <span class="hljs-string">'invoke'</span>, <span class="hljs-string">'push'</span>, configBlocks);
                    <span class="hljs-keyword">var</span> moduleInstance = {
                        <span class="hljs-attr">_invokeQueue</span>: invokeQueue,
                        <span class="hljs-attr">_configBlocks</span>: configBlocks,
                        <span class="hljs-attr">_runBlocks</span>: runBlocks,
                        <span class="hljs-attr">requires</span>: requires,
                        <span class="hljs-attr">name</span>: name,
                        <span class="hljs-attr">provider</span>: invokeLaterAndSetModuleName(<span class="hljs-string">'$provide'</span>, <span class="hljs-string">'provider'</span>),
                        <span class="hljs-attr">factory</span>: invokeLaterAndSetModuleName(<span class="hljs-string">'$provide'</span>, <span class="hljs-string">'factory'</span>),
                        <span class="hljs-attr">service</span>: invokeLaterAndSetModuleName(<span class="hljs-string">'$provide'</span>, <span class="hljs-string">'service'</span>),
                        <span class="hljs-attr">value</span>: invokeLater(<span class="hljs-string">'$provide'</span>, <span class="hljs-string">'value'</span>),
                        <span class="hljs-attr">constant</span>: invokeLater(<span class="hljs-string">'$provide'</span>, <span class="hljs-string">'constant'</span>, <span class="hljs-string">'unshift'</span>),
                        <span class="hljs-attr">decorator</span>: invokeLaterAndSetModuleName(<span class="hljs-string">'$provide'</span>, <span class="hljs-string">'decorator'</span>),
                        <span class="hljs-attr">animation</span>: invokeLaterAndSetModuleName(<span class="hljs-string">'$animateProvider'</span>, <span class="hljs-string">'register'</span>),
                        <span class="hljs-attr">filter</span>: invokeLaterAndSetModuleName(<span class="hljs-string">'$filterProvider'</span>, <span class="hljs-string">'register'</span>),
                        <span class="hljs-attr">controller</span>: invokeLaterAndSetModuleName(<span class="hljs-string">'$controllerProvider'</span>, <span class="hljs-string">'register'</span>),
                        <span class="hljs-attr">directive</span>: invokeLaterAndSetModuleName(<span class="hljs-string">'$compileProvider'</span>, <span class="hljs-string">'directive'</span>),
                        <span class="hljs-attr">component</span>: invokeLaterAndSetModuleName(<span class="hljs-string">'$compileProvider'</span>, <span class="hljs-string">'component'</span>),
                        <span class="hljs-attr">config</span>: config,
                        <span class="hljs-attr">run</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">block</span>) </span>{
                            runBlocks.push(block);
                            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
                        }
                    };
                    <span class="hljs-keyword">if</span> (configFn) {
                        config(configFn);
                    }
                    <span class="hljs-keyword">return</span> moduleInstance;

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">invokeLater</span>(<span class="hljs-params">provider, method, insertMethod, queue</span>) </span>{
                        <span class="hljs-keyword">if</span> (!queue) queue = invokeQueue;
                        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            queue[insertMethod || <span class="hljs-string">'push'</span>]([provider, method, <span class="hljs-built_in">arguments</span>]);
                            <span class="hljs-keyword">return</span> moduleInstance;
                        };
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">invokeLaterAndSetModuleName</span>(<span class="hljs-params">provider, method</span>) </span>{
                        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">recipeName, factoryFunction</span>) </span>{
                            <span class="hljs-keyword">if</span> (factoryFunction &amp;&amp; isFunction(factoryFunction)) factoryFunction.$$moduleName = name;
                            invokeQueue.push([provider, method, <span class="hljs-built_in">arguments</span>]);
                            <span class="hljs-keyword">return</span> moduleInstance;
                        };
                    }
                });
            };
        });
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">shallowCopy</span>(<span class="hljs-params">src, dst</span>) </span>{
        <span class="hljs-keyword">if</span> (isArray(src)) {
            dst = dst || [];
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, ii = src.length; i &lt; ii; i++) {
                dst[i] = src[i];
            }
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isObject(src)) {
            dst = dst || {};
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> src) {
                <span class="hljs-keyword">if</span> (!(key.charAt(<span class="hljs-number">0</span>) === <span class="hljs-string">'$'</span> &amp;&amp; key.charAt(<span class="hljs-number">1</span>) === <span class="hljs-string">'$'</span>)) {
                    dst[key] = src[key];
                }
            }
        }
        <span class="hljs-keyword">return</span> dst || src;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">serializeObject</span>(<span class="hljs-params">obj</span>) </span>{
        <span class="hljs-keyword">var</span> seen = [];
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">JSON</span>.stringify(obj, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key, val</span>) </span>{
            val = toJsonReplacer(key, val);
            <span class="hljs-keyword">if</span> (isObject(val)) {
                <span class="hljs-keyword">if</span> (seen.indexOf(val) &gt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">'...'</span>;
                seen.push(val);
            }
            <span class="hljs-keyword">return</span> val;
        });
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toDebugString</span>(<span class="hljs-params">obj</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> obj === <span class="hljs-string">'function'</span>) {
            <span class="hljs-keyword">return</span> obj.toString().replace(<span class="hljs-regexp">/ \{[\s\S]*$/</span>, <span class="hljs-string">''</span>);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isUndefined(obj)) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">'undefined'</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> obj !== <span class="hljs-string">'string'</span>) {
            <span class="hljs-keyword">return</span> serializeObject(obj);
        }
        <span class="hljs-keyword">return</span> obj;
    }
    <span class="hljs-keyword">var</span> version = {
        <span class="hljs-attr">full</span>: <span class="hljs-string">'1.5.8'</span>,
        <span class="hljs-attr">major</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">minor</span>: <span class="hljs-number">5</span>,
        <span class="hljs-attr">dot</span>: <span class="hljs-number">8</span>,
        <span class="hljs-attr">codeName</span>: <span class="hljs-string">'arbitrary-fallbacks'</span>
    };

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">publishExternalAPI</span>(<span class="hljs-params">angular</span>) </span>{
        extend(angular, {
            <span class="hljs-string">'bootstrap'</span>: bootstrap,
            <span class="hljs-string">'copy'</span>: copy,
            <span class="hljs-string">'extend'</span>: extend,
            <span class="hljs-string">'merge'</span>: merge,
            <span class="hljs-string">'equals'</span>: equals,
            <span class="hljs-string">'element'</span>: jqLite,
            <span class="hljs-string">'forEach'</span>: forEach,
            <span class="hljs-string">'injector'</span>: createInjector,
            <span class="hljs-string">'noop'</span>: noop,
            <span class="hljs-string">'bind'</span>: bind,
            <span class="hljs-string">'toJson'</span>: toJson,
            <span class="hljs-string">'fromJson'</span>: fromJson,
            <span class="hljs-string">'identity'</span>: identity,
            <span class="hljs-string">'isUndefined'</span>: isUndefined,
            <span class="hljs-string">'isDefined'</span>: isDefined,
            <span class="hljs-string">'isString'</span>: isString,
            <span class="hljs-string">'isFunction'</span>: isFunction,
            <span class="hljs-string">'isObject'</span>: isObject,
            <span class="hljs-string">'isNumber'</span>: isNumber,
            <span class="hljs-string">'isElement'</span>: isElement,
            <span class="hljs-string">'isArray'</span>: isArray,
            <span class="hljs-string">'version'</span>: version,
            <span class="hljs-string">'isDate'</span>: isDate,
            <span class="hljs-string">'lowercase'</span>: lowercase,
            <span class="hljs-string">'uppercase'</span>: uppercase,
            <span class="hljs-string">'callbacks'</span>: {
                <span class="hljs-attr">$$counter</span>: <span class="hljs-number">0</span>
            },
            <span class="hljs-string">'getTestability'</span>: getTestability,
            <span class="hljs-string">'$$minErr'</span>: minErr,
            <span class="hljs-string">'$$csp'</span>: csp,
            <span class="hljs-string">'reloadWithDebugInfo'</span>: reloadWithDebugInfo
        });
        angularModule = setupModuleLoader(<span class="hljs-built_in">window</span>);
        angularModule(<span class="hljs-string">'ng'</span>, [<span class="hljs-string">'ngLocale'</span>], [<span class="hljs-string">'$provide'</span>,
            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngModule</span>(<span class="hljs-params">$provide</span>) </span>{
                $provide.provider({
                    <span class="hljs-attr">$$sanitizeUri</span>: $$SanitizeUriProvider
                });
                $provide.provider(<span class="hljs-string">'$compile'</span>, $CompileProvider).
                directive({
                    <span class="hljs-attr">a</span>: htmlAnchorDirective,
                    <span class="hljs-attr">input</span>: inputDirective,
                    <span class="hljs-attr">textarea</span>: inputDirective,
                    <span class="hljs-attr">form</span>: formDirective,
                    <span class="hljs-attr">script</span>: scriptDirective,
                    <span class="hljs-attr">select</span>: selectDirective,
                    <span class="hljs-attr">style</span>: styleDirective,
                    <span class="hljs-attr">option</span>: optionDirective,
                    <span class="hljs-attr">ngBind</span>: ngBindDirective,
                    <span class="hljs-attr">ngBindHtml</span>: ngBindHtmlDirective,
                    <span class="hljs-attr">ngBindTemplate</span>: ngBindTemplateDirective,
                    <span class="hljs-attr">ngClass</span>: ngClassDirective,
                    <span class="hljs-attr">ngClassEven</span>: ngClassEvenDirective,
                    <span class="hljs-attr">ngClassOdd</span>: ngClassOddDirective,
                    <span class="hljs-attr">ngCloak</span>: ngCloakDirective,
                    <span class="hljs-attr">ngController</span>: ngControllerDirective,
                    <span class="hljs-attr">ngForm</span>: ngFormDirective,
                    <span class="hljs-attr">ngHide</span>: ngHideDirective,
                    <span class="hljs-attr">ngIf</span>: ngIfDirective,
                    <span class="hljs-attr">ngInclude</span>: ngIncludeDirective,
                    <span class="hljs-attr">ngInit</span>: ngInitDirective,
                    <span class="hljs-attr">ngNonBindable</span>: ngNonBindableDirective,
                    <span class="hljs-attr">ngPluralize</span>: ngPluralizeDirective,
                    <span class="hljs-attr">ngRepeat</span>: ngRepeatDirective,
                    <span class="hljs-attr">ngShow</span>: ngShowDirective,
                    <span class="hljs-attr">ngStyle</span>: ngStyleDirective,
                    <span class="hljs-attr">ngSwitch</span>: ngSwitchDirective,
                    <span class="hljs-attr">ngSwitchWhen</span>: ngSwitchWhenDirective,
                    <span class="hljs-attr">ngSwitchDefault</span>: ngSwitchDefaultDirective,
                    <span class="hljs-attr">ngOptions</span>: ngOptionsDirective,
                    <span class="hljs-attr">ngTransclude</span>: ngTranscludeDirective,
                    <span class="hljs-attr">ngModel</span>: ngModelDirective,
                    <span class="hljs-attr">ngList</span>: ngListDirective,
                    <span class="hljs-attr">ngChange</span>: ngChangeDirective,
                    <span class="hljs-attr">pattern</span>: patternDirective,
                    <span class="hljs-attr">ngPattern</span>: patternDirective,
                    <span class="hljs-attr">required</span>: requiredDirective,
                    <span class="hljs-attr">ngRequired</span>: requiredDirective,
                    <span class="hljs-attr">minlength</span>: minlengthDirective,
                    <span class="hljs-attr">ngMinlength</span>: minlengthDirective,
                    <span class="hljs-attr">maxlength</span>: maxlengthDirective,
                    <span class="hljs-attr">ngMaxlength</span>: maxlengthDirective,
                    <span class="hljs-attr">ngValue</span>: ngValueDirective,
                    <span class="hljs-attr">ngModelOptions</span>: ngModelOptionsDirective
                }).
                directive({
                    <span class="hljs-attr">ngInclude</span>: ngIncludeFillContentDirective
                }).
                directive(ngAttributeAliasDirectives).
                directive(ngEventDirectives);
                $provide.provider({
                    <span class="hljs-attr">$anchorScroll</span>: $AnchorScrollProvider,
                    <span class="hljs-attr">$animate</span>: $AnimateProvider,
                    <span class="hljs-attr">$animateCss</span>: $CoreAnimateCssProvider,
                    <span class="hljs-attr">$$animateJs</span>: $$CoreAnimateJsProvider,
                    <span class="hljs-attr">$$animateQueue</span>: $$CoreAnimateQueueProvider,
                    <span class="hljs-attr">$$AnimateRunner</span>: $$AnimateRunnerFactoryProvider,
                    <span class="hljs-attr">$$animateAsyncRun</span>: $$AnimateAsyncRunFactoryProvider,
                    <span class="hljs-attr">$browser</span>: $BrowserProvider,
                    <span class="hljs-attr">$cacheFactory</span>: $CacheFactoryProvider,
                    <span class="hljs-attr">$controller</span>: $ControllerProvider,
                    <span class="hljs-attr">$document</span>: $DocumentProvider,
                    <span class="hljs-attr">$exceptionHandler</span>: $ExceptionHandlerProvider,
                    <span class="hljs-attr">$filter</span>: $FilterProvider,
                    <span class="hljs-attr">$$forceReflow</span>: $$ForceReflowProvider,
                    <span class="hljs-attr">$interpolate</span>: $InterpolateProvider,
                    <span class="hljs-attr">$interval</span>: $IntervalProvider,
                    <span class="hljs-attr">$http</span>: $HttpProvider,
                    <span class="hljs-attr">$httpParamSerializer</span>: $HttpParamSerializerProvider,
                    <span class="hljs-attr">$httpParamSerializerJQLike</span>: $HttpParamSerializerJQLikeProvider,
                    <span class="hljs-attr">$httpBackend</span>: $HttpBackendProvider,
                    <span class="hljs-attr">$xhrFactory</span>: $xhrFactoryProvider,
                    <span class="hljs-attr">$jsonpCallbacks</span>: $jsonpCallbacksProvider,
                    <span class="hljs-attr">$location</span>: $LocationProvider,
                    <span class="hljs-attr">$log</span>: $LogProvider,
                    <span class="hljs-attr">$parse</span>: $ParseProvider,
                    <span class="hljs-attr">$rootScope</span>: $RootScopeProvider,
                    <span class="hljs-attr">$q</span>: $QProvider,
                    <span class="hljs-attr">$$q</span>: $$QProvider,
                    <span class="hljs-attr">$sce</span>: $SceProvider,
                    <span class="hljs-attr">$sceDelegate</span>: $SceDelegateProvider,
                    <span class="hljs-attr">$sniffer</span>: $SnifferProvider,
                    <span class="hljs-attr">$templateCache</span>: $TemplateCacheProvider,
                    <span class="hljs-attr">$templateRequest</span>: $TemplateRequestProvider,
                    <span class="hljs-attr">$$testability</span>: $$TestabilityProvider,
                    <span class="hljs-attr">$timeout</span>: $TimeoutProvider,
                    <span class="hljs-attr">$window</span>: $WindowProvider,
                    <span class="hljs-attr">$$rAF</span>: $$RAFProvider,
                    <span class="hljs-attr">$$jqLite</span>: $$jqLiteProvider,
                    <span class="hljs-attr">$$HashMap</span>: $$HashMapProvider,
                    <span class="hljs-attr">$$cookieReader</span>: $$CookieReaderProvider
                });
            }
        ]);
    }
    JQLite.expando = <span class="hljs-string">'ng339'</span>;
    <span class="hljs-keyword">var</span> jqCache = JQLite.cache = {},
        jqId = <span class="hljs-number">1</span>,
        addEventListenerFn = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, type, fn</span>) </span>{
            element.addEventListener(type, fn, <span class="hljs-literal">false</span>);
        },
        removeEventListenerFn = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, type, fn</span>) </span>{
            element.removeEventListener(type, fn, <span class="hljs-literal">false</span>);
        };
    JQLite._data = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">node</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.cache[node[<span class="hljs-keyword">this</span>.expando]] || {};
    };

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jqNextId</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> ++jqId;
    }
    <span class="hljs-keyword">var</span> SPECIAL_CHARS_REGEXP = <span class="hljs-regexp">/([\:\-\_]+(.))/g</span>;
    <span class="hljs-keyword">var</span> MOZ_HACK_REGEXP = <span class="hljs-regexp">/^moz([A-Z])/</span>;
    <span class="hljs-keyword">var</span> MOUSE_EVENT_MAP = {
        <span class="hljs-attr">mouseleave</span>: <span class="hljs-string">"mouseout"</span>,
        <span class="hljs-attr">mouseenter</span>: <span class="hljs-string">"mouseover"</span>
    };
    <span class="hljs-keyword">var</span> jqLiteMinErr = minErr(<span class="hljs-string">'jqLite'</span>);

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">camelCase</span>(<span class="hljs-params">name</span>) </span>{
        <span class="hljs-keyword">return</span> name.
        replace(SPECIAL_CHARS_REGEXP, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">_, separator, letter, offset</span>) </span>{
            <span class="hljs-keyword">return</span> offset ? letter.toUpperCase() : letter;
        }).
        replace(MOZ_HACK_REGEXP, <span class="hljs-string">'Moz$1'</span>);
    }
    <span class="hljs-keyword">var</span> SINGLE_TAG_REGEXP = <span class="hljs-regexp">/^&lt;([\w-]+)\s*\/?&gt;(?:&lt;\/\1&gt;|)$/</span>;
    <span class="hljs-keyword">var</span> HTML_REGEXP = <span class="hljs-regexp">/&lt;|&amp;#?\w+;/</span>;
    <span class="hljs-keyword">var</span> TAG_NAME_REGEXP = <span class="hljs-regexp">/&lt;([\w:-]+)/</span>;
    <span class="hljs-keyword">var</span> XHTML_TAG_REGEXP = <span class="hljs-regexp">/&lt;(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^&gt;]*)\/&gt;/gi</span>;
    <span class="hljs-keyword">var</span> wrapMap = {
        <span class="hljs-string">'option'</span>: [<span class="hljs-number">1</span>, <span class="hljs-string">'&lt;select multiple="multiple"&gt;'</span>, <span class="hljs-string">'&lt;/select&gt;'</span>],
        <span class="hljs-string">'thead'</span>: [<span class="hljs-number">1</span>, <span class="hljs-string">'&lt;table&gt;'</span>, <span class="hljs-string">'&lt;/table&gt;'</span>],
        <span class="hljs-string">'col'</span>: [<span class="hljs-number">2</span>, <span class="hljs-string">'&lt;table&gt;&lt;colgroup&gt;'</span>, <span class="hljs-string">'&lt;/colgroup&gt;&lt;/table&gt;'</span>],
        <span class="hljs-string">'tr'</span>: [<span class="hljs-number">2</span>, <span class="hljs-string">'&lt;table&gt;&lt;tbody&gt;'</span>, <span class="hljs-string">'&lt;/tbody&gt;&lt;/table&gt;'</span>],
        <span class="hljs-string">'td'</span>: [<span class="hljs-number">3</span>, <span class="hljs-string">'&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;'</span>, <span class="hljs-string">'&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;'</span>],
        <span class="hljs-string">'_default'</span>: [<span class="hljs-number">0</span>, <span class="hljs-string">""</span>, <span class="hljs-string">""</span>]
    };
    wrapMap.optgroup = wrapMap.option;
    wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;
    wrapMap.th = wrapMap.td;

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jqLiteIsTextNode</span>(<span class="hljs-params">html</span>) </span>{
        <span class="hljs-keyword">return</span> !HTML_REGEXP.test(html);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jqLiteAcceptsData</span>(<span class="hljs-params">node</span>) </span>{
        <span class="hljs-keyword">var</span> nodeType = node.nodeType;
        <span class="hljs-keyword">return</span> nodeType === NODE_TYPE_ELEMENT || !nodeType || nodeType === NODE_TYPE_DOCUMENT;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jqLiteHasData</span>(<span class="hljs-params">node</span>) </span>{
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> jqCache[node.ng339]) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jqLiteCleanData</span>(<span class="hljs-params">nodes</span>) </span>{
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, ii = nodes.length; i &lt; ii; i++) {
            jqLiteRemoveData(nodes[i]);
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jqLiteBuildFragment</span>(<span class="hljs-params">html, context</span>) </span>{
        <span class="hljs-keyword">var</span> tmp, tag, wrap,
            fragment = context.createDocumentFragment(),
            nodes = [],
            i;
        <span class="hljs-keyword">if</span> (jqLiteIsTextNode(html)) {
            nodes.push(context.createTextNode(html));
        } <span class="hljs-keyword">else</span> {
            tmp = fragment.appendChild(context.createElement(<span class="hljs-string">"div"</span>));
            tag = (TAG_NAME_REGEXP.exec(html) || [<span class="hljs-string">""</span>, <span class="hljs-string">""</span>])[<span class="hljs-number">1</span>].toLowerCase();
            wrap = wrapMap[tag] || wrapMap._default;
            tmp.innerHTML = wrap[<span class="hljs-number">1</span>] + html.replace(XHTML_TAG_REGEXP, <span class="hljs-string">"&lt;$1&gt;&lt;/$2&gt;"</span>) + wrap[<span class="hljs-number">2</span>];
            i = wrap[<span class="hljs-number">0</span>];
            <span class="hljs-keyword">while</span> (i--) {
                tmp = tmp.lastChild;
            }
            nodes = concat(nodes, tmp.childNodes);
            tmp = fragment.firstChild;
            tmp.textContent = <span class="hljs-string">""</span>;
        }
        fragment.textContent = <span class="hljs-string">""</span>;
        fragment.innerHTML = <span class="hljs-string">""</span>;
        forEach(nodes, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">node</span>) </span>{
            fragment.appendChild(node);
        });
        <span class="hljs-keyword">return</span> fragment;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jqLiteParseHTML</span>(<span class="hljs-params">html, context</span>) </span>{
        context = context || <span class="hljs-built_in">window</span>.document;
        <span class="hljs-keyword">var</span> parsed;
        <span class="hljs-keyword">if</span> ((parsed = SINGLE_TAG_REGEXP.exec(html))) {
            <span class="hljs-keyword">return</span> [context.createElement(parsed[<span class="hljs-number">1</span>])];
        }
        <span class="hljs-keyword">if</span> ((parsed = jqLiteBuildFragment(html, context))) {
            <span class="hljs-keyword">return</span> parsed.childNodes;
        }
        <span class="hljs-keyword">return</span> [];
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jqLiteWrapNode</span>(<span class="hljs-params">node, wrapper</span>) </span>{
        <span class="hljs-keyword">var</span> parent = node.parentNode;
        <span class="hljs-keyword">if</span> (parent) {
            parent.replaceChild(wrapper, node);
        }
        wrapper.appendChild(node);
    }
    <span class="hljs-keyword">var</span> jqLiteContains = <span class="hljs-built_in">window</span>.Node.prototype.contains || <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">arg</span>) </span>{
        <span class="hljs-keyword">return</span> !!(<span class="hljs-keyword">this</span>.compareDocumentPosition(arg) &amp; <span class="hljs-number">16</span>);
    };

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">JQLite</span>(<span class="hljs-params">element</span>) </span>{
        <span class="hljs-keyword">if</span> (element <span class="hljs-keyword">instanceof</span> JQLite) {
            <span class="hljs-keyword">return</span> element;
        }
        <span class="hljs-keyword">var</span> argIsString;
        <span class="hljs-keyword">if</span> (isString(element)) {
            element = trim(element);
            argIsString = <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">if</span> (!(<span class="hljs-keyword">this</span> <span class="hljs-keyword">instanceof</span> JQLite)) {
            <span class="hljs-keyword">if</span> (argIsString &amp;&amp; element.charAt(<span class="hljs-number">0</span>) != <span class="hljs-string">'&lt;'</span>) {
                <span class="hljs-keyword">throw</span> jqLiteMinErr(<span class="hljs-string">'nosel'</span>, <span class="hljs-string">'Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element'</span>);
            }
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> JQLite(element);
        }
        <span class="hljs-keyword">if</span> (argIsString) {
            jqLiteAddNodes(<span class="hljs-keyword">this</span>, jqLiteParseHTML(element));
        } <span class="hljs-keyword">else</span> {
            jqLiteAddNodes(<span class="hljs-keyword">this</span>, element);
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jqLiteClone</span>(<span class="hljs-params">element</span>) </span>{
        <span class="hljs-keyword">return</span> element.cloneNode(<span class="hljs-literal">true</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jqLiteDealoc</span>(<span class="hljs-params">element, onlyDescendants</span>) </span>{
        <span class="hljs-keyword">if</span> (!onlyDescendants) jqLiteRemoveData(element);
        <span class="hljs-keyword">if</span> (element.querySelectorAll) {
            <span class="hljs-keyword">var</span> descendants = element.querySelectorAll(<span class="hljs-string">'*'</span>);
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, l = descendants.length; i &lt; l; i++) {
                jqLiteRemoveData(descendants[i]);
            }
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jqLiteOff</span>(<span class="hljs-params">element, type, fn, unsupported</span>) </span>{
        <span class="hljs-keyword">if</span> (isDefined(unsupported)) <span class="hljs-keyword">throw</span> jqLiteMinErr(<span class="hljs-string">'offargs'</span>, <span class="hljs-string">'jqLite#off() does not support the `selector` argument'</span>);
        <span class="hljs-keyword">var</span> expandoStore = jqLiteExpandoStore(element);
        <span class="hljs-keyword">var</span> events = expandoStore &amp;&amp; expandoStore.events;
        <span class="hljs-keyword">var</span> handle = expandoStore &amp;&amp; expandoStore.handle;
        <span class="hljs-keyword">if</span> (!handle) <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">if</span> (!type) {
            <span class="hljs-keyword">for</span> (type <span class="hljs-keyword">in</span> events) {
                <span class="hljs-keyword">if</span> (type !== <span class="hljs-string">'$destroy'</span>) {
                    removeEventListenerFn(element, type, handle);
                }
                <span class="hljs-keyword">delete</span> events[type];
            }
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">var</span> removeHandler = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">type</span>) </span>{
                <span class="hljs-keyword">var</span> listenerFns = events[type];
                <span class="hljs-keyword">if</span> (isDefined(fn)) {
                    arrayRemove(listenerFns || [], fn);
                }
                <span class="hljs-keyword">if</span> (!(isDefined(fn) &amp;&amp; listenerFns &amp;&amp; listenerFns.length &gt; <span class="hljs-number">0</span>)) {
                    removeEventListenerFn(element, type, handle);
                    <span class="hljs-keyword">delete</span> events[type];
                }
            };
            forEach(type.split(<span class="hljs-string">' '</span>), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">type</span>) </span>{
                removeHandler(type);
                <span class="hljs-keyword">if</span> (MOUSE_EVENT_MAP[type]) {
                    removeHandler(MOUSE_EVENT_MAP[type]);
                }
            });
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jqLiteRemoveData</span>(<span class="hljs-params">element, name</span>) </span>{
        <span class="hljs-keyword">var</span> expandoId = element.ng339;
        <span class="hljs-keyword">var</span> expandoStore = expandoId &amp;&amp; jqCache[expandoId];
        <span class="hljs-keyword">if</span> (expandoStore) {
            <span class="hljs-keyword">if</span> (name) {
                <span class="hljs-keyword">delete</span> expandoStore.data[name];
                <span class="hljs-keyword">return</span>;
            }
            <span class="hljs-keyword">if</span> (expandoStore.handle) {
                <span class="hljs-keyword">if</span> (expandoStore.events.$destroy) {
                    expandoStore.handle({}, <span class="hljs-string">'$destroy'</span>);
                }
                jqLiteOff(element);
            }
            <span class="hljs-keyword">delete</span> jqCache[expandoId];
            element.ng339 = <span class="hljs-literal">undefined</span>;
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jqLiteExpandoStore</span>(<span class="hljs-params">element, createIfNecessary</span>) </span>{
        <span class="hljs-keyword">var</span> expandoId = element.ng339,
            expandoStore = expandoId &amp;&amp; jqCache[expandoId];
        <span class="hljs-keyword">if</span> (createIfNecessary &amp;&amp; !expandoStore) {
            element.ng339 = expandoId = jqNextId();
            expandoStore = jqCache[expandoId] = {
                <span class="hljs-attr">events</span>: {},
                <span class="hljs-attr">data</span>: {},
                <span class="hljs-attr">handle</span>: <span class="hljs-literal">undefined</span>
            };
        }
        <span class="hljs-keyword">return</span> expandoStore;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jqLiteData</span>(<span class="hljs-params">element, key, value</span>) </span>{
        <span class="hljs-keyword">if</span> (jqLiteAcceptsData(element)) {
            <span class="hljs-keyword">var</span> isSimpleSetter = isDefined(value);
            <span class="hljs-keyword">var</span> isSimpleGetter = !isSimpleSetter &amp;&amp; key &amp;&amp; !isObject(key);
            <span class="hljs-keyword">var</span> massGetter = !key;
            <span class="hljs-keyword">var</span> expandoStore = jqLiteExpandoStore(element, !isSimpleGetter);
            <span class="hljs-keyword">var</span> data = expandoStore &amp;&amp; expandoStore.data;
            <span class="hljs-keyword">if</span> (isSimpleSetter) {
                data[key] = value;
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">if</span> (massGetter) {
                    <span class="hljs-keyword">return</span> data;
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">if</span> (isSimpleGetter) {
                        <span class="hljs-keyword">return</span> data &amp;&amp; data[key];
                    } <span class="hljs-keyword">else</span> {
                        extend(data, key);
                    }
                }
            }
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jqLiteHasClass</span>(<span class="hljs-params">element, selector</span>) </span>{
        <span class="hljs-keyword">if</span> (!element.getAttribute) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">return</span> ((<span class="hljs-string">" "</span> + (element.getAttribute(<span class="hljs-string">'class'</span>) || <span class="hljs-string">''</span>) + <span class="hljs-string">" "</span>).replace(<span class="hljs-regexp">/[\n\t]/g</span>, <span class="hljs-string">" "</span>).indexOf(<span class="hljs-string">" "</span> + selector + <span class="hljs-string">" "</span>) &gt; <span class="hljs-number">-1</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jqLiteRemoveClass</span>(<span class="hljs-params">element, cssClasses</span>) </span>{
        <span class="hljs-keyword">if</span> (cssClasses &amp;&amp; element.setAttribute) {
            forEach(cssClasses.split(<span class="hljs-string">' '</span>), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">cssClass</span>) </span>{
                element.setAttribute(<span class="hljs-string">'class'</span>, trim(
                    (<span class="hljs-string">" "</span> + (element.getAttribute(<span class="hljs-string">'class'</span>) || <span class="hljs-string">''</span>) + <span class="hljs-string">" "</span>)
                    .replace(<span class="hljs-regexp">/[\n\t]/g</span>, <span class="hljs-string">" "</span>)
                    .replace(<span class="hljs-string">" "</span> + trim(cssClass) + <span class="hljs-string">" "</span>, <span class="hljs-string">" "</span>)));
            });
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jqLiteAddClass</span>(<span class="hljs-params">element, cssClasses</span>) </span>{
        <span class="hljs-keyword">if</span> (cssClasses &amp;&amp; element.setAttribute) {
            <span class="hljs-keyword">var</span> existingClasses = (<span class="hljs-string">' '</span> + (element.getAttribute(<span class="hljs-string">'class'</span>) || <span class="hljs-string">''</span>) + <span class="hljs-string">' '</span>)
                .replace(<span class="hljs-regexp">/[\n\t]/g</span>, <span class="hljs-string">" "</span>);
            forEach(cssClasses.split(<span class="hljs-string">' '</span>), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">cssClass</span>) </span>{
                cssClass = trim(cssClass);
                <span class="hljs-keyword">if</span> (existingClasses.indexOf(<span class="hljs-string">' '</span> + cssClass + <span class="hljs-string">' '</span>) === <span class="hljs-number">-1</span>) {
                    existingClasses += cssClass + <span class="hljs-string">' '</span>;
                }
            });
            element.setAttribute(<span class="hljs-string">'class'</span>, trim(existingClasses));
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jqLiteAddNodes</span>(<span class="hljs-params">root, elements</span>) </span>{
        <span class="hljs-keyword">if</span> (elements) {
            <span class="hljs-keyword">if</span> (elements.nodeType) {
                root[root.length++] = elements;
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">var</span> length = elements.length;
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> length === <span class="hljs-string">'number'</span> &amp;&amp; elements.window !== elements) {
                    <span class="hljs-keyword">if</span> (length) {
                        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; length; i++) {
                            root[root.length++] = elements[i];
                        }
                    }
                } <span class="hljs-keyword">else</span> {
                    root[root.length++] = elements;
                }
            }
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jqLiteController</span>(<span class="hljs-params">element, name</span>) </span>{
        <span class="hljs-keyword">return</span> jqLiteInheritedData(element, <span class="hljs-string">'$'</span> + (name || <span class="hljs-string">'ngController'</span>) + <span class="hljs-string">'Controller'</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jqLiteInheritedData</span>(<span class="hljs-params">element, name, value</span>) </span>{
        <span class="hljs-keyword">if</span> (element.nodeType == NODE_TYPE_DOCUMENT) {
            element = element.documentElement;
        }
        <span class="hljs-keyword">var</span> names = isArray(name) ? name : [name];
        <span class="hljs-keyword">while</span> (element) {
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, ii = names.length; i &lt; ii; i++) {
                <span class="hljs-keyword">if</span> (isDefined(value = jqLite.data(element, names[i]))) <span class="hljs-keyword">return</span> value;
            }
            element = element.parentNode || (element.nodeType === NODE_TYPE_DOCUMENT_FRAGMENT &amp;&amp; element.host);
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jqLiteEmpty</span>(<span class="hljs-params">element</span>) </span>{
        jqLiteDealoc(element, <span class="hljs-literal">true</span>);
        <span class="hljs-keyword">while</span> (element.firstChild) {
            element.removeChild(element.firstChild);
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jqLiteRemove</span>(<span class="hljs-params">element, keepData</span>) </span>{
        <span class="hljs-keyword">if</span> (!keepData) jqLiteDealoc(element);
        <span class="hljs-keyword">var</span> parent = element.parentNode;
        <span class="hljs-keyword">if</span> (parent) parent.removeChild(element);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jqLiteDocumentLoaded</span>(<span class="hljs-params">action, win</span>) </span>{
        win = win || <span class="hljs-built_in">window</span>;
        <span class="hljs-keyword">if</span> (win.document.readyState === <span class="hljs-string">'complete'</span>) {
            win.setTimeout(action);
        } <span class="hljs-keyword">else</span> {
            jqLite(win).on(<span class="hljs-string">'load'</span>, action);
        }
    }
    <span class="hljs-keyword">var</span> JQLitePrototype = JQLite.prototype = {
        <span class="hljs-attr">ready</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fn</span>) </span>{
            <span class="hljs-keyword">var</span> fired = <span class="hljs-literal">false</span>;

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">trigger</span>(<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">if</span> (fired) <span class="hljs-keyword">return</span>;
                fired = <span class="hljs-literal">true</span>;
                fn();
            }
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.document.readyState === <span class="hljs-string">'complete'</span>) {
                <span class="hljs-built_in">window</span>.setTimeout(trigger);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">this</span>.on(<span class="hljs-string">'DOMContentLoaded'</span>, trigger);
                JQLite(<span class="hljs-built_in">window</span>).on(<span class="hljs-string">'load'</span>, trigger);
            }
        },
        <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> value = [];
            forEach(<span class="hljs-keyword">this</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                value.push(<span class="hljs-string">''</span> + e);
            });
            <span class="hljs-keyword">return</span> <span class="hljs-string">'['</span> + value.join(<span class="hljs-string">', '</span>) + <span class="hljs-string">']'</span>;
        },
        <span class="hljs-attr">eq</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">index</span>) </span>{
            <span class="hljs-keyword">return</span> (index &gt;= <span class="hljs-number">0</span>) ? jqLite(<span class="hljs-keyword">this</span>[index]) : jqLite(<span class="hljs-keyword">this</span>[<span class="hljs-keyword">this</span>.length + index]);
        },
        <span class="hljs-attr">length</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">push</span>: push,
        <span class="hljs-attr">sort</span>: [].sort,
        <span class="hljs-attr">splice</span>: [].splice
    };
    <span class="hljs-keyword">var</span> BOOLEAN_ATTR = {};
    forEach(<span class="hljs-string">'multiple,selected,checked,disabled,readOnly,required,open'</span>.split(<span class="hljs-string">','</span>), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
        BOOLEAN_ATTR[lowercase(value)] = value;
    });
    <span class="hljs-keyword">var</span> BOOLEAN_ELEMENTS = {};
    forEach(<span class="hljs-string">'input,select,option,textarea,button,form,details'</span>.split(<span class="hljs-string">','</span>), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
        BOOLEAN_ELEMENTS[value] = <span class="hljs-literal">true</span>;
    });
    <span class="hljs-keyword">var</span> ALIASED_ATTR = {
        <span class="hljs-string">'ngMinlength'</span>: <span class="hljs-string">'minlength'</span>,
        <span class="hljs-string">'ngMaxlength'</span>: <span class="hljs-string">'maxlength'</span>,
        <span class="hljs-string">'ngMin'</span>: <span class="hljs-string">'min'</span>,
        <span class="hljs-string">'ngMax'</span>: <span class="hljs-string">'max'</span>,
        <span class="hljs-string">'ngPattern'</span>: <span class="hljs-string">'pattern'</span>
    };

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getBooleanAttrName</span>(<span class="hljs-params">element, name</span>) </span>{
        <span class="hljs-keyword">var</span> booleanAttr = BOOLEAN_ATTR[name.toLowerCase()];
        <span class="hljs-keyword">return</span> booleanAttr &amp;&amp; BOOLEAN_ELEMENTS[nodeName_(element)] &amp;&amp; booleanAttr;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getAliasedAttrName</span>(<span class="hljs-params">name</span>) </span>{
        <span class="hljs-keyword">return</span> ALIASED_ATTR[name];
    }
    forEach({
        <span class="hljs-attr">data</span>: jqLiteData,
        <span class="hljs-attr">removeData</span>: jqLiteRemoveData,
        <span class="hljs-attr">hasData</span>: jqLiteHasData,
        <span class="hljs-attr">cleanData</span>: jqLiteCleanData
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fn, name</span>) </span>{
        JQLite[name] = fn;
    });
    forEach({
        <span class="hljs-attr">data</span>: jqLiteData,
        <span class="hljs-attr">inheritedData</span>: jqLiteInheritedData,
        <span class="hljs-attr">scope</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>) </span>{
            <span class="hljs-keyword">return</span> jqLite.data(element, <span class="hljs-string">'$scope'</span>) || jqLiteInheritedData(element.parentNode || element, [<span class="hljs-string">'$isolateScope'</span>, <span class="hljs-string">'$scope'</span>]);
        },
        <span class="hljs-attr">isolateScope</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>) </span>{
            <span class="hljs-keyword">return</span> jqLite.data(element, <span class="hljs-string">'$isolateScope'</span>) || jqLite.data(element, <span class="hljs-string">'$isolateScopeNoTemplate'</span>);
        },
        <span class="hljs-attr">controller</span>: jqLiteController,
        <span class="hljs-attr">injector</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>) </span>{
            <span class="hljs-keyword">return</span> jqLiteInheritedData(element, <span class="hljs-string">'$injector'</span>);
        },
        <span class="hljs-attr">removeAttr</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, name</span>) </span>{
            element.removeAttribute(name);
        },
        <span class="hljs-attr">hasClass</span>: jqLiteHasClass,
        <span class="hljs-attr">css</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, name, value</span>) </span>{
            name = camelCase(name);
            <span class="hljs-keyword">if</span> (isDefined(value)) {
                element.style[name] = value;
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> element.style[name];
            }
        },
        <span class="hljs-attr">attr</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, name, value</span>) </span>{
            <span class="hljs-keyword">var</span> nodeType = element.nodeType;
            <span class="hljs-keyword">if</span> (nodeType === NODE_TYPE_TEXT || nodeType === NODE_TYPE_ATTRIBUTE || nodeType === NODE_TYPE_COMMENT) {
                <span class="hljs-keyword">return</span>;
            }
            <span class="hljs-keyword">var</span> lowercasedName = lowercase(name);
            <span class="hljs-keyword">if</span> (BOOLEAN_ATTR[lowercasedName]) {
                <span class="hljs-keyword">if</span> (isDefined(value)) {
                    <span class="hljs-keyword">if</span> (!!value) {
                        element[name] = <span class="hljs-literal">true</span>;
                        element.setAttribute(name, lowercasedName);
                    } <span class="hljs-keyword">else</span> {
                        element[name] = <span class="hljs-literal">false</span>;
                        element.removeAttribute(lowercasedName);
                    }
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">return</span> (element[name] ||
                            (element.attributes.getNamedItem(name) || noop).specified) ?
                        lowercasedName :
                        <span class="hljs-literal">undefined</span>;
                }
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isDefined(value)) {
                element.setAttribute(name, value);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (element.getAttribute) {
                <span class="hljs-keyword">var</span> ret = element.getAttribute(name, <span class="hljs-number">2</span>);
                <span class="hljs-keyword">return</span> ret === <span class="hljs-literal">null</span> ? <span class="hljs-literal">undefined</span> : ret;
            }
        },
        <span class="hljs-attr">prop</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, name, value</span>) </span>{
            <span class="hljs-keyword">if</span> (isDefined(value)) {
                element[name] = value;
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> element[name];
            }
        },
        <span class="hljs-attr">text</span>: (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            getText.$dv = <span class="hljs-string">''</span>;
            <span class="hljs-keyword">return</span> getText;

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getText</span>(<span class="hljs-params">element, value</span>) </span>{
                <span class="hljs-keyword">if</span> (isUndefined(value)) {
                    <span class="hljs-keyword">var</span> nodeType = element.nodeType;
                    <span class="hljs-keyword">return</span> (nodeType === NODE_TYPE_ELEMENT || nodeType === NODE_TYPE_TEXT) ? element.textContent : <span class="hljs-string">''</span>;
                }
                element.textContent = value;
            }
        })(),
        <span class="hljs-attr">val</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, value</span>) </span>{
            <span class="hljs-keyword">if</span> (isUndefined(value)) {
                <span class="hljs-keyword">if</span> (element.multiple &amp;&amp; nodeName_(element) === <span class="hljs-string">'select'</span>) {
                    <span class="hljs-keyword">var</span> result = [];
                    forEach(element.options, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">option</span>) </span>{
                        <span class="hljs-keyword">if</span> (option.selected) {
                            result.push(option.value || option.text);
                        }
                    });
                    <span class="hljs-keyword">return</span> result.length === <span class="hljs-number">0</span> ? <span class="hljs-literal">null</span> : result;
                }
                <span class="hljs-keyword">return</span> element.value;
            }
            element.value = value;
        },
        <span class="hljs-attr">html</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, value</span>) </span>{
            <span class="hljs-keyword">if</span> (isUndefined(value)) {
                <span class="hljs-keyword">return</span> element.innerHTML;
            }
            jqLiteDealoc(element, <span class="hljs-literal">true</span>);
            element.innerHTML = value;
        },
        <span class="hljs-attr">empty</span>: jqLiteEmpty
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fn, name</span>) </span>{
        JQLite.prototype[name] = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">arg1, arg2</span>) </span>{
            <span class="hljs-keyword">var</span> i, key;
            <span class="hljs-keyword">var</span> nodeCount = <span class="hljs-keyword">this</span>.length;
            <span class="hljs-keyword">if</span> (fn !== jqLiteEmpty &amp;&amp;
                (isUndefined((fn.length == <span class="hljs-number">2</span> &amp;&amp; (fn !== jqLiteHasClass &amp;&amp; fn !== jqLiteController)) ? arg1 : arg2))) {
                <span class="hljs-keyword">if</span> (isObject(arg1)) {
                    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; nodeCount; i++) {
                        <span class="hljs-keyword">if</span> (fn === jqLiteData) {
                            fn(<span class="hljs-keyword">this</span>[i], arg1);
                        } <span class="hljs-keyword">else</span> {
                            <span class="hljs-keyword">for</span> (key <span class="hljs-keyword">in</span> arg1) {
                                fn(<span class="hljs-keyword">this</span>[i], key, arg1[key]);
                            }
                        }
                    }
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">var</span> value = fn.$dv;
                    <span class="hljs-keyword">var</span> jj = (isUndefined(value)) ? <span class="hljs-built_in">Math</span>.min(nodeCount, <span class="hljs-number">1</span>) : nodeCount;
                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>; j &lt; jj; j++) {
                        <span class="hljs-keyword">var</span> nodeValue = fn(<span class="hljs-keyword">this</span>[j], arg1, arg2);
                        value = value ? value + nodeValue : nodeValue;
                    }
                    <span class="hljs-keyword">return</span> value;
                }
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; nodeCount; i++) {
                    fn(<span class="hljs-keyword">this</span>[i], arg1, arg2);
                }
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
            }
        };
    });

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createEventHandler</span>(<span class="hljs-params">element, events</span>) </span>{
        <span class="hljs-keyword">var</span> eventHandler = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event, type</span>) </span>{
            event.isDefaultPrevented = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> event.defaultPrevented;
            };
            <span class="hljs-keyword">var</span> eventFns = events[type || event.type];
            <span class="hljs-keyword">var</span> eventFnsLength = eventFns ? eventFns.length : <span class="hljs-number">0</span>;
            <span class="hljs-keyword">if</span> (!eventFnsLength) <span class="hljs-keyword">return</span>;
            <span class="hljs-keyword">if</span> (isUndefined(event.immediatePropagationStopped)) {
                <span class="hljs-keyword">var</span> originalStopImmediatePropagation = event.stopImmediatePropagation;
                event.stopImmediatePropagation = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                    event.immediatePropagationStopped = <span class="hljs-literal">true</span>;
                    <span class="hljs-keyword">if</span> (event.stopPropagation) {
                        event.stopPropagation();
                    }
                    <span class="hljs-keyword">if</span> (originalStopImmediatePropagation) {
                        originalStopImmediatePropagation.call(event);
                    }
                };
            }
            event.isImmediatePropagationStopped = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> event.immediatePropagationStopped === <span class="hljs-literal">true</span>;
            };
            <span class="hljs-keyword">var</span> handlerWrapper = eventFns.specialHandlerWrapper || defaultHandlerWrapper;
            <span class="hljs-keyword">if</span> ((eventFnsLength &gt; <span class="hljs-number">1</span>)) {
                eventFns = shallowCopy(eventFns);
            }
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; eventFnsLength; i++) {
                <span class="hljs-keyword">if</span> (!event.isImmediatePropagationStopped()) {
                    handlerWrapper(element, event, eventFns[i]);
                }
            }
        };
        eventHandler.elem = element;
        <span class="hljs-keyword">return</span> eventHandler;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">defaultHandlerWrapper</span>(<span class="hljs-params">element, event, handler</span>) </span>{
        handler.call(element, event);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">specialMouseHandlerWrapper</span>(<span class="hljs-params">target, event, handler</span>) </span>{
        <span class="hljs-keyword">var</span> related = event.relatedTarget;
        <span class="hljs-keyword">if</span> (!related || (related !== target &amp;&amp; !jqLiteContains.call(target, related))) {
            handler.call(target, event);
        }
    }
    forEach({
        <span class="hljs-attr">removeData</span>: jqLiteRemoveData,
        <span class="hljs-attr">on</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jqLiteOn</span>(<span class="hljs-params">element, type, fn, unsupported</span>) </span>{
            <span class="hljs-keyword">if</span> (isDefined(unsupported)) <span class="hljs-keyword">throw</span> jqLiteMinErr(<span class="hljs-string">'onargs'</span>, <span class="hljs-string">'jqLite#on() does not support the `selector` or `eventData` parameters'</span>);
            <span class="hljs-keyword">if</span> (!jqLiteAcceptsData(element)) {
                <span class="hljs-keyword">return</span>;
            }
            <span class="hljs-keyword">var</span> expandoStore = jqLiteExpandoStore(element, <span class="hljs-literal">true</span>);
            <span class="hljs-keyword">var</span> events = expandoStore.events;
            <span class="hljs-keyword">var</span> handle = expandoStore.handle;
            <span class="hljs-keyword">if</span> (!handle) {
                handle = expandoStore.handle = createEventHandler(element, events);
            }
            <span class="hljs-keyword">var</span> types = type.indexOf(<span class="hljs-string">' '</span>) &gt;= <span class="hljs-number">0</span> ? type.split(<span class="hljs-string">' '</span>) : [type];
            <span class="hljs-keyword">var</span> i = types.length;
            <span class="hljs-keyword">var</span> addHandler = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">type, specialHandlerWrapper, noEventListener</span>) </span>{
                <span class="hljs-keyword">var</span> eventFns = events[type];
                <span class="hljs-keyword">if</span> (!eventFns) {
                    eventFns = events[type] = [];
                    eventFns.specialHandlerWrapper = specialHandlerWrapper;
                    <span class="hljs-keyword">if</span> (type !== <span class="hljs-string">'$destroy'</span> &amp;&amp; !noEventListener) {
                        addEventListenerFn(element, type, handle);
                    }
                }
                eventFns.push(fn);
            };
            <span class="hljs-keyword">while</span> (i--) {
                type = types[i];
                <span class="hljs-keyword">if</span> (MOUSE_EVENT_MAP[type]) {
                    addHandler(MOUSE_EVENT_MAP[type], specialMouseHandlerWrapper);
                    addHandler(type, <span class="hljs-literal">undefined</span>, <span class="hljs-literal">true</span>);
                } <span class="hljs-keyword">else</span> {
                    addHandler(type);
                }
            }
        },
        <span class="hljs-attr">off</span>: jqLiteOff,
        <span class="hljs-attr">one</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, type, fn</span>) </span>{
            element = jqLite(element);
            element.on(type, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onFn</span>(<span class="hljs-params"></span>) </span>{
                element.off(type, fn);
                element.off(type, onFn);
            });
            element.on(type, fn);
        },
        <span class="hljs-attr">replaceWith</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, replaceNode</span>) </span>{
            <span class="hljs-keyword">var</span> index, parent = element.parentNode;
            jqLiteDealoc(element);
            forEach(<span class="hljs-keyword">new</span> JQLite(replaceNode), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">node</span>) </span>{
                <span class="hljs-keyword">if</span> (index) {
                    parent.insertBefore(node, index.nextSibling);
                } <span class="hljs-keyword">else</span> {
                    parent.replaceChild(node, element);
                }
                index = node;
            });
        },
        <span class="hljs-attr">children</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>) </span>{
            <span class="hljs-keyword">var</span> children = [];
            forEach(element.childNodes, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>) </span>{
                <span class="hljs-keyword">if</span> (element.nodeType === NODE_TYPE_ELEMENT) {
                    children.push(element);
                }
            });
            <span class="hljs-keyword">return</span> children;
        },
        <span class="hljs-attr">contents</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>) </span>{
            <span class="hljs-keyword">return</span> element.contentDocument || element.childNodes || [];
        },
        <span class="hljs-attr">append</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, node</span>) </span>{
            <span class="hljs-keyword">var</span> nodeType = element.nodeType;
            <span class="hljs-keyword">if</span> (nodeType !== NODE_TYPE_ELEMENT &amp;&amp; nodeType !== NODE_TYPE_DOCUMENT_FRAGMENT) <span class="hljs-keyword">return</span>;
            node = <span class="hljs-keyword">new</span> JQLite(node);
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, ii = node.length; i &lt; ii; i++) {
                <span class="hljs-keyword">var</span> child = node[i];
                element.appendChild(child);
            }
        },
        <span class="hljs-attr">prepend</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, node</span>) </span>{
            <span class="hljs-keyword">if</span> (element.nodeType === NODE_TYPE_ELEMENT) {
                <span class="hljs-keyword">var</span> index = element.firstChild;
                forEach(<span class="hljs-keyword">new</span> JQLite(node), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">child</span>) </span>{
                    element.insertBefore(child, index);
                });
            }
        },
        <span class="hljs-attr">wrap</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, wrapNode</span>) </span>{
            jqLiteWrapNode(element, jqLite(wrapNode).eq(<span class="hljs-number">0</span>).clone()[<span class="hljs-number">0</span>]);
        },
        <span class="hljs-attr">remove</span>: jqLiteRemove,
        <span class="hljs-attr">detach</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>) </span>{
            jqLiteRemove(element, <span class="hljs-literal">true</span>);
        },
        <span class="hljs-attr">after</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, newElement</span>) </span>{
            <span class="hljs-keyword">var</span> index = element,
                parent = element.parentNode;
            newElement = <span class="hljs-keyword">new</span> JQLite(newElement);
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, ii = newElement.length; i &lt; ii; i++) {
                <span class="hljs-keyword">var</span> node = newElement[i];
                parent.insertBefore(node, index.nextSibling);
                index = node;
            }
        },
        <span class="hljs-attr">addClass</span>: jqLiteAddClass,
        <span class="hljs-attr">removeClass</span>: jqLiteRemoveClass,
        <span class="hljs-attr">toggleClass</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, selector, condition</span>) </span>{
            <span class="hljs-keyword">if</span> (selector) {
                forEach(selector.split(<span class="hljs-string">' '</span>), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">className</span>) </span>{
                    <span class="hljs-keyword">var</span> classCondition = condition;
                    <span class="hljs-keyword">if</span> (isUndefined(classCondition)) {
                        classCondition = !jqLiteHasClass(element, className);
                    }
                    (classCondition ? jqLiteAddClass : jqLiteRemoveClass)(element, className);
                });
            }
        },
        <span class="hljs-attr">parent</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>) </span>{
            <span class="hljs-keyword">var</span> parent = element.parentNode;
            <span class="hljs-keyword">return</span> parent &amp;&amp; parent.nodeType !== NODE_TYPE_DOCUMENT_FRAGMENT ? parent : <span class="hljs-literal">null</span>;
        },
        <span class="hljs-attr">next</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>) </span>{
            <span class="hljs-keyword">return</span> element.nextElementSibling;
        },
        <span class="hljs-attr">find</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, selector</span>) </span>{
            <span class="hljs-keyword">if</span> (element.getElementsByTagName) {
                <span class="hljs-keyword">return</span> element.getElementsByTagName(selector);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> [];
            }
        },
        <span class="hljs-attr">clone</span>: jqLiteClone,
        <span class="hljs-attr">triggerHandler</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, event, extraParameters</span>) </span>{
            <span class="hljs-keyword">var</span> dummyEvent, eventFnsCopy, handlerArgs;
            <span class="hljs-keyword">var</span> eventName = event.type || event;
            <span class="hljs-keyword">var</span> expandoStore = jqLiteExpandoStore(element);
            <span class="hljs-keyword">var</span> events = expandoStore &amp;&amp; expandoStore.events;
            <span class="hljs-keyword">var</span> eventFns = events &amp;&amp; events[eventName];
            <span class="hljs-keyword">if</span> (eventFns) {
                dummyEvent = {
                    <span class="hljs-attr">preventDefault</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">this</span>.defaultPrevented = <span class="hljs-literal">true</span>;
                    },
                    <span class="hljs-attr">isDefaultPrevented</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.defaultPrevented === <span class="hljs-literal">true</span>;
                    },
                    <span class="hljs-attr">stopImmediatePropagation</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">this</span>.immediatePropagationStopped = <span class="hljs-literal">true</span>;
                    },
                    <span class="hljs-attr">isImmediatePropagationStopped</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.immediatePropagationStopped === <span class="hljs-literal">true</span>;
                    },
                    <span class="hljs-attr">stopPropagation</span>: noop,
                    <span class="hljs-attr">type</span>: eventName,
                    <span class="hljs-attr">target</span>: element
                };
                <span class="hljs-keyword">if</span> (event.type) {
                    dummyEvent = extend(dummyEvent, event);
                }
                eventFnsCopy = shallowCopy(eventFns);
                handlerArgs = extraParameters ? [dummyEvent].concat(extraParameters) : [dummyEvent];
                forEach(eventFnsCopy, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fn</span>) </span>{
                    <span class="hljs-keyword">if</span> (!dummyEvent.isImmediatePropagationStopped()) {
                        fn.apply(element, handlerArgs);
                    }
                });
            }
        }
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fn, name</span>) </span>{
        JQLite.prototype[name] = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">arg1, arg2, arg3</span>) </span>{
            <span class="hljs-keyword">var</span> value;
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, ii = <span class="hljs-keyword">this</span>.length; i &lt; ii; i++) {
                <span class="hljs-keyword">if</span> (isUndefined(value)) {
                    value = fn(<span class="hljs-keyword">this</span>[i], arg1, arg2, arg3);
                    <span class="hljs-keyword">if</span> (isDefined(value)) {
                        value = jqLite(value);
                    }
                } <span class="hljs-keyword">else</span> {
                    jqLiteAddNodes(value, fn(<span class="hljs-keyword">this</span>[i], arg1, arg2, arg3));
                }
            }
            <span class="hljs-keyword">return</span> isDefined(value) ? value : <span class="hljs-keyword">this</span>;
        };
        JQLite.prototype.bind = JQLite.prototype.on;
        JQLite.prototype.unbind = JQLite.prototype.off;
    });

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$$jqLiteProvider</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.$get = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$$jqLite</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> extend(JQLite, {
                <span class="hljs-attr">hasClass</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">node, classes</span>) </span>{
                    <span class="hljs-keyword">if</span> (node.attr) node = node[<span class="hljs-number">0</span>];
                    <span class="hljs-keyword">return</span> jqLiteHasClass(node, classes);
                },
                <span class="hljs-attr">addClass</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">node, classes</span>) </span>{
                    <span class="hljs-keyword">if</span> (node.attr) node = node[<span class="hljs-number">0</span>];
                    <span class="hljs-keyword">return</span> jqLiteAddClass(node, classes);
                },
                <span class="hljs-attr">removeClass</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">node, classes</span>) </span>{
                    <span class="hljs-keyword">if</span> (node.attr) node = node[<span class="hljs-number">0</span>];
                    <span class="hljs-keyword">return</span> jqLiteRemoveClass(node, classes);
                }
            });
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hashKey</span>(<span class="hljs-params">obj, nextUidFn</span>) </span>{
        <span class="hljs-keyword">var</span> key = obj &amp;&amp; obj.$$hashKey;
        <span class="hljs-keyword">if</span> (key) {
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> key === <span class="hljs-string">'function'</span>) {
                key = obj.$$hashKey();
            }
            <span class="hljs-keyword">return</span> key;
        }
        <span class="hljs-keyword">var</span> objType = <span class="hljs-keyword">typeof</span> obj;
        <span class="hljs-keyword">if</span> (objType == <span class="hljs-string">'function'</span> || (objType == <span class="hljs-string">'object'</span> &amp;&amp; obj !== <span class="hljs-literal">null</span>)) {
            key = obj.$$hashKey = objType + <span class="hljs-string">':'</span> + (nextUidFn || nextUid)();
        } <span class="hljs-keyword">else</span> {
            key = objType + <span class="hljs-string">':'</span> + obj;
        }
        <span class="hljs-keyword">return</span> key;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">HashMap</span>(<span class="hljs-params">array, isolatedUid</span>) </span>{
        <span class="hljs-keyword">if</span> (isolatedUid) {
            <span class="hljs-keyword">var</span> uid = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">this</span>.nextUid = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> ++uid;
            };
        }
        forEach(array, <span class="hljs-keyword">this</span>.put, <span class="hljs-keyword">this</span>);
    }
    HashMap.prototype = {
        <span class="hljs-attr">put</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key, value</span>) </span>{
            <span class="hljs-keyword">this</span>[hashKey(key, <span class="hljs-keyword">this</span>.nextUid)] = value;
        },
        <span class="hljs-attr">get</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>[hashKey(key, <span class="hljs-keyword">this</span>.nextUid)];
        },
        <span class="hljs-attr">remove</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key</span>) </span>{
            <span class="hljs-keyword">var</span> value = <span class="hljs-keyword">this</span>[key = hashKey(key, <span class="hljs-keyword">this</span>.nextUid)];
            <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>[key];
            <span class="hljs-keyword">return</span> value;
        }
    };
    <span class="hljs-keyword">var</span> $$HashMapProvider = [<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> HashMap;
        }];
    }];
    <span class="hljs-keyword">var</span> ARROW_ARG = <span class="hljs-regexp">/^([^\(]+?)=&gt;/</span>;
    <span class="hljs-keyword">var</span> FN_ARGS = <span class="hljs-regexp">/^[^\(]*\(\s*([^\)]*)\)/m</span>;
    <span class="hljs-keyword">var</span> FN_ARG_SPLIT = <span class="hljs-regexp">/,/</span>;
    <span class="hljs-keyword">var</span> FN_ARG = <span class="hljs-regexp">/^\s*(_?)(\S+?)\1\s*$/</span>;
    <span class="hljs-keyword">var</span> STRIP_COMMENTS = <span class="hljs-regexp">/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg</span>;
    <span class="hljs-keyword">var</span> $injectorMinErr = minErr(<span class="hljs-string">'$injector'</span>);

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stringifyFn</span>(<span class="hljs-params">fn</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Function</span>.prototype.toString.call(fn) + <span class="hljs-string">' '</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">extractArgs</span>(<span class="hljs-params">fn</span>) </span>{
        <span class="hljs-keyword">var</span> fnText = stringifyFn(fn).replace(STRIP_COMMENTS, <span class="hljs-string">''</span>),
            args = fnText.match(ARROW_ARG) || fnText.match(FN_ARGS);
        <span class="hljs-keyword">return</span> args;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">anonFn</span>(<span class="hljs-params">fn</span>) </span>{
        <span class="hljs-keyword">var</span> args = extractArgs(fn);
        <span class="hljs-keyword">if</span> (args) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">'function('</span> + (args[<span class="hljs-number">1</span>] || <span class="hljs-string">''</span>).replace(<span class="hljs-regexp">/[\s\r\n]+/</span>, <span class="hljs-string">' '</span>) + <span class="hljs-string">')'</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-string">'fn'</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">annotate</span>(<span class="hljs-params">fn, strictDi, name</span>) </span>{
        <span class="hljs-keyword">var</span> $inject,
            argDecl,
            last;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> fn === <span class="hljs-string">'function'</span>) {
            <span class="hljs-keyword">if</span> (!($inject = fn.$inject)) {
                $inject = [];
                <span class="hljs-keyword">if</span> (fn.length) {
                    <span class="hljs-keyword">if</span> (strictDi) {
                        <span class="hljs-keyword">if</span> (!isString(name) || !name) {
                            name = fn.name || anonFn(fn);
                        }
                        <span class="hljs-keyword">throw</span> $injectorMinErr(<span class="hljs-string">'strictdi'</span>,
                            <span class="hljs-string">'{0} is not using explicit annotation and cannot be invoked in strict mode'</span>, name);
                    }
                    argDecl = extractArgs(fn);
                    forEach(argDecl[<span class="hljs-number">1</span>].split(FN_ARG_SPLIT), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">arg</span>) </span>{
                        arg.replace(FN_ARG, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">all, underscore, name</span>) </span>{
                            $inject.push(name);
                        });
                    });
                }
                fn.$inject = $inject;
            }
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isArray(fn)) {
            last = fn.length - <span class="hljs-number">1</span>;
            assertArgFn(fn[last], <span class="hljs-string">'fn'</span>);
            $inject = fn.slice(<span class="hljs-number">0</span>, last);
        } <span class="hljs-keyword">else</span> {
            assertArgFn(fn, <span class="hljs-string">'fn'</span>, <span class="hljs-literal">true</span>);
        }
        <span class="hljs-keyword">return</span> $inject;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createInjector</span>(<span class="hljs-params">modulesToLoad, strictDi</span>) </span>{
        strictDi = (strictDi === <span class="hljs-literal">true</span>);
        <span class="hljs-keyword">var</span> INSTANTIATING = {},
            providerSuffix = <span class="hljs-string">'Provider'</span>,
            path = [],
            loadedModules = <span class="hljs-keyword">new</span> HashMap([], <span class="hljs-literal">true</span>),
            providerCache = {
                <span class="hljs-attr">$provide</span>: {
                    <span class="hljs-attr">provider</span>: supportObject(provider),
                    <span class="hljs-attr">factory</span>: supportObject(factory),
                    <span class="hljs-attr">service</span>: supportObject(service),
                    <span class="hljs-attr">value</span>: supportObject(value),
                    <span class="hljs-attr">constant</span>: supportObject(constant),
                    <span class="hljs-attr">decorator</span>: decorator
                }
            },
            providerInjector = (providerCache.$injector =
                createInternalInjector(providerCache, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">serviceName, caller</span>) </span>{
                    <span class="hljs-keyword">if</span> (angular.isString(caller)) {
                        path.push(caller);
                    }
                    <span class="hljs-keyword">throw</span> $injectorMinErr(<span class="hljs-string">'unpr'</span>, <span class="hljs-string">"Unknown provider: {0}"</span>, path.join(<span class="hljs-string">' &lt;- '</span>));
                })),
            instanceCache = {},
            protoInstanceInjector =
            createInternalInjector(instanceCache, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">serviceName, caller</span>) </span>{
                <span class="hljs-keyword">var</span> provider = providerInjector.get(serviceName + providerSuffix, caller);
                <span class="hljs-keyword">return</span> instanceInjector.invoke(
                    provider.$get, provider, <span class="hljs-literal">undefined</span>, serviceName);
            }),
            instanceInjector = protoInstanceInjector;
        providerCache[<span class="hljs-string">'$injector'</span> + providerSuffix] = {
            <span class="hljs-attr">$get</span>: valueFn(protoInstanceInjector)
        };
        <span class="hljs-keyword">var</span> runBlocks = loadModules(modulesToLoad);
        instanceInjector = protoInstanceInjector.get(<span class="hljs-string">'$injector'</span>);
        instanceInjector.strictDi = strictDi;
        forEach(runBlocks, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fn</span>) </span>{
            <span class="hljs-keyword">if</span> (fn) instanceInjector.invoke(fn);
        });
        <span class="hljs-keyword">return</span> instanceInjector;

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">supportObject</span>(<span class="hljs-params">delegate</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key, value</span>) </span>{
                <span class="hljs-keyword">if</span> (isObject(key)) {
                    forEach(key, reverseParams(delegate));
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">return</span> delegate(key, value);
                }
            };
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">provider</span>(<span class="hljs-params">name, provider_</span>) </span>{
            assertNotHasOwnProperty(name, <span class="hljs-string">'service'</span>);
            <span class="hljs-keyword">if</span> (isFunction(provider_) || isArray(provider_)) {
                provider_ = providerInjector.instantiate(provider_);
            }
            <span class="hljs-keyword">if</span> (!provider_.$get) {
                <span class="hljs-keyword">throw</span> $injectorMinErr(<span class="hljs-string">'pget'</span>, <span class="hljs-string">"Provider '{0}' must define $get factory method."</span>, name);
            }
            <span class="hljs-keyword">return</span> providerCache[name + providerSuffix] = provider_;
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">enforceReturnValue</span>(<span class="hljs-params">name, factory</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">enforcedReturnValue</span>(<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">var</span> result = instanceInjector.invoke(factory, <span class="hljs-keyword">this</span>);
                <span class="hljs-keyword">if</span> (isUndefined(result)) {
                    <span class="hljs-keyword">throw</span> $injectorMinErr(<span class="hljs-string">'undef'</span>, <span class="hljs-string">"Provider '{0}' must return a value from $get factory method."</span>, name);
                }
                <span class="hljs-keyword">return</span> result;
            };
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">factory</span>(<span class="hljs-params">name, factoryFn, enforce</span>) </span>{
            <span class="hljs-keyword">return</span> provider(name, {
                <span class="hljs-attr">$get</span>: enforce !== <span class="hljs-literal">false</span> ? enforceReturnValue(name, factoryFn) : factoryFn
            });
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">service</span>(<span class="hljs-params">name, constructor</span>) </span>{
            <span class="hljs-keyword">return</span> factory(name, [<span class="hljs-string">'$injector'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$injector</span>) </span>{
                <span class="hljs-keyword">return</span> $injector.instantiate(<span class="hljs-keyword">constructor</span>);
            }]);
        }

        function value(name, val) {
            <span class="hljs-keyword">return</span> factory(name, valueFn(val), <span class="hljs-literal">false</span>);
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">constant</span>(<span class="hljs-params">name, value</span>) </span>{
            assertNotHasOwnProperty(name, <span class="hljs-string">'constant'</span>);
            providerCache[name] = value;
            instanceCache[name] = value;
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">decorator</span>(<span class="hljs-params">serviceName, decorFn</span>) </span>{
            <span class="hljs-keyword">var</span> origProvider = providerInjector.get(serviceName + providerSuffix),
                orig$get = origProvider.$get;
            origProvider.$get = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">var</span> origInstance = instanceInjector.invoke(orig$get, origProvider);
                <span class="hljs-keyword">return</span> instanceInjector.invoke(decorFn, <span class="hljs-literal">null</span>, {
                    <span class="hljs-attr">$delegate</span>: origInstance
                });
            };
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadModules</span>(<span class="hljs-params">modulesToLoad</span>) </span>{
            assertArg(isUndefined(modulesToLoad) || isArray(modulesToLoad), <span class="hljs-string">'modulesToLoad'</span>, <span class="hljs-string">'not an array'</span>);
            <span class="hljs-keyword">var</span> runBlocks = [],
                moduleFn;
            forEach(modulesToLoad, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module</span>) </span>{
                <span class="hljs-keyword">if</span> (loadedModules.get(<span class="hljs-built_in">module</span>)) <span class="hljs-keyword">return</span>;
                loadedModules.put(<span class="hljs-built_in">module</span>, <span class="hljs-literal">true</span>);

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">runInvokeQueue</span>(<span class="hljs-params">queue</span>) </span>{
                    <span class="hljs-keyword">var</span> i, ii;
                    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, ii = queue.length; i &lt; ii; i++) {
                        <span class="hljs-keyword">var</span> invokeArgs = queue[i],
                            provider = providerInjector.get(invokeArgs[<span class="hljs-number">0</span>]);
                        provider[invokeArgs[<span class="hljs-number">1</span>]].apply(provider, invokeArgs[<span class="hljs-number">2</span>]);
                    }
                }
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-keyword">if</span> (isString(<span class="hljs-built_in">module</span>)) {
                        moduleFn = angularModule(<span class="hljs-built_in">module</span>);
                        runBlocks = runBlocks.concat(loadModules(moduleFn.requires)).concat(moduleFn._runBlocks);
                        runInvokeQueue(moduleFn._invokeQueue);
                        runInvokeQueue(moduleFn._configBlocks);
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isFunction(<span class="hljs-built_in">module</span>)) {
                        runBlocks.push(providerInjector.invoke(<span class="hljs-built_in">module</span>));
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isArray(<span class="hljs-built_in">module</span>)) {
                        runBlocks.push(providerInjector.invoke(<span class="hljs-built_in">module</span>));
                    } <span class="hljs-keyword">else</span> {
                        assertArgFn(<span class="hljs-built_in">module</span>, <span class="hljs-string">'module'</span>);
                    }
                } <span class="hljs-keyword">catch</span> (e) {
                    <span class="hljs-keyword">if</span> (isArray(<span class="hljs-built_in">module</span>)) {
                        <span class="hljs-built_in">module</span> = <span class="hljs-built_in">module</span>[<span class="hljs-built_in">module</span>.length - <span class="hljs-number">1</span>];
                    }
                    <span class="hljs-keyword">if</span> (e.message &amp;&amp; e.stack &amp;&amp; e.stack.indexOf(e.message) == <span class="hljs-number">-1</span>) {
                        e = e.message + <span class="hljs-string">'\n'</span> + e.stack;
                    }
                    <span class="hljs-keyword">throw</span> $injectorMinErr(<span class="hljs-string">'modulerr'</span>, <span class="hljs-string">"Failed to instantiate module {0} due to:\n{1}"</span>,
                        <span class="hljs-built_in">module</span>, e.stack || e.message || e);
                }
            });
            <span class="hljs-keyword">return</span> runBlocks;
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createInternalInjector</span>(<span class="hljs-params">cache, factory</span>) </span>{
            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getService</span>(<span class="hljs-params">serviceName, caller</span>) </span>{
                <span class="hljs-keyword">if</span> (cache.hasOwnProperty(serviceName)) {
                    <span class="hljs-keyword">if</span> (cache[serviceName] === INSTANTIATING) {
                        <span class="hljs-keyword">throw</span> $injectorMinErr(<span class="hljs-string">'cdep'</span>, <span class="hljs-string">'Circular dependency found: {0}'</span>,
                            serviceName + <span class="hljs-string">' &lt;- '</span> + path.join(<span class="hljs-string">' &lt;- '</span>));
                    }
                    <span class="hljs-keyword">return</span> cache[serviceName];
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">try</span> {
                        path.unshift(serviceName);
                        cache[serviceName] = INSTANTIATING;
                        <span class="hljs-keyword">return</span> cache[serviceName] = factory(serviceName, caller);
                    } <span class="hljs-keyword">catch</span> (err) {
                        <span class="hljs-keyword">if</span> (cache[serviceName] === INSTANTIATING) {
                            <span class="hljs-keyword">delete</span> cache[serviceName];
                        }
                        <span class="hljs-keyword">throw</span> err;
                    } <span class="hljs-keyword">finally</span> {
                        path.shift();
                    }
                }
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">injectionArgs</span>(<span class="hljs-params">fn, locals, serviceName</span>) </span>{
                <span class="hljs-keyword">var</span> args = [],
                    $inject = createInjector.$$annotate(fn, strictDi, serviceName);
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, length = $inject.length; i &lt; length; i++) {
                    <span class="hljs-keyword">var</span> key = $inject[i];
                    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> key !== <span class="hljs-string">'string'</span>) {
                        <span class="hljs-keyword">throw</span> $injectorMinErr(<span class="hljs-string">'itkn'</span>,
                            <span class="hljs-string">'Incorrect injection token! Expected service name as string, got {0}'</span>, key);
                    }
                    args.push(locals &amp;&amp; locals.hasOwnProperty(key) ? locals[key] :
                        getService(key, serviceName));
                }
                <span class="hljs-keyword">return</span> args;
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isClass</span>(<span class="hljs-params">func</span>) </span>{
                <span class="hljs-keyword">if</span> (msie &lt;= <span class="hljs-number">11</span>) {
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                }
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> func === <span class="hljs-string">'function'</span> &amp;&amp;
                    <span class="hljs-regexp">/^(?:class\b|constructor\()/</span>.test(stringifyFn(func));
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">invoke</span>(<span class="hljs-params">fn, self, locals, serviceName</span>) </span>{
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> locals === <span class="hljs-string">'string'</span>) {
                    serviceName = locals;
                    locals = <span class="hljs-literal">null</span>;
                }
                <span class="hljs-keyword">var</span> args = injectionArgs(fn, locals, serviceName);
                <span class="hljs-keyword">if</span> (isArray(fn)) {
                    fn = fn[fn.length - <span class="hljs-number">1</span>];
                }
                <span class="hljs-keyword">if</span> (!isClass(fn)) {
                    <span class="hljs-keyword">return</span> fn.apply(self, args);
                } <span class="hljs-keyword">else</span> {
                    args.unshift(<span class="hljs-literal">null</span>);
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span>(<span class="hljs-built_in">Function</span>.prototype.bind.apply(fn, args))();
                }
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">instantiate</span>(<span class="hljs-params">Type, locals, serviceName</span>) </span>{
                <span class="hljs-keyword">var</span> ctor = (isArray(Type) ? Type[Type.length - <span class="hljs-number">1</span>] : Type);
                <span class="hljs-keyword">var</span> args = injectionArgs(Type, locals, serviceName);
                args.unshift(<span class="hljs-literal">null</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span>(<span class="hljs-built_in">Function</span>.prototype.bind.apply(ctor, args))();
            }
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">invoke</span>: invoke,
                <span class="hljs-attr">instantiate</span>: instantiate,
                <span class="hljs-attr">get</span>: getService,
                <span class="hljs-attr">annotate</span>: createInjector.$$annotate,
                <span class="hljs-attr">has</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name</span>) </span>{
                    <span class="hljs-keyword">return</span> providerCache.hasOwnProperty(name + providerSuffix) || cache.hasOwnProperty(name);
                }
            };
        }
    }
    createInjector.$$annotate = annotate;

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$AnchorScrollProvider</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> autoScrollingEnabled = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">this</span>.disableAutoScrolling = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            autoScrollingEnabled = <span class="hljs-literal">false</span>;
        };
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$window'</span>, <span class="hljs-string">'$location'</span>, <span class="hljs-string">'$rootScope'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$window, $location, $rootScope</span>) </span>{
            <span class="hljs-keyword">var</span> <span class="hljs-built_in">document</span> = $<span class="hljs-built_in">window</span>.document;

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getFirstAnchor</span>(<span class="hljs-params">list</span>) </span>{
                <span class="hljs-keyword">var</span> result = <span class="hljs-literal">null</span>;
                <span class="hljs-built_in">Array</span>.prototype.some.call(list, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>) </span>{
                    <span class="hljs-keyword">if</span> (nodeName_(element) === <span class="hljs-string">'a'</span>) {
                        result = element;
                        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                    }
                });
                <span class="hljs-keyword">return</span> result;
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getYOffset</span>(<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">var</span> offset = scroll.yOffset;
                <span class="hljs-keyword">if</span> (isFunction(offset)) {
                    offset = offset();
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isElement(offset)) {
                    <span class="hljs-keyword">var</span> elem = offset[<span class="hljs-number">0</span>];
                    <span class="hljs-keyword">var</span> style = $<span class="hljs-built_in">window</span>.getComputedStyle(elem);
                    <span class="hljs-keyword">if</span> (style.position !== <span class="hljs-string">'fixed'</span>) {
                        offset = <span class="hljs-number">0</span>;
                    } <span class="hljs-keyword">else</span> {
                        offset = elem.getBoundingClientRect().bottom;
                    }
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!isNumber(offset)) {
                    offset = <span class="hljs-number">0</span>;
                }
                <span class="hljs-keyword">return</span> offset;
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">scrollTo</span>(<span class="hljs-params">elem</span>) </span>{
                <span class="hljs-keyword">if</span> (elem) {
                    elem.scrollIntoView();
                    <span class="hljs-keyword">var</span> offset = getYOffset();
                    <span class="hljs-keyword">if</span> (offset) {
                        <span class="hljs-keyword">var</span> elemTop = elem.getBoundingClientRect().top;
                        $<span class="hljs-built_in">window</span>.scrollBy(<span class="hljs-number">0</span>, elemTop - offset);
                    }
                } <span class="hljs-keyword">else</span> {
                    $<span class="hljs-built_in">window</span>.scrollTo(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
                }
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">scroll</span>(<span class="hljs-params">hash</span>) </span>{
                hash = isString(hash) ? hash : $location.hash();
                <span class="hljs-keyword">var</span> elm;
                <span class="hljs-keyword">if</span> (!hash) scrollTo(<span class="hljs-literal">null</span>);
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((elm = <span class="hljs-built_in">document</span>.getElementById(hash))) scrollTo(elm);
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((elm = getFirstAnchor(<span class="hljs-built_in">document</span>.getElementsByName(hash)))) scrollTo(elm);
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (hash === <span class="hljs-string">'top'</span>) scrollTo(<span class="hljs-literal">null</span>);
            }
            <span class="hljs-keyword">if</span> (autoScrollingEnabled) {
                $rootScope.$watch(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">autoScrollWatch</span>(<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">return</span> $location.hash();
                    },
                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">autoScrollWatchAction</span>(<span class="hljs-params">newVal, oldVal</span>) </span>{
                        <span class="hljs-keyword">if</span> (newVal === oldVal &amp;&amp; newVal === <span class="hljs-string">''</span>) <span class="hljs-keyword">return</span>;
                        jqLiteDocumentLoaded(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            $rootScope.$evalAsync(scroll);
                        });
                    });
            }
            <span class="hljs-keyword">return</span> scroll;
        }];
    }
    <span class="hljs-keyword">var</span> $animateMinErr = minErr(<span class="hljs-string">'$animate'</span>);
    <span class="hljs-keyword">var</span> ELEMENT_NODE = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">var</span> NG_ANIMATE_CLASSNAME = <span class="hljs-string">'ng-animate'</span>;

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mergeClasses</span>(<span class="hljs-params">a, b</span>) </span>{
        <span class="hljs-keyword">if</span> (!a &amp;&amp; !b) <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
        <span class="hljs-keyword">if</span> (!a) <span class="hljs-keyword">return</span> b;
        <span class="hljs-keyword">if</span> (!b) <span class="hljs-keyword">return</span> a;
        <span class="hljs-keyword">if</span> (isArray(a)) a = a.join(<span class="hljs-string">' '</span>);
        <span class="hljs-keyword">if</span> (isArray(b)) b = b.join(<span class="hljs-string">' '</span>);
        <span class="hljs-keyword">return</span> a + <span class="hljs-string">' '</span> + b;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">extractElementNode</span>(<span class="hljs-params">element</span>) </span>{
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; element.length; i++) {
            <span class="hljs-keyword">var</span> elm = element[i];
            <span class="hljs-keyword">if</span> (elm.nodeType === ELEMENT_NODE) {
                <span class="hljs-keyword">return</span> elm;
            }
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">splitClasses</span>(<span class="hljs-params">classes</span>) </span>{
        <span class="hljs-keyword">if</span> (isString(classes)) {
            classes = classes.split(<span class="hljs-string">' '</span>);
        }
        <span class="hljs-keyword">var</span> obj = createMap();
        forEach(classes, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">klass</span>) </span>{
            <span class="hljs-keyword">if</span> (klass.length) {
                obj[klass] = <span class="hljs-literal">true</span>;
            }
        });
        <span class="hljs-keyword">return</span> obj;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">prepareAnimateOptions</span>(<span class="hljs-params">options</span>) </span>{
        <span class="hljs-keyword">return</span> isObject(options) ?
            options :
            {};
    }
    <span class="hljs-keyword">var</span> $$CoreAnimateJsProvider = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.$get = noop;
    };
    <span class="hljs-keyword">var</span> $$CoreAnimateQueueProvider = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> postDigestQueue = <span class="hljs-keyword">new</span> HashMap();
        <span class="hljs-keyword">var</span> postDigestElements = [];
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$$AnimateRunner'</span>, <span class="hljs-string">'$rootScope'</span>,
            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$$AnimateRunner, $rootScope</span>) </span>{
                <span class="hljs-keyword">return</span> {
                    <span class="hljs-attr">enabled</span>: noop,
                    <span class="hljs-attr">on</span>: noop,
                    <span class="hljs-attr">off</span>: noop,
                    <span class="hljs-attr">pin</span>: noop,
                    <span class="hljs-attr">push</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, event, options, domOperation</span>) </span>{
                        domOperation &amp;&amp; domOperation();
                        options = options || {};
                        options.from &amp;&amp; element.css(options.from);
                        options.to &amp;&amp; element.css(options.to);
                        <span class="hljs-keyword">if</span> (options.addClass || options.removeClass) {
                            addRemoveClassesPostDigest(element, options.addClass, options.removeClass);
                        }
                        <span class="hljs-keyword">var</span> runner = <span class="hljs-keyword">new</span> $$AnimateRunner();
                        runner.complete();
                        <span class="hljs-keyword">return</span> runner;
                    }
                };

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateData</span>(<span class="hljs-params">data, classes, value</span>) </span>{
                    <span class="hljs-keyword">var</span> changed = <span class="hljs-literal">false</span>;
                    <span class="hljs-keyword">if</span> (classes) {
                        classes = isString(classes) ? classes.split(<span class="hljs-string">' '</span>) :
                            isArray(classes) ? classes : [];
                        forEach(classes, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">className</span>) </span>{
                            <span class="hljs-keyword">if</span> (className) {
                                changed = <span class="hljs-literal">true</span>;
                                data[className] = value;
                            }
                        });
                    }
                    <span class="hljs-keyword">return</span> changed;
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleCSSClassChanges</span>(<span class="hljs-params"></span>) </span>{
                    forEach(postDigestElements, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>) </span>{
                        <span class="hljs-keyword">var</span> data = postDigestQueue.get(element);
                        <span class="hljs-keyword">if</span> (data) {
                            <span class="hljs-keyword">var</span> existing = splitClasses(element.attr(<span class="hljs-string">'class'</span>));
                            <span class="hljs-keyword">var</span> toAdd = <span class="hljs-string">''</span>;
                            <span class="hljs-keyword">var</span> toRemove = <span class="hljs-string">''</span>;
                            forEach(data, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">status, className</span>) </span>{
                                <span class="hljs-keyword">var</span> hasClass = !!existing[className];
                                <span class="hljs-keyword">if</span> (status !== hasClass) {
                                    <span class="hljs-keyword">if</span> (status) {
                                        toAdd += (toAdd.length ? <span class="hljs-string">' '</span> : <span class="hljs-string">''</span>) + className;
                                    } <span class="hljs-keyword">else</span> {
                                        toRemove += (toRemove.length ? <span class="hljs-string">' '</span> : <span class="hljs-string">''</span>) + className;
                                    }
                                }
                            });
                            forEach(element, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">elm</span>) </span>{
                                toAdd &amp;&amp; jqLiteAddClass(elm, toAdd);
                                toRemove &amp;&amp; jqLiteRemoveClass(elm, toRemove);
                            });
                            postDigestQueue.remove(element);
                        }
                    });
                    postDigestElements.length = <span class="hljs-number">0</span>;
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addRemoveClassesPostDigest</span>(<span class="hljs-params">element, add, remove</span>) </span>{
                    <span class="hljs-keyword">var</span> data = postDigestQueue.get(element) || {};
                    <span class="hljs-keyword">var</span> classesAdded = updateData(data, add, <span class="hljs-literal">true</span>);
                    <span class="hljs-keyword">var</span> classesRemoved = updateData(data, remove, <span class="hljs-literal">false</span>);
                    <span class="hljs-keyword">if</span> (classesAdded || classesRemoved) {
                        postDigestQueue.put(element, data);
                        postDigestElements.push(element);
                        <span class="hljs-keyword">if</span> (postDigestElements.length === <span class="hljs-number">1</span>) {
                            $rootScope.$$postDigest(handleCSSClassChanges);
                        }
                    }
                }
            }
        ];
    };
    <span class="hljs-keyword">var</span> $AnimateProvider = [<span class="hljs-string">'$provide'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$provide</span>) </span>{
        <span class="hljs-keyword">var</span> provider = <span class="hljs-keyword">this</span>;
        <span class="hljs-keyword">this</span>.$$registeredAnimations = <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>);
        <span class="hljs-keyword">this</span>.register = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name, factory</span>) </span>{
            <span class="hljs-keyword">if</span> (name &amp;&amp; name.charAt(<span class="hljs-number">0</span>) !== <span class="hljs-string">'.'</span>) {
                <span class="hljs-keyword">throw</span> $animateMinErr(<span class="hljs-string">'notcsel'</span>, <span class="hljs-string">"Expecting class selector starting with '.' got '{0}'."</span>, name);
            }
            <span class="hljs-keyword">var</span> key = name + <span class="hljs-string">'-animation'</span>;
            provider.$$registeredAnimations[name.substr(<span class="hljs-number">1</span>)] = key;
            $provide.factory(key, factory);
        };
        <span class="hljs-keyword">this</span>.classNameFilter = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">expression</span>) </span>{
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">arguments</span>.length === <span class="hljs-number">1</span>) {
                <span class="hljs-keyword">this</span>.$$classNameFilter = (expression <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">RegExp</span>) ? expression : <span class="hljs-literal">null</span>;
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.$$classNameFilter) {
                    <span class="hljs-keyword">var</span> reservedRegex = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">"(\\s+|\\/)"</span> + NG_ANIMATE_CLASSNAME + <span class="hljs-string">"(\\s+|\\/)"</span>);
                    <span class="hljs-keyword">if</span> (reservedRegex.test(<span class="hljs-keyword">this</span>.$$classNameFilter.toString())) {
                        <span class="hljs-keyword">throw</span> $animateMinErr(<span class="hljs-string">'nongcls'</span>, <span class="hljs-string">'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.'</span>, NG_ANIMATE_CLASSNAME);
                    }
                }
            }
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.$$classNameFilter;
        };
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$$animateQueue'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$$animateQueue</span>) </span>{
            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">domInsert</span>(<span class="hljs-params">element, parentElement, afterElement</span>) </span>{
                <span class="hljs-keyword">if</span> (afterElement) {
                    <span class="hljs-keyword">var</span> afterNode = extractElementNode(afterElement);
                    <span class="hljs-keyword">if</span> (afterNode &amp;&amp; !afterNode.parentNode &amp;&amp; !afterNode.previousElementSibling) {
                        afterElement = <span class="hljs-literal">null</span>;
                    }
                }
                afterElement ? afterElement.after(element) : parentElement.prepend(element);
            }
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">on</span>: $$animateQueue.on,
                <span class="hljs-attr">off</span>: $$animateQueue.off,
                <span class="hljs-attr">pin</span>: $$animateQueue.pin,
                <span class="hljs-attr">enabled</span>: $$animateQueue.enabled,
                <span class="hljs-attr">cancel</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">runner</span>) </span>{
                    runner.end &amp;&amp; runner.end();
                },
                <span class="hljs-attr">enter</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, parent, after, options</span>) </span>{
                    parent = parent &amp;&amp; jqLite(parent);
                    after = after &amp;&amp; jqLite(after);
                    parent = parent || after.parent();
                    domInsert(element, parent, after);
                    <span class="hljs-keyword">return</span> $$animateQueue.push(element, <span class="hljs-string">'enter'</span>, prepareAnimateOptions(options));
                },
                <span class="hljs-attr">move</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, parent, after, options</span>) </span>{
                    parent = parent &amp;&amp; jqLite(parent);
                    after = after &amp;&amp; jqLite(after);
                    parent = parent || after.parent();
                    domInsert(element, parent, after);
                    <span class="hljs-keyword">return</span> $$animateQueue.push(element, <span class="hljs-string">'move'</span>, prepareAnimateOptions(options));
                },
                <span class="hljs-attr">leave</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, options</span>) </span>{
                    <span class="hljs-keyword">return</span> $$animateQueue.push(element, <span class="hljs-string">'leave'</span>, prepareAnimateOptions(options), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        element.remove();
                    });
                },
                <span class="hljs-attr">addClass</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, className, options</span>) </span>{
                    options = prepareAnimateOptions(options);
                    options.addClass = mergeClasses(options.addclass, className);
                    <span class="hljs-keyword">return</span> $$animateQueue.push(element, <span class="hljs-string">'addClass'</span>, options);
                },
                <span class="hljs-attr">removeClass</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, className, options</span>) </span>{
                    options = prepareAnimateOptions(options);
                    options.removeClass = mergeClasses(options.removeClass, className);
                    <span class="hljs-keyword">return</span> $$animateQueue.push(element, <span class="hljs-string">'removeClass'</span>, options);
                },
                <span class="hljs-attr">setClass</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, add, remove, options</span>) </span>{
                    options = prepareAnimateOptions(options);
                    options.addClass = mergeClasses(options.addClass, add);
                    options.removeClass = mergeClasses(options.removeClass, remove);
                    <span class="hljs-keyword">return</span> $$animateQueue.push(element, <span class="hljs-string">'setClass'</span>, options);
                },
                <span class="hljs-attr">animate</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, from, to, className, options</span>) </span>{
                    options = prepareAnimateOptions(options);
                    options.from = options.from ? extend(options.from, <span class="hljs-keyword">from</span>) : <span class="hljs-keyword">from</span>;
                    options.to = options.to ? extend(options.to, to) : to;
                    className = className || <span class="hljs-string">'ng-inline-animate'</span>;
                    options.tempClasses = mergeClasses(options.tempClasses, className);
                    <span class="hljs-keyword">return</span> $$animateQueue.push(element, <span class="hljs-string">'animate'</span>, options);
                }
            };
        }];
    }];
    <span class="hljs-keyword">var</span> $$AnimateAsyncRunFactoryProvider = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$$rAF'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$$rAF</span>) </span>{
            <span class="hljs-keyword">var</span> waitQueue = [];

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">waitForTick</span>(<span class="hljs-params">fn</span>) </span>{
                waitQueue.push(fn);
                <span class="hljs-keyword">if</span> (waitQueue.length &gt; <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>;
                $$rAF(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; waitQueue.length; i++) {
                        waitQueue[i]();
                    }
                    waitQueue = [];
                });
            }
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">var</span> passed = <span class="hljs-literal">false</span>;
                waitForTick(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                    passed = <span class="hljs-literal">true</span>;
                });
                <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) </span>{
                    passed ? callback() : waitForTick(callback);
                };
            };
        }];
    };
    <span class="hljs-keyword">var</span> $$AnimateRunnerFactoryProvider = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$q'</span>, <span class="hljs-string">'$sniffer'</span>, <span class="hljs-string">'$$animateAsyncRun'</span>, <span class="hljs-string">'$document'</span>, <span class="hljs-string">'$timeout'</span>,
            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$q, $sniffer, $$animateAsyncRun, $document, $timeout</span>) </span>{
                <span class="hljs-keyword">var</span> INITIAL_STATE = <span class="hljs-number">0</span>;
                <span class="hljs-keyword">var</span> DONE_PENDING_STATE = <span class="hljs-number">1</span>;
                <span class="hljs-keyword">var</span> DONE_COMPLETE_STATE = <span class="hljs-number">2</span>;
                AnimateRunner.chain = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">chain, callback</span>) </span>{
                    <span class="hljs-keyword">var</span> index = <span class="hljs-number">0</span>;
                    next();

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">next</span>(<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">if</span> (index === chain.length) {
                            callback(<span class="hljs-literal">true</span>);
                            <span class="hljs-keyword">return</span>;
                        }
                        chain[index](<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) </span>{
                            <span class="hljs-keyword">if</span> (response === <span class="hljs-literal">false</span>) {
                                callback(<span class="hljs-literal">false</span>);
                                <span class="hljs-keyword">return</span>;
                            }
                            index++;
                            next();
                        });
                    }
                };
                AnimateRunner.all = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">runners, callback</span>) </span>{
                    <span class="hljs-keyword">var</span> count = <span class="hljs-number">0</span>;
                    <span class="hljs-keyword">var</span> status = <span class="hljs-literal">true</span>;
                    forEach(runners, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">runner</span>) </span>{
                        runner.done(onProgress);
                    });

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onProgress</span>(<span class="hljs-params">response</span>) </span>{
                        status = status &amp;&amp; response;
                        <span class="hljs-keyword">if</span> (++count === runners.length) {
                            callback(status);
                        }
                    }
                };

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">AnimateRunner</span>(<span class="hljs-params">host</span>) </span>{
                    <span class="hljs-keyword">this</span>.setHost(host);
                    <span class="hljs-keyword">var</span> rafTick = $$animateAsyncRun();
                    <span class="hljs-keyword">var</span> timeoutTick = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fn</span>) </span>{
                        $timeout(fn, <span class="hljs-number">0</span>, <span class="hljs-literal">false</span>);
                    };
                    <span class="hljs-keyword">this</span>._doneCallbacks = [];
                    <span class="hljs-keyword">this</span>._tick = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fn</span>) </span>{
                        <span class="hljs-keyword">var</span> doc = $<span class="hljs-built_in">document</span>[<span class="hljs-number">0</span>];
                        <span class="hljs-keyword">if</span> (doc &amp;&amp; doc.hidden) {
                            timeoutTick(fn);
                        } <span class="hljs-keyword">else</span> {
                            rafTick(fn);
                        }
                    };
                    <span class="hljs-keyword">this</span>._state = <span class="hljs-number">0</span>;
                }
                AnimateRunner.prototype = {
                    <span class="hljs-attr">setHost</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">host</span>) </span>{
                        <span class="hljs-keyword">this</span>.host = host || {};
                    },
                    <span class="hljs-attr">done</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fn</span>) </span>{
                        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._state === DONE_COMPLETE_STATE) {
                            fn();
                        } <span class="hljs-keyword">else</span> {
                            <span class="hljs-keyword">this</span>._doneCallbacks.push(fn);
                        }
                    },
                    <span class="hljs-attr">progress</span>: noop,
                    <span class="hljs-attr">getPromise</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.promise) {
                            <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
                            <span class="hljs-keyword">this</span>.promise = $q(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">resolve, reject</span>) </span>{
                                self.done(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">status</span>) </span>{
                                    status === <span class="hljs-literal">false</span> ? reject() : resolve();
                                });
                            });
                        }
                        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.promise;
                    },
                    <span class="hljs-attr">then</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">resolveHandler, rejectHandler</span>) </span>{
                        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getPromise().then(resolveHandler, rejectHandler);
                    },
                    <span class="hljs-string">'catch'</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">handler</span>) </span>{
                        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getPromise()[<span class="hljs-string">'catch'</span>](handler);
                    },
                    <span class="hljs-string">'finally'</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">handler</span>) </span>{
                        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getPromise()[<span class="hljs-string">'finally'</span>](handler);
                    },
                    <span class="hljs-attr">pause</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.host.pause) {
                            <span class="hljs-keyword">this</span>.host.pause();
                        }
                    },
                    <span class="hljs-attr">resume</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.host.resume) {
                            <span class="hljs-keyword">this</span>.host.resume();
                        }
                    },
                    <span class="hljs-attr">end</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.host.end) {
                            <span class="hljs-keyword">this</span>.host.end();
                        }
                        <span class="hljs-keyword">this</span>._resolve(<span class="hljs-literal">true</span>);
                    },
                    <span class="hljs-attr">cancel</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.host.cancel) {
                            <span class="hljs-keyword">this</span>.host.cancel();
                        }
                        <span class="hljs-keyword">this</span>._resolve(<span class="hljs-literal">false</span>);
                    },
                    <span class="hljs-attr">complete</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) </span>{
                        <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
                        <span class="hljs-keyword">if</span> (self._state === INITIAL_STATE) {
                            self._state = DONE_PENDING_STATE;
                            self._tick(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                                self._resolve(response);
                            });
                        }
                    },
                    <span class="hljs-attr">_resolve</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) </span>{
                        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._state !== DONE_COMPLETE_STATE) {
                            forEach(<span class="hljs-keyword">this</span>._doneCallbacks, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fn</span>) </span>{
                                fn(response);
                            });
                            <span class="hljs-keyword">this</span>._doneCallbacks.length = <span class="hljs-number">0</span>;
                            <span class="hljs-keyword">this</span>._state = DONE_COMPLETE_STATE;
                        }
                    }
                };
                <span class="hljs-keyword">return</span> AnimateRunner;
            }
        ];
    };
    <span class="hljs-keyword">var</span> $CoreAnimateCssProvider = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$$rAF'</span>, <span class="hljs-string">'$q'</span>, <span class="hljs-string">'$$AnimateRunner'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$$rAF, $q, $$AnimateRunner</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, initialOptions</span>) </span>{
                <span class="hljs-keyword">var</span> options = initialOptions || {};
                <span class="hljs-keyword">if</span> (!options.$$prepared) {
                    options = copy(options);
                }
                <span class="hljs-keyword">if</span> (options.cleanupStyles) {
                    options.from = options.to = <span class="hljs-literal">null</span>;
                }
                <span class="hljs-keyword">if</span> (options.from) {
                    element.css(options.from);
                    options.from = <span class="hljs-literal">null</span>;
                }
                <span class="hljs-keyword">var</span> closed, runner = <span class="hljs-keyword">new</span> $$AnimateRunner();
                <span class="hljs-keyword">return</span> {
                    <span class="hljs-attr">start</span>: run,
                    <span class="hljs-attr">end</span>: run
                };

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">run</span>(<span class="hljs-params"></span>) </span>{
                    $$rAF(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        applyAnimationContents();
                        <span class="hljs-keyword">if</span> (!closed) {
                            runner.complete();
                        }
                        closed = <span class="hljs-literal">true</span>;
                    });
                    <span class="hljs-keyword">return</span> runner;
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">applyAnimationContents</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">if</span> (options.addClass) {
                        element.addClass(options.addClass);
                        options.addClass = <span class="hljs-literal">null</span>;
                    }
                    <span class="hljs-keyword">if</span> (options.removeClass) {
                        element.removeClass(options.removeClass);
                        options.removeClass = <span class="hljs-literal">null</span>;
                    }
                    <span class="hljs-keyword">if</span> (options.to) {
                        element.css(options.to);
                        options.to = <span class="hljs-literal">null</span>;
                    }
                }
            };
        }];
    };

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Browser</span>(<span class="hljs-params">window, document, $log, $sniffer</span>) </span>{
        <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>,
            location = <span class="hljs-built_in">window</span>.location,
            history = <span class="hljs-built_in">window</span>.history,
            setTimeout = <span class="hljs-built_in">window</span>.setTimeout,
            clearTimeout = <span class="hljs-built_in">window</span>.clearTimeout,
            pendingDeferIds = {};
        self.isMock = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">var</span> outstandingRequestCount = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">var</span> outstandingRequestCallbacks = [];
        self.$$completeOutstandingRequest = completeOutstandingRequest;
        self.$$incOutstandingRequestCount = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            outstandingRequestCount++;
        };

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">completeOutstandingRequest</span>(<span class="hljs-params">fn</span>) </span>{
            <span class="hljs-keyword">try</span> {
                fn.apply(<span class="hljs-literal">null</span>, sliceArgs(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">1</span>));
            } <span class="hljs-keyword">finally</span> {
                outstandingRequestCount--;
                <span class="hljs-keyword">if</span> (outstandingRequestCount === <span class="hljs-number">0</span>) {
                    <span class="hljs-keyword">while</span> (outstandingRequestCallbacks.length) {
                        <span class="hljs-keyword">try</span> {
                            outstandingRequestCallbacks.pop()();
                        } <span class="hljs-keyword">catch</span> (e) {
                            $log.error(e);
                        }
                    }
                }
            }
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getHash</span>(<span class="hljs-params">url</span>) </span>{
            <span class="hljs-keyword">var</span> index = url.indexOf(<span class="hljs-string">'#'</span>);
            <span class="hljs-keyword">return</span> index === <span class="hljs-number">-1</span> ? <span class="hljs-string">''</span> : url.substr(index);
        }
        self.notifyWhenNoOutstandingRequests = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) </span>{
            <span class="hljs-keyword">if</span> (outstandingRequestCount === <span class="hljs-number">0</span>) {
                callback();
            } <span class="hljs-keyword">else</span> {
                outstandingRequestCallbacks.push(callback);
            }
        };
        <span class="hljs-keyword">var</span> cachedState, lastHistoryState,
            lastBrowserUrl = location.href,
            baseElement = <span class="hljs-built_in">document</span>.find(<span class="hljs-string">'base'</span>),
            pendingLocation = <span class="hljs-literal">null</span>,
            getCurrentState = !$sniffer.history ? noop : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getCurrentState</span>(<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-keyword">return</span> history.state;
                } <span class="hljs-keyword">catch</span> (e) {}
            };
        cacheState();
        lastHistoryState = cachedState;
        self.url = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">url, replace, state</span>) </span>{
            <span class="hljs-keyword">if</span> (isUndefined(state)) {
                state = <span class="hljs-literal">null</span>;
            }
            <span class="hljs-keyword">if</span> (location !== <span class="hljs-built_in">window</span>.location) location = <span class="hljs-built_in">window</span>.location;
            <span class="hljs-keyword">if</span> (history !== <span class="hljs-built_in">window</span>.history) history = <span class="hljs-built_in">window</span>.history;
            <span class="hljs-keyword">if</span> (url) {
                <span class="hljs-keyword">var</span> sameState = lastHistoryState === state;
                <span class="hljs-keyword">if</span> (lastBrowserUrl === url &amp;&amp; (!$sniffer.history || sameState)) {
                    <span class="hljs-keyword">return</span> self;
                }
                <span class="hljs-keyword">var</span> sameBase = lastBrowserUrl &amp;&amp; stripHash(lastBrowserUrl) === stripHash(url);
                lastBrowserUrl = url;
                lastHistoryState = state;
                <span class="hljs-keyword">if</span> ($sniffer.history &amp;&amp; (!sameBase || !sameState)) {
                    history[replace ? <span class="hljs-string">'replaceState'</span> : <span class="hljs-string">'pushState'</span>](state, <span class="hljs-string">''</span>, url);
                    cacheState();
                    lastHistoryState = cachedState;
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">if</span> (!sameBase) {
                        pendingLocation = url;
                    }
                    <span class="hljs-keyword">if</span> (replace) {
                        location.replace(url);
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!sameBase) {
                        location.href = url;
                    } <span class="hljs-keyword">else</span> {
                        location.hash = getHash(url);
                    }
                    <span class="hljs-keyword">if</span> (location.href !== url) {
                        pendingLocation = url;
                    }
                }
                <span class="hljs-keyword">if</span> (pendingLocation) {
                    pendingLocation = url;
                }
                <span class="hljs-keyword">return</span> self;
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> pendingLocation || location.href.replace(<span class="hljs-regexp">/%27/g</span>, <span class="hljs-string">"'"</span>);
            }
        };
        self.state = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> cachedState;
        };
        <span class="hljs-keyword">var</span> urlChangeListeners = [],
            urlChangeInit = <span class="hljs-literal">false</span>;

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cacheStateAndFireUrlChange</span>(<span class="hljs-params"></span>) </span>{
            pendingLocation = <span class="hljs-literal">null</span>;
            cacheState();
            fireUrlChange();
        }
        <span class="hljs-keyword">var</span> lastCachedState = <span class="hljs-literal">null</span>;

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cacheState</span>(<span class="hljs-params"></span>) </span>{
            cachedState = getCurrentState();
            cachedState = isUndefined(cachedState) ? <span class="hljs-literal">null</span> : cachedState;
            <span class="hljs-keyword">if</span> (equals(cachedState, lastCachedState)) {
                cachedState = lastCachedState;
            }
            lastCachedState = cachedState;
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fireUrlChange</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">if</span> (lastBrowserUrl === self.url() &amp;&amp; lastHistoryState === cachedState) {
                <span class="hljs-keyword">return</span>;
            }
            lastBrowserUrl = self.url();
            lastHistoryState = cachedState;
            forEach(urlChangeListeners, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">listener</span>) </span>{
                listener(self.url(), cachedState);
            });
        }
        self.onUrlChange = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) </span>{
            <span class="hljs-keyword">if</span> (!urlChangeInit) {
                <span class="hljs-keyword">if</span> ($sniffer.history) jqLite(<span class="hljs-built_in">window</span>).on(<span class="hljs-string">'popstate'</span>, cacheStateAndFireUrlChange);
                jqLite(<span class="hljs-built_in">window</span>).on(<span class="hljs-string">'hashchange'</span>, cacheStateAndFireUrlChange);
                urlChangeInit = <span class="hljs-literal">true</span>;
            }
            urlChangeListeners.push(callback);
            <span class="hljs-keyword">return</span> callback;
        };
        self.$$applicationDestroyed = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            jqLite(<span class="hljs-built_in">window</span>).off(<span class="hljs-string">'hashchange popstate'</span>, cacheStateAndFireUrlChange);
        };
        self.$$checkUrlChange = fireUrlChange;
        self.baseHref = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> href = baseElement.attr(<span class="hljs-string">'href'</span>);
            <span class="hljs-keyword">return</span> href ? href.replace(<span class="hljs-regexp">/^(https?\:)?\/\/[^\/]*/</span>, <span class="hljs-string">''</span>) : <span class="hljs-string">''</span>;
        };
        self.defer = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fn, delay</span>) </span>{
            <span class="hljs-keyword">var</span> timeoutId;
            outstandingRequestCount++;
            timeoutId = setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">delete</span> pendingDeferIds[timeoutId];
                completeOutstandingRequest(fn);
            }, delay || <span class="hljs-number">0</span>);
            pendingDeferIds[timeoutId] = <span class="hljs-literal">true</span>;
            <span class="hljs-keyword">return</span> timeoutId;
        };
        self.defer.cancel = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">deferId</span>) </span>{
            <span class="hljs-keyword">if</span> (pendingDeferIds[deferId]) {
                <span class="hljs-keyword">delete</span> pendingDeferIds[deferId];
                clearTimeout(deferId);
                completeOutstandingRequest(noop);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$BrowserProvider</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$window'</span>, <span class="hljs-string">'$log'</span>, <span class="hljs-string">'$sniffer'</span>, <span class="hljs-string">'$document'</span>,
            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$window, $log, $sniffer, $document</span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Browser($<span class="hljs-built_in">window</span>, $<span class="hljs-built_in">document</span>, $log, $sniffer);
            }
        ];
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$CacheFactoryProvider</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.$get = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> caches = {};

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cacheFactory</span>(<span class="hljs-params">cacheId, options</span>) </span>{
                <span class="hljs-keyword">if</span> (cacheId <span class="hljs-keyword">in</span> caches) {
                    <span class="hljs-keyword">throw</span> minErr(<span class="hljs-string">'$cacheFactory'</span>)(<span class="hljs-string">'iid'</span>, <span class="hljs-string">"CacheId '{0}' is already taken!"</span>, cacheId);
                }
                <span class="hljs-keyword">var</span> size = <span class="hljs-number">0</span>,
                    stats = extend({}, options, {
                        <span class="hljs-attr">id</span>: cacheId
                    }),
                    data = createMap(),
                    capacity = (options &amp;&amp; options.capacity) || <span class="hljs-built_in">Number</span>.MAX_VALUE,
                    lruHash = createMap(),
                    freshEnd = <span class="hljs-literal">null</span>,
                    staleEnd = <span class="hljs-literal">null</span>;
                <span class="hljs-keyword">return</span> caches[cacheId] = {
                    <span class="hljs-attr">put</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key, value</span>) </span>{
                        <span class="hljs-keyword">if</span> (isUndefined(value)) <span class="hljs-keyword">return</span>;
                        <span class="hljs-keyword">if</span> (capacity &lt; <span class="hljs-built_in">Number</span>.MAX_VALUE) {
                            <span class="hljs-keyword">var</span> lruEntry = lruHash[key] || (lruHash[key] = {
                                <span class="hljs-attr">key</span>: key
                            });
                            refresh(lruEntry);
                        }
                        <span class="hljs-keyword">if</span> (!(key <span class="hljs-keyword">in</span> data)) size++;
                        data[key] = value;
                        <span class="hljs-keyword">if</span> (size &gt; capacity) {
                            <span class="hljs-keyword">this</span>.remove(staleEnd.key);
                        }
                        <span class="hljs-keyword">return</span> value;
                    },
                    <span class="hljs-attr">get</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key</span>) </span>{
                        <span class="hljs-keyword">if</span> (capacity &lt; <span class="hljs-built_in">Number</span>.MAX_VALUE) {
                            <span class="hljs-keyword">var</span> lruEntry = lruHash[key];
                            <span class="hljs-keyword">if</span> (!lruEntry) <span class="hljs-keyword">return</span>;
                            refresh(lruEntry);
                        }
                        <span class="hljs-keyword">return</span> data[key];
                    },
                    <span class="hljs-attr">remove</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key</span>) </span>{
                        <span class="hljs-keyword">if</span> (capacity &lt; <span class="hljs-built_in">Number</span>.MAX_VALUE) {
                            <span class="hljs-keyword">var</span> lruEntry = lruHash[key];
                            <span class="hljs-keyword">if</span> (!lruEntry) <span class="hljs-keyword">return</span>;
                            <span class="hljs-keyword">if</span> (lruEntry == freshEnd) freshEnd = lruEntry.p;
                            <span class="hljs-keyword">if</span> (lruEntry == staleEnd) staleEnd = lruEntry.n;
                            link(lruEntry.n, lruEntry.p);
                            <span class="hljs-keyword">delete</span> lruHash[key];
                        }
                        <span class="hljs-keyword">if</span> (!(key <span class="hljs-keyword">in</span> data)) <span class="hljs-keyword">return</span>;
                        <span class="hljs-keyword">delete</span> data[key];
                        size--;
                    },
                    <span class="hljs-attr">removeAll</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        data = createMap();
                        size = <span class="hljs-number">0</span>;
                        lruHash = createMap();
                        freshEnd = staleEnd = <span class="hljs-literal">null</span>;
                    },
                    <span class="hljs-attr">destroy</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        data = <span class="hljs-literal">null</span>;
                        stats = <span class="hljs-literal">null</span>;
                        lruHash = <span class="hljs-literal">null</span>;
                        <span class="hljs-keyword">delete</span> caches[cacheId];
                    },
                    <span class="hljs-attr">info</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">return</span> extend({}, stats, {
                            <span class="hljs-attr">size</span>: size
                        });
                    }
                };

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">refresh</span>(<span class="hljs-params">entry</span>) </span>{
                    <span class="hljs-keyword">if</span> (entry != freshEnd) {
                        <span class="hljs-keyword">if</span> (!staleEnd) {
                            staleEnd = entry;
                        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (staleEnd == entry) {
                            staleEnd = entry.n;
                        }
                        link(entry.n, entry.p);
                        link(entry, freshEnd);
                        freshEnd = entry;
                        freshEnd.n = <span class="hljs-literal">null</span>;
                    }
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">link</span>(<span class="hljs-params">nextEntry, prevEntry</span>) </span>{
                    <span class="hljs-keyword">if</span> (nextEntry != prevEntry) {
                        <span class="hljs-keyword">if</span> (nextEntry) nextEntry.p = prevEntry;
                        <span class="hljs-keyword">if</span> (prevEntry) prevEntry.n = nextEntry;
                    }
                }
            }
            cacheFactory.info = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">var</span> info = {};
                forEach(caches, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">cache, cacheId</span>) </span>{
                    info[cacheId] = cache.info();
                });
                <span class="hljs-keyword">return</span> info;
            };
            cacheFactory.get = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">cacheId</span>) </span>{
                <span class="hljs-keyword">return</span> caches[cacheId];
            };
            <span class="hljs-keyword">return</span> cacheFactory;
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$TemplateCacheProvider</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$cacheFactory'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$cacheFactory</span>) </span>{
            <span class="hljs-keyword">return</span> $cacheFactory(<span class="hljs-string">'templates'</span>);
        }];
    }
    <span class="hljs-keyword">var</span> $compileMinErr = minErr(<span class="hljs-string">'$compile'</span>);

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">UNINITIALIZED_VALUE</span>(<span class="hljs-params"></span>) </span>{}
    <span class="hljs-keyword">var</span> _UNINITIALIZED_VALUE = <span class="hljs-keyword">new</span> UNINITIALIZED_VALUE();
    $CompileProvider.$inject = [<span class="hljs-string">'$provide'</span>, <span class="hljs-string">'$$sanitizeUriProvider'</span>];

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$CompileProvider</span>(<span class="hljs-params">$provide, $$sanitizeUriProvider</span>) </span>{
        <span class="hljs-keyword">var</span> hasDirectives = {},
            Suffix = <span class="hljs-string">'Directive'</span>,
            COMMENT_DIRECTIVE_REGEXP = <span class="hljs-regexp">/^\s*directive\:\s*([\w\-]+)\s+(.*)$/</span>,
            CLASS_DIRECTIVE_REGEXP = <span class="hljs-regexp">/(([\w\-]+)(?:\:([^;]+))?;?)/</span>,
            ALL_OR_NOTHING_ATTRS = makeMap(<span class="hljs-string">'ngSrc,ngSrcset,src,srcset'</span>),
            REQUIRE_PREFIX_REGEXP = <span class="hljs-regexp">/^(?:(\^\^?)?(\?)?(\^\^?)?)?/</span>;
        <span class="hljs-keyword">var</span> EVENT_HANDLER_ATTR_REGEXP = <span class="hljs-regexp">/^(on[a-z]+|formaction)$/</span>;
        <span class="hljs-keyword">var</span> bindingCache = createMap();

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseIsolateBindings</span>(<span class="hljs-params">scope, directiveName, isController</span>) </span>{
            <span class="hljs-keyword">var</span> LOCAL_REGEXP = <span class="hljs-regexp">/^\s*([@&amp;&lt;]|=(\*?))(\??)\s*(\w*)\s*$/</span>;
            <span class="hljs-keyword">var</span> bindings = createMap();
            forEach(scope, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">definition, scopeName</span>) </span>{
                <span class="hljs-keyword">if</span> (definition <span class="hljs-keyword">in</span> bindingCache) {
                    bindings[scopeName] = bindingCache[definition];
                    <span class="hljs-keyword">return</span>;
                }
                <span class="hljs-keyword">var</span> match = definition.match(LOCAL_REGEXP);
                <span class="hljs-keyword">if</span> (!match) {
                    <span class="hljs-keyword">throw</span> $compileMinErr(<span class="hljs-string">'iscp'</span>,
                        <span class="hljs-string">"Invalid {3} for directive '{0}'."</span> +
                        <span class="hljs-string">" Definition: {... {1}: '{2}' ...}"</span>,
                        directiveName, scopeName, definition,
                        (isController ? <span class="hljs-string">"controller bindings definition"</span> :
                            <span class="hljs-string">"isolate scope definition"</span>));
                }
                bindings[scopeName] = {
                    <span class="hljs-attr">mode</span>: match[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>],
                    <span class="hljs-attr">collection</span>: match[<span class="hljs-number">2</span>] === <span class="hljs-string">'*'</span>,
                    <span class="hljs-attr">optional</span>: match[<span class="hljs-number">3</span>] === <span class="hljs-string">'?'</span>,
                    <span class="hljs-attr">attrName</span>: match[<span class="hljs-number">4</span>] || scopeName
                };
                <span class="hljs-keyword">if</span> (match[<span class="hljs-number">4</span>]) {
                    bindingCache[definition] = bindings[scopeName];
                }
            });
            <span class="hljs-keyword">return</span> bindings;
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseDirectiveBindings</span>(<span class="hljs-params">directive, directiveName</span>) </span>{
            <span class="hljs-keyword">var</span> bindings = {
                <span class="hljs-attr">isolateScope</span>: <span class="hljs-literal">null</span>,
                <span class="hljs-attr">bindToController</span>: <span class="hljs-literal">null</span>
            };
            <span class="hljs-keyword">if</span> (isObject(directive.scope)) {
                <span class="hljs-keyword">if</span> (directive.bindToController === <span class="hljs-literal">true</span>) {
                    bindings.bindToController = parseIsolateBindings(directive.scope,
                        directiveName, <span class="hljs-literal">true</span>);
                    bindings.isolateScope = {};
                } <span class="hljs-keyword">else</span> {
                    bindings.isolateScope = parseIsolateBindings(directive.scope,
                        directiveName, <span class="hljs-literal">false</span>);
                }
            }
            <span class="hljs-keyword">if</span> (isObject(directive.bindToController)) {
                bindings.bindToController =
                    parseIsolateBindings(directive.bindToController, directiveName, <span class="hljs-literal">true</span>);
            }
            <span class="hljs-keyword">if</span> (isObject(bindings.bindToController)) {
                <span class="hljs-keyword">var</span> controller = directive.controller;
                <span class="hljs-keyword">var</span> controllerAs = directive.controllerAs;
                <span class="hljs-keyword">if</span> (!controller) {
                    <span class="hljs-keyword">throw</span> $compileMinErr(<span class="hljs-string">'noctrl'</span>,
                        <span class="hljs-string">"Cannot bind to controller without directive '{0}'s controller."</span>,
                        directiveName);
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!identifierForController(controller, controllerAs)) {
                    <span class="hljs-keyword">throw</span> $compileMinErr(<span class="hljs-string">'noident'</span>,
                        <span class="hljs-string">"Cannot bind to controller without identifier for directive '{0}'."</span>,
                        directiveName);
                }
            }
            <span class="hljs-keyword">return</span> bindings;
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">assertValidDirectiveName</span>(<span class="hljs-params">name</span>) </span>{
            <span class="hljs-keyword">var</span> letter = name.charAt(<span class="hljs-number">0</span>);
            <span class="hljs-keyword">if</span> (!letter || letter !== lowercase(letter)) {
                <span class="hljs-keyword">throw</span> $compileMinErr(<span class="hljs-string">'baddir'</span>, <span class="hljs-string">"Directive/Component name '{0}' is invalid. The first character must be a lowercase letter"</span>, name);
            }
            <span class="hljs-keyword">if</span> (name !== name.trim()) {
                <span class="hljs-keyword">throw</span> $compileMinErr(<span class="hljs-string">'baddir'</span>,
                    <span class="hljs-string">"Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces"</span>,
                    name);
            }
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getDirectiveRequire</span>(<span class="hljs-params">directive</span>) </span>{
            <span class="hljs-keyword">var</span> <span class="hljs-built_in">require</span> = directive.require || (directive.controller &amp;&amp; directive.name);
            <span class="hljs-keyword">if</span> (!isArray(<span class="hljs-built_in">require</span>) &amp;&amp; isObject(<span class="hljs-built_in">require</span>)) {
                forEach(<span class="hljs-built_in">require</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, key</span>) </span>{
                    <span class="hljs-keyword">var</span> match = value.match(REQUIRE_PREFIX_REGEXP);
                    <span class="hljs-keyword">var</span> name = value.substring(match[<span class="hljs-number">0</span>].length);
                    <span class="hljs-keyword">if</span> (!name) <span class="hljs-built_in">require</span>[key] = match[<span class="hljs-number">0</span>] + key;
                });
            }
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">require</span>;
        }
        <span class="hljs-keyword">this</span>.directive = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">registerDirective</span>(<span class="hljs-params">name, directiveFactory</span>) </span>{
            assertNotHasOwnProperty(name, <span class="hljs-string">'directive'</span>);
            <span class="hljs-keyword">if</span> (isString(name)) {
                assertValidDirectiveName(name);
                assertArg(directiveFactory, <span class="hljs-string">'directiveFactory'</span>);
                <span class="hljs-keyword">if</span> (!hasDirectives.hasOwnProperty(name)) {
                    hasDirectives[name] = [];
                    $provide.factory(name + Suffix, [<span class="hljs-string">'$injector'</span>, <span class="hljs-string">'$exceptionHandler'</span>,
                        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$injector, $exceptionHandler</span>) </span>{
                            <span class="hljs-keyword">var</span> directives = [];
                            forEach(hasDirectives[name], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">directiveFactory, index</span>) </span>{
                                <span class="hljs-keyword">try</span> {
                                    <span class="hljs-keyword">var</span> directive = $injector.invoke(directiveFactory);
                                    <span class="hljs-keyword">if</span> (isFunction(directive)) {
                                        directive = {
                                            <span class="hljs-attr">compile</span>: valueFn(directive)
                                        };
                                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!directive.compile &amp;&amp; directive.link) {
                                        directive.compile = valueFn(directive.link);
                                    }
                                    directive.priority = directive.priority || <span class="hljs-number">0</span>;
                                    directive.index = index;
                                    directive.name = directive.name || name;
                                    directive.require = getDirectiveRequire(directive);
                                    directive.restrict = directive.restrict || <span class="hljs-string">'EA'</span>;
                                    directive.$$moduleName = directiveFactory.$$moduleName;
                                    directives.push(directive);
                                } <span class="hljs-keyword">catch</span> (e) {
                                    $exceptionHandler(e);
                                }
                            });
                            <span class="hljs-keyword">return</span> directives;
                        }
                    ]);
                }
                hasDirectives[name].push(directiveFactory);
            } <span class="hljs-keyword">else</span> {
                forEach(name, reverseParams(registerDirective));
            }
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        };
        <span class="hljs-keyword">this</span>.component = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">registerComponent</span>(<span class="hljs-params">name, options</span>) </span>{
            <span class="hljs-keyword">var</span> controller = options.controller || <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{};

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">factory</span>(<span class="hljs-params">$injector</span>) </span>{
                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeInjectable</span>(<span class="hljs-params">fn</span>) </span>{
                    <span class="hljs-keyword">if</span> (isFunction(fn) || isArray(fn)) {
                        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">tElement, tAttrs</span>) </span>{
                            <span class="hljs-keyword">return</span> $injector.invoke(fn, <span class="hljs-keyword">this</span>, {
                                <span class="hljs-attr">$element</span>: tElement,
                                <span class="hljs-attr">$attrs</span>: tAttrs
                            });
                        };
                    } <span class="hljs-keyword">else</span> {
                        <span class="hljs-keyword">return</span> fn;
                    }
                }
                <span class="hljs-keyword">var</span> template = (!options.template &amp;&amp; !options.templateUrl ? <span class="hljs-string">''</span> : options.template);
                <span class="hljs-keyword">var</span> ddo = {
                    <span class="hljs-attr">controller</span>: controller,
                    <span class="hljs-attr">controllerAs</span>: identifierForController(options.controller) || options.controllerAs || <span class="hljs-string">'$ctrl'</span>,
                    <span class="hljs-attr">template</span>: makeInjectable(template),
                    <span class="hljs-attr">templateUrl</span>: makeInjectable(options.templateUrl),
                    <span class="hljs-attr">transclude</span>: options.transclude,
                    <span class="hljs-attr">scope</span>: {},
                    <span class="hljs-attr">bindToController</span>: options.bindings || {},
                    <span class="hljs-attr">restrict</span>: <span class="hljs-string">'E'</span>,
                    <span class="hljs-attr">require</span>: options.require
                };
                forEach(options, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">val, key</span>) </span>{
                    <span class="hljs-keyword">if</span> (key.charAt(<span class="hljs-number">0</span>) === <span class="hljs-string">'$'</span>) ddo[key] = val;
                });
                <span class="hljs-keyword">return</span> ddo;
            }
            forEach(options, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">val, key</span>) </span>{
                <span class="hljs-keyword">if</span> (key.charAt(<span class="hljs-number">0</span>) === <span class="hljs-string">'$'</span>) {
                    factory[key] = val;
                    <span class="hljs-keyword">if</span> (isFunction(controller)) controller[key] = val;
                }
            });
            factory.$inject = [<span class="hljs-string">'$injector'</span>];
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.directive(name, factory);
        };
        <span class="hljs-keyword">this</span>.aHrefSanitizationWhitelist = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">regexp</span>) </span>{
            <span class="hljs-keyword">if</span> (isDefined(regexp)) {
                $$sanitizeUriProvider.aHrefSanitizationWhitelist(regexp);
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> $$sanitizeUriProvider.aHrefSanitizationWhitelist();
            }
        };
        <span class="hljs-keyword">this</span>.imgSrcSanitizationWhitelist = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">regexp</span>) </span>{
            <span class="hljs-keyword">if</span> (isDefined(regexp)) {
                $$sanitizeUriProvider.imgSrcSanitizationWhitelist(regexp);
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> $$sanitizeUriProvider.imgSrcSanitizationWhitelist();
            }
        };
        <span class="hljs-keyword">var</span> debugInfoEnabled = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">this</span>.debugInfoEnabled = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">enabled</span>) </span>{
            <span class="hljs-keyword">if</span> (isDefined(enabled)) {
                debugInfoEnabled = enabled;
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
            }
            <span class="hljs-keyword">return</span> debugInfoEnabled;
        };
        <span class="hljs-keyword">var</span> TTL = <span class="hljs-number">10</span>;
        <span class="hljs-keyword">this</span>.onChangesTtl = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">arguments</span>.length) {
                TTL = value;
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
            }
            <span class="hljs-keyword">return</span> TTL;
        };
        <span class="hljs-keyword">this</span>.$get = [
            <span class="hljs-string">'$injector'</span>, <span class="hljs-string">'$interpolate'</span>, <span class="hljs-string">'$exceptionHandler'</span>, <span class="hljs-string">'$templateRequest'</span>, <span class="hljs-string">'$parse'</span>,
            <span class="hljs-string">'$controller'</span>, <span class="hljs-string">'$rootScope'</span>, <span class="hljs-string">'$sce'</span>, <span class="hljs-string">'$animate'</span>, <span class="hljs-string">'$$sanitizeUri'</span>,
            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$injector, $interpolate, $exceptionHandler, $templateRequest, $parse,
                $controller, $rootScope, $sce, $animate, $$sanitizeUri</span>) </span>{
                <span class="hljs-keyword">var</span> SIMPLE_ATTR_NAME = <span class="hljs-regexp">/^\w/</span>;
                <span class="hljs-keyword">var</span> specialAttrHolder = <span class="hljs-built_in">window</span>.document.createElement(<span class="hljs-string">'div'</span>);
                <span class="hljs-keyword">var</span> onChangesTtl = TTL;
                <span class="hljs-keyword">var</span> onChangesQueue;

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">flushOnChangesQueue</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">try</span> {
                        <span class="hljs-keyword">if</span> (!(--onChangesTtl)) {
                            onChangesQueue = <span class="hljs-literal">undefined</span>;
                            <span class="hljs-keyword">throw</span> $compileMinErr(<span class="hljs-string">'infchng'</span>, <span class="hljs-string">'{0} $onChanges() iterations reached. Aborting!\n'</span>, TTL);
                        }
                        $rootScope.$apply(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            <span class="hljs-keyword">var</span> errors = [];
                            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, ii = onChangesQueue.length; i &lt; ii; ++i) {
                                <span class="hljs-keyword">try</span> {
                                    onChangesQueue[i]();
                                } <span class="hljs-keyword">catch</span> (e) {
                                    errors.push(e);
                                }
                            }
                            onChangesQueue = <span class="hljs-literal">undefined</span>;
                            <span class="hljs-keyword">if</span> (errors.length) {
                                <span class="hljs-keyword">throw</span> errors;
                            }
                        });
                    } <span class="hljs-keyword">finally</span> {
                        onChangesTtl++;
                    }
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Attributes</span>(<span class="hljs-params">element, attributesToCopy</span>) </span>{
                    <span class="hljs-keyword">if</span> (attributesToCopy) {
                        <span class="hljs-keyword">var</span> keys = <span class="hljs-built_in">Object</span>.keys(attributesToCopy);
                        <span class="hljs-keyword">var</span> i, l, key;
                        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, l = keys.length; i &lt; l; i++) {
                            key = keys[i];
                            <span class="hljs-keyword">this</span>[key] = attributesToCopy[key];
                        }
                    } <span class="hljs-keyword">else</span> {
                        <span class="hljs-keyword">this</span>.$attr = {};
                    }
                    <span class="hljs-keyword">this</span>.$$element = element;
                }
                Attributes.prototype = {
                    <span class="hljs-attr">$normalize</span>: directiveNormalize,
                    <span class="hljs-attr">$addClass</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">classVal</span>) </span>{
                        <span class="hljs-keyword">if</span> (classVal &amp;&amp; classVal.length &gt; <span class="hljs-number">0</span>) {
                            $animate.addClass(<span class="hljs-keyword">this</span>.$$element, classVal);
                        }
                    },
                    <span class="hljs-attr">$removeClass</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">classVal</span>) </span>{
                        <span class="hljs-keyword">if</span> (classVal &amp;&amp; classVal.length &gt; <span class="hljs-number">0</span>) {
                            $animate.removeClass(<span class="hljs-keyword">this</span>.$$element, classVal);
                        }
                    },
                    <span class="hljs-attr">$updateClass</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">newClasses, oldClasses</span>) </span>{
                        <span class="hljs-keyword">var</span> toAdd = tokenDifference(newClasses, oldClasses);
                        <span class="hljs-keyword">if</span> (toAdd &amp;&amp; toAdd.length) {
                            $animate.addClass(<span class="hljs-keyword">this</span>.$$element, toAdd);
                        }
                        <span class="hljs-keyword">var</span> toRemove = tokenDifference(oldClasses, newClasses);
                        <span class="hljs-keyword">if</span> (toRemove &amp;&amp; toRemove.length) {
                            $animate.removeClass(<span class="hljs-keyword">this</span>.$$element, toRemove);
                        }
                    },
                    <span class="hljs-attr">$set</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key, value, writeAttr, attrName</span>) </span>{
                        <span class="hljs-keyword">var</span> node = <span class="hljs-keyword">this</span>.$$element[<span class="hljs-number">0</span>],
                            booleanKey = getBooleanAttrName(node, key),
                            aliasedKey = getAliasedAttrName(key),
                            observer = key,
                            nodeName;
                        <span class="hljs-keyword">if</span> (booleanKey) {
                            <span class="hljs-keyword">this</span>.$$element.prop(key, value);
                            attrName = booleanKey;
                        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (aliasedKey) {
                            <span class="hljs-keyword">this</span>[aliasedKey] = value;
                            observer = aliasedKey;
                        }
                        <span class="hljs-keyword">this</span>[key] = value;
                        <span class="hljs-keyword">if</span> (attrName) {
                            <span class="hljs-keyword">this</span>.$attr[key] = attrName;
                        } <span class="hljs-keyword">else</span> {
                            attrName = <span class="hljs-keyword">this</span>.$attr[key];
                            <span class="hljs-keyword">if</span> (!attrName) {
                                <span class="hljs-keyword">this</span>.$attr[key] = attrName = snake_case(key, <span class="hljs-string">'-'</span>);
                            }
                        }
                        nodeName = nodeName_(<span class="hljs-keyword">this</span>.$$element);
                        <span class="hljs-keyword">if</span> ((nodeName === <span class="hljs-string">'a'</span> &amp;&amp; (key === <span class="hljs-string">'href'</span> || key === <span class="hljs-string">'xlinkHref'</span>)) ||
                            (nodeName === <span class="hljs-string">'img'</span> &amp;&amp; key === <span class="hljs-string">'src'</span>)) {
                            <span class="hljs-keyword">this</span>[key] = value = $$sanitizeUri(value, key === <span class="hljs-string">'src'</span>);
                        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (nodeName === <span class="hljs-string">'img'</span> &amp;&amp; key === <span class="hljs-string">'srcset'</span> &amp;&amp; isDefined(value)) {
                            <span class="hljs-keyword">var</span> result = <span class="hljs-string">""</span>;
                            <span class="hljs-keyword">var</span> trimmedSrcset = trim(value);
                            <span class="hljs-keyword">var</span> srcPattern = <span class="hljs-regexp">/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/</span>;
                            <span class="hljs-keyword">var</span> pattern = <span class="hljs-regexp">/\s/</span>.test(trimmedSrcset) ? srcPattern : <span class="hljs-regexp">/(,)/</span>;
                            <span class="hljs-keyword">var</span> rawUris = trimmedSrcset.split(pattern);
                            <span class="hljs-keyword">var</span> nbrUrisWith2parts = <span class="hljs-built_in">Math</span>.floor(rawUris.length / <span class="hljs-number">2</span>);
                            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; nbrUrisWith2parts; i++) {
                                <span class="hljs-keyword">var</span> innerIdx = i * <span class="hljs-number">2</span>;
                                result += $$sanitizeUri(trim(rawUris[innerIdx]), <span class="hljs-literal">true</span>);
                                result += (<span class="hljs-string">" "</span> + trim(rawUris[innerIdx + <span class="hljs-number">1</span>]));
                            }
                            <span class="hljs-keyword">var</span> lastTuple = trim(rawUris[i * <span class="hljs-number">2</span>]).split(<span class="hljs-regexp">/\s/</span>);
                            result += $$sanitizeUri(trim(lastTuple[<span class="hljs-number">0</span>]), <span class="hljs-literal">true</span>);
                            <span class="hljs-keyword">if</span> (lastTuple.length === <span class="hljs-number">2</span>) {
                                result += (<span class="hljs-string">" "</span> + trim(lastTuple[<span class="hljs-number">1</span>]));
                            }
                            <span class="hljs-keyword">this</span>[key] = value = result;
                        }
                        <span class="hljs-keyword">if</span> (writeAttr !== <span class="hljs-literal">false</span>) {
                            <span class="hljs-keyword">if</span> (value === <span class="hljs-literal">null</span> || isUndefined(value)) {
                                <span class="hljs-keyword">this</span>.$$element.removeAttr(attrName);
                            } <span class="hljs-keyword">else</span> {
                                <span class="hljs-keyword">if</span> (SIMPLE_ATTR_NAME.test(attrName)) {
                                    <span class="hljs-keyword">this</span>.$$element.attr(attrName, value);
                                } <span class="hljs-keyword">else</span> {
                                    setSpecialAttr(<span class="hljs-keyword">this</span>.$$element[<span class="hljs-number">0</span>], attrName, value);
                                }
                            }
                        }
                        <span class="hljs-keyword">var</span> $$observers = <span class="hljs-keyword">this</span>.$$observers;
                        $$observers &amp;&amp; forEach($$observers[observer], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fn</span>) </span>{
                            <span class="hljs-keyword">try</span> {
                                fn(value);
                            } <span class="hljs-keyword">catch</span> (e) {
                                $exceptionHandler(e);
                            }
                        });
                    },
                    <span class="hljs-attr">$observe</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key, fn</span>) </span>{
                        <span class="hljs-keyword">var</span> attrs = <span class="hljs-keyword">this</span>,
                            $$observers = (attrs.$$observers || (attrs.$$observers = createMap())),
                            listeners = ($$observers[key] || ($$observers[key] = []));
                        listeners.push(fn);
                        $rootScope.$evalAsync(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            <span class="hljs-keyword">if</span> (!listeners.$$inter &amp;&amp; attrs.hasOwnProperty(key) &amp;&amp; !isUndefined(attrs[key])) {
                                fn(attrs[key]);
                            }
                        });
                        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            arrayRemove(listeners, fn);
                        };
                    }
                };

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setSpecialAttr</span>(<span class="hljs-params">element, attrName, value</span>) </span>{
                    specialAttrHolder.innerHTML = <span class="hljs-string">"&lt;span "</span> + attrName + <span class="hljs-string">"&gt;"</span>;
                    <span class="hljs-keyword">var</span> attributes = specialAttrHolder.firstChild.attributes;
                    <span class="hljs-keyword">var</span> attribute = attributes[<span class="hljs-number">0</span>];
                    attributes.removeNamedItem(attribute.name);
                    attribute.value = value;
                    element.attributes.setNamedItem(attribute);
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">safeAddClass</span>(<span class="hljs-params">$element, className</span>) </span>{
                    <span class="hljs-keyword">try</span> {
                        $element.addClass(className);
                    } <span class="hljs-keyword">catch</span> (e) {}
                }
                <span class="hljs-keyword">var</span> startSymbol = $interpolate.startSymbol(),
                    endSymbol = $interpolate.endSymbol(),
                    denormalizeTemplate = (startSymbol == <span class="hljs-string">'{{'</span> &amp;&amp; endSymbol == <span class="hljs-string">'}}'</span>) ?
                    identity :
                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">denormalizeTemplate</span>(<span class="hljs-params">template</span>) </span>{
                        <span class="hljs-keyword">return</span> template.replace(<span class="hljs-regexp">/\{\{/g</span>, startSymbol).replace(<span class="hljs-regexp">/}}/g</span>, endSymbol);
                    },
                    NG_ATTR_BINDING = <span class="hljs-regexp">/^ngAttr[A-Z]/</span>;
                <span class="hljs-keyword">var</span> MULTI_ELEMENT_DIR_RE = <span class="hljs-regexp">/^(.+)Start$/</span>;
                compile.$$addBindingInfo = debugInfoEnabled ? <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$$addBindingInfo</span>(<span class="hljs-params">$element, binding</span>) </span>{
                    <span class="hljs-keyword">var</span> bindings = $element.data(<span class="hljs-string">'$binding'</span>) || [];
                    <span class="hljs-keyword">if</span> (isArray(binding)) {
                        bindings = bindings.concat(binding);
                    } <span class="hljs-keyword">else</span> {
                        bindings.push(binding);
                    }
                    $element.data(<span class="hljs-string">'$binding'</span>, bindings);
                } : noop;
                compile.$$addBindingClass = debugInfoEnabled ? <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$$addBindingClass</span>(<span class="hljs-params">$element</span>) </span>{
                    safeAddClass($element, <span class="hljs-string">'ng-binding'</span>);
                } : noop;
                compile.$$addScopeInfo = debugInfoEnabled ? <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$$addScopeInfo</span>(<span class="hljs-params">$element, scope, isolated, noTemplate</span>) </span>{
                    <span class="hljs-keyword">var</span> dataName = isolated ? (noTemplate ? <span class="hljs-string">'$isolateScopeNoTemplate'</span> : <span class="hljs-string">'$isolateScope'</span>) : <span class="hljs-string">'$scope'</span>;
                    $element.data(dataName, scope);
                } : noop;
                compile.$$addScopeClass = debugInfoEnabled ? <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$$addScopeClass</span>(<span class="hljs-params">$element, isolated</span>) </span>{
                    safeAddClass($element, isolated ? <span class="hljs-string">'ng-isolate-scope'</span> : <span class="hljs-string">'ng-scope'</span>);
                } : noop;
                compile.$$createComment = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">directiveName, comment</span>) </span>{
                    <span class="hljs-keyword">var</span> content = <span class="hljs-string">''</span>;
                    <span class="hljs-keyword">if</span> (debugInfoEnabled) {
                        content = <span class="hljs-string">' '</span> + (directiveName || <span class="hljs-string">''</span>) + <span class="hljs-string">': '</span>;
                        <span class="hljs-keyword">if</span> (comment) content += comment + <span class="hljs-string">' '</span>;
                    }
                    <span class="hljs-keyword">return</span> <span class="hljs-built_in">window</span>.document.createComment(content);
                };
                <span class="hljs-keyword">return</span> compile;

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compile</span>(<span class="hljs-params">$compileNodes, transcludeFn, maxPriority, ignoreDirective,
                    previousCompileContext</span>) </span>{
                    <span class="hljs-keyword">if</span> (!($compileNodes <span class="hljs-keyword">instanceof</span> jqLite)) {
                        $compileNodes = jqLite($compileNodes);
                    }
                    <span class="hljs-keyword">var</span> NOT_EMPTY = <span class="hljs-regexp">/\S+/</span>;
                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, len = $compileNodes.length; i &lt; len; i++) {
                        <span class="hljs-keyword">var</span> domNode = $compileNodes[i];
                        <span class="hljs-keyword">if</span> (domNode.nodeType === NODE_TYPE_TEXT &amp;&amp; domNode.nodeValue.match(NOT_EMPTY)) {
                            jqLiteWrapNode(domNode, $compileNodes[i] = <span class="hljs-built_in">window</span>.document.createElement(<span class="hljs-string">'span'</span>));
                        }
                    }
                    <span class="hljs-keyword">var</span> compositeLinkFn =
                        compileNodes($compileNodes, transcludeFn, $compileNodes,
                            maxPriority, ignoreDirective, previousCompileContext);
                    compile.$$addScopeClass($compileNodes);
                    <span class="hljs-keyword">var</span> namespace = <span class="hljs-literal">null</span>;
                    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">publicLinkFn</span>(<span class="hljs-params">scope, cloneConnectFn, options</span>) </span>{
                        assertArg(scope, <span class="hljs-string">'scope'</span>);
                        <span class="hljs-keyword">if</span> (previousCompileContext &amp;&amp; previousCompileContext.needsNewScope) {
                            scope = scope.$parent.$<span class="hljs-keyword">new</span>();
                        }
                        options = options || {};
                        <span class="hljs-keyword">var</span> parentBoundTranscludeFn = options.parentBoundTranscludeFn,
                            transcludeControllers = options.transcludeControllers,
                            futureParentElement = options.futureParentElement;
                        <span class="hljs-keyword">if</span> (parentBoundTranscludeFn &amp;&amp; parentBoundTranscludeFn.$$boundTransclude) {
                            parentBoundTranscludeFn = parentBoundTranscludeFn.$$boundTransclude;
                        }
                        <span class="hljs-keyword">if</span> (!namespace) {
                            namespace = detectNamespaceForChildElements(futureParentElement);
                        }
                        <span class="hljs-keyword">var</span> $linkNode;
                        <span class="hljs-keyword">if</span> (namespace !== <span class="hljs-string">'html'</span>) {
                            $linkNode = jqLite(
                                wrapTemplate(namespace, jqLite(<span class="hljs-string">'&lt;div&gt;'</span>).append($compileNodes).html())
                            );
                        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cloneConnectFn) {
                            $linkNode = JQLitePrototype.clone.call($compileNodes);
                        } <span class="hljs-keyword">else</span> {
                            $linkNode = $compileNodes;
                        }
                        <span class="hljs-keyword">if</span> (transcludeControllers) {
                            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> controllerName <span class="hljs-keyword">in</span> transcludeControllers) {
                                $linkNode.data(<span class="hljs-string">'$'</span> + controllerName + <span class="hljs-string">'Controller'</span>, transcludeControllers[controllerName].instance);
                            }
                        }
                        compile.$$addScopeInfo($linkNode, scope);
                        <span class="hljs-keyword">if</span> (cloneConnectFn) cloneConnectFn($linkNode, scope);
                        <span class="hljs-keyword">if</span> (compositeLinkFn) compositeLinkFn(scope, $linkNode, $linkNode, parentBoundTranscludeFn);
                        <span class="hljs-keyword">return</span> $linkNode;
                    };
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">detectNamespaceForChildElements</span>(<span class="hljs-params">parentElement</span>) </span>{
                    <span class="hljs-keyword">var</span> node = parentElement &amp;&amp; parentElement[<span class="hljs-number">0</span>];
                    <span class="hljs-keyword">if</span> (!node) {
                        <span class="hljs-keyword">return</span> <span class="hljs-string">'html'</span>;
                    } <span class="hljs-keyword">else</span> {
                        <span class="hljs-keyword">return</span> nodeName_(node) !== <span class="hljs-string">'foreignobject'</span> &amp;&amp; toString.call(node).match(<span class="hljs-regexp">/SVG/</span>) ? <span class="hljs-string">'svg'</span> : <span class="hljs-string">'html'</span>;
                    }
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileNodes</span>(<span class="hljs-params">nodeList, transcludeFn, $rootElement, maxPriority, ignoreDirective,
                    previousCompileContext</span>) </span>{
                    <span class="hljs-keyword">var</span> linkFns = [],
                        attrs, directives, nodeLinkFn, childNodes, childLinkFn, linkFnFound, nodeLinkFnFound;
                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; nodeList.length; i++) {
                        attrs = <span class="hljs-keyword">new</span> Attributes();
                        directives = collectDirectives(nodeList[i], [], attrs, i === <span class="hljs-number">0</span> ? maxPriority : <span class="hljs-literal">undefined</span>,
                            ignoreDirective);
                        nodeLinkFn = (directives.length) ?
                            applyDirectivesToNode(directives, nodeList[i], attrs, transcludeFn, $rootElement,
                                <span class="hljs-literal">null</span>, [], [], previousCompileContext) :
                            <span class="hljs-literal">null</span>;
                        <span class="hljs-keyword">if</span> (nodeLinkFn &amp;&amp; nodeLinkFn.scope) {
                            compile.$$addScopeClass(attrs.$$element);
                        }
                        childLinkFn = (nodeLinkFn &amp;&amp; nodeLinkFn.terminal ||
                                !(childNodes = nodeList[i].childNodes) ||
                                !childNodes.length) ?
                            <span class="hljs-literal">null</span> :
                            compileNodes(childNodes,
                                nodeLinkFn ? (
                                    (nodeLinkFn.transcludeOnThisElement || !nodeLinkFn.templateOnThisElement) &amp;&amp;
                                    nodeLinkFn.transclude) : transcludeFn);
                        <span class="hljs-keyword">if</span> (nodeLinkFn || childLinkFn) {
                            linkFns.push(i, nodeLinkFn, childLinkFn);
                            linkFnFound = <span class="hljs-literal">true</span>;
                            nodeLinkFnFound = nodeLinkFnFound || nodeLinkFn;
                        }
                        previousCompileContext = <span class="hljs-literal">null</span>;
                    }
                    <span class="hljs-keyword">return</span> linkFnFound ? compositeLinkFn : <span class="hljs-literal">null</span>;

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compositeLinkFn</span>(<span class="hljs-params">scope, nodeList, $rootElement, parentBoundTranscludeFn</span>) </span>{
                        <span class="hljs-keyword">var</span> nodeLinkFn, childLinkFn, node, childScope, i, ii, idx, childBoundTranscludeFn;
                        <span class="hljs-keyword">var</span> stableNodeList;
                        <span class="hljs-keyword">if</span> (nodeLinkFnFound) {
                            <span class="hljs-keyword">var</span> nodeListLength = nodeList.length;
                            stableNodeList = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(nodeListLength);
                            <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; linkFns.length; i += <span class="hljs-number">3</span>) {
                                idx = linkFns[i];
                                stableNodeList[idx] = nodeList[idx];
                            }
                        } <span class="hljs-keyword">else</span> {
                            stableNodeList = nodeList;
                        }
                        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, ii = linkFns.length; i &lt; ii;) {
                            node = stableNodeList[linkFns[i++]];
                            nodeLinkFn = linkFns[i++];
                            childLinkFn = linkFns[i++];
                            <span class="hljs-keyword">if</span> (nodeLinkFn) {
                                <span class="hljs-keyword">if</span> (nodeLinkFn.scope) {
                                    childScope = scope.$<span class="hljs-keyword">new</span>();
                                    compile.$$addScopeInfo(jqLite(node), childScope);
                                } <span class="hljs-keyword">else</span> {
                                    childScope = scope;
                                }
                                <span class="hljs-keyword">if</span> (nodeLinkFn.transcludeOnThisElement) {
                                    childBoundTranscludeFn = createBoundTranscludeFn(
                                        scope, nodeLinkFn.transclude, parentBoundTranscludeFn);
                                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!nodeLinkFn.templateOnThisElement &amp;&amp; parentBoundTranscludeFn) {
                                    childBoundTranscludeFn = parentBoundTranscludeFn;
                                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!parentBoundTranscludeFn &amp;&amp; transcludeFn) {
                                    childBoundTranscludeFn = createBoundTranscludeFn(scope, transcludeFn);
                                } <span class="hljs-keyword">else</span> {
                                    childBoundTranscludeFn = <span class="hljs-literal">null</span>;
                                }
                                nodeLinkFn(childLinkFn, childScope, node, $rootElement, childBoundTranscludeFn);
                            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (childLinkFn) {
                                childLinkFn(scope, node.childNodes, <span class="hljs-literal">undefined</span>, parentBoundTranscludeFn);
                            }
                        }
                    }
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createBoundTranscludeFn</span>(<span class="hljs-params">scope, transcludeFn, previousBoundTranscludeFn</span>) </span>{
                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">boundTranscludeFn</span>(<span class="hljs-params">transcludedScope, cloneFn, controllers, futureParentElement, containingScope</span>) </span>{
                        <span class="hljs-keyword">if</span> (!transcludedScope) {
                            transcludedScope = scope.$<span class="hljs-keyword">new</span>(<span class="hljs-literal">false</span>, containingScope);
                            transcludedScope.$$transcluded = <span class="hljs-literal">true</span>;
                        }
                        <span class="hljs-keyword">return</span> transcludeFn(transcludedScope, cloneFn, {
                            <span class="hljs-attr">parentBoundTranscludeFn</span>: previousBoundTranscludeFn,
                            <span class="hljs-attr">transcludeControllers</span>: controllers,
                            <span class="hljs-attr">futureParentElement</span>: futureParentElement
                        });
                    }
                    <span class="hljs-keyword">var</span> boundSlots = boundTranscludeFn.$$slots = createMap();
                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> slotName <span class="hljs-keyword">in</span> transcludeFn.$$slots) {
                        <span class="hljs-keyword">if</span> (transcludeFn.$$slots[slotName]) {
                            boundSlots[slotName] = createBoundTranscludeFn(scope, transcludeFn.$$slots[slotName], previousBoundTranscludeFn);
                        } <span class="hljs-keyword">else</span> {
                            boundSlots[slotName] = <span class="hljs-literal">null</span>;
                        }
                    }
                    <span class="hljs-keyword">return</span> boundTranscludeFn;
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">collectDirectives</span>(<span class="hljs-params">node, directives, attrs, maxPriority, ignoreDirective</span>) </span>{
                    <span class="hljs-keyword">var</span> nodeType = node.nodeType,
                        attrsMap = attrs.$attr,
                        match,
                        className;
                    <span class="hljs-keyword">switch</span> (nodeType) {
                        <span class="hljs-keyword">case</span> NODE_TYPE_ELEMENT:
                            addDirective(directives,
                                directiveNormalize(nodeName_(node)), <span class="hljs-string">'E'</span>, maxPriority, ignoreDirective);
                            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> attr, name, nName, ngAttrName, value, isNgAttr, nAttrs = node.attributes,
                                    j = <span class="hljs-number">0</span>, jj = nAttrs &amp;&amp; nAttrs.length; j &lt; jj; j++) {
                                <span class="hljs-keyword">var</span> attrStartName = <span class="hljs-literal">false</span>;
                                <span class="hljs-keyword">var</span> attrEndName = <span class="hljs-literal">false</span>;
                                attr = nAttrs[j];
                                name = attr.name;
                                value = trim(attr.value);
                                ngAttrName = directiveNormalize(name);
                                <span class="hljs-keyword">if</span> (isNgAttr = NG_ATTR_BINDING.test(ngAttrName)) {
                                    name = name.replace(PREFIX_REGEXP, <span class="hljs-string">''</span>)
                                        .substr(<span class="hljs-number">8</span>).replace(<span class="hljs-regexp">/_(.)/g</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">match, letter</span>) </span>{
                                            <span class="hljs-keyword">return</span> letter.toUpperCase();
                                        });
                                }
                                <span class="hljs-keyword">var</span> multiElementMatch = ngAttrName.match(MULTI_ELEMENT_DIR_RE);
                                <span class="hljs-keyword">if</span> (multiElementMatch &amp;&amp; directiveIsMultiElement(multiElementMatch[<span class="hljs-number">1</span>])) {
                                    attrStartName = name;
                                    attrEndName = name.substr(<span class="hljs-number">0</span>, name.length - <span class="hljs-number">5</span>) + <span class="hljs-string">'end'</span>;
                                    name = name.substr(<span class="hljs-number">0</span>, name.length - <span class="hljs-number">6</span>);
                                }
                                nName = directiveNormalize(name.toLowerCase());
                                attrsMap[nName] = name;
                                <span class="hljs-keyword">if</span> (isNgAttr || !attrs.hasOwnProperty(nName)) {
                                    attrs[nName] = value;
                                    <span class="hljs-keyword">if</span> (getBooleanAttrName(node, nName)) {
                                        attrs[nName] = <span class="hljs-literal">true</span>;
                                    }
                                }
                                addAttrInterpolateDirective(node, directives, value, nName, isNgAttr);
                                addDirective(directives, nName, <span class="hljs-string">'A'</span>, maxPriority, ignoreDirective, attrStartName,
                                    attrEndName);
                            }
                            className = node.className;
                            <span class="hljs-keyword">if</span> (isObject(className)) {
                                className = className.animVal;
                            }
                            <span class="hljs-keyword">if</span> (isString(className) &amp;&amp; className !== <span class="hljs-string">''</span>) {
                                <span class="hljs-keyword">while</span> (match = CLASS_DIRECTIVE_REGEXP.exec(className)) {
                                    nName = directiveNormalize(match[<span class="hljs-number">2</span>]);
                                    <span class="hljs-keyword">if</span> (addDirective(directives, nName, <span class="hljs-string">'C'</span>, maxPriority, ignoreDirective)) {
                                        attrs[nName] = trim(match[<span class="hljs-number">3</span>]);
                                    }
                                    className = className.substr(match.index + match[<span class="hljs-number">0</span>].length);
                                }
                            }
                            <span class="hljs-keyword">break</span>;
                        <span class="hljs-keyword">case</span> NODE_TYPE_TEXT:
                            <span class="hljs-keyword">if</span> (msie === <span class="hljs-number">11</span>) {
                                <span class="hljs-keyword">while</span> (node.parentNode &amp;&amp; node.nextSibling &amp;&amp; node.nextSibling.nodeType === NODE_TYPE_TEXT) {
                                    node.nodeValue = node.nodeValue + node.nextSibling.nodeValue;
                                    node.parentNode.removeChild(node.nextSibling);
                                }
                            }
                            addTextInterpolateDirective(directives, node.nodeValue);
                            <span class="hljs-keyword">break</span>;
                        <span class="hljs-keyword">case</span> NODE_TYPE_COMMENT:
                            collectCommentDirectives(node, directives, attrs, maxPriority, ignoreDirective);
                            <span class="hljs-keyword">break</span>;
                    }
                    directives.sort(byPriority);
                    <span class="hljs-keyword">return</span> directives;
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">collectCommentDirectives</span>(<span class="hljs-params">node, directives, attrs, maxPriority, ignoreDirective</span>) </span>{
                    <span class="hljs-keyword">try</span> {
                        <span class="hljs-keyword">var</span> match = COMMENT_DIRECTIVE_REGEXP.exec(node.nodeValue);
                        <span class="hljs-keyword">if</span> (match) {
                            <span class="hljs-keyword">var</span> nName = directiveNormalize(match[<span class="hljs-number">1</span>]);
                            <span class="hljs-keyword">if</span> (addDirective(directives, nName, <span class="hljs-string">'M'</span>, maxPriority, ignoreDirective)) {
                                attrs[nName] = trim(match[<span class="hljs-number">2</span>]);
                            }
                        }
                    } <span class="hljs-keyword">catch</span> (e) {}
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">groupScan</span>(<span class="hljs-params">node, attrStart, attrEnd</span>) </span>{
                    <span class="hljs-keyword">var</span> nodes = [];
                    <span class="hljs-keyword">var</span> depth = <span class="hljs-number">0</span>;
                    <span class="hljs-keyword">if</span> (attrStart &amp;&amp; node.hasAttribute &amp;&amp; node.hasAttribute(attrStart)) {
                        <span class="hljs-keyword">do</span> {
                            <span class="hljs-keyword">if</span> (!node) {
                                <span class="hljs-keyword">throw</span> $compileMinErr(<span class="hljs-string">'uterdir'</span>,
                                    <span class="hljs-string">"Unterminated attribute, found '{0}' but no matching '{1}' found."</span>,
                                    attrStart, attrEnd);
                            }
                            <span class="hljs-keyword">if</span> (node.nodeType == NODE_TYPE_ELEMENT) {
                                <span class="hljs-keyword">if</span> (node.hasAttribute(attrStart)) depth++;
                                <span class="hljs-keyword">if</span> (node.hasAttribute(attrEnd)) depth--;
                            }
                            nodes.push(node);
                            node = node.nextSibling;
                        } <span class="hljs-keyword">while</span> (depth &gt; <span class="hljs-number">0</span>);
                    } <span class="hljs-keyword">else</span> {
                        nodes.push(node);
                    }
                    <span class="hljs-keyword">return</span> jqLite(nodes);
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">groupElementsLinkFnWrapper</span>(<span class="hljs-params">linkFn, attrStart, attrEnd</span>) </span>{
                    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">groupedElementsLink</span>(<span class="hljs-params">scope, element, attrs, controllers, transcludeFn</span>) </span>{
                        element = groupScan(element[<span class="hljs-number">0</span>], attrStart, attrEnd);
                        <span class="hljs-keyword">return</span> linkFn(scope, element, attrs, controllers, transcludeFn);
                    };
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compilationGenerator</span>(<span class="hljs-params">eager, $compileNodes, transcludeFn, maxPriority, ignoreDirective, previousCompileContext</span>) </span>{
                    <span class="hljs-keyword">var</span> compiled;
                    <span class="hljs-keyword">if</span> (eager) {
                        <span class="hljs-keyword">return</span> compile($compileNodes, transcludeFn, maxPriority, ignoreDirective, previousCompileContext);
                    }
                    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">lazyCompilation</span>(<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">if</span> (!compiled) {
                            compiled = compile($compileNodes, transcludeFn, maxPriority, ignoreDirective, previousCompileContext);
                            $compileNodes = transcludeFn = previousCompileContext = <span class="hljs-literal">null</span>;
                        }
                        <span class="hljs-keyword">return</span> compiled.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
                    };
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">applyDirectivesToNode</span>(<span class="hljs-params">directives, compileNode, templateAttrs, transcludeFn,
                    jqCollection, originalReplaceDirective, preLinkFns, postLinkFns,
                    previousCompileContext</span>) </span>{
                    previousCompileContext = previousCompileContext || {};
                    <span class="hljs-keyword">var</span> terminalPriority = -<span class="hljs-built_in">Number</span>.MAX_VALUE,
                        newScopeDirective = previousCompileContext.newScopeDirective,
                        controllerDirectives = previousCompileContext.controllerDirectives,
                        newIsolateScopeDirective = previousCompileContext.newIsolateScopeDirective,
                        templateDirective = previousCompileContext.templateDirective,
                        nonTlbTranscludeDirective = previousCompileContext.nonTlbTranscludeDirective,
                        hasTranscludeDirective = <span class="hljs-literal">false</span>,
                        hasTemplate = <span class="hljs-literal">false</span>,
                        hasElementTranscludeDirective = previousCompileContext.hasElementTranscludeDirective,
                        $compileNode = templateAttrs.$$element = jqLite(compileNode),
                        directive,
                        directiveName,
                        $template,
                        replaceDirective = originalReplaceDirective,
                        childTranscludeFn = transcludeFn,
                        linkFn,
                        didScanForMultipleTransclusion = <span class="hljs-literal">false</span>,
                        mightHaveMultipleTransclusionError = <span class="hljs-literal">false</span>,
                        directiveValue;
                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, ii = directives.length; i &lt; ii; i++) {
                        directive = directives[i];
                        <span class="hljs-keyword">var</span> attrStart = directive.$$start;
                        <span class="hljs-keyword">var</span> attrEnd = directive.$$end;
                        <span class="hljs-keyword">if</span> (attrStart) {
                            $compileNode = groupScan(compileNode, attrStart, attrEnd);
                        }
                        $template = <span class="hljs-literal">undefined</span>;
                        <span class="hljs-keyword">if</span> (terminalPriority &gt; directive.priority) {
                            <span class="hljs-keyword">break</span>;
                        }
                        <span class="hljs-keyword">if</span> (directiveValue = directive.scope) {
                            <span class="hljs-keyword">if</span> (!directive.templateUrl) {
                                <span class="hljs-keyword">if</span> (isObject(directiveValue)) {
                                    assertNoDuplicate(<span class="hljs-string">'new/isolated scope'</span>, newIsolateScopeDirective || newScopeDirective,
                                        directive, $compileNode);
                                    newIsolateScopeDirective = directive;
                                } <span class="hljs-keyword">else</span> {
                                    assertNoDuplicate(<span class="hljs-string">'new/isolated scope'</span>, newIsolateScopeDirective, directive,
                                        $compileNode);
                                }
                            }
                            newScopeDirective = newScopeDirective || directive;
                        }
                        directiveName = directive.name;
                        <span class="hljs-keyword">if</span> (!didScanForMultipleTransclusion &amp;&amp; ((directive.replace &amp;&amp; (directive.templateUrl || directive.template)) ||
                                (directive.transclude &amp;&amp; !directive.$$tlb))) {
                            <span class="hljs-keyword">var</span> candidateDirective;
                            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> scanningIndex = i + <span class="hljs-number">1</span>; candidateDirective = directives[scanningIndex++];) {
                                <span class="hljs-keyword">if</span> ((candidateDirective.transclude &amp;&amp; !candidateDirective.$$tlb) ||
                                    (candidateDirective.replace &amp;&amp; (candidateDirective.templateUrl || candidateDirective.template))) {
                                    mightHaveMultipleTransclusionError = <span class="hljs-literal">true</span>;
                                    <span class="hljs-keyword">break</span>;
                                }
                            }
                            didScanForMultipleTransclusion = <span class="hljs-literal">true</span>;
                        }
                        <span class="hljs-keyword">if</span> (!directive.templateUrl &amp;&amp; directive.controller) {
                            directiveValue = directive.controller;
                            controllerDirectives = controllerDirectives || createMap();
                            assertNoDuplicate(<span class="hljs-string">"'"</span> + directiveName + <span class="hljs-string">"' controller"</span>,
                                controllerDirectives[directiveName], directive, $compileNode);
                            controllerDirectives[directiveName] = directive;
                        }
                        <span class="hljs-keyword">if</span> (directiveValue = directive.transclude) {
                            hasTranscludeDirective = <span class="hljs-literal">true</span>;
                            <span class="hljs-keyword">if</span> (!directive.$$tlb) {
                                assertNoDuplicate(<span class="hljs-string">'transclusion'</span>, nonTlbTranscludeDirective, directive, $compileNode);
                                nonTlbTranscludeDirective = directive;
                            }
                            <span class="hljs-keyword">if</span> (directiveValue == <span class="hljs-string">'element'</span>) {
                                hasElementTranscludeDirective = <span class="hljs-literal">true</span>;
                                terminalPriority = directive.priority;
                                $template = $compileNode;
                                $compileNode = templateAttrs.$$element =
                                    jqLite(compile.$$createComment(directiveName, templateAttrs[directiveName]));
                                compileNode = $compileNode[<span class="hljs-number">0</span>];
                                replaceWith(jqCollection, sliceArgs($template), compileNode);
                                $template[<span class="hljs-number">0</span>].$$parentNode = $template[<span class="hljs-number">0</span>].parentNode;
                                childTranscludeFn = compilationGenerator(mightHaveMultipleTransclusionError, $template, transcludeFn, terminalPriority,
                                    replaceDirective &amp;&amp; replaceDirective.name, {
                                        <span class="hljs-attr">nonTlbTranscludeDirective</span>: nonTlbTranscludeDirective
                                    });
                            } <span class="hljs-keyword">else</span> {
                                <span class="hljs-keyword">var</span> slots = createMap();
                                $template = jqLite(jqLiteClone(compileNode)).contents();
                                <span class="hljs-keyword">if</span> (isObject(directiveValue)) {
                                    $template = [];
                                    <span class="hljs-keyword">var</span> slotMap = createMap();
                                    <span class="hljs-keyword">var</span> filledSlots = createMap();
                                    forEach(directiveValue, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">elementSelector, slotName</span>) </span>{
                                        <span class="hljs-keyword">var</span> optional = (elementSelector.charAt(<span class="hljs-number">0</span>) === <span class="hljs-string">'?'</span>);
                                        elementSelector = optional ? elementSelector.substring(<span class="hljs-number">1</span>) : elementSelector;
                                        slotMap[elementSelector] = slotName;
                                        slots[slotName] = <span class="hljs-literal">null</span>;
                                        filledSlots[slotName] = optional;
                                    });
                                    forEach($compileNode.contents(), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">node</span>) </span>{
                                        <span class="hljs-keyword">var</span> slotName = slotMap[directiveNormalize(nodeName_(node))];
                                        <span class="hljs-keyword">if</span> (slotName) {
                                            filledSlots[slotName] = <span class="hljs-literal">true</span>;
                                            slots[slotName] = slots[slotName] || [];
                                            slots[slotName].push(node);
                                        } <span class="hljs-keyword">else</span> {
                                            $template.push(node);
                                        }
                                    });
                                    forEach(filledSlots, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">filled, slotName</span>) </span>{
                                        <span class="hljs-keyword">if</span> (!filled) {
                                            <span class="hljs-keyword">throw</span> $compileMinErr(<span class="hljs-string">'reqslot'</span>, <span class="hljs-string">'Required transclusion slot `{0}` was not filled.'</span>, slotName);
                                        }
                                    });
                                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> slotName <span class="hljs-keyword">in</span> slots) {
                                        <span class="hljs-keyword">if</span> (slots[slotName]) {
                                            slots[slotName] = compilationGenerator(mightHaveMultipleTransclusionError, slots[slotName], transcludeFn);
                                        }
                                    }
                                }
                                $compileNode.empty();
                                childTranscludeFn = compilationGenerator(mightHaveMultipleTransclusionError, $template, transcludeFn, <span class="hljs-literal">undefined</span>,
                                    <span class="hljs-literal">undefined</span>, {
                                        <span class="hljs-attr">needsNewScope</span>: directive.$$isolateScope || directive.$$newScope
                                    });
                                childTranscludeFn.$$slots = slots;
                            }
                        }
                        <span class="hljs-keyword">if</span> (directive.template) {
                            hasTemplate = <span class="hljs-literal">true</span>;
                            assertNoDuplicate(<span class="hljs-string">'template'</span>, templateDirective, directive, $compileNode);
                            templateDirective = directive;
                            directiveValue = (isFunction(directive.template)) ?
                                directive.template($compileNode, templateAttrs) :
                                directive.template;
                            directiveValue = denormalizeTemplate(directiveValue);
                            <span class="hljs-keyword">if</span> (directive.replace) {
                                replaceDirective = directive;
                                <span class="hljs-keyword">if</span> (jqLiteIsTextNode(directiveValue)) {
                                    $template = [];
                                } <span class="hljs-keyword">else</span> {
                                    $template = removeComments(wrapTemplate(directive.templateNamespace, trim(directiveValue)));
                                }
                                compileNode = $template[<span class="hljs-number">0</span>];
                                <span class="hljs-keyword">if</span> ($template.length != <span class="hljs-number">1</span> || compileNode.nodeType !== NODE_TYPE_ELEMENT) {
                                    <span class="hljs-keyword">throw</span> $compileMinErr(<span class="hljs-string">'tplrt'</span>,
                                        <span class="hljs-string">"Template for directive '{0}' must have exactly one root element. {1}"</span>,
                                        directiveName, <span class="hljs-string">''</span>);
                                }
                                replaceWith(jqCollection, $compileNode, compileNode);
                                <span class="hljs-keyword">var</span> newTemplateAttrs = {
                                    <span class="hljs-attr">$attr</span>: {}
                                };
                                <span class="hljs-keyword">var</span> templateDirectives = collectDirectives(compileNode, [], newTemplateAttrs);
                                <span class="hljs-keyword">var</span> unprocessedDirectives = directives.splice(i + <span class="hljs-number">1</span>, directives.length - (i + <span class="hljs-number">1</span>));
                                <span class="hljs-keyword">if</span> (newIsolateScopeDirective || newScopeDirective) {
                                    markDirectiveScope(templateDirectives, newIsolateScopeDirective, newScopeDirective);
                                }
                                directives = directives.concat(templateDirectives).concat(unprocessedDirectives);
                                mergeTemplateAttributes(templateAttrs, newTemplateAttrs);
                                ii = directives.length;
                            } <span class="hljs-keyword">else</span> {
                                $compileNode.html(directiveValue);
                            }
                        }
                        <span class="hljs-keyword">if</span> (directive.templateUrl) {
                            hasTemplate = <span class="hljs-literal">true</span>;
                            assertNoDuplicate(<span class="hljs-string">'template'</span>, templateDirective, directive, $compileNode);
                            templateDirective = directive;
                            <span class="hljs-keyword">if</span> (directive.replace) {
                                replaceDirective = directive;
                            }
                            nodeLinkFn = compileTemplateUrl(directives.splice(i, directives.length - i), $compileNode,
                                templateAttrs, jqCollection, hasTranscludeDirective &amp;&amp; childTranscludeFn, preLinkFns, postLinkFns, {
                                    <span class="hljs-attr">controllerDirectives</span>: controllerDirectives,
                                    <span class="hljs-attr">newScopeDirective</span>: (newScopeDirective !== directive) &amp;&amp; newScopeDirective,
                                    <span class="hljs-attr">newIsolateScopeDirective</span>: newIsolateScopeDirective,
                                    <span class="hljs-attr">templateDirective</span>: templateDirective,
                                    <span class="hljs-attr">nonTlbTranscludeDirective</span>: nonTlbTranscludeDirective
                                });
                            ii = directives.length;
                        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (directive.compile) {
                            <span class="hljs-keyword">try</span> {
                                linkFn = directive.compile($compileNode, templateAttrs, childTranscludeFn);
                                <span class="hljs-keyword">var</span> context = directive.$$originalDirective || directive;
                                <span class="hljs-keyword">if</span> (isFunction(linkFn)) {
                                    addLinkFns(<span class="hljs-literal">null</span>, bind(context, linkFn), attrStart, attrEnd);
                                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (linkFn) {
                                    addLinkFns(bind(context, linkFn.pre), bind(context, linkFn.post), attrStart, attrEnd);
                                }
                            } <span class="hljs-keyword">catch</span> (e) {
                                $exceptionHandler(e, startingTag($compileNode));
                            }
                        }
                        <span class="hljs-keyword">if</span> (directive.terminal) {
                            nodeLinkFn.terminal = <span class="hljs-literal">true</span>;
                            terminalPriority = <span class="hljs-built_in">Math</span>.max(terminalPriority, directive.priority);
                        }
                    }
                    nodeLinkFn.scope = newScopeDirective &amp;&amp; newScopeDirective.scope === <span class="hljs-literal">true</span>;
                    nodeLinkFn.transcludeOnThisElement = hasTranscludeDirective;
                    nodeLinkFn.templateOnThisElement = hasTemplate;
                    nodeLinkFn.transclude = childTranscludeFn;
                    previousCompileContext.hasElementTranscludeDirective = hasElementTranscludeDirective;
                    <span class="hljs-keyword">return</span> nodeLinkFn;

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addLinkFns</span>(<span class="hljs-params">pre, post, attrStart, attrEnd</span>) </span>{
                        <span class="hljs-keyword">if</span> (pre) {
                            <span class="hljs-keyword">if</span> (attrStart) pre = groupElementsLinkFnWrapper(pre, attrStart, attrEnd);
                            pre.require = directive.require;
                            pre.directiveName = directiveName;
                            <span class="hljs-keyword">if</span> (newIsolateScopeDirective === directive || directive.$$isolateScope) {
                                pre = cloneAndAnnotateFn(pre, {
                                    <span class="hljs-attr">isolateScope</span>: <span class="hljs-literal">true</span>
                                });
                            }
                            preLinkFns.push(pre);
                        }
                        <span class="hljs-keyword">if</span> (post) {
                            <span class="hljs-keyword">if</span> (attrStart) post = groupElementsLinkFnWrapper(post, attrStart, attrEnd);
                            post.require = directive.require;
                            post.directiveName = directiveName;
                            <span class="hljs-keyword">if</span> (newIsolateScopeDirective === directive || directive.$$isolateScope) {
                                post = cloneAndAnnotateFn(post, {
                                    <span class="hljs-attr">isolateScope</span>: <span class="hljs-literal">true</span>
                                });
                            }
                            postLinkFns.push(post);
                        }
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">nodeLinkFn</span>(<span class="hljs-params">childLinkFn, scope, linkNode, $rootElement, boundTranscludeFn</span>) </span>{
                        <span class="hljs-keyword">var</span> i, ii, linkFn, isolateScope, controllerScope, elementControllers, transcludeFn, $element,
                            attrs, scopeBindingInfo;
                        <span class="hljs-keyword">if</span> (compileNode === linkNode) {
                            attrs = templateAttrs;
                            $element = templateAttrs.$$element;
                        } <span class="hljs-keyword">else</span> {
                            $element = jqLite(linkNode);
                            attrs = <span class="hljs-keyword">new</span> Attributes($element, templateAttrs);
                        }
                        controllerScope = scope;
                        <span class="hljs-keyword">if</span> (newIsolateScopeDirective) {
                            isolateScope = scope.$<span class="hljs-keyword">new</span>(<span class="hljs-literal">true</span>);
                        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (newScopeDirective) {
                            controllerScope = scope.$parent;
                        }
                        <span class="hljs-keyword">if</span> (boundTranscludeFn) {
                            transcludeFn = controllersBoundTransclude;
                            transcludeFn.$$boundTransclude = boundTranscludeFn;
                            transcludeFn.isSlotFilled = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">slotName</span>) </span>{
                                <span class="hljs-keyword">return</span> !!boundTranscludeFn.$$slots[slotName];
                            };
                        }
                        <span class="hljs-keyword">if</span> (controllerDirectives) {
                            elementControllers = setupControllers($element, attrs, transcludeFn, controllerDirectives, isolateScope, scope, newIsolateScopeDirective);
                        }
                        <span class="hljs-keyword">if</span> (newIsolateScopeDirective) {
                            compile.$$addScopeInfo($element, isolateScope, <span class="hljs-literal">true</span>, !(templateDirective &amp;&amp; (templateDirective === newIsolateScopeDirective ||
                                templateDirective === newIsolateScopeDirective.$$originalDirective)));
                            compile.$$addScopeClass($element, <span class="hljs-literal">true</span>);
                            isolateScope.$$isolateBindings =
                                newIsolateScopeDirective.$$isolateBindings;
                            scopeBindingInfo = initializeDirectiveBindings(scope, attrs, isolateScope,
                                isolateScope.$$isolateBindings,
                                newIsolateScopeDirective);
                            <span class="hljs-keyword">if</span> (scopeBindingInfo.removeWatches) {
                                isolateScope.$on(<span class="hljs-string">'$destroy'</span>, scopeBindingInfo.removeWatches);
                            }
                        }
                        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> name <span class="hljs-keyword">in</span> elementControllers) {
                            <span class="hljs-keyword">var</span> controllerDirective = controllerDirectives[name];
                            <span class="hljs-keyword">var</span> controller = elementControllers[name];
                            <span class="hljs-keyword">var</span> bindings = controllerDirective.$$bindings.bindToController;
                            <span class="hljs-keyword">if</span> (controller.identifier &amp;&amp; bindings) {
                                controller.bindingInfo =
                                    initializeDirectiveBindings(controllerScope, attrs, controller.instance, bindings, controllerDirective);
                            } <span class="hljs-keyword">else</span> {
                                controller.bindingInfo = {};
                            }
                            <span class="hljs-keyword">var</span> controllerResult = controller();
                            <span class="hljs-keyword">if</span> (controllerResult !== controller.instance) {
                                controller.instance = controllerResult;
                                $element.data(<span class="hljs-string">'$'</span> + controllerDirective.name + <span class="hljs-string">'Controller'</span>, controllerResult);
                                controller.bindingInfo.removeWatches &amp;&amp; controller.bindingInfo.removeWatches();
                                controller.bindingInfo =
                                    initializeDirectiveBindings(controllerScope, attrs, controller.instance, bindings, controllerDirective);
                            }
                        }
                        forEach(controllerDirectives, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">controllerDirective, name</span>) </span>{
                            <span class="hljs-keyword">var</span> <span class="hljs-built_in">require</span> = controllerDirective.require;
                            <span class="hljs-keyword">if</span> (controllerDirective.bindToController &amp;&amp; !isArray(<span class="hljs-built_in">require</span>) &amp;&amp; isObject(<span class="hljs-built_in">require</span>)) {
                                extend(elementControllers[name].instance, getControllers(name, <span class="hljs-built_in">require</span>, $element, elementControllers));
                            }
                        });
                        forEach(elementControllers, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">controller</span>) </span>{
                            <span class="hljs-keyword">var</span> controllerInstance = controller.instance;
                            <span class="hljs-keyword">if</span> (isFunction(controllerInstance.$onChanges)) {
                                <span class="hljs-keyword">try</span> {
                                    controllerInstance.$onChanges(controller.bindingInfo.initialChanges);
                                } <span class="hljs-keyword">catch</span> (e) {
                                    $exceptionHandler(e);
                                }
                            }
                            <span class="hljs-keyword">if</span> (isFunction(controllerInstance.$onInit)) {
                                <span class="hljs-keyword">try</span> {
                                    controllerInstance.$onInit();
                                } <span class="hljs-keyword">catch</span> (e) {
                                    $exceptionHandler(e);
                                }
                            }
                            <span class="hljs-keyword">if</span> (isFunction(controllerInstance.$doCheck)) {
                                controllerScope.$watch(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                                    controllerInstance.$doCheck();
                                });
                                controllerInstance.$doCheck();
                            }
                            <span class="hljs-keyword">if</span> (isFunction(controllerInstance.$onDestroy)) {
                                controllerScope.$on(<span class="hljs-string">'$destroy'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">callOnDestroyHook</span>(<span class="hljs-params"></span>) </span>{
                                    controllerInstance.$onDestroy();
                                });
                            }
                        });
                        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, ii = preLinkFns.length; i &lt; ii; i++) {
                            linkFn = preLinkFns[i];
                            invokeLinkFn(linkFn,
                                linkFn.isolateScope ? isolateScope : scope,
                                $element,
                                attrs,
                                linkFn.require &amp;&amp; getControllers(linkFn.directiveName, linkFn.require, $element, elementControllers),
                                transcludeFn
                            );
                        }
                        <span class="hljs-keyword">var</span> scopeToChild = scope;
                        <span class="hljs-keyword">if</span> (newIsolateScopeDirective &amp;&amp; (newIsolateScopeDirective.template || newIsolateScopeDirective.templateUrl === <span class="hljs-literal">null</span>)) {
                            scopeToChild = isolateScope;
                        }
                        childLinkFn &amp;&amp; childLinkFn(scopeToChild, linkNode.childNodes, <span class="hljs-literal">undefined</span>, boundTranscludeFn);
                        <span class="hljs-keyword">for</span> (i = postLinkFns.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
                            linkFn = postLinkFns[i];
                            invokeLinkFn(linkFn,
                                linkFn.isolateScope ? isolateScope : scope,
                                $element,
                                attrs,
                                linkFn.require &amp;&amp; getControllers(linkFn.directiveName, linkFn.require, $element, elementControllers),
                                transcludeFn
                            );
                        }
                        forEach(elementControllers, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">controller</span>) </span>{
                            <span class="hljs-keyword">var</span> controllerInstance = controller.instance;
                            <span class="hljs-keyword">if</span> (isFunction(controllerInstance.$postLink)) {
                                controllerInstance.$postLink();
                            }
                        });

                        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">controllersBoundTransclude</span>(<span class="hljs-params">scope, cloneAttachFn, futureParentElement, slotName</span>) </span>{
                            <span class="hljs-keyword">var</span> transcludeControllers;
                            <span class="hljs-keyword">if</span> (!isScope(scope)) {
                                slotName = futureParentElement;
                                futureParentElement = cloneAttachFn;
                                cloneAttachFn = scope;
                                scope = <span class="hljs-literal">undefined</span>;
                            }
                            <span class="hljs-keyword">if</span> (hasElementTranscludeDirective) {
                                transcludeControllers = elementControllers;
                            }
                            <span class="hljs-keyword">if</span> (!futureParentElement) {
                                futureParentElement = hasElementTranscludeDirective ? $element.parent() : $element;
                            }
                            <span class="hljs-keyword">if</span> (slotName) {
                                <span class="hljs-keyword">var</span> slotTranscludeFn = boundTranscludeFn.$$slots[slotName];
                                <span class="hljs-keyword">if</span> (slotTranscludeFn) {
                                    <span class="hljs-keyword">return</span> slotTranscludeFn(scope, cloneAttachFn, transcludeControllers, futureParentElement, scopeToChild);
                                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isUndefined(slotTranscludeFn)) {
                                    <span class="hljs-keyword">throw</span> $compileMinErr(<span class="hljs-string">'noslot'</span>,
                                        <span class="hljs-string">'No parent directive that requires a transclusion with slot name "{0}". '</span> +
                                        <span class="hljs-string">'Element: {1}'</span>,
                                        slotName, startingTag($element));
                                }
                            } <span class="hljs-keyword">else</span> {
                                <span class="hljs-keyword">return</span> boundTranscludeFn(scope, cloneAttachFn, transcludeControllers, futureParentElement, scopeToChild);
                            }
                        }
                    }
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getControllers</span>(<span class="hljs-params">directiveName, require, $element, elementControllers</span>) </span>{
                    <span class="hljs-keyword">var</span> value;
                    <span class="hljs-keyword">if</span> (isString(<span class="hljs-built_in">require</span>)) {
                        <span class="hljs-keyword">var</span> match = <span class="hljs-built_in">require</span>.match(REQUIRE_PREFIX_REGEXP);
                        <span class="hljs-keyword">var</span> name = <span class="hljs-built_in">require</span>.substring(match[<span class="hljs-number">0</span>].length);
                        <span class="hljs-keyword">var</span> inheritType = match[<span class="hljs-number">1</span>] || match[<span class="hljs-number">3</span>];
                        <span class="hljs-keyword">var</span> optional = match[<span class="hljs-number">2</span>] === <span class="hljs-string">'?'</span>;
                        <span class="hljs-keyword">if</span> (inheritType === <span class="hljs-string">'^^'</span>) {
                            $element = $element.parent();
                        } <span class="hljs-keyword">else</span> {
                            value = elementControllers &amp;&amp; elementControllers[name];
                            value = value &amp;&amp; value.instance;
                        }
                        <span class="hljs-keyword">if</span> (!value) {
                            <span class="hljs-keyword">var</span> dataName = <span class="hljs-string">'$'</span> + name + <span class="hljs-string">'Controller'</span>;
                            value = inheritType ? $element.inheritedData(dataName) : $element.data(dataName);
                        }
                        <span class="hljs-keyword">if</span> (!value &amp;&amp; !optional) {
                            <span class="hljs-keyword">throw</span> $compileMinErr(<span class="hljs-string">'ctreq'</span>,
                                <span class="hljs-string">"Controller '{0}', required by directive '{1}', can't be found!"</span>,
                                name, directiveName);
                        }
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isArray(<span class="hljs-built_in">require</span>)) {
                        value = [];
                        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, ii = <span class="hljs-built_in">require</span>.length; i &lt; ii; i++) {
                            value[i] = getControllers(directiveName, <span class="hljs-built_in">require</span>[i], $element, elementControllers);
                        }
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isObject(<span class="hljs-built_in">require</span>)) {
                        value = {};
                        forEach(<span class="hljs-built_in">require</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">controller, property</span>) </span>{
                            value[property] = getControllers(directiveName, controller, $element, elementControllers);
                        });
                    }
                    <span class="hljs-keyword">return</span> value || <span class="hljs-literal">null</span>;
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setupControllers</span>(<span class="hljs-params">$element, attrs, transcludeFn, controllerDirectives, isolateScope, scope, newIsolateScopeDirective</span>) </span>{
                    <span class="hljs-keyword">var</span> elementControllers = createMap();
                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> controllerKey <span class="hljs-keyword">in</span> controllerDirectives) {
                        <span class="hljs-keyword">var</span> directive = controllerDirectives[controllerKey];
                        <span class="hljs-keyword">var</span> locals = {
                            <span class="hljs-attr">$scope</span>: directive === newIsolateScopeDirective || directive.$$isolateScope ? isolateScope : scope,
                            <span class="hljs-attr">$element</span>: $element,
                            <span class="hljs-attr">$attrs</span>: attrs,
                            <span class="hljs-attr">$transclude</span>: transcludeFn
                        };
                        <span class="hljs-keyword">var</span> controller = directive.controller;
                        <span class="hljs-keyword">if</span> (controller == <span class="hljs-string">'@'</span>) {
                            controller = attrs[directive.name];
                        }
                        <span class="hljs-keyword">var</span> controllerInstance = $controller(controller, locals, <span class="hljs-literal">true</span>, directive.controllerAs);
                        elementControllers[directive.name] = controllerInstance;
                        $element.data(<span class="hljs-string">'$'</span> + directive.name + <span class="hljs-string">'Controller'</span>, controllerInstance.instance);
                    }
                    <span class="hljs-keyword">return</span> elementControllers;
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">markDirectiveScope</span>(<span class="hljs-params">directives, isolateScope, newScope</span>) </span>{
                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>, jj = directives.length; j &lt; jj; j++) {
                        directives[j] = inherit(directives[j], {
                            <span class="hljs-attr">$$isolateScope</span>: isolateScope,
                            <span class="hljs-attr">$$newScope</span>: newScope
                        });
                    }
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addDirective</span>(<span class="hljs-params">tDirectives, name, location, maxPriority, ignoreDirective, startAttrName,
                    endAttrName</span>) </span>{
                    <span class="hljs-keyword">if</span> (name === ignoreDirective) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
                    <span class="hljs-keyword">var</span> match = <span class="hljs-literal">null</span>;
                    <span class="hljs-keyword">if</span> (hasDirectives.hasOwnProperty(name)) {
                        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> directive, directives = $injector.get(name + Suffix),
                                i = <span class="hljs-number">0</span>, ii = directives.length; i &lt; ii; i++) {
                            <span class="hljs-keyword">try</span> {
                                directive = directives[i];
                                <span class="hljs-keyword">if</span> ((isUndefined(maxPriority) || maxPriority &gt; directive.priority) &amp;&amp;
                                    directive.restrict.indexOf(location) != <span class="hljs-number">-1</span>) {
                                    <span class="hljs-keyword">if</span> (startAttrName) {
                                        directive = inherit(directive, {
                                            <span class="hljs-attr">$$start</span>: startAttrName,
                                            <span class="hljs-attr">$$end</span>: endAttrName
                                        });
                                    }
                                    <span class="hljs-keyword">if</span> (!directive.$$bindings) {
                                        <span class="hljs-keyword">var</span> bindings = directive.$$bindings =
                                            parseDirectiveBindings(directive, directive.name);
                                        <span class="hljs-keyword">if</span> (isObject(bindings.isolateScope)) {
                                            directive.$$isolateBindings = bindings.isolateScope;
                                        }
                                    }
                                    tDirectives.push(directive);
                                    match = directive;
                                }
                            } <span class="hljs-keyword">catch</span> (e) {
                                $exceptionHandler(e);
                            }
                        }
                    }
                    <span class="hljs-keyword">return</span> match;
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">directiveIsMultiElement</span>(<span class="hljs-params">name</span>) </span>{
                    <span class="hljs-keyword">if</span> (hasDirectives.hasOwnProperty(name)) {
                        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> directive, directives = $injector.get(name + Suffix),
                                i = <span class="hljs-number">0</span>, ii = directives.length; i &lt; ii; i++) {
                            directive = directives[i];
                            <span class="hljs-keyword">if</span> (directive.multiElement) {
                                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                            }
                        }
                    }
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mergeTemplateAttributes</span>(<span class="hljs-params">dst, src</span>) </span>{
                    <span class="hljs-keyword">var</span> srcAttr = src.$attr,
                        dstAttr = dst.$attr,
                        $element = dst.$$element;
                    forEach(dst, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, key</span>) </span>{
                        <span class="hljs-keyword">if</span> (key.charAt(<span class="hljs-number">0</span>) != <span class="hljs-string">'$'</span>) {
                            <span class="hljs-keyword">if</span> (src[key] &amp;&amp; src[key] !== value) {
                                value += (key === <span class="hljs-string">'style'</span> ? <span class="hljs-string">';'</span> : <span class="hljs-string">' '</span>) + src[key];
                            }
                            dst.$set(key, value, <span class="hljs-literal">true</span>, srcAttr[key]);
                        }
                    });
                    forEach(src, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, key</span>) </span>{
                        <span class="hljs-keyword">if</span> (!dst.hasOwnProperty(key) &amp;&amp; key.charAt(<span class="hljs-number">0</span>) !== <span class="hljs-string">'$'</span>) {
                            dst[key] = value;
                            <span class="hljs-keyword">if</span> (key !== <span class="hljs-string">'class'</span> &amp;&amp; key !== <span class="hljs-string">'style'</span>) {
                                dstAttr[key] = srcAttr[key];
                            }
                        }
                    });
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileTemplateUrl</span>(<span class="hljs-params">directives, $compileNode, tAttrs,
                    $rootElement, childTranscludeFn, preLinkFns, postLinkFns, previousCompileContext</span>) </span>{
                    <span class="hljs-keyword">var</span> linkQueue = [],
                        afterTemplateNodeLinkFn,
                        afterTemplateChildLinkFn,
                        beforeTemplateCompileNode = $compileNode[<span class="hljs-number">0</span>],
                        origAsyncDirective = directives.shift(),
                        derivedSyncDirective = inherit(origAsyncDirective, {
                            <span class="hljs-attr">templateUrl</span>: <span class="hljs-literal">null</span>,
                            <span class="hljs-attr">transclude</span>: <span class="hljs-literal">null</span>,
                            <span class="hljs-attr">replace</span>: <span class="hljs-literal">null</span>,
                            <span class="hljs-attr">$$originalDirective</span>: origAsyncDirective
                        }),
                        templateUrl = (isFunction(origAsyncDirective.templateUrl)) ?
                        origAsyncDirective.templateUrl($compileNode, tAttrs) :
                        origAsyncDirective.templateUrl,
                        templateNamespace = origAsyncDirective.templateNamespace;
                    $compileNode.empty();
                    $templateRequest(templateUrl)
                        .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">content</span>) </span>{
                            <span class="hljs-keyword">var</span> compileNode, tempTemplateAttrs, $template, childBoundTranscludeFn;
                            content = denormalizeTemplate(content);
                            <span class="hljs-keyword">if</span> (origAsyncDirective.replace) {
                                <span class="hljs-keyword">if</span> (jqLiteIsTextNode(content)) {
                                    $template = [];
                                } <span class="hljs-keyword">else</span> {
                                    $template = removeComments(wrapTemplate(templateNamespace, trim(content)));
                                }
                                compileNode = $template[<span class="hljs-number">0</span>];
                                <span class="hljs-keyword">if</span> ($template.length != <span class="hljs-number">1</span> || compileNode.nodeType !== NODE_TYPE_ELEMENT) {
                                    <span class="hljs-keyword">throw</span> $compileMinErr(<span class="hljs-string">'tplrt'</span>,
                                        <span class="hljs-string">"Template for directive '{0}' must have exactly one root element. {1}"</span>,
                                        origAsyncDirective.name, templateUrl);
                                }
                                tempTemplateAttrs = {
                                    <span class="hljs-attr">$attr</span>: {}
                                };
                                replaceWith($rootElement, $compileNode, compileNode);
                                <span class="hljs-keyword">var</span> templateDirectives = collectDirectives(compileNode, [], tempTemplateAttrs);
                                <span class="hljs-keyword">if</span> (isObject(origAsyncDirective.scope)) {
                                    markDirectiveScope(templateDirectives, <span class="hljs-literal">true</span>);
                                }
                                directives = templateDirectives.concat(directives);
                                mergeTemplateAttributes(tAttrs, tempTemplateAttrs);
                            } <span class="hljs-keyword">else</span> {
                                compileNode = beforeTemplateCompileNode;
                                $compileNode.html(content);
                            }
                            directives.unshift(derivedSyncDirective);
                            afterTemplateNodeLinkFn = applyDirectivesToNode(directives, compileNode, tAttrs,
                                childTranscludeFn, $compileNode, origAsyncDirective, preLinkFns, postLinkFns,
                                previousCompileContext);
                            forEach($rootElement, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">node, i</span>) </span>{
                                <span class="hljs-keyword">if</span> (node == compileNode) {
                                    $rootElement[i] = $compileNode[<span class="hljs-number">0</span>];
                                }
                            });
                            afterTemplateChildLinkFn = compileNodes($compileNode[<span class="hljs-number">0</span>].childNodes, childTranscludeFn);
                            <span class="hljs-keyword">while</span> (linkQueue.length) {
                                <span class="hljs-keyword">var</span> scope = linkQueue.shift(),
                                    beforeTemplateLinkNode = linkQueue.shift(),
                                    linkRootElement = linkQueue.shift(),
                                    boundTranscludeFn = linkQueue.shift(),
                                    linkNode = $compileNode[<span class="hljs-number">0</span>];
                                <span class="hljs-keyword">if</span> (scope.$$destroyed) <span class="hljs-keyword">continue</span>;
                                <span class="hljs-keyword">if</span> (beforeTemplateLinkNode !== beforeTemplateCompileNode) {
                                    <span class="hljs-keyword">var</span> oldClasses = beforeTemplateLinkNode.className;
                                    <span class="hljs-keyword">if</span> (!(previousCompileContext.hasElementTranscludeDirective &amp;&amp;
                                            origAsyncDirective.replace)) {
                                        linkNode = jqLiteClone(compileNode);
                                    }
                                    replaceWith(linkRootElement, jqLite(beforeTemplateLinkNode), linkNode);
                                    safeAddClass(jqLite(linkNode), oldClasses);
                                }
                                <span class="hljs-keyword">if</span> (afterTemplateNodeLinkFn.transcludeOnThisElement) {
                                    childBoundTranscludeFn = createBoundTranscludeFn(scope, afterTemplateNodeLinkFn.transclude, boundTranscludeFn);
                                } <span class="hljs-keyword">else</span> {
                                    childBoundTranscludeFn = boundTranscludeFn;
                                }
                                afterTemplateNodeLinkFn(afterTemplateChildLinkFn, scope, linkNode, $rootElement,
                                    childBoundTranscludeFn);
                            }
                            linkQueue = <span class="hljs-literal">null</span>;
                        });
                    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">delayedNodeLinkFn</span>(<span class="hljs-params">ignoreChildLinkFn, scope, node, rootElement, boundTranscludeFn</span>) </span>{
                        <span class="hljs-keyword">var</span> childBoundTranscludeFn = boundTranscludeFn;
                        <span class="hljs-keyword">if</span> (scope.$$destroyed) <span class="hljs-keyword">return</span>;
                        <span class="hljs-keyword">if</span> (linkQueue) {
                            linkQueue.push(scope,
                                node,
                                rootElement,
                                childBoundTranscludeFn);
                        } <span class="hljs-keyword">else</span> {
                            <span class="hljs-keyword">if</span> (afterTemplateNodeLinkFn.transcludeOnThisElement) {
                                childBoundTranscludeFn = createBoundTranscludeFn(scope, afterTemplateNodeLinkFn.transclude, boundTranscludeFn);
                            }
                            afterTemplateNodeLinkFn(afterTemplateChildLinkFn, scope, node, rootElement, childBoundTranscludeFn);
                        }
                    };
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">byPriority</span>(<span class="hljs-params">a, b</span>) </span>{
                    <span class="hljs-keyword">var</span> diff = b.priority - a.priority;
                    <span class="hljs-keyword">if</span> (diff !== <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> diff;
                    <span class="hljs-keyword">if</span> (a.name !== b.name) <span class="hljs-keyword">return</span> (a.name &lt; b.name) ? <span class="hljs-number">-1</span> : <span class="hljs-number">1</span>;
                    <span class="hljs-keyword">return</span> a.index - b.index;
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">assertNoDuplicate</span>(<span class="hljs-params">what, previousDirective, directive, element</span>) </span>{
                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">wrapModuleNameIfDefined</span>(<span class="hljs-params">moduleName</span>) </span>{
                        <span class="hljs-keyword">return</span> moduleName ?
                            (<span class="hljs-string">' (module: '</span> + moduleName + <span class="hljs-string">')'</span>) :
                            <span class="hljs-string">''</span>;
                    }
                    <span class="hljs-keyword">if</span> (previousDirective) {
                        <span class="hljs-keyword">throw</span> $compileMinErr(<span class="hljs-string">'multidir'</span>, <span class="hljs-string">'Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}'</span>,
                            previousDirective.name, wrapModuleNameIfDefined(previousDirective.$$moduleName),
                            directive.name, wrapModuleNameIfDefined(directive.$$moduleName), what, startingTag(element));
                    }
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addTextInterpolateDirective</span>(<span class="hljs-params">directives, text</span>) </span>{
                    <span class="hljs-keyword">var</span> interpolateFn = $interpolate(text, <span class="hljs-literal">true</span>);
                    <span class="hljs-keyword">if</span> (interpolateFn) {
                        directives.push({
                            <span class="hljs-attr">priority</span>: <span class="hljs-number">0</span>,
                            <span class="hljs-attr">compile</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">textInterpolateCompileFn</span>(<span class="hljs-params">templateNode</span>) </span>{
                                <span class="hljs-keyword">var</span> templateNodeParent = templateNode.parent(),
                                    hasCompileParent = !!templateNodeParent.length;
                                <span class="hljs-keyword">if</span> (hasCompileParent) compile.$$addBindingClass(templateNodeParent);
                                <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">textInterpolateLinkFn</span>(<span class="hljs-params">scope, node</span>) </span>{
                                    <span class="hljs-keyword">var</span> parent = node.parent();
                                    <span class="hljs-keyword">if</span> (!hasCompileParent) compile.$$addBindingClass(parent);
                                    compile.$$addBindingInfo(parent, interpolateFn.expressions);
                                    scope.$watch(interpolateFn, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">interpolateFnWatchAction</span>(<span class="hljs-params">value</span>) </span>{
                                        node[<span class="hljs-number">0</span>].nodeValue = value;
                                    });
                                };
                            }
                        });
                    }
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">wrapTemplate</span>(<span class="hljs-params">type, template</span>) </span>{
                    type = lowercase(type || <span class="hljs-string">'html'</span>);
                    <span class="hljs-keyword">switch</span> (type) {
                        <span class="hljs-keyword">case</span> <span class="hljs-string">'svg'</span>:
                        <span class="hljs-keyword">case</span> <span class="hljs-string">'math'</span>:
                            <span class="hljs-keyword">var</span> wrapper = <span class="hljs-built_in">window</span>.document.createElement(<span class="hljs-string">'div'</span>);
                            wrapper.innerHTML = <span class="hljs-string">'&lt;'</span> + type + <span class="hljs-string">'&gt;'</span> + template + <span class="hljs-string">'&lt;/'</span> + type + <span class="hljs-string">'&gt;'</span>;
                            <span class="hljs-keyword">return</span> wrapper.childNodes[<span class="hljs-number">0</span>].childNodes;
                        <span class="hljs-keyword">default</span>:
                            <span class="hljs-keyword">return</span> template;
                    }
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getTrustedContext</span>(<span class="hljs-params">node, attrNormalizedName</span>) </span>{
                    <span class="hljs-keyword">if</span> (attrNormalizedName == <span class="hljs-string">"srcdoc"</span>) {
                        <span class="hljs-keyword">return</span> $sce.HTML;
                    }
                    <span class="hljs-keyword">var</span> tag = nodeName_(node);
                    <span class="hljs-keyword">if</span> (attrNormalizedName == <span class="hljs-string">"xlinkHref"</span> ||
                        (tag == <span class="hljs-string">"form"</span> &amp;&amp; attrNormalizedName == <span class="hljs-string">"action"</span>) ||
                        (tag != <span class="hljs-string">"img"</span> &amp;&amp; (attrNormalizedName == <span class="hljs-string">"src"</span> ||
                            attrNormalizedName == <span class="hljs-string">"ngSrc"</span>))) {
                        <span class="hljs-keyword">return</span> $sce.RESOURCE_URL;
                    }
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addAttrInterpolateDirective</span>(<span class="hljs-params">node, directives, value, name, allOrNothing</span>) </span>{
                    <span class="hljs-keyword">var</span> trustedContext = getTrustedContext(node, name);
                    allOrNothing = ALL_OR_NOTHING_ATTRS[name] || allOrNothing;
                    <span class="hljs-keyword">var</span> interpolateFn = $interpolate(value, <span class="hljs-literal">true</span>, trustedContext, allOrNothing);
                    <span class="hljs-keyword">if</span> (!interpolateFn) <span class="hljs-keyword">return</span>;
                    <span class="hljs-keyword">if</span> (name === <span class="hljs-string">"multiple"</span> &amp;&amp; nodeName_(node) === <span class="hljs-string">"select"</span>) {
                        <span class="hljs-keyword">throw</span> $compileMinErr(<span class="hljs-string">"selmulti"</span>,
                            <span class="hljs-string">"Binding to the 'multiple' attribute is not supported. Element: {0}"</span>,
                            startingTag(node));
                    }
                    directives.push({
                        <span class="hljs-attr">priority</span>: <span class="hljs-number">100</span>,
                        <span class="hljs-attr">compile</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            <span class="hljs-keyword">return</span> {
                                <span class="hljs-attr">pre</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">attrInterpolatePreLinkFn</span>(<span class="hljs-params">scope, element, attr</span>) </span>{
                                    <span class="hljs-keyword">var</span> $$observers = (attr.$$observers || (attr.$$observers = createMap()));
                                    <span class="hljs-keyword">if</span> (EVENT_HANDLER_ATTR_REGEXP.test(name)) {
                                        <span class="hljs-keyword">throw</span> $compileMinErr(<span class="hljs-string">'nodomevents'</span>,
                                            <span class="hljs-string">"Interpolations for HTML DOM event attributes are disallowed.  Please use the "</span> +
                                            <span class="hljs-string">"ng- versions (such as ng-click instead of onclick) instead."</span>);
                                    }
                                    <span class="hljs-keyword">var</span> newValue = attr[name];
                                    <span class="hljs-keyword">if</span> (newValue !== value) {
                                        interpolateFn = newValue &amp;&amp; $interpolate(newValue, <span class="hljs-literal">true</span>, trustedContext, allOrNothing);
                                        value = newValue;
                                    }
                                    <span class="hljs-keyword">if</span> (!interpolateFn) <span class="hljs-keyword">return</span>;
                                    attr[name] = interpolateFn(scope);
                                    ($$observers[name] || ($$observers[name] = [])).$$inter = <span class="hljs-literal">true</span>;
                                    (attr.$$observers &amp;&amp; attr.$$observers[name].$$scope || scope).
                                    $watch(interpolateFn, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">interpolateFnWatchAction</span>(<span class="hljs-params">newValue, oldValue</span>) </span>{
                                        <span class="hljs-keyword">if</span> (name === <span class="hljs-string">'class'</span> &amp;&amp; newValue != oldValue) {
                                            attr.$updateClass(newValue, oldValue);
                                        } <span class="hljs-keyword">else</span> {
                                            attr.$set(name, newValue);
                                        }
                                    });
                                }
                            };
                        }
                    });
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">replaceWith</span>(<span class="hljs-params">$rootElement, elementsToRemove, newNode</span>) </span>{
                    <span class="hljs-keyword">var</span> firstElementToRemove = elementsToRemove[<span class="hljs-number">0</span>],
                        removeCount = elementsToRemove.length,
                        parent = firstElementToRemove.parentNode,
                        i, ii;
                    <span class="hljs-keyword">if</span> ($rootElement) {
                        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, ii = $rootElement.length; i &lt; ii; i++) {
                            <span class="hljs-keyword">if</span> ($rootElement[i] == firstElementToRemove) {
                                $rootElement[i++] = newNode;
                                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = i, j2 = j + removeCount - <span class="hljs-number">1</span>,
                                        jj = $rootElement.length; j &lt; jj; j++, j2++) {
                                    <span class="hljs-keyword">if</span> (j2 &lt; jj) {
                                        $rootElement[j] = $rootElement[j2];
                                    } <span class="hljs-keyword">else</span> {
                                        <span class="hljs-keyword">delete</span> $rootElement[j];
                                    }
                                }
                                $rootElement.length -= removeCount - <span class="hljs-number">1</span>;
                                <span class="hljs-keyword">if</span> ($rootElement.context === firstElementToRemove) {
                                    $rootElement.context = newNode;
                                }
                                <span class="hljs-keyword">break</span>;
                            }
                        }
                    }
                    <span class="hljs-keyword">if</span> (parent) {
                        parent.replaceChild(newNode, firstElementToRemove);
                    }
                    <span class="hljs-keyword">var</span> fragment = <span class="hljs-built_in">window</span>.document.createDocumentFragment();
                    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; removeCount; i++) {
                        fragment.appendChild(elementsToRemove[i]);
                    }
                    <span class="hljs-keyword">if</span> (jqLite.hasData(firstElementToRemove)) {
                        jqLite.data(newNode, jqLite.data(firstElementToRemove));
                        jqLite(firstElementToRemove).off(<span class="hljs-string">'$destroy'</span>);
                    }
                    jqLite.cleanData(fragment.querySelectorAll(<span class="hljs-string">'*'</span>));
                    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">1</span>; i &lt; removeCount; i++) {
                        <span class="hljs-keyword">delete</span> elementsToRemove[i];
                    }
                    elementsToRemove[<span class="hljs-number">0</span>] = newNode;
                    elementsToRemove.length = <span class="hljs-number">1</span>;
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cloneAndAnnotateFn</span>(<span class="hljs-params">fn, annotation</span>) </span>{
                    <span class="hljs-keyword">return</span> extend(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">return</span> fn.apply(<span class="hljs-literal">null</span>, <span class="hljs-built_in">arguments</span>);
                    }, fn, annotation);
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">invokeLinkFn</span>(<span class="hljs-params">linkFn, scope, $element, attrs, controllers, transcludeFn</span>) </span>{
                    <span class="hljs-keyword">try</span> {
                        linkFn(scope, $element, attrs, controllers, transcludeFn);
                    } <span class="hljs-keyword">catch</span> (e) {
                        $exceptionHandler(e, startingTag($element));
                    }
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">initializeDirectiveBindings</span>(<span class="hljs-params">scope, attrs, destination, bindings, directive</span>) </span>{
                    <span class="hljs-keyword">var</span> removeWatchCollection = [];
                    <span class="hljs-keyword">var</span> initialChanges = {};
                    <span class="hljs-keyword">var</span> changes;
                    forEach(bindings, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">initializeBinding</span>(<span class="hljs-params">definition, scopeName</span>) </span>{
                        <span class="hljs-keyword">var</span> attrName = definition.attrName,
                            optional = definition.optional,
                            mode = definition.mode,
                            lastValue,
                            parentGet, parentSet, compare, removeWatch;
                        <span class="hljs-keyword">switch</span> (mode) {
                            <span class="hljs-keyword">case</span> <span class="hljs-string">'@'</span>:
                                <span class="hljs-keyword">if</span> (!optional &amp;&amp; !hasOwnProperty.call(attrs, attrName)) {
                                    destination[scopeName] = attrs[attrName] = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
                                }
                                attrs.$observe(attrName, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                                    <span class="hljs-keyword">if</span> (isString(value) || isBoolean(value)) {
                                        <span class="hljs-keyword">var</span> oldValue = destination[scopeName];
                                        recordChanges(scopeName, value, oldValue);
                                        destination[scopeName] = value;
                                    }
                                });
                                attrs.$$observers[attrName].$$scope = scope;
                                lastValue = attrs[attrName];
                                <span class="hljs-keyword">if</span> (isString(lastValue)) {
                                    destination[scopeName] = $interpolate(lastValue)(scope);
                                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isBoolean(lastValue)) {
                                    destination[scopeName] = lastValue;
                                }
                                initialChanges[scopeName] = <span class="hljs-keyword">new</span> SimpleChange(_UNINITIALIZED_VALUE, destination[scopeName]);
                                <span class="hljs-keyword">break</span>;
                            <span class="hljs-keyword">case</span> <span class="hljs-string">'='</span>:
                                <span class="hljs-keyword">if</span> (!hasOwnProperty.call(attrs, attrName)) {
                                    <span class="hljs-keyword">if</span> (optional) <span class="hljs-keyword">break</span>;
                                    attrs[attrName] = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
                                }
                                <span class="hljs-keyword">if</span> (optional &amp;&amp; !attrs[attrName]) <span class="hljs-keyword">break</span>;
                                parentGet = $parse(attrs[attrName]);
                                <span class="hljs-keyword">if</span> (parentGet.literal) {
                                    compare = equals;
                                } <span class="hljs-keyword">else</span> {
                                    compare = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">simpleCompare</span>(<span class="hljs-params">a, b</span>) </span>{
                                        <span class="hljs-keyword">return</span> a === b || (a !== a &amp;&amp; b !== b);
                                    };
                                }
                                parentSet = parentGet.assign || <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                                    lastValue = destination[scopeName] = parentGet(scope);
                                    <span class="hljs-keyword">throw</span> $compileMinErr(<span class="hljs-string">'nonassign'</span>,
                                        <span class="hljs-string">"Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!"</span>,
                                        attrs[attrName], attrName, directive.name);
                                };
                                lastValue = destination[scopeName] = parentGet(scope);
                                <span class="hljs-keyword">var</span> parentValueWatch = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parentValueWatch</span>(<span class="hljs-params">parentValue</span>) </span>{
                                    <span class="hljs-keyword">if</span> (!compare(parentValue, destination[scopeName])) {
                                        <span class="hljs-keyword">if</span> (!compare(parentValue, lastValue)) {
                                            destination[scopeName] = parentValue;
                                        } <span class="hljs-keyword">else</span> {
                                            parentSet(scope, parentValue = destination[scopeName]);
                                        }
                                    }
                                    <span class="hljs-keyword">return</span> lastValue = parentValue;
                                };
                                parentValueWatch.$stateful = <span class="hljs-literal">true</span>;
                                <span class="hljs-keyword">if</span> (definition.collection) {
                                    removeWatch = scope.$watchCollection(attrs[attrName], parentValueWatch);
                                } <span class="hljs-keyword">else</span> {
                                    removeWatch = scope.$watch($parse(attrs[attrName], parentValueWatch), <span class="hljs-literal">null</span>, parentGet.literal);
                                }
                                removeWatchCollection.push(removeWatch);
                                <span class="hljs-keyword">break</span>;
                            <span class="hljs-keyword">case</span> <span class="hljs-string">'&lt;'</span>:
                                <span class="hljs-keyword">if</span> (!hasOwnProperty.call(attrs, attrName)) {
                                    <span class="hljs-keyword">if</span> (optional) <span class="hljs-keyword">break</span>;
                                    attrs[attrName] = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
                                }
                                <span class="hljs-keyword">if</span> (optional &amp;&amp; !attrs[attrName]) <span class="hljs-keyword">break</span>;
                                parentGet = $parse(attrs[attrName]);
                                <span class="hljs-keyword">var</span> initialValue = destination[scopeName] = parentGet(scope);
                                initialChanges[scopeName] = <span class="hljs-keyword">new</span> SimpleChange(_UNINITIALIZED_VALUE, destination[scopeName]);
                                removeWatch = scope.$watch(parentGet, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parentValueWatchAction</span>(<span class="hljs-params">newValue, oldValue</span>) </span>{
                                    <span class="hljs-keyword">if</span> (oldValue === newValue) {
                                        <span class="hljs-keyword">if</span> (oldValue === initialValue) <span class="hljs-keyword">return</span>;
                                        oldValue = initialValue;
                                    }
                                    recordChanges(scopeName, newValue, oldValue);
                                    destination[scopeName] = newValue;
                                }, parentGet.literal);
                                removeWatchCollection.push(removeWatch);
                                <span class="hljs-keyword">break</span>;
                            <span class="hljs-keyword">case</span> <span class="hljs-string">'&amp;'</span>:
                                parentGet = attrs.hasOwnProperty(attrName) ? $parse(attrs[attrName]) : noop;
                                <span class="hljs-keyword">if</span> (parentGet === noop &amp;&amp; optional) <span class="hljs-keyword">break</span>;
                                destination[scopeName] = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">locals</span>) </span>{
                                    <span class="hljs-keyword">return</span> parentGet(scope, locals);
                                };
                                <span class="hljs-keyword">break</span>;
                        }
                    });

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">recordChanges</span>(<span class="hljs-params">key, currentValue, previousValue</span>) </span>{
                        <span class="hljs-keyword">if</span> (isFunction(destination.$onChanges) &amp;&amp; currentValue !== previousValue) {
                            <span class="hljs-keyword">if</span> (!onChangesQueue) {
                                scope.$$postDigest(flushOnChangesQueue);
                                onChangesQueue = [];
                            }
                            <span class="hljs-keyword">if</span> (!changes) {
                                changes = {};
                                onChangesQueue.push(triggerOnChangesHook);
                            }
                            <span class="hljs-keyword">if</span> (changes[key]) {
                                previousValue = changes[key].previousValue;
                            }
                            changes[key] = <span class="hljs-keyword">new</span> SimpleChange(previousValue, currentValue);
                        }
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">triggerOnChangesHook</span>(<span class="hljs-params"></span>) </span>{
                        destination.$onChanges(changes);
                        changes = <span class="hljs-literal">undefined</span>;
                    }
                    <span class="hljs-keyword">return</span> {
                        <span class="hljs-attr">initialChanges</span>: initialChanges,
                        <span class="hljs-attr">removeWatches</span>: removeWatchCollection.length &amp;&amp; <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeWatches</span>(<span class="hljs-params"></span>) </span>{
                            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, ii = removeWatchCollection.length; i &lt; ii; ++i) {
                                removeWatchCollection[i]();
                            }
                        }
                    };
                }
            }
        ];
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">SimpleChange</span>(<span class="hljs-params">previous, current</span>) </span>{
        <span class="hljs-keyword">this</span>.previousValue = previous;
        <span class="hljs-keyword">this</span>.currentValue = current;
    }
    SimpleChange.prototype.isFirstChange = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.previousValue === _UNINITIALIZED_VALUE;
    };
    <span class="hljs-keyword">var</span> PREFIX_REGEXP = <span class="hljs-regexp">/^((?:x|data)[\:\-_])/i</span>;

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">directiveNormalize</span>(<span class="hljs-params">name</span>) </span>{
        <span class="hljs-keyword">return</span> camelCase(name.replace(PREFIX_REGEXP, <span class="hljs-string">''</span>));
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">nodesetLinkingFn</span>(<span class="hljs-params">
        scope,
        nodeList,
        rootElement,
        boundTranscludeFn
    </span>) </span>{}

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">directiveLinkingFn</span>(<span class="hljs-params">
        nodesetLinkingFn,
        scope,
        node,
        rootElement,
        boundTranscludeFn
    </span>) </span>{}

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">tokenDifference</span>(<span class="hljs-params">str1, str2</span>) </span>{
        <span class="hljs-keyword">var</span> values = <span class="hljs-string">''</span>,
            tokens1 = str1.split(<span class="hljs-regexp">/\s+/</span>),
            tokens2 = str2.split(<span class="hljs-regexp">/\s+/</span>);
        outer:
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; tokens1.length; i++) {
                <span class="hljs-keyword">var</span> token = tokens1[i];
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>; j &lt; tokens2.length; j++) {
                    <span class="hljs-keyword">if</span> (token == tokens2[j]) <span class="hljs-keyword">continue</span> outer;
                }
                values += (values.length &gt; <span class="hljs-number">0</span> ? <span class="hljs-string">' '</span> : <span class="hljs-string">''</span>) + token;
            }
        <span class="hljs-keyword">return</span> values;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeComments</span>(<span class="hljs-params">jqNodes</span>) </span>{
        jqNodes = jqLite(jqNodes);
        <span class="hljs-keyword">var</span> i = jqNodes.length;
        <span class="hljs-keyword">if</span> (i &lt;= <span class="hljs-number">1</span>) {
            <span class="hljs-keyword">return</span> jqNodes;
        }
        <span class="hljs-keyword">while</span> (i--) {
            <span class="hljs-keyword">var</span> node = jqNodes[i];
            <span class="hljs-keyword">if</span> (node.nodeType === NODE_TYPE_COMMENT) {
                splice.call(jqNodes, i, <span class="hljs-number">1</span>);
            }
        }
        <span class="hljs-keyword">return</span> jqNodes;
    }
    <span class="hljs-keyword">var</span> $controllerMinErr = minErr(<span class="hljs-string">'$controller'</span>);
    <span class="hljs-keyword">var</span> CNTRL_REG = <span class="hljs-regexp">/^(\S+)(\s+as\s+([\w$]+))?$/</span>;

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">identifierForController</span>(<span class="hljs-params">controller, ident</span>) </span>{
        <span class="hljs-keyword">if</span> (ident &amp;&amp; isString(ident)) <span class="hljs-keyword">return</span> ident;
        <span class="hljs-keyword">if</span> (isString(controller)) {
            <span class="hljs-keyword">var</span> match = CNTRL_REG.exec(controller);
            <span class="hljs-keyword">if</span> (match) <span class="hljs-keyword">return</span> match[<span class="hljs-number">3</span>];
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$ControllerProvider</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> controllers = {},
            globals = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">this</span>.has = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name</span>) </span>{
            <span class="hljs-keyword">return</span> controllers.hasOwnProperty(name);
        };
        <span class="hljs-keyword">this</span>.register = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name, constructor</span>) </span>{
            assertNotHasOwnProperty(name, <span class="hljs-string">'controller'</span>);
            <span class="hljs-keyword">if</span> (isObject(name)) {
                extend(controllers, name);
            } <span class="hljs-keyword">else</span> {
                controllers[name] = <span class="hljs-keyword">constructor</span>;
            }
        };
        this.allowGlobals = function() {
            globals = <span class="hljs-literal">true</span>;
        };
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$injector'</span>, <span class="hljs-string">'$window'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$injector, $window</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$controller</span>(<span class="hljs-params">expression, locals, later, ident</span>) </span>{
                <span class="hljs-keyword">var</span> instance, match, <span class="hljs-keyword">constructor</span>, identifier;
                later = later === true;
                if (ident &amp;&amp; isString(ident)) {
                    identifier = ident;
                }
                <span class="hljs-keyword">if</span> (isString(expression)) {
                    match = expression.match(CNTRL_REG);
                    <span class="hljs-keyword">if</span> (!match) {
                        <span class="hljs-keyword">throw</span> $controllerMinErr(<span class="hljs-string">'ctrlfmt'</span>,
                            <span class="hljs-string">"Badly formed controller string '{0}'. "</span> +
                            <span class="hljs-string">"Must match `__name__ as __id__` or `__name__`."</span>, expression);
                    }
                    <span class="hljs-keyword">constructor</span> = match[1],
                        identifier = identifier || match[3];
                    expression = controllers.hasOwnProperty(<span class="hljs-keyword">constructor</span>) ?
                        controllers[<span class="hljs-keyword">constructor</span>] :
                        getter(locals.$scope, <span class="hljs-keyword">constructor</span>, true) ||
                        (globals ? getter($window, <span class="hljs-keyword">constructor</span>, true) : undefined);
                    assertArgFn(expression, <span class="hljs-keyword">constructor</span>, true);
                }
                if (later) {
                    <span class="hljs-keyword">var</span> controllerPrototype = (isArray(expression) ?
                        expression[expression.length - <span class="hljs-number">1</span>] : expression).prototype;
                    instance = <span class="hljs-built_in">Object</span>.create(controllerPrototype || <span class="hljs-literal">null</span>);
                    <span class="hljs-keyword">if</span> (identifier) {
                        addIdentifier(locals, identifier, instance, <span class="hljs-keyword">constructor</span> || expression.name);
                    }
                    var instantiate;
                    return instantiate = extend(function $controllerInit() {
                        <span class="hljs-keyword">var</span> result = $injector.invoke(expression, instance, locals, <span class="hljs-keyword">constructor</span>);
                        if (result !== instance &amp;&amp; (isObject(result) || isFunction(result))) {
                            instance = result;
                            <span class="hljs-keyword">if</span> (identifier) {
                                addIdentifier(locals, identifier, instance, <span class="hljs-keyword">constructor</span> || expression.name);
                            }
                        }
                        return instance;
                    }, {
                        instance: instance,
                        <span class="hljs-attr">identifier</span>: identifier
                    });
                }
                instance = $injector.instantiate(expression, locals, <span class="hljs-keyword">constructor</span>);
                if (identifier) {
                    addIdentifier(locals, identifier, instance, <span class="hljs-keyword">constructor</span> || expression.name);
                }
                return instance;
            };

            function addIdentifier(locals, identifier, instance, name) {
                <span class="hljs-keyword">if</span> (!(locals &amp;&amp; isObject(locals.$scope))) {
                    <span class="hljs-keyword">throw</span> minErr(<span class="hljs-string">'$controller'</span>)(<span class="hljs-string">'noscp'</span>,
                        <span class="hljs-string">"Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`."</span>,
                        name, identifier);
                }
                locals.$scope[identifier] = instance;
            }
        }];
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$DocumentProvider</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$window'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">window</span>) </span>{
            <span class="hljs-keyword">return</span> jqLite(<span class="hljs-built_in">window</span>.document);
        }];
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$ExceptionHandlerProvider</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$log'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$log</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">exception, cause</span>) </span>{
                $log.error.apply($log, <span class="hljs-built_in">arguments</span>);
            };
        }];
    }
    <span class="hljs-keyword">var</span> $$ForceReflowProvider = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$document'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$document</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">domNode</span>) </span>{
                <span class="hljs-keyword">if</span> (domNode) {
                    <span class="hljs-keyword">if</span> (!domNode.nodeType &amp;&amp; domNode <span class="hljs-keyword">instanceof</span> jqLite) {
                        domNode = domNode[<span class="hljs-number">0</span>];
                    }
                } <span class="hljs-keyword">else</span> {
                    domNode = $<span class="hljs-built_in">document</span>[<span class="hljs-number">0</span>].body;
                }
                <span class="hljs-keyword">return</span> domNode.offsetWidth + <span class="hljs-number">1</span>;
            };
        }];
    };
    <span class="hljs-keyword">var</span> APPLICATION_JSON = <span class="hljs-string">'application/json'</span>;
    <span class="hljs-keyword">var</span> CONTENT_TYPE_APPLICATION_JSON = {
        <span class="hljs-string">'Content-Type'</span>: APPLICATION_JSON + <span class="hljs-string">';charset=utf-8'</span>
    };
    <span class="hljs-keyword">var</span> JSON_START = <span class="hljs-regexp">/^\[|^\{(?!\{)/</span>;
    <span class="hljs-keyword">var</span> JSON_ENDS = {
        <span class="hljs-string">'['</span>: <span class="hljs-regexp">/]$/</span>,
        <span class="hljs-string">'{'</span>: <span class="hljs-regexp">/}$/</span>
    };
    <span class="hljs-keyword">var</span> JSON_PROTECTION_PREFIX = <span class="hljs-regexp">/^\)\]\}',?\n/</span>;
    <span class="hljs-keyword">var</span> $httpMinErr = minErr(<span class="hljs-string">'$http'</span>);
    <span class="hljs-keyword">var</span> $httpMinErrLegacyFn = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">method</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">throw</span> $httpMinErr(<span class="hljs-string">'legacy'</span>, <span class="hljs-string">'The method `{0}` on the promise returned from `$http` has been disabled.'</span>, method);
        };
    };

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">serializeValue</span>(<span class="hljs-params">v</span>) </span>{
        <span class="hljs-keyword">if</span> (isObject(v)) {
            <span class="hljs-keyword">return</span> isDate(v) ? v.toISOString() : toJson(v);
        }
        <span class="hljs-keyword">return</span> v;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$HttpParamSerializerProvider</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.$get = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngParamSerializer</span>(<span class="hljs-params">params</span>) </span>{
                <span class="hljs-keyword">if</span> (!params) <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
                <span class="hljs-keyword">var</span> parts = [];
                forEachSorted(params, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, key</span>) </span>{
                    <span class="hljs-keyword">if</span> (value === <span class="hljs-literal">null</span> || isUndefined(value)) <span class="hljs-keyword">return</span>;
                    <span class="hljs-keyword">if</span> (isArray(value)) {
                        forEach(value, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">v</span>) </span>{
                            parts.push(encodeUriQuery(key) + <span class="hljs-string">'='</span> + encodeUriQuery(serializeValue(v)));
                        });
                    } <span class="hljs-keyword">else</span> {
                        parts.push(encodeUriQuery(key) + <span class="hljs-string">'='</span> + encodeUriQuery(serializeValue(value)));
                    }
                });
                <span class="hljs-keyword">return</span> parts.join(<span class="hljs-string">'&amp;'</span>);
            };
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$HttpParamSerializerJQLikeProvider</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.$get = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jQueryLikeParamSerializer</span>(<span class="hljs-params">params</span>) </span>{
                <span class="hljs-keyword">if</span> (!params) <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
                <span class="hljs-keyword">var</span> parts = [];
                serialize(params, <span class="hljs-string">''</span>, <span class="hljs-literal">true</span>);
                <span class="hljs-keyword">return</span> parts.join(<span class="hljs-string">'&amp;'</span>);

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">serialize</span>(<span class="hljs-params">toSerialize, prefix, topLevel</span>) </span>{
                    <span class="hljs-keyword">if</span> (toSerialize === <span class="hljs-literal">null</span> || isUndefined(toSerialize)) <span class="hljs-keyword">return</span>;
                    <span class="hljs-keyword">if</span> (isArray(toSerialize)) {
                        forEach(toSerialize, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, index</span>) </span>{
                            serialize(value, prefix + <span class="hljs-string">'['</span> + (isObject(value) ? index : <span class="hljs-string">''</span>) + <span class="hljs-string">']'</span>);
                        });
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isObject(toSerialize) &amp;&amp; !isDate(toSerialize)) {
                        forEachSorted(toSerialize, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, key</span>) </span>{
                            serialize(value, prefix +
                                (topLevel ? <span class="hljs-string">''</span> : <span class="hljs-string">'['</span>) +
                                key +
                                (topLevel ? <span class="hljs-string">''</span> : <span class="hljs-string">']'</span>));
                        });
                    } <span class="hljs-keyword">else</span> {
                        parts.push(encodeUriQuery(prefix) + <span class="hljs-string">'='</span> + encodeUriQuery(serializeValue(toSerialize)));
                    }
                }
            };
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">defaultHttpResponseTransform</span>(<span class="hljs-params">data, headers</span>) </span>{
        <span class="hljs-keyword">if</span> (isString(data)) {
            <span class="hljs-keyword">var</span> tempData = data.replace(JSON_PROTECTION_PREFIX, <span class="hljs-string">''</span>).trim();
            <span class="hljs-keyword">if</span> (tempData) {
                <span class="hljs-keyword">var</span> contentType = headers(<span class="hljs-string">'Content-Type'</span>);
                <span class="hljs-keyword">if</span> ((contentType &amp;&amp; (contentType.indexOf(APPLICATION_JSON) === <span class="hljs-number">0</span>)) || isJsonLike(tempData)) {
                    data = fromJson(tempData);
                }
            }
        }
        <span class="hljs-keyword">return</span> data;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isJsonLike</span>(<span class="hljs-params">str</span>) </span>{
        <span class="hljs-keyword">var</span> jsonStart = str.match(JSON_START);
        <span class="hljs-keyword">return</span> jsonStart &amp;&amp; JSON_ENDS[jsonStart[<span class="hljs-number">0</span>]].test(str);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseHeaders</span>(<span class="hljs-params">headers</span>) </span>{
        <span class="hljs-keyword">var</span> parsed = createMap(),
            i;

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fillInParsed</span>(<span class="hljs-params">key, val</span>) </span>{
            <span class="hljs-keyword">if</span> (key) {
                parsed[key] = parsed[key] ? parsed[key] + <span class="hljs-string">', '</span> + val : val;
            }
        }
        <span class="hljs-keyword">if</span> (isString(headers)) {
            forEach(headers.split(<span class="hljs-string">'\n'</span>), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">line</span>) </span>{
                i = line.indexOf(<span class="hljs-string">':'</span>);
                fillInParsed(lowercase(trim(line.substr(<span class="hljs-number">0</span>, i))), trim(line.substr(i + <span class="hljs-number">1</span>)));
            });
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isObject(headers)) {
            forEach(headers, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">headerVal, headerKey</span>) </span>{
                fillInParsed(lowercase(headerKey), trim(headerVal));
            });
        }
        <span class="hljs-keyword">return</span> parsed;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">headersGetter</span>(<span class="hljs-params">headers</span>) </span>{
        <span class="hljs-keyword">var</span> headersObj;
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name</span>) </span>{
            <span class="hljs-keyword">if</span> (!headersObj) headersObj = parseHeaders(headers);
            <span class="hljs-keyword">if</span> (name) {
                <span class="hljs-keyword">var</span> value = headersObj[lowercase(name)];
                <span class="hljs-keyword">if</span> (value === <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>) {
                    value = <span class="hljs-literal">null</span>;
                }
                <span class="hljs-keyword">return</span> value;
            }
            <span class="hljs-keyword">return</span> headersObj;
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">transformData</span>(<span class="hljs-params">data, headers, status, fns</span>) </span>{
        <span class="hljs-keyword">if</span> (isFunction(fns)) {
            <span class="hljs-keyword">return</span> fns(data, headers, status);
        }
        forEach(fns, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fn</span>) </span>{
            data = fn(data, headers, status);
        });
        <span class="hljs-keyword">return</span> data;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isSuccess</span>(<span class="hljs-params">status</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-number">200</span> &lt;= status &amp;&amp; status &lt; <span class="hljs-number">300</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$HttpProvider</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> defaults = <span class="hljs-keyword">this</span>.defaults = {
            <span class="hljs-attr">transformResponse</span>: [defaultHttpResponseTransform],
            <span class="hljs-attr">transformRequest</span>: [<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{
                <span class="hljs-keyword">return</span> isObject(d) &amp;&amp; !isFile(d) &amp;&amp; !isBlob(d) &amp;&amp; !isFormData(d) ? toJson(d) : d;
            }],
            <span class="hljs-attr">headers</span>: {
                <span class="hljs-attr">common</span>: {
                    <span class="hljs-string">'Accept'</span>: <span class="hljs-string">'application/json, text/plain, */*'</span>
                },
                <span class="hljs-attr">post</span>: shallowCopy(CONTENT_TYPE_APPLICATION_JSON),
                <span class="hljs-attr">put</span>: shallowCopy(CONTENT_TYPE_APPLICATION_JSON),
                <span class="hljs-attr">patch</span>: shallowCopy(CONTENT_TYPE_APPLICATION_JSON)
            },
            <span class="hljs-attr">xsrfCookieName</span>: <span class="hljs-string">'XSRF-TOKEN'</span>,
            <span class="hljs-attr">xsrfHeaderName</span>: <span class="hljs-string">'X-XSRF-TOKEN'</span>,
            <span class="hljs-attr">paramSerializer</span>: <span class="hljs-string">'$httpParamSerializer'</span>
        };
        <span class="hljs-keyword">var</span> useApplyAsync = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">this</span>.useApplyAsync = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
            <span class="hljs-keyword">if</span> (isDefined(value)) {
                useApplyAsync = !!value;
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
            }
            <span class="hljs-keyword">return</span> useApplyAsync;
        };
        <span class="hljs-keyword">var</span> useLegacyPromise = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">this</span>.useLegacyPromiseExtensions = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
            <span class="hljs-keyword">if</span> (isDefined(value)) {
                useLegacyPromise = !!value;
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
            }
            <span class="hljs-keyword">return</span> useLegacyPromise;
        };
        <span class="hljs-keyword">var</span> interceptorFactories = <span class="hljs-keyword">this</span>.interceptors = [];
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$httpBackend'</span>, <span class="hljs-string">'$$cookieReader'</span>, <span class="hljs-string">'$cacheFactory'</span>, <span class="hljs-string">'$rootScope'</span>, <span class="hljs-string">'$q'</span>, <span class="hljs-string">'$injector'</span>,
            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$httpBackend, $$cookieReader, $cacheFactory, $rootScope, $q, $injector</span>) </span>{
                <span class="hljs-keyword">var</span> defaultCache = $cacheFactory(<span class="hljs-string">'$http'</span>);
                defaults.paramSerializer = isString(defaults.paramSerializer) ?
                    $injector.get(defaults.paramSerializer) : defaults.paramSerializer;
                <span class="hljs-keyword">var</span> reversedInterceptors = [];
                forEach(interceptorFactories, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">interceptorFactory</span>) </span>{
                    reversedInterceptors.unshift(isString(interceptorFactory) ?
                        $injector.get(interceptorFactory) : $injector.invoke(interceptorFactory));
                });

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$http</span>(<span class="hljs-params">requestConfig</span>) </span>{
                    <span class="hljs-keyword">if</span> (!isObject(requestConfig)) {
                        <span class="hljs-keyword">throw</span> minErr(<span class="hljs-string">'$http'</span>)(<span class="hljs-string">'badreq'</span>, <span class="hljs-string">'Http request configuration must be an object.  Received: {0}'</span>, requestConfig);
                    }
                    <span class="hljs-keyword">if</span> (!isString(requestConfig.url)) {
                        <span class="hljs-keyword">throw</span> minErr(<span class="hljs-string">'$http'</span>)(<span class="hljs-string">'badreq'</span>, <span class="hljs-string">'Http request configuration url must be a string.  Received: {0}'</span>, requestConfig.url);
                    }
                    <span class="hljs-keyword">var</span> config = extend({
                        <span class="hljs-attr">method</span>: <span class="hljs-string">'get'</span>,
                        <span class="hljs-attr">transformRequest</span>: defaults.transformRequest,
                        <span class="hljs-attr">transformResponse</span>: defaults.transformResponse,
                        <span class="hljs-attr">paramSerializer</span>: defaults.paramSerializer
                    }, requestConfig);
                    config.headers = mergeHeaders(requestConfig);
                    config.method = uppercase(config.method);
                    config.paramSerializer = isString(config.paramSerializer) ?
                        $injector.get(config.paramSerializer) : config.paramSerializer;
                    <span class="hljs-keyword">var</span> requestInterceptors = [];
                    <span class="hljs-keyword">var</span> responseInterceptors = [];
                    <span class="hljs-keyword">var</span> promise = $q.when(config);
                    forEach(reversedInterceptors, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">interceptor</span>) </span>{
                        <span class="hljs-keyword">if</span> (interceptor.request || interceptor.requestError) {
                            requestInterceptors.unshift(interceptor.request, interceptor.requestError);
                        }
                        <span class="hljs-keyword">if</span> (interceptor.response || interceptor.responseError) {
                            responseInterceptors.push(interceptor.response, interceptor.responseError);
                        }
                    });
                    promise = chainInterceptors(promise, requestInterceptors);
                    promise = promise.then(serverRequest);
                    promise = chainInterceptors(promise, responseInterceptors);
                    <span class="hljs-keyword">if</span> (useLegacyPromise) {
                        promise.success = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fn</span>) </span>{
                            assertArgFn(fn, <span class="hljs-string">'fn'</span>);
                            promise.then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) </span>{
                                fn(response.data, response.status, response.headers, config);
                            });
                            <span class="hljs-keyword">return</span> promise;
                        };
                        promise.error = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fn</span>) </span>{
                            assertArgFn(fn, <span class="hljs-string">'fn'</span>);
                            promise.then(<span class="hljs-literal">null</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) </span>{
                                fn(response.data, response.status, response.headers, config);
                            });
                            <span class="hljs-keyword">return</span> promise;
                        };
                    } <span class="hljs-keyword">else</span> {
                        promise.success = $httpMinErrLegacyFn(<span class="hljs-string">'success'</span>);
                        promise.error = $httpMinErrLegacyFn(<span class="hljs-string">'error'</span>);
                    }
                    <span class="hljs-keyword">return</span> promise;

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">chainInterceptors</span>(<span class="hljs-params">promise, interceptors</span>) </span>{
                        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, ii = interceptors.length; i &lt; ii;) {
                            <span class="hljs-keyword">var</span> thenFn = interceptors[i++];
                            <span class="hljs-keyword">var</span> rejectFn = interceptors[i++];
                            promise = promise.then(thenFn, rejectFn);
                        }
                        interceptors.length = <span class="hljs-number">0</span>;
                        <span class="hljs-keyword">return</span> promise;
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">executeHeaderFns</span>(<span class="hljs-params">headers, config</span>) </span>{
                        <span class="hljs-keyword">var</span> headerContent, processedHeaders = {};
                        forEach(headers, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">headerFn, header</span>) </span>{
                            <span class="hljs-keyword">if</span> (isFunction(headerFn)) {
                                headerContent = headerFn(config);
                                <span class="hljs-keyword">if</span> (headerContent != <span class="hljs-literal">null</span>) {
                                    processedHeaders[header] = headerContent;
                                }
                            } <span class="hljs-keyword">else</span> {
                                processedHeaders[header] = headerFn;
                            }
                        });
                        <span class="hljs-keyword">return</span> processedHeaders;
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mergeHeaders</span>(<span class="hljs-params">config</span>) </span>{
                        <span class="hljs-keyword">var</span> defHeaders = defaults.headers,
                            reqHeaders = extend({}, config.headers),
                            defHeaderName, lowercaseDefHeaderName, reqHeaderName;
                        defHeaders = extend({}, defHeaders.common, defHeaders[lowercase(config.method)]);
                        defaultHeadersIteration:
                            <span class="hljs-keyword">for</span> (defHeaderName <span class="hljs-keyword">in</span> defHeaders) {
                                lowercaseDefHeaderName = lowercase(defHeaderName);
                                <span class="hljs-keyword">for</span> (reqHeaderName <span class="hljs-keyword">in</span> reqHeaders) {
                                    <span class="hljs-keyword">if</span> (lowercase(reqHeaderName) === lowercaseDefHeaderName) {
                                        <span class="hljs-keyword">continue</span> defaultHeadersIteration;
                                    }
                                }
                                reqHeaders[defHeaderName] = defHeaders[defHeaderName];
                            }
                        <span class="hljs-keyword">return</span> executeHeaderFns(reqHeaders, shallowCopy(config));
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">serverRequest</span>(<span class="hljs-params">config</span>) </span>{
                        <span class="hljs-keyword">var</span> headers = config.headers;
                        <span class="hljs-keyword">var</span> reqData = transformData(config.data, headersGetter(headers), <span class="hljs-literal">undefined</span>, config.transformRequest);
                        <span class="hljs-keyword">if</span> (isUndefined(reqData)) {
                            forEach(headers, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, header</span>) </span>{
                                <span class="hljs-keyword">if</span> (lowercase(header) === <span class="hljs-string">'content-type'</span>) {
                                    <span class="hljs-keyword">delete</span> headers[header];
                                }
                            });
                        }
                        <span class="hljs-keyword">if</span> (isUndefined(config.withCredentials) &amp;&amp; !isUndefined(defaults.withCredentials)) {
                            config.withCredentials = defaults.withCredentials;
                        }
                        <span class="hljs-keyword">return</span> sendReq(config, reqData).then(transformResponse, transformResponse);
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">transformResponse</span>(<span class="hljs-params">response</span>) </span>{
                        <span class="hljs-keyword">var</span> resp = extend({}, response);
                        resp.data = transformData(response.data, response.headers, response.status,
                            config.transformResponse);
                        <span class="hljs-keyword">return</span> (isSuccess(response.status)) ?
                            resp :
                            $q.reject(resp);
                    }
                }
                $http.pendingRequests = [];
                createShortMethods(<span class="hljs-string">'get'</span>, <span class="hljs-string">'delete'</span>, <span class="hljs-string">'head'</span>, <span class="hljs-string">'jsonp'</span>);
                createShortMethodsWithData(<span class="hljs-string">'post'</span>, <span class="hljs-string">'put'</span>, <span class="hljs-string">'patch'</span>);
                $http.defaults = defaults;
                <span class="hljs-keyword">return</span> $http;

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createShortMethods</span>(<span class="hljs-params">names</span>) </span>{
                    forEach(<span class="hljs-built_in">arguments</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name</span>) </span>{
                        $http[name] = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">url, config</span>) </span>{
                            <span class="hljs-keyword">return</span> $http(extend({}, config || {}, {
                                <span class="hljs-attr">method</span>: name,
                                <span class="hljs-attr">url</span>: url
                            }));
                        };
                    });
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createShortMethodsWithData</span>(<span class="hljs-params">name</span>) </span>{
                    forEach(<span class="hljs-built_in">arguments</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name</span>) </span>{
                        $http[name] = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">url, data, config</span>) </span>{
                            <span class="hljs-keyword">return</span> $http(extend({}, config || {}, {
                                <span class="hljs-attr">method</span>: name,
                                <span class="hljs-attr">url</span>: url,
                                <span class="hljs-attr">data</span>: data
                            }));
                        };
                    });
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sendReq</span>(<span class="hljs-params">config, reqData</span>) </span>{
                    <span class="hljs-keyword">var</span> deferred = $q.defer(),
                        promise = deferred.promise,
                        cache,
                        cachedResp,
                        reqHeaders = config.headers,
                        url = buildUrl(config.url, config.paramSerializer(config.params));
                    $http.pendingRequests.push(config);
                    promise.then(removePendingReq, removePendingReq);
                    <span class="hljs-keyword">if</span> ((config.cache || defaults.cache) &amp;&amp; config.cache !== <span class="hljs-literal">false</span> &amp;&amp;
                        (config.method === <span class="hljs-string">'GET'</span> || config.method === <span class="hljs-string">'JSONP'</span>)) {
                        cache = isObject(config.cache) ? config.cache :
                            isObject(defaults.cache) ? defaults.cache :
                            defaultCache;
                    }
                    <span class="hljs-keyword">if</span> (cache) {
                        cachedResp = cache.get(url);
                        <span class="hljs-keyword">if</span> (isDefined(cachedResp)) {
                            <span class="hljs-keyword">if</span> (isPromiseLike(cachedResp)) {
                                cachedResp.then(resolvePromiseWithResult, resolvePromiseWithResult);
                            } <span class="hljs-keyword">else</span> {
                                <span class="hljs-keyword">if</span> (isArray(cachedResp)) {
                                    resolvePromise(cachedResp[<span class="hljs-number">1</span>], cachedResp[<span class="hljs-number">0</span>], shallowCopy(cachedResp[<span class="hljs-number">2</span>]), cachedResp[<span class="hljs-number">3</span>]);
                                } <span class="hljs-keyword">else</span> {
                                    resolvePromise(cachedResp, <span class="hljs-number">200</span>, {}, <span class="hljs-string">'OK'</span>);
                                }
                            }
                        } <span class="hljs-keyword">else</span> {
                            cache.put(url, promise);
                        }
                    }
                    <span class="hljs-keyword">if</span> (isUndefined(cachedResp)) {
                        <span class="hljs-keyword">var</span> xsrfValue = urlIsSameOrigin(config.url) ?
                            $$cookieReader()[config.xsrfCookieName || defaults.xsrfCookieName] :
                            <span class="hljs-literal">undefined</span>;
                        <span class="hljs-keyword">if</span> (xsrfValue) {
                            reqHeaders[(config.xsrfHeaderName || defaults.xsrfHeaderName)] = xsrfValue;
                        }
                        $httpBackend(config.method, url, reqData, done, reqHeaders, config.timeout,
                            config.withCredentials, config.responseType,
                            createApplyHandlers(config.eventHandlers),
                            createApplyHandlers(config.uploadEventHandlers));
                    }
                    <span class="hljs-keyword">return</span> promise;

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createApplyHandlers</span>(<span class="hljs-params">eventHandlers</span>) </span>{
                        <span class="hljs-keyword">if</span> (eventHandlers) {
                            <span class="hljs-keyword">var</span> applyHandlers = {};
                            forEach(eventHandlers, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">eventHandler, key</span>) </span>{
                                applyHandlers[key] = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
                                    <span class="hljs-keyword">if</span> (useApplyAsync) {
                                        $rootScope.$applyAsync(callEventHandler);
                                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ($rootScope.$$phase) {
                                        callEventHandler();
                                    } <span class="hljs-keyword">else</span> {
                                        $rootScope.$apply(callEventHandler);
                                    }

                                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">callEventHandler</span>(<span class="hljs-params"></span>) </span>{
                                        eventHandler(event);
                                    }
                                };
                            });
                            <span class="hljs-keyword">return</span> applyHandlers;
                        }
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">done</span>(<span class="hljs-params">status, response, headersString, statusText</span>) </span>{
                        <span class="hljs-keyword">if</span> (cache) {
                            <span class="hljs-keyword">if</span> (isSuccess(status)) {
                                cache.put(url, [status, response, parseHeaders(headersString), statusText]);
                            } <span class="hljs-keyword">else</span> {
                                cache.remove(url);
                            }
                        }

                        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resolveHttpPromise</span>(<span class="hljs-params"></span>) </span>{
                            resolvePromise(response, status, headersString, statusText);
                        }
                        <span class="hljs-keyword">if</span> (useApplyAsync) {
                            $rootScope.$applyAsync(resolveHttpPromise);
                        } <span class="hljs-keyword">else</span> {
                            resolveHttpPromise();
                            <span class="hljs-keyword">if</span> (!$rootScope.$$phase) $rootScope.$apply();
                        }
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resolvePromise</span>(<span class="hljs-params">response, status, headers, statusText</span>) </span>{
                        status = status &gt;= <span class="hljs-number">-1</span> ? status : <span class="hljs-number">0</span>;
                        (isSuccess(status) ? deferred.resolve : deferred.reject)({
                            <span class="hljs-attr">data</span>: response,
                            <span class="hljs-attr">status</span>: status,
                            <span class="hljs-attr">headers</span>: headersGetter(headers),
                            <span class="hljs-attr">config</span>: config,
                            <span class="hljs-attr">statusText</span>: statusText
                        });
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resolvePromiseWithResult</span>(<span class="hljs-params">result</span>) </span>{
                        resolvePromise(result.data, result.status, shallowCopy(result.headers()), result.statusText);
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removePendingReq</span>(<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">var</span> idx = $http.pendingRequests.indexOf(config);
                        <span class="hljs-keyword">if</span> (idx !== <span class="hljs-number">-1</span>) $http.pendingRequests.splice(idx, <span class="hljs-number">1</span>);
                    }
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildUrl</span>(<span class="hljs-params">url, serializedParams</span>) </span>{
                    <span class="hljs-keyword">if</span> (serializedParams.length &gt; <span class="hljs-number">0</span>) {
                        url += ((url.indexOf(<span class="hljs-string">'?'</span>) == <span class="hljs-number">-1</span>) ? <span class="hljs-string">'?'</span> : <span class="hljs-string">'&amp;'</span>) + serializedParams;
                    }
                    <span class="hljs-keyword">return</span> url;
                }
            }
        ];
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$xhrFactoryProvider</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.$get = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createXhr</span>(<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">window</span>.XMLHttpRequest();
            };
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$HttpBackendProvider</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$browser'</span>, <span class="hljs-string">'$jsonpCallbacks'</span>, <span class="hljs-string">'$document'</span>, <span class="hljs-string">'$xhrFactory'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$browser, $jsonpCallbacks, $document, $xhrFactory</span>) </span>{
            <span class="hljs-keyword">return</span> createHttpBackend($browser, $xhrFactory, $browser.defer, $jsonpCallbacks, $<span class="hljs-built_in">document</span>[<span class="hljs-number">0</span>]);
        }];
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createHttpBackend</span>(<span class="hljs-params">$browser, createXhr, $browserDefer, callbacks, rawDocument</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">method, url, post, callback, headers, timeout, withCredentials, responseType, eventHandlers, uploadEventHandlers</span>) </span>{
            $browser.$$incOutstandingRequestCount();
            url = url || $browser.url();
            <span class="hljs-keyword">if</span> (lowercase(method) === <span class="hljs-string">'jsonp'</span>) {
                <span class="hljs-keyword">var</span> callbackPath = callbacks.createCallback(url);
                <span class="hljs-keyword">var</span> jsonpDone = jsonpReq(url, callbackPath, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">status, text</span>) </span>{
                    <span class="hljs-keyword">var</span> response = (status === <span class="hljs-number">200</span>) &amp;&amp; callbacks.getResponse(callbackPath);
                    completeRequest(callback, status, response, <span class="hljs-string">""</span>, text);
                    callbacks.removeCallback(callbackPath);
                });
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">var</span> xhr = createXhr(method, url);
                xhr.open(method, url, <span class="hljs-literal">true</span>);
                forEach(headers, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, key</span>) </span>{
                    <span class="hljs-keyword">if</span> (isDefined(value)) {
                        xhr.setRequestHeader(key, value);
                    }
                });
                xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">requestLoaded</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">var</span> statusText = xhr.statusText || <span class="hljs-string">''</span>;
                    <span class="hljs-keyword">var</span> response = (<span class="hljs-string">'response'</span> <span class="hljs-keyword">in</span> xhr) ? xhr.response : xhr.responseText;
                    <span class="hljs-keyword">var</span> status = xhr.status === <span class="hljs-number">1223</span> ? <span class="hljs-number">204</span> : xhr.status;
                    <span class="hljs-keyword">if</span> (status === <span class="hljs-number">0</span>) {
                        status = response ? <span class="hljs-number">200</span> : urlResolve(url).protocol == <span class="hljs-string">'file'</span> ? <span class="hljs-number">404</span> : <span class="hljs-number">0</span>;
                    }
                    completeRequest(callback,
                        status,
                        response,
                        xhr.getAllResponseHeaders(),
                        statusText);
                };
                <span class="hljs-keyword">var</span> requestError = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                    completeRequest(callback, <span class="hljs-number">-1</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, <span class="hljs-string">''</span>);
                };
                xhr.onerror = requestError;
                xhr.onabort = requestError;
                forEach(eventHandlers, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, key</span>) </span>{
                    xhr.addEventListener(key, value);
                });
                forEach(uploadEventHandlers, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, key</span>) </span>{
                    xhr.upload.addEventListener(key, value);
                });
                <span class="hljs-keyword">if</span> (withCredentials) {
                    xhr.withCredentials = <span class="hljs-literal">true</span>;
                }
                <span class="hljs-keyword">if</span> (responseType) {
                    <span class="hljs-keyword">try</span> {
                        xhr.responseType = responseType;
                    } <span class="hljs-keyword">catch</span> (e) {
                        <span class="hljs-keyword">if</span> (responseType !== <span class="hljs-string">'json'</span>) {
                            <span class="hljs-keyword">throw</span> e;
                        }
                    }
                }
                xhr.send(isUndefined(post) ? <span class="hljs-literal">null</span> : post);
            }
            <span class="hljs-keyword">if</span> (timeout &gt; <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">var</span> timeoutId = $browserDefer(timeoutRequest, timeout);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isPromiseLike(timeout)) {
                timeout.then(timeoutRequest);
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">timeoutRequest</span>(<span class="hljs-params"></span>) </span>{
                jsonpDone &amp;&amp; jsonpDone();
                xhr &amp;&amp; xhr.abort();
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">completeRequest</span>(<span class="hljs-params">callback, status, response, headersString, statusText</span>) </span>{
                <span class="hljs-keyword">if</span> (isDefined(timeoutId)) {
                    $browserDefer.cancel(timeoutId);
                }
                jsonpDone = xhr = <span class="hljs-literal">null</span>;
                callback(status, response, headersString, statusText);
                $browser.$$completeOutstandingRequest(noop);
            }
        };

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jsonpReq</span>(<span class="hljs-params">url, callbackPath, done</span>) </span>{
            url = url.replace(<span class="hljs-string">'JSON_CALLBACK'</span>, callbackPath);
            <span class="hljs-keyword">var</span> script = rawDocument.createElement(<span class="hljs-string">'script'</span>),
                callback = <span class="hljs-literal">null</span>;
            script.type = <span class="hljs-string">"text/javascript"</span>;
            script.src = url;
            script.async = <span class="hljs-literal">true</span>;
            callback = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
                removeEventListenerFn(script, <span class="hljs-string">"load"</span>, callback);
                removeEventListenerFn(script, <span class="hljs-string">"error"</span>, callback);
                rawDocument.body.removeChild(script);
                script = <span class="hljs-literal">null</span>;
                <span class="hljs-keyword">var</span> status = <span class="hljs-number">-1</span>;
                <span class="hljs-keyword">var</span> text = <span class="hljs-string">"unknown"</span>;
                <span class="hljs-keyword">if</span> (event) {
                    <span class="hljs-keyword">if</span> (event.type === <span class="hljs-string">"load"</span> &amp;&amp; !callbacks.wasCalled(callbackPath)) {
                        event = {
                            <span class="hljs-attr">type</span>: <span class="hljs-string">"error"</span>
                        };
                    }
                    text = event.type;
                    status = event.type === <span class="hljs-string">"error"</span> ? <span class="hljs-number">404</span> : <span class="hljs-number">200</span>;
                }
                <span class="hljs-keyword">if</span> (done) {
                    done(status, text);
                }
            };
            addEventListenerFn(script, <span class="hljs-string">"load"</span>, callback);
            addEventListenerFn(script, <span class="hljs-string">"error"</span>, callback);
            rawDocument.body.appendChild(script);
            <span class="hljs-keyword">return</span> callback;
        }
    }
    <span class="hljs-keyword">var</span> $interpolateMinErr = angular.$interpolateMinErr = minErr(<span class="hljs-string">'$interpolate'</span>);
    $interpolateMinErr.throwNoconcat = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">text</span>) </span>{
        <span class="hljs-keyword">throw</span> $interpolateMinErr(<span class="hljs-string">'noconcat'</span>,
            <span class="hljs-string">"Error while interpolating: {0}\nStrict Contextual Escaping disallows "</span> +
            <span class="hljs-string">"interpolations that concatenate multiple expressions when a trusted value is "</span> +
            <span class="hljs-string">"required.  See http://docs.angularjs.org/api/ng.$sce"</span>, text);
    };
    $interpolateMinErr.interr = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">text, err</span>) </span>{
        <span class="hljs-keyword">return</span> $interpolateMinErr(<span class="hljs-string">'interr'</span>, <span class="hljs-string">"Can't interpolate: {0}\n{1}"</span>, text, err.toString());
    };

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$InterpolateProvider</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> startSymbol = <span class="hljs-string">'{{'</span>;
        <span class="hljs-keyword">var</span> endSymbol = <span class="hljs-string">'}}'</span>;
        <span class="hljs-keyword">this</span>.startSymbol = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
            <span class="hljs-keyword">if</span> (value) {
                startSymbol = value;
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> startSymbol;
            }
        };
        <span class="hljs-keyword">this</span>.endSymbol = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
            <span class="hljs-keyword">if</span> (value) {
                endSymbol = value;
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> endSymbol;
            }
        };
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$parse'</span>, <span class="hljs-string">'$exceptionHandler'</span>, <span class="hljs-string">'$sce'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$parse, $exceptionHandler, $sce</span>) </span>{
            <span class="hljs-keyword">var</span> startSymbolLength = startSymbol.length,
                endSymbolLength = endSymbol.length,
                escapedStartRegexp = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(startSymbol.replace(<span class="hljs-regexp">/./g</span>, <span class="hljs-built_in">escape</span>), <span class="hljs-string">'g'</span>),
                escapedEndRegexp = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(endSymbol.replace(<span class="hljs-regexp">/./g</span>, <span class="hljs-built_in">escape</span>), <span class="hljs-string">'g'</span>);

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">escape</span>(<span class="hljs-params">ch</span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-string">'\\\\\\'</span> + ch;
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unescapeText</span>(<span class="hljs-params">text</span>) </span>{
                <span class="hljs-keyword">return</span> text.replace(escapedStartRegexp, startSymbol).
                replace(escapedEndRegexp, endSymbol);
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stringify</span>(<span class="hljs-params">value</span>) </span>{
                <span class="hljs-keyword">if</span> (value == <span class="hljs-literal">null</span>) {
                    <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
                }
                <span class="hljs-keyword">switch</span> (<span class="hljs-keyword">typeof</span> value) {
                    <span class="hljs-keyword">case</span> <span class="hljs-string">'string'</span>:
                        <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">case</span> <span class="hljs-string">'number'</span>:
                        value = <span class="hljs-string">''</span> + value;
                        <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">default</span>:
                        value = toJson(value);
                }
                <span class="hljs-keyword">return</span> value;
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">constantWatchDelegate</span>(<span class="hljs-params">scope, listener, objectEquality, constantInterp</span>) </span>{
                <span class="hljs-keyword">var</span> unwatch;
                <span class="hljs-keyword">return</span> unwatch = scope.$watch(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">constantInterpolateWatch</span>(<span class="hljs-params">scope</span>) </span>{
                    unwatch();
                    <span class="hljs-keyword">return</span> constantInterp(scope);
                }, listener, objectEquality);
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$interpolate</span>(<span class="hljs-params">text, mustHaveExpression, trustedContext, allOrNothing</span>) </span>{
                <span class="hljs-keyword">if</span> (!text.length || text.indexOf(startSymbol) === <span class="hljs-number">-1</span>) {
                    <span class="hljs-keyword">var</span> constantInterp;
                    <span class="hljs-keyword">if</span> (!mustHaveExpression) {
                        <span class="hljs-keyword">var</span> unescapedText = unescapeText(text);
                        constantInterp = valueFn(unescapedText);
                        constantInterp.exp = text;
                        constantInterp.expressions = [];
                        constantInterp.$$watchDelegate = constantWatchDelegate;
                    }
                    <span class="hljs-keyword">return</span> constantInterp;
                }
                allOrNothing = !!allOrNothing;
                <span class="hljs-keyword">var</span> startIndex,
                    endIndex,
                    index = <span class="hljs-number">0</span>,
                    expressions = [],
                    parseFns = [],
                    textLength = text.length,
                    exp,
                    concat = [],
                    expressionPositions = [];
                <span class="hljs-keyword">while</span> (index &lt; textLength) {
                    <span class="hljs-keyword">if</span> (((startIndex = text.indexOf(startSymbol, index)) != <span class="hljs-number">-1</span>) &amp;&amp;
                        ((endIndex = text.indexOf(endSymbol, startIndex + startSymbolLength)) != <span class="hljs-number">-1</span>)) {
                        <span class="hljs-keyword">if</span> (index !== startIndex) {
                            concat.push(unescapeText(text.substring(index, startIndex)));
                        }
                        exp = text.substring(startIndex + startSymbolLength, endIndex);
                        expressions.push(exp);
                        parseFns.push($parse(exp, parseStringifyInterceptor));
                        index = endIndex + endSymbolLength;
                        expressionPositions.push(concat.length);
                        concat.push(<span class="hljs-string">''</span>);
                    } <span class="hljs-keyword">else</span> {
                        <span class="hljs-keyword">if</span> (index !== textLength) {
                            concat.push(unescapeText(text.substring(index)));
                        }
                        <span class="hljs-keyword">break</span>;
                    }
                }
                <span class="hljs-keyword">if</span> (trustedContext &amp;&amp; concat.length &gt; <span class="hljs-number">1</span>) {
                    $interpolateMinErr.throwNoconcat(text);
                }
                <span class="hljs-keyword">if</span> (!mustHaveExpression || expressions.length) {
                    <span class="hljs-keyword">var</span> compute = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">values</span>) </span>{
                        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, ii = expressions.length; i &lt; ii; i++) {
                            <span class="hljs-keyword">if</span> (allOrNothing &amp;&amp; isUndefined(values[i])) <span class="hljs-keyword">return</span>;
                            concat[expressionPositions[i]] = values[i];
                        }
                        <span class="hljs-keyword">return</span> concat.join(<span class="hljs-string">''</span>);
                    };
                    <span class="hljs-keyword">var</span> getValue = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                        <span class="hljs-keyword">return</span> trustedContext ?
                            $sce.getTrusted(trustedContext, value) :
                            $sce.valueOf(value);
                    };
                    <span class="hljs-keyword">return</span> extend(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">interpolationFn</span>(<span class="hljs-params">context</span>) </span>{
                        <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>;
                        <span class="hljs-keyword">var</span> ii = expressions.length;
                        <span class="hljs-keyword">var</span> values = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(ii);
                        <span class="hljs-keyword">try</span> {
                            <span class="hljs-keyword">for</span> (; i &lt; ii; i++) {
                                values[i] = parseFns[i](context);
                            }
                            <span class="hljs-keyword">return</span> compute(values);
                        } <span class="hljs-keyword">catch</span> (err) {
                            $exceptionHandler($interpolateMinErr.interr(text, err));
                        }
                    }, {
                        <span class="hljs-attr">exp</span>: text,
                        <span class="hljs-attr">expressions</span>: expressions,
                        <span class="hljs-attr">$$watchDelegate</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, listener</span>) </span>{
                            <span class="hljs-keyword">var</span> lastValue;
                            <span class="hljs-keyword">return</span> scope.$watchGroup(parseFns, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">interpolateFnWatcher</span>(<span class="hljs-params">values, oldValues</span>) </span>{
                                <span class="hljs-keyword">var</span> currValue = compute(values);
                                <span class="hljs-keyword">if</span> (isFunction(listener)) {
                                    listener.call(<span class="hljs-keyword">this</span>, currValue, values !== oldValues ? lastValue : currValue, scope);
                                }
                                lastValue = currValue;
                            });
                        }
                    });
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseStringifyInterceptor</span>(<span class="hljs-params">value</span>) </span>{
                    <span class="hljs-keyword">try</span> {
                        value = getValue(value);
                        <span class="hljs-keyword">return</span> allOrNothing &amp;&amp; !isDefined(value) ? value : stringify(value);
                    } <span class="hljs-keyword">catch</span> (err) {
                        $exceptionHandler($interpolateMinErr.interr(text, err));
                    }
                }
            }
            $interpolate.startSymbol = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> startSymbol;
            };
            $interpolate.endSymbol = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> endSymbol;
            };
            <span class="hljs-keyword">return</span> $interpolate;
        }];
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$IntervalProvider</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$rootScope'</span>, <span class="hljs-string">'$window'</span>, <span class="hljs-string">'$q'</span>, <span class="hljs-string">'$$q'</span>, <span class="hljs-string">'$browser'</span>,
            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$rootScope, $window, $q, $$q, $browser</span>) </span>{
                <span class="hljs-keyword">var</span> intervals = {};

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">interval</span>(<span class="hljs-params">fn, delay, count, invokeApply</span>) </span>{
                    <span class="hljs-keyword">var</span> hasParams = <span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">4</span>,
                        args = hasParams ? sliceArgs(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">4</span>) : [],
                        setInterval = $<span class="hljs-built_in">window</span>.setInterval,
                        clearInterval = $<span class="hljs-built_in">window</span>.clearInterval,
                        iteration = <span class="hljs-number">0</span>,
                        skipApply = (isDefined(invokeApply) &amp;&amp; !invokeApply),
                        deferred = (skipApply ? $$q : $q).defer(),
                        promise = deferred.promise;
                    count = isDefined(count) ? count : <span class="hljs-number">0</span>;
                    promise.$$intervalId = setInterval(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">tick</span>(<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">if</span> (skipApply) {
                            $browser.defer(callback);
                        } <span class="hljs-keyword">else</span> {
                            $rootScope.$evalAsync(callback);
                        }
                        deferred.notify(iteration++);
                        <span class="hljs-keyword">if</span> (count &gt; <span class="hljs-number">0</span> &amp;&amp; iteration &gt;= count) {
                            deferred.resolve(iteration);
                            clearInterval(promise.$$intervalId);
                            <span class="hljs-keyword">delete</span> intervals[promise.$$intervalId];
                        }
                        <span class="hljs-keyword">if</span> (!skipApply) $rootScope.$apply();
                    }, delay);
                    intervals[promise.$$intervalId] = deferred;
                    <span class="hljs-keyword">return</span> promise;

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">callback</span>(<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">if</span> (!hasParams) {
                            fn(iteration);
                        } <span class="hljs-keyword">else</span> {
                            fn.apply(<span class="hljs-literal">null</span>, args);
                        }
                    }
                }
                interval.cancel = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">promise</span>) </span>{
                    <span class="hljs-keyword">if</span> (promise &amp;&amp; promise.$$intervalId <span class="hljs-keyword">in</span> intervals) {
                        intervals[promise.$$intervalId].reject(<span class="hljs-string">'canceled'</span>);
                        $<span class="hljs-built_in">window</span>.clearInterval(promise.$$intervalId);
                        <span class="hljs-keyword">delete</span> intervals[promise.$$intervalId];
                        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                    }
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                };
                <span class="hljs-keyword">return</span> interval;
            }
        ];
    }
    <span class="hljs-keyword">var</span> $jsonpCallbacksProvider = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$window'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$window</span>) </span>{
            <span class="hljs-keyword">var</span> callbacks = $<span class="hljs-built_in">window</span>.angular.callbacks;
            <span class="hljs-keyword">var</span> callbackMap = {};

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createCallback</span>(<span class="hljs-params">callbackId</span>) </span>{
                <span class="hljs-keyword">var</span> callback = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{
                    callback.data = data;
                    callback.called = <span class="hljs-literal">true</span>;
                };
                callback.id = callbackId;
                <span class="hljs-keyword">return</span> callback;
            }
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">createCallback</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">url</span>) </span>{
                    <span class="hljs-keyword">var</span> callbackId = <span class="hljs-string">'_'</span> + (callbacks.$$counter++).toString(<span class="hljs-number">36</span>);
                    <span class="hljs-keyword">var</span> callbackPath = <span class="hljs-string">'angular.callbacks.'</span> + callbackId;
                    <span class="hljs-keyword">var</span> callback = createCallback(callbackId);
                    callbackMap[callbackPath] = callbacks[callbackId] = callback;
                    <span class="hljs-keyword">return</span> callbackPath;
                },
                <span class="hljs-attr">wasCalled</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callbackPath</span>) </span>{
                    <span class="hljs-keyword">return</span> callbackMap[callbackPath].called;
                },
                <span class="hljs-attr">getResponse</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callbackPath</span>) </span>{
                    <span class="hljs-keyword">return</span> callbackMap[callbackPath].data;
                },
                <span class="hljs-attr">removeCallback</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callbackPath</span>) </span>{
                    <span class="hljs-keyword">var</span> callback = callbackMap[callbackPath];
                    <span class="hljs-keyword">delete</span> callbacks[callback.id];
                    <span class="hljs-keyword">delete</span> callbackMap[callbackPath];
                }
            };
        }];
    };
    <span class="hljs-keyword">var</span> PATH_MATCH = <span class="hljs-regexp">/^([^\?#]*)(\?([^#]*))?(#(.*))?$/</span>,
        DEFAULT_PORTS = {
            <span class="hljs-string">'http'</span>: <span class="hljs-number">80</span>,
            <span class="hljs-string">'https'</span>: <span class="hljs-number">443</span>,
            <span class="hljs-string">'ftp'</span>: <span class="hljs-number">21</span>
        };
    <span class="hljs-keyword">var</span> $locationMinErr = minErr(<span class="hljs-string">'$location'</span>);

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">encodePath</span>(<span class="hljs-params">path</span>) </span>{
        <span class="hljs-keyword">var</span> segments = path.split(<span class="hljs-string">'/'</span>),
            i = segments.length;
        <span class="hljs-keyword">while</span> (i--) {
            segments[i] = encodeUriSegment(segments[i]);
        }
        <span class="hljs-keyword">return</span> segments.join(<span class="hljs-string">'/'</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseAbsoluteUrl</span>(<span class="hljs-params">absoluteUrl, locationObj</span>) </span>{
        <span class="hljs-keyword">var</span> parsedUrl = urlResolve(absoluteUrl);
        locationObj.$$protocol = parsedUrl.protocol;
        locationObj.$$host = parsedUrl.hostname;
        locationObj.$$port = toInt(parsedUrl.port) || DEFAULT_PORTS[parsedUrl.protocol] || <span class="hljs-literal">null</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseAppUrl</span>(<span class="hljs-params">relativeUrl, locationObj</span>) </span>{
        <span class="hljs-keyword">var</span> prefixed = (relativeUrl.charAt(<span class="hljs-number">0</span>) !== <span class="hljs-string">'/'</span>);
        <span class="hljs-keyword">if</span> (prefixed) {
            relativeUrl = <span class="hljs-string">'/'</span> + relativeUrl;
        }
        <span class="hljs-keyword">var</span> match = urlResolve(relativeUrl);
        locationObj.$$path = <span class="hljs-built_in">decodeURIComponent</span>(prefixed &amp;&amp; match.pathname.charAt(<span class="hljs-number">0</span>) === <span class="hljs-string">'/'</span> ?
            match.pathname.substring(<span class="hljs-number">1</span>) : match.pathname);
        locationObj.$$search = parseKeyValue(match.search);
        locationObj.$$hash = <span class="hljs-built_in">decodeURIComponent</span>(match.hash);
        <span class="hljs-keyword">if</span> (locationObj.$$path &amp;&amp; locationObj.$$path.charAt(<span class="hljs-number">0</span>) != <span class="hljs-string">'/'</span>) {
            locationObj.$$path = <span class="hljs-string">'/'</span> + locationObj.$$path;
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">startsWith</span>(<span class="hljs-params">haystack, needle</span>) </span>{
        <span class="hljs-keyword">return</span> haystack.lastIndexOf(needle, <span class="hljs-number">0</span>) === <span class="hljs-number">0</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stripBaseUrl</span>(<span class="hljs-params">base, url</span>) </span>{
        <span class="hljs-keyword">if</span> (startsWith(url, base)) {
            <span class="hljs-keyword">return</span> url.substr(base.length);
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stripHash</span>(<span class="hljs-params">url</span>) </span>{
        <span class="hljs-keyword">var</span> index = url.indexOf(<span class="hljs-string">'#'</span>);
        <span class="hljs-keyword">return</span> index == <span class="hljs-number">-1</span> ? url : url.substr(<span class="hljs-number">0</span>, index);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">trimEmptyHash</span>(<span class="hljs-params">url</span>) </span>{
        <span class="hljs-keyword">return</span> url.replace(<span class="hljs-regexp">/(#.+)|#$/</span>, <span class="hljs-string">'$1'</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stripFile</span>(<span class="hljs-params">url</span>) </span>{
        <span class="hljs-keyword">return</span> url.substr(<span class="hljs-number">0</span>, stripHash(url).lastIndexOf(<span class="hljs-string">'/'</span>) + <span class="hljs-number">1</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">serverBase</span>(<span class="hljs-params">url</span>) </span>{
        <span class="hljs-keyword">return</span> url.substring(<span class="hljs-number">0</span>, url.indexOf(<span class="hljs-string">'/'</span>, url.indexOf(<span class="hljs-string">'//'</span>) + <span class="hljs-number">2</span>));
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">LocationHtml5Url</span>(<span class="hljs-params">appBase, appBaseNoFile, basePrefix</span>) </span>{
        <span class="hljs-keyword">this</span>.$$html5 = <span class="hljs-literal">true</span>;
        basePrefix = basePrefix || <span class="hljs-string">''</span>;
        parseAbsoluteUrl(appBase, <span class="hljs-keyword">this</span>);
        <span class="hljs-keyword">this</span>.$$parse = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">url</span>) </span>{
            <span class="hljs-keyword">var</span> pathUrl = stripBaseUrl(appBaseNoFile, url);
            <span class="hljs-keyword">if</span> (!isString(pathUrl)) {
                <span class="hljs-keyword">throw</span> $locationMinErr(<span class="hljs-string">'ipthprfx'</span>, <span class="hljs-string">'Invalid url "{0}", missing path prefix "{1}".'</span>, url,
                    appBaseNoFile);
            }
            parseAppUrl(pathUrl, <span class="hljs-keyword">this</span>);
            <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.$$path) {
                <span class="hljs-keyword">this</span>.$$path = <span class="hljs-string">'/'</span>;
            }
            <span class="hljs-keyword">this</span>.$$compose();
        };
        <span class="hljs-keyword">this</span>.$$compose = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> search = toKeyValue(<span class="hljs-keyword">this</span>.$$search),
                hash = <span class="hljs-keyword">this</span>.$$hash ? <span class="hljs-string">'#'</span> + encodeUriSegment(<span class="hljs-keyword">this</span>.$$hash) : <span class="hljs-string">''</span>;
            <span class="hljs-keyword">this</span>.$$url = encodePath(<span class="hljs-keyword">this</span>.$$path) + (search ? <span class="hljs-string">'?'</span> + search : <span class="hljs-string">''</span>) + hash;
            <span class="hljs-keyword">this</span>.$$absUrl = appBaseNoFile + <span class="hljs-keyword">this</span>.$$url.substr(<span class="hljs-number">1</span>);
        };
        <span class="hljs-keyword">this</span>.$$parseLinkUrl = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">url, relHref</span>) </span>{
            <span class="hljs-keyword">if</span> (relHref &amp;&amp; relHref[<span class="hljs-number">0</span>] === <span class="hljs-string">'#'</span>) {
                <span class="hljs-keyword">this</span>.hash(relHref.slice(<span class="hljs-number">1</span>));
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
            <span class="hljs-keyword">var</span> appUrl, prevAppUrl;
            <span class="hljs-keyword">var</span> rewrittenUrl;
            <span class="hljs-keyword">if</span> (isDefined(appUrl = stripBaseUrl(appBase, url))) {
                prevAppUrl = appUrl;
                <span class="hljs-keyword">if</span> (isDefined(appUrl = stripBaseUrl(basePrefix, appUrl))) {
                    rewrittenUrl = appBaseNoFile + (stripBaseUrl(<span class="hljs-string">'/'</span>, appUrl) || appUrl);
                } <span class="hljs-keyword">else</span> {
                    rewrittenUrl = appBase + prevAppUrl;
                }
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isDefined(appUrl = stripBaseUrl(appBaseNoFile, url))) {
                rewrittenUrl = appBaseNoFile + appUrl;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (appBaseNoFile == url + <span class="hljs-string">'/'</span>) {
                rewrittenUrl = appBaseNoFile;
            }
            <span class="hljs-keyword">if</span> (rewrittenUrl) {
                <span class="hljs-keyword">this</span>.$$parse(rewrittenUrl);
            }
            <span class="hljs-keyword">return</span> !!rewrittenUrl;
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">LocationHashbangUrl</span>(<span class="hljs-params">appBase, appBaseNoFile, hashPrefix</span>) </span>{
        parseAbsoluteUrl(appBase, <span class="hljs-keyword">this</span>);
        <span class="hljs-keyword">this</span>.$$parse = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">url</span>) </span>{
            <span class="hljs-keyword">var</span> withoutBaseUrl = stripBaseUrl(appBase, url) || stripBaseUrl(appBaseNoFile, url);
            <span class="hljs-keyword">var</span> withoutHashUrl;
            <span class="hljs-keyword">if</span> (!isUndefined(withoutBaseUrl) &amp;&amp; withoutBaseUrl.charAt(<span class="hljs-number">0</span>) === <span class="hljs-string">'#'</span>) {
                withoutHashUrl = stripBaseUrl(hashPrefix, withoutBaseUrl);
                <span class="hljs-keyword">if</span> (isUndefined(withoutHashUrl)) {
                    withoutHashUrl = withoutBaseUrl;
                }
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.$$html5) {
                    withoutHashUrl = withoutBaseUrl;
                } <span class="hljs-keyword">else</span> {
                    withoutHashUrl = <span class="hljs-string">''</span>;
                    <span class="hljs-keyword">if</span> (isUndefined(withoutBaseUrl)) {
                        appBase = url;
                        <span class="hljs-keyword">this</span>.replace();
                    }
                }
            }
            parseAppUrl(withoutHashUrl, <span class="hljs-keyword">this</span>);
            <span class="hljs-keyword">this</span>.$$path = removeWindowsDriveName(<span class="hljs-keyword">this</span>.$$path, withoutHashUrl, appBase);
            <span class="hljs-keyword">this</span>.$$compose();

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeWindowsDriveName</span>(<span class="hljs-params">path, url, base</span>) </span>{
                <span class="hljs-keyword">var</span> windowsFilePathExp = <span class="hljs-regexp">/^\/[A-Z]:(\/.*)/</span>;
                <span class="hljs-keyword">var</span> firstPathSegmentMatch;
                <span class="hljs-keyword">if</span> (startsWith(url, base)) {
                    url = url.replace(base, <span class="hljs-string">''</span>);
                }
                <span class="hljs-keyword">if</span> (windowsFilePathExp.exec(url)) {
                    <span class="hljs-keyword">return</span> path;
                }
                firstPathSegmentMatch = windowsFilePathExp.exec(path);
                <span class="hljs-keyword">return</span> firstPathSegmentMatch ? firstPathSegmentMatch[<span class="hljs-number">1</span>] : path;
            }
        };
        <span class="hljs-keyword">this</span>.$$compose = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> search = toKeyValue(<span class="hljs-keyword">this</span>.$$search),
                hash = <span class="hljs-keyword">this</span>.$$hash ? <span class="hljs-string">'#'</span> + encodeUriSegment(<span class="hljs-keyword">this</span>.$$hash) : <span class="hljs-string">''</span>;
            <span class="hljs-keyword">this</span>.$$url = encodePath(<span class="hljs-keyword">this</span>.$$path) + (search ? <span class="hljs-string">'?'</span> + search : <span class="hljs-string">''</span>) + hash;
            <span class="hljs-keyword">this</span>.$$absUrl = appBase + (<span class="hljs-keyword">this</span>.$$url ? hashPrefix + <span class="hljs-keyword">this</span>.$$url : <span class="hljs-string">''</span>);
        };
        <span class="hljs-keyword">this</span>.$$parseLinkUrl = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">url, relHref</span>) </span>{
            <span class="hljs-keyword">if</span> (stripHash(appBase) == stripHash(url)) {
                <span class="hljs-keyword">this</span>.$$parse(url);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">LocationHashbangInHtml5Url</span>(<span class="hljs-params">appBase, appBaseNoFile, hashPrefix</span>) </span>{
        <span class="hljs-keyword">this</span>.$$html5 = <span class="hljs-literal">true</span>;
        LocationHashbangUrl.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
        <span class="hljs-keyword">this</span>.$$parseLinkUrl = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">url, relHref</span>) </span>{
            <span class="hljs-keyword">if</span> (relHref &amp;&amp; relHref[<span class="hljs-number">0</span>] === <span class="hljs-string">'#'</span>) {
                <span class="hljs-keyword">this</span>.hash(relHref.slice(<span class="hljs-number">1</span>));
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
            <span class="hljs-keyword">var</span> rewrittenUrl;
            <span class="hljs-keyword">var</span> appUrl;
            <span class="hljs-keyword">if</span> (appBase == stripHash(url)) {
                rewrittenUrl = url;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((appUrl = stripBaseUrl(appBaseNoFile, url))) {
                rewrittenUrl = appBase + hashPrefix + appUrl;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (appBaseNoFile === url + <span class="hljs-string">'/'</span>) {
                rewrittenUrl = appBaseNoFile;
            }
            <span class="hljs-keyword">if</span> (rewrittenUrl) {
                <span class="hljs-keyword">this</span>.$$parse(rewrittenUrl);
            }
            <span class="hljs-keyword">return</span> !!rewrittenUrl;
        };
        <span class="hljs-keyword">this</span>.$$compose = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> search = toKeyValue(<span class="hljs-keyword">this</span>.$$search),
                hash = <span class="hljs-keyword">this</span>.$$hash ? <span class="hljs-string">'#'</span> + encodeUriSegment(<span class="hljs-keyword">this</span>.$$hash) : <span class="hljs-string">''</span>;
            <span class="hljs-keyword">this</span>.$$url = encodePath(<span class="hljs-keyword">this</span>.$$path) + (search ? <span class="hljs-string">'?'</span> + search : <span class="hljs-string">''</span>) + hash;
            <span class="hljs-keyword">this</span>.$$absUrl = appBase + hashPrefix + <span class="hljs-keyword">this</span>.$$url;
        };
    }
    <span class="hljs-keyword">var</span> locationPrototype = {
        <span class="hljs-attr">$$absUrl</span>: <span class="hljs-string">''</span>,
        <span class="hljs-attr">$$html5</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">$$replace</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">absUrl</span>: locationGetter(<span class="hljs-string">'$$absUrl'</span>),
        <span class="hljs-attr">url</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">url</span>) </span>{
            <span class="hljs-keyword">if</span> (isUndefined(url)) {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.$$url;
            }
            <span class="hljs-keyword">var</span> match = PATH_MATCH.exec(url);
            <span class="hljs-keyword">if</span> (match[<span class="hljs-number">1</span>] || url === <span class="hljs-string">''</span>) <span class="hljs-keyword">this</span>.path(<span class="hljs-built_in">decodeURIComponent</span>(match[<span class="hljs-number">1</span>]));
            <span class="hljs-keyword">if</span> (match[<span class="hljs-number">2</span>] || match[<span class="hljs-number">1</span>] || url === <span class="hljs-string">''</span>) <span class="hljs-keyword">this</span>.search(match[<span class="hljs-number">3</span>] || <span class="hljs-string">''</span>);
            <span class="hljs-keyword">this</span>.hash(match[<span class="hljs-number">5</span>] || <span class="hljs-string">''</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        },
        <span class="hljs-attr">protocol</span>: locationGetter(<span class="hljs-string">'$$protocol'</span>),
        <span class="hljs-attr">host</span>: locationGetter(<span class="hljs-string">'$$host'</span>),
        <span class="hljs-attr">port</span>: locationGetter(<span class="hljs-string">'$$port'</span>),
        <span class="hljs-attr">path</span>: locationGetterSetter(<span class="hljs-string">'$$path'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">path</span>) </span>{
            path = path !== <span class="hljs-literal">null</span> ? path.toString() : <span class="hljs-string">''</span>;
            <span class="hljs-keyword">return</span> path.charAt(<span class="hljs-number">0</span>) == <span class="hljs-string">'/'</span> ? path : <span class="hljs-string">'/'</span> + path;
        }),
        <span class="hljs-attr">search</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">search, paramValue</span>) </span>{
            <span class="hljs-keyword">switch</span> (<span class="hljs-built_in">arguments</span>.length) {
                <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.$$search;
                <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
                    <span class="hljs-keyword">if</span> (isString(search) || isNumber(search)) {
                        search = search.toString();
                        <span class="hljs-keyword">this</span>.$$search = parseKeyValue(search);
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isObject(search)) {
                        search = copy(search, {});
                        forEach(search, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, key</span>) </span>{
                            <span class="hljs-keyword">if</span> (value == <span class="hljs-literal">null</span>) <span class="hljs-keyword">delete</span> search[key];
                        });
                        <span class="hljs-keyword">this</span>.$$search = search;
                    } <span class="hljs-keyword">else</span> {
                        <span class="hljs-keyword">throw</span> $locationMinErr(<span class="hljs-string">'isrcharg'</span>,
                            <span class="hljs-string">'The first argument of the `$location#search()` call must be a string or an object.'</span>);
                    }
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">default</span>:
                    <span class="hljs-keyword">if</span> (isUndefined(paramValue) || paramValue === <span class="hljs-literal">null</span>) {
                        <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.$$search[search];
                    } <span class="hljs-keyword">else</span> {
                        <span class="hljs-keyword">this</span>.$$search[search] = paramValue;
                    }
            }
            <span class="hljs-keyword">this</span>.$$compose();
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        },
        <span class="hljs-attr">hash</span>: locationGetterSetter(<span class="hljs-string">'$$hash'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">hash</span>) </span>{
            <span class="hljs-keyword">return</span> hash !== <span class="hljs-literal">null</span> ? hash.toString() : <span class="hljs-string">''</span>;
        }),
        <span class="hljs-attr">replace</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">this</span>.$$replace = <span class="hljs-literal">true</span>;
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        }
    };
    forEach([LocationHashbangInHtml5Url, LocationHashbangUrl, LocationHtml5Url], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">Location</span>) </span>{
        Location.prototype = <span class="hljs-built_in">Object</span>.create(locationPrototype);
        Location.prototype.state = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">state</span>) </span>{
            <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">arguments</span>.length) {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.$$state;
            }
            <span class="hljs-keyword">if</span> (Location !== LocationHtml5Url || !<span class="hljs-keyword">this</span>.$$html5) {
                <span class="hljs-keyword">throw</span> $locationMinErr(<span class="hljs-string">'nostate'</span>, <span class="hljs-string">'History API state support is available only '</span> +
                    <span class="hljs-string">'in HTML5 mode and only in browsers supporting HTML5 History API'</span>);
            }
            <span class="hljs-keyword">this</span>.$$state = isUndefined(state) ? <span class="hljs-literal">null</span> : state;
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        };
    });

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">locationGetter</span>(<span class="hljs-params">property</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>[property];
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">locationGetterSetter</span>(<span class="hljs-params">property, preprocess</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
            <span class="hljs-keyword">if</span> (isUndefined(value)) {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>[property];
            }
            <span class="hljs-keyword">this</span>[property] = preprocess(value);
            <span class="hljs-keyword">this</span>.$$compose();
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$LocationProvider</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> hashPrefix = <span class="hljs-string">''</span>,
            html5Mode = {
                <span class="hljs-attr">enabled</span>: <span class="hljs-literal">false</span>,
                <span class="hljs-attr">requireBase</span>: <span class="hljs-literal">true</span>,
                <span class="hljs-attr">rewriteLinks</span>: <span class="hljs-literal">true</span>
            };
        <span class="hljs-keyword">this</span>.hashPrefix = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">prefix</span>) </span>{
            <span class="hljs-keyword">if</span> (isDefined(prefix)) {
                hashPrefix = prefix;
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> hashPrefix;
            }
        };
        <span class="hljs-keyword">this</span>.html5Mode = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">mode</span>) </span>{
            <span class="hljs-keyword">if</span> (isBoolean(mode)) {
                html5Mode.enabled = mode;
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isObject(mode)) {
                <span class="hljs-keyword">if</span> (isBoolean(mode.enabled)) {
                    html5Mode.enabled = mode.enabled;
                }
                <span class="hljs-keyword">if</span> (isBoolean(mode.requireBase)) {
                    html5Mode.requireBase = mode.requireBase;
                }
                <span class="hljs-keyword">if</span> (isBoolean(mode.rewriteLinks)) {
                    html5Mode.rewriteLinks = mode.rewriteLinks;
                }
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> html5Mode;
            }
        };
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$rootScope'</span>, <span class="hljs-string">'$browser'</span>, <span class="hljs-string">'$sniffer'</span>, <span class="hljs-string">'$rootElement'</span>, <span class="hljs-string">'$window'</span>,
            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$rootScope, $browser, $sniffer, $rootElement, $window</span>) </span>{
                <span class="hljs-keyword">var</span> $location,
                    LocationMode,
                    baseHref = $browser.baseHref(),
                    initialUrl = $browser.url(),
                    appBase;
                <span class="hljs-keyword">if</span> (html5Mode.enabled) {
                    <span class="hljs-keyword">if</span> (!baseHref &amp;&amp; html5Mode.requireBase) {
                        <span class="hljs-keyword">throw</span> $locationMinErr(<span class="hljs-string">'nobase'</span>,
                            <span class="hljs-string">"$location in HTML5 mode requires a &lt;base&gt; tag to be present!"</span>);
                    }
                    appBase = serverBase(initialUrl) + (baseHref || <span class="hljs-string">'/'</span>);
                    LocationMode = $sniffer.history ? LocationHtml5Url : LocationHashbangInHtml5Url;
                } <span class="hljs-keyword">else</span> {
                    appBase = stripHash(initialUrl);
                    LocationMode = LocationHashbangUrl;
                }
                <span class="hljs-keyword">var</span> appBaseNoFile = stripFile(appBase);
                $location = <span class="hljs-keyword">new</span> LocationMode(appBase, appBaseNoFile, <span class="hljs-string">'#'</span> + hashPrefix);
                $location.$$parseLinkUrl(initialUrl, initialUrl);
                $location.$$state = $browser.state();
                <span class="hljs-keyword">var</span> IGNORE_URI_REGEXP = <span class="hljs-regexp">/^\s*(javascript|mailto):/i</span>;

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setBrowserUrlWithFallback</span>(<span class="hljs-params">url, replace, state</span>) </span>{
                    <span class="hljs-keyword">var</span> oldUrl = $location.url();
                    <span class="hljs-keyword">var</span> oldState = $location.$$state;
                    <span class="hljs-keyword">try</span> {
                        $browser.url(url, replace, state);
                        $location.$$state = $browser.state();
                    } <span class="hljs-keyword">catch</span> (e) {
                        $location.url(oldUrl);
                        $location.$$state = oldState;
                        <span class="hljs-keyword">throw</span> e;
                    }
                }
                $rootElement.on(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
                    <span class="hljs-keyword">if</span> (!html5Mode.rewriteLinks || event.ctrlKey || event.metaKey || event.shiftKey || event.which == <span class="hljs-number">2</span> || event.button == <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span>;
                    <span class="hljs-keyword">var</span> elm = jqLite(event.target);
                    <span class="hljs-keyword">while</span> (nodeName_(elm[<span class="hljs-number">0</span>]) !== <span class="hljs-string">'a'</span>) {
                        <span class="hljs-keyword">if</span> (elm[<span class="hljs-number">0</span>] === $rootElement[<span class="hljs-number">0</span>] || !(elm = elm.parent())[<span class="hljs-number">0</span>]) <span class="hljs-keyword">return</span>;
                    }
                    <span class="hljs-keyword">var</span> absHref = elm.prop(<span class="hljs-string">'href'</span>);
                    <span class="hljs-keyword">var</span> relHref = elm.attr(<span class="hljs-string">'href'</span>) || elm.attr(<span class="hljs-string">'xlink:href'</span>);
                    <span class="hljs-keyword">if</span> (isObject(absHref) &amp;&amp; absHref.toString() === <span class="hljs-string">'[object SVGAnimatedString]'</span>) {
                        absHref = urlResolve(absHref.animVal).href;
                    }
                    <span class="hljs-keyword">if</span> (IGNORE_URI_REGEXP.test(absHref)) <span class="hljs-keyword">return</span>;
                    <span class="hljs-keyword">if</span> (absHref &amp;&amp; !elm.attr(<span class="hljs-string">'target'</span>) &amp;&amp; !event.isDefaultPrevented()) {
                        <span class="hljs-keyword">if</span> ($location.$$parseLinkUrl(absHref, relHref)) {
                            event.preventDefault();
                            <span class="hljs-keyword">if</span> ($location.absUrl() != $browser.url()) {
                                $rootScope.$apply();
                                $<span class="hljs-built_in">window</span>.angular[<span class="hljs-string">'ff-684208-preventDefault'</span>] = <span class="hljs-literal">true</span>;
                            }
                        }
                    }
                });
                <span class="hljs-keyword">if</span> (trimEmptyHash($location.absUrl()) != trimEmptyHash(initialUrl)) {
                    $browser.url($location.absUrl(), <span class="hljs-literal">true</span>);
                }
                <span class="hljs-keyword">var</span> initializing = <span class="hljs-literal">true</span>;
                $browser.onUrlChange(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">newUrl, newState</span>) </span>{
                    <span class="hljs-keyword">if</span> (isUndefined(stripBaseUrl(appBaseNoFile, newUrl))) {
                        $<span class="hljs-built_in">window</span>.location.href = newUrl;
                        <span class="hljs-keyword">return</span>;
                    }
                    $rootScope.$evalAsync(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">var</span> oldUrl = $location.absUrl();
                        <span class="hljs-keyword">var</span> oldState = $location.$$state;
                        <span class="hljs-keyword">var</span> defaultPrevented;
                        newUrl = trimEmptyHash(newUrl);
                        $location.$$parse(newUrl);
                        $location.$$state = newState;
                        defaultPrevented = $rootScope.$broadcast(<span class="hljs-string">'$locationChangeStart'</span>, newUrl, oldUrl,
                            newState, oldState).defaultPrevented;
                        <span class="hljs-keyword">if</span> ($location.absUrl() !== newUrl) <span class="hljs-keyword">return</span>;
                        <span class="hljs-keyword">if</span> (defaultPrevented) {
                            $location.$$parse(oldUrl);
                            $location.$$state = oldState;
                            setBrowserUrlWithFallback(oldUrl, <span class="hljs-literal">false</span>, oldState);
                        } <span class="hljs-keyword">else</span> {
                            initializing = <span class="hljs-literal">false</span>;
                            afterLocationChange(oldUrl, oldState);
                        }
                    });
                    <span class="hljs-keyword">if</span> (!$rootScope.$$phase) $rootScope.$digest();
                });
                $rootScope.$watch(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$locationWatch</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">var</span> oldUrl = trimEmptyHash($browser.url());
                    <span class="hljs-keyword">var</span> newUrl = trimEmptyHash($location.absUrl());
                    <span class="hljs-keyword">var</span> oldState = $browser.state();
                    <span class="hljs-keyword">var</span> currentReplace = $location.$$replace;
                    <span class="hljs-keyword">var</span> urlOrStateChanged = oldUrl !== newUrl ||
                        ($location.$$html5 &amp;&amp; $sniffer.history &amp;&amp; oldState !== $location.$$state);
                    <span class="hljs-keyword">if</span> (initializing || urlOrStateChanged) {
                        initializing = <span class="hljs-literal">false</span>;
                        $rootScope.$evalAsync(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            <span class="hljs-keyword">var</span> newUrl = $location.absUrl();
                            <span class="hljs-keyword">var</span> defaultPrevented = $rootScope.$broadcast(<span class="hljs-string">'$locationChangeStart'</span>, newUrl, oldUrl,
                                $location.$$state, oldState).defaultPrevented;
                            <span class="hljs-keyword">if</span> ($location.absUrl() !== newUrl) <span class="hljs-keyword">return</span>;
                            <span class="hljs-keyword">if</span> (defaultPrevented) {
                                $location.$$parse(oldUrl);
                                $location.$$state = oldState;
                            } <span class="hljs-keyword">else</span> {
                                <span class="hljs-keyword">if</span> (urlOrStateChanged) {
                                    setBrowserUrlWithFallback(newUrl, currentReplace,
                                        oldState === $location.$$state ? <span class="hljs-literal">null</span> : $location.$$state);
                                }
                                afterLocationChange(oldUrl, oldState);
                            }
                        });
                    }
                    $location.$$replace = <span class="hljs-literal">false</span>;
                });
                <span class="hljs-keyword">return</span> $location;

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">afterLocationChange</span>(<span class="hljs-params">oldUrl, oldState</span>) </span>{
                    $rootScope.$broadcast(<span class="hljs-string">'$locationChangeSuccess'</span>, $location.absUrl(), oldUrl,
                        $location.$$state, oldState);
                }
            }
        ];
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$LogProvider</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> debug = <span class="hljs-literal">true</span>,
            self = <span class="hljs-keyword">this</span>;
        <span class="hljs-keyword">this</span>.debugEnabled = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">flag</span>) </span>{
            <span class="hljs-keyword">if</span> (isDefined(flag)) {
                debug = flag;
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> debug;
            }
        };
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$window'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$window</span>) </span>{
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">log</span>: consoleLog(<span class="hljs-string">'log'</span>),
                <span class="hljs-attr">info</span>: consoleLog(<span class="hljs-string">'info'</span>),
                <span class="hljs-attr">warn</span>: consoleLog(<span class="hljs-string">'warn'</span>),
                <span class="hljs-attr">error</span>: consoleLog(<span class="hljs-string">'error'</span>),
                <span class="hljs-attr">debug</span>: (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">var</span> fn = consoleLog(<span class="hljs-string">'debug'</span>);
                    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">if</span> (debug) {
                            fn.apply(self, <span class="hljs-built_in">arguments</span>);
                        }
                    };
                }())
            };

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">formatError</span>(<span class="hljs-params">arg</span>) </span>{
                <span class="hljs-keyword">if</span> (arg <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Error</span>) {
                    <span class="hljs-keyword">if</span> (arg.stack) {
                        arg = (arg.message &amp;&amp; arg.stack.indexOf(arg.message) === <span class="hljs-number">-1</span>) ?
                            <span class="hljs-string">'Error: '</span> + arg.message + <span class="hljs-string">'\n'</span> + arg.stack :
                            arg.stack;
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (arg.sourceURL) {
                        arg = arg.message + <span class="hljs-string">'\n'</span> + arg.sourceURL + <span class="hljs-string">':'</span> + arg.line;
                    }
                }
                <span class="hljs-keyword">return</span> arg;
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">consoleLog</span>(<span class="hljs-params">type</span>) </span>{
                <span class="hljs-keyword">var</span> <span class="hljs-built_in">console</span> = $<span class="hljs-built_in">window</span>.console || {},
                    logFn = <span class="hljs-built_in">console</span>[type] || <span class="hljs-built_in">console</span>.log || noop,
                    hasApply = <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">try</span> {
                    hasApply = !!logFn.apply;
                } <span class="hljs-keyword">catch</span> (e) {}
                <span class="hljs-keyword">if</span> (hasApply) {
                    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">var</span> args = [];
                        forEach(<span class="hljs-built_in">arguments</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">arg</span>) </span>{
                            args.push(formatError(arg));
                        });
                        <span class="hljs-keyword">return</span> logFn.apply(<span class="hljs-built_in">console</span>, args);
                    };
                }
                <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">arg1, arg2</span>) </span>{
                    logFn(arg1, arg2 == <span class="hljs-literal">null</span> ? <span class="hljs-string">''</span> : arg2);
                };
            }
        }];
    }
    <span class="hljs-keyword">var</span> $parseMinErr = minErr(<span class="hljs-string">'$parse'</span>);

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ensureSafeMemberName</span>(<span class="hljs-params">name, fullExpression</span>) </span>{
        <span class="hljs-keyword">if</span> (name === <span class="hljs-string">"__defineGetter__"</span> || name === <span class="hljs-string">"__defineSetter__"</span> ||
            name === <span class="hljs-string">"__lookupGetter__"</span> || name === <span class="hljs-string">"__lookupSetter__"</span> ||
            name === <span class="hljs-string">"__proto__"</span>) {
            <span class="hljs-keyword">throw</span> $parseMinErr(<span class="hljs-string">'isecfld'</span>,
                <span class="hljs-string">'Attempting to access a disallowed field in Angular expressions! '</span> +
                <span class="hljs-string">'Expression: {0}'</span>, fullExpression);
        }
        <span class="hljs-keyword">return</span> name;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getStringValue</span>(<span class="hljs-params">name</span>) </span>{
        <span class="hljs-keyword">return</span> name + <span class="hljs-string">''</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ensureSafeObject</span>(<span class="hljs-params">obj, fullExpression</span>) </span>{
        <span class="hljs-keyword">if</span> (obj) {
            <span class="hljs-keyword">if</span> (obj.constructor === obj) {
                <span class="hljs-keyword">throw</span> $parseMinErr(<span class="hljs-string">'isecfn'</span>,
                    <span class="hljs-string">'Referencing Function in Angular expressions is disallowed! Expression: {0}'</span>,
                    fullExpression);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (
                obj.window === obj) {
                <span class="hljs-keyword">throw</span> $parseMinErr(<span class="hljs-string">'isecwindow'</span>,
                    <span class="hljs-string">'Referencing the Window in Angular expressions is disallowed! Expression: {0}'</span>,
                    fullExpression);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (
                obj.children &amp;&amp; (obj.nodeName || (obj.prop &amp;&amp; obj.attr &amp;&amp; obj.find))) {
                <span class="hljs-keyword">throw</span> $parseMinErr(<span class="hljs-string">'isecdom'</span>,
                    <span class="hljs-string">'Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}'</span>,
                    fullExpression);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (
                obj === <span class="hljs-built_in">Object</span>) {
                <span class="hljs-keyword">throw</span> $parseMinErr(<span class="hljs-string">'isecobj'</span>,
                    <span class="hljs-string">'Referencing Object in Angular expressions is disallowed! Expression: {0}'</span>,
                    fullExpression);
            }
        }
        <span class="hljs-keyword">return</span> obj;
    }
    <span class="hljs-keyword">var</span> CALL = <span class="hljs-built_in">Function</span>.prototype.call;
    <span class="hljs-keyword">var</span> APPLY = <span class="hljs-built_in">Function</span>.prototype.apply;
    <span class="hljs-keyword">var</span> BIND = <span class="hljs-built_in">Function</span>.prototype.bind;

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ensureSafeFunction</span>(<span class="hljs-params">obj, fullExpression</span>) </span>{
        <span class="hljs-keyword">if</span> (obj) {
            <span class="hljs-keyword">if</span> (obj.constructor === obj) {
                <span class="hljs-keyword">throw</span> $parseMinErr(<span class="hljs-string">'isecfn'</span>,
                    <span class="hljs-string">'Referencing Function in Angular expressions is disallowed! Expression: {0}'</span>,
                    fullExpression);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (obj === CALL || obj === APPLY || obj === BIND) {
                <span class="hljs-keyword">throw</span> $parseMinErr(<span class="hljs-string">'isecff'</span>,
                    <span class="hljs-string">'Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}'</span>,
                    fullExpression);
            }
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ensureSafeAssignContext</span>(<span class="hljs-params">obj, fullExpression</span>) </span>{
        <span class="hljs-keyword">if</span> (obj) {
            <span class="hljs-keyword">if</span> (obj === (<span class="hljs-number">0</span>).constructor || obj === (<span class="hljs-literal">false</span>).constructor || obj === <span class="hljs-string">''</span>.constructor ||
                obj === {}.constructor || obj === [].constructor || obj === <span class="hljs-built_in">Function</span>.constructor) {
                <span class="hljs-keyword">throw</span> $parseMinErr(<span class="hljs-string">'isecaf'</span>,
                    <span class="hljs-string">'Assigning to a constructor is disallowed! Expression: {0}'</span>, fullExpression);
            }
        }
    }
    <span class="hljs-keyword">var</span> OPERATORS = createMap();
    forEach(<span class="hljs-string">'+ - * / % === !== == != &lt; &gt; &lt;= &gt;= &amp;&amp; || ! = |'</span>.split(<span class="hljs-string">' '</span>), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">operator</span>) </span>{
        OPERATORS[operator] = <span class="hljs-literal">true</span>;
    });
    <span class="hljs-keyword">var</span> ESCAPE = {
        <span class="hljs-string">"n"</span>: <span class="hljs-string">"\n"</span>,
        <span class="hljs-string">"f"</span>: <span class="hljs-string">"\f"</span>,
        <span class="hljs-string">"r"</span>: <span class="hljs-string">"\r"</span>,
        <span class="hljs-string">"t"</span>: <span class="hljs-string">"\t"</span>,
        <span class="hljs-string">"v"</span>: <span class="hljs-string">"\v"</span>,
        <span class="hljs-string">"'"</span>: <span class="hljs-string">"'"</span>,
        <span class="hljs-string">'"'</span>: <span class="hljs-string">'"'</span>
    };
    <span class="hljs-keyword">var</span> Lexer = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">options</span>) </span>{
        <span class="hljs-keyword">this</span>.options = options;
    };
    Lexer.prototype = {
        <span class="hljs-attr">constructor</span>: Lexer,
        <span class="hljs-attr">lex</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">text</span>) </span>{
            <span class="hljs-keyword">this</span>.text = text;
            <span class="hljs-keyword">this</span>.index = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">this</span>.tokens = [];
            <span class="hljs-keyword">while</span> (<span class="hljs-keyword">this</span>.index &lt; <span class="hljs-keyword">this</span>.text.length) {
                <span class="hljs-keyword">var</span> ch = <span class="hljs-keyword">this</span>.text.charAt(<span class="hljs-keyword">this</span>.index);
                <span class="hljs-keyword">if</span> (ch === <span class="hljs-string">'"'</span> || ch === <span class="hljs-string">"'"</span>) {
                    <span class="hljs-keyword">this</span>.readString(ch);
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isNumber(ch) || ch === <span class="hljs-string">'.'</span> &amp;&amp; <span class="hljs-keyword">this</span>.isNumber(<span class="hljs-keyword">this</span>.peek())) {
                    <span class="hljs-keyword">this</span>.readNumber();
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isIdentifierStart(<span class="hljs-keyword">this</span>.peekMultichar())) {
                    <span class="hljs-keyword">this</span>.readIdent();
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.is(ch, <span class="hljs-string">'(){}[].,;:?'</span>)) {
                    <span class="hljs-keyword">this</span>.tokens.push({
                        <span class="hljs-attr">index</span>: <span class="hljs-keyword">this</span>.index,
                        <span class="hljs-attr">text</span>: ch
                    });
                    <span class="hljs-keyword">this</span>.index++;
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isWhitespace(ch)) {
                    <span class="hljs-keyword">this</span>.index++;
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">var</span> ch2 = ch + <span class="hljs-keyword">this</span>.peek();
                    <span class="hljs-keyword">var</span> ch3 = ch2 + <span class="hljs-keyword">this</span>.peek(<span class="hljs-number">2</span>);
                    <span class="hljs-keyword">var</span> op1 = OPERATORS[ch];
                    <span class="hljs-keyword">var</span> op2 = OPERATORS[ch2];
                    <span class="hljs-keyword">var</span> op3 = OPERATORS[ch3];
                    <span class="hljs-keyword">if</span> (op1 || op2 || op3) {
                        <span class="hljs-keyword">var</span> token = op3 ? ch3 : (op2 ? ch2 : ch);
                        <span class="hljs-keyword">this</span>.tokens.push({
                            <span class="hljs-attr">index</span>: <span class="hljs-keyword">this</span>.index,
                            <span class="hljs-attr">text</span>: token,
                            <span class="hljs-attr">operator</span>: <span class="hljs-literal">true</span>
                        });
                        <span class="hljs-keyword">this</span>.index += token.length;
                    } <span class="hljs-keyword">else</span> {
                        <span class="hljs-keyword">this</span>.throwError(<span class="hljs-string">'Unexpected next character '</span>, <span class="hljs-keyword">this</span>.index, <span class="hljs-keyword">this</span>.index + <span class="hljs-number">1</span>);
                    }
                }
            }
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.tokens;
        },
        <span class="hljs-attr">is</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ch, chars</span>) </span>{
            <span class="hljs-keyword">return</span> chars.indexOf(ch) !== <span class="hljs-number">-1</span>;
        },
        <span class="hljs-attr">peek</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">i</span>) </span>{
            <span class="hljs-keyword">var</span> num = i || <span class="hljs-number">1</span>;
            <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>.index + num &lt; <span class="hljs-keyword">this</span>.text.length) ? <span class="hljs-keyword">this</span>.text.charAt(<span class="hljs-keyword">this</span>.index + num) : <span class="hljs-literal">false</span>;
        },
        <span class="hljs-attr">isNumber</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ch</span>) </span>{
            <span class="hljs-keyword">return</span> (<span class="hljs-string">'0'</span> &lt;= ch &amp;&amp; ch &lt;= <span class="hljs-string">'9'</span>) &amp;&amp; <span class="hljs-keyword">typeof</span> ch === <span class="hljs-string">"string"</span>;
        },
        <span class="hljs-attr">isWhitespace</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ch</span>) </span>{
            <span class="hljs-keyword">return</span> (ch === <span class="hljs-string">' '</span> || ch === <span class="hljs-string">'\r'</span> || ch === <span class="hljs-string">'\t'</span> ||
                ch === <span class="hljs-string">'\n'</span> || ch === <span class="hljs-string">'\v'</span> || ch === <span class="hljs-string">'\u00A0'</span>);
        },
        <span class="hljs-attr">isIdentifierStart</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ch</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.options.isIdentifierStart ?
                <span class="hljs-keyword">this</span>.options.isIdentifierStart(ch, <span class="hljs-keyword">this</span>.codePointAt(ch)) :
                <span class="hljs-keyword">this</span>.isValidIdentifierStart(ch);
        },
        <span class="hljs-attr">isValidIdentifierStart</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ch</span>) </span>{
            <span class="hljs-keyword">return</span> (<span class="hljs-string">'a'</span> &lt;= ch &amp;&amp; ch &lt;= <span class="hljs-string">'z'</span> ||
                <span class="hljs-string">'A'</span> &lt;= ch &amp;&amp; ch &lt;= <span class="hljs-string">'Z'</span> ||
                <span class="hljs-string">'_'</span> === ch || ch === <span class="hljs-string">'$'</span>);
        },
        <span class="hljs-attr">isIdentifierContinue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ch</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.options.isIdentifierContinue ?
                <span class="hljs-keyword">this</span>.options.isIdentifierContinue(ch, <span class="hljs-keyword">this</span>.codePointAt(ch)) :
                <span class="hljs-keyword">this</span>.isValidIdentifierContinue(ch);
        },
        <span class="hljs-attr">isValidIdentifierContinue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ch, cp</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.isValidIdentifierStart(ch, cp) || <span class="hljs-keyword">this</span>.isNumber(ch);
        },
        <span class="hljs-attr">codePointAt</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ch</span>) </span>{
            <span class="hljs-keyword">if</span> (ch.length === <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> ch.charCodeAt(<span class="hljs-number">0</span>);
            <span class="hljs-keyword">return</span> (ch.charCodeAt(<span class="hljs-number">0</span>) &lt;&lt; <span class="hljs-number">10</span>) + ch.charCodeAt(<span class="hljs-number">1</span>) - <span class="hljs-number">0x35FDC00</span>;
        },
        <span class="hljs-attr">peekMultichar</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> ch = <span class="hljs-keyword">this</span>.text.charAt(<span class="hljs-keyword">this</span>.index);
            <span class="hljs-keyword">var</span> peek = <span class="hljs-keyword">this</span>.peek();
            <span class="hljs-keyword">if</span> (!peek) {
                <span class="hljs-keyword">return</span> ch;
            }
            <span class="hljs-keyword">var</span> cp1 = ch.charCodeAt(<span class="hljs-number">0</span>);
            <span class="hljs-keyword">var</span> cp2 = peek.charCodeAt(<span class="hljs-number">0</span>);
            <span class="hljs-keyword">if</span> (cp1 &gt;= <span class="hljs-number">0xD800</span> &amp;&amp; cp1 &lt;= <span class="hljs-number">0xDBFF</span> &amp;&amp; cp2 &gt;= <span class="hljs-number">0xDC00</span> &amp;&amp; cp2 &lt;= <span class="hljs-number">0xDFFF</span>) {
                <span class="hljs-keyword">return</span> ch + peek;
            }
            <span class="hljs-keyword">return</span> ch;
        },
        <span class="hljs-attr">isExpOperator</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ch</span>) </span>{
            <span class="hljs-keyword">return</span> (ch === <span class="hljs-string">'-'</span> || ch === <span class="hljs-string">'+'</span> || <span class="hljs-keyword">this</span>.isNumber(ch));
        },
        <span class="hljs-attr">throwError</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error, start, end</span>) </span>{
            end = end || <span class="hljs-keyword">this</span>.index;
            <span class="hljs-keyword">var</span> colStr = (isDefined(start) ?
                <span class="hljs-string">'s '</span> + start + <span class="hljs-string">'-'</span> + <span class="hljs-keyword">this</span>.index + <span class="hljs-string">' ['</span> + <span class="hljs-keyword">this</span>.text.substring(start, end) + <span class="hljs-string">']'</span> :
                <span class="hljs-string">' '</span> + end);
            <span class="hljs-keyword">throw</span> $parseMinErr(<span class="hljs-string">'lexerr'</span>, <span class="hljs-string">'Lexer Error: {0} at column{1} in expression [{2}].'</span>,
                error, colStr, <span class="hljs-keyword">this</span>.text);
        },
        <span class="hljs-attr">readNumber</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> number = <span class="hljs-string">''</span>;
            <span class="hljs-keyword">var</span> start = <span class="hljs-keyword">this</span>.index;
            <span class="hljs-keyword">while</span> (<span class="hljs-keyword">this</span>.index &lt; <span class="hljs-keyword">this</span>.text.length) {
                <span class="hljs-keyword">var</span> ch = lowercase(<span class="hljs-keyword">this</span>.text.charAt(<span class="hljs-keyword">this</span>.index));
                <span class="hljs-keyword">if</span> (ch == <span class="hljs-string">'.'</span> || <span class="hljs-keyword">this</span>.isNumber(ch)) {
                    number += ch;
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">var</span> peekCh = <span class="hljs-keyword">this</span>.peek();
                    <span class="hljs-keyword">if</span> (ch == <span class="hljs-string">'e'</span> &amp;&amp; <span class="hljs-keyword">this</span>.isExpOperator(peekCh)) {
                        number += ch;
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isExpOperator(ch) &amp;&amp;
                        peekCh &amp;&amp; <span class="hljs-keyword">this</span>.isNumber(peekCh) &amp;&amp;
                        number.charAt(number.length - <span class="hljs-number">1</span>) == <span class="hljs-string">'e'</span>) {
                        number += ch;
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isExpOperator(ch) &amp;&amp;
                        (!peekCh || !<span class="hljs-keyword">this</span>.isNumber(peekCh)) &amp;&amp;
                        number.charAt(number.length - <span class="hljs-number">1</span>) == <span class="hljs-string">'e'</span>) {
                        <span class="hljs-keyword">this</span>.throwError(<span class="hljs-string">'Invalid exponent'</span>);
                    } <span class="hljs-keyword">else</span> {
                        <span class="hljs-keyword">break</span>;
                    }
                }
                <span class="hljs-keyword">this</span>.index++;
            }
            <span class="hljs-keyword">this</span>.tokens.push({
                <span class="hljs-attr">index</span>: start,
                <span class="hljs-attr">text</span>: number,
                <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
                <span class="hljs-attr">value</span>: <span class="hljs-built_in">Number</span>(number)
            });
        },
        <span class="hljs-attr">readIdent</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> start = <span class="hljs-keyword">this</span>.index;
            <span class="hljs-keyword">this</span>.index += <span class="hljs-keyword">this</span>.peekMultichar().length;
            <span class="hljs-keyword">while</span> (<span class="hljs-keyword">this</span>.index &lt; <span class="hljs-keyword">this</span>.text.length) {
                <span class="hljs-keyword">var</span> ch = <span class="hljs-keyword">this</span>.peekMultichar();
                <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.isIdentifierContinue(ch)) {
                    <span class="hljs-keyword">break</span>;
                }
                <span class="hljs-keyword">this</span>.index += ch.length;
            }
            <span class="hljs-keyword">this</span>.tokens.push({
                <span class="hljs-attr">index</span>: start,
                <span class="hljs-attr">text</span>: <span class="hljs-keyword">this</span>.text.slice(start, <span class="hljs-keyword">this</span>.index),
                <span class="hljs-attr">identifier</span>: <span class="hljs-literal">true</span>
            });
        },
        <span class="hljs-attr">readString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">quote</span>) </span>{
            <span class="hljs-keyword">var</span> start = <span class="hljs-keyword">this</span>.index;
            <span class="hljs-keyword">this</span>.index++;
            <span class="hljs-keyword">var</span> string = <span class="hljs-string">''</span>;
            <span class="hljs-keyword">var</span> rawString = quote;
            <span class="hljs-keyword">var</span> <span class="hljs-built_in">escape</span> = <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">while</span> (<span class="hljs-keyword">this</span>.index &lt; <span class="hljs-keyword">this</span>.text.length) {
                <span class="hljs-keyword">var</span> ch = <span class="hljs-keyword">this</span>.text.charAt(<span class="hljs-keyword">this</span>.index);
                rawString += ch;
                <span class="hljs-keyword">if</span> (<span class="hljs-built_in">escape</span>) {
                    <span class="hljs-keyword">if</span> (ch === <span class="hljs-string">'u'</span>) {
                        <span class="hljs-keyword">var</span> hex = <span class="hljs-keyword">this</span>.text.substring(<span class="hljs-keyword">this</span>.index + <span class="hljs-number">1</span>, <span class="hljs-keyword">this</span>.index + <span class="hljs-number">5</span>);
                        <span class="hljs-keyword">if</span> (!hex.match(<span class="hljs-regexp">/[\da-f]{4}/i</span>)) {
                            <span class="hljs-keyword">this</span>.throwError(<span class="hljs-string">'Invalid unicode escape [\\u'</span> + hex + <span class="hljs-string">']'</span>);
                        }
                        <span class="hljs-keyword">this</span>.index += <span class="hljs-number">4</span>;
                        string += <span class="hljs-built_in">String</span>.fromCharCode(<span class="hljs-built_in">parseInt</span>(hex, <span class="hljs-number">16</span>));
                    } <span class="hljs-keyword">else</span> {
                        <span class="hljs-keyword">var</span> rep = ESCAPE[ch];
                        string = string + (rep || ch);
                    }
                    <span class="hljs-built_in">escape</span> = <span class="hljs-literal">false</span>;
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ch === <span class="hljs-string">'\\'</span>) {
                    <span class="hljs-built_in">escape</span> = <span class="hljs-literal">true</span>;
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ch === quote) {
                    <span class="hljs-keyword">this</span>.index++;
                    <span class="hljs-keyword">this</span>.tokens.push({
                        <span class="hljs-attr">index</span>: start,
                        <span class="hljs-attr">text</span>: rawString,
                        <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
                        <span class="hljs-attr">value</span>: string
                    });
                    <span class="hljs-keyword">return</span>;
                } <span class="hljs-keyword">else</span> {
                    string += ch;
                }
                <span class="hljs-keyword">this</span>.index++;
            }
            <span class="hljs-keyword">this</span>.throwError(<span class="hljs-string">'Unterminated quote'</span>, start);
        }
    };
    <span class="hljs-keyword">var</span> AST = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">lexer, options</span>) </span>{
        <span class="hljs-keyword">this</span>.lexer = lexer;
        <span class="hljs-keyword">this</span>.options = options;
    };
    AST.Program = <span class="hljs-string">'Program'</span>;
    AST.ExpressionStatement = <span class="hljs-string">'ExpressionStatement'</span>;
    AST.AssignmentExpression = <span class="hljs-string">'AssignmentExpression'</span>;
    AST.ConditionalExpression = <span class="hljs-string">'ConditionalExpression'</span>;
    AST.LogicalExpression = <span class="hljs-string">'LogicalExpression'</span>;
    AST.BinaryExpression = <span class="hljs-string">'BinaryExpression'</span>;
    AST.UnaryExpression = <span class="hljs-string">'UnaryExpression'</span>;
    AST.CallExpression = <span class="hljs-string">'CallExpression'</span>;
    AST.MemberExpression = <span class="hljs-string">'MemberExpression'</span>;
    AST.Identifier = <span class="hljs-string">'Identifier'</span>;
    AST.Literal = <span class="hljs-string">'Literal'</span>;
    AST.ArrayExpression = <span class="hljs-string">'ArrayExpression'</span>;
    AST.Property = <span class="hljs-string">'Property'</span>;
    AST.ObjectExpression = <span class="hljs-string">'ObjectExpression'</span>;
    AST.ThisExpression = <span class="hljs-string">'ThisExpression'</span>;
    AST.LocalsExpression = <span class="hljs-string">'LocalsExpression'</span>;
    AST.NGValueParameter = <span class="hljs-string">'NGValueParameter'</span>;
    AST.prototype = {
        <span class="hljs-attr">ast</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">text</span>) </span>{
            <span class="hljs-keyword">this</span>.text = text;
            <span class="hljs-keyword">this</span>.tokens = <span class="hljs-keyword">this</span>.lexer.lex(text);
            <span class="hljs-keyword">var</span> value = <span class="hljs-keyword">this</span>.program();
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.tokens.length !== <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">this</span>.throwError(<span class="hljs-string">'is an unexpected token'</span>, <span class="hljs-keyword">this</span>.tokens[<span class="hljs-number">0</span>]);
            }
            <span class="hljs-keyword">return</span> value;
        },
        <span class="hljs-attr">program</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> body = [];
            <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.tokens.length &gt; <span class="hljs-number">0</span> &amp;&amp; !<span class="hljs-keyword">this</span>.peek(<span class="hljs-string">'}'</span>, <span class="hljs-string">')'</span>, <span class="hljs-string">';'</span>, <span class="hljs-string">']'</span>))
                    body.push(<span class="hljs-keyword">this</span>.expressionStatement());
                <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.expect(<span class="hljs-string">';'</span>)) {
                    <span class="hljs-keyword">return</span> {
                        <span class="hljs-attr">type</span>: AST.Program,
                        <span class="hljs-attr">body</span>: body
                    };
                }
            }
        },
        <span class="hljs-attr">expressionStatement</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">type</span>: AST.ExpressionStatement,
                <span class="hljs-attr">expression</span>: <span class="hljs-keyword">this</span>.filterChain()
            };
        },
        <span class="hljs-attr">filterChain</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> left = <span class="hljs-keyword">this</span>.expression();
            <span class="hljs-keyword">var</span> token;
            <span class="hljs-keyword">while</span> ((token = <span class="hljs-keyword">this</span>.expect(<span class="hljs-string">'|'</span>))) {
                left = <span class="hljs-keyword">this</span>.filter(left);
            }
            <span class="hljs-keyword">return</span> left;
        },
        <span class="hljs-attr">expression</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.assignment();
        },
        <span class="hljs-attr">assignment</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">this</span>.ternary();
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.expect(<span class="hljs-string">'='</span>)) {
                result = {
                    <span class="hljs-attr">type</span>: AST.AssignmentExpression,
                    <span class="hljs-attr">left</span>: result,
                    <span class="hljs-attr">right</span>: <span class="hljs-keyword">this</span>.assignment(),
                    <span class="hljs-attr">operator</span>: <span class="hljs-string">'='</span>
                };
            }
            <span class="hljs-keyword">return</span> result;
        },
        <span class="hljs-attr">ternary</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> test = <span class="hljs-keyword">this</span>.logicalOR();
            <span class="hljs-keyword">var</span> alternate;
            <span class="hljs-keyword">var</span> consequent;
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.expect(<span class="hljs-string">'?'</span>)) {
                alternate = <span class="hljs-keyword">this</span>.expression();
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.consume(<span class="hljs-string">':'</span>)) {
                    consequent = <span class="hljs-keyword">this</span>.expression();
                    <span class="hljs-keyword">return</span> {
                        <span class="hljs-attr">type</span>: AST.ConditionalExpression,
                        <span class="hljs-attr">test</span>: test,
                        <span class="hljs-attr">alternate</span>: alternate,
                        <span class="hljs-attr">consequent</span>: consequent
                    };
                }
            }
            <span class="hljs-keyword">return</span> test;
        },
        <span class="hljs-attr">logicalOR</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> left = <span class="hljs-keyword">this</span>.logicalAND();
            <span class="hljs-keyword">while</span> (<span class="hljs-keyword">this</span>.expect(<span class="hljs-string">'||'</span>)) {
                left = {
                    <span class="hljs-attr">type</span>: AST.LogicalExpression,
                    <span class="hljs-attr">operator</span>: <span class="hljs-string">'||'</span>,
                    <span class="hljs-attr">left</span>: left,
                    <span class="hljs-attr">right</span>: <span class="hljs-keyword">this</span>.logicalAND()
                };
            }
            <span class="hljs-keyword">return</span> left;
        },
        <span class="hljs-attr">logicalAND</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> left = <span class="hljs-keyword">this</span>.equality();
            <span class="hljs-keyword">while</span> (<span class="hljs-keyword">this</span>.expect(<span class="hljs-string">'&amp;&amp;'</span>)) {
                left = {
                    <span class="hljs-attr">type</span>: AST.LogicalExpression,
                    <span class="hljs-attr">operator</span>: <span class="hljs-string">'&amp;&amp;'</span>,
                    <span class="hljs-attr">left</span>: left,
                    <span class="hljs-attr">right</span>: <span class="hljs-keyword">this</span>.equality()
                };
            }
            <span class="hljs-keyword">return</span> left;
        },
        <span class="hljs-attr">equality</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> left = <span class="hljs-keyword">this</span>.relational();
            <span class="hljs-keyword">var</span> token;
            <span class="hljs-keyword">while</span> ((token = <span class="hljs-keyword">this</span>.expect(<span class="hljs-string">'=='</span>, <span class="hljs-string">'!='</span>, <span class="hljs-string">'==='</span>, <span class="hljs-string">'!=='</span>))) {
                left = {
                    <span class="hljs-attr">type</span>: AST.BinaryExpression,
                    <span class="hljs-attr">operator</span>: token.text,
                    <span class="hljs-attr">left</span>: left,
                    <span class="hljs-attr">right</span>: <span class="hljs-keyword">this</span>.relational()
                };
            }
            <span class="hljs-keyword">return</span> left;
        },
        <span class="hljs-attr">relational</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> left = <span class="hljs-keyword">this</span>.additive();
            <span class="hljs-keyword">var</span> token;
            <span class="hljs-keyword">while</span> ((token = <span class="hljs-keyword">this</span>.expect(<span class="hljs-string">'&lt;'</span>, <span class="hljs-string">'&gt;'</span>, <span class="hljs-string">'&lt;='</span>, <span class="hljs-string">'&gt;='</span>))) {
                left = {
                    <span class="hljs-attr">type</span>: AST.BinaryExpression,
                    <span class="hljs-attr">operator</span>: token.text,
                    <span class="hljs-attr">left</span>: left,
                    <span class="hljs-attr">right</span>: <span class="hljs-keyword">this</span>.additive()
                };
            }
            <span class="hljs-keyword">return</span> left;
        },
        <span class="hljs-attr">additive</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> left = <span class="hljs-keyword">this</span>.multiplicative();
            <span class="hljs-keyword">var</span> token;
            <span class="hljs-keyword">while</span> ((token = <span class="hljs-keyword">this</span>.expect(<span class="hljs-string">'+'</span>, <span class="hljs-string">'-'</span>))) {
                left = {
                    <span class="hljs-attr">type</span>: AST.BinaryExpression,
                    <span class="hljs-attr">operator</span>: token.text,
                    <span class="hljs-attr">left</span>: left,
                    <span class="hljs-attr">right</span>: <span class="hljs-keyword">this</span>.multiplicative()
                };
            }
            <span class="hljs-keyword">return</span> left;
        },
        <span class="hljs-attr">multiplicative</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> left = <span class="hljs-keyword">this</span>.unary();
            <span class="hljs-keyword">var</span> token;
            <span class="hljs-keyword">while</span> ((token = <span class="hljs-keyword">this</span>.expect(<span class="hljs-string">'*'</span>, <span class="hljs-string">'/'</span>, <span class="hljs-string">'%'</span>))) {
                left = {
                    <span class="hljs-attr">type</span>: AST.BinaryExpression,
                    <span class="hljs-attr">operator</span>: token.text,
                    <span class="hljs-attr">left</span>: left,
                    <span class="hljs-attr">right</span>: <span class="hljs-keyword">this</span>.unary()
                };
            }
            <span class="hljs-keyword">return</span> left;
        },
        <span class="hljs-attr">unary</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> token;
            <span class="hljs-keyword">if</span> ((token = <span class="hljs-keyword">this</span>.expect(<span class="hljs-string">'+'</span>, <span class="hljs-string">'-'</span>, <span class="hljs-string">'!'</span>))) {
                <span class="hljs-keyword">return</span> {
                    <span class="hljs-attr">type</span>: AST.UnaryExpression,
                    <span class="hljs-attr">operator</span>: token.text,
                    <span class="hljs-attr">prefix</span>: <span class="hljs-literal">true</span>,
                    <span class="hljs-attr">argument</span>: <span class="hljs-keyword">this</span>.unary()
                };
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.primary();
            }
        },
        <span class="hljs-attr">primary</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> primary;
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.expect(<span class="hljs-string">'('</span>)) {
                primary = <span class="hljs-keyword">this</span>.filterChain();
                <span class="hljs-keyword">this</span>.consume(<span class="hljs-string">')'</span>);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.expect(<span class="hljs-string">'['</span>)) {
                primary = <span class="hljs-keyword">this</span>.arrayDeclaration();
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.expect(<span class="hljs-string">'{'</span>)) {
                primary = <span class="hljs-keyword">this</span>.object();
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.selfReferential.hasOwnProperty(<span class="hljs-keyword">this</span>.peek().text)) {
                primary = copy(<span class="hljs-keyword">this</span>.selfReferential[<span class="hljs-keyword">this</span>.consume().text]);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.literals.hasOwnProperty(<span class="hljs-keyword">this</span>.peek().text)) {
                primary = {
                    <span class="hljs-attr">type</span>: AST.Literal,
                    <span class="hljs-attr">value</span>: <span class="hljs-keyword">this</span>.options.literals[<span class="hljs-keyword">this</span>.consume().text]
                };
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.peek().identifier) {
                primary = <span class="hljs-keyword">this</span>.identifier();
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.peek().constant) {
                primary = <span class="hljs-keyword">this</span>.constant();
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">this</span>.throwError(<span class="hljs-string">'not a primary expression'</span>, <span class="hljs-keyword">this</span>.peek());
            }
            <span class="hljs-keyword">var</span> next;
            <span class="hljs-keyword">while</span> ((next = <span class="hljs-keyword">this</span>.expect(<span class="hljs-string">'('</span>, <span class="hljs-string">'['</span>, <span class="hljs-string">'.'</span>))) {
                <span class="hljs-keyword">if</span> (next.text === <span class="hljs-string">'('</span>) {
                    primary = {
                        <span class="hljs-attr">type</span>: AST.CallExpression,
                        <span class="hljs-attr">callee</span>: primary,
                        <span class="hljs-attr">arguments</span>: <span class="hljs-keyword">this</span>.parseArguments()
                    };
                    <span class="hljs-keyword">this</span>.consume(<span class="hljs-string">')'</span>);
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (next.text === <span class="hljs-string">'['</span>) {
                    primary = {
                        <span class="hljs-attr">type</span>: AST.MemberExpression,
                        <span class="hljs-attr">object</span>: primary,
                        <span class="hljs-attr">property</span>: <span class="hljs-keyword">this</span>.expression(),
                        <span class="hljs-attr">computed</span>: <span class="hljs-literal">true</span>
                    };
                    <span class="hljs-keyword">this</span>.consume(<span class="hljs-string">']'</span>);
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (next.text === <span class="hljs-string">'.'</span>) {
                    primary = {
                        <span class="hljs-attr">type</span>: AST.MemberExpression,
                        <span class="hljs-attr">object</span>: primary,
                        <span class="hljs-attr">property</span>: <span class="hljs-keyword">this</span>.identifier(),
                        <span class="hljs-attr">computed</span>: <span class="hljs-literal">false</span>
                    };
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">this</span>.throwError(<span class="hljs-string">'IMPOSSIBLE'</span>);
                }
            }
            <span class="hljs-keyword">return</span> primary;
        },
        <span class="hljs-attr">filter</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">baseExpression</span>) </span>{
            <span class="hljs-keyword">var</span> args = [baseExpression];
            <span class="hljs-keyword">var</span> result = {
                <span class="hljs-attr">type</span>: AST.CallExpression,
                <span class="hljs-attr">callee</span>: <span class="hljs-keyword">this</span>.identifier(),
                <span class="hljs-attr">arguments</span>: args,
                <span class="hljs-attr">filter</span>: <span class="hljs-literal">true</span>
            };
            <span class="hljs-keyword">while</span> (<span class="hljs-keyword">this</span>.expect(<span class="hljs-string">':'</span>)) {
                args.push(<span class="hljs-keyword">this</span>.expression());
            }
            <span class="hljs-keyword">return</span> result;
        },
        <span class="hljs-attr">parseArguments</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> args = [];
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.peekToken().text !== <span class="hljs-string">')'</span>) {
                <span class="hljs-keyword">do</span> {
                    args.push(<span class="hljs-keyword">this</span>.filterChain());
                } <span class="hljs-keyword">while</span> (<span class="hljs-keyword">this</span>.expect(<span class="hljs-string">','</span>));
            }
            <span class="hljs-keyword">return</span> args;
        },
        <span class="hljs-attr">identifier</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> token = <span class="hljs-keyword">this</span>.consume();
            <span class="hljs-keyword">if</span> (!token.identifier) {
                <span class="hljs-keyword">this</span>.throwError(<span class="hljs-string">'is not a valid identifier'</span>, token);
            }
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">type</span>: AST.Identifier,
                <span class="hljs-attr">name</span>: token.text
            };
        },
        <span class="hljs-attr">constant</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">type</span>: AST.Literal,
                <span class="hljs-attr">value</span>: <span class="hljs-keyword">this</span>.consume().value
            };
        },
        <span class="hljs-attr">arrayDeclaration</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> elements = [];
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.peekToken().text !== <span class="hljs-string">']'</span>) {
                <span class="hljs-keyword">do</span> {
                    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.peek(<span class="hljs-string">']'</span>)) {
                        <span class="hljs-keyword">break</span>;
                    }
                    elements.push(<span class="hljs-keyword">this</span>.expression());
                } <span class="hljs-keyword">while</span> (<span class="hljs-keyword">this</span>.expect(<span class="hljs-string">','</span>));
            }
            <span class="hljs-keyword">this</span>.consume(<span class="hljs-string">']'</span>);
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">type</span>: AST.ArrayExpression,
                <span class="hljs-attr">elements</span>: elements
            };
        },
        <span class="hljs-attr">object</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> properties = [],
                property;
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.peekToken().text !== <span class="hljs-string">'}'</span>) {
                <span class="hljs-keyword">do</span> {
                    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.peek(<span class="hljs-string">'}'</span>)) {
                        <span class="hljs-keyword">break</span>;
                    }
                    property = {
                        <span class="hljs-attr">type</span>: AST.Property,
                        <span class="hljs-attr">kind</span>: <span class="hljs-string">'init'</span>
                    };
                    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.peek().constant) {
                        property.key = <span class="hljs-keyword">this</span>.constant();
                        property.computed = <span class="hljs-literal">false</span>;
                        <span class="hljs-keyword">this</span>.consume(<span class="hljs-string">':'</span>);
                        property.value = <span class="hljs-keyword">this</span>.expression();
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.peek().identifier) {
                        property.key = <span class="hljs-keyword">this</span>.identifier();
                        property.computed = <span class="hljs-literal">false</span>;
                        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.peek(<span class="hljs-string">':'</span>)) {
                            <span class="hljs-keyword">this</span>.consume(<span class="hljs-string">':'</span>);
                            property.value = <span class="hljs-keyword">this</span>.expression();
                        } <span class="hljs-keyword">else</span> {
                            property.value = property.key;
                        }
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.peek(<span class="hljs-string">'['</span>)) {
                        <span class="hljs-keyword">this</span>.consume(<span class="hljs-string">'['</span>);
                        property.key = <span class="hljs-keyword">this</span>.expression();
                        <span class="hljs-keyword">this</span>.consume(<span class="hljs-string">']'</span>);
                        property.computed = <span class="hljs-literal">true</span>;
                        <span class="hljs-keyword">this</span>.consume(<span class="hljs-string">':'</span>);
                        property.value = <span class="hljs-keyword">this</span>.expression();
                    } <span class="hljs-keyword">else</span> {
                        <span class="hljs-keyword">this</span>.throwError(<span class="hljs-string">"invalid key"</span>, <span class="hljs-keyword">this</span>.peek());
                    }
                    properties.push(property);
                } <span class="hljs-keyword">while</span> (<span class="hljs-keyword">this</span>.expect(<span class="hljs-string">','</span>));
            }
            <span class="hljs-keyword">this</span>.consume(<span class="hljs-string">'}'</span>);
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">type</span>: AST.ObjectExpression,
                <span class="hljs-attr">properties</span>: properties
            };
        },
        <span class="hljs-attr">throwError</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">msg, token</span>) </span>{
            <span class="hljs-keyword">throw</span> $parseMinErr(<span class="hljs-string">'syntax'</span>,
                <span class="hljs-string">'Syntax Error: Token \'{0}\' {1} at column {2} of the expression [{3}] starting at [{4}].'</span>,
                token.text, msg, (token.index + <span class="hljs-number">1</span>), <span class="hljs-keyword">this</span>.text, <span class="hljs-keyword">this</span>.text.substring(token.index));
        },
        <span class="hljs-attr">consume</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e1</span>) </span>{
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.tokens.length === <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">throw</span> $parseMinErr(<span class="hljs-string">'ueoe'</span>, <span class="hljs-string">'Unexpected end of expression: {0}'</span>, <span class="hljs-keyword">this</span>.text);
            }
            <span class="hljs-keyword">var</span> token = <span class="hljs-keyword">this</span>.expect(e1);
            <span class="hljs-keyword">if</span> (!token) {
                <span class="hljs-keyword">this</span>.throwError(<span class="hljs-string">'is unexpected, expecting ['</span> + e1 + <span class="hljs-string">']'</span>, <span class="hljs-keyword">this</span>.peek());
            }
            <span class="hljs-keyword">return</span> token;
        },
        <span class="hljs-attr">peekToken</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.tokens.length === <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">throw</span> $parseMinErr(<span class="hljs-string">'ueoe'</span>, <span class="hljs-string">'Unexpected end of expression: {0}'</span>, <span class="hljs-keyword">this</span>.text);
            }
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.tokens[<span class="hljs-number">0</span>];
        },
        <span class="hljs-attr">peek</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e1, e2, e3, e4</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.peekAhead(<span class="hljs-number">0</span>, e1, e2, e3, e4);
        },
        <span class="hljs-attr">peekAhead</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">i, e1, e2, e3, e4</span>) </span>{
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.tokens.length &gt; i) {
                <span class="hljs-keyword">var</span> token = <span class="hljs-keyword">this</span>.tokens[i];
                <span class="hljs-keyword">var</span> t = token.text;
                <span class="hljs-keyword">if</span> (t === e1 || t === e2 || t === e3 || t === e4 ||
                    (!e1 &amp;&amp; !e2 &amp;&amp; !e3 &amp;&amp; !e4)) {
                    <span class="hljs-keyword">return</span> token;
                }
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        },
        <span class="hljs-attr">expect</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e1, e2, e3, e4</span>) </span>{
            <span class="hljs-keyword">var</span> token = <span class="hljs-keyword">this</span>.peek(e1, e2, e3, e4);
            <span class="hljs-keyword">if</span> (token) {
                <span class="hljs-keyword">this</span>.tokens.shift();
                <span class="hljs-keyword">return</span> token;
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        },
        <span class="hljs-attr">selfReferential</span>: {
            <span class="hljs-string">'this'</span>: {
                <span class="hljs-attr">type</span>: AST.ThisExpression
            },
            <span class="hljs-string">'$locals'</span>: {
                <span class="hljs-attr">type</span>: AST.LocalsExpression
            }
        }
    };

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ifDefined</span>(<span class="hljs-params">v, d</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> v !== <span class="hljs-string">'undefined'</span> ? v : d;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">plusFn</span>(<span class="hljs-params">l, r</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> l === <span class="hljs-string">'undefined'</span>) <span class="hljs-keyword">return</span> r;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> r === <span class="hljs-string">'undefined'</span>) <span class="hljs-keyword">return</span> l;
        <span class="hljs-keyword">return</span> l + r;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isStateless</span>(<span class="hljs-params">$filter, filterName</span>) </span>{
        <span class="hljs-keyword">var</span> fn = $filter(filterName);
        <span class="hljs-keyword">return</span> !fn.$stateful;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findConstantAndWatchExpressions</span>(<span class="hljs-params">ast, $filter</span>) </span>{
        <span class="hljs-keyword">var</span> allConstants;
        <span class="hljs-keyword">var</span> argsToWatch;
        <span class="hljs-keyword">switch</span> (ast.type) {
            <span class="hljs-keyword">case</span> AST.Program:
                allConstants = <span class="hljs-literal">true</span>;
                forEach(ast.body, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">expr</span>) </span>{
                    findConstantAndWatchExpressions(expr.expression, $filter);
                    allConstants = allConstants &amp;&amp; expr.expression.constant;
                });
                ast.constant = allConstants;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> AST.Literal:
                ast.constant = <span class="hljs-literal">true</span>;
                ast.toWatch = [];
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> AST.UnaryExpression:
                findConstantAndWatchExpressions(ast.argument, $filter);
                ast.constant = ast.argument.constant;
                ast.toWatch = ast.argument.toWatch;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> AST.BinaryExpression:
                findConstantAndWatchExpressions(ast.left, $filter);
                findConstantAndWatchExpressions(ast.right, $filter);
                ast.constant = ast.left.constant &amp;&amp; ast.right.constant;
                ast.toWatch = ast.left.toWatch.concat(ast.right.toWatch);
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> AST.LogicalExpression:
                findConstantAndWatchExpressions(ast.left, $filter);
                findConstantAndWatchExpressions(ast.right, $filter);
                ast.constant = ast.left.constant &amp;&amp; ast.right.constant;
                ast.toWatch = ast.constant ? [] : [ast];
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> AST.ConditionalExpression:
                findConstantAndWatchExpressions(ast.test, $filter);
                findConstantAndWatchExpressions(ast.alternate, $filter);
                findConstantAndWatchExpressions(ast.consequent, $filter);
                ast.constant = ast.test.constant &amp;&amp; ast.alternate.constant &amp;&amp; ast.consequent.constant;
                ast.toWatch = ast.constant ? [] : [ast];
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> AST.Identifier:
                ast.constant = <span class="hljs-literal">false</span>;
                ast.toWatch = [ast];
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> AST.MemberExpression:
                findConstantAndWatchExpressions(ast.object, $filter);
                <span class="hljs-keyword">if</span> (ast.computed) {
                    findConstantAndWatchExpressions(ast.property, $filter);
                }
                ast.constant = ast.object.constant &amp;&amp; (!ast.computed || ast.property.constant);
                ast.toWatch = [ast];
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> AST.CallExpression:
                allConstants = ast.filter ? isStateless($filter, ast.callee.name) : <span class="hljs-literal">false</span>;
                argsToWatch = [];
                forEach(ast.arguments, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">expr</span>) </span>{
                    findConstantAndWatchExpressions(expr, $filter);
                    allConstants = allConstants &amp;&amp; expr.constant;
                    <span class="hljs-keyword">if</span> (!expr.constant) {
                        argsToWatch.push.apply(argsToWatch, expr.toWatch);
                    }
                });
                ast.constant = allConstants;
                ast.toWatch = ast.filter &amp;&amp; isStateless($filter, ast.callee.name) ? argsToWatch : [ast];
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> AST.AssignmentExpression:
                findConstantAndWatchExpressions(ast.left, $filter);
                findConstantAndWatchExpressions(ast.right, $filter);
                ast.constant = ast.left.constant &amp;&amp; ast.right.constant;
                ast.toWatch = [ast];
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> AST.ArrayExpression:
                allConstants = <span class="hljs-literal">true</span>;
                argsToWatch = [];
                forEach(ast.elements, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">expr</span>) </span>{
                    findConstantAndWatchExpressions(expr, $filter);
                    allConstants = allConstants &amp;&amp; expr.constant;
                    <span class="hljs-keyword">if</span> (!expr.constant) {
                        argsToWatch.push.apply(argsToWatch, expr.toWatch);
                    }
                });
                ast.constant = allConstants;
                ast.toWatch = argsToWatch;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> AST.ObjectExpression:
                allConstants = <span class="hljs-literal">true</span>;
                argsToWatch = [];
                forEach(ast.properties, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">property</span>) </span>{
                    findConstantAndWatchExpressions(property.value, $filter);
                    allConstants = allConstants &amp;&amp; property.value.constant &amp;&amp; !property.computed;
                    <span class="hljs-keyword">if</span> (!property.value.constant) {
                        argsToWatch.push.apply(argsToWatch, property.value.toWatch);
                    }
                });
                ast.constant = allConstants;
                ast.toWatch = argsToWatch;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> AST.ThisExpression:
                ast.constant = <span class="hljs-literal">false</span>;
                ast.toWatch = [];
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> AST.LocalsExpression:
                ast.constant = <span class="hljs-literal">false</span>;
                ast.toWatch = [];
                <span class="hljs-keyword">break</span>;
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getInputs</span>(<span class="hljs-params">body</span>) </span>{
        <span class="hljs-keyword">if</span> (body.length != <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">var</span> lastExpression = body[<span class="hljs-number">0</span>].expression;
        <span class="hljs-keyword">var</span> candidate = lastExpression.toWatch;
        <span class="hljs-keyword">if</span> (candidate.length !== <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> candidate;
        <span class="hljs-keyword">return</span> candidate[<span class="hljs-number">0</span>] !== lastExpression ? candidate : <span class="hljs-literal">undefined</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isAssignable</span>(<span class="hljs-params">ast</span>) </span>{
        <span class="hljs-keyword">return</span> ast.type === AST.Identifier || ast.type === AST.MemberExpression;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">assignableAST</span>(<span class="hljs-params">ast</span>) </span>{
        <span class="hljs-keyword">if</span> (ast.body.length === <span class="hljs-number">1</span> &amp;&amp; isAssignable(ast.body[<span class="hljs-number">0</span>].expression)) {
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">type</span>: AST.AssignmentExpression,
                <span class="hljs-attr">left</span>: ast.body[<span class="hljs-number">0</span>].expression,
                <span class="hljs-attr">right</span>: {
                    <span class="hljs-attr">type</span>: AST.NGValueParameter
                },
                <span class="hljs-attr">operator</span>: <span class="hljs-string">'='</span>
            };
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isLiteral</span>(<span class="hljs-params">ast</span>) </span>{
        <span class="hljs-keyword">return</span> ast.body.length === <span class="hljs-number">0</span> ||
            ast.body.length === <span class="hljs-number">1</span> &amp;&amp; (
                ast.body[<span class="hljs-number">0</span>].expression.type === AST.Literal ||
                ast.body[<span class="hljs-number">0</span>].expression.type === AST.ArrayExpression ||
                ast.body[<span class="hljs-number">0</span>].expression.type === AST.ObjectExpression);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isConstant</span>(<span class="hljs-params">ast</span>) </span>{
        <span class="hljs-keyword">return</span> ast.constant;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ASTCompiler</span>(<span class="hljs-params">astBuilder, $filter</span>) </span>{
        <span class="hljs-keyword">this</span>.astBuilder = astBuilder;
        <span class="hljs-keyword">this</span>.$filter = $filter;
    }
    ASTCompiler.prototype = {
        <span class="hljs-attr">compile</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">expression, expensiveChecks</span>) </span>{
            <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
            <span class="hljs-keyword">var</span> ast = <span class="hljs-keyword">this</span>.astBuilder.ast(expression);
            <span class="hljs-keyword">this</span>.state = {
                <span class="hljs-attr">nextId</span>: <span class="hljs-number">0</span>,
                <span class="hljs-attr">filters</span>: {},
                <span class="hljs-attr">expensiveChecks</span>: expensiveChecks,
                <span class="hljs-attr">fn</span>: {
                    <span class="hljs-attr">vars</span>: [],
                    <span class="hljs-attr">body</span>: [],
                    <span class="hljs-attr">own</span>: {}
                },
                <span class="hljs-attr">assign</span>: {
                    <span class="hljs-attr">vars</span>: [],
                    <span class="hljs-attr">body</span>: [],
                    <span class="hljs-attr">own</span>: {}
                },
                <span class="hljs-attr">inputs</span>: []
            };
            findConstantAndWatchExpressions(ast, self.$filter);
            <span class="hljs-keyword">var</span> extra = <span class="hljs-string">''</span>;
            <span class="hljs-keyword">var</span> assignable;
            <span class="hljs-keyword">this</span>.stage = <span class="hljs-string">'assign'</span>;
            <span class="hljs-keyword">if</span> ((assignable = assignableAST(ast))) {
                <span class="hljs-keyword">this</span>.state.computing = <span class="hljs-string">'assign'</span>;
                <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">this</span>.nextId();
                <span class="hljs-keyword">this</span>.recurse(assignable, result);
                <span class="hljs-keyword">this</span>.return_(result);
                extra = <span class="hljs-string">'fn.assign='</span> + <span class="hljs-keyword">this</span>.generateFunction(<span class="hljs-string">'assign'</span>, <span class="hljs-string">'s,v,l'</span>);
            }
            <span class="hljs-keyword">var</span> toWatch = getInputs(ast.body);
            self.stage = <span class="hljs-string">'inputs'</span>;
            forEach(toWatch, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">watch, key</span>) </span>{
                <span class="hljs-keyword">var</span> fnKey = <span class="hljs-string">'fn'</span> + key;
                self.state[fnKey] = {
                    <span class="hljs-attr">vars</span>: [],
                    <span class="hljs-attr">body</span>: [],
                    <span class="hljs-attr">own</span>: {}
                };
                self.state.computing = fnKey;
                <span class="hljs-keyword">var</span> intoId = self.nextId();
                self.recurse(watch, intoId);
                self.return_(intoId);
                self.state.inputs.push(fnKey);
                watch.watchId = key;
            });
            <span class="hljs-keyword">this</span>.state.computing = <span class="hljs-string">'fn'</span>;
            <span class="hljs-keyword">this</span>.stage = <span class="hljs-string">'main'</span>;
            <span class="hljs-keyword">this</span>.recurse(ast);
            <span class="hljs-keyword">var</span> fnString =
                <span class="hljs-string">'"'</span> + <span class="hljs-keyword">this</span>.USE + <span class="hljs-string">' '</span> + <span class="hljs-keyword">this</span>.STRICT + <span class="hljs-string">'";\n'</span> +
                <span class="hljs-keyword">this</span>.filterPrefix() +
                <span class="hljs-string">'var fn='</span> + <span class="hljs-keyword">this</span>.generateFunction(<span class="hljs-string">'fn'</span>, <span class="hljs-string">'s,l,a,i'</span>) +
                extra +
                <span class="hljs-keyword">this</span>.watchFns() +
                <span class="hljs-string">'return fn;'</span>;
            <span class="hljs-keyword">var</span> fn = (<span class="hljs-keyword">new</span> <span class="hljs-built_in">Function</span>(<span class="hljs-string">'$filter'</span>,
                <span class="hljs-string">'ensureSafeMemberName'</span>,
                <span class="hljs-string">'ensureSafeObject'</span>,
                <span class="hljs-string">'ensureSafeFunction'</span>,
                <span class="hljs-string">'getStringValue'</span>,
                <span class="hljs-string">'ensureSafeAssignContext'</span>,
                <span class="hljs-string">'ifDefined'</span>,
                <span class="hljs-string">'plus'</span>,
                <span class="hljs-string">'text'</span>,
                fnString))(
                <span class="hljs-keyword">this</span>.$filter,
                ensureSafeMemberName,
                ensureSafeObject,
                ensureSafeFunction,
                getStringValue,
                ensureSafeAssignContext,
                ifDefined,
                plusFn,
                expression);
            <span class="hljs-keyword">this</span>.state = <span class="hljs-keyword">this</span>.stage = <span class="hljs-literal">undefined</span>;
            fn.literal = isLiteral(ast);
            fn.constant = isConstant(ast);
            <span class="hljs-keyword">return</span> fn;
        },
        <span class="hljs-attr">USE</span>: <span class="hljs-string">'use'</span>,
        <span class="hljs-attr">STRICT</span>: <span class="hljs-string">'strict'</span>,
        <span class="hljs-attr">watchFns</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> result = [];
            <span class="hljs-keyword">var</span> fns = <span class="hljs-keyword">this</span>.state.inputs;
            <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
            forEach(fns, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name</span>) </span>{
                result.push(<span class="hljs-string">'var '</span> + name + <span class="hljs-string">'='</span> + self.generateFunction(name, <span class="hljs-string">'s'</span>));
            });
            <span class="hljs-keyword">if</span> (fns.length) {
                result.push(<span class="hljs-string">'fn.inputs=['</span> + fns.join(<span class="hljs-string">','</span>) + <span class="hljs-string">'];'</span>);
            }
            <span class="hljs-keyword">return</span> result.join(<span class="hljs-string">''</span>);
        },
        <span class="hljs-attr">generateFunction</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name, params</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-string">'function('</span> + params + <span class="hljs-string">'){'</span> +
                <span class="hljs-keyword">this</span>.varsPrefix(name) +
                <span class="hljs-keyword">this</span>.body(name) +
                <span class="hljs-string">'};'</span>;
        },
        <span class="hljs-attr">filterPrefix</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> parts = [];
            <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
            forEach(<span class="hljs-keyword">this</span>.state.filters, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">id, filter</span>) </span>{
                parts.push(id + <span class="hljs-string">'=$filter('</span> + self.escape(filter) + <span class="hljs-string">')'</span>);
            });
            <span class="hljs-keyword">if</span> (parts.length) <span class="hljs-keyword">return</span> <span class="hljs-string">'var '</span> + parts.join(<span class="hljs-string">','</span>) + <span class="hljs-string">';'</span>;
            <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
        },
        <span class="hljs-attr">varsPrefix</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">section</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.state[section].vars.length ? <span class="hljs-string">'var '</span> + <span class="hljs-keyword">this</span>.state[section].vars.join(<span class="hljs-string">','</span>) + <span class="hljs-string">';'</span> : <span class="hljs-string">''</span>;
        },
        <span class="hljs-attr">body</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">section</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.state[section].body.join(<span class="hljs-string">''</span>);
        },
        <span class="hljs-attr">recurse</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ast, intoId, nameId, recursionFn, create, skipWatchIdCheck</span>) </span>{
            <span class="hljs-keyword">var</span> left, right, self = <span class="hljs-keyword">this</span>,
                args, expression, computed;
            recursionFn = recursionFn || noop;
            <span class="hljs-keyword">if</span> (!skipWatchIdCheck &amp;&amp; isDefined(ast.watchId)) {
                intoId = intoId || <span class="hljs-keyword">this</span>.nextId();
                <span class="hljs-keyword">this</span>.if_(<span class="hljs-string">'i'</span>,
                    <span class="hljs-keyword">this</span>.lazyAssign(intoId, <span class="hljs-keyword">this</span>.computedMember(<span class="hljs-string">'i'</span>, ast.watchId)),
                    <span class="hljs-keyword">this</span>.lazyRecurse(ast, intoId, nameId, recursionFn, create, <span class="hljs-literal">true</span>)
                );
                <span class="hljs-keyword">return</span>;
            }
            <span class="hljs-keyword">switch</span> (ast.type) {
                <span class="hljs-keyword">case</span> AST.Program:
                    forEach(ast.body, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">expression, pos</span>) </span>{
                        self.recurse(expression.expression, <span class="hljs-literal">undefined</span>, <span class="hljs-literal">undefined</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">expr</span>) </span>{
                            right = expr;
                        });
                        <span class="hljs-keyword">if</span> (pos !== ast.body.length - <span class="hljs-number">1</span>) {
                            self.current().body.push(right, <span class="hljs-string">';'</span>);
                        } <span class="hljs-keyword">else</span> {
                            self.return_(right);
                        }
                    });
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> AST.Literal:
                    expression = <span class="hljs-keyword">this</span>.escape(ast.value);
                    <span class="hljs-keyword">this</span>.assign(intoId, expression);
                    recursionFn(expression);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> AST.UnaryExpression:
                    <span class="hljs-keyword">this</span>.recurse(ast.argument, <span class="hljs-literal">undefined</span>, <span class="hljs-literal">undefined</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">expr</span>) </span>{
                        right = expr;
                    });
                    expression = ast.operator + <span class="hljs-string">'('</span> + <span class="hljs-keyword">this</span>.ifDefined(right, <span class="hljs-number">0</span>) + <span class="hljs-string">')'</span>;
                    <span class="hljs-keyword">this</span>.assign(intoId, expression);
                    recursionFn(expression);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> AST.BinaryExpression:
                    <span class="hljs-keyword">this</span>.recurse(ast.left, <span class="hljs-literal">undefined</span>, <span class="hljs-literal">undefined</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">expr</span>) </span>{
                        left = expr;
                    });
                    <span class="hljs-keyword">this</span>.recurse(ast.right, <span class="hljs-literal">undefined</span>, <span class="hljs-literal">undefined</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">expr</span>) </span>{
                        right = expr;
                    });
                    <span class="hljs-keyword">if</span> (ast.operator === <span class="hljs-string">'+'</span>) {
                        expression = <span class="hljs-keyword">this</span>.plus(left, right);
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ast.operator === <span class="hljs-string">'-'</span>) {
                        expression = <span class="hljs-keyword">this</span>.ifDefined(left, <span class="hljs-number">0</span>) + ast.operator + <span class="hljs-keyword">this</span>.ifDefined(right, <span class="hljs-number">0</span>);
                    } <span class="hljs-keyword">else</span> {
                        expression = <span class="hljs-string">'('</span> + left + <span class="hljs-string">')'</span> + ast.operator + <span class="hljs-string">'('</span> + right + <span class="hljs-string">')'</span>;
                    }
                    <span class="hljs-keyword">this</span>.assign(intoId, expression);
                    recursionFn(expression);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> AST.LogicalExpression:
                    intoId = intoId || <span class="hljs-keyword">this</span>.nextId();
                    self.recurse(ast.left, intoId);
                    self.if_(ast.operator === <span class="hljs-string">'&amp;&amp;'</span> ? intoId : self.not(intoId), self.lazyRecurse(ast.right, intoId));
                    recursionFn(intoId);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> AST.ConditionalExpression:
                    intoId = intoId || <span class="hljs-keyword">this</span>.nextId();
                    self.recurse(ast.test, intoId);
                    self.if_(intoId, self.lazyRecurse(ast.alternate, intoId), self.lazyRecurse(ast.consequent, intoId));
                    recursionFn(intoId);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> AST.Identifier:
                    intoId = intoId || <span class="hljs-keyword">this</span>.nextId();
                    <span class="hljs-keyword">if</span> (nameId) {
                        nameId.context = self.stage === <span class="hljs-string">'inputs'</span> ? <span class="hljs-string">'s'</span> : <span class="hljs-keyword">this</span>.assign(<span class="hljs-keyword">this</span>.nextId(), <span class="hljs-keyword">this</span>.getHasOwnProperty(<span class="hljs-string">'l'</span>, ast.name) + <span class="hljs-string">'?l:s'</span>);
                        nameId.computed = <span class="hljs-literal">false</span>;
                        nameId.name = ast.name;
                    }
                    ensureSafeMemberName(ast.name);
                    self.if_(self.stage === <span class="hljs-string">'inputs'</span> || self.not(self.getHasOwnProperty(<span class="hljs-string">'l'</span>, ast.name)),
                        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            self.if_(self.stage === <span class="hljs-string">'inputs'</span> || <span class="hljs-string">'s'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                                <span class="hljs-keyword">if</span> (create &amp;&amp; create !== <span class="hljs-number">1</span>) {
                                    self.if_(
                                        self.not(self.nonComputedMember(<span class="hljs-string">'s'</span>, ast.name)),
                                        self.lazyAssign(self.nonComputedMember(<span class="hljs-string">'s'</span>, ast.name), <span class="hljs-string">'{}'</span>));
                                }
                                self.assign(intoId, self.nonComputedMember(<span class="hljs-string">'s'</span>, ast.name));
                            });
                        }, intoId &amp;&amp; self.lazyAssign(intoId, self.nonComputedMember(<span class="hljs-string">'l'</span>, ast.name))
                    );
                    <span class="hljs-keyword">if</span> (self.state.expensiveChecks || isPossiblyDangerousMemberName(ast.name)) {
                        self.addEnsureSafeObject(intoId);
                    }
                    recursionFn(intoId);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> AST.MemberExpression:
                    left = nameId &amp;&amp; (nameId.context = <span class="hljs-keyword">this</span>.nextId()) || <span class="hljs-keyword">this</span>.nextId();
                    intoId = intoId || <span class="hljs-keyword">this</span>.nextId();
                    self.recurse(ast.object, left, <span class="hljs-literal">undefined</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        self.if_(self.notNull(left), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            <span class="hljs-keyword">if</span> (create &amp;&amp; create !== <span class="hljs-number">1</span>) {
                                self.addEnsureSafeAssignContext(left);
                            }
                            <span class="hljs-keyword">if</span> (ast.computed) {
                                right = self.nextId();
                                self.recurse(ast.property, right);
                                self.getStringValue(right);
                                self.addEnsureSafeMemberName(right);
                                <span class="hljs-keyword">if</span> (create &amp;&amp; create !== <span class="hljs-number">1</span>) {
                                    self.if_(self.not(self.computedMember(left, right)), self.lazyAssign(self.computedMember(left, right), <span class="hljs-string">'{}'</span>));
                                }
                                expression = self.ensureSafeObject(self.computedMember(left, right));
                                self.assign(intoId, expression);
                                <span class="hljs-keyword">if</span> (nameId) {
                                    nameId.computed = <span class="hljs-literal">true</span>;
                                    nameId.name = right;
                                }
                            } <span class="hljs-keyword">else</span> {
                                ensureSafeMemberName(ast.property.name);
                                <span class="hljs-keyword">if</span> (create &amp;&amp; create !== <span class="hljs-number">1</span>) {
                                    self.if_(self.not(self.nonComputedMember(left, ast.property.name)), self.lazyAssign(self.nonComputedMember(left, ast.property.name), <span class="hljs-string">'{}'</span>));
                                }
                                expression = self.nonComputedMember(left, ast.property.name);
                                <span class="hljs-keyword">if</span> (self.state.expensiveChecks || isPossiblyDangerousMemberName(ast.property.name)) {
                                    expression = self.ensureSafeObject(expression);
                                }
                                self.assign(intoId, expression);
                                <span class="hljs-keyword">if</span> (nameId) {
                                    nameId.computed = <span class="hljs-literal">false</span>;
                                    nameId.name = ast.property.name;
                                }
                            }
                        }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            self.assign(intoId, <span class="hljs-string">'undefined'</span>);
                        });
                        recursionFn(intoId);
                    }, !!create);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> AST.CallExpression:
                    intoId = intoId || <span class="hljs-keyword">this</span>.nextId();
                    <span class="hljs-keyword">if</span> (ast.filter) {
                        right = self.filter(ast.callee.name);
                        args = [];
                        forEach(ast.arguments, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">expr</span>) </span>{
                            <span class="hljs-keyword">var</span> argument = self.nextId();
                            self.recurse(expr, argument);
                            args.push(argument);
                        });
                        expression = right + <span class="hljs-string">'('</span> + args.join(<span class="hljs-string">','</span>) + <span class="hljs-string">')'</span>;
                        self.assign(intoId, expression);
                        recursionFn(intoId);
                    } <span class="hljs-keyword">else</span> {
                        right = self.nextId();
                        left = {};
                        args = [];
                        self.recurse(ast.callee, right, left, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            self.if_(self.notNull(right), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                                self.addEnsureSafeFunction(right);
                                forEach(ast.arguments, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">expr</span>) </span>{
                                    self.recurse(expr, self.nextId(), <span class="hljs-literal">undefined</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">argument</span>) </span>{
                                        args.push(self.ensureSafeObject(argument));
                                    });
                                });
                                <span class="hljs-keyword">if</span> (left.name) {
                                    <span class="hljs-keyword">if</span> (!self.state.expensiveChecks) {
                                        self.addEnsureSafeObject(left.context);
                                    }
                                    expression = self.member(left.context, left.name, left.computed) + <span class="hljs-string">'('</span> + args.join(<span class="hljs-string">','</span>) + <span class="hljs-string">')'</span>;
                                } <span class="hljs-keyword">else</span> {
                                    expression = right + <span class="hljs-string">'('</span> + args.join(<span class="hljs-string">','</span>) + <span class="hljs-string">')'</span>;
                                }
                                expression = self.ensureSafeObject(expression);
                                self.assign(intoId, expression);
                            }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                                self.assign(intoId, <span class="hljs-string">'undefined'</span>);
                            });
                            recursionFn(intoId);
                        });
                    }
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> AST.AssignmentExpression:
                    right = <span class="hljs-keyword">this</span>.nextId();
                    left = {};
                    <span class="hljs-keyword">if</span> (!isAssignable(ast.left)) {
                        <span class="hljs-keyword">throw</span> $parseMinErr(<span class="hljs-string">'lval'</span>, <span class="hljs-string">'Trying to assign a value to a non l-value'</span>);
                    }
                    <span class="hljs-keyword">this</span>.recurse(ast.left, <span class="hljs-literal">undefined</span>, left, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        self.if_(self.notNull(left.context), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            self.recurse(ast.right, right);
                            self.addEnsureSafeObject(self.member(left.context, left.name, left.computed));
                            self.addEnsureSafeAssignContext(left.context);
                            expression = self.member(left.context, left.name, left.computed) + ast.operator + right;
                            self.assign(intoId, expression);
                            recursionFn(intoId || expression);
                        });
                    }, <span class="hljs-number">1</span>);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> AST.ArrayExpression:
                    args = [];
                    forEach(ast.elements, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">expr</span>) </span>{
                        self.recurse(expr, self.nextId(), <span class="hljs-literal">undefined</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">argument</span>) </span>{
                            args.push(argument);
                        });
                    });
                    expression = <span class="hljs-string">'['</span> + args.join(<span class="hljs-string">','</span>) + <span class="hljs-string">']'</span>;
                    <span class="hljs-keyword">this</span>.assign(intoId, expression);
                    recursionFn(expression);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> AST.ObjectExpression:
                    args = [];
                    computed = <span class="hljs-literal">false</span>;
                    forEach(ast.properties, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">property</span>) </span>{
                        <span class="hljs-keyword">if</span> (property.computed) {
                            computed = <span class="hljs-literal">true</span>;
                        }
                    });
                    <span class="hljs-keyword">if</span> (computed) {
                        intoId = intoId || <span class="hljs-keyword">this</span>.nextId();
                        <span class="hljs-keyword">this</span>.assign(intoId, <span class="hljs-string">'{}'</span>);
                        forEach(ast.properties, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">property</span>) </span>{
                            <span class="hljs-keyword">if</span> (property.computed) {
                                left = self.nextId();
                                self.recurse(property.key, left);
                            } <span class="hljs-keyword">else</span> {
                                left = property.key.type === AST.Identifier ?
                                    property.key.name :
                                    (<span class="hljs-string">''</span> + property.key.value);
                            }
                            right = self.nextId();
                            self.recurse(property.value, right);
                            self.assign(self.member(intoId, left, property.computed), right);
                        });
                    } <span class="hljs-keyword">else</span> {
                        forEach(ast.properties, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">property</span>) </span>{
                            self.recurse(property.value, ast.constant ? <span class="hljs-literal">undefined</span> : self.nextId(), <span class="hljs-literal">undefined</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">expr</span>) </span>{
                                args.push(self.escape(
                                        property.key.type === AST.Identifier ? property.key.name :
                                        (<span class="hljs-string">''</span> + property.key.value)) +
                                    <span class="hljs-string">':'</span> + expr);
                            });
                        });
                        expression = <span class="hljs-string">'{'</span> + args.join(<span class="hljs-string">','</span>) + <span class="hljs-string">'}'</span>;
                        <span class="hljs-keyword">this</span>.assign(intoId, expression);
                    }
                    recursionFn(intoId || expression);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> AST.ThisExpression:
                    <span class="hljs-keyword">this</span>.assign(intoId, <span class="hljs-string">'s'</span>);
                    recursionFn(<span class="hljs-string">'s'</span>);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> AST.LocalsExpression:
                    <span class="hljs-keyword">this</span>.assign(intoId, <span class="hljs-string">'l'</span>);
                    recursionFn(<span class="hljs-string">'l'</span>);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> AST.NGValueParameter:
                    <span class="hljs-keyword">this</span>.assign(intoId, <span class="hljs-string">'v'</span>);
                    recursionFn(<span class="hljs-string">'v'</span>);
                    <span class="hljs-keyword">break</span>;
            }
        },
        <span class="hljs-attr">getHasOwnProperty</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, property</span>) </span>{
            <span class="hljs-keyword">var</span> key = element + <span class="hljs-string">'.'</span> + property;
            <span class="hljs-keyword">var</span> own = <span class="hljs-keyword">this</span>.current().own;
            <span class="hljs-keyword">if</span> (!own.hasOwnProperty(key)) {
                own[key] = <span class="hljs-keyword">this</span>.nextId(<span class="hljs-literal">false</span>, element + <span class="hljs-string">'&amp;&amp;('</span> + <span class="hljs-keyword">this</span>.escape(property) + <span class="hljs-string">' in '</span> + element + <span class="hljs-string">')'</span>);
            }
            <span class="hljs-keyword">return</span> own[key];
        },
        <span class="hljs-attr">assign</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">id, value</span>) </span>{
            <span class="hljs-keyword">if</span> (!id) <span class="hljs-keyword">return</span>;
            <span class="hljs-keyword">this</span>.current().body.push(id, <span class="hljs-string">'='</span>, value, <span class="hljs-string">';'</span>);
            <span class="hljs-keyword">return</span> id;
        },
        <span class="hljs-attr">filter</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">filterName</span>) </span>{
            <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.state.filters.hasOwnProperty(filterName)) {
                <span class="hljs-keyword">this</span>.state.filters[filterName] = <span class="hljs-keyword">this</span>.nextId(<span class="hljs-literal">true</span>);
            }
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.state.filters[filterName];
        },
        <span class="hljs-attr">ifDefined</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">id, defaultValue</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-string">'ifDefined('</span> + id + <span class="hljs-string">','</span> + <span class="hljs-keyword">this</span>.escape(defaultValue) + <span class="hljs-string">')'</span>;
        },
        <span class="hljs-attr">plus</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">left, right</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-string">'plus('</span> + left + <span class="hljs-string">','</span> + right + <span class="hljs-string">')'</span>;
        },
        <span class="hljs-attr">return_</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">id</span>) </span>{
            <span class="hljs-keyword">this</span>.current().body.push(<span class="hljs-string">'return '</span>, id, <span class="hljs-string">';'</span>);
        },
        <span class="hljs-attr">if_</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">test, alternate, consequent</span>) </span>{
            <span class="hljs-keyword">if</span> (test === <span class="hljs-literal">true</span>) {
                alternate();
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">var</span> body = <span class="hljs-keyword">this</span>.current().body;
                body.push(<span class="hljs-string">'if('</span>, test, <span class="hljs-string">'){'</span>);
                alternate();
                body.push(<span class="hljs-string">'}'</span>);
                <span class="hljs-keyword">if</span> (consequent) {
                    body.push(<span class="hljs-string">'else{'</span>);
                    consequent();
                    body.push(<span class="hljs-string">'}'</span>);
                }
            }
        },
        <span class="hljs-attr">not</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">expression</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-string">'!('</span> + expression + <span class="hljs-string">')'</span>;
        },
        <span class="hljs-attr">notNull</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">expression</span>) </span>{
            <span class="hljs-keyword">return</span> expression + <span class="hljs-string">'!=null'</span>;
        },
        <span class="hljs-attr">nonComputedMember</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">left, right</span>) </span>{
            <span class="hljs-keyword">var</span> SAFE_IDENTIFIER = <span class="hljs-regexp">/[$_a-zA-Z][$_a-zA-Z0-9]*/</span>;
            <span class="hljs-keyword">var</span> UNSAFE_CHARACTERS = <span class="hljs-regexp">/[^$_a-zA-Z0-9]/g</span>;
            <span class="hljs-keyword">if</span> (SAFE_IDENTIFIER.test(right)) {
                <span class="hljs-keyword">return</span> left + <span class="hljs-string">'.'</span> + right;
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> left + <span class="hljs-string">'["'</span> + right.replace(UNSAFE_CHARACTERS, <span class="hljs-keyword">this</span>.stringEscapeFn) + <span class="hljs-string">'"]'</span>;
            }
        },
        <span class="hljs-attr">computedMember</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">left, right</span>) </span>{
            <span class="hljs-keyword">return</span> left + <span class="hljs-string">'['</span> + right + <span class="hljs-string">']'</span>;
        },
        <span class="hljs-attr">member</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">left, right, computed</span>) </span>{
            <span class="hljs-keyword">if</span> (computed) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.computedMember(left, right);
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.nonComputedMember(left, right);
        },
        <span class="hljs-attr">addEnsureSafeObject</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">item</span>) </span>{
            <span class="hljs-keyword">this</span>.current().body.push(<span class="hljs-keyword">this</span>.ensureSafeObject(item), <span class="hljs-string">';'</span>);
        },
        <span class="hljs-attr">addEnsureSafeMemberName</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">item</span>) </span>{
            <span class="hljs-keyword">this</span>.current().body.push(<span class="hljs-keyword">this</span>.ensureSafeMemberName(item), <span class="hljs-string">';'</span>);
        },
        <span class="hljs-attr">addEnsureSafeFunction</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">item</span>) </span>{
            <span class="hljs-keyword">this</span>.current().body.push(<span class="hljs-keyword">this</span>.ensureSafeFunction(item), <span class="hljs-string">';'</span>);
        },
        <span class="hljs-attr">addEnsureSafeAssignContext</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">item</span>) </span>{
            <span class="hljs-keyword">this</span>.current().body.push(<span class="hljs-keyword">this</span>.ensureSafeAssignContext(item), <span class="hljs-string">';'</span>);
        },
        <span class="hljs-attr">ensureSafeObject</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">item</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-string">'ensureSafeObject('</span> + item + <span class="hljs-string">',text)'</span>;
        },
        <span class="hljs-attr">ensureSafeMemberName</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">item</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-string">'ensureSafeMemberName('</span> + item + <span class="hljs-string">',text)'</span>;
        },
        <span class="hljs-attr">ensureSafeFunction</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">item</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-string">'ensureSafeFunction('</span> + item + <span class="hljs-string">',text)'</span>;
        },
        <span class="hljs-attr">getStringValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">item</span>) </span>{
            <span class="hljs-keyword">this</span>.assign(item, <span class="hljs-string">'getStringValue('</span> + item + <span class="hljs-string">')'</span>);
        },
        <span class="hljs-attr">ensureSafeAssignContext</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">item</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-string">'ensureSafeAssignContext('</span> + item + <span class="hljs-string">',text)'</span>;
        },
        <span class="hljs-attr">lazyRecurse</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ast, intoId, nameId, recursionFn, create, skipWatchIdCheck</span>) </span>{
            <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                self.recurse(ast, intoId, nameId, recursionFn, create, skipWatchIdCheck);
            };
        },
        <span class="hljs-attr">lazyAssign</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">id, value</span>) </span>{
            <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                self.assign(id, value);
            };
        },
        <span class="hljs-attr">stringEscapeRegex</span>: <span class="hljs-regexp">/[^ a-zA-Z0-9]/g</span>,
        <span class="hljs-attr">stringEscapeFn</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">c</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-string">'\\u'</span> + (<span class="hljs-string">'0000'</span> + c.charCodeAt(<span class="hljs-number">0</span>).toString(<span class="hljs-number">16</span>)).slice(<span class="hljs-number">-4</span>);
        },
        <span class="hljs-attr">escape</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
            <span class="hljs-keyword">if</span> (isString(value)) <span class="hljs-keyword">return</span> <span class="hljs-string">"'"</span> + value.replace(<span class="hljs-keyword">this</span>.stringEscapeRegex, <span class="hljs-keyword">this</span>.stringEscapeFn) + <span class="hljs-string">"'"</span>;
            <span class="hljs-keyword">if</span> (isNumber(value)) <span class="hljs-keyword">return</span> value.toString();
            <span class="hljs-keyword">if</span> (value === <span class="hljs-literal">true</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">'true'</span>;
            <span class="hljs-keyword">if</span> (value === <span class="hljs-literal">false</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">'false'</span>;
            <span class="hljs-keyword">if</span> (value === <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">'null'</span>;
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'undefined'</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">'undefined'</span>;
            <span class="hljs-keyword">throw</span> $parseMinErr(<span class="hljs-string">'esc'</span>, <span class="hljs-string">'IMPOSSIBLE'</span>);
        },
        <span class="hljs-attr">nextId</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">skip, init</span>) </span>{
            <span class="hljs-keyword">var</span> id = <span class="hljs-string">'v'</span> + (<span class="hljs-keyword">this</span>.state.nextId++);
            <span class="hljs-keyword">if</span> (!skip) {
                <span class="hljs-keyword">this</span>.current().vars.push(id + (init ? <span class="hljs-string">'='</span> + init : <span class="hljs-string">''</span>));
            }
            <span class="hljs-keyword">return</span> id;
        },
        <span class="hljs-attr">current</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.state[<span class="hljs-keyword">this</span>.state.computing];
        }
    };

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ASTInterpreter</span>(<span class="hljs-params">astBuilder, $filter</span>) </span>{
        <span class="hljs-keyword">this</span>.astBuilder = astBuilder;
        <span class="hljs-keyword">this</span>.$filter = $filter;
    }
    ASTInterpreter.prototype = {
        <span class="hljs-attr">compile</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">expression, expensiveChecks</span>) </span>{
            <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
            <span class="hljs-keyword">var</span> ast = <span class="hljs-keyword">this</span>.astBuilder.ast(expression);
            <span class="hljs-keyword">this</span>.expression = expression;
            <span class="hljs-keyword">this</span>.expensiveChecks = expensiveChecks;
            findConstantAndWatchExpressions(ast, self.$filter);
            <span class="hljs-keyword">var</span> assignable;
            <span class="hljs-keyword">var</span> assign;
            <span class="hljs-keyword">if</span> ((assignable = assignableAST(ast))) {
                assign = <span class="hljs-keyword">this</span>.recurse(assignable);
            }
            <span class="hljs-keyword">var</span> toWatch = getInputs(ast.body);
            <span class="hljs-keyword">var</span> inputs;
            <span class="hljs-keyword">if</span> (toWatch) {
                inputs = [];
                forEach(toWatch, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">watch, key</span>) </span>{
                    <span class="hljs-keyword">var</span> input = self.recurse(watch);
                    watch.input = input;
                    inputs.push(input);
                    watch.watchId = key;
                });
            }
            <span class="hljs-keyword">var</span> expressions = [];
            forEach(ast.body, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">expression</span>) </span>{
                expressions.push(self.recurse(expression.expression));
            });
            <span class="hljs-keyword">var</span> fn = ast.body.length === <span class="hljs-number">0</span> ? noop :
                ast.body.length === <span class="hljs-number">1</span> ? expressions[<span class="hljs-number">0</span>] :
                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, locals</span>) </span>{
                    <span class="hljs-keyword">var</span> lastValue;
                    forEach(expressions, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">exp</span>) </span>{
                        lastValue = exp(scope, locals);
                    });
                    <span class="hljs-keyword">return</span> lastValue;
                };
            <span class="hljs-keyword">if</span> (assign) {
                fn.assign = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, value, locals</span>) </span>{
                    <span class="hljs-keyword">return</span> assign(scope, locals, value);
                };
            }
            <span class="hljs-keyword">if</span> (inputs) {
                fn.inputs = inputs;
            }
            fn.literal = isLiteral(ast);
            fn.constant = isConstant(ast);
            <span class="hljs-keyword">return</span> fn;
        },
        <span class="hljs-attr">recurse</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ast, context, create</span>) </span>{
            <span class="hljs-keyword">var</span> left, right, self = <span class="hljs-keyword">this</span>,
                args, expression;
            <span class="hljs-keyword">if</span> (ast.input) {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.inputs(ast.input, ast.watchId);
            }
            <span class="hljs-keyword">switch</span> (ast.type) {
                <span class="hljs-keyword">case</span> AST.Literal:
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.value(ast.value, context);
                <span class="hljs-keyword">case</span> AST.UnaryExpression:
                    right = <span class="hljs-keyword">this</span>.recurse(ast.argument);
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>[<span class="hljs-string">'unary'</span> + ast.operator](right, context);
                <span class="hljs-keyword">case</span> AST.BinaryExpression:
                    left = <span class="hljs-keyword">this</span>.recurse(ast.left);
                    right = <span class="hljs-keyword">this</span>.recurse(ast.right);
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>[<span class="hljs-string">'binary'</span> + ast.operator](left, right, context);
                <span class="hljs-keyword">case</span> AST.LogicalExpression:
                    left = <span class="hljs-keyword">this</span>.recurse(ast.left);
                    right = <span class="hljs-keyword">this</span>.recurse(ast.right);
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>[<span class="hljs-string">'binary'</span> + ast.operator](left, right, context);
                <span class="hljs-keyword">case</span> AST.ConditionalExpression:
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>[<span class="hljs-string">'ternary?:'</span>](
                        <span class="hljs-keyword">this</span>.recurse(ast.test),
                        <span class="hljs-keyword">this</span>.recurse(ast.alternate),
                        <span class="hljs-keyword">this</span>.recurse(ast.consequent),
                        context
                    );
                <span class="hljs-keyword">case</span> AST.Identifier:
                    ensureSafeMemberName(ast.name, self.expression);
                    <span class="hljs-keyword">return</span> self.identifier(ast.name,
                        self.expensiveChecks || isPossiblyDangerousMemberName(ast.name),
                        context, create, self.expression);
                <span class="hljs-keyword">case</span> AST.MemberExpression:
                    left = <span class="hljs-keyword">this</span>.recurse(ast.object, <span class="hljs-literal">false</span>, !!create);
                    <span class="hljs-keyword">if</span> (!ast.computed) {
                        ensureSafeMemberName(ast.property.name, self.expression);
                        right = ast.property.name;
                    }
                    <span class="hljs-keyword">if</span> (ast.computed) right = <span class="hljs-keyword">this</span>.recurse(ast.property);
                    <span class="hljs-keyword">return</span> ast.computed ?
                        <span class="hljs-keyword">this</span>.computedMember(left, right, context, create, self.expression) :
                        <span class="hljs-keyword">this</span>.nonComputedMember(left, right, self.expensiveChecks, context, create, self.expression);
                <span class="hljs-keyword">case</span> AST.CallExpression:
                    args = [];
                    forEach(ast.arguments, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">expr</span>) </span>{
                        args.push(self.recurse(expr));
                    });
                    <span class="hljs-keyword">if</span> (ast.filter) right = <span class="hljs-keyword">this</span>.$filter(ast.callee.name);
                    <span class="hljs-keyword">if</span> (!ast.filter) right = <span class="hljs-keyword">this</span>.recurse(ast.callee, <span class="hljs-literal">true</span>);
                    <span class="hljs-keyword">return</span> ast.filter ?
                        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, locals, assign, inputs</span>) </span>{
                            <span class="hljs-keyword">var</span> values = [];
                            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; args.length; ++i) {
                                values.push(args[i](scope, locals, assign, inputs));
                            }
                            <span class="hljs-keyword">var</span> value = right.apply(<span class="hljs-literal">undefined</span>, values, inputs);
                            <span class="hljs-keyword">return</span> context ? {
                                <span class="hljs-attr">context</span>: <span class="hljs-literal">undefined</span>,
                                <span class="hljs-attr">name</span>: <span class="hljs-literal">undefined</span>,
                                <span class="hljs-attr">value</span>: value
                            } : value;
                        } :
                        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, locals, assign, inputs</span>) </span>{
                            <span class="hljs-keyword">var</span> rhs = right(scope, locals, assign, inputs);
                            <span class="hljs-keyword">var</span> value;
                            <span class="hljs-keyword">if</span> (rhs.value != <span class="hljs-literal">null</span>) {
                                ensureSafeObject(rhs.context, self.expression);
                                ensureSafeFunction(rhs.value, self.expression);
                                <span class="hljs-keyword">var</span> values = [];
                                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; args.length; ++i) {
                                    values.push(ensureSafeObject(args[i](scope, locals, assign, inputs), self.expression));
                                }
                                value = ensureSafeObject(rhs.value.apply(rhs.context, values), self.expression);
                            }
                            <span class="hljs-keyword">return</span> context ? {
                                <span class="hljs-attr">value</span>: value
                            } : value;
                        };
                <span class="hljs-keyword">case</span> AST.AssignmentExpression:
                    left = <span class="hljs-keyword">this</span>.recurse(ast.left, <span class="hljs-literal">true</span>, <span class="hljs-number">1</span>);
                    right = <span class="hljs-keyword">this</span>.recurse(ast.right);
                    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, locals, assign, inputs</span>) </span>{
                        <span class="hljs-keyword">var</span> lhs = left(scope, locals, assign, inputs);
                        <span class="hljs-keyword">var</span> rhs = right(scope, locals, assign, inputs);
                        ensureSafeObject(lhs.value, self.expression);
                        ensureSafeAssignContext(lhs.context);
                        lhs.context[lhs.name] = rhs;
                        <span class="hljs-keyword">return</span> context ? {
                            <span class="hljs-attr">value</span>: rhs
                        } : rhs;
                    };
                <span class="hljs-keyword">case</span> AST.ArrayExpression:
                    args = [];
                    forEach(ast.elements, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">expr</span>) </span>{
                        args.push(self.recurse(expr));
                    });
                    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, locals, assign, inputs</span>) </span>{
                        <span class="hljs-keyword">var</span> value = [];
                        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; args.length; ++i) {
                            value.push(args[i](scope, locals, assign, inputs));
                        }
                        <span class="hljs-keyword">return</span> context ? {
                            <span class="hljs-attr">value</span>: value
                        } : value;
                    };
                <span class="hljs-keyword">case</span> AST.ObjectExpression:
                    args = [];
                    forEach(ast.properties, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">property</span>) </span>{
                        <span class="hljs-keyword">if</span> (property.computed) {
                            args.push({
                                <span class="hljs-attr">key</span>: self.recurse(property.key),
                                <span class="hljs-attr">computed</span>: <span class="hljs-literal">true</span>,
                                <span class="hljs-attr">value</span>: self.recurse(property.value)
                            });
                        } <span class="hljs-keyword">else</span> {
                            args.push({
                                <span class="hljs-attr">key</span>: property.key.type === AST.Identifier ?
                                    property.key.name :
                                    (<span class="hljs-string">''</span> + property.key.value),
                                <span class="hljs-attr">computed</span>: <span class="hljs-literal">false</span>,
                                <span class="hljs-attr">value</span>: self.recurse(property.value)
                            });
                        }
                    });
                    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, locals, assign, inputs</span>) </span>{
                        <span class="hljs-keyword">var</span> value = {};
                        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; args.length; ++i) {
                            <span class="hljs-keyword">if</span> (args[i].computed) {
                                value[args[i].key(scope, locals, assign, inputs)] = args[i].value(scope, locals, assign, inputs);
                            } <span class="hljs-keyword">else</span> {
                                value[args[i].key] = args[i].value(scope, locals, assign, inputs);
                            }
                        }
                        <span class="hljs-keyword">return</span> context ? {
                            <span class="hljs-attr">value</span>: value
                        } : value;
                    };
                <span class="hljs-keyword">case</span> AST.ThisExpression:
                    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope</span>) </span>{
                        <span class="hljs-keyword">return</span> context ? {
                            <span class="hljs-attr">value</span>: scope
                        } : scope;
                    };
                <span class="hljs-keyword">case</span> AST.LocalsExpression:
                    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, locals</span>) </span>{
                        <span class="hljs-keyword">return</span> context ? {
                            <span class="hljs-attr">value</span>: locals
                        } : locals;
                    };
                <span class="hljs-keyword">case</span> AST.NGValueParameter:
                    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, locals, assign</span>) </span>{
                        <span class="hljs-keyword">return</span> context ? {
                            <span class="hljs-attr">value</span>: assign
                        } : assign;
                    };
            }
        },
        <span class="hljs-string">'unary+'</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">argument, context</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, locals, assign, inputs</span>) </span>{
                <span class="hljs-keyword">var</span> arg = argument(scope, locals, assign, inputs);
                <span class="hljs-keyword">if</span> (isDefined(arg)) {
                    arg = +arg;
                } <span class="hljs-keyword">else</span> {
                    arg = <span class="hljs-number">0</span>;
                }
                <span class="hljs-keyword">return</span> context ? {
                    <span class="hljs-attr">value</span>: arg
                } : arg;
            };
        },
        <span class="hljs-string">'unary-'</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">argument, context</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, locals, assign, inputs</span>) </span>{
                <span class="hljs-keyword">var</span> arg = argument(scope, locals, assign, inputs);
                <span class="hljs-keyword">if</span> (isDefined(arg)) {
                    arg = -arg;
                } <span class="hljs-keyword">else</span> {
                    arg = <span class="hljs-number">0</span>;
                }
                <span class="hljs-keyword">return</span> context ? {
                    <span class="hljs-attr">value</span>: arg
                } : arg;
            };
        },
        <span class="hljs-string">'unary!'</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">argument, context</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, locals, assign, inputs</span>) </span>{
                <span class="hljs-keyword">var</span> arg = !argument(scope, locals, assign, inputs);
                <span class="hljs-keyword">return</span> context ? {
                    <span class="hljs-attr">value</span>: arg
                } : arg;
            };
        },
        <span class="hljs-string">'binary+'</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">left, right, context</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, locals, assign, inputs</span>) </span>{
                <span class="hljs-keyword">var</span> lhs = left(scope, locals, assign, inputs);
                <span class="hljs-keyword">var</span> rhs = right(scope, locals, assign, inputs);
                <span class="hljs-keyword">var</span> arg = plusFn(lhs, rhs);
                <span class="hljs-keyword">return</span> context ? {
                    <span class="hljs-attr">value</span>: arg
                } : arg;
            };
        },
        <span class="hljs-string">'binary-'</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">left, right, context</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, locals, assign, inputs</span>) </span>{
                <span class="hljs-keyword">var</span> lhs = left(scope, locals, assign, inputs);
                <span class="hljs-keyword">var</span> rhs = right(scope, locals, assign, inputs);
                <span class="hljs-keyword">var</span> arg = (isDefined(lhs) ? lhs : <span class="hljs-number">0</span>) - (isDefined(rhs) ? rhs : <span class="hljs-number">0</span>);
                <span class="hljs-keyword">return</span> context ? {
                    <span class="hljs-attr">value</span>: arg
                } : arg;
            };
        },
        <span class="hljs-string">'binary*'</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">left, right, context</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, locals, assign, inputs</span>) </span>{
                <span class="hljs-keyword">var</span> arg = left(scope, locals, assign, inputs) * right(scope, locals, assign, inputs);
                <span class="hljs-keyword">return</span> context ? {
                    <span class="hljs-attr">value</span>: arg
                } : arg;
            };
        },
        <span class="hljs-string">'binary/'</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">left, right, context</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, locals, assign, inputs</span>) </span>{
                <span class="hljs-keyword">var</span> arg = left(scope, locals, assign, inputs) / right(scope, locals, assign, inputs);
                <span class="hljs-keyword">return</span> context ? {
                    <span class="hljs-attr">value</span>: arg
                } : arg;
            };
        },
        <span class="hljs-string">'binary%'</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">left, right, context</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, locals, assign, inputs</span>) </span>{
                <span class="hljs-keyword">var</span> arg = left(scope, locals, assign, inputs) % right(scope, locals, assign, inputs);
                <span class="hljs-keyword">return</span> context ? {
                    <span class="hljs-attr">value</span>: arg
                } : arg;
            };
        },
        <span class="hljs-string">'binary==='</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">left, right, context</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, locals, assign, inputs</span>) </span>{
                <span class="hljs-keyword">var</span> arg = left(scope, locals, assign, inputs) === right(scope, locals, assign, inputs);
                <span class="hljs-keyword">return</span> context ? {
                    <span class="hljs-attr">value</span>: arg
                } : arg;
            };
        },
        <span class="hljs-string">'binary!=='</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">left, right, context</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, locals, assign, inputs</span>) </span>{
                <span class="hljs-keyword">var</span> arg = left(scope, locals, assign, inputs) !== right(scope, locals, assign, inputs);
                <span class="hljs-keyword">return</span> context ? {
                    <span class="hljs-attr">value</span>: arg
                } : arg;
            };
        },
        <span class="hljs-string">'binary=='</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">left, right, context</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, locals, assign, inputs</span>) </span>{
                <span class="hljs-keyword">var</span> arg = left(scope, locals, assign, inputs) == right(scope, locals, assign, inputs);
                <span class="hljs-keyword">return</span> context ? {
                    <span class="hljs-attr">value</span>: arg
                } : arg;
            };
        },
        <span class="hljs-string">'binary!='</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">left, right, context</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, locals, assign, inputs</span>) </span>{
                <span class="hljs-keyword">var</span> arg = left(scope, locals, assign, inputs) != right(scope, locals, assign, inputs);
                <span class="hljs-keyword">return</span> context ? {
                    <span class="hljs-attr">value</span>: arg
                } : arg;
            };
        },
        <span class="hljs-string">'binary&lt;'</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">left, right, context</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, locals, assign, inputs</span>) </span>{
                <span class="hljs-keyword">var</span> arg = left(scope, locals, assign, inputs) &lt; right(scope, locals, assign, inputs);
                <span class="hljs-keyword">return</span> context ? {
                    <span class="hljs-attr">value</span>: arg
                } : arg;
            };
        },
        <span class="hljs-string">'binary&gt;'</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">left, right, context</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, locals, assign, inputs</span>) </span>{
                <span class="hljs-keyword">var</span> arg = left(scope, locals, assign, inputs) &gt; right(scope, locals, assign, inputs);
                <span class="hljs-keyword">return</span> context ? {
                    <span class="hljs-attr">value</span>: arg
                } : arg;
            };
        },
        <span class="hljs-string">'binary&lt;='</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">left, right, context</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, locals, assign, inputs</span>) </span>{
                <span class="hljs-keyword">var</span> arg = left(scope, locals, assign, inputs) &lt;= right(scope, locals, assign, inputs);
                <span class="hljs-keyword">return</span> context ? {
                    <span class="hljs-attr">value</span>: arg
                } : arg;
            };
        },
        <span class="hljs-string">'binary&gt;='</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">left, right, context</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, locals, assign, inputs</span>) </span>{
                <span class="hljs-keyword">var</span> arg = left(scope, locals, assign, inputs) &gt;= right(scope, locals, assign, inputs);
                <span class="hljs-keyword">return</span> context ? {
                    <span class="hljs-attr">value</span>: arg
                } : arg;
            };
        },
        <span class="hljs-string">'binary&amp;&amp;'</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">left, right, context</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, locals, assign, inputs</span>) </span>{
                <span class="hljs-keyword">var</span> arg = left(scope, locals, assign, inputs) &amp;&amp; right(scope, locals, assign, inputs);
                <span class="hljs-keyword">return</span> context ? {
                    <span class="hljs-attr">value</span>: arg
                } : arg;
            };
        },
        <span class="hljs-string">'binary||'</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">left, right, context</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, locals, assign, inputs</span>) </span>{
                <span class="hljs-keyword">var</span> arg = left(scope, locals, assign, inputs) || right(scope, locals, assign, inputs);
                <span class="hljs-keyword">return</span> context ? {
                    <span class="hljs-attr">value</span>: arg
                } : arg;
            };
        },
        <span class="hljs-string">'ternary?:'</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">test, alternate, consequent, context</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, locals, assign, inputs</span>) </span>{
                <span class="hljs-keyword">var</span> arg = test(scope, locals, assign, inputs) ? alternate(scope, locals, assign, inputs) : consequent(scope, locals, assign, inputs);
                <span class="hljs-keyword">return</span> context ? {
                    <span class="hljs-attr">value</span>: arg
                } : arg;
            };
        },
        <span class="hljs-attr">value</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, context</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> context ? {
                    <span class="hljs-attr">context</span>: <span class="hljs-literal">undefined</span>,
                    <span class="hljs-attr">name</span>: <span class="hljs-literal">undefined</span>,
                    <span class="hljs-attr">value</span>: value
                } : value;
            };
        },
        <span class="hljs-attr">identifier</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name, expensiveChecks, context, create, expression</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, locals, assign, inputs</span>) </span>{
                <span class="hljs-keyword">var</span> base = locals &amp;&amp; (name <span class="hljs-keyword">in</span> locals) ? locals : scope;
                <span class="hljs-keyword">if</span> (create &amp;&amp; create !== <span class="hljs-number">1</span> &amp;&amp; base &amp;&amp; !(base[name])) {
                    base[name] = {};
                }
                <span class="hljs-keyword">var</span> value = base ? base[name] : <span class="hljs-literal">undefined</span>;
                <span class="hljs-keyword">if</span> (expensiveChecks) {
                    ensureSafeObject(value, expression);
                }
                <span class="hljs-keyword">if</span> (context) {
                    <span class="hljs-keyword">return</span> {
                        <span class="hljs-attr">context</span>: base,
                        <span class="hljs-attr">name</span>: name,
                        <span class="hljs-attr">value</span>: value
                    };
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">return</span> value;
                }
            };
        },
        <span class="hljs-attr">computedMember</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">left, right, context, create, expression</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, locals, assign, inputs</span>) </span>{
                <span class="hljs-keyword">var</span> lhs = left(scope, locals, assign, inputs);
                <span class="hljs-keyword">var</span> rhs;
                <span class="hljs-keyword">var</span> value;
                <span class="hljs-keyword">if</span> (lhs != <span class="hljs-literal">null</span>) {
                    rhs = right(scope, locals, assign, inputs);
                    rhs = getStringValue(rhs);
                    ensureSafeMemberName(rhs, expression);
                    <span class="hljs-keyword">if</span> (create &amp;&amp; create !== <span class="hljs-number">1</span>) {
                        ensureSafeAssignContext(lhs);
                        <span class="hljs-keyword">if</span> (lhs &amp;&amp; !(lhs[rhs])) {
                            lhs[rhs] = {};
                        }
                    }
                    value = lhs[rhs];
                    ensureSafeObject(value, expression);
                }
                <span class="hljs-keyword">if</span> (context) {
                    <span class="hljs-keyword">return</span> {
                        <span class="hljs-attr">context</span>: lhs,
                        <span class="hljs-attr">name</span>: rhs,
                        <span class="hljs-attr">value</span>: value
                    };
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">return</span> value;
                }
            };
        },
        <span class="hljs-attr">nonComputedMember</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">left, right, expensiveChecks, context, create, expression</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, locals, assign, inputs</span>) </span>{
                <span class="hljs-keyword">var</span> lhs = left(scope, locals, assign, inputs);
                <span class="hljs-keyword">if</span> (create &amp;&amp; create !== <span class="hljs-number">1</span>) {
                    ensureSafeAssignContext(lhs);
                    <span class="hljs-keyword">if</span> (lhs &amp;&amp; !(lhs[right])) {
                        lhs[right] = {};
                    }
                }
                <span class="hljs-keyword">var</span> value = lhs != <span class="hljs-literal">null</span> ? lhs[right] : <span class="hljs-literal">undefined</span>;
                <span class="hljs-keyword">if</span> (expensiveChecks || isPossiblyDangerousMemberName(right)) {
                    ensureSafeObject(value, expression);
                }
                <span class="hljs-keyword">if</span> (context) {
                    <span class="hljs-keyword">return</span> {
                        <span class="hljs-attr">context</span>: lhs,
                        <span class="hljs-attr">name</span>: right,
                        <span class="hljs-attr">value</span>: value
                    };
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">return</span> value;
                }
            };
        },
        <span class="hljs-attr">inputs</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">input, watchId</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, value, locals, inputs</span>) </span>{
                <span class="hljs-keyword">if</span> (inputs) <span class="hljs-keyword">return</span> inputs[watchId];
                <span class="hljs-keyword">return</span> input(scope, value, locals);
            };
        }
    };
    <span class="hljs-keyword">var</span> Parser = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">lexer, $filter, options</span>) </span>{
        <span class="hljs-keyword">this</span>.lexer = lexer;
        <span class="hljs-keyword">this</span>.$filter = $filter;
        <span class="hljs-keyword">this</span>.options = options;
        <span class="hljs-keyword">this</span>.ast = <span class="hljs-keyword">new</span> AST(lexer, options);
        <span class="hljs-keyword">this</span>.astCompiler = options.csp ? <span class="hljs-keyword">new</span> ASTInterpreter(<span class="hljs-keyword">this</span>.ast, $filter) :
            <span class="hljs-keyword">new</span> ASTCompiler(<span class="hljs-keyword">this</span>.ast, $filter);
    };
    Parser.prototype = {
        <span class="hljs-attr">constructor</span>: Parser,
        <span class="hljs-attr">parse</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">text</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.astCompiler.compile(text, <span class="hljs-keyword">this</span>.options.expensiveChecks);
        }
    };

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isPossiblyDangerousMemberName</span>(<span class="hljs-params">name</span>) </span>{
        <span class="hljs-keyword">return</span> name == <span class="hljs-string">'constructor'</span>;
    }
    <span class="hljs-keyword">var</span> objectValueOf = <span class="hljs-built_in">Object</span>.prototype.valueOf;

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getValueOf</span>(<span class="hljs-params">value</span>) </span>{
        <span class="hljs-keyword">return</span> isFunction(value.valueOf) ? value.valueOf() : objectValueOf.call(value);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$ParseProvider</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> cacheDefault = createMap();
        <span class="hljs-keyword">var</span> cacheExpensive = createMap();
        <span class="hljs-keyword">var</span> literals = {
            <span class="hljs-string">'true'</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-string">'false'</span>: <span class="hljs-literal">false</span>,
            <span class="hljs-string">'null'</span>: <span class="hljs-literal">null</span>,
            <span class="hljs-string">'undefined'</span>: <span class="hljs-literal">undefined</span>
        };
        <span class="hljs-keyword">var</span> identStart, identContinue;
        <span class="hljs-keyword">this</span>.addLiteral = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">literalName, literalValue</span>) </span>{
            literals[literalName] = literalValue;
        };
        <span class="hljs-keyword">this</span>.setIdentifierFns = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">identifierStart, identifierContinue</span>) </span>{
            identStart = identifierStart;
            identContinue = identifierContinue;
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        };
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$filter'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$filter</span>) </span>{
            <span class="hljs-keyword">var</span> noUnsafeEval = csp().noUnsafeEval;
            <span class="hljs-keyword">var</span> $parseOptions = {
                    <span class="hljs-attr">csp</span>: noUnsafeEval,
                    <span class="hljs-attr">expensiveChecks</span>: <span class="hljs-literal">false</span>,
                    <span class="hljs-attr">literals</span>: copy(literals),
                    <span class="hljs-attr">isIdentifierStart</span>: isFunction(identStart) &amp;&amp; identStart,
                    <span class="hljs-attr">isIdentifierContinue</span>: isFunction(identContinue) &amp;&amp; identContinue
                },
                $parseOptionsExpensive = {
                    <span class="hljs-attr">csp</span>: noUnsafeEval,
                    <span class="hljs-attr">expensiveChecks</span>: <span class="hljs-literal">true</span>,
                    <span class="hljs-attr">literals</span>: copy(literals),
                    <span class="hljs-attr">isIdentifierStart</span>: isFunction(identStart) &amp;&amp; identStart,
                    <span class="hljs-attr">isIdentifierContinue</span>: isFunction(identContinue) &amp;&amp; identContinue
                };
            <span class="hljs-keyword">var</span> runningChecksEnabled = <span class="hljs-literal">false</span>;
            $parse.$$runningExpensiveChecks = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> runningChecksEnabled;
            };
            <span class="hljs-keyword">return</span> $parse;

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$parse</span>(<span class="hljs-params">exp, interceptorFn, expensiveChecks</span>) </span>{
                <span class="hljs-keyword">var</span> parsedExpression, oneTime, cacheKey;
                expensiveChecks = expensiveChecks || runningChecksEnabled;
                <span class="hljs-keyword">switch</span> (<span class="hljs-keyword">typeof</span> exp) {
                    <span class="hljs-keyword">case</span> <span class="hljs-string">'string'</span>:
                        exp = exp.trim();
                        cacheKey = exp;
                        <span class="hljs-keyword">var</span> cache = (expensiveChecks ? cacheExpensive : cacheDefault);
                        parsedExpression = cache[cacheKey];
                        <span class="hljs-keyword">if</span> (!parsedExpression) {
                            <span class="hljs-keyword">if</span> (exp.charAt(<span class="hljs-number">0</span>) === <span class="hljs-string">':'</span> &amp;&amp; exp.charAt(<span class="hljs-number">1</span>) === <span class="hljs-string">':'</span>) {
                                oneTime = <span class="hljs-literal">true</span>;
                                exp = exp.substring(<span class="hljs-number">2</span>);
                            }
                            <span class="hljs-keyword">var</span> parseOptions = expensiveChecks ? $parseOptionsExpensive : $parseOptions;
                            <span class="hljs-keyword">var</span> lexer = <span class="hljs-keyword">new</span> Lexer(parseOptions);
                            <span class="hljs-keyword">var</span> parser = <span class="hljs-keyword">new</span> Parser(lexer, $filter, parseOptions);
                            parsedExpression = parser.parse(exp);
                            <span class="hljs-keyword">if</span> (parsedExpression.constant) {
                                parsedExpression.$$watchDelegate = constantWatchDelegate;
                            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (oneTime) {
                                parsedExpression.$$watchDelegate = parsedExpression.literal ?
                                    oneTimeLiteralWatchDelegate : oneTimeWatchDelegate;
                            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (parsedExpression.inputs) {
                                parsedExpression.$$watchDelegate = inputsWatchDelegate;
                            }
                            <span class="hljs-keyword">if</span> (expensiveChecks) {
                                parsedExpression = expensiveChecksInterceptor(parsedExpression);
                            }
                            cache[cacheKey] = parsedExpression;
                        }
                        <span class="hljs-keyword">return</span> addInterceptor(parsedExpression, interceptorFn);
                    <span class="hljs-keyword">case</span> <span class="hljs-string">'function'</span>:
                        <span class="hljs-keyword">return</span> addInterceptor(exp, interceptorFn);
                    <span class="hljs-keyword">default</span>:
                        <span class="hljs-keyword">return</span> addInterceptor(noop, interceptorFn);
                }
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">expensiveChecksInterceptor</span>(<span class="hljs-params">fn</span>) </span>{
                <span class="hljs-keyword">if</span> (!fn) <span class="hljs-keyword">return</span> fn;
                expensiveCheckFn.$$watchDelegate = fn.$$watchDelegate;
                expensiveCheckFn.assign = expensiveChecksInterceptor(fn.assign);
                expensiveCheckFn.constant = fn.constant;
                expensiveCheckFn.literal = fn.literal;
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; fn.inputs &amp;&amp; i &lt; fn.inputs.length; ++i) {
                    fn.inputs[i] = expensiveChecksInterceptor(fn.inputs[i]);
                }
                expensiveCheckFn.inputs = fn.inputs;
                <span class="hljs-keyword">return</span> expensiveCheckFn;

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">expensiveCheckFn</span>(<span class="hljs-params">scope, locals, assign, inputs</span>) </span>{
                    <span class="hljs-keyword">var</span> expensiveCheckOldValue = runningChecksEnabled;
                    runningChecksEnabled = <span class="hljs-literal">true</span>;
                    <span class="hljs-keyword">try</span> {
                        <span class="hljs-keyword">return</span> fn(scope, locals, assign, inputs);
                    } <span class="hljs-keyword">finally</span> {
                        runningChecksEnabled = expensiveCheckOldValue;
                    }
                }
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">expressionInputDirtyCheck</span>(<span class="hljs-params">newValue, oldValueOfValue</span>) </span>{
                <span class="hljs-keyword">if</span> (newValue == <span class="hljs-literal">null</span> || oldValueOfValue == <span class="hljs-literal">null</span>) {
                    <span class="hljs-keyword">return</span> newValue === oldValueOfValue;
                }
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> newValue === <span class="hljs-string">'object'</span>) {
                    newValue = getValueOf(newValue);
                    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> newValue === <span class="hljs-string">'object'</span>) {
                        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                    }
                }
                <span class="hljs-keyword">return</span> newValue === oldValueOfValue || (newValue !== newValue &amp;&amp; oldValueOfValue !== oldValueOfValue);
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">inputsWatchDelegate</span>(<span class="hljs-params">scope, listener, objectEquality, parsedExpression, prettyPrintExpression</span>) </span>{
                <span class="hljs-keyword">var</span> inputExpressions = parsedExpression.inputs;
                <span class="hljs-keyword">var</span> lastResult;
                <span class="hljs-keyword">if</span> (inputExpressions.length === <span class="hljs-number">1</span>) {
                    <span class="hljs-keyword">var</span> oldInputValueOf = expressionInputDirtyCheck;
                    inputExpressions = inputExpressions[<span class="hljs-number">0</span>];
                    <span class="hljs-keyword">return</span> scope.$watch(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">expressionInputWatch</span>(<span class="hljs-params">scope</span>) </span>{
                        <span class="hljs-keyword">var</span> newInputValue = inputExpressions(scope);
                        <span class="hljs-keyword">if</span> (!expressionInputDirtyCheck(newInputValue, oldInputValueOf)) {
                            lastResult = parsedExpression(scope, <span class="hljs-literal">undefined</span>, <span class="hljs-literal">undefined</span>, [newInputValue]);
                            oldInputValueOf = newInputValue &amp;&amp; getValueOf(newInputValue);
                        }
                        <span class="hljs-keyword">return</span> lastResult;
                    }, listener, objectEquality, prettyPrintExpression);
                }
                <span class="hljs-keyword">var</span> oldInputValueOfValues = [];
                <span class="hljs-keyword">var</span> oldInputValues = [];
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, ii = inputExpressions.length; i &lt; ii; i++) {
                    oldInputValueOfValues[i] = expressionInputDirtyCheck;
                    oldInputValues[i] = <span class="hljs-literal">null</span>;
                }
                <span class="hljs-keyword">return</span> scope.$watch(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">expressionInputsWatch</span>(<span class="hljs-params">scope</span>) </span>{
                    <span class="hljs-keyword">var</span> changed = <span class="hljs-literal">false</span>;
                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, ii = inputExpressions.length; i &lt; ii; i++) {
                        <span class="hljs-keyword">var</span> newInputValue = inputExpressions[i](scope);
                        <span class="hljs-keyword">if</span> (changed || (changed = !expressionInputDirtyCheck(newInputValue, oldInputValueOfValues[i]))) {
                            oldInputValues[i] = newInputValue;
                            oldInputValueOfValues[i] = newInputValue &amp;&amp; getValueOf(newInputValue);
                        }
                    }
                    <span class="hljs-keyword">if</span> (changed) {
                        lastResult = parsedExpression(scope, <span class="hljs-literal">undefined</span>, <span class="hljs-literal">undefined</span>, oldInputValues);
                    }
                    <span class="hljs-keyword">return</span> lastResult;
                }, listener, objectEquality, prettyPrintExpression);
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">oneTimeWatchDelegate</span>(<span class="hljs-params">scope, listener, objectEquality, parsedExpression</span>) </span>{
                <span class="hljs-keyword">var</span> unwatch, lastValue;
                <span class="hljs-keyword">return</span> unwatch = scope.$watch(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">oneTimeWatch</span>(<span class="hljs-params">scope</span>) </span>{
                    <span class="hljs-keyword">return</span> parsedExpression(scope);
                }, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">oneTimeListener</span>(<span class="hljs-params">value, old, scope</span>) </span>{
                    lastValue = value;
                    <span class="hljs-keyword">if</span> (isFunction(listener)) {
                        listener.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
                    }
                    <span class="hljs-keyword">if</span> (isDefined(value)) {
                        scope.$$postDigest(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            <span class="hljs-keyword">if</span> (isDefined(lastValue)) {
                                unwatch();
                            }
                        });
                    }
                }, objectEquality);
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">oneTimeLiteralWatchDelegate</span>(<span class="hljs-params">scope, listener, objectEquality, parsedExpression</span>) </span>{
                <span class="hljs-keyword">var</span> unwatch, lastValue;
                <span class="hljs-keyword">return</span> unwatch = scope.$watch(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">oneTimeWatch</span>(<span class="hljs-params">scope</span>) </span>{
                    <span class="hljs-keyword">return</span> parsedExpression(scope);
                }, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">oneTimeListener</span>(<span class="hljs-params">value, old, scope</span>) </span>{
                    lastValue = value;
                    <span class="hljs-keyword">if</span> (isFunction(listener)) {
                        listener.call(<span class="hljs-keyword">this</span>, value, old, scope);
                    }
                    <span class="hljs-keyword">if</span> (isAllDefined(value)) {
                        scope.$$postDigest(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            <span class="hljs-keyword">if</span> (isAllDefined(lastValue)) unwatch();
                        });
                    }
                }, objectEquality);

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isAllDefined</span>(<span class="hljs-params">value</span>) </span>{
                    <span class="hljs-keyword">var</span> allDefined = <span class="hljs-literal">true</span>;
                    forEach(value, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">val</span>) </span>{
                        <span class="hljs-keyword">if</span> (!isDefined(val)) allDefined = <span class="hljs-literal">false</span>;
                    });
                    <span class="hljs-keyword">return</span> allDefined;
                }
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">constantWatchDelegate</span>(<span class="hljs-params">scope, listener, objectEquality, parsedExpression</span>) </span>{
                <span class="hljs-keyword">var</span> unwatch;
                <span class="hljs-keyword">return</span> unwatch = scope.$watch(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">constantWatch</span>(<span class="hljs-params">scope</span>) </span>{
                    unwatch();
                    <span class="hljs-keyword">return</span> parsedExpression(scope);
                }, listener, objectEquality);
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addInterceptor</span>(<span class="hljs-params">parsedExpression, interceptorFn</span>) </span>{
                <span class="hljs-keyword">if</span> (!interceptorFn) <span class="hljs-keyword">return</span> parsedExpression;
                <span class="hljs-keyword">var</span> watchDelegate = parsedExpression.$$watchDelegate;
                <span class="hljs-keyword">var</span> useInputs = <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">var</span> regularWatch =
                    watchDelegate !== oneTimeLiteralWatchDelegate &amp;&amp;
                    watchDelegate !== oneTimeWatchDelegate;
                <span class="hljs-keyword">var</span> fn = regularWatch ? <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">regularInterceptedExpression</span>(<span class="hljs-params">scope, locals, assign, inputs</span>) </span>{
                    <span class="hljs-keyword">var</span> value = useInputs &amp;&amp; inputs ? inputs[<span class="hljs-number">0</span>] : parsedExpression(scope, locals, assign, inputs);
                    <span class="hljs-keyword">return</span> interceptorFn(value, scope, locals);
                } : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">oneTimeInterceptedExpression</span>(<span class="hljs-params">scope, locals, assign, inputs</span>) </span>{
                    <span class="hljs-keyword">var</span> value = parsedExpression(scope, locals, assign, inputs);
                    <span class="hljs-keyword">var</span> result = interceptorFn(value, scope, locals);
                    <span class="hljs-keyword">return</span> isDefined(value) ? result : value;
                };
                <span class="hljs-keyword">if</span> (parsedExpression.$$watchDelegate &amp;&amp;
                    parsedExpression.$$watchDelegate !== inputsWatchDelegate) {
                    fn.$$watchDelegate = parsedExpression.$$watchDelegate;
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!interceptorFn.$stateful) {
                    fn.$$watchDelegate = inputsWatchDelegate;
                    useInputs = !parsedExpression.inputs;
                    fn.inputs = parsedExpression.inputs ? parsedExpression.inputs : [parsedExpression];
                }
                <span class="hljs-keyword">return</span> fn;
            }
        }];
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$QProvider</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$rootScope'</span>, <span class="hljs-string">'$exceptionHandler'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$rootScope, $exceptionHandler</span>) </span>{
            <span class="hljs-keyword">return</span> qFactory(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) </span>{
                $rootScope.$evalAsync(callback);
            }, $exceptionHandler);
        }];
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$$QProvider</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$browser'</span>, <span class="hljs-string">'$exceptionHandler'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$browser, $exceptionHandler</span>) </span>{
            <span class="hljs-keyword">return</span> qFactory(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) </span>{
                $browser.defer(callback);
            }, $exceptionHandler);
        }];
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">qFactory</span>(<span class="hljs-params">nextTick, exceptionHandler</span>) </span>{
        <span class="hljs-keyword">var</span> $qMinErr = minErr(<span class="hljs-string">'$q'</span>, <span class="hljs-built_in">TypeError</span>);
        <span class="hljs-keyword">var</span> defer = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> d = <span class="hljs-keyword">new</span> Deferred();
            d.resolve = simpleBind(d, d.resolve);
            d.reject = simpleBind(d, d.reject);
            d.notify = simpleBind(d, d.notify);
            <span class="hljs-keyword">return</span> d;
        };

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Promise</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">this</span>.$$state = {
                <span class="hljs-attr">status</span>: <span class="hljs-number">0</span>
            };
        }
        extend(<span class="hljs-built_in">Promise</span>.prototype, {
            <span class="hljs-attr">then</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">onFulfilled, onRejected, progressBack</span>) </span>{
                <span class="hljs-keyword">if</span> (isUndefined(onFulfilled) &amp;&amp; isUndefined(onRejected) &amp;&amp; isUndefined(progressBack)) {
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
                }
                <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">new</span> Deferred();
                <span class="hljs-keyword">this</span>.$$state.pending = <span class="hljs-keyword">this</span>.$$state.pending || [];
                <span class="hljs-keyword">this</span>.$$state.pending.push([result, onFulfilled, onRejected, progressBack]);
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.$$state.status &gt; <span class="hljs-number">0</span>) scheduleProcessQueue(<span class="hljs-keyword">this</span>.$$state);
                <span class="hljs-keyword">return</span> result.promise;
            },
            <span class="hljs-string">"catch"</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.then(<span class="hljs-literal">null</span>, callback);
            },
            <span class="hljs-string">"finally"</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback, progressBack</span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                    <span class="hljs-keyword">return</span> handleCallback(value, <span class="hljs-literal">true</span>, callback);
                }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) </span>{
                    <span class="hljs-keyword">return</span> handleCallback(error, <span class="hljs-literal">false</span>, callback);
                }, progressBack);
            }
        });

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">simpleBind</span>(<span class="hljs-params">context, fn</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                fn.call(context, value);
            };
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processQueue</span>(<span class="hljs-params">state</span>) </span>{
            <span class="hljs-keyword">var</span> fn, deferred, pending;
            pending = state.pending;
            state.processScheduled = <span class="hljs-literal">false</span>;
            state.pending = <span class="hljs-literal">undefined</span>;
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, ii = pending.length; i &lt; ii; ++i) {
                deferred = pending[i][<span class="hljs-number">0</span>];
                fn = pending[i][state.status];
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-keyword">if</span> (isFunction(fn)) {
                        deferred.resolve(fn(state.value));
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (state.status === <span class="hljs-number">1</span>) {
                        deferred.resolve(state.value);
                    } <span class="hljs-keyword">else</span> {
                        deferred.reject(state.value);
                    }
                } <span class="hljs-keyword">catch</span> (e) {
                    deferred.reject(e);
                    exceptionHandler(e);
                }
            }
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">scheduleProcessQueue</span>(<span class="hljs-params">state</span>) </span>{
            <span class="hljs-keyword">if</span> (state.processScheduled || !state.pending) <span class="hljs-keyword">return</span>;
            state.processScheduled = <span class="hljs-literal">true</span>;
            nextTick(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                processQueue(state);
            });
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Deferred</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">this</span>.promise = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>();
        }
        extend(Deferred.prototype, {
            <span class="hljs-attr">resolve</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">val</span>) </span>{
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.promise.$$state.status) <span class="hljs-keyword">return</span>;
                <span class="hljs-keyword">if</span> (val === <span class="hljs-keyword">this</span>.promise) {
                    <span class="hljs-keyword">this</span>.$$reject($qMinErr(
                        <span class="hljs-string">'qcycle'</span>,
                        <span class="hljs-string">"Expected promise to be resolved with value other than itself '{0}'"</span>,
                        val));
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">this</span>.$$resolve(val);
                }
            },
            <span class="hljs-attr">$$resolve</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">val</span>) </span>{
                <span class="hljs-keyword">var</span> then;
                <span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>;
                <span class="hljs-keyword">var</span> done = <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-keyword">if</span> ((isObject(val) || isFunction(val))) then = val &amp;&amp; val.then;
                    <span class="hljs-keyword">if</span> (isFunction(then)) {
                        <span class="hljs-keyword">this</span>.promise.$$state.status = <span class="hljs-number">-1</span>;
                        then.call(val, resolvePromise, rejectPromise, simpleBind(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.notify));
                    } <span class="hljs-keyword">else</span> {
                        <span class="hljs-keyword">this</span>.promise.$$state.value = val;
                        <span class="hljs-keyword">this</span>.promise.$$state.status = <span class="hljs-number">1</span>;
                        scheduleProcessQueue(<span class="hljs-keyword">this</span>.promise.$$state);
                    }
                } <span class="hljs-keyword">catch</span> (e) {
                    rejectPromise(e);
                    exceptionHandler(e);
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resolvePromise</span>(<span class="hljs-params">val</span>) </span>{
                    <span class="hljs-keyword">if</span> (done) <span class="hljs-keyword">return</span>;
                    done = <span class="hljs-literal">true</span>;
                    that.$$resolve(val);
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">rejectPromise</span>(<span class="hljs-params">val</span>) </span>{
                    <span class="hljs-keyword">if</span> (done) <span class="hljs-keyword">return</span>;
                    done = <span class="hljs-literal">true</span>;
                    that.$$reject(val);
                }
            },
            <span class="hljs-attr">reject</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">reason</span>) </span>{
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.promise.$$state.status) <span class="hljs-keyword">return</span>;
                <span class="hljs-keyword">this</span>.$$reject(reason);
            },
            <span class="hljs-attr">$$reject</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">reason</span>) </span>{
                <span class="hljs-keyword">this</span>.promise.$$state.value = reason;
                <span class="hljs-keyword">this</span>.promise.$$state.status = <span class="hljs-number">2</span>;
                scheduleProcessQueue(<span class="hljs-keyword">this</span>.promise.$$state);
            },
            <span class="hljs-attr">notify</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">progress</span>) </span>{
                <span class="hljs-keyword">var</span> callbacks = <span class="hljs-keyword">this</span>.promise.$$state.pending;
                <span class="hljs-keyword">if</span> ((<span class="hljs-keyword">this</span>.promise.$$state.status &lt;= <span class="hljs-number">0</span>) &amp;&amp; callbacks &amp;&amp; callbacks.length) {
                    nextTick(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">var</span> callback, result;
                        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, ii = callbacks.length; i &lt; ii; i++) {
                            result = callbacks[i][<span class="hljs-number">0</span>];
                            callback = callbacks[i][<span class="hljs-number">3</span>];
                            <span class="hljs-keyword">try</span> {
                                result.notify(isFunction(callback) ? callback(progress) : progress);
                            } <span class="hljs-keyword">catch</span> (e) {
                                exceptionHandler(e);
                            }
                        }
                    });
                }
            }
        });
        <span class="hljs-keyword">var</span> reject = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">reason</span>) </span>{
            <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">new</span> Deferred();
            result.reject(reason);
            <span class="hljs-keyword">return</span> result.promise;
        };
        <span class="hljs-keyword">var</span> makePromise = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makePromise</span>(<span class="hljs-params">value, resolved</span>) </span>{
            <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">new</span> Deferred();
            <span class="hljs-keyword">if</span> (resolved) {
                result.resolve(value);
            } <span class="hljs-keyword">else</span> {
                result.reject(value);
            }
            <span class="hljs-keyword">return</span> result.promise;
        };
        <span class="hljs-keyword">var</span> handleCallback = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleCallback</span>(<span class="hljs-params">value, isResolved, callback</span>) </span>{
            <span class="hljs-keyword">var</span> callbackOutput = <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">if</span> (isFunction(callback)) callbackOutput = callback();
            } <span class="hljs-keyword">catch</span> (e) {
                <span class="hljs-keyword">return</span> makePromise(e, <span class="hljs-literal">false</span>);
            }
            <span class="hljs-keyword">if</span> (isPromiseLike(callbackOutput)) {
                <span class="hljs-keyword">return</span> callbackOutput.then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">return</span> makePromise(value, isResolved);
                }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) </span>{
                    <span class="hljs-keyword">return</span> makePromise(error, <span class="hljs-literal">false</span>);
                });
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> makePromise(value, isResolved);
            }
        };
        <span class="hljs-keyword">var</span> when = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, callback, errback, progressBack</span>) </span>{
            <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">new</span> Deferred();
            result.resolve(value);
            <span class="hljs-keyword">return</span> result.promise.then(callback, errback, progressBack);
        };
        <span class="hljs-keyword">var</span> resolve = when;

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">all</span>(<span class="hljs-params">promises</span>) </span>{
            <span class="hljs-keyword">var</span> deferred = <span class="hljs-keyword">new</span> Deferred(),
                counter = <span class="hljs-number">0</span>,
                results = isArray(promises) ? [] : {};
            forEach(promises, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">promise, key</span>) </span>{
                counter++;
                when(promise).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                    <span class="hljs-keyword">if</span> (results.hasOwnProperty(key)) <span class="hljs-keyword">return</span>;
                    results[key] = value;
                    <span class="hljs-keyword">if</span> (!(--counter)) deferred.resolve(results);
                }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">reason</span>) </span>{
                    <span class="hljs-keyword">if</span> (results.hasOwnProperty(key)) <span class="hljs-keyword">return</span>;
                    deferred.reject(reason);
                });
            });
            <span class="hljs-keyword">if</span> (counter === <span class="hljs-number">0</span>) {
                deferred.resolve(results);
            }
            <span class="hljs-keyword">return</span> deferred.promise;
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">race</span>(<span class="hljs-params">promises</span>) </span>{
            <span class="hljs-keyword">var</span> deferred = defer();
            forEach(promises, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">promise</span>) </span>{
                when(promise).then(deferred.resolve, deferred.reject);
            });
            <span class="hljs-keyword">return</span> deferred.promise;
        }
        <span class="hljs-keyword">var</span> $Q = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Q</span>(<span class="hljs-params">resolver</span>) </span>{
            <span class="hljs-keyword">if</span> (!isFunction(resolver)) {
                <span class="hljs-keyword">throw</span> $qMinErr(<span class="hljs-string">'norslvr'</span>, <span class="hljs-string">"Expected resolverFn, got '{0}'"</span>, resolver);
            }
            <span class="hljs-keyword">var</span> deferred = <span class="hljs-keyword">new</span> Deferred();

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resolveFn</span>(<span class="hljs-params">value</span>) </span>{
                deferred.resolve(value);
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">rejectFn</span>(<span class="hljs-params">reason</span>) </span>{
                deferred.reject(reason);
            }
            resolver(resolveFn, rejectFn);
            <span class="hljs-keyword">return</span> deferred.promise;
        };
        $Q.prototype = <span class="hljs-built_in">Promise</span>.prototype;
        $Q.defer = defer;
        $Q.reject = reject;
        $Q.when = when;
        $Q.resolve = resolve;
        $Q.all = all;
        $Q.race = race;
        <span class="hljs-keyword">return</span> $Q;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$$RAFProvider</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$window'</span>, <span class="hljs-string">'$timeout'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$window, $timeout</span>) </span>{
            <span class="hljs-keyword">var</span> requestAnimationFrame = $<span class="hljs-built_in">window</span>.requestAnimationFrame ||
                $<span class="hljs-built_in">window</span>.webkitRequestAnimationFrame;
            <span class="hljs-keyword">var</span> cancelAnimationFrame = $<span class="hljs-built_in">window</span>.cancelAnimationFrame ||
                $<span class="hljs-built_in">window</span>.webkitCancelAnimationFrame ||
                $<span class="hljs-built_in">window</span>.webkitCancelRequestAnimationFrame;
            <span class="hljs-keyword">var</span> rafSupported = !!requestAnimationFrame;
            <span class="hljs-keyword">var</span> raf = rafSupported ?
                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fn</span>) </span>{
                    <span class="hljs-keyword">var</span> id = requestAnimationFrame(fn);
                    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        cancelAnimationFrame(id);
                    };
                } :
                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fn</span>) </span>{
                    <span class="hljs-keyword">var</span> timer = $timeout(fn, <span class="hljs-number">16.66</span>, <span class="hljs-literal">false</span>);
                    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        $timeout.cancel(timer);
                    };
                };
            raf.supported = rafSupported;
            <span class="hljs-keyword">return</span> raf;
        }];
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$RootScopeProvider</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> TTL = <span class="hljs-number">10</span>;
        <span class="hljs-keyword">var</span> $rootScopeMinErr = minErr(<span class="hljs-string">'$rootScope'</span>);
        <span class="hljs-keyword">var</span> lastDirtyWatch = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">var</span> applyAsyncId = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">this</span>.digestTtl = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">arguments</span>.length) {
                TTL = value;
            }
            <span class="hljs-keyword">return</span> TTL;
        };

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createChildScopeClass</span>(<span class="hljs-params">parent</span>) </span>{
            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ChildScope</span>(<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">this</span>.$$watchers = <span class="hljs-keyword">this</span>.$$nextSibling =
                    <span class="hljs-keyword">this</span>.$$childHead = <span class="hljs-keyword">this</span>.$$childTail = <span class="hljs-literal">null</span>;
                <span class="hljs-keyword">this</span>.$$listeners = {};
                <span class="hljs-keyword">this</span>.$$listenerCount = {};
                <span class="hljs-keyword">this</span>.$$watchersCount = <span class="hljs-number">0</span>;
                <span class="hljs-keyword">this</span>.$id = nextUid();
                <span class="hljs-keyword">this</span>.$$ChildScope = <span class="hljs-literal">null</span>;
            }
            ChildScope.prototype = parent;
            <span class="hljs-keyword">return</span> ChildScope;
        }
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$exceptionHandler'</span>, <span class="hljs-string">'$parse'</span>, <span class="hljs-string">'$browser'</span>,
            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$exceptionHandler, $parse, $browser</span>) </span>{
                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">destroyChildScope</span>(<span class="hljs-params">$event</span>) </span>{
                    $event.currentScope.$$destroyed = <span class="hljs-literal">true</span>;
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cleanUpScope</span>(<span class="hljs-params">$scope</span>) </span>{
                    <span class="hljs-keyword">if</span> (msie === <span class="hljs-number">9</span>) {
                        $scope.$$childHead &amp;&amp; cleanUpScope($scope.$$childHead);
                        $scope.$$nextSibling &amp;&amp; cleanUpScope($scope.$$nextSibling);
                    }
                    $scope.$parent = $scope.$$nextSibling = $scope.$$prevSibling = $scope.$$childHead =
                        $scope.$$childTail = $scope.$root = $scope.$$watchers = <span class="hljs-literal">null</span>;
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Scope</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">this</span>.$id = nextUid();
                    <span class="hljs-keyword">this</span>.$$phase = <span class="hljs-keyword">this</span>.$parent = <span class="hljs-keyword">this</span>.$$watchers =
                        <span class="hljs-keyword">this</span>.$$nextSibling = <span class="hljs-keyword">this</span>.$$prevSibling =
                        <span class="hljs-keyword">this</span>.$$childHead = <span class="hljs-keyword">this</span>.$$childTail = <span class="hljs-literal">null</span>;
                    <span class="hljs-keyword">this</span>.$root = <span class="hljs-keyword">this</span>;
                    <span class="hljs-keyword">this</span>.$$destroyed = <span class="hljs-literal">false</span>;
                    <span class="hljs-keyword">this</span>.$$listeners = {};
                    <span class="hljs-keyword">this</span>.$$listenerCount = {};
                    <span class="hljs-keyword">this</span>.$$watchersCount = <span class="hljs-number">0</span>;
                    <span class="hljs-keyword">this</span>.$$isolateBindings = <span class="hljs-literal">null</span>;
                }
                Scope.prototype = {
                    <span class="hljs-attr">constructor</span>: Scope,
                    <span class="hljs-attr">$new</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">isolate, parent</span>) </span>{
                        <span class="hljs-keyword">var</span> child;
                        parent = parent || <span class="hljs-keyword">this</span>;
                        <span class="hljs-keyword">if</span> (isolate) {
                            child = <span class="hljs-keyword">new</span> Scope();
                            child.$root = <span class="hljs-keyword">this</span>.$root;
                        } <span class="hljs-keyword">else</span> {
                            <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.$$ChildScope) {
                                <span class="hljs-keyword">this</span>.$$ChildScope = createChildScopeClass(<span class="hljs-keyword">this</span>);
                            }
                            child = <span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.$$ChildScope();
                        }
                        child.$parent = parent;
                        child.$$prevSibling = parent.$$childTail;
                        <span class="hljs-keyword">if</span> (parent.$$childHead) {
                            parent.$$childTail.$$nextSibling = child;
                            parent.$$childTail = child;
                        } <span class="hljs-keyword">else</span> {
                            parent.$$childHead = parent.$$childTail = child;
                        }
                        <span class="hljs-keyword">if</span> (isolate || parent != <span class="hljs-keyword">this</span>) child.$on(<span class="hljs-string">'$destroy'</span>, destroyChildScope);
                        <span class="hljs-keyword">return</span> child;
                    },
                    <span class="hljs-attr">$watch</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">watchExp, listener, objectEquality, prettyPrintExpression</span>) </span>{
                        <span class="hljs-keyword">var</span> get = $parse(watchExp);
                        <span class="hljs-keyword">if</span> (get.$$watchDelegate) {
                            <span class="hljs-keyword">return</span> get.$$watchDelegate(<span class="hljs-keyword">this</span>, listener, objectEquality, get, watchExp);
                        }
                        <span class="hljs-keyword">var</span> scope = <span class="hljs-keyword">this</span>,
                            array = scope.$$watchers,
                            watcher = {
                                <span class="hljs-attr">fn</span>: listener,
                                <span class="hljs-attr">last</span>: initWatchVal,
                                <span class="hljs-attr">get</span>: get,
                                <span class="hljs-attr">exp</span>: prettyPrintExpression || watchExp,
                                <span class="hljs-attr">eq</span>: !!objectEquality
                            };
                        lastDirtyWatch = <span class="hljs-literal">null</span>;
                        <span class="hljs-keyword">if</span> (!isFunction(listener)) {
                            watcher.fn = noop;
                        }
                        <span class="hljs-keyword">if</span> (!array) {
                            array = scope.$$watchers = [];
                        }
                        array.unshift(watcher);
                        incrementWatchersCount(<span class="hljs-keyword">this</span>, <span class="hljs-number">1</span>);
                        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deregisterWatch</span>(<span class="hljs-params"></span>) </span>{
                            <span class="hljs-keyword">if</span> (arrayRemove(array, watcher) &gt;= <span class="hljs-number">0</span>) {
                                incrementWatchersCount(scope, <span class="hljs-number">-1</span>);
                            }
                            lastDirtyWatch = <span class="hljs-literal">null</span>;
                        };
                    },
                    <span class="hljs-attr">$watchGroup</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">watchExpressions, listener</span>) </span>{
                        <span class="hljs-keyword">var</span> oldValues = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(watchExpressions.length);
                        <span class="hljs-keyword">var</span> newValues = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(watchExpressions.length);
                        <span class="hljs-keyword">var</span> deregisterFns = [];
                        <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
                        <span class="hljs-keyword">var</span> changeReactionScheduled = <span class="hljs-literal">false</span>;
                        <span class="hljs-keyword">var</span> firstRun = <span class="hljs-literal">true</span>;
                        <span class="hljs-keyword">if</span> (!watchExpressions.length) {
                            <span class="hljs-keyword">var</span> shouldCall = <span class="hljs-literal">true</span>;
                            self.$evalAsync(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                                <span class="hljs-keyword">if</span> (shouldCall) listener(newValues, newValues, self);
                            });
                            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deregisterWatchGroup</span>(<span class="hljs-params"></span>) </span>{
                                shouldCall = <span class="hljs-literal">false</span>;
                            };
                        }
                        <span class="hljs-keyword">if</span> (watchExpressions.length === <span class="hljs-number">1</span>) {
                            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.$watch(watchExpressions[<span class="hljs-number">0</span>], <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">watchGroupAction</span>(<span class="hljs-params">value, oldValue, scope</span>) </span>{
                                newValues[<span class="hljs-number">0</span>] = value;
                                oldValues[<span class="hljs-number">0</span>] = oldValue;
                                listener(newValues, (value === oldValue) ? newValues : oldValues, scope);
                            });
                        }
                        forEach(watchExpressions, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">expr, i</span>) </span>{
                            <span class="hljs-keyword">var</span> unwatchFn = self.$watch(expr, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">watchGroupSubAction</span>(<span class="hljs-params">value, oldValue</span>) </span>{
                                newValues[i] = value;
                                oldValues[i] = oldValue;
                                <span class="hljs-keyword">if</span> (!changeReactionScheduled) {
                                    changeReactionScheduled = <span class="hljs-literal">true</span>;
                                    self.$evalAsync(watchGroupAction);
                                }
                            });
                            deregisterFns.push(unwatchFn);
                        });

                        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">watchGroupAction</span>(<span class="hljs-params"></span>) </span>{
                            changeReactionScheduled = <span class="hljs-literal">false</span>;
                            <span class="hljs-keyword">if</span> (firstRun) {
                                firstRun = <span class="hljs-literal">false</span>;
                                listener(newValues, newValues, self);
                            } <span class="hljs-keyword">else</span> {
                                listener(newValues, oldValues, self);
                            }
                        }
                        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deregisterWatchGroup</span>(<span class="hljs-params"></span>) </span>{
                            <span class="hljs-keyword">while</span> (deregisterFns.length) {
                                deregisterFns.shift()();
                            }
                        };
                    },
                    <span class="hljs-attr">$watchCollection</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">obj, listener</span>) </span>{
                        $watchCollectionInterceptor.$stateful = <span class="hljs-literal">true</span>;
                        <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
                        <span class="hljs-keyword">var</span> newValue;
                        <span class="hljs-keyword">var</span> oldValue;
                        <span class="hljs-keyword">var</span> veryOldValue;
                        <span class="hljs-keyword">var</span> trackVeryOldValue = (listener.length &gt; <span class="hljs-number">1</span>);
                        <span class="hljs-keyword">var</span> changeDetected = <span class="hljs-number">0</span>;
                        <span class="hljs-keyword">var</span> changeDetector = $parse(obj, $watchCollectionInterceptor);
                        <span class="hljs-keyword">var</span> internalArray = [];
                        <span class="hljs-keyword">var</span> internalObject = {};
                        <span class="hljs-keyword">var</span> initRun = <span class="hljs-literal">true</span>;
                        <span class="hljs-keyword">var</span> oldLength = <span class="hljs-number">0</span>;

                        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$watchCollectionInterceptor</span>(<span class="hljs-params">_value</span>) </span>{
                            newValue = _value;
                            <span class="hljs-keyword">var</span> newLength, key, bothNaN, newItem, oldItem;
                            <span class="hljs-keyword">if</span> (isUndefined(newValue)) <span class="hljs-keyword">return</span>;
                            <span class="hljs-keyword">if</span> (!isObject(newValue)) {
                                <span class="hljs-keyword">if</span> (oldValue !== newValue) {
                                    oldValue = newValue;
                                    changeDetected++;
                                }
                            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isArrayLike(newValue)) {
                                <span class="hljs-keyword">if</span> (oldValue !== internalArray) {
                                    oldValue = internalArray;
                                    oldLength = oldValue.length = <span class="hljs-number">0</span>;
                                    changeDetected++;
                                }
                                newLength = newValue.length;
                                <span class="hljs-keyword">if</span> (oldLength !== newLength) {
                                    changeDetected++;
                                    oldValue.length = oldLength = newLength;
                                }
                                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; newLength; i++) {
                                    oldItem = oldValue[i];
                                    newItem = newValue[i];
                                    bothNaN = (oldItem !== oldItem) &amp;&amp; (newItem !== newItem);
                                    <span class="hljs-keyword">if</span> (!bothNaN &amp;&amp; (oldItem !== newItem)) {
                                        changeDetected++;
                                        oldValue[i] = newItem;
                                    }
                                }
                            } <span class="hljs-keyword">else</span> {
                                <span class="hljs-keyword">if</span> (oldValue !== internalObject) {
                                    oldValue = internalObject = {};
                                    oldLength = <span class="hljs-number">0</span>;
                                    changeDetected++;
                                }
                                newLength = <span class="hljs-number">0</span>;
                                <span class="hljs-keyword">for</span> (key <span class="hljs-keyword">in</span> newValue) {
                                    <span class="hljs-keyword">if</span> (hasOwnProperty.call(newValue, key)) {
                                        newLength++;
                                        newItem = newValue[key];
                                        oldItem = oldValue[key];
                                        <span class="hljs-keyword">if</span> (key <span class="hljs-keyword">in</span> oldValue) {
                                            bothNaN = (oldItem !== oldItem) &amp;&amp; (newItem !== newItem);
                                            <span class="hljs-keyword">if</span> (!bothNaN &amp;&amp; (oldItem !== newItem)) {
                                                changeDetected++;
                                                oldValue[key] = newItem;
                                            }
                                        } <span class="hljs-keyword">else</span> {
                                            oldLength++;
                                            oldValue[key] = newItem;
                                            changeDetected++;
                                        }
                                    }
                                }
                                <span class="hljs-keyword">if</span> (oldLength &gt; newLength) {
                                    changeDetected++;
                                    <span class="hljs-keyword">for</span> (key <span class="hljs-keyword">in</span> oldValue) {
                                        <span class="hljs-keyword">if</span> (!hasOwnProperty.call(newValue, key)) {
                                            oldLength--;
                                            <span class="hljs-keyword">delete</span> oldValue[key];
                                        }
                                    }
                                }
                            }
                            <span class="hljs-keyword">return</span> changeDetected;
                        }

                        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$watchCollectionAction</span>(<span class="hljs-params"></span>) </span>{
                            <span class="hljs-keyword">if</span> (initRun) {
                                initRun = <span class="hljs-literal">false</span>;
                                listener(newValue, newValue, self);
                            } <span class="hljs-keyword">else</span> {
                                listener(newValue, veryOldValue, self);
                            }
                            <span class="hljs-keyword">if</span> (trackVeryOldValue) {
                                <span class="hljs-keyword">if</span> (!isObject(newValue)) {
                                    veryOldValue = newValue;
                                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isArrayLike(newValue)) {
                                    veryOldValue = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(newValue.length);
                                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; newValue.length; i++) {
                                        veryOldValue[i] = newValue[i];
                                    }
                                } <span class="hljs-keyword">else</span> {
                                    veryOldValue = {};
                                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> newValue) {
                                        <span class="hljs-keyword">if</span> (hasOwnProperty.call(newValue, key)) {
                                            veryOldValue[key] = newValue[key];
                                        }
                                    }
                                }
                            }
                        }
                        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.$watch(changeDetector, $watchCollectionAction);
                    },
                    <span class="hljs-attr">$digest</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">var</span> watch, value, last, fn, get,
                            watchers,
                            length,
                            dirty, ttl = TTL,
                            next, current, target = <span class="hljs-keyword">this</span>,
                            watchLog = [],
                            logIdx, asyncTask;
                        beginPhase(<span class="hljs-string">'$digest'</span>);
                        $browser.$$checkUrlChange();
                        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> === $rootScope &amp;&amp; applyAsyncId !== <span class="hljs-literal">null</span>) {
                            $browser.defer.cancel(applyAsyncId);
                            flushApplyAsync();
                        }
                        lastDirtyWatch = <span class="hljs-literal">null</span>;
                        <span class="hljs-keyword">do</span> {
                            dirty = <span class="hljs-literal">false</span>;
                            current = target;
                            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> asyncQueuePosition = <span class="hljs-number">0</span>; asyncQueuePosition &lt; asyncQueue.length; asyncQueuePosition++) {
                                <span class="hljs-keyword">try</span> {
                                    asyncTask = asyncQueue[asyncQueuePosition];
                                    asyncTask.scope.$<span class="hljs-built_in">eval</span>(asyncTask.expression, asyncTask.locals);
                                } <span class="hljs-keyword">catch</span> (e) {
                                    $exceptionHandler(e);
                                }
                                lastDirtyWatch = <span class="hljs-literal">null</span>;
                            }
                            asyncQueue.length = <span class="hljs-number">0</span>;
                            traverseScopesLoop:
                                <span class="hljs-keyword">do</span> {
                                    <span class="hljs-keyword">if</span> ((watchers = current.$$watchers)) {
                                        length = watchers.length;
                                        <span class="hljs-keyword">while</span> (length--) {
                                            <span class="hljs-keyword">try</span> {
                                                watch = watchers[length];
                                                <span class="hljs-keyword">if</span> (watch) {
                                                    get = watch.get;
                                                    <span class="hljs-keyword">if</span> ((value = get(current)) !== (last = watch.last) &amp;&amp;
                                                        !(watch.eq ?
                                                            equals(value, last) :
                                                            (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'number'</span> &amp;&amp; <span class="hljs-keyword">typeof</span> last === <span class="hljs-string">'number'</span> &amp;&amp;
                                                                <span class="hljs-built_in">isNaN</span>(value) &amp;&amp; <span class="hljs-built_in">isNaN</span>(last)))) {
                                                        dirty = <span class="hljs-literal">true</span>;
                                                        lastDirtyWatch = watch;
                                                        watch.last = watch.eq ? copy(value, <span class="hljs-literal">null</span>) : value;
                                                        fn = watch.fn;
                                                        fn(value, ((last === initWatchVal) ? value : last), current);
                                                        <span class="hljs-keyword">if</span> (ttl &lt; <span class="hljs-number">5</span>) {
                                                            logIdx = <span class="hljs-number">4</span> - ttl;
                                                            <span class="hljs-keyword">if</span> (!watchLog[logIdx]) watchLog[logIdx] = [];
                                                            watchLog[logIdx].push({
                                                                <span class="hljs-attr">msg</span>: isFunction(watch.exp) ? <span class="hljs-string">'fn: '</span> + (watch.exp.name || watch.exp.toString()) : watch.exp,
                                                                <span class="hljs-attr">newVal</span>: value,
                                                                <span class="hljs-attr">oldVal</span>: last
                                                            });
                                                        }
                                                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (watch === lastDirtyWatch) {
                                                        dirty = <span class="hljs-literal">false</span>;
                                                        <span class="hljs-keyword">break</span> traverseScopesLoop;
                                                    }
                                                }
                                            } <span class="hljs-keyword">catch</span> (e) {
                                                $exceptionHandler(e);
                                            }
                                        }
                                    }
                                    <span class="hljs-keyword">if</span> (!(next = ((current.$$watchersCount &amp;&amp; current.$$childHead) ||
                                            (current !== target &amp;&amp; current.$$nextSibling)))) {
                                        <span class="hljs-keyword">while</span> (current !== target &amp;&amp; !(next = current.$$nextSibling)) {
                                            current = current.$parent;
                                        }
                                    }
                                } <span class="hljs-keyword">while</span> ((current = next));
                            <span class="hljs-keyword">if</span> ((dirty || asyncQueue.length) &amp;&amp; !(ttl--)) {
                                clearPhase();
                                <span class="hljs-keyword">throw</span> $rootScopeMinErr(<span class="hljs-string">'infdig'</span>,
                                    <span class="hljs-string">'{0} $digest() iterations reached. Aborting!\n'</span> +
                                    <span class="hljs-string">'Watchers fired in the last 5 iterations: {1}'</span>,
                                    TTL, watchLog);
                            }
                        } <span class="hljs-keyword">while</span> (dirty || asyncQueue.length);
                        clearPhase();
                        <span class="hljs-keyword">while</span> (postDigestQueuePosition &lt; postDigestQueue.length) {
                            <span class="hljs-keyword">try</span> {
                                postDigestQueue[postDigestQueuePosition++]();
                            } <span class="hljs-keyword">catch</span> (e) {
                                $exceptionHandler(e);
                            }
                        }
                        postDigestQueue.length = postDigestQueuePosition = <span class="hljs-number">0</span>;
                    },
                    <span class="hljs-attr">$destroy</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.$$destroyed) <span class="hljs-keyword">return</span>;
                        <span class="hljs-keyword">var</span> parent = <span class="hljs-keyword">this</span>.$parent;
                        <span class="hljs-keyword">this</span>.$broadcast(<span class="hljs-string">'$destroy'</span>);
                        <span class="hljs-keyword">this</span>.$$destroyed = <span class="hljs-literal">true</span>;
                        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> === $rootScope) {
                            $browser.$$applicationDestroyed();
                        }
                        incrementWatchersCount(<span class="hljs-keyword">this</span>, -<span class="hljs-keyword">this</span>.$$watchersCount);
                        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> eventName <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.$$listenerCount) {
                            decrementListenerCount(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.$$listenerCount[eventName], eventName);
                        }
                        <span class="hljs-keyword">if</span> (parent &amp;&amp; parent.$$childHead == <span class="hljs-keyword">this</span>) parent.$$childHead = <span class="hljs-keyword">this</span>.$$nextSibling;
                        <span class="hljs-keyword">if</span> (parent &amp;&amp; parent.$$childTail == <span class="hljs-keyword">this</span>) parent.$$childTail = <span class="hljs-keyword">this</span>.$$prevSibling;
                        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.$$prevSibling) <span class="hljs-keyword">this</span>.$$prevSibling.$$nextSibling = <span class="hljs-keyword">this</span>.$$nextSibling;
                        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.$$nextSibling) <span class="hljs-keyword">this</span>.$$nextSibling.$$prevSibling = <span class="hljs-keyword">this</span>.$$prevSibling;
                        <span class="hljs-keyword">this</span>.$destroy = <span class="hljs-keyword">this</span>.$digest = <span class="hljs-keyword">this</span>.$apply = <span class="hljs-keyword">this</span>.$evalAsync = <span class="hljs-keyword">this</span>.$applyAsync = noop;
                        <span class="hljs-keyword">this</span>.$on = <span class="hljs-keyword">this</span>.$watch = <span class="hljs-keyword">this</span>.$watchGroup = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            <span class="hljs-keyword">return</span> noop;
                        };
                        <span class="hljs-keyword">this</span>.$$listeners = {};
                        <span class="hljs-keyword">this</span>.$$nextSibling = <span class="hljs-literal">null</span>;
                        cleanUpScope(<span class="hljs-keyword">this</span>);
                    },
                    <span class="hljs-attr">$eval</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">expr, locals</span>) </span>{
                        <span class="hljs-keyword">return</span> $parse(expr)(<span class="hljs-keyword">this</span>, locals);
                    },
                    <span class="hljs-attr">$evalAsync</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">expr, locals</span>) </span>{
                        <span class="hljs-keyword">if</span> (!$rootScope.$$phase &amp;&amp; !asyncQueue.length) {
                            $browser.defer(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                                <span class="hljs-keyword">if</span> (asyncQueue.length) {
                                    $rootScope.$digest();
                                }
                            });
                        }
                        asyncQueue.push({
                            <span class="hljs-attr">scope</span>: <span class="hljs-keyword">this</span>,
                            <span class="hljs-attr">expression</span>: $parse(expr),
                            <span class="hljs-attr">locals</span>: locals
                        });
                    },
                    <span class="hljs-attr">$$postDigest</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fn</span>) </span>{
                        postDigestQueue.push(fn);
                    },
                    <span class="hljs-attr">$apply</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">expr</span>) </span>{
                        <span class="hljs-keyword">try</span> {
                            beginPhase(<span class="hljs-string">'$apply'</span>);
                            <span class="hljs-keyword">try</span> {
                                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.$<span class="hljs-built_in">eval</span>(expr);
                            } <span class="hljs-keyword">finally</span> {
                                clearPhase();
                            }
                        } <span class="hljs-keyword">catch</span> (e) {
                            $exceptionHandler(e);
                        } <span class="hljs-keyword">finally</span> {
                            <span class="hljs-keyword">try</span> {
                                $rootScope.$digest();
                            } <span class="hljs-keyword">catch</span> (e) {
                                $exceptionHandler(e);
                                <span class="hljs-keyword">throw</span> e;
                            }
                        }
                    },
                    <span class="hljs-attr">$applyAsync</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">expr</span>) </span>{
                        <span class="hljs-keyword">var</span> scope = <span class="hljs-keyword">this</span>;
                        expr &amp;&amp; applyAsyncQueue.push($applyAsyncExpression);
                        expr = $parse(expr);
                        scheduleApplyAsync();

                        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$applyAsyncExpression</span>(<span class="hljs-params"></span>) </span>{
                            scope.$<span class="hljs-built_in">eval</span>(expr);
                        }
                    },
                    <span class="hljs-attr">$on</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name, listener</span>) </span>{
                        <span class="hljs-keyword">var</span> namedListeners = <span class="hljs-keyword">this</span>.$$listeners[name];
                        <span class="hljs-keyword">if</span> (!namedListeners) {
                            <span class="hljs-keyword">this</span>.$$listeners[name] = namedListeners = [];
                        }
                        namedListeners.push(listener);
                        <span class="hljs-keyword">var</span> current = <span class="hljs-keyword">this</span>;
                        <span class="hljs-keyword">do</span> {
                            <span class="hljs-keyword">if</span> (!current.$$listenerCount[name]) {
                                current.$$listenerCount[name] = <span class="hljs-number">0</span>;
                            }
                            current.$$listenerCount[name]++;
                        } <span class="hljs-keyword">while</span> ((current = current.$parent));
                        <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
                        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            <span class="hljs-keyword">var</span> indexOfListener = namedListeners.indexOf(listener);
                            <span class="hljs-keyword">if</span> (indexOfListener !== <span class="hljs-number">-1</span>) {
                                namedListeners[indexOfListener] = <span class="hljs-literal">null</span>;
                                decrementListenerCount(self, <span class="hljs-number">1</span>, name);
                            }
                        };
                    },
                    <span class="hljs-attr">$emit</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name, args</span>) </span>{
                        <span class="hljs-keyword">var</span> empty = [],
                            namedListeners,
                            scope = <span class="hljs-keyword">this</span>,
                            stopPropagation = <span class="hljs-literal">false</span>,
                            event = {
                                <span class="hljs-attr">name</span>: name,
                                <span class="hljs-attr">targetScope</span>: scope,
                                <span class="hljs-attr">stopPropagation</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                                    stopPropagation = <span class="hljs-literal">true</span>;
                                },
                                <span class="hljs-attr">preventDefault</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                                    event.defaultPrevented = <span class="hljs-literal">true</span>;
                                },
                                <span class="hljs-attr">defaultPrevented</span>: <span class="hljs-literal">false</span>
                            },
                            listenerArgs = concat([event], <span class="hljs-built_in">arguments</span>, <span class="hljs-number">1</span>),
                            i, length;
                        <span class="hljs-keyword">do</span> {
                            namedListeners = scope.$$listeners[name] || empty;
                            event.currentScope = scope;
                            <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, length = namedListeners.length; i &lt; length; i++) {
                                <span class="hljs-keyword">if</span> (!namedListeners[i]) {
                                    namedListeners.splice(i, <span class="hljs-number">1</span>);
                                    i--;
                                    length--;
                                    <span class="hljs-keyword">continue</span>;
                                }
                                <span class="hljs-keyword">try</span> {
                                    namedListeners[i].apply(<span class="hljs-literal">null</span>, listenerArgs);
                                } <span class="hljs-keyword">catch</span> (e) {
                                    $exceptionHandler(e);
                                }
                            }
                            <span class="hljs-keyword">if</span> (stopPropagation) {
                                event.currentScope = <span class="hljs-literal">null</span>;
                                <span class="hljs-keyword">return</span> event;
                            }
                            scope = scope.$parent;
                        } <span class="hljs-keyword">while</span> (scope);
                        event.currentScope = <span class="hljs-literal">null</span>;
                        <span class="hljs-keyword">return</span> event;
                    },
                    <span class="hljs-attr">$broadcast</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name, args</span>) </span>{
                        <span class="hljs-keyword">var</span> target = <span class="hljs-keyword">this</span>,
                            current = target,
                            next = target,
                            event = {
                                <span class="hljs-attr">name</span>: name,
                                <span class="hljs-attr">targetScope</span>: target,
                                <span class="hljs-attr">preventDefault</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                                    event.defaultPrevented = <span class="hljs-literal">true</span>;
                                },
                                <span class="hljs-attr">defaultPrevented</span>: <span class="hljs-literal">false</span>
                            };
                        <span class="hljs-keyword">if</span> (!target.$$listenerCount[name]) <span class="hljs-keyword">return</span> event;
                        <span class="hljs-keyword">var</span> listenerArgs = concat([event], <span class="hljs-built_in">arguments</span>, <span class="hljs-number">1</span>),
                            listeners, i, length;
                        <span class="hljs-keyword">while</span> ((current = next)) {
                            event.currentScope = current;
                            listeners = current.$$listeners[name] || [];
                            <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, length = listeners.length; i &lt; length; i++) {
                                <span class="hljs-keyword">if</span> (!listeners[i]) {
                                    listeners.splice(i, <span class="hljs-number">1</span>);
                                    i--;
                                    length--;
                                    <span class="hljs-keyword">continue</span>;
                                }
                                <span class="hljs-keyword">try</span> {
                                    listeners[i].apply(<span class="hljs-literal">null</span>, listenerArgs);
                                } <span class="hljs-keyword">catch</span> (e) {
                                    $exceptionHandler(e);
                                }
                            }
                            <span class="hljs-keyword">if</span> (!(next = ((current.$$listenerCount[name] &amp;&amp; current.$$childHead) ||
                                    (current !== target &amp;&amp; current.$$nextSibling)))) {
                                <span class="hljs-keyword">while</span> (current !== target &amp;&amp; !(next = current.$$nextSibling)) {
                                    current = current.$parent;
                                }
                            }
                        }
                        event.currentScope = <span class="hljs-literal">null</span>;
                        <span class="hljs-keyword">return</span> event;
                    }
                };
                <span class="hljs-keyword">var</span> $rootScope = <span class="hljs-keyword">new</span> Scope();
                <span class="hljs-keyword">var</span> asyncQueue = $rootScope.$$asyncQueue = [];
                <span class="hljs-keyword">var</span> postDigestQueue = $rootScope.$$postDigestQueue = [];
                <span class="hljs-keyword">var</span> applyAsyncQueue = $rootScope.$$applyAsyncQueue = [];
                <span class="hljs-keyword">var</span> postDigestQueuePosition = <span class="hljs-number">0</span>;
                <span class="hljs-keyword">return</span> $rootScope;

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">beginPhase</span>(<span class="hljs-params">phase</span>) </span>{
                    <span class="hljs-keyword">if</span> ($rootScope.$$phase) {
                        <span class="hljs-keyword">throw</span> $rootScopeMinErr(<span class="hljs-string">'inprog'</span>, <span class="hljs-string">'{0} already in progress'</span>, $rootScope.$$phase);
                    }
                    $rootScope.$$phase = phase;
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">clearPhase</span>(<span class="hljs-params"></span>) </span>{
                    $rootScope.$$phase = <span class="hljs-literal">null</span>;
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">incrementWatchersCount</span>(<span class="hljs-params">current, count</span>) </span>{
                    <span class="hljs-keyword">do</span> {
                        current.$$watchersCount += count;
                    } <span class="hljs-keyword">while</span> ((current = current.$parent));
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">decrementListenerCount</span>(<span class="hljs-params">current, count, name</span>) </span>{
                    <span class="hljs-keyword">do</span> {
                        current.$$listenerCount[name] -= count;
                        <span class="hljs-keyword">if</span> (current.$$listenerCount[name] === <span class="hljs-number">0</span>) {
                            <span class="hljs-keyword">delete</span> current.$$listenerCount[name];
                        }
                    } <span class="hljs-keyword">while</span> ((current = current.$parent));
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">initWatchVal</span>(<span class="hljs-params"></span>) </span>{}

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">flushApplyAsync</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">while</span> (applyAsyncQueue.length) {
                        <span class="hljs-keyword">try</span> {
                            applyAsyncQueue.shift()();
                        } <span class="hljs-keyword">catch</span> (e) {
                            $exceptionHandler(e);
                        }
                    }
                    applyAsyncId = <span class="hljs-literal">null</span>;
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">scheduleApplyAsync</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">if</span> (applyAsyncId === <span class="hljs-literal">null</span>) {
                        applyAsyncId = $browser.defer(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            $rootScope.$apply(flushApplyAsync);
                        });
                    }
                }
            }
        ];
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$$SanitizeUriProvider</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> aHrefSanitizationWhitelist = <span class="hljs-regexp">/^\s*(https?|ftp|mailto|tel|file):/</span>,
            imgSrcSanitizationWhitelist = <span class="hljs-regexp">/^\s*((https?|ftp|file|blob):|data:image\/)/</span>;
        <span class="hljs-keyword">this</span>.aHrefSanitizationWhitelist = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">regexp</span>) </span>{
            <span class="hljs-keyword">if</span> (isDefined(regexp)) {
                aHrefSanitizationWhitelist = regexp;
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
            }
            <span class="hljs-keyword">return</span> aHrefSanitizationWhitelist;
        };
        <span class="hljs-keyword">this</span>.imgSrcSanitizationWhitelist = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">regexp</span>) </span>{
            <span class="hljs-keyword">if</span> (isDefined(regexp)) {
                imgSrcSanitizationWhitelist = regexp;
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
            }
            <span class="hljs-keyword">return</span> imgSrcSanitizationWhitelist;
        };
        <span class="hljs-keyword">this</span>.$get = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sanitizeUri</span>(<span class="hljs-params">uri, isImage</span>) </span>{
                <span class="hljs-keyword">var</span> regex = isImage ? imgSrcSanitizationWhitelist : aHrefSanitizationWhitelist;
                <span class="hljs-keyword">var</span> normalizedVal;
                normalizedVal = urlResolve(uri).href;
                <span class="hljs-keyword">if</span> (normalizedVal !== <span class="hljs-string">''</span> &amp;&amp; !normalizedVal.match(regex)) {
                    <span class="hljs-keyword">return</span> <span class="hljs-string">'unsafe:'</span> + normalizedVal;
                }
                <span class="hljs-keyword">return</span> uri;
            };
        };
    }
    <span class="hljs-keyword">var</span> $sceMinErr = minErr(<span class="hljs-string">'$sce'</span>);
    <span class="hljs-keyword">var</span> SCE_CONTEXTS = {
        <span class="hljs-attr">HTML</span>: <span class="hljs-string">'html'</span>,
        <span class="hljs-attr">CSS</span>: <span class="hljs-string">'css'</span>,
        <span class="hljs-attr">URL</span>: <span class="hljs-string">'url'</span>,
        <span class="hljs-attr">RESOURCE_URL</span>: <span class="hljs-string">'resourceUrl'</span>,
        <span class="hljs-attr">JS</span>: <span class="hljs-string">'js'</span>
    };

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">adjustMatcher</span>(<span class="hljs-params">matcher</span>) </span>{
        <span class="hljs-keyword">if</span> (matcher === <span class="hljs-string">'self'</span>) {
            <span class="hljs-keyword">return</span> matcher;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isString(matcher)) {
            <span class="hljs-keyword">if</span> (matcher.indexOf(<span class="hljs-string">'***'</span>) &gt; <span class="hljs-number">-1</span>) {
                <span class="hljs-keyword">throw</span> $sceMinErr(<span class="hljs-string">'iwcard'</span>,
                    <span class="hljs-string">'Illegal sequence *** in string matcher.  String: {0}'</span>, matcher);
            }
            matcher = escapeForRegexp(matcher).
            replace(<span class="hljs-string">'\\*\\*'</span>, <span class="hljs-string">'.*'</span>).
            replace(<span class="hljs-string">'\\*'</span>, <span class="hljs-string">'[^:/.?&amp;;]*'</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">'^'</span> + matcher + <span class="hljs-string">'$'</span>);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isRegExp(matcher)) {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">'^'</span> + matcher.source + <span class="hljs-string">'$'</span>);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">throw</span> $sceMinErr(<span class="hljs-string">'imatcher'</span>,
                <span class="hljs-string">'Matchers may only be "self", string patterns or RegExp objects'</span>);
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">adjustMatchers</span>(<span class="hljs-params">matchers</span>) </span>{
        <span class="hljs-keyword">var</span> adjustedMatchers = [];
        <span class="hljs-keyword">if</span> (isDefined(matchers)) {
            forEach(matchers, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">matcher</span>) </span>{
                adjustedMatchers.push(adjustMatcher(matcher));
            });
        }
        <span class="hljs-keyword">return</span> adjustedMatchers;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$SceDelegateProvider</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.SCE_CONTEXTS = SCE_CONTEXTS;
        <span class="hljs-keyword">var</span> resourceUrlWhitelist = [<span class="hljs-string">'self'</span>],
            resourceUrlBlacklist = [];
        <span class="hljs-keyword">this</span>.resourceUrlWhitelist = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">arguments</span>.length) {
                resourceUrlWhitelist = adjustMatchers(value);
            }
            <span class="hljs-keyword">return</span> resourceUrlWhitelist;
        };
        <span class="hljs-keyword">this</span>.resourceUrlBlacklist = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">arguments</span>.length) {
                resourceUrlBlacklist = adjustMatchers(value);
            }
            <span class="hljs-keyword">return</span> resourceUrlBlacklist;
        };
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$injector'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$injector</span>) </span>{
            <span class="hljs-keyword">var</span> htmlSanitizer = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">htmlSanitizer</span>(<span class="hljs-params">html</span>) </span>{
                <span class="hljs-keyword">throw</span> $sceMinErr(<span class="hljs-string">'unsafe'</span>, <span class="hljs-string">'Attempting to use an unsafe value in a safe context.'</span>);
            };
            <span class="hljs-keyword">if</span> ($injector.has(<span class="hljs-string">'$sanitize'</span>)) {
                htmlSanitizer = $injector.get(<span class="hljs-string">'$sanitize'</span>);
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">matchUrl</span>(<span class="hljs-params">matcher, parsedUrl</span>) </span>{
                <span class="hljs-keyword">if</span> (matcher === <span class="hljs-string">'self'</span>) {
                    <span class="hljs-keyword">return</span> urlIsSameOrigin(parsedUrl);
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">return</span> !!matcher.exec(parsedUrl.href);
                }
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isResourceUrlAllowedByPolicy</span>(<span class="hljs-params">url</span>) </span>{
                <span class="hljs-keyword">var</span> parsedUrl = urlResolve(url.toString());
                <span class="hljs-keyword">var</span> i, n, allowed = <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, n = resourceUrlWhitelist.length; i &lt; n; i++) {
                    <span class="hljs-keyword">if</span> (matchUrl(resourceUrlWhitelist[i], parsedUrl)) {
                        allowed = <span class="hljs-literal">true</span>;
                        <span class="hljs-keyword">break</span>;
                    }
                }
                <span class="hljs-keyword">if</span> (allowed) {
                    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, n = resourceUrlBlacklist.length; i &lt; n; i++) {
                        <span class="hljs-keyword">if</span> (matchUrl(resourceUrlBlacklist[i], parsedUrl)) {
                            allowed = <span class="hljs-literal">false</span>;
                            <span class="hljs-keyword">break</span>;
                        }
                    }
                }
                <span class="hljs-keyword">return</span> allowed;
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generateHolderType</span>(<span class="hljs-params">Base</span>) </span>{
                <span class="hljs-keyword">var</span> holderType = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">TrustedValueHolderType</span>(<span class="hljs-params">trustedValue</span>) </span>{
                    <span class="hljs-keyword">this</span>.$$unwrapTrustedValue = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">return</span> trustedValue;
                    };
                };
                <span class="hljs-keyword">if</span> (Base) {
                    holderType.prototype = <span class="hljs-keyword">new</span> Base();
                }
                holderType.prototype.valueOf = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sceValueOf</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.$$unwrapTrustedValue();
                };
                holderType.prototype.toString = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sceToString</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.$$unwrapTrustedValue().toString();
                };
                <span class="hljs-keyword">return</span> holderType;
            }
            <span class="hljs-keyword">var</span> trustedValueHolderBase = generateHolderType(),
                byType = {};
            byType[SCE_CONTEXTS.HTML] = generateHolderType(trustedValueHolderBase);
            byType[SCE_CONTEXTS.CSS] = generateHolderType(trustedValueHolderBase);
            byType[SCE_CONTEXTS.URL] = generateHolderType(trustedValueHolderBase);
            byType[SCE_CONTEXTS.JS] = generateHolderType(trustedValueHolderBase);
            byType[SCE_CONTEXTS.RESOURCE_URL] = generateHolderType(byType[SCE_CONTEXTS.URL]);

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">trustAs</span>(<span class="hljs-params">type, trustedValue</span>) </span>{
                <span class="hljs-keyword">var</span> Constructor = (byType.hasOwnProperty(type) ? byType[type] : <span class="hljs-literal">null</span>);
                <span class="hljs-keyword">if</span> (!Constructor) {
                    <span class="hljs-keyword">throw</span> $sceMinErr(<span class="hljs-string">'icontext'</span>,
                        <span class="hljs-string">'Attempted to trust a value in invalid context. Context: {0}; Value: {1}'</span>,
                        type, trustedValue);
                }
                <span class="hljs-keyword">if</span> (trustedValue === <span class="hljs-literal">null</span> || isUndefined(trustedValue) || trustedValue === <span class="hljs-string">''</span>) {
                    <span class="hljs-keyword">return</span> trustedValue;
                }
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> trustedValue !== <span class="hljs-string">'string'</span>) {
                    <span class="hljs-keyword">throw</span> $sceMinErr(<span class="hljs-string">'itype'</span>,
                        <span class="hljs-string">'Attempted to trust a non-string value in a content requiring a string: Context: {0}'</span>,
                        type);
                }
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Constructor(trustedValue);
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">valueOf</span>(<span class="hljs-params">maybeTrusted</span>) </span>{
                <span class="hljs-keyword">if</span> (maybeTrusted <span class="hljs-keyword">instanceof</span> trustedValueHolderBase) {
                    <span class="hljs-keyword">return</span> maybeTrusted.$$unwrapTrustedValue();
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">return</span> maybeTrusted;
                }
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getTrusted</span>(<span class="hljs-params">type, maybeTrusted</span>) </span>{
                <span class="hljs-keyword">if</span> (maybeTrusted === <span class="hljs-literal">null</span> || isUndefined(maybeTrusted) || maybeTrusted === <span class="hljs-string">''</span>) {
                    <span class="hljs-keyword">return</span> maybeTrusted;
                }
                <span class="hljs-keyword">var</span> <span class="hljs-keyword">constructor</span> = (byType.hasOwnProperty(type) ? byType[type] : null);
                if (<span class="hljs-keyword">constructor</span> &amp;&amp; maybeTrusted instanceof <span class="hljs-keyword">constructor</span>) {
                    <span class="hljs-keyword">return</span> maybeTrusted.$$unwrapTrustedValue();
                }
                <span class="hljs-keyword">if</span> (type === SCE_CONTEXTS.RESOURCE_URL) {
                    <span class="hljs-keyword">if</span> (isResourceUrlAllowedByPolicy(maybeTrusted)) {
                        <span class="hljs-keyword">return</span> maybeTrusted;
                    } <span class="hljs-keyword">else</span> {
                        <span class="hljs-keyword">throw</span> $sceMinErr(<span class="hljs-string">'insecurl'</span>,
                            <span class="hljs-string">'Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}'</span>,
                            maybeTrusted.toString());
                    }
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (type === SCE_CONTEXTS.HTML) {
                    <span class="hljs-keyword">return</span> htmlSanitizer(maybeTrusted);
                }
                <span class="hljs-keyword">throw</span> $sceMinErr(<span class="hljs-string">'unsafe'</span>, <span class="hljs-string">'Attempting to use an unsafe value in a safe context.'</span>);
            }
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">trustAs</span>: trustAs,
                <span class="hljs-attr">getTrusted</span>: getTrusted,
                <span class="hljs-attr">valueOf</span>: valueOf
            };
        }];
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$SceProvider</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> enabled = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">this</span>.enabled = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">arguments</span>.length) {
                enabled = !!value;
            }
            <span class="hljs-keyword">return</span> enabled;
        };
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$parse'</span>, <span class="hljs-string">'$sceDelegate'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">
            $parse, $sceDelegate</span>) </span>{
            <span class="hljs-keyword">if</span> (enabled &amp;&amp; msie &lt; <span class="hljs-number">8</span>) {
                <span class="hljs-keyword">throw</span> $sceMinErr(<span class="hljs-string">'iequirks'</span>,
                    <span class="hljs-string">'Strict Contextual Escaping does not support Internet Explorer version &lt; 11 in quirks '</span> +
                    <span class="hljs-string">'mode.  You can fix this by adding the text &lt;!doctype html&gt; to the top of your HTML '</span> +
                    <span class="hljs-string">'document.  See http://docs.angularjs.org/api/ng.$sce for more information.'</span>);
            }
            <span class="hljs-keyword">var</span> sce = shallowCopy(SCE_CONTEXTS);
            sce.isEnabled = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> enabled;
            };
            sce.trustAs = $sceDelegate.trustAs;
            sce.getTrusted = $sceDelegate.getTrusted;
            sce.valueOf = $sceDelegate.valueOf;
            <span class="hljs-keyword">if</span> (!enabled) {
                sce.trustAs = sce.getTrusted = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">type, value</span>) </span>{
                    <span class="hljs-keyword">return</span> value;
                };
                sce.valueOf = identity;
            }
            sce.parseAs = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sceParseAs</span>(<span class="hljs-params">type, expr</span>) </span>{
                <span class="hljs-keyword">var</span> parsed = $parse(expr);
                <span class="hljs-keyword">if</span> (parsed.literal &amp;&amp; parsed.constant) {
                    <span class="hljs-keyword">return</span> parsed;
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">return</span> $parse(expr, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                        <span class="hljs-keyword">return</span> sce.getTrusted(type, value);
                    });
                }
            };
            <span class="hljs-keyword">var</span> parse = sce.parseAs,
                getTrusted = sce.getTrusted,
                trustAs = sce.trustAs;
            forEach(SCE_CONTEXTS, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">enumValue, name</span>) </span>{
                <span class="hljs-keyword">var</span> lName = lowercase(name);
                sce[camelCase(<span class="hljs-string">"parse_as_"</span> + lName)] = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">expr</span>) </span>{
                    <span class="hljs-keyword">return</span> parse(enumValue, expr);
                };
                sce[camelCase(<span class="hljs-string">"get_trusted_"</span> + lName)] = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                    <span class="hljs-keyword">return</span> getTrusted(enumValue, value);
                };
                sce[camelCase(<span class="hljs-string">"trust_as_"</span> + lName)] = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                    <span class="hljs-keyword">return</span> trustAs(enumValue, value);
                };
            });
            <span class="hljs-keyword">return</span> sce;
        }];
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$SnifferProvider</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$window'</span>, <span class="hljs-string">'$document'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$window, $document</span>) </span>{
            <span class="hljs-keyword">var</span> eventSupport = {},
                isChromePackagedApp = $<span class="hljs-built_in">window</span>.chrome &amp;&amp; $<span class="hljs-built_in">window</span>.chrome.app &amp;&amp; $<span class="hljs-built_in">window</span>.chrome.app.runtime,
                hasHistoryPushState = !isChromePackagedApp &amp;&amp; $<span class="hljs-built_in">window</span>.history &amp;&amp; $<span class="hljs-built_in">window</span>.history.pushState,
                android =
                toInt((<span class="hljs-regexp">/android (\d+)/</span>.exec(lowercase(($<span class="hljs-built_in">window</span>.navigator || {}).userAgent)) || [])[<span class="hljs-number">1</span>]),
                boxee = <span class="hljs-regexp">/Boxee/i</span>.test(($<span class="hljs-built_in">window</span>.navigator || {}).userAgent),
                <span class="hljs-built_in">document</span> = $<span class="hljs-built_in">document</span>[<span class="hljs-number">0</span>] || {},
                vendorPrefix,
                vendorRegex = <span class="hljs-regexp">/^(Moz|webkit|ms)(?=[A-Z])/</span>,
                bodyStyle = <span class="hljs-built_in">document</span>.body &amp;&amp; <span class="hljs-built_in">document</span>.body.style,
                transitions = <span class="hljs-literal">false</span>,
                animations = <span class="hljs-literal">false</span>,
                match;
            <span class="hljs-keyword">if</span> (bodyStyle) {
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> prop <span class="hljs-keyword">in</span> bodyStyle) {
                    <span class="hljs-keyword">if</span> (match = vendorRegex.exec(prop)) {
                        vendorPrefix = match[<span class="hljs-number">0</span>];
                        vendorPrefix = vendorPrefix[<span class="hljs-number">0</span>].toUpperCase() + vendorPrefix.substr(<span class="hljs-number">1</span>);
                        <span class="hljs-keyword">break</span>;
                    }
                }
                <span class="hljs-keyword">if</span> (!vendorPrefix) {
                    vendorPrefix = (<span class="hljs-string">'WebkitOpacity'</span> <span class="hljs-keyword">in</span> bodyStyle) &amp;&amp; <span class="hljs-string">'webkit'</span>;
                }
                transitions = !!((<span class="hljs-string">'transition'</span> <span class="hljs-keyword">in</span> bodyStyle) || (vendorPrefix + <span class="hljs-string">'Transition'</span> <span class="hljs-keyword">in</span> bodyStyle));
                animations = !!((<span class="hljs-string">'animation'</span> <span class="hljs-keyword">in</span> bodyStyle) || (vendorPrefix + <span class="hljs-string">'Animation'</span> <span class="hljs-keyword">in</span> bodyStyle));
                <span class="hljs-keyword">if</span> (android &amp;&amp; (!transitions || !animations)) {
                    transitions = isString(bodyStyle.webkitTransition);
                    animations = isString(bodyStyle.webkitAnimation);
                }
            }
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">history</span>: !!(hasHistoryPushState &amp;&amp; !(android &lt; <span class="hljs-number">4</span>) &amp;&amp; !boxee),
                <span class="hljs-attr">hasEvent</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
                    <span class="hljs-keyword">if</span> (event === <span class="hljs-string">'input'</span> &amp;&amp; msie &lt;= <span class="hljs-number">11</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                    <span class="hljs-keyword">if</span> (isUndefined(eventSupport[event])) {
                        <span class="hljs-keyword">var</span> divElm = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'div'</span>);
                        eventSupport[event] = <span class="hljs-string">'on'</span> + event <span class="hljs-keyword">in</span> divElm;
                    }
                    <span class="hljs-keyword">return</span> eventSupport[event];
                },
                <span class="hljs-attr">csp</span>: csp(),
                <span class="hljs-attr">vendorPrefix</span>: vendorPrefix,
                <span class="hljs-attr">transitions</span>: transitions,
                <span class="hljs-attr">animations</span>: animations,
                <span class="hljs-attr">android</span>: android
            };
        }];
    }
    <span class="hljs-keyword">var</span> $templateRequestMinErr = minErr(<span class="hljs-string">'$compile'</span>);

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$TemplateRequestProvider</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> httpOptions;
        <span class="hljs-keyword">this</span>.httpOptions = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">val</span>) </span>{
            <span class="hljs-keyword">if</span> (val) {
                httpOptions = val;
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
            }
            <span class="hljs-keyword">return</span> httpOptions;
        };
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$templateCache'</span>, <span class="hljs-string">'$http'</span>, <span class="hljs-string">'$q'</span>, <span class="hljs-string">'$sce'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$templateCache, $http, $q, $sce</span>) </span>{
            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleRequestFn</span>(<span class="hljs-params">tpl, ignoreRequestError</span>) </span>{
                handleRequestFn.totalPendingRequests++;
                <span class="hljs-keyword">if</span> (!isString(tpl) || isUndefined($templateCache.get(tpl))) {
                    tpl = $sce.getTrustedResourceUrl(tpl);
                }
                <span class="hljs-keyword">var</span> transformResponse = $http.defaults &amp;&amp; $http.defaults.transformResponse;
                <span class="hljs-keyword">if</span> (isArray(transformResponse)) {
                    transformResponse = transformResponse.filter(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">transformer</span>) </span>{
                        <span class="hljs-keyword">return</span> transformer !== defaultHttpResponseTransform;
                    });
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (transformResponse === defaultHttpResponseTransform) {
                    transformResponse = <span class="hljs-literal">null</span>;
                }
                <span class="hljs-keyword">return</span> $http.get(tpl, extend({
                        <span class="hljs-attr">cache</span>: $templateCache,
                        <span class="hljs-attr">transformResponse</span>: transformResponse
                    }, httpOptions))[<span class="hljs-string">'finally'</span>](<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        handleRequestFn.totalPendingRequests--;
                    })
                    .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) </span>{
                        $templateCache.put(tpl, response.data);
                        <span class="hljs-keyword">return</span> response.data;
                    }, handleError);

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleError</span>(<span class="hljs-params">resp</span>) </span>{
                    <span class="hljs-keyword">if</span> (!ignoreRequestError) {
                        <span class="hljs-keyword">throw</span> $templateRequestMinErr(<span class="hljs-string">'tpload'</span>, <span class="hljs-string">'Failed to load template: {0} (HTTP status: {1} {2})'</span>,
                            tpl, resp.status, resp.statusText);
                    }
                    <span class="hljs-keyword">return</span> $q.reject(resp);
                }
            }
            handleRequestFn.totalPendingRequests = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">return</span> handleRequestFn;
        }];
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$$TestabilityProvider</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$rootScope'</span>, <span class="hljs-string">'$browser'</span>, <span class="hljs-string">'$location'</span>,
            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$rootScope, $browser, $location</span>) </span>{
                <span class="hljs-keyword">var</span> testability = {};
                testability.findBindings = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, expression, opt_exactMatch</span>) </span>{
                    <span class="hljs-keyword">var</span> bindings = element.getElementsByClassName(<span class="hljs-string">'ng-binding'</span>);
                    <span class="hljs-keyword">var</span> matches = [];
                    forEach(bindings, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">binding</span>) </span>{
                        <span class="hljs-keyword">var</span> dataBinding = angular.element(binding).data(<span class="hljs-string">'$binding'</span>);
                        <span class="hljs-keyword">if</span> (dataBinding) {
                            forEach(dataBinding, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">bindingName</span>) </span>{
                                <span class="hljs-keyword">if</span> (opt_exactMatch) {
                                    <span class="hljs-keyword">var</span> matcher = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">'(^|\\s)'</span> + escapeForRegexp(expression) + <span class="hljs-string">'(\\s|\\||$)'</span>);
                                    <span class="hljs-keyword">if</span> (matcher.test(bindingName)) {
                                        matches.push(binding);
                                    }
                                } <span class="hljs-keyword">else</span> {
                                    <span class="hljs-keyword">if</span> (bindingName.indexOf(expression) != <span class="hljs-number">-1</span>) {
                                        matches.push(binding);
                                    }
                                }
                            });
                        }
                    });
                    <span class="hljs-keyword">return</span> matches;
                };
                testability.findModels = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, expression, opt_exactMatch</span>) </span>{
                    <span class="hljs-keyword">var</span> prefixes = [<span class="hljs-string">'ng-'</span>, <span class="hljs-string">'data-ng-'</span>, <span class="hljs-string">'ng\\:'</span>];
                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> p = <span class="hljs-number">0</span>; p &lt; prefixes.length; ++p) {
                        <span class="hljs-keyword">var</span> attributeEquals = opt_exactMatch ? <span class="hljs-string">'='</span> : <span class="hljs-string">'*='</span>;
                        <span class="hljs-keyword">var</span> selector = <span class="hljs-string">'['</span> + prefixes[p] + <span class="hljs-string">'model'</span> + attributeEquals + <span class="hljs-string">'"'</span> + expression + <span class="hljs-string">'"]'</span>;
                        <span class="hljs-keyword">var</span> elements = element.querySelectorAll(selector);
                        <span class="hljs-keyword">if</span> (elements.length) {
                            <span class="hljs-keyword">return</span> elements;
                        }
                    }
                };
                testability.getLocation = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">return</span> $location.url();
                };
                testability.setLocation = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">url</span>) </span>{
                    <span class="hljs-keyword">if</span> (url !== $location.url()) {
                        $location.url(url);
                        $rootScope.$digest();
                    }
                };
                testability.whenStable = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) </span>{
                    $browser.notifyWhenNoOutstandingRequests(callback);
                };
                <span class="hljs-keyword">return</span> testability;
            }
        ];
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$TimeoutProvider</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$rootScope'</span>, <span class="hljs-string">'$browser'</span>, <span class="hljs-string">'$q'</span>, <span class="hljs-string">'$$q'</span>, <span class="hljs-string">'$exceptionHandler'</span>,
            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$rootScope, $browser, $q, $$q, $exceptionHandler</span>) </span>{
                <span class="hljs-keyword">var</span> deferreds = {};

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">timeout</span>(<span class="hljs-params">fn, delay, invokeApply</span>) </span>{
                    <span class="hljs-keyword">if</span> (!isFunction(fn)) {
                        invokeApply = delay;
                        delay = fn;
                        fn = noop;
                    }
                    <span class="hljs-keyword">var</span> args = sliceArgs(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">3</span>),
                        skipApply = (isDefined(invokeApply) &amp;&amp; !invokeApply),
                        deferred = (skipApply ? $$q : $q).defer(),
                        promise = deferred.promise,
                        timeoutId;
                    timeoutId = $browser.defer(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">try</span> {
                            deferred.resolve(fn.apply(<span class="hljs-literal">null</span>, args));
                        } <span class="hljs-keyword">catch</span> (e) {
                            deferred.reject(e);
                            $exceptionHandler(e);
                        } <span class="hljs-keyword">finally</span> {
                            <span class="hljs-keyword">delete</span> deferreds[promise.$$timeoutId];
                        }
                        <span class="hljs-keyword">if</span> (!skipApply) $rootScope.$apply();
                    }, delay);
                    promise.$$timeoutId = timeoutId;
                    deferreds[timeoutId] = deferred;
                    <span class="hljs-keyword">return</span> promise;
                }
                timeout.cancel = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">promise</span>) </span>{
                    <span class="hljs-keyword">if</span> (promise &amp;&amp; promise.$$timeoutId <span class="hljs-keyword">in</span> deferreds) {
                        deferreds[promise.$$timeoutId].reject(<span class="hljs-string">'canceled'</span>);
                        <span class="hljs-keyword">delete</span> deferreds[promise.$$timeoutId];
                        <span class="hljs-keyword">return</span> $browser.defer.cancel(promise.$$timeoutId);
                    }
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                };
                <span class="hljs-keyword">return</span> timeout;
            }
        ];
    }
    <span class="hljs-keyword">var</span> urlParsingNode = <span class="hljs-built_in">window</span>.document.createElement(<span class="hljs-string">"a"</span>);
    <span class="hljs-keyword">var</span> originUrl = urlResolve(<span class="hljs-built_in">window</span>.location.href);

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">urlResolve</span>(<span class="hljs-params">url</span>) </span>{
        <span class="hljs-keyword">var</span> href = url;
        <span class="hljs-keyword">if</span> (msie) {
            urlParsingNode.setAttribute(<span class="hljs-string">"href"</span>, href);
            href = urlParsingNode.href;
        }
        urlParsingNode.setAttribute(<span class="hljs-string">'href'</span>, href);
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">href</span>: urlParsingNode.href,
            <span class="hljs-attr">protocol</span>: urlParsingNode.protocol ? urlParsingNode.protocol.replace(<span class="hljs-regexp">/:$/</span>, <span class="hljs-string">''</span>) : <span class="hljs-string">''</span>,
            <span class="hljs-attr">host</span>: urlParsingNode.host,
            <span class="hljs-attr">search</span>: urlParsingNode.search ? urlParsingNode.search.replace(<span class="hljs-regexp">/^\?/</span>, <span class="hljs-string">''</span>) : <span class="hljs-string">''</span>,
            <span class="hljs-attr">hash</span>: urlParsingNode.hash ? urlParsingNode.hash.replace(<span class="hljs-regexp">/^#/</span>, <span class="hljs-string">''</span>) : <span class="hljs-string">''</span>,
            <span class="hljs-attr">hostname</span>: urlParsingNode.hostname,
            <span class="hljs-attr">port</span>: urlParsingNode.port,
            <span class="hljs-attr">pathname</span>: (urlParsingNode.pathname.charAt(<span class="hljs-number">0</span>) === <span class="hljs-string">'/'</span>) ?
                urlParsingNode.pathname :
                <span class="hljs-string">'/'</span> + urlParsingNode.pathname
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">urlIsSameOrigin</span>(<span class="hljs-params">requestUrl</span>) </span>{
        <span class="hljs-keyword">var</span> parsed = (isString(requestUrl)) ? urlResolve(requestUrl) : requestUrl;
        <span class="hljs-keyword">return</span> (parsed.protocol === originUrl.protocol &amp;&amp;
            parsed.host === originUrl.host);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$WindowProvider</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.$get = valueFn(<span class="hljs-built_in">window</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$$CookieReader</span>(<span class="hljs-params">$document</span>) </span>{
        <span class="hljs-keyword">var</span> rawDocument = $<span class="hljs-built_in">document</span>[<span class="hljs-number">0</span>] || {};
        <span class="hljs-keyword">var</span> lastCookies = {};
        <span class="hljs-keyword">var</span> lastCookieString = <span class="hljs-string">''</span>;

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">safeDecodeURIComponent</span>(<span class="hljs-params">str</span>) </span>{
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">return</span> <span class="hljs-built_in">decodeURIComponent</span>(str);
            } <span class="hljs-keyword">catch</span> (e) {
                <span class="hljs-keyword">return</span> str;
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> cookieArray, cookie, i, index, name;
            <span class="hljs-keyword">var</span> currentCookieString = rawDocument.cookie || <span class="hljs-string">''</span>;
            <span class="hljs-keyword">if</span> (currentCookieString !== lastCookieString) {
                lastCookieString = currentCookieString;
                cookieArray = lastCookieString.split(<span class="hljs-string">'; '</span>);
                lastCookies = {};
                <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; cookieArray.length; i++) {
                    cookie = cookieArray[i];
                    index = cookie.indexOf(<span class="hljs-string">'='</span>);
                    <span class="hljs-keyword">if</span> (index &gt; <span class="hljs-number">0</span>) {
                        name = safeDecodeURIComponent(cookie.substring(<span class="hljs-number">0</span>, index));
                        <span class="hljs-keyword">if</span> (isUndefined(lastCookies[name])) {
                            lastCookies[name] = safeDecodeURIComponent(cookie.substring(index + <span class="hljs-number">1</span>));
                        }
                    }
                }
            }
            <span class="hljs-keyword">return</span> lastCookies;
        };
    }
    $$CookieReader.$inject = [<span class="hljs-string">'$document'</span>];

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$$CookieReaderProvider</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.$get = $$CookieReader;
    }
    $FilterProvider.$inject = [<span class="hljs-string">'$provide'</span>];

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$FilterProvider</span>(<span class="hljs-params">$provide</span>) </span>{
        <span class="hljs-keyword">var</span> suffix = <span class="hljs-string">'Filter'</span>;

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">register</span>(<span class="hljs-params">name, factory</span>) </span>{
            <span class="hljs-keyword">if</span> (isObject(name)) {
                <span class="hljs-keyword">var</span> filters = {};
                forEach(name, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">filter, key</span>) </span>{
                    filters[key] = register(key, filter);
                });
                <span class="hljs-keyword">return</span> filters;
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> $provide.factory(name + suffix, factory);
            }
        }
        <span class="hljs-keyword">this</span>.register = register;
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$injector'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$injector</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name</span>) </span>{
                <span class="hljs-keyword">return</span> $injector.get(name + suffix);
            };
        }];
        register(<span class="hljs-string">'currency'</span>, currencyFilter);
        register(<span class="hljs-string">'date'</span>, dateFilter);
        register(<span class="hljs-string">'filter'</span>, filterFilter);
        register(<span class="hljs-string">'json'</span>, jsonFilter);
        register(<span class="hljs-string">'limitTo'</span>, limitToFilter);
        register(<span class="hljs-string">'lowercase'</span>, lowercaseFilter);
        register(<span class="hljs-string">'number'</span>, numberFilter);
        register(<span class="hljs-string">'orderBy'</span>, orderByFilter);
        register(<span class="hljs-string">'uppercase'</span>, uppercaseFilter);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">filterFilter</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">array, expression, comparator, anyPropertyKey</span>) </span>{
            <span class="hljs-keyword">if</span> (!isArrayLike(array)) {
                <span class="hljs-keyword">if</span> (array == <span class="hljs-literal">null</span>) {
                    <span class="hljs-keyword">return</span> array;
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">throw</span> minErr(<span class="hljs-string">'filter'</span>)(<span class="hljs-string">'notarray'</span>, <span class="hljs-string">'Expected array but received: {0}'</span>, array);
                }
            }
            anyPropertyKey = anyPropertyKey || <span class="hljs-string">'$'</span>;
            <span class="hljs-keyword">var</span> expressionType = getTypeForFilter(expression);
            <span class="hljs-keyword">var</span> predicateFn;
            <span class="hljs-keyword">var</span> matchAgainstAnyProp;
            <span class="hljs-keyword">switch</span> (expressionType) {
                <span class="hljs-keyword">case</span> <span class="hljs-string">'function'</span>:
                    predicateFn = expression;
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-string">'boolean'</span>:
                <span class="hljs-keyword">case</span> <span class="hljs-string">'null'</span>:
                <span class="hljs-keyword">case</span> <span class="hljs-string">'number'</span>:
                <span class="hljs-keyword">case</span> <span class="hljs-string">'string'</span>:
                    matchAgainstAnyProp = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-string">'object'</span>:
                    predicateFn = createPredicateFn(expression, comparator, anyPropertyKey, matchAgainstAnyProp);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">default</span>:
                    <span class="hljs-keyword">return</span> array;
            }
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">Array</span>.prototype.filter.call(array, predicateFn);
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createPredicateFn</span>(<span class="hljs-params">expression, comparator, anyPropertyKey, matchAgainstAnyProp</span>) </span>{
        <span class="hljs-keyword">var</span> shouldMatchPrimitives = isObject(expression) &amp;&amp; (anyPropertyKey <span class="hljs-keyword">in</span> expression);
        <span class="hljs-keyword">var</span> predicateFn;
        <span class="hljs-keyword">if</span> (comparator === <span class="hljs-literal">true</span>) {
            comparator = equals;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!isFunction(comparator)) {
            comparator = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">actual, expected</span>) </span>{
                <span class="hljs-keyword">if</span> (isUndefined(actual)) {
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                }
                <span class="hljs-keyword">if</span> ((actual === <span class="hljs-literal">null</span>) || (expected === <span class="hljs-literal">null</span>)) {
                    <span class="hljs-keyword">return</span> actual === expected;
                }
                <span class="hljs-keyword">if</span> (isObject(expected) || (isObject(actual) &amp;&amp; !hasCustomToString(actual))) {
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                }
                actual = lowercase(<span class="hljs-string">''</span> + actual);
                expected = lowercase(<span class="hljs-string">''</span> + expected);
                <span class="hljs-keyword">return</span> actual.indexOf(expected) !== <span class="hljs-number">-1</span>;
            };
        }
        predicateFn = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">item</span>) </span>{
            <span class="hljs-keyword">if</span> (shouldMatchPrimitives &amp;&amp; !isObject(item)) {
                <span class="hljs-keyword">return</span> deepCompare(item, expression[anyPropertyKey], comparator, anyPropertyKey, <span class="hljs-literal">false</span>);
            }
            <span class="hljs-keyword">return</span> deepCompare(item, expression, comparator, anyPropertyKey, matchAgainstAnyProp);
        };
        <span class="hljs-keyword">return</span> predicateFn;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deepCompare</span>(<span class="hljs-params">actual, expected, comparator, anyPropertyKey, matchAgainstAnyProp, dontMatchWholeObject</span>) </span>{
        <span class="hljs-keyword">var</span> actualType = getTypeForFilter(actual);
        <span class="hljs-keyword">var</span> expectedType = getTypeForFilter(expected);
        <span class="hljs-keyword">if</span> ((expectedType === <span class="hljs-string">'string'</span>) &amp;&amp; (expected.charAt(<span class="hljs-number">0</span>) === <span class="hljs-string">'!'</span>)) {
            <span class="hljs-keyword">return</span> !deepCompare(actual, expected.substring(<span class="hljs-number">1</span>), comparator, anyPropertyKey, matchAgainstAnyProp);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isArray(actual)) {
            <span class="hljs-keyword">return</span> actual.some(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">item</span>) </span>{
                <span class="hljs-keyword">return</span> deepCompare(item, expected, comparator, anyPropertyKey, matchAgainstAnyProp);
            });
        }
        <span class="hljs-keyword">switch</span> (actualType) {
            <span class="hljs-keyword">case</span> <span class="hljs-string">'object'</span>:
                <span class="hljs-keyword">var</span> key;
                <span class="hljs-keyword">if</span> (matchAgainstAnyProp) {
                    <span class="hljs-keyword">for</span> (key <span class="hljs-keyword">in</span> actual) {
                        <span class="hljs-keyword">if</span> ((key.charAt(<span class="hljs-number">0</span>) !== <span class="hljs-string">'$'</span>) &amp;&amp; deepCompare(actual[key], expected, comparator, anyPropertyKey, <span class="hljs-literal">true</span>)) {
                            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                        }
                    }
                    <span class="hljs-keyword">return</span> dontMatchWholeObject ? <span class="hljs-literal">false</span> : deepCompare(actual, expected, comparator, anyPropertyKey, <span class="hljs-literal">false</span>);
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (expectedType === <span class="hljs-string">'object'</span>) {
                    <span class="hljs-keyword">for</span> (key <span class="hljs-keyword">in</span> expected) {
                        <span class="hljs-keyword">var</span> expectedVal = expected[key];
                        <span class="hljs-keyword">if</span> (isFunction(expectedVal) || isUndefined(expectedVal)) {
                            <span class="hljs-keyword">continue</span>;
                        }
                        <span class="hljs-keyword">var</span> matchAnyProperty = key === anyPropertyKey;
                        <span class="hljs-keyword">var</span> actualVal = matchAnyProperty ? actual : actual[key];
                        <span class="hljs-keyword">if</span> (!deepCompare(actualVal, expectedVal, comparator, anyPropertyKey, matchAnyProperty, matchAnyProperty)) {
                            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                        }
                    }
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">return</span> comparator(actual, expected);
                }
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">'function'</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">default</span>:
                <span class="hljs-keyword">return</span> comparator(actual, expected);
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getTypeForFilter</span>(<span class="hljs-params">val</span>) </span>{
        <span class="hljs-keyword">return</span> (val === <span class="hljs-literal">null</span>) ? <span class="hljs-string">'null'</span> : <span class="hljs-keyword">typeof</span> val;
    }
    <span class="hljs-keyword">var</span> MAX_DIGITS = <span class="hljs-number">22</span>;
    <span class="hljs-keyword">var</span> DECIMAL_SEP = <span class="hljs-string">'.'</span>;
    <span class="hljs-keyword">var</span> ZERO_CHAR = <span class="hljs-string">'0'</span>;
    currencyFilter.$inject = [<span class="hljs-string">'$locale'</span>];

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">currencyFilter</span>(<span class="hljs-params">$locale</span>) </span>{
        <span class="hljs-keyword">var</span> formats = $locale.NUMBER_FORMATS;
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">amount, currencySymbol, fractionSize</span>) </span>{
            <span class="hljs-keyword">if</span> (isUndefined(currencySymbol)) {
                currencySymbol = formats.CURRENCY_SYM;
            }
            <span class="hljs-keyword">if</span> (isUndefined(fractionSize)) {
                fractionSize = formats.PATTERNS[<span class="hljs-number">1</span>].maxFrac;
            }
            <span class="hljs-keyword">return</span> (amount == <span class="hljs-literal">null</span>) ?
                amount :
                formatNumber(amount, formats.PATTERNS[<span class="hljs-number">1</span>], formats.GROUP_SEP, formats.DECIMAL_SEP, fractionSize).
            replace(<span class="hljs-regexp">/\u00A4/g</span>, currencySymbol);
        };
    }
    numberFilter.$inject = [<span class="hljs-string">'$locale'</span>];

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">numberFilter</span>(<span class="hljs-params">$locale</span>) </span>{
        <span class="hljs-keyword">var</span> formats = $locale.NUMBER_FORMATS;
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">number, fractionSize</span>) </span>{
            <span class="hljs-keyword">return</span> (number == <span class="hljs-literal">null</span>) ?
                number :
                formatNumber(number, formats.PATTERNS[<span class="hljs-number">0</span>], formats.GROUP_SEP, formats.DECIMAL_SEP,
                    fractionSize);
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parse</span>(<span class="hljs-params">numStr</span>) </span>{
        <span class="hljs-keyword">var</span> exponent = <span class="hljs-number">0</span>,
            digits, numberOfIntegerDigits;
        <span class="hljs-keyword">var</span> i, j, zeros;
        <span class="hljs-keyword">if</span> ((numberOfIntegerDigits = numStr.indexOf(DECIMAL_SEP)) &gt; <span class="hljs-number">-1</span>) {
            numStr = numStr.replace(DECIMAL_SEP, <span class="hljs-string">''</span>);
        }
        <span class="hljs-keyword">if</span> ((i = numStr.search(<span class="hljs-regexp">/e/i</span>)) &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">if</span> (numberOfIntegerDigits &lt; <span class="hljs-number">0</span>) numberOfIntegerDigits = i;
            numberOfIntegerDigits += +numStr.slice(i + <span class="hljs-number">1</span>);
            numStr = numStr.substring(<span class="hljs-number">0</span>, i);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (numberOfIntegerDigits &lt; <span class="hljs-number">0</span>) {
            numberOfIntegerDigits = numStr.length;
        }
        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; numStr.charAt(i) == ZERO_CHAR; i++) {}
        <span class="hljs-keyword">if</span> (i == (zeros = numStr.length)) {
            digits = [<span class="hljs-number">0</span>];
            numberOfIntegerDigits = <span class="hljs-number">1</span>;
        } <span class="hljs-keyword">else</span> {
            zeros--;
            <span class="hljs-keyword">while</span> (numStr.charAt(zeros) == ZERO_CHAR) zeros--;
            numberOfIntegerDigits -= i;
            digits = [];
            <span class="hljs-keyword">for</span> (j = <span class="hljs-number">0</span>; i &lt;= zeros; i++, j++) {
                digits[j] = +numStr.charAt(i);
            }
        }
        <span class="hljs-keyword">if</span> (numberOfIntegerDigits &gt; MAX_DIGITS) {
            digits = digits.splice(<span class="hljs-number">0</span>, MAX_DIGITS - <span class="hljs-number">1</span>);
            exponent = numberOfIntegerDigits - <span class="hljs-number">1</span>;
            numberOfIntegerDigits = <span class="hljs-number">1</span>;
        }
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">d</span>: digits,
            <span class="hljs-attr">e</span>: exponent,
            <span class="hljs-attr">i</span>: numberOfIntegerDigits
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">roundNumber</span>(<span class="hljs-params">parsedNumber, fractionSize, minFrac, maxFrac</span>) </span>{
        <span class="hljs-keyword">var</span> digits = parsedNumber.d;
        <span class="hljs-keyword">var</span> fractionLen = digits.length - parsedNumber.i;
        fractionSize = (isUndefined(fractionSize)) ? <span class="hljs-built_in">Math</span>.min(<span class="hljs-built_in">Math</span>.max(minFrac, fractionLen), maxFrac) : +fractionSize;
        <span class="hljs-keyword">var</span> roundAt = fractionSize + parsedNumber.i;
        <span class="hljs-keyword">var</span> digit = digits[roundAt];
        <span class="hljs-keyword">if</span> (roundAt &gt; <span class="hljs-number">0</span>) {
            digits.splice(<span class="hljs-built_in">Math</span>.max(parsedNumber.i, roundAt));
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = roundAt; j &lt; digits.length; j++) {
                digits[j] = <span class="hljs-number">0</span>;
            }
        } <span class="hljs-keyword">else</span> {
            fractionLen = <span class="hljs-built_in">Math</span>.max(<span class="hljs-number">0</span>, fractionLen);
            parsedNumber.i = <span class="hljs-number">1</span>;
            digits.length = <span class="hljs-built_in">Math</span>.max(<span class="hljs-number">1</span>, roundAt = fractionSize + <span class="hljs-number">1</span>);
            digits[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>; i &lt; roundAt; i++) digits[i] = <span class="hljs-number">0</span>;
        }
        <span class="hljs-keyword">if</span> (digit &gt;= <span class="hljs-number">5</span>) {
            <span class="hljs-keyword">if</span> (roundAt - <span class="hljs-number">1</span> &lt; <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> k = <span class="hljs-number">0</span>; k &gt; roundAt; k--) {
                    digits.unshift(<span class="hljs-number">0</span>);
                    parsedNumber.i++;
                }
                digits.unshift(<span class="hljs-number">1</span>);
                parsedNumber.i++;
            } <span class="hljs-keyword">else</span> {
                digits[roundAt - <span class="hljs-number">1</span>]++;
            }
        }
        <span class="hljs-keyword">for</span> (; fractionLen &lt; <span class="hljs-built_in">Math</span>.max(<span class="hljs-number">0</span>, fractionSize); fractionLen++) digits.push(<span class="hljs-number">0</span>);
        <span class="hljs-keyword">var</span> carry = digits.reduceRight(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">carry, d, i, digits</span>) </span>{
            d = d + carry;
            digits[i] = d % <span class="hljs-number">10</span>;
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.floor(d / <span class="hljs-number">10</span>);
        }, <span class="hljs-number">0</span>);
        <span class="hljs-keyword">if</span> (carry) {
            digits.unshift(carry);
            parsedNumber.i++;
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">formatNumber</span>(<span class="hljs-params">number, pattern, groupSep, decimalSep, fractionSize</span>) </span>{
        <span class="hljs-keyword">if</span> (!(isString(number) || isNumber(number)) || <span class="hljs-built_in">isNaN</span>(number)) <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
        <span class="hljs-keyword">var</span> isInfinity = !<span class="hljs-built_in">isFinite</span>(number);
        <span class="hljs-keyword">var</span> isZero = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">var</span> numStr = <span class="hljs-built_in">Math</span>.abs(number) + <span class="hljs-string">''</span>,
            formattedText = <span class="hljs-string">''</span>,
            parsedNumber;
        <span class="hljs-keyword">if</span> (isInfinity) {
            formattedText = <span class="hljs-string">'\u221e'</span>;
        } <span class="hljs-keyword">else</span> {
            parsedNumber = parse(numStr);
            roundNumber(parsedNumber, fractionSize, pattern.minFrac, pattern.maxFrac);
            <span class="hljs-keyword">var</span> digits = parsedNumber.d;
            <span class="hljs-keyword">var</span> integerLen = parsedNumber.i;
            <span class="hljs-keyword">var</span> exponent = parsedNumber.e;
            <span class="hljs-keyword">var</span> decimals = [];
            isZero = digits.reduce(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">isZero, d</span>) </span>{
                <span class="hljs-keyword">return</span> isZero &amp;&amp; !d;
            }, <span class="hljs-literal">true</span>);
            <span class="hljs-keyword">while</span> (integerLen &lt; <span class="hljs-number">0</span>) {
                digits.unshift(<span class="hljs-number">0</span>);
                integerLen++;
            }
            <span class="hljs-keyword">if</span> (integerLen &gt; <span class="hljs-number">0</span>) {
                decimals = digits.splice(integerLen, digits.length);
            } <span class="hljs-keyword">else</span> {
                decimals = digits;
                digits = [<span class="hljs-number">0</span>];
            }
            <span class="hljs-keyword">var</span> groups = [];
            <span class="hljs-keyword">if</span> (digits.length &gt;= pattern.lgSize) {
                groups.unshift(digits.splice(-pattern.lgSize, digits.length).join(<span class="hljs-string">''</span>));
            }
            <span class="hljs-keyword">while</span> (digits.length &gt; pattern.gSize) {
                groups.unshift(digits.splice(-pattern.gSize, digits.length).join(<span class="hljs-string">''</span>));
            }
            <span class="hljs-keyword">if</span> (digits.length) {
                groups.unshift(digits.join(<span class="hljs-string">''</span>));
            }
            formattedText = groups.join(groupSep);
            <span class="hljs-keyword">if</span> (decimals.length) {
                formattedText += decimalSep + decimals.join(<span class="hljs-string">''</span>);
            }
            <span class="hljs-keyword">if</span> (exponent) {
                formattedText += <span class="hljs-string">'e+'</span> + exponent;
            }
        }
        <span class="hljs-keyword">if</span> (number &lt; <span class="hljs-number">0</span> &amp;&amp; !isZero) {
            <span class="hljs-keyword">return</span> pattern.negPre + formattedText + pattern.negSuf;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> pattern.posPre + formattedText + pattern.posSuf;
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">padNumber</span>(<span class="hljs-params">num, digits, trim, negWrap</span>) </span>{
        <span class="hljs-keyword">var</span> neg = <span class="hljs-string">''</span>;
        <span class="hljs-keyword">if</span> (num &lt; <span class="hljs-number">0</span> || (negWrap &amp;&amp; num &lt;= <span class="hljs-number">0</span>)) {
            <span class="hljs-keyword">if</span> (negWrap) {
                num = -num + <span class="hljs-number">1</span>;
            } <span class="hljs-keyword">else</span> {
                num = -num;
                neg = <span class="hljs-string">'-'</span>;
            }
        }
        num = <span class="hljs-string">''</span> + num;
        <span class="hljs-keyword">while</span> (num.length &lt; digits) num = ZERO_CHAR + num;
        <span class="hljs-keyword">if</span> (trim) {
            num = num.substr(num.length - digits);
        }
        <span class="hljs-keyword">return</span> neg + num;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dateGetter</span>(<span class="hljs-params">name, size, offset, trim, negWrap</span>) </span>{
        offset = offset || <span class="hljs-number">0</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">date</span>) </span>{
            <span class="hljs-keyword">var</span> value = date[<span class="hljs-string">'get'</span> + name]();
            <span class="hljs-keyword">if</span> (offset &gt; <span class="hljs-number">0</span> || value &gt; -offset) {
                value += offset;
            }
            <span class="hljs-keyword">if</span> (value === <span class="hljs-number">0</span> &amp;&amp; offset == <span class="hljs-number">-12</span>) value = <span class="hljs-number">12</span>;
            <span class="hljs-keyword">return</span> padNumber(value, size, trim, negWrap);
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dateStrGetter</span>(<span class="hljs-params">name, shortForm, standAlone</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">date, formats</span>) </span>{
            <span class="hljs-keyword">var</span> value = date[<span class="hljs-string">'get'</span> + name]();
            <span class="hljs-keyword">var</span> propPrefix = (standAlone ? <span class="hljs-string">'STANDALONE'</span> : <span class="hljs-string">''</span>) + (shortForm ? <span class="hljs-string">'SHORT'</span> : <span class="hljs-string">''</span>);
            <span class="hljs-keyword">var</span> get = uppercase(propPrefix + name);
            <span class="hljs-keyword">return</span> formats[get][value];
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">timeZoneGetter</span>(<span class="hljs-params">date, formats, offset</span>) </span>{
        <span class="hljs-keyword">var</span> zone = <span class="hljs-number">-1</span> * offset;
        <span class="hljs-keyword">var</span> paddedZone = (zone &gt;= <span class="hljs-number">0</span>) ? <span class="hljs-string">"+"</span> : <span class="hljs-string">""</span>;
        paddedZone += padNumber(<span class="hljs-built_in">Math</span>[zone &gt; <span class="hljs-number">0</span> ? <span class="hljs-string">'floor'</span> : <span class="hljs-string">'ceil'</span>](zone / <span class="hljs-number">60</span>), <span class="hljs-number">2</span>) +
            padNumber(<span class="hljs-built_in">Math</span>.abs(zone % <span class="hljs-number">60</span>), <span class="hljs-number">2</span>);
        <span class="hljs-keyword">return</span> paddedZone;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getFirstThursdayOfYear</span>(<span class="hljs-params">year</span>) </span>{
        <span class="hljs-keyword">var</span> dayOfWeekOnFirst = (<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(year, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>)).getDay();
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(year, <span class="hljs-number">0</span>, ((dayOfWeekOnFirst &lt;= <span class="hljs-number">4</span>) ? <span class="hljs-number">5</span> : <span class="hljs-number">12</span>) - dayOfWeekOnFirst);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getThursdayThisWeek</span>(<span class="hljs-params">datetime</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(datetime.getFullYear(), datetime.getMonth(),
            datetime.getDate() + (<span class="hljs-number">4</span> - datetime.getDay()));
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">weekGetter</span>(<span class="hljs-params">size</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">date</span>) </span>{
            <span class="hljs-keyword">var</span> firstThurs = getFirstThursdayOfYear(date.getFullYear()),
                thisThurs = getThursdayThisWeek(date);
            <span class="hljs-keyword">var</span> diff = +thisThurs - +firstThurs,
                result = <span class="hljs-number">1</span> + <span class="hljs-built_in">Math</span>.round(diff / <span class="hljs-number">6.048e8</span>);
            <span class="hljs-keyword">return</span> padNumber(result, size);
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ampmGetter</span>(<span class="hljs-params">date, formats</span>) </span>{
        <span class="hljs-keyword">return</span> date.getHours() &lt; <span class="hljs-number">12</span> ? formats.AMPMS[<span class="hljs-number">0</span>] : formats.AMPMS[<span class="hljs-number">1</span>];
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">eraGetter</span>(<span class="hljs-params">date, formats</span>) </span>{
        <span class="hljs-keyword">return</span> date.getFullYear() &lt;= <span class="hljs-number">0</span> ? formats.ERAS[<span class="hljs-number">0</span>] : formats.ERAS[<span class="hljs-number">1</span>];
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">longEraGetter</span>(<span class="hljs-params">date, formats</span>) </span>{
        <span class="hljs-keyword">return</span> date.getFullYear() &lt;= <span class="hljs-number">0</span> ? formats.ERANAMES[<span class="hljs-number">0</span>] : formats.ERANAMES[<span class="hljs-number">1</span>];
    }
    <span class="hljs-keyword">var</span> DATE_FORMATS = {
        <span class="hljs-attr">yyyy</span>: dateGetter(<span class="hljs-string">'FullYear'</span>, <span class="hljs-number">4</span>, <span class="hljs-number">0</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>),
        <span class="hljs-attr">yy</span>: dateGetter(<span class="hljs-string">'FullYear'</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>),
        <span class="hljs-attr">y</span>: dateGetter(<span class="hljs-string">'FullYear'</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>),
        <span class="hljs-attr">MMMM</span>: dateStrGetter(<span class="hljs-string">'Month'</span>),
        <span class="hljs-attr">MMM</span>: dateStrGetter(<span class="hljs-string">'Month'</span>, <span class="hljs-literal">true</span>),
        <span class="hljs-attr">MM</span>: dateGetter(<span class="hljs-string">'Month'</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>),
        <span class="hljs-attr">M</span>: dateGetter(<span class="hljs-string">'Month'</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>),
        <span class="hljs-attr">LLLL</span>: dateStrGetter(<span class="hljs-string">'Month'</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>),
        <span class="hljs-attr">dd</span>: dateGetter(<span class="hljs-string">'Date'</span>, <span class="hljs-number">2</span>),
        <span class="hljs-attr">d</span>: dateGetter(<span class="hljs-string">'Date'</span>, <span class="hljs-number">1</span>),
        <span class="hljs-attr">HH</span>: dateGetter(<span class="hljs-string">'Hours'</span>, <span class="hljs-number">2</span>),
        <span class="hljs-attr">H</span>: dateGetter(<span class="hljs-string">'Hours'</span>, <span class="hljs-number">1</span>),
        <span class="hljs-attr">hh</span>: dateGetter(<span class="hljs-string">'Hours'</span>, <span class="hljs-number">2</span>, <span class="hljs-number">-12</span>),
        <span class="hljs-attr">h</span>: dateGetter(<span class="hljs-string">'Hours'</span>, <span class="hljs-number">1</span>, <span class="hljs-number">-12</span>),
        <span class="hljs-attr">mm</span>: dateGetter(<span class="hljs-string">'Minutes'</span>, <span class="hljs-number">2</span>),
        <span class="hljs-attr">m</span>: dateGetter(<span class="hljs-string">'Minutes'</span>, <span class="hljs-number">1</span>),
        <span class="hljs-attr">ss</span>: dateGetter(<span class="hljs-string">'Seconds'</span>, <span class="hljs-number">2</span>),
        <span class="hljs-attr">s</span>: dateGetter(<span class="hljs-string">'Seconds'</span>, <span class="hljs-number">1</span>),
        <span class="hljs-attr">sss</span>: dateGetter(<span class="hljs-string">'Milliseconds'</span>, <span class="hljs-number">3</span>),
        <span class="hljs-attr">EEEE</span>: dateStrGetter(<span class="hljs-string">'Day'</span>),
        <span class="hljs-attr">EEE</span>: dateStrGetter(<span class="hljs-string">'Day'</span>, <span class="hljs-literal">true</span>),
        <span class="hljs-attr">a</span>: ampmGetter,
        <span class="hljs-attr">Z</span>: timeZoneGetter,
        <span class="hljs-attr">ww</span>: weekGetter(<span class="hljs-number">2</span>),
        <span class="hljs-attr">w</span>: weekGetter(<span class="hljs-number">1</span>),
        <span class="hljs-attr">G</span>: eraGetter,
        <span class="hljs-attr">GG</span>: eraGetter,
        <span class="hljs-attr">GGG</span>: eraGetter,
        <span class="hljs-attr">GGGG</span>: longEraGetter
    };
    <span class="hljs-keyword">var</span> DATE_FORMATS_SPLIT = <span class="hljs-regexp">/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/</span>,
        NUMBER_STRING = <span class="hljs-regexp">/^\-?\d+$/</span>;
    dateFilter.$inject = [<span class="hljs-string">'$locale'</span>];

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dateFilter</span>(<span class="hljs-params">$locale</span>) </span>{
        <span class="hljs-keyword">var</span> R_ISO8601_STR = <span class="hljs-regexp">/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/</span>;

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jsonStringToDate</span>(<span class="hljs-params">string</span>) </span>{
            <span class="hljs-keyword">var</span> match;
            <span class="hljs-keyword">if</span> (match = string.match(R_ISO8601_STR)) {
                <span class="hljs-keyword">var</span> date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-number">0</span>),
                    tzHour = <span class="hljs-number">0</span>,
                    tzMin = <span class="hljs-number">0</span>,
                    dateSetter = match[<span class="hljs-number">8</span>] ? date.setUTCFullYear : date.setFullYear,
                    timeSetter = match[<span class="hljs-number">8</span>] ? date.setUTCHours : date.setHours;
                <span class="hljs-keyword">if</span> (match[<span class="hljs-number">9</span>]) {
                    tzHour = toInt(match[<span class="hljs-number">9</span>] + match[<span class="hljs-number">10</span>]);
                    tzMin = toInt(match[<span class="hljs-number">9</span>] + match[<span class="hljs-number">11</span>]);
                }
                dateSetter.call(date, toInt(match[<span class="hljs-number">1</span>]), toInt(match[<span class="hljs-number">2</span>]) - <span class="hljs-number">1</span>, toInt(match[<span class="hljs-number">3</span>]));
                <span class="hljs-keyword">var</span> h = toInt(match[<span class="hljs-number">4</span>] || <span class="hljs-number">0</span>) - tzHour;
                <span class="hljs-keyword">var</span> m = toInt(match[<span class="hljs-number">5</span>] || <span class="hljs-number">0</span>) - tzMin;
                <span class="hljs-keyword">var</span> s = toInt(match[<span class="hljs-number">6</span>] || <span class="hljs-number">0</span>);
                <span class="hljs-keyword">var</span> ms = <span class="hljs-built_in">Math</span>.round(<span class="hljs-built_in">parseFloat</span>(<span class="hljs-string">'0.'</span> + (match[<span class="hljs-number">7</span>] || <span class="hljs-number">0</span>)) * <span class="hljs-number">1000</span>);
                timeSetter.call(date, h, m, s, ms);
                <span class="hljs-keyword">return</span> date;
            }
            <span class="hljs-keyword">return</span> string;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">date, format, timezone</span>) </span>{
            <span class="hljs-keyword">var</span> text = <span class="hljs-string">''</span>,
                parts = [],
                fn, match;
            format = format || <span class="hljs-string">'mediumDate'</span>;
            format = $locale.DATETIME_FORMATS[format] || format;
            <span class="hljs-keyword">if</span> (isString(date)) {
                date = NUMBER_STRING.test(date) ? toInt(date) : jsonStringToDate(date);
            }
            <span class="hljs-keyword">if</span> (isNumber(date)) {
                date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(date);
            }
            <span class="hljs-keyword">if</span> (!isDate(date) || !<span class="hljs-built_in">isFinite</span>(date.getTime())) {
                <span class="hljs-keyword">return</span> date;
            }
            <span class="hljs-keyword">while</span> (format) {
                match = DATE_FORMATS_SPLIT.exec(format);
                <span class="hljs-keyword">if</span> (match) {
                    parts = concat(parts, match, <span class="hljs-number">1</span>);
                    format = parts.pop();
                } <span class="hljs-keyword">else</span> {
                    parts.push(format);
                    format = <span class="hljs-literal">null</span>;
                }
            }
            <span class="hljs-keyword">var</span> dateTimezoneOffset = date.getTimezoneOffset();
            <span class="hljs-keyword">if</span> (timezone) {
                dateTimezoneOffset = timezoneToOffset(timezone, dateTimezoneOffset);
                date = convertTimezoneToLocal(date, timezone, <span class="hljs-literal">true</span>);
            }
            forEach(parts, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                fn = DATE_FORMATS[value];
                text += fn ? fn(date, $locale.DATETIME_FORMATS, dateTimezoneOffset) :
                    value === <span class="hljs-string">"''"</span> ? <span class="hljs-string">"'"</span> : value.replace(<span class="hljs-regexp">/(^'|'$)/g</span>, <span class="hljs-string">''</span>).replace(<span class="hljs-regexp">/''/g</span>, <span class="hljs-string">"'"</span>);
            });
            <span class="hljs-keyword">return</span> text;
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jsonFilter</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">object, spacing</span>) </span>{
            <span class="hljs-keyword">if</span> (isUndefined(spacing)) {
                spacing = <span class="hljs-number">2</span>;
            }
            <span class="hljs-keyword">return</span> toJson(object, spacing);
        };
    }
    <span class="hljs-keyword">var</span> lowercaseFilter = valueFn(lowercase);
    <span class="hljs-keyword">var</span> uppercaseFilter = valueFn(uppercase);

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">limitToFilter</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">input, limit, begin</span>) </span>{
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Math</span>.abs(<span class="hljs-built_in">Number</span>(limit)) === <span class="hljs-literal">Infinity</span>) {
                limit = <span class="hljs-built_in">Number</span>(limit);
            } <span class="hljs-keyword">else</span> {
                limit = toInt(limit);
            }
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNaN</span>(limit)) <span class="hljs-keyword">return</span> input;
            <span class="hljs-keyword">if</span> (isNumber(input)) input = input.toString();
            <span class="hljs-keyword">if</span> (!isArrayLike(input)) <span class="hljs-keyword">return</span> input;
            begin = (!begin || <span class="hljs-built_in">isNaN</span>(begin)) ? <span class="hljs-number">0</span> : toInt(begin);
            begin = (begin &lt; <span class="hljs-number">0</span>) ? <span class="hljs-built_in">Math</span>.max(<span class="hljs-number">0</span>, input.length + begin) : begin;
            <span class="hljs-keyword">if</span> (limit &gt;= <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">return</span> sliceFn(input, begin, begin + limit);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">if</span> (begin === <span class="hljs-number">0</span>) {
                    <span class="hljs-keyword">return</span> sliceFn(input, limit, input.length);
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">return</span> sliceFn(input, <span class="hljs-built_in">Math</span>.max(<span class="hljs-number">0</span>, begin + limit), begin);
                }
            }
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sliceFn</span>(<span class="hljs-params">input, begin, end</span>) </span>{
        <span class="hljs-keyword">if</span> (isString(input)) <span class="hljs-keyword">return</span> input.slice(begin, end);
        <span class="hljs-keyword">return</span> slice.call(input, begin, end);
    }
    orderByFilter.$inject = [<span class="hljs-string">'$parse'</span>];

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">orderByFilter</span>(<span class="hljs-params">$parse</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">array, sortPredicate, reverseOrder, compareFn</span>) </span>{
            <span class="hljs-keyword">if</span> (array == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> array;
            <span class="hljs-keyword">if</span> (!isArrayLike(array)) {
                <span class="hljs-keyword">throw</span> minErr(<span class="hljs-string">'orderBy'</span>)(<span class="hljs-string">'notarray'</span>, <span class="hljs-string">'Expected array but received: {0}'</span>, array);
            }
            <span class="hljs-keyword">if</span> (!isArray(sortPredicate)) {
                sortPredicate = [sortPredicate];
            }
            <span class="hljs-keyword">if</span> (sortPredicate.length === <span class="hljs-number">0</span>) {
                sortPredicate = [<span class="hljs-string">'+'</span>];
            }
            <span class="hljs-keyword">var</span> predicates = processPredicates(sortPredicate);
            <span class="hljs-keyword">var</span> descending = reverseOrder ? <span class="hljs-number">-1</span> : <span class="hljs-number">1</span>;
            <span class="hljs-keyword">var</span> compare = isFunction(compareFn) ? compareFn : defaultCompare;
            <span class="hljs-keyword">var</span> compareValues = <span class="hljs-built_in">Array</span>.prototype.map.call(array, getComparisonObject);
            compareValues.sort(doComparison);
            array = compareValues.map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">item</span>) </span>{
                <span class="hljs-keyword">return</span> item.value;
            });
            <span class="hljs-keyword">return</span> array;

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getComparisonObject</span>(<span class="hljs-params">value, index</span>) </span>{
                <span class="hljs-keyword">return</span> {
                    <span class="hljs-attr">value</span>: value,
                    <span class="hljs-attr">tieBreaker</span>: {
                        <span class="hljs-attr">value</span>: index,
                        <span class="hljs-attr">type</span>: <span class="hljs-string">'number'</span>,
                        <span class="hljs-attr">index</span>: index
                    },
                    <span class="hljs-attr">predicateValues</span>: predicates.map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">predicate</span>) </span>{
                        <span class="hljs-keyword">return</span> getPredicateValue(predicate.get(value), index);
                    })
                };
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">doComparison</span>(<span class="hljs-params">v1, v2</span>) </span>{
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, ii = predicates.length; i &lt; ii; i++) {
                    <span class="hljs-keyword">var</span> result = compare(v1.predicateValues[i], v2.predicateValues[i]);
                    <span class="hljs-keyword">if</span> (result) {
                        <span class="hljs-keyword">return</span> result * predicates[i].descending * descending;
                    }
                }
                <span class="hljs-keyword">return</span> compare(v1.tieBreaker, v2.tieBreaker) * descending;
            }
        };

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processPredicates</span>(<span class="hljs-params">sortPredicates</span>) </span>{
            <span class="hljs-keyword">return</span> sortPredicates.map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">predicate</span>) </span>{
                <span class="hljs-keyword">var</span> descending = <span class="hljs-number">1</span>,
                    get = identity;
                <span class="hljs-keyword">if</span> (isFunction(predicate)) {
                    get = predicate;
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isString(predicate)) {
                    <span class="hljs-keyword">if</span> ((predicate.charAt(<span class="hljs-number">0</span>) == <span class="hljs-string">'+'</span> || predicate.charAt(<span class="hljs-number">0</span>) == <span class="hljs-string">'-'</span>)) {
                        descending = predicate.charAt(<span class="hljs-number">0</span>) == <span class="hljs-string">'-'</span> ? <span class="hljs-number">-1</span> : <span class="hljs-number">1</span>;
                        predicate = predicate.substring(<span class="hljs-number">1</span>);
                    }
                    <span class="hljs-keyword">if</span> (predicate !== <span class="hljs-string">''</span>) {
                        get = $parse(predicate);
                        <span class="hljs-keyword">if</span> (get.constant) {
                            <span class="hljs-keyword">var</span> key = get();
                            get = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                                <span class="hljs-keyword">return</span> value[key];
                            };
                        }
                    }
                }
                <span class="hljs-keyword">return</span> {
                    <span class="hljs-attr">get</span>: get,
                    <span class="hljs-attr">descending</span>: descending
                };
            });
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isPrimitive</span>(<span class="hljs-params">value</span>) </span>{
            <span class="hljs-keyword">switch</span> (<span class="hljs-keyword">typeof</span> value) {
                <span class="hljs-keyword">case</span> <span class="hljs-string">'number'</span>:
                <span class="hljs-keyword">case</span> <span class="hljs-string">'boolean'</span>:
                <span class="hljs-keyword">case</span> <span class="hljs-string">'string'</span>:
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">default</span>:
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">objectValue</span>(<span class="hljs-params">value</span>) </span>{
            <span class="hljs-keyword">if</span> (isFunction(value.valueOf)) {
                value = value.valueOf();
                <span class="hljs-keyword">if</span> (isPrimitive(value)) <span class="hljs-keyword">return</span> value;
            }
            <span class="hljs-keyword">if</span> (hasCustomToString(value)) {
                value = value.toString();
                <span class="hljs-keyword">if</span> (isPrimitive(value)) <span class="hljs-keyword">return</span> value;
            }
            <span class="hljs-keyword">return</span> value;
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getPredicateValue</span>(<span class="hljs-params">value, index</span>) </span>{
            <span class="hljs-keyword">var</span> type = <span class="hljs-keyword">typeof</span> value;
            <span class="hljs-keyword">if</span> (value === <span class="hljs-literal">null</span>) {
                type = <span class="hljs-string">'string'</span>;
                value = <span class="hljs-string">'null'</span>;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (type === <span class="hljs-string">'object'</span>) {
                value = objectValue(value);
            }
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">value</span>: value,
                <span class="hljs-attr">type</span>: type,
                <span class="hljs-attr">index</span>: index
            };
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">defaultCompare</span>(<span class="hljs-params">v1, v2</span>) </span>{
            <span class="hljs-keyword">var</span> result = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">var</span> type1 = v1.type;
            <span class="hljs-keyword">var</span> type2 = v2.type;
            <span class="hljs-keyword">if</span> (type1 === type2) {
                <span class="hljs-keyword">var</span> value1 = v1.value;
                <span class="hljs-keyword">var</span> value2 = v2.value;
                <span class="hljs-keyword">if</span> (type1 === <span class="hljs-string">'string'</span>) {
                    value1 = value1.toLowerCase();
                    value2 = value2.toLowerCase();
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (type1 === <span class="hljs-string">'object'</span>) {
                    <span class="hljs-keyword">if</span> (isObject(value1)) value1 = v1.index;
                    <span class="hljs-keyword">if</span> (isObject(value2)) value2 = v2.index;
                }
                <span class="hljs-keyword">if</span> (value1 !== value2) {
                    result = value1 &lt; value2 ? <span class="hljs-number">-1</span> : <span class="hljs-number">1</span>;
                }
            } <span class="hljs-keyword">else</span> {
                result = type1 &lt; type2 ? <span class="hljs-number">-1</span> : <span class="hljs-number">1</span>;
            }
            <span class="hljs-keyword">return</span> result;
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngDirective</span>(<span class="hljs-params">directive</span>) </span>{
        <span class="hljs-keyword">if</span> (isFunction(directive)) {
            directive = {
                <span class="hljs-attr">link</span>: directive
            };
        }
        directive.restrict = directive.restrict || <span class="hljs-string">'AC'</span>;
        <span class="hljs-keyword">return</span> valueFn(directive);
    }
    <span class="hljs-keyword">var</span> htmlAnchorDirective = valueFn({
        <span class="hljs-attr">restrict</span>: <span class="hljs-string">'E'</span>,
        <span class="hljs-attr">compile</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, attr</span>) </span>{
            <span class="hljs-keyword">if</span> (!attr.href &amp;&amp; !attr.xlinkHref) {
                <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, element</span>) </span>{
                    <span class="hljs-keyword">if</span> (element[<span class="hljs-number">0</span>].nodeName.toLowerCase() !== <span class="hljs-string">'a'</span>) <span class="hljs-keyword">return</span>;
                    <span class="hljs-keyword">var</span> href = toString.call(element.prop(<span class="hljs-string">'href'</span>)) === <span class="hljs-string">'[object SVGAnimatedString]'</span> ?
                        <span class="hljs-string">'xlink:href'</span> : <span class="hljs-string">'href'</span>;
                    element.on(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
                        <span class="hljs-keyword">if</span> (!element.attr(href)) {
                            event.preventDefault();
                        }
                    });
                };
            }
        }
    });
    <span class="hljs-keyword">var</span> ngAttributeAliasDirectives = {};
    forEach(BOOLEAN_ATTR, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">propName, attrName</span>) </span>{
        <span class="hljs-keyword">if</span> (propName == <span class="hljs-string">"multiple"</span>) <span class="hljs-keyword">return</span>;

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">defaultLinkFn</span>(<span class="hljs-params">scope, element, attr</span>) </span>{
            scope.$watch(attr[normalized], <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngBooleanAttrWatchAction</span>(<span class="hljs-params">value</span>) </span>{
                attr.$set(attrName, !!value);
            });
        }
        <span class="hljs-keyword">var</span> normalized = directiveNormalize(<span class="hljs-string">'ng-'</span> + attrName);
        <span class="hljs-keyword">var</span> linkFn = defaultLinkFn;
        <span class="hljs-keyword">if</span> (propName === <span class="hljs-string">'checked'</span>) {
            linkFn = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, element, attr</span>) </span>{
                <span class="hljs-keyword">if</span> (attr.ngModel !== attr[normalized]) {
                    defaultLinkFn(scope, element, attr);
                }
            };
        }
        ngAttributeAliasDirectives[normalized] = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">restrict</span>: <span class="hljs-string">'A'</span>,
                <span class="hljs-attr">priority</span>: <span class="hljs-number">100</span>,
                <span class="hljs-attr">link</span>: linkFn
            };
        };
    });
    forEach(ALIASED_ATTR, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">htmlAttr, ngAttr</span>) </span>{
        ngAttributeAliasDirectives[ngAttr] = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">priority</span>: <span class="hljs-number">100</span>,
                <span class="hljs-attr">link</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, element, attr</span>) </span>{
                    <span class="hljs-keyword">if</span> (ngAttr === <span class="hljs-string">"ngPattern"</span> &amp;&amp; attr.ngPattern.charAt(<span class="hljs-number">0</span>) == <span class="hljs-string">"/"</span>) {
                        <span class="hljs-keyword">var</span> match = attr.ngPattern.match(REGEX_STRING_REGEXP);
                        <span class="hljs-keyword">if</span> (match) {
                            attr.$set(<span class="hljs-string">"ngPattern"</span>, <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(match[<span class="hljs-number">1</span>], match[<span class="hljs-number">2</span>]));
                            <span class="hljs-keyword">return</span>;
                        }
                    }
                    scope.$watch(attr[ngAttr], <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngAttrAliasWatchAction</span>(<span class="hljs-params">value</span>) </span>{
                        attr.$set(ngAttr, value);
                    });
                }
            };
        };
    });
    forEach([<span class="hljs-string">'src'</span>, <span class="hljs-string">'srcset'</span>, <span class="hljs-string">'href'</span>], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">attrName</span>) </span>{
        <span class="hljs-keyword">var</span> normalized = directiveNormalize(<span class="hljs-string">'ng-'</span> + attrName);
        ngAttributeAliasDirectives[normalized] = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">priority</span>: <span class="hljs-number">99</span>,
                <span class="hljs-attr">link</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, element, attr</span>) </span>{
                    <span class="hljs-keyword">var</span> propName = attrName,
                        name = attrName;
                    <span class="hljs-keyword">if</span> (attrName === <span class="hljs-string">'href'</span> &amp;&amp;
                        toString.call(element.prop(<span class="hljs-string">'href'</span>)) === <span class="hljs-string">'[object SVGAnimatedString]'</span>) {
                        name = <span class="hljs-string">'xlinkHref'</span>;
                        attr.$attr[name] = <span class="hljs-string">'xlink:href'</span>;
                        propName = <span class="hljs-literal">null</span>;
                    }
                    attr.$observe(normalized, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                        <span class="hljs-keyword">if</span> (!value) {
                            <span class="hljs-keyword">if</span> (attrName === <span class="hljs-string">'href'</span>) {
                                attr.$set(name, <span class="hljs-literal">null</span>);
                            }
                            <span class="hljs-keyword">return</span>;
                        }
                        attr.$set(name, value);
                        <span class="hljs-keyword">if</span> (msie &amp;&amp; propName) element.prop(propName, attr[name]);
                    });
                }
            };
        };
    });
    <span class="hljs-keyword">var</span> nullFormCtrl = {
            <span class="hljs-attr">$addControl</span>: noop,
            <span class="hljs-attr">$$renameControl</span>: nullFormRenameControl,
            <span class="hljs-attr">$removeControl</span>: noop,
            <span class="hljs-attr">$setValidity</span>: noop,
            <span class="hljs-attr">$setDirty</span>: noop,
            <span class="hljs-attr">$setPristine</span>: noop,
            <span class="hljs-attr">$setSubmitted</span>: noop
        },
        SUBMITTED_CLASS = <span class="hljs-string">'ng-submitted'</span>;

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">nullFormRenameControl</span>(<span class="hljs-params">control, name</span>) </span>{
        control.$name = name;
    }
    FormController.$inject = [<span class="hljs-string">'$element'</span>, <span class="hljs-string">'$attrs'</span>, <span class="hljs-string">'$scope'</span>, <span class="hljs-string">'$animate'</span>, <span class="hljs-string">'$interpolate'</span>];

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">FormController</span>(<span class="hljs-params">element, attrs, $scope, $animate, $interpolate</span>) </span>{
        <span class="hljs-keyword">var</span> form = <span class="hljs-keyword">this</span>,
            controls = [];
        form.$error = {};
        form.$$success = {};
        form.$pending = <span class="hljs-literal">undefined</span>;
        form.$name = $interpolate(attrs.name || attrs.ngForm || <span class="hljs-string">''</span>)($scope);
        form.$dirty = <span class="hljs-literal">false</span>;
        form.$pristine = <span class="hljs-literal">true</span>;
        form.$valid = <span class="hljs-literal">true</span>;
        form.$invalid = <span class="hljs-literal">false</span>;
        form.$submitted = <span class="hljs-literal">false</span>;
        form.$$parentForm = nullFormCtrl;
        form.$rollbackViewValue = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            forEach(controls, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">control</span>) </span>{
                control.$rollbackViewValue();
            });
        };
        form.$commitViewValue = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            forEach(controls, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">control</span>) </span>{
                control.$commitViewValue();
            });
        };
        form.$addControl = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">control</span>) </span>{
            assertNotHasOwnProperty(control.$name, <span class="hljs-string">'input'</span>);
            controls.push(control);
            <span class="hljs-keyword">if</span> (control.$name) {
                form[control.$name] = control;
            }
            control.$$parentForm = form;
        };
        form.$$renameControl = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">control, newName</span>) </span>{
            <span class="hljs-keyword">var</span> oldName = control.$name;
            <span class="hljs-keyword">if</span> (form[oldName] === control) {
                <span class="hljs-keyword">delete</span> form[oldName];
            }
            form[newName] = control;
            control.$name = newName;
        };
        form.$removeControl = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">control</span>) </span>{
            <span class="hljs-keyword">if</span> (control.$name &amp;&amp; form[control.$name] === control) {
                <span class="hljs-keyword">delete</span> form[control.$name];
            }
            forEach(form.$pending, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, name</span>) </span>{
                form.$setValidity(name, <span class="hljs-literal">null</span>, control);
            });
            forEach(form.$error, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, name</span>) </span>{
                form.$setValidity(name, <span class="hljs-literal">null</span>, control);
            });
            forEach(form.$$success, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, name</span>) </span>{
                form.$setValidity(name, <span class="hljs-literal">null</span>, control);
            });
            arrayRemove(controls, control);
            control.$$parentForm = nullFormCtrl;
        };
        addSetValidityMethod({
            <span class="hljs-attr">ctrl</span>: <span class="hljs-keyword">this</span>,
            <span class="hljs-attr">$element</span>: element,
            <span class="hljs-attr">set</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">object, property, controller</span>) </span>{
                <span class="hljs-keyword">var</span> list = object[property];
                <span class="hljs-keyword">if</span> (!list) {
                    object[property] = [controller];
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">var</span> index = list.indexOf(controller);
                    <span class="hljs-keyword">if</span> (index === <span class="hljs-number">-1</span>) {
                        list.push(controller);
                    }
                }
            },
            <span class="hljs-attr">unset</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">object, property, controller</span>) </span>{
                <span class="hljs-keyword">var</span> list = object[property];
                <span class="hljs-keyword">if</span> (!list) {
                    <span class="hljs-keyword">return</span>;
                }
                arrayRemove(list, controller);
                <span class="hljs-keyword">if</span> (list.length === <span class="hljs-number">0</span>) {
                    <span class="hljs-keyword">delete</span> object[property];
                }
            },
            <span class="hljs-attr">$animate</span>: $animate
        });
        form.$setDirty = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            $animate.removeClass(element, PRISTINE_CLASS);
            $animate.addClass(element, DIRTY_CLASS);
            form.$dirty = <span class="hljs-literal">true</span>;
            form.$pristine = <span class="hljs-literal">false</span>;
            form.$$parentForm.$setDirty();
        };
        form.$setPristine = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            $animate.setClass(element, PRISTINE_CLASS, DIRTY_CLASS + <span class="hljs-string">' '</span> + SUBMITTED_CLASS);
            form.$dirty = <span class="hljs-literal">false</span>;
            form.$pristine = <span class="hljs-literal">true</span>;
            form.$submitted = <span class="hljs-literal">false</span>;
            forEach(controls, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">control</span>) </span>{
                control.$setPristine();
            });
        };
        form.$setUntouched = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            forEach(controls, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">control</span>) </span>{
                control.$setUntouched();
            });
        };
        form.$setSubmitted = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            $animate.addClass(element, SUBMITTED_CLASS);
            form.$submitted = <span class="hljs-literal">true</span>;
            form.$$parentForm.$setSubmitted();
        };
    }
    <span class="hljs-keyword">var</span> formDirectiveFactory = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">isNgForm</span>) </span>{
        <span class="hljs-keyword">return</span> [<span class="hljs-string">'$timeout'</span>, <span class="hljs-string">'$parse'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$timeout, $parse</span>) </span>{
            <span class="hljs-keyword">var</span> formDirective = {
                <span class="hljs-attr">name</span>: <span class="hljs-string">'form'</span>,
                <span class="hljs-attr">restrict</span>: isNgForm ? <span class="hljs-string">'EAC'</span> : <span class="hljs-string">'E'</span>,
                <span class="hljs-attr">require</span>: [<span class="hljs-string">'form'</span>, <span class="hljs-string">'^^?form'</span>],
                <span class="hljs-attr">controller</span>: FormController,
                <span class="hljs-attr">compile</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngFormCompile</span>(<span class="hljs-params">formElement, attr</span>) </span>{
                    formElement.addClass(PRISTINE_CLASS).addClass(VALID_CLASS);
                    <span class="hljs-keyword">var</span> nameAttr = attr.name ? <span class="hljs-string">'name'</span> : (isNgForm &amp;&amp; attr.ngForm ? <span class="hljs-string">'ngForm'</span> : <span class="hljs-literal">false</span>);
                    <span class="hljs-keyword">return</span> {
                        <span class="hljs-attr">pre</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngFormPreLink</span>(<span class="hljs-params">scope, formElement, attr, ctrls</span>) </span>{
                            <span class="hljs-keyword">var</span> controller = ctrls[<span class="hljs-number">0</span>];
                            <span class="hljs-keyword">if</span> (!(<span class="hljs-string">'action'</span> <span class="hljs-keyword">in</span> attr)) {
                                <span class="hljs-keyword">var</span> handleFormSubmission = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
                                    scope.$apply(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                                        controller.$commitViewValue();
                                        controller.$setSubmitted();
                                    });
                                    event.preventDefault();
                                };
                                addEventListenerFn(formElement[<span class="hljs-number">0</span>], <span class="hljs-string">'submit'</span>, handleFormSubmission);
                                formElement.on(<span class="hljs-string">'$destroy'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                                    $timeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                                        removeEventListenerFn(formElement[<span class="hljs-number">0</span>], <span class="hljs-string">'submit'</span>, handleFormSubmission);
                                    }, <span class="hljs-number">0</span>, <span class="hljs-literal">false</span>);
                                });
                            }
                            <span class="hljs-keyword">var</span> parentFormCtrl = ctrls[<span class="hljs-number">1</span>] || controller.$$parentForm;
                            parentFormCtrl.$addControl(controller);
                            <span class="hljs-keyword">var</span> setter = nameAttr ? getSetter(controller.$name) : noop;
                            <span class="hljs-keyword">if</span> (nameAttr) {
                                setter(scope, controller);
                                attr.$observe(nameAttr, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">newValue</span>) </span>{
                                    <span class="hljs-keyword">if</span> (controller.$name === newValue) <span class="hljs-keyword">return</span>;
                                    setter(scope, <span class="hljs-literal">undefined</span>);
                                    controller.$$parentForm.$$renameControl(controller, newValue);
                                    setter = getSetter(controller.$name);
                                    setter(scope, controller);
                                });
                            }
                            formElement.on(<span class="hljs-string">'$destroy'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                                controller.$$parentForm.$removeControl(controller);
                                setter(scope, <span class="hljs-literal">undefined</span>);
                                extend(controller, nullFormCtrl);
                            });
                        }
                    };
                }
            };
            <span class="hljs-keyword">return</span> formDirective;

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getSetter</span>(<span class="hljs-params">expression</span>) </span>{
                <span class="hljs-keyword">if</span> (expression === <span class="hljs-string">''</span>) {
                    <span class="hljs-keyword">return</span> $parse(<span class="hljs-string">'this[""]'</span>).assign;
                }
                <span class="hljs-keyword">return</span> $parse(expression).assign || noop;
            }
        }];
    };
    <span class="hljs-keyword">var</span> formDirective = formDirectiveFactory();
    <span class="hljs-keyword">var</span> ngFormDirective = formDirectiveFactory(<span class="hljs-literal">true</span>);
    <span class="hljs-keyword">var</span> ISO_DATE_REGEXP = <span class="hljs-regexp">/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/</span>;
    <span class="hljs-keyword">var</span> URL_REGEXP = <span class="hljs-regexp">/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+\])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i</span>;
    <span class="hljs-keyword">var</span> EMAIL_REGEXP = <span class="hljs-regexp">/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&amp;'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&amp;'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/</span>;
    <span class="hljs-keyword">var</span> NUMBER_REGEXP = <span class="hljs-regexp">/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/</span>;
    <span class="hljs-keyword">var</span> DATE_REGEXP = <span class="hljs-regexp">/^(\d{4,})-(\d{2})-(\d{2})$/</span>;
    <span class="hljs-keyword">var</span> DATETIMELOCAL_REGEXP = <span class="hljs-regexp">/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/</span>;
    <span class="hljs-keyword">var</span> WEEK_REGEXP = <span class="hljs-regexp">/^(\d{4,})-W(\d\d)$/</span>;
    <span class="hljs-keyword">var</span> MONTH_REGEXP = <span class="hljs-regexp">/^(\d{4,})-(\d\d)$/</span>;
    <span class="hljs-keyword">var</span> TIME_REGEXP = <span class="hljs-regexp">/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/</span>;
    <span class="hljs-keyword">var</span> PARTIAL_VALIDATION_EVENTS = <span class="hljs-string">'keydown wheel mousedown'</span>;
    <span class="hljs-keyword">var</span> PARTIAL_VALIDATION_TYPES = createMap();
    forEach(<span class="hljs-string">'date,datetime-local,month,time,week'</span>.split(<span class="hljs-string">','</span>), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">type</span>) </span>{
        PARTIAL_VALIDATION_TYPES[type] = <span class="hljs-literal">true</span>;
    });
    <span class="hljs-keyword">var</span> inputType = {
        <span class="hljs-string">'text'</span>: textInputType,
        <span class="hljs-string">'date'</span>: createDateInputType(<span class="hljs-string">'date'</span>, DATE_REGEXP,
            createDateParser(DATE_REGEXP, [<span class="hljs-string">'yyyy'</span>, <span class="hljs-string">'MM'</span>, <span class="hljs-string">'dd'</span>]),
            <span class="hljs-string">'yyyy-MM-dd'</span>),
        <span class="hljs-string">'datetime-local'</span>: createDateInputType(<span class="hljs-string">'datetimelocal'</span>, DATETIMELOCAL_REGEXP,
            createDateParser(DATETIMELOCAL_REGEXP, [<span class="hljs-string">'yyyy'</span>, <span class="hljs-string">'MM'</span>, <span class="hljs-string">'dd'</span>, <span class="hljs-string">'HH'</span>, <span class="hljs-string">'mm'</span>, <span class="hljs-string">'ss'</span>, <span class="hljs-string">'sss'</span>]),
            <span class="hljs-string">'yyyy-MM-ddTHH:mm:ss.sss'</span>),
        <span class="hljs-string">'time'</span>: createDateInputType(<span class="hljs-string">'time'</span>, TIME_REGEXP,
            createDateParser(TIME_REGEXP, [<span class="hljs-string">'HH'</span>, <span class="hljs-string">'mm'</span>, <span class="hljs-string">'ss'</span>, <span class="hljs-string">'sss'</span>]),
            <span class="hljs-string">'HH:mm:ss.sss'</span>),
        <span class="hljs-string">'week'</span>: createDateInputType(<span class="hljs-string">'week'</span>, WEEK_REGEXP, weekParser, <span class="hljs-string">'yyyy-Www'</span>),
        <span class="hljs-string">'month'</span>: createDateInputType(<span class="hljs-string">'month'</span>, MONTH_REGEXP,
            createDateParser(MONTH_REGEXP, [<span class="hljs-string">'yyyy'</span>, <span class="hljs-string">'MM'</span>]),
            <span class="hljs-string">'yyyy-MM'</span>),
        <span class="hljs-string">'number'</span>: numberInputType,
        <span class="hljs-string">'url'</span>: urlInputType,
        <span class="hljs-string">'email'</span>: emailInputType,
        <span class="hljs-string">'radio'</span>: radioInputType,
        <span class="hljs-string">'checkbox'</span>: checkboxInputType,
        <span class="hljs-string">'hidden'</span>: noop,
        <span class="hljs-string">'button'</span>: noop,
        <span class="hljs-string">'submit'</span>: noop,
        <span class="hljs-string">'reset'</span>: noop,
        <span class="hljs-string">'file'</span>: noop
    };

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stringBasedInputType</span>(<span class="hljs-params">ctrl</span>) </span>{
        ctrl.$formatters.push(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
            <span class="hljs-keyword">return</span> ctrl.$isEmpty(value) ? value : value.toString();
        });
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">textInputType</span>(<span class="hljs-params">scope, element, attr, ctrl, $sniffer, $browser</span>) </span>{
        baseInputType(scope, element, attr, ctrl, $sniffer, $browser);
        stringBasedInputType(ctrl);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">baseInputType</span>(<span class="hljs-params">scope, element, attr, ctrl, $sniffer, $browser</span>) </span>{
        <span class="hljs-keyword">var</span> type = lowercase(element[<span class="hljs-number">0</span>].type);
        <span class="hljs-keyword">if</span> (!$sniffer.android) {
            <span class="hljs-keyword">var</span> composing = <span class="hljs-literal">false</span>;
            element.on(<span class="hljs-string">'compositionstart'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                composing = <span class="hljs-literal">true</span>;
            });
            element.on(<span class="hljs-string">'compositionend'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                composing = <span class="hljs-literal">false</span>;
                listener();
            });
        }
        <span class="hljs-keyword">var</span> timeout;
        <span class="hljs-keyword">var</span> listener = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ev</span>) </span>{
            <span class="hljs-keyword">if</span> (timeout) {
                $browser.defer.cancel(timeout);
                timeout = <span class="hljs-literal">null</span>;
            }
            <span class="hljs-keyword">if</span> (composing) <span class="hljs-keyword">return</span>;
            <span class="hljs-keyword">var</span> value = element.val(),
                event = ev &amp;&amp; ev.type;
            <span class="hljs-keyword">if</span> (type !== <span class="hljs-string">'password'</span> &amp;&amp; (!attr.ngTrim || attr.ngTrim !== <span class="hljs-string">'false'</span>)) {
                value = trim(value);
            }
            <span class="hljs-keyword">if</span> (ctrl.$viewValue !== value || (value === <span class="hljs-string">''</span> &amp;&amp; ctrl.$$hasNativeValidators)) {
                ctrl.$setViewValue(value, event);
            }
        };
        <span class="hljs-keyword">if</span> ($sniffer.hasEvent(<span class="hljs-string">'input'</span>)) {
            element.on(<span class="hljs-string">'input'</span>, listener);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">var</span> deferListener = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ev, input, origValue</span>) </span>{
                <span class="hljs-keyword">if</span> (!timeout) {
                    timeout = $browser.defer(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        timeout = <span class="hljs-literal">null</span>;
                        <span class="hljs-keyword">if</span> (!input || input.value !== origValue) {
                            listener(ev);
                        }
                    });
                }
            };
            element.on(<span class="hljs-string">'keydown'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
                <span class="hljs-keyword">var</span> key = event.keyCode;
                <span class="hljs-keyword">if</span> (key === <span class="hljs-number">91</span> || (<span class="hljs-number">15</span> &lt; key &amp;&amp; key &lt; <span class="hljs-number">19</span>) || (<span class="hljs-number">37</span> &lt;= key &amp;&amp; key &lt;= <span class="hljs-number">40</span>)) <span class="hljs-keyword">return</span>;
                deferListener(event, <span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.value);
            });
            <span class="hljs-keyword">if</span> ($sniffer.hasEvent(<span class="hljs-string">'paste'</span>)) {
                element.on(<span class="hljs-string">'paste cut'</span>, deferListener);
            }
        }
        element.on(<span class="hljs-string">'change'</span>, listener);
        <span class="hljs-keyword">if</span> (PARTIAL_VALIDATION_TYPES[type] &amp;&amp; ctrl.$$hasNativeValidators &amp;&amp; type === attr.type) {
            element.on(PARTIAL_VALIDATION_EVENTS, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ev</span>) </span>{
                <span class="hljs-keyword">if</span> (!timeout) {
                    <span class="hljs-keyword">var</span> validity = <span class="hljs-keyword">this</span>[VALIDITY_STATE_PROPERTY];
                    <span class="hljs-keyword">var</span> origBadInput = validity.badInput;
                    <span class="hljs-keyword">var</span> origTypeMismatch = validity.typeMismatch;
                    timeout = $browser.defer(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        timeout = <span class="hljs-literal">null</span>;
                        <span class="hljs-keyword">if</span> (validity.badInput !== origBadInput || validity.typeMismatch !== origTypeMismatch) {
                            listener(ev);
                        }
                    });
                }
            });
        }
        ctrl.$render = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> value = ctrl.$isEmpty(ctrl.$viewValue) ? <span class="hljs-string">''</span> : ctrl.$viewValue;
            <span class="hljs-keyword">if</span> (element.val() !== value) {
                element.val(value);
            }
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">weekParser</span>(<span class="hljs-params">isoWeek, existingDate</span>) </span>{
        <span class="hljs-keyword">if</span> (isDate(isoWeek)) {
            <span class="hljs-keyword">return</span> isoWeek;
        }
        <span class="hljs-keyword">if</span> (isString(isoWeek)) {
            WEEK_REGEXP.lastIndex = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">var</span> parts = WEEK_REGEXP.exec(isoWeek);
            <span class="hljs-keyword">if</span> (parts) {
                <span class="hljs-keyword">var</span> year = +parts[<span class="hljs-number">1</span>],
                    week = +parts[<span class="hljs-number">2</span>],
                    hours = <span class="hljs-number">0</span>,
                    minutes = <span class="hljs-number">0</span>,
                    seconds = <span class="hljs-number">0</span>,
                    milliseconds = <span class="hljs-number">0</span>,
                    firstThurs = getFirstThursdayOfYear(year),
                    addDays = (week - <span class="hljs-number">1</span>) * <span class="hljs-number">7</span>;
                <span class="hljs-keyword">if</span> (existingDate) {
                    hours = existingDate.getHours();
                    minutes = existingDate.getMinutes();
                    seconds = existingDate.getSeconds();
                    milliseconds = existingDate.getMilliseconds();
                }
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(year, <span class="hljs-number">0</span>, firstThurs.getDate() + addDays, hours, minutes, seconds, milliseconds);
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">NaN</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createDateParser</span>(<span class="hljs-params">regexp, mapping</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">iso, date</span>) </span>{
            <span class="hljs-keyword">var</span> parts, map;
            <span class="hljs-keyword">if</span> (isDate(iso)) {
                <span class="hljs-keyword">return</span> iso;
            }
            <span class="hljs-keyword">if</span> (isString(iso)) {
                <span class="hljs-keyword">if</span> (iso.charAt(<span class="hljs-number">0</span>) == <span class="hljs-string">'"'</span> &amp;&amp; iso.charAt(iso.length - <span class="hljs-number">1</span>) == <span class="hljs-string">'"'</span>) {
                    iso = iso.substring(<span class="hljs-number">1</span>, iso.length - <span class="hljs-number">1</span>);
                }
                <span class="hljs-keyword">if</span> (ISO_DATE_REGEXP.test(iso)) {
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(iso);
                }
                regexp.lastIndex = <span class="hljs-number">0</span>;
                parts = regexp.exec(iso);
                <span class="hljs-keyword">if</span> (parts) {
                    parts.shift();
                    <span class="hljs-keyword">if</span> (date) {
                        map = {
                            <span class="hljs-attr">yyyy</span>: date.getFullYear(),
                            <span class="hljs-attr">MM</span>: date.getMonth() + <span class="hljs-number">1</span>,
                            <span class="hljs-attr">dd</span>: date.getDate(),
                            <span class="hljs-attr">HH</span>: date.getHours(),
                            <span class="hljs-attr">mm</span>: date.getMinutes(),
                            <span class="hljs-attr">ss</span>: date.getSeconds(),
                            <span class="hljs-attr">sss</span>: date.getMilliseconds() / <span class="hljs-number">1000</span>
                        };
                    } <span class="hljs-keyword">else</span> {
                        map = {
                            <span class="hljs-attr">yyyy</span>: <span class="hljs-number">1970</span>,
                            <span class="hljs-attr">MM</span>: <span class="hljs-number">1</span>,
                            <span class="hljs-attr">dd</span>: <span class="hljs-number">1</span>,
                            <span class="hljs-attr">HH</span>: <span class="hljs-number">0</span>,
                            <span class="hljs-attr">mm</span>: <span class="hljs-number">0</span>,
                            <span class="hljs-attr">ss</span>: <span class="hljs-number">0</span>,
                            <span class="hljs-attr">sss</span>: <span class="hljs-number">0</span>
                        };
                    }
                    forEach(parts, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">part, index</span>) </span>{
                        <span class="hljs-keyword">if</span> (index &lt; mapping.length) {
                            map[mapping[index]] = +part;
                        }
                    });
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(map.yyyy, map.MM - <span class="hljs-number">1</span>, map.dd, map.HH, map.mm, map.ss || <span class="hljs-number">0</span>, map.sss * <span class="hljs-number">1000</span> || <span class="hljs-number">0</span>);
                }
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">NaN</span>;
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createDateInputType</span>(<span class="hljs-params">type, regexp, parseDate, format</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dynamicDateInputType</span>(<span class="hljs-params">scope, element, attr, ctrl, $sniffer, $browser, $filter</span>) </span>{
            badInputChecker(scope, element, attr, ctrl);
            baseInputType(scope, element, attr, ctrl, $sniffer, $browser);
            <span class="hljs-keyword">var</span> timezone = ctrl &amp;&amp; ctrl.$options &amp;&amp; ctrl.$options.timezone;
            <span class="hljs-keyword">var</span> previousDate;
            ctrl.$$parserName = type;
            ctrl.$parsers.push(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                <span class="hljs-keyword">if</span> (ctrl.$isEmpty(value)) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
                <span class="hljs-keyword">if</span> (regexp.test(value)) {
                    <span class="hljs-keyword">var</span> parsedDate = parseDate(value, previousDate);
                    <span class="hljs-keyword">if</span> (timezone) {
                        parsedDate = convertTimezoneToLocal(parsedDate, timezone);
                    }
                    <span class="hljs-keyword">return</span> parsedDate;
                }
                <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>;
            });
            ctrl.$formatters.push(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                <span class="hljs-keyword">if</span> (value &amp;&amp; !isDate(value)) {
                    <span class="hljs-keyword">throw</span> ngModelMinErr(<span class="hljs-string">'datefmt'</span>, <span class="hljs-string">'Expected `{0}` to be a date'</span>, value);
                }
                <span class="hljs-keyword">if</span> (isValidDate(value)) {
                    previousDate = value;
                    <span class="hljs-keyword">if</span> (previousDate &amp;&amp; timezone) {
                        previousDate = convertTimezoneToLocal(previousDate, timezone, <span class="hljs-literal">true</span>);
                    }
                    <span class="hljs-keyword">return</span> $filter(<span class="hljs-string">'date'</span>)(value, format, timezone);
                } <span class="hljs-keyword">else</span> {
                    previousDate = <span class="hljs-literal">null</span>;
                    <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
                }
            });
            <span class="hljs-keyword">if</span> (isDefined(attr.min) || attr.ngMin) {
                <span class="hljs-keyword">var</span> minVal;
                ctrl.$validators.min = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                    <span class="hljs-keyword">return</span> !isValidDate(value) || isUndefined(minVal) || parseDate(value) &gt;= minVal;
                };
                attr.$observe(<span class="hljs-string">'min'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">val</span>) </span>{
                    minVal = parseObservedDateValue(val);
                    ctrl.$validate();
                });
            }
            <span class="hljs-keyword">if</span> (isDefined(attr.max) || attr.ngMax) {
                <span class="hljs-keyword">var</span> maxVal;
                ctrl.$validators.max = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                    <span class="hljs-keyword">return</span> !isValidDate(value) || isUndefined(maxVal) || parseDate(value) &lt;= maxVal;
                };
                attr.$observe(<span class="hljs-string">'max'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">val</span>) </span>{
                    maxVal = parseObservedDateValue(val);
                    ctrl.$validate();
                });
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isValidDate</span>(<span class="hljs-params">value</span>) </span>{
                <span class="hljs-keyword">return</span> value &amp;&amp; !(value.getTime &amp;&amp; value.getTime() !== value.getTime());
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseObservedDateValue</span>(<span class="hljs-params">val</span>) </span>{
                <span class="hljs-keyword">return</span> isDefined(val) &amp;&amp; !isDate(val) ? parseDate(val) || <span class="hljs-literal">undefined</span> : val;
            }
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">badInputChecker</span>(<span class="hljs-params">scope, element, attr, ctrl</span>) </span>{
        <span class="hljs-keyword">var</span> node = element[<span class="hljs-number">0</span>];
        <span class="hljs-keyword">var</span> nativeValidation = ctrl.$$hasNativeValidators = isObject(node.validity);
        <span class="hljs-keyword">if</span> (nativeValidation) {
            ctrl.$parsers.push(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                <span class="hljs-keyword">var</span> validity = element.prop(VALIDITY_STATE_PROPERTY) || {};
                <span class="hljs-keyword">return</span> validity.badInput || validity.typeMismatch ? <span class="hljs-literal">undefined</span> : value;
            });
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">numberInputType</span>(<span class="hljs-params">scope, element, attr, ctrl, $sniffer, $browser</span>) </span>{
        badInputChecker(scope, element, attr, ctrl);
        baseInputType(scope, element, attr, ctrl, $sniffer, $browser);
        ctrl.$$parserName = <span class="hljs-string">'number'</span>;
        ctrl.$parsers.push(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
            <span class="hljs-keyword">if</span> (ctrl.$isEmpty(value)) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">if</span> (NUMBER_REGEXP.test(value)) <span class="hljs-keyword">return</span> <span class="hljs-built_in">parseFloat</span>(value);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>;
        });
        ctrl.$formatters.push(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
            <span class="hljs-keyword">if</span> (!ctrl.$isEmpty(value)) {
                <span class="hljs-keyword">if</span> (!isNumber(value)) {
                    <span class="hljs-keyword">throw</span> ngModelMinErr(<span class="hljs-string">'numfmt'</span>, <span class="hljs-string">'Expected `{0}` to be a number'</span>, value);
                }
                value = value.toString();
            }
            <span class="hljs-keyword">return</span> value;
        });
        <span class="hljs-keyword">if</span> (isDefined(attr.min) || attr.ngMin) {
            <span class="hljs-keyword">var</span> minVal;
            ctrl.$validators.min = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                <span class="hljs-keyword">return</span> ctrl.$isEmpty(value) || isUndefined(minVal) || value &gt;= minVal;
            };
            attr.$observe(<span class="hljs-string">'min'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">val</span>) </span>{
                <span class="hljs-keyword">if</span> (isDefined(val) &amp;&amp; !isNumber(val)) {
                    val = <span class="hljs-built_in">parseFloat</span>(val);
                }
                minVal = isNumber(val) &amp;&amp; !<span class="hljs-built_in">isNaN</span>(val) ? val : <span class="hljs-literal">undefined</span>;
                ctrl.$validate();
            });
        }
        <span class="hljs-keyword">if</span> (isDefined(attr.max) || attr.ngMax) {
            <span class="hljs-keyword">var</span> maxVal;
            ctrl.$validators.max = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                <span class="hljs-keyword">return</span> ctrl.$isEmpty(value) || isUndefined(maxVal) || value &lt;= maxVal;
            };
            attr.$observe(<span class="hljs-string">'max'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">val</span>) </span>{
                <span class="hljs-keyword">if</span> (isDefined(val) &amp;&amp; !isNumber(val)) {
                    val = <span class="hljs-built_in">parseFloat</span>(val);
                }
                maxVal = isNumber(val) &amp;&amp; !<span class="hljs-built_in">isNaN</span>(val) ? val : <span class="hljs-literal">undefined</span>;
                ctrl.$validate();
            });
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">urlInputType</span>(<span class="hljs-params">scope, element, attr, ctrl, $sniffer, $browser</span>) </span>{
        baseInputType(scope, element, attr, ctrl, $sniffer, $browser);
        stringBasedInputType(ctrl);
        ctrl.$$parserName = <span class="hljs-string">'url'</span>;
        ctrl.$validators.url = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">modelValue, viewValue</span>) </span>{
            <span class="hljs-keyword">var</span> value = modelValue || viewValue;
            <span class="hljs-keyword">return</span> ctrl.$isEmpty(value) || URL_REGEXP.test(value);
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">emailInputType</span>(<span class="hljs-params">scope, element, attr, ctrl, $sniffer, $browser</span>) </span>{
        baseInputType(scope, element, attr, ctrl, $sniffer, $browser);
        stringBasedInputType(ctrl);
        ctrl.$$parserName = <span class="hljs-string">'email'</span>;
        ctrl.$validators.email = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">modelValue, viewValue</span>) </span>{
            <span class="hljs-keyword">var</span> value = modelValue || viewValue;
            <span class="hljs-keyword">return</span> ctrl.$isEmpty(value) || EMAIL_REGEXP.test(value);
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">radioInputType</span>(<span class="hljs-params">scope, element, attr, ctrl</span>) </span>{
        <span class="hljs-keyword">if</span> (isUndefined(attr.name)) {
            element.attr(<span class="hljs-string">'name'</span>, nextUid());
        }
        <span class="hljs-keyword">var</span> listener = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ev</span>) </span>{
            <span class="hljs-keyword">if</span> (element[<span class="hljs-number">0</span>].checked) {
                ctrl.$setViewValue(attr.value, ev &amp;&amp; ev.type);
            }
        };
        element.on(<span class="hljs-string">'click'</span>, listener);
        ctrl.$render = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> value = attr.value;
            element[<span class="hljs-number">0</span>].checked = (value == ctrl.$viewValue);
        };
        attr.$observe(<span class="hljs-string">'value'</span>, ctrl.$render);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseConstantExpr</span>(<span class="hljs-params">$parse, context, name, expression, fallback</span>) </span>{
        <span class="hljs-keyword">var</span> parseFn;
        <span class="hljs-keyword">if</span> (isDefined(expression)) {
            parseFn = $parse(expression);
            <span class="hljs-keyword">if</span> (!parseFn.constant) {
                <span class="hljs-keyword">throw</span> ngModelMinErr(<span class="hljs-string">'constexpr'</span>, <span class="hljs-string">'Expected constant expression for `{0}`, but saw '</span> +
                    <span class="hljs-string">'`{1}`.'</span>, name, expression);
            }
            <span class="hljs-keyword">return</span> parseFn(context);
        }
        <span class="hljs-keyword">return</span> fallback;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkboxInputType</span>(<span class="hljs-params">scope, element, attr, ctrl, $sniffer, $browser, $filter, $parse</span>) </span>{
        <span class="hljs-keyword">var</span> trueValue = parseConstantExpr($parse, scope, <span class="hljs-string">'ngTrueValue'</span>, attr.ngTrueValue, <span class="hljs-literal">true</span>);
        <span class="hljs-keyword">var</span> falseValue = parseConstantExpr($parse, scope, <span class="hljs-string">'ngFalseValue'</span>, attr.ngFalseValue, <span class="hljs-literal">false</span>);
        <span class="hljs-keyword">var</span> listener = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ev</span>) </span>{
            ctrl.$setViewValue(element[<span class="hljs-number">0</span>].checked, ev &amp;&amp; ev.type);
        };
        element.on(<span class="hljs-string">'click'</span>, listener);
        ctrl.$render = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            element[<span class="hljs-number">0</span>].checked = ctrl.$viewValue;
        };
        ctrl.$isEmpty = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
            <span class="hljs-keyword">return</span> value === <span class="hljs-literal">false</span>;
        };
        ctrl.$formatters.push(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
            <span class="hljs-keyword">return</span> equals(value, trueValue);
        });
        ctrl.$parsers.push(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
            <span class="hljs-keyword">return</span> value ? trueValue : falseValue;
        });
    }
    <span class="hljs-keyword">var</span> inputDirective = [<span class="hljs-string">'$browser'</span>, <span class="hljs-string">'$sniffer'</span>, <span class="hljs-string">'$filter'</span>, <span class="hljs-string">'$parse'</span>,
        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$browser, $sniffer, $filter, $parse</span>) </span>{
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">restrict</span>: <span class="hljs-string">'E'</span>,
                <span class="hljs-attr">require</span>: [<span class="hljs-string">'?ngModel'</span>],
                <span class="hljs-attr">link</span>: {
                    <span class="hljs-attr">pre</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, element, attr, ctrls</span>) </span>{
                        <span class="hljs-keyword">if</span> (ctrls[<span class="hljs-number">0</span>]) {
                            (inputType[lowercase(attr.type)] || inputType.text)(scope, element, attr, ctrls[<span class="hljs-number">0</span>], $sniffer,
                                $browser, $filter, $parse);
                        }
                    }
                }
            };
        }
    ];
    <span class="hljs-keyword">var</span> CONSTANT_VALUE_REGEXP = <span class="hljs-regexp">/^(true|false|\d+)$/</span>;
    <span class="hljs-keyword">var</span> ngValueDirective = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">restrict</span>: <span class="hljs-string">'A'</span>,
            <span class="hljs-attr">priority</span>: <span class="hljs-number">100</span>,
            <span class="hljs-attr">compile</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">tpl, tplAttr</span>) </span>{
                <span class="hljs-keyword">if</span> (CONSTANT_VALUE_REGEXP.test(tplAttr.ngValue)) {
                    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngValueConstantLink</span>(<span class="hljs-params">scope, elm, attr</span>) </span>{
                        attr.$set(<span class="hljs-string">'value'</span>, scope.$<span class="hljs-built_in">eval</span>(attr.ngValue));
                    };
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngValueLink</span>(<span class="hljs-params">scope, elm, attr</span>) </span>{
                        scope.$watch(attr.ngValue, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">valueWatchAction</span>(<span class="hljs-params">value</span>) </span>{
                            attr.$set(<span class="hljs-string">'value'</span>, value);
                        });
                    };
                }
            }
        };
    };
    <span class="hljs-keyword">var</span> ngBindDirective = [<span class="hljs-string">'$compile'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$compile</span>) </span>{
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">restrict</span>: <span class="hljs-string">'AC'</span>,
            <span class="hljs-attr">compile</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngBindCompile</span>(<span class="hljs-params">templateElement</span>) </span>{
                $compile.$$addBindingClass(templateElement);
                <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngBindLink</span>(<span class="hljs-params">scope, element, attr</span>) </span>{
                    $compile.$$addBindingInfo(element, attr.ngBind);
                    element = element[<span class="hljs-number">0</span>];
                    scope.$watch(attr.ngBind, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngBindWatchAction</span>(<span class="hljs-params">value</span>) </span>{
                        element.textContent = isUndefined(value) ? <span class="hljs-string">''</span> : value;
                    });
                };
            }
        };
    }];
    <span class="hljs-keyword">var</span> ngBindTemplateDirective = [<span class="hljs-string">'$interpolate'</span>, <span class="hljs-string">'$compile'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$interpolate, $compile</span>) </span>{
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">compile</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngBindTemplateCompile</span>(<span class="hljs-params">templateElement</span>) </span>{
                $compile.$$addBindingClass(templateElement);
                <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngBindTemplateLink</span>(<span class="hljs-params">scope, element, attr</span>) </span>{
                    <span class="hljs-keyword">var</span> interpolateFn = $interpolate(element.attr(attr.$attr.ngBindTemplate));
                    $compile.$$addBindingInfo(element, interpolateFn.expressions);
                    element = element[<span class="hljs-number">0</span>];
                    attr.$observe(<span class="hljs-string">'ngBindTemplate'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                        element.textContent = isUndefined(value) ? <span class="hljs-string">''</span> : value;
                    });
                };
            }
        };
    }];
    <span class="hljs-keyword">var</span> ngBindHtmlDirective = [<span class="hljs-string">'$sce'</span>, <span class="hljs-string">'$parse'</span>, <span class="hljs-string">'$compile'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$sce, $parse, $compile</span>) </span>{
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">restrict</span>: <span class="hljs-string">'A'</span>,
            <span class="hljs-attr">compile</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngBindHtmlCompile</span>(<span class="hljs-params">tElement, tAttrs</span>) </span>{
                <span class="hljs-keyword">var</span> ngBindHtmlGetter = $parse(tAttrs.ngBindHtml);
                <span class="hljs-keyword">var</span> ngBindHtmlWatch = $parse(tAttrs.ngBindHtml, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sceValueOf</span>(<span class="hljs-params">val</span>) </span>{
                    <span class="hljs-keyword">return</span> $sce.valueOf(val);
                });
                $compile.$$addBindingClass(tElement);
                <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngBindHtmlLink</span>(<span class="hljs-params">scope, element, attr</span>) </span>{
                    $compile.$$addBindingInfo(element, attr.ngBindHtml);
                    scope.$watch(ngBindHtmlWatch, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngBindHtmlWatchAction</span>(<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">var</span> value = ngBindHtmlGetter(scope);
                        element.html($sce.getTrustedHtml(value) || <span class="hljs-string">''</span>);
                    });
                };
            }
        };
    }];
    <span class="hljs-keyword">var</span> ngChangeDirective = valueFn({
        <span class="hljs-attr">restrict</span>: <span class="hljs-string">'A'</span>,
        <span class="hljs-attr">require</span>: <span class="hljs-string">'ngModel'</span>,
        <span class="hljs-attr">link</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, element, attr, ctrl</span>) </span>{
            ctrl.$viewChangeListeners.push(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                scope.$<span class="hljs-built_in">eval</span>(attr.ngChange);
            });
        }
    });

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">classDirective</span>(<span class="hljs-params">name, selector</span>) </span>{
        name = <span class="hljs-string">'ngClass'</span> + name;
        <span class="hljs-keyword">return</span> [<span class="hljs-string">'$animate'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$animate</span>) </span>{
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">restrict</span>: <span class="hljs-string">'AC'</span>,
                <span class="hljs-attr">link</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, element, attr</span>) </span>{
                    <span class="hljs-keyword">var</span> oldVal;
                    scope.$watch(attr[name], ngClassWatchAction, <span class="hljs-literal">true</span>);
                    attr.$observe(<span class="hljs-string">'class'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                        ngClassWatchAction(scope.$<span class="hljs-built_in">eval</span>(attr[name]));
                    });
                    <span class="hljs-keyword">if</span> (name !== <span class="hljs-string">'ngClass'</span>) {
                        scope.$watch(<span class="hljs-string">'$index'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$index, old$index</span>) </span>{
                            <span class="hljs-keyword">var</span> mod = $index &amp; <span class="hljs-number">1</span>;
                            <span class="hljs-keyword">if</span> (mod !== (old$index &amp; <span class="hljs-number">1</span>)) {
                                <span class="hljs-keyword">var</span> classes = arrayClasses(scope.$<span class="hljs-built_in">eval</span>(attr[name]));
                                mod === selector ?
                                    addClasses(classes) :
                                    removeClasses(classes);
                            }
                        });
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addClasses</span>(<span class="hljs-params">classes</span>) </span>{
                        <span class="hljs-keyword">var</span> newClasses = digestClassCounts(classes, <span class="hljs-number">1</span>);
                        attr.$addClass(newClasses);
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeClasses</span>(<span class="hljs-params">classes</span>) </span>{
                        <span class="hljs-keyword">var</span> newClasses = digestClassCounts(classes, <span class="hljs-number">-1</span>);
                        attr.$removeClass(newClasses);
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">digestClassCounts</span>(<span class="hljs-params">classes, count</span>) </span>{
                        <span class="hljs-keyword">var</span> classCounts = element.data(<span class="hljs-string">'$classCounts'</span>) || createMap();
                        <span class="hljs-keyword">var</span> classesToUpdate = [];
                        forEach(classes, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">className</span>) </span>{
                            <span class="hljs-keyword">if</span> (count &gt; <span class="hljs-number">0</span> || classCounts[className]) {
                                classCounts[className] = (classCounts[className] || <span class="hljs-number">0</span>) + count;
                                <span class="hljs-keyword">if</span> (classCounts[className] === +(count &gt; <span class="hljs-number">0</span>)) {
                                    classesToUpdate.push(className);
                                }
                            }
                        });
                        element.data(<span class="hljs-string">'$classCounts'</span>, classCounts);
                        <span class="hljs-keyword">return</span> classesToUpdate.join(<span class="hljs-string">' '</span>);
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateClasses</span>(<span class="hljs-params">oldClasses, newClasses</span>) </span>{
                        <span class="hljs-keyword">var</span> toAdd = arrayDifference(newClasses, oldClasses);
                        <span class="hljs-keyword">var</span> toRemove = arrayDifference(oldClasses, newClasses);
                        toAdd = digestClassCounts(toAdd, <span class="hljs-number">1</span>);
                        toRemove = digestClassCounts(toRemove, <span class="hljs-number">-1</span>);
                        <span class="hljs-keyword">if</span> (toAdd &amp;&amp; toAdd.length) {
                            $animate.addClass(element, toAdd);
                        }
                        <span class="hljs-keyword">if</span> (toRemove &amp;&amp; toRemove.length) {
                            $animate.removeClass(element, toRemove);
                        }
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngClassWatchAction</span>(<span class="hljs-params">newVal</span>) </span>{
                        <span class="hljs-keyword">if</span> (selector === <span class="hljs-literal">true</span> || (scope.$index &amp; <span class="hljs-number">1</span>) === selector) {
                            <span class="hljs-keyword">var</span> newClasses = arrayClasses(newVal || []);
                            <span class="hljs-keyword">if</span> (!oldVal) {
                                addClasses(newClasses);
                            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!equals(newVal, oldVal)) {
                                <span class="hljs-keyword">var</span> oldClasses = arrayClasses(oldVal);
                                updateClasses(oldClasses, newClasses);
                            }
                        }
                        <span class="hljs-keyword">if</span> (isArray(newVal)) {
                            oldVal = newVal.map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">v</span>) </span>{
                                <span class="hljs-keyword">return</span> shallowCopy(v);
                            });
                        } <span class="hljs-keyword">else</span> {
                            oldVal = shallowCopy(newVal);
                        }
                    }
                }
            };

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">arrayDifference</span>(<span class="hljs-params">tokens1, tokens2</span>) </span>{
                <span class="hljs-keyword">var</span> values = [];
                outer:
                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; tokens1.length; i++) {
                        <span class="hljs-keyword">var</span> token = tokens1[i];
                        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>; j &lt; tokens2.length; j++) {
                            <span class="hljs-keyword">if</span> (token == tokens2[j]) <span class="hljs-keyword">continue</span> outer;
                        }
                        values.push(token);
                    }
                <span class="hljs-keyword">return</span> values;
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">arrayClasses</span>(<span class="hljs-params">classVal</span>) </span>{
                <span class="hljs-keyword">var</span> classes = [];
                <span class="hljs-keyword">if</span> (isArray(classVal)) {
                    forEach(classVal, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">v</span>) </span>{
                        classes = classes.concat(arrayClasses(v));
                    });
                    <span class="hljs-keyword">return</span> classes;
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isString(classVal)) {
                    <span class="hljs-keyword">return</span> classVal.split(<span class="hljs-string">' '</span>);
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isObject(classVal)) {
                    forEach(classVal, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">v, k</span>) </span>{
                        <span class="hljs-keyword">if</span> (v) {
                            classes = classes.concat(k.split(<span class="hljs-string">' '</span>));
                        }
                    });
                    <span class="hljs-keyword">return</span> classes;
                }
                <span class="hljs-keyword">return</span> classVal;
            }
        }];
    }
    <span class="hljs-keyword">var</span> ngClassDirective = classDirective(<span class="hljs-string">''</span>, <span class="hljs-literal">true</span>);
    <span class="hljs-keyword">var</span> ngClassOddDirective = classDirective(<span class="hljs-string">'Odd'</span>, <span class="hljs-number">0</span>);
    <span class="hljs-keyword">var</span> ngClassEvenDirective = classDirective(<span class="hljs-string">'Even'</span>, <span class="hljs-number">1</span>);
    <span class="hljs-keyword">var</span> ngCloakDirective = ngDirective({
        <span class="hljs-attr">compile</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, attr</span>) </span>{
            attr.$set(<span class="hljs-string">'ngCloak'</span>, <span class="hljs-literal">undefined</span>);
            element.removeClass(<span class="hljs-string">'ng-cloak'</span>);
        }
    });
    <span class="hljs-keyword">var</span> ngControllerDirective = [<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">restrict</span>: <span class="hljs-string">'A'</span>,
            <span class="hljs-attr">scope</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">controller</span>: <span class="hljs-string">'@'</span>,
            <span class="hljs-attr">priority</span>: <span class="hljs-number">500</span>
        };
    }];
    <span class="hljs-keyword">var</span> ngEventDirectives = {};
    <span class="hljs-keyword">var</span> forceAsyncEvents = {
        <span class="hljs-string">'blur'</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-string">'focus'</span>: <span class="hljs-literal">true</span>
    };
    forEach(
        <span class="hljs-string">'click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste'</span>.split(<span class="hljs-string">' '</span>),
        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">eventName</span>) </span>{
            <span class="hljs-keyword">var</span> directiveName = directiveNormalize(<span class="hljs-string">'ng-'</span> + eventName);
            ngEventDirectives[directiveName] = [<span class="hljs-string">'$parse'</span>, <span class="hljs-string">'$rootScope'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$parse, $rootScope</span>) </span>{
                <span class="hljs-keyword">return</span> {
                    <span class="hljs-attr">restrict</span>: <span class="hljs-string">'A'</span>,
                    <span class="hljs-attr">compile</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$element, attr</span>) </span>{
                        <span class="hljs-keyword">var</span> fn = $parse(attr[directiveName], <span class="hljs-literal">null</span>, <span class="hljs-literal">true</span>);
                        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngEventHandler</span>(<span class="hljs-params">scope, element</span>) </span>{
                            element.on(eventName, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
                                <span class="hljs-keyword">var</span> callback = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                                    fn(scope, {
                                        <span class="hljs-attr">$event</span>: event
                                    });
                                };
                                <span class="hljs-keyword">if</span> (forceAsyncEvents[eventName] &amp;&amp; $rootScope.$$phase) {
                                    scope.$evalAsync(callback);
                                } <span class="hljs-keyword">else</span> {
                                    scope.$apply(callback);
                                }
                            });
                        };
                    }
                };
            }];
        }
    );
    <span class="hljs-keyword">var</span> ngIfDirective = [<span class="hljs-string">'$animate'</span>, <span class="hljs-string">'$compile'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$animate, $compile</span>) </span>{
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">multiElement</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">transclude</span>: <span class="hljs-string">'element'</span>,
            <span class="hljs-attr">priority</span>: <span class="hljs-number">600</span>,
            <span class="hljs-attr">terminal</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">restrict</span>: <span class="hljs-string">'A'</span>,
            <span class="hljs-attr">$$tlb</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">link</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$scope, $element, $attr, ctrl, $transclude</span>) </span>{
                <span class="hljs-keyword">var</span> block, childScope, previousElements;
                $scope.$watch($attr.ngIf, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngIfWatchAction</span>(<span class="hljs-params">value</span>) </span>{
                    <span class="hljs-keyword">if</span> (value) {
                        <span class="hljs-keyword">if</span> (!childScope) {
                            $transclude(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">clone, newScope</span>) </span>{
                                childScope = newScope;
                                clone[clone.length++] = $compile.$$createComment(<span class="hljs-string">'end ngIf'</span>, $attr.ngIf);
                                block = {
                                    <span class="hljs-attr">clone</span>: clone
                                };
                                $animate.enter(clone, $element.parent(), $element);
                            });
                        }
                    } <span class="hljs-keyword">else</span> {
                        <span class="hljs-keyword">if</span> (previousElements) {
                            previousElements.remove();
                            previousElements = <span class="hljs-literal">null</span>;
                        }
                        <span class="hljs-keyword">if</span> (childScope) {
                            childScope.$destroy();
                            childScope = <span class="hljs-literal">null</span>;
                        }
                        <span class="hljs-keyword">if</span> (block) {
                            previousElements = getBlockNodes(block.clone);
                            $animate.leave(previousElements).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                                previousElements = <span class="hljs-literal">null</span>;
                            });
                            block = <span class="hljs-literal">null</span>;
                        }
                    }
                });
            }
        };
    }];
    <span class="hljs-keyword">var</span> ngIncludeDirective = [<span class="hljs-string">'$templateRequest'</span>, <span class="hljs-string">'$anchorScroll'</span>, <span class="hljs-string">'$animate'</span>,
        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$templateRequest, $anchorScroll, $animate</span>) </span>{
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">restrict</span>: <span class="hljs-string">'ECA'</span>,
                <span class="hljs-attr">priority</span>: <span class="hljs-number">400</span>,
                <span class="hljs-attr">terminal</span>: <span class="hljs-literal">true</span>,
                <span class="hljs-attr">transclude</span>: <span class="hljs-string">'element'</span>,
                <span class="hljs-attr">controller</span>: angular.noop,
                <span class="hljs-attr">compile</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, attr</span>) </span>{
                    <span class="hljs-keyword">var</span> srcExp = attr.ngInclude || attr.src,
                        onloadExp = attr.onload || <span class="hljs-string">''</span>,
                        autoScrollExp = attr.autoscroll;
                    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, $element, $attr, ctrl, $transclude</span>) </span>{
                        <span class="hljs-keyword">var</span> changeCounter = <span class="hljs-number">0</span>,
                            currentScope,
                            previousElement,
                            currentElement;
                        <span class="hljs-keyword">var</span> cleanupLastIncludeContent = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            <span class="hljs-keyword">if</span> (previousElement) {
                                previousElement.remove();
                                previousElement = <span class="hljs-literal">null</span>;
                            }
                            <span class="hljs-keyword">if</span> (currentScope) {
                                currentScope.$destroy();
                                currentScope = <span class="hljs-literal">null</span>;
                            }
                            <span class="hljs-keyword">if</span> (currentElement) {
                                $animate.leave(currentElement).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                                    previousElement = <span class="hljs-literal">null</span>;
                                });
                                previousElement = currentElement;
                                currentElement = <span class="hljs-literal">null</span>;
                            }
                        };
                        scope.$watch(srcExp, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngIncludeWatchAction</span>(<span class="hljs-params">src</span>) </span>{
                            <span class="hljs-keyword">var</span> afterAnimation = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                                <span class="hljs-keyword">if</span> (isDefined(autoScrollExp) &amp;&amp; (!autoScrollExp || scope.$<span class="hljs-built_in">eval</span>(autoScrollExp))) {
                                    $anchorScroll();
                                }
                            };
                            <span class="hljs-keyword">var</span> thisChangeId = ++changeCounter;
                            <span class="hljs-keyword">if</span> (src) {
                                $templateRequest(src, <span class="hljs-literal">true</span>).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) </span>{
                                    <span class="hljs-keyword">if</span> (scope.$$destroyed) <span class="hljs-keyword">return</span>;
                                    <span class="hljs-keyword">if</span> (thisChangeId !== changeCounter) <span class="hljs-keyword">return</span>;
                                    <span class="hljs-keyword">var</span> newScope = scope.$<span class="hljs-keyword">new</span>();
                                    ctrl.template = response;
                                    <span class="hljs-keyword">var</span> clone = $transclude(newScope, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">clone</span>) </span>{
                                        cleanupLastIncludeContent();
                                        $animate.enter(clone, <span class="hljs-literal">null</span>, $element).then(afterAnimation);
                                    });
                                    currentScope = newScope;
                                    currentElement = clone;
                                    currentScope.$emit(<span class="hljs-string">'$includeContentLoaded'</span>, src);
                                    scope.$<span class="hljs-built_in">eval</span>(onloadExp);
                                }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                                    <span class="hljs-keyword">if</span> (scope.$$destroyed) <span class="hljs-keyword">return</span>;
                                    <span class="hljs-keyword">if</span> (thisChangeId === changeCounter) {
                                        cleanupLastIncludeContent();
                                        scope.$emit(<span class="hljs-string">'$includeContentError'</span>, src);
                                    }
                                });
                                scope.$emit(<span class="hljs-string">'$includeContentRequested'</span>, src);
                            } <span class="hljs-keyword">else</span> {
                                cleanupLastIncludeContent();
                                ctrl.template = <span class="hljs-literal">null</span>;
                            }
                        });
                    };
                }
            };
        }
    ];
    <span class="hljs-keyword">var</span> ngIncludeFillContentDirective = [<span class="hljs-string">'$compile'</span>,
        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$compile</span>) </span>{
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">restrict</span>: <span class="hljs-string">'ECA'</span>,
                <span class="hljs-attr">priority</span>: <span class="hljs-number">-400</span>,
                <span class="hljs-attr">require</span>: <span class="hljs-string">'ngInclude'</span>,
                <span class="hljs-attr">link</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, $element, $attr, ctrl</span>) </span>{
                    <span class="hljs-keyword">if</span> (toString.call($element[<span class="hljs-number">0</span>]).match(<span class="hljs-regexp">/SVG/</span>)) {
                        $element.empty();
                        $compile(jqLiteBuildFragment(ctrl.template, <span class="hljs-built_in">window</span>.document).childNodes)(scope,
                            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">namespaceAdaptedClone</span>(<span class="hljs-params">clone</span>) </span>{
                                $element.append(clone);
                            }, {
                                <span class="hljs-attr">futureParentElement</span>: $element
                            });
                        <span class="hljs-keyword">return</span>;
                    }
                    $element.html(ctrl.template);
                    $compile($element.contents())(scope);
                }
            };
        }
    ];
    <span class="hljs-keyword">var</span> ngInitDirective = ngDirective({
        <span class="hljs-attr">priority</span>: <span class="hljs-number">450</span>,
        <span class="hljs-attr">compile</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">pre</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, element, attrs</span>) </span>{
                    scope.$<span class="hljs-built_in">eval</span>(attrs.ngInit);
                }
            };
        }
    });
    <span class="hljs-keyword">var</span> ngListDirective = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">restrict</span>: <span class="hljs-string">'A'</span>,
            <span class="hljs-attr">priority</span>: <span class="hljs-number">100</span>,
            <span class="hljs-attr">require</span>: <span class="hljs-string">'ngModel'</span>,
            <span class="hljs-attr">link</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, element, attr, ctrl</span>) </span>{
                <span class="hljs-keyword">var</span> ngList = element.attr(attr.$attr.ngList) || <span class="hljs-string">', '</span>;
                <span class="hljs-keyword">var</span> trimValues = attr.ngTrim !== <span class="hljs-string">'false'</span>;
                <span class="hljs-keyword">var</span> separator = trimValues ? trim(ngList) : ngList;
                <span class="hljs-keyword">var</span> parse = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">viewValue</span>) </span>{
                    <span class="hljs-keyword">if</span> (isUndefined(viewValue)) <span class="hljs-keyword">return</span>;
                    <span class="hljs-keyword">var</span> list = [];
                    <span class="hljs-keyword">if</span> (viewValue) {
                        forEach(viewValue.split(separator), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                            <span class="hljs-keyword">if</span> (value) list.push(trimValues ? trim(value) : value);
                        });
                    }
                    <span class="hljs-keyword">return</span> list;
                };
                ctrl.$parsers.push(parse);
                ctrl.$formatters.push(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                    <span class="hljs-keyword">if</span> (isArray(value)) {
                        <span class="hljs-keyword">return</span> value.join(ngList);
                    }
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>;
                });
                ctrl.$isEmpty = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                    <span class="hljs-keyword">return</span> !value || !value.length;
                };
            }
        };
    };
    <span class="hljs-keyword">var</span> VALID_CLASS = <span class="hljs-string">'ng-valid'</span>,
        INVALID_CLASS = <span class="hljs-string">'ng-invalid'</span>,
        PRISTINE_CLASS = <span class="hljs-string">'ng-pristine'</span>,
        DIRTY_CLASS = <span class="hljs-string">'ng-dirty'</span>,
        UNTOUCHED_CLASS = <span class="hljs-string">'ng-untouched'</span>,
        TOUCHED_CLASS = <span class="hljs-string">'ng-touched'</span>,
        PENDING_CLASS = <span class="hljs-string">'ng-pending'</span>,
        EMPTY_CLASS = <span class="hljs-string">'ng-empty'</span>,
        NOT_EMPTY_CLASS = <span class="hljs-string">'ng-not-empty'</span>;
    <span class="hljs-keyword">var</span> ngModelMinErr = minErr(<span class="hljs-string">'ngModel'</span>);
    <span class="hljs-keyword">var</span> NgModelController = [<span class="hljs-string">'$scope'</span>, <span class="hljs-string">'$exceptionHandler'</span>, <span class="hljs-string">'$attrs'</span>, <span class="hljs-string">'$element'</span>, <span class="hljs-string">'$parse'</span>, <span class="hljs-string">'$animate'</span>, <span class="hljs-string">'$timeout'</span>, <span class="hljs-string">'$rootScope'</span>, <span class="hljs-string">'$q'</span>, <span class="hljs-string">'$interpolate'</span>,
        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$scope, $exceptionHandler, $attr, $element, $parse, $animate, $timeout, $rootScope, $q, $interpolate</span>) </span>{
            <span class="hljs-keyword">this</span>.$viewValue = <span class="hljs-built_in">Number</span>.NaN;
            <span class="hljs-keyword">this</span>.$modelValue = <span class="hljs-built_in">Number</span>.NaN;
            <span class="hljs-keyword">this</span>.$$rawModelValue = <span class="hljs-literal">undefined</span>;
            <span class="hljs-keyword">this</span>.$validators = {};
            <span class="hljs-keyword">this</span>.$asyncValidators = {};
            <span class="hljs-keyword">this</span>.$parsers = [];
            <span class="hljs-keyword">this</span>.$formatters = [];
            <span class="hljs-keyword">this</span>.$viewChangeListeners = [];
            <span class="hljs-keyword">this</span>.$untouched = <span class="hljs-literal">true</span>;
            <span class="hljs-keyword">this</span>.$touched = <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">this</span>.$pristine = <span class="hljs-literal">true</span>;
            <span class="hljs-keyword">this</span>.$dirty = <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">this</span>.$valid = <span class="hljs-literal">true</span>;
            <span class="hljs-keyword">this</span>.$invalid = <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">this</span>.$error = {};
            <span class="hljs-keyword">this</span>.$$success = {};
            <span class="hljs-keyword">this</span>.$pending = <span class="hljs-literal">undefined</span>;
            <span class="hljs-keyword">this</span>.$name = $interpolate($attr.name || <span class="hljs-string">''</span>, <span class="hljs-literal">false</span>)($scope);
            <span class="hljs-keyword">this</span>.$$parentForm = nullFormCtrl;
            <span class="hljs-keyword">var</span> parsedNgModel = $parse($attr.ngModel),
                parsedNgModelAssign = parsedNgModel.assign,
                ngModelGet = parsedNgModel,
                ngModelSet = parsedNgModelAssign,
                pendingDebounce = <span class="hljs-literal">null</span>,
                parserValid,
                ctrl = <span class="hljs-keyword">this</span>;
            <span class="hljs-keyword">this</span>.$$setOptions = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">options</span>) </span>{
                ctrl.$options = options;
                <span class="hljs-keyword">if</span> (options &amp;&amp; options.getterSetter) {
                    <span class="hljs-keyword">var</span> invokeModelGetter = $parse($attr.ngModel + <span class="hljs-string">'()'</span>),
                        invokeModelSetter = $parse($attr.ngModel + <span class="hljs-string">'($$$p)'</span>);
                    ngModelGet = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$scope</span>) </span>{
                        <span class="hljs-keyword">var</span> modelValue = parsedNgModel($scope);
                        <span class="hljs-keyword">if</span> (isFunction(modelValue)) {
                            modelValue = invokeModelGetter($scope);
                        }
                        <span class="hljs-keyword">return</span> modelValue;
                    };
                    ngModelSet = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$scope, newValue</span>) </span>{
                        <span class="hljs-keyword">if</span> (isFunction(parsedNgModel($scope))) {
                            invokeModelSetter($scope, {
                                <span class="hljs-attr">$$$p</span>: newValue
                            });
                        } <span class="hljs-keyword">else</span> {
                            parsedNgModelAssign($scope, newValue);
                        }
                    };
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!parsedNgModel.assign) {
                    <span class="hljs-keyword">throw</span> ngModelMinErr(<span class="hljs-string">'nonassign'</span>, <span class="hljs-string">"Expression '{0}' is non-assignable. Element: {1}"</span>,
                        $attr.ngModel, startingTag($element));
                }
            };
            <span class="hljs-keyword">this</span>.$render = noop;
            <span class="hljs-keyword">this</span>.$isEmpty = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                <span class="hljs-keyword">return</span> isUndefined(value) || value === <span class="hljs-string">''</span> || value === <span class="hljs-literal">null</span> || value !== value;
            };
            <span class="hljs-keyword">this</span>.$$updateEmptyClasses = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                <span class="hljs-keyword">if</span> (ctrl.$isEmpty(value)) {
                    $animate.removeClass($element, NOT_EMPTY_CLASS);
                    $animate.addClass($element, EMPTY_CLASS);
                } <span class="hljs-keyword">else</span> {
                    $animate.removeClass($element, EMPTY_CLASS);
                    $animate.addClass($element, NOT_EMPTY_CLASS);
                }
            };
            <span class="hljs-keyword">var</span> currentValidationRunId = <span class="hljs-number">0</span>;
            addSetValidityMethod({
                <span class="hljs-attr">ctrl</span>: <span class="hljs-keyword">this</span>,
                <span class="hljs-attr">$element</span>: $element,
                <span class="hljs-attr">set</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">object, property</span>) </span>{
                    object[property] = <span class="hljs-literal">true</span>;
                },
                <span class="hljs-attr">unset</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">object, property</span>) </span>{
                    <span class="hljs-keyword">delete</span> object[property];
                },
                <span class="hljs-attr">$animate</span>: $animate
            });
            <span class="hljs-keyword">this</span>.$setPristine = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                ctrl.$dirty = <span class="hljs-literal">false</span>;
                ctrl.$pristine = <span class="hljs-literal">true</span>;
                $animate.removeClass($element, DIRTY_CLASS);
                $animate.addClass($element, PRISTINE_CLASS);
            };
            <span class="hljs-keyword">this</span>.$setDirty = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                ctrl.$dirty = <span class="hljs-literal">true</span>;
                ctrl.$pristine = <span class="hljs-literal">false</span>;
                $animate.removeClass($element, PRISTINE_CLASS);
                $animate.addClass($element, DIRTY_CLASS);
                ctrl.$$parentForm.$setDirty();
            };
            <span class="hljs-keyword">this</span>.$setUntouched = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                ctrl.$touched = <span class="hljs-literal">false</span>;
                ctrl.$untouched = <span class="hljs-literal">true</span>;
                $animate.setClass($element, UNTOUCHED_CLASS, TOUCHED_CLASS);
            };
            <span class="hljs-keyword">this</span>.$setTouched = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                ctrl.$touched = <span class="hljs-literal">true</span>;
                ctrl.$untouched = <span class="hljs-literal">false</span>;
                $animate.setClass($element, TOUCHED_CLASS, UNTOUCHED_CLASS);
            };
            <span class="hljs-keyword">this</span>.$rollbackViewValue = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                $timeout.cancel(pendingDebounce);
                ctrl.$viewValue = ctrl.$$lastCommittedViewValue;
                ctrl.$render();
            };
            <span class="hljs-keyword">this</span>.$validate = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">if</span> (isNumber(ctrl.$modelValue) &amp;&amp; <span class="hljs-built_in">isNaN</span>(ctrl.$modelValue)) {
                    <span class="hljs-keyword">return</span>;
                }
                <span class="hljs-keyword">var</span> viewValue = ctrl.$$lastCommittedViewValue;
                <span class="hljs-keyword">var</span> modelValue = ctrl.$$rawModelValue;
                <span class="hljs-keyword">var</span> prevValid = ctrl.$valid;
                <span class="hljs-keyword">var</span> prevModelValue = ctrl.$modelValue;
                <span class="hljs-keyword">var</span> allowInvalid = ctrl.$options &amp;&amp; ctrl.$options.allowInvalid;
                ctrl.$$runValidators(modelValue, viewValue, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">allValid</span>) </span>{
                    <span class="hljs-keyword">if</span> (!allowInvalid &amp;&amp; prevValid !== allValid) {
                        ctrl.$modelValue = allValid ? modelValue : <span class="hljs-literal">undefined</span>;
                        <span class="hljs-keyword">if</span> (ctrl.$modelValue !== prevModelValue) {
                            ctrl.$$writeModelToScope();
                        }
                    }
                });
            };
            <span class="hljs-keyword">this</span>.$$runValidators = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">modelValue, viewValue, doneCallback</span>) </span>{
                currentValidationRunId++;
                <span class="hljs-keyword">var</span> localValidationRunId = currentValidationRunId;
                <span class="hljs-keyword">if</span> (!processParseErrors()) {
                    validationDone(<span class="hljs-literal">false</span>);
                    <span class="hljs-keyword">return</span>;
                }
                <span class="hljs-keyword">if</span> (!processSyncValidators()) {
                    validationDone(<span class="hljs-literal">false</span>);
                    <span class="hljs-keyword">return</span>;
                }
                processAsyncValidators();

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processParseErrors</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">var</span> errorKey = ctrl.$$parserName || <span class="hljs-string">'parse'</span>;
                    <span class="hljs-keyword">if</span> (isUndefined(parserValid)) {
                        setValidity(errorKey, <span class="hljs-literal">null</span>);
                    } <span class="hljs-keyword">else</span> {
                        <span class="hljs-keyword">if</span> (!parserValid) {
                            forEach(ctrl.$validators, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">v, name</span>) </span>{
                                setValidity(name, <span class="hljs-literal">null</span>);
                            });
                            forEach(ctrl.$asyncValidators, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">v, name</span>) </span>{
                                setValidity(name, <span class="hljs-literal">null</span>);
                            });
                        }
                        setValidity(errorKey, parserValid);
                        <span class="hljs-keyword">return</span> parserValid;
                    }
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processSyncValidators</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">var</span> syncValidatorsValid = <span class="hljs-literal">true</span>;
                    forEach(ctrl.$validators, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">validator, name</span>) </span>{
                        <span class="hljs-keyword">var</span> result = validator(modelValue, viewValue);
                        syncValidatorsValid = syncValidatorsValid &amp;&amp; result;
                        setValidity(name, result);
                    });
                    <span class="hljs-keyword">if</span> (!syncValidatorsValid) {
                        forEach(ctrl.$asyncValidators, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">v, name</span>) </span>{
                            setValidity(name, <span class="hljs-literal">null</span>);
                        });
                        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                    }
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processAsyncValidators</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">var</span> validatorPromises = [];
                    <span class="hljs-keyword">var</span> allValid = <span class="hljs-literal">true</span>;
                    forEach(ctrl.$asyncValidators, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">validator, name</span>) </span>{
                        <span class="hljs-keyword">var</span> promise = validator(modelValue, viewValue);
                        <span class="hljs-keyword">if</span> (!isPromiseLike(promise)) {
                            <span class="hljs-keyword">throw</span> ngModelMinErr(<span class="hljs-string">'nopromise'</span>,
                                <span class="hljs-string">"Expected asynchronous validator to return a promise but got '{0}' instead."</span>, promise);
                        }
                        setValidity(name, <span class="hljs-literal">undefined</span>);
                        validatorPromises.push(promise.then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            setValidity(name, <span class="hljs-literal">true</span>);
                        }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            allValid = <span class="hljs-literal">false</span>;
                            setValidity(name, <span class="hljs-literal">false</span>);
                        }));
                    });
                    <span class="hljs-keyword">if</span> (!validatorPromises.length) {
                        validationDone(<span class="hljs-literal">true</span>);
                    } <span class="hljs-keyword">else</span> {
                        $q.all(validatorPromises).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            validationDone(allValid);
                        }, noop);
                    }
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setValidity</span>(<span class="hljs-params">name, isValid</span>) </span>{
                    <span class="hljs-keyword">if</span> (localValidationRunId === currentValidationRunId) {
                        ctrl.$setValidity(name, isValid);
                    }
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validationDone</span>(<span class="hljs-params">allValid</span>) </span>{
                    <span class="hljs-keyword">if</span> (localValidationRunId === currentValidationRunId) {
                        doneCallback(allValid);
                    }
                }
            };
            <span class="hljs-keyword">this</span>.$commitViewValue = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">var</span> viewValue = ctrl.$viewValue;
                $timeout.cancel(pendingDebounce);
                <span class="hljs-keyword">if</span> (ctrl.$$lastCommittedViewValue === viewValue &amp;&amp; (viewValue !== <span class="hljs-string">''</span> || !ctrl.$$hasNativeValidators)) {
                    <span class="hljs-keyword">return</span>;
                }
                ctrl.$$updateEmptyClasses(viewValue);
                ctrl.$$lastCommittedViewValue = viewValue;
                <span class="hljs-keyword">if</span> (ctrl.$pristine) {
                    <span class="hljs-keyword">this</span>.$setDirty();
                }
                <span class="hljs-keyword">this</span>.$$parseAndValidate();
            };
            <span class="hljs-keyword">this</span>.$$parseAndValidate = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">var</span> viewValue = ctrl.$$lastCommittedViewValue;
                <span class="hljs-keyword">var</span> modelValue = viewValue;
                parserValid = isUndefined(modelValue) ? <span class="hljs-literal">undefined</span> : <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">if</span> (parserValid) {
                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; ctrl.$parsers.length; i++) {
                        modelValue = ctrl.$parsers[i](modelValue);
                        <span class="hljs-keyword">if</span> (isUndefined(modelValue)) {
                            parserValid = <span class="hljs-literal">false</span>;
                            <span class="hljs-keyword">break</span>;
                        }
                    }
                }
                <span class="hljs-keyword">if</span> (isNumber(ctrl.$modelValue) &amp;&amp; <span class="hljs-built_in">isNaN</span>(ctrl.$modelValue)) {
                    ctrl.$modelValue = ngModelGet($scope);
                }
                <span class="hljs-keyword">var</span> prevModelValue = ctrl.$modelValue;
                <span class="hljs-keyword">var</span> allowInvalid = ctrl.$options &amp;&amp; ctrl.$options.allowInvalid;
                ctrl.$$rawModelValue = modelValue;
                <span class="hljs-keyword">if</span> (allowInvalid) {
                    ctrl.$modelValue = modelValue;
                    writeToModelIfNeeded();
                }
                ctrl.$$runValidators(modelValue, ctrl.$$lastCommittedViewValue, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">allValid</span>) </span>{
                    <span class="hljs-keyword">if</span> (!allowInvalid) {
                        ctrl.$modelValue = allValid ? modelValue : <span class="hljs-literal">undefined</span>;
                        writeToModelIfNeeded();
                    }
                });

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">writeToModelIfNeeded</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">if</span> (ctrl.$modelValue !== prevModelValue) {
                        ctrl.$$writeModelToScope();
                    }
                }
            };
            <span class="hljs-keyword">this</span>.$$writeModelToScope = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                ngModelSet($scope, ctrl.$modelValue);
                forEach(ctrl.$viewChangeListeners, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">listener</span>) </span>{
                    <span class="hljs-keyword">try</span> {
                        listener();
                    } <span class="hljs-keyword">catch</span> (e) {
                        $exceptionHandler(e);
                    }
                });
            };
            <span class="hljs-keyword">this</span>.$setViewValue = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, trigger</span>) </span>{
                ctrl.$viewValue = value;
                <span class="hljs-keyword">if</span> (!ctrl.$options || ctrl.$options.updateOnDefault) {
                    ctrl.$$debounceViewValueCommit(trigger);
                }
            };
            <span class="hljs-keyword">this</span>.$$debounceViewValueCommit = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">trigger</span>) </span>{
                <span class="hljs-keyword">var</span> debounceDelay = <span class="hljs-number">0</span>,
                    options = ctrl.$options,
                    debounce;
                <span class="hljs-keyword">if</span> (options &amp;&amp; isDefined(options.debounce)) {
                    debounce = options.debounce;
                    <span class="hljs-keyword">if</span> (isNumber(debounce)) {
                        debounceDelay = debounce;
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isNumber(debounce[trigger])) {
                        debounceDelay = debounce[trigger];
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isNumber(debounce[<span class="hljs-string">'default'</span>])) {
                        debounceDelay = debounce[<span class="hljs-string">'default'</span>];
                    }
                }
                $timeout.cancel(pendingDebounce);
                <span class="hljs-keyword">if</span> (debounceDelay) {
                    pendingDebounce = $timeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        ctrl.$commitViewValue();
                    }, debounceDelay);
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ($rootScope.$$phase) {
                    ctrl.$commitViewValue();
                } <span class="hljs-keyword">else</span> {
                    $scope.$apply(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        ctrl.$commitViewValue();
                    });
                }
            };
            $scope.$watch(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngModelWatch</span>(<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">var</span> modelValue = ngModelGet($scope);
                <span class="hljs-keyword">if</span> (modelValue !== ctrl.$modelValue &amp;&amp;
                    (ctrl.$modelValue === ctrl.$modelValue || modelValue === modelValue)
                ) {
                    ctrl.$modelValue = ctrl.$$rawModelValue = modelValue;
                    parserValid = <span class="hljs-literal">undefined</span>;
                    <span class="hljs-keyword">var</span> formatters = ctrl.$formatters,
                        idx = formatters.length;
                    <span class="hljs-keyword">var</span> viewValue = modelValue;
                    <span class="hljs-keyword">while</span> (idx--) {
                        viewValue = formatters[idx](viewValue);
                    }
                    <span class="hljs-keyword">if</span> (ctrl.$viewValue !== viewValue) {
                        ctrl.$$updateEmptyClasses(viewValue);
                        ctrl.$viewValue = ctrl.$$lastCommittedViewValue = viewValue;
                        ctrl.$render();
                        ctrl.$$runValidators(modelValue, viewValue, noop);
                    }
                }
                <span class="hljs-keyword">return</span> modelValue;
            });
        }
    ];
    <span class="hljs-keyword">var</span> ngModelDirective = [<span class="hljs-string">'$rootScope'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$rootScope</span>) </span>{
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">restrict</span>: <span class="hljs-string">'A'</span>,
            <span class="hljs-attr">require</span>: [<span class="hljs-string">'ngModel'</span>, <span class="hljs-string">'^?form'</span>, <span class="hljs-string">'^?ngModelOptions'</span>],
            <span class="hljs-attr">controller</span>: NgModelController,
            <span class="hljs-attr">priority</span>: <span class="hljs-number">1</span>,
            <span class="hljs-attr">compile</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngModelCompile</span>(<span class="hljs-params">element</span>) </span>{
                element.addClass(PRISTINE_CLASS).addClass(UNTOUCHED_CLASS).addClass(VALID_CLASS);
                <span class="hljs-keyword">return</span> {
                    <span class="hljs-attr">pre</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngModelPreLink</span>(<span class="hljs-params">scope, element, attr, ctrls</span>) </span>{
                        <span class="hljs-keyword">var</span> modelCtrl = ctrls[<span class="hljs-number">0</span>],
                            formCtrl = ctrls[<span class="hljs-number">1</span>] || modelCtrl.$$parentForm;
                        modelCtrl.$$setOptions(ctrls[<span class="hljs-number">2</span>] &amp;&amp; ctrls[<span class="hljs-number">2</span>].$options);
                        formCtrl.$addControl(modelCtrl);
                        attr.$observe(<span class="hljs-string">'name'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">newValue</span>) </span>{
                            <span class="hljs-keyword">if</span> (modelCtrl.$name !== newValue) {
                                modelCtrl.$$parentForm.$$renameControl(modelCtrl, newValue);
                            }
                        });
                        scope.$on(<span class="hljs-string">'$destroy'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            modelCtrl.$$parentForm.$removeControl(modelCtrl);
                        });
                    },
                    <span class="hljs-attr">post</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngModelPostLink</span>(<span class="hljs-params">scope, element, attr, ctrls</span>) </span>{
                        <span class="hljs-keyword">var</span> modelCtrl = ctrls[<span class="hljs-number">0</span>];
                        <span class="hljs-keyword">if</span> (modelCtrl.$options &amp;&amp; modelCtrl.$options.updateOn) {
                            element.on(modelCtrl.$options.updateOn, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ev</span>) </span>{
                                modelCtrl.$$debounceViewValueCommit(ev &amp;&amp; ev.type);
                            });
                        }
                        element.on(<span class="hljs-string">'blur'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            <span class="hljs-keyword">if</span> (modelCtrl.$touched) <span class="hljs-keyword">return</span>;
                            <span class="hljs-keyword">if</span> ($rootScope.$$phase) {
                                scope.$evalAsync(modelCtrl.$setTouched);
                            } <span class="hljs-keyword">else</span> {
                                scope.$apply(modelCtrl.$setTouched);
                            }
                        });
                    }
                };
            }
        };
    }];
    <span class="hljs-keyword">var</span> DEFAULT_REGEXP = <span class="hljs-regexp">/(\s+|^)default(\s+|$)/</span>;
    <span class="hljs-keyword">var</span> ngModelOptionsDirective = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">restrict</span>: <span class="hljs-string">'A'</span>,
            <span class="hljs-attr">controller</span>: [<span class="hljs-string">'$scope'</span>, <span class="hljs-string">'$attrs'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$scope, $attrs</span>) </span>{
                <span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>;
                <span class="hljs-keyword">this</span>.$options = copy($scope.$<span class="hljs-built_in">eval</span>($attrs.ngModelOptions));
                <span class="hljs-keyword">if</span> (isDefined(<span class="hljs-keyword">this</span>.$options.updateOn)) {
                    <span class="hljs-keyword">this</span>.$options.updateOnDefault = <span class="hljs-literal">false</span>;
                    <span class="hljs-keyword">this</span>.$options.updateOn = trim(<span class="hljs-keyword">this</span>.$options.updateOn.replace(DEFAULT_REGEXP, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        that.$options.updateOnDefault = <span class="hljs-literal">true</span>;
                        <span class="hljs-keyword">return</span> <span class="hljs-string">' '</span>;
                    }));
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">this</span>.$options.updateOnDefault = <span class="hljs-literal">true</span>;
                }
            }]
        };
    };

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addSetValidityMethod</span>(<span class="hljs-params">context</span>) </span>{
        <span class="hljs-keyword">var</span> ctrl = context.ctrl,
            $element = context.$element,
            classCache = {},
            set = context.set,
            unset = context.unset,
            $animate = context.$animate;
        classCache[INVALID_CLASS] = !(classCache[VALID_CLASS] = $element.hasClass(VALID_CLASS));
        ctrl.$setValidity = setValidity;

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setValidity</span>(<span class="hljs-params">validationErrorKey, state, controller</span>) </span>{
            <span class="hljs-keyword">if</span> (isUndefined(state)) {
                createAndSet(<span class="hljs-string">'$pending'</span>, validationErrorKey, controller);
            } <span class="hljs-keyword">else</span> {
                unsetAndCleanup(<span class="hljs-string">'$pending'</span>, validationErrorKey, controller);
            }
            <span class="hljs-keyword">if</span> (!isBoolean(state)) {
                unset(ctrl.$error, validationErrorKey, controller);
                unset(ctrl.$$success, validationErrorKey, controller);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">if</span> (state) {
                    unset(ctrl.$error, validationErrorKey, controller);
                    set(ctrl.$$success, validationErrorKey, controller);
                } <span class="hljs-keyword">else</span> {
                    set(ctrl.$error, validationErrorKey, controller);
                    unset(ctrl.$$success, validationErrorKey, controller);
                }
            }
            <span class="hljs-keyword">if</span> (ctrl.$pending) {
                cachedToggleClass(PENDING_CLASS, <span class="hljs-literal">true</span>);
                ctrl.$valid = ctrl.$invalid = <span class="hljs-literal">undefined</span>;
                toggleValidationCss(<span class="hljs-string">''</span>, <span class="hljs-literal">null</span>);
            } <span class="hljs-keyword">else</span> {
                cachedToggleClass(PENDING_CLASS, <span class="hljs-literal">false</span>);
                ctrl.$valid = isObjectEmpty(ctrl.$error);
                ctrl.$invalid = !ctrl.$valid;
                toggleValidationCss(<span class="hljs-string">''</span>, ctrl.$valid);
            }
            <span class="hljs-keyword">var</span> combinedState;
            <span class="hljs-keyword">if</span> (ctrl.$pending &amp;&amp; ctrl.$pending[validationErrorKey]) {
                combinedState = <span class="hljs-literal">undefined</span>;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ctrl.$error[validationErrorKey]) {
                combinedState = <span class="hljs-literal">false</span>;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ctrl.$$success[validationErrorKey]) {
                combinedState = <span class="hljs-literal">true</span>;
            } <span class="hljs-keyword">else</span> {
                combinedState = <span class="hljs-literal">null</span>;
            }
            toggleValidationCss(validationErrorKey, combinedState);
            ctrl.$$parentForm.$setValidity(validationErrorKey, combinedState, ctrl);
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createAndSet</span>(<span class="hljs-params">name, value, controller</span>) </span>{
            <span class="hljs-keyword">if</span> (!ctrl[name]) {
                ctrl[name] = {};
            }
            set(ctrl[name], value, controller);
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unsetAndCleanup</span>(<span class="hljs-params">name, value, controller</span>) </span>{
            <span class="hljs-keyword">if</span> (ctrl[name]) {
                unset(ctrl[name], value, controller);
            }
            <span class="hljs-keyword">if</span> (isObjectEmpty(ctrl[name])) {
                ctrl[name] = <span class="hljs-literal">undefined</span>;
            }
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cachedToggleClass</span>(<span class="hljs-params">className, switchValue</span>) </span>{
            <span class="hljs-keyword">if</span> (switchValue &amp;&amp; !classCache[className]) {
                $animate.addClass($element, className);
                classCache[className] = <span class="hljs-literal">true</span>;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!switchValue &amp;&amp; classCache[className]) {
                $animate.removeClass($element, className);
                classCache[className] = <span class="hljs-literal">false</span>;
            }
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toggleValidationCss</span>(<span class="hljs-params">validationErrorKey, isValid</span>) </span>{
            validationErrorKey = validationErrorKey ? <span class="hljs-string">'-'</span> + snake_case(validationErrorKey, <span class="hljs-string">'-'</span>) : <span class="hljs-string">''</span>;
            cachedToggleClass(VALID_CLASS + validationErrorKey, isValid === <span class="hljs-literal">true</span>);
            cachedToggleClass(INVALID_CLASS + validationErrorKey, isValid === <span class="hljs-literal">false</span>);
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isObjectEmpty</span>(<span class="hljs-params">obj</span>) </span>{
        <span class="hljs-keyword">if</span> (obj) {
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> prop <span class="hljs-keyword">in</span> obj) {
                <span class="hljs-keyword">if</span> (obj.hasOwnProperty(prop)) {
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                }
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    <span class="hljs-keyword">var</span> ngNonBindableDirective = ngDirective({
        <span class="hljs-attr">terminal</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">priority</span>: <span class="hljs-number">1000</span>
    });
    <span class="hljs-keyword">var</span> ngOptionsMinErr = minErr(<span class="hljs-string">'ngOptions'</span>);
    <span class="hljs-keyword">var</span> NG_OPTIONS_REGEXP = <span class="hljs-regexp">/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/</span>;
    <span class="hljs-keyword">var</span> ngOptionsDirective = [<span class="hljs-string">'$compile'</span>, <span class="hljs-string">'$document'</span>, <span class="hljs-string">'$parse'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$compile, $document, $parse</span>) </span>{
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseOptionsExpression</span>(<span class="hljs-params">optionsExp, selectElement, scope</span>) </span>{
            <span class="hljs-keyword">var</span> match = optionsExp.match(NG_OPTIONS_REGEXP);
            <span class="hljs-keyword">if</span> (!(match)) {
                <span class="hljs-keyword">throw</span> ngOptionsMinErr(<span class="hljs-string">'iexp'</span>,
                    <span class="hljs-string">"Expected expression in form of "</span> +
                    <span class="hljs-string">"'_select_ (as _label_)? for (_key_,)?_value_ in _collection_'"</span> +
                    <span class="hljs-string">" but got '{0}'. Element: {1}"</span>,
                    optionsExp, startingTag(selectElement));
            }
            <span class="hljs-keyword">var</span> valueName = match[<span class="hljs-number">5</span>] || match[<span class="hljs-number">7</span>];
            <span class="hljs-keyword">var</span> keyName = match[<span class="hljs-number">6</span>];
            <span class="hljs-keyword">var</span> selectAs = <span class="hljs-regexp">/ as /</span>.test(match[<span class="hljs-number">0</span>]) &amp;&amp; match[<span class="hljs-number">1</span>];
            <span class="hljs-keyword">var</span> trackBy = match[<span class="hljs-number">9</span>];
            <span class="hljs-keyword">var</span> valueFn = $parse(match[<span class="hljs-number">2</span>] ? match[<span class="hljs-number">1</span>] : valueName);
            <span class="hljs-keyword">var</span> selectAsFn = selectAs &amp;&amp; $parse(selectAs);
            <span class="hljs-keyword">var</span> viewValueFn = selectAsFn || valueFn;
            <span class="hljs-keyword">var</span> trackByFn = trackBy &amp;&amp; $parse(trackBy);
            <span class="hljs-keyword">var</span> getTrackByValueFn = trackBy ?
                <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, locals</span>) </span>{
                    <span class="hljs-keyword">return</span> trackByFn(scope, locals);
                } :
                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getHashOfValue</span>(<span class="hljs-params">value</span>) </span>{
                    <span class="hljs-keyword">return</span> hashKey(value);
                };
            <span class="hljs-keyword">var</span> getTrackByValue = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, key</span>) </span>{
                <span class="hljs-keyword">return</span> getTrackByValueFn(value, getLocals(value, key));
            };
            <span class="hljs-keyword">var</span> displayFn = $parse(match[<span class="hljs-number">2</span>] || match[<span class="hljs-number">1</span>]);
            <span class="hljs-keyword">var</span> groupByFn = $parse(match[<span class="hljs-number">3</span>] || <span class="hljs-string">''</span>);
            <span class="hljs-keyword">var</span> disableWhenFn = $parse(match[<span class="hljs-number">4</span>] || <span class="hljs-string">''</span>);
            <span class="hljs-keyword">var</span> valuesFn = $parse(match[<span class="hljs-number">8</span>]);
            <span class="hljs-keyword">var</span> locals = {};
            <span class="hljs-keyword">var</span> getLocals = keyName ? <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, key</span>) </span>{
                locals[keyName] = key;
                locals[valueName] = value;
                <span class="hljs-keyword">return</span> locals;
            } : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                locals[valueName] = value;
                <span class="hljs-keyword">return</span> locals;
            };

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Option</span>(<span class="hljs-params">selectValue, viewValue, label, group, disabled</span>) </span>{
                <span class="hljs-keyword">this</span>.selectValue = selectValue;
                <span class="hljs-keyword">this</span>.viewValue = viewValue;
                <span class="hljs-keyword">this</span>.label = label;
                <span class="hljs-keyword">this</span>.group = group;
                <span class="hljs-keyword">this</span>.disabled = disabled;
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getOptionValuesKeys</span>(<span class="hljs-params">optionValues</span>) </span>{
                <span class="hljs-keyword">var</span> optionValuesKeys;
                <span class="hljs-keyword">if</span> (!keyName &amp;&amp; isArrayLike(optionValues)) {
                    optionValuesKeys = optionValues;
                } <span class="hljs-keyword">else</span> {
                    optionValuesKeys = [];
                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> itemKey <span class="hljs-keyword">in</span> optionValues) {
                        <span class="hljs-keyword">if</span> (optionValues.hasOwnProperty(itemKey) &amp;&amp; itemKey.charAt(<span class="hljs-number">0</span>) !== <span class="hljs-string">'$'</span>) {
                            optionValuesKeys.push(itemKey);
                        }
                    }
                }
                <span class="hljs-keyword">return</span> optionValuesKeys;
            }
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">trackBy</span>: trackBy,
                <span class="hljs-attr">getTrackByValue</span>: getTrackByValue,
                <span class="hljs-attr">getWatchables</span>: $parse(valuesFn, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">optionValues</span>) </span>{
                    <span class="hljs-keyword">var</span> watchedArray = [];
                    optionValues = optionValues || [];
                    <span class="hljs-keyword">var</span> optionValuesKeys = getOptionValuesKeys(optionValues);
                    <span class="hljs-keyword">var</span> optionValuesLength = optionValuesKeys.length;
                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> index = <span class="hljs-number">0</span>; index &lt; optionValuesLength; index++) {
                        <span class="hljs-keyword">var</span> key = (optionValues === optionValuesKeys) ? index : optionValuesKeys[index];
                        <span class="hljs-keyword">var</span> value = optionValues[key];
                        <span class="hljs-keyword">var</span> locals = getLocals(value, key);
                        <span class="hljs-keyword">var</span> selectValue = getTrackByValueFn(value, locals);
                        watchedArray.push(selectValue);
                        <span class="hljs-keyword">if</span> (match[<span class="hljs-number">2</span>] || match[<span class="hljs-number">1</span>]) {
                            <span class="hljs-keyword">var</span> label = displayFn(scope, locals);
                            watchedArray.push(label);
                        }
                        <span class="hljs-keyword">if</span> (match[<span class="hljs-number">4</span>]) {
                            <span class="hljs-keyword">var</span> disableWhen = disableWhenFn(scope, locals);
                            watchedArray.push(disableWhen);
                        }
                    }
                    <span class="hljs-keyword">return</span> watchedArray;
                }),
                <span class="hljs-attr">getOptions</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">var</span> optionItems = [];
                    <span class="hljs-keyword">var</span> selectValueMap = {};
                    <span class="hljs-keyword">var</span> optionValues = valuesFn(scope) || [];
                    <span class="hljs-keyword">var</span> optionValuesKeys = getOptionValuesKeys(optionValues);
                    <span class="hljs-keyword">var</span> optionValuesLength = optionValuesKeys.length;
                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> index = <span class="hljs-number">0</span>; index &lt; optionValuesLength; index++) {
                        <span class="hljs-keyword">var</span> key = (optionValues === optionValuesKeys) ? index : optionValuesKeys[index];
                        <span class="hljs-keyword">var</span> value = optionValues[key];
                        <span class="hljs-keyword">var</span> locals = getLocals(value, key);
                        <span class="hljs-keyword">var</span> viewValue = viewValueFn(scope, locals);
                        <span class="hljs-keyword">var</span> selectValue = getTrackByValueFn(viewValue, locals);
                        <span class="hljs-keyword">var</span> label = displayFn(scope, locals);
                        <span class="hljs-keyword">var</span> group = groupByFn(scope, locals);
                        <span class="hljs-keyword">var</span> disabled = disableWhenFn(scope, locals);
                        <span class="hljs-keyword">var</span> optionItem = <span class="hljs-keyword">new</span> Option(selectValue, viewValue, label, group, disabled);
                        optionItems.push(optionItem);
                        selectValueMap[selectValue] = optionItem;
                    }
                    <span class="hljs-keyword">return</span> {
                        <span class="hljs-attr">items</span>: optionItems,
                        <span class="hljs-attr">selectValueMap</span>: selectValueMap,
                        <span class="hljs-attr">getOptionFromViewValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                            <span class="hljs-keyword">return</span> selectValueMap[getTrackByValue(value)];
                        },
                        <span class="hljs-attr">getViewValueFromOption</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">option</span>) </span>{
                            <span class="hljs-keyword">return</span> trackBy ? angular.copy(option.viewValue) : option.viewValue;
                        }
                    };
                }
            };
        }
        <span class="hljs-keyword">var</span> optionTemplate = <span class="hljs-built_in">window</span>.document.createElement(<span class="hljs-string">'option'</span>),
            optGroupTemplate = <span class="hljs-built_in">window</span>.document.createElement(<span class="hljs-string">'optgroup'</span>);

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngOptionsPostLink</span>(<span class="hljs-params">scope, selectElement, attr, ctrls</span>) </span>{
            <span class="hljs-keyword">var</span> selectCtrl = ctrls[<span class="hljs-number">0</span>];
            <span class="hljs-keyword">var</span> ngModelCtrl = ctrls[<span class="hljs-number">1</span>];
            <span class="hljs-keyword">var</span> multiple = attr.multiple;
            <span class="hljs-keyword">var</span> emptyOption;
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, children = selectElement.children(), ii = children.length; i &lt; ii; i++) {
                <span class="hljs-keyword">if</span> (children[i].value === <span class="hljs-string">''</span>) {
                    emptyOption = children.eq(i);
                    <span class="hljs-keyword">break</span>;
                }
            }
            <span class="hljs-keyword">var</span> providedEmptyOption = !!emptyOption;
            <span class="hljs-keyword">var</span> unknownOption = jqLite(optionTemplate.cloneNode(<span class="hljs-literal">false</span>));
            unknownOption.val(<span class="hljs-string">'?'</span>);
            <span class="hljs-keyword">var</span> options;
            <span class="hljs-keyword">var</span> ngOptions = parseOptionsExpression(attr.ngOptions, selectElement, scope);
            <span class="hljs-keyword">var</span> listFragment = $<span class="hljs-built_in">document</span>[<span class="hljs-number">0</span>].createDocumentFragment();
            <span class="hljs-keyword">var</span> renderEmptyOption = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">if</span> (!providedEmptyOption) {
                    selectElement.prepend(emptyOption);
                }
                selectElement.val(<span class="hljs-string">''</span>);
                emptyOption.prop(<span class="hljs-string">'selected'</span>, <span class="hljs-literal">true</span>);
                emptyOption.attr(<span class="hljs-string">'selected'</span>, <span class="hljs-literal">true</span>);
            };
            <span class="hljs-keyword">var</span> removeEmptyOption = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">if</span> (!providedEmptyOption) {
                    emptyOption.remove();
                }
            };
            <span class="hljs-keyword">var</span> renderUnknownOption = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                selectElement.prepend(unknownOption);
                selectElement.val(<span class="hljs-string">'?'</span>);
                unknownOption.prop(<span class="hljs-string">'selected'</span>, <span class="hljs-literal">true</span>);
                unknownOption.attr(<span class="hljs-string">'selected'</span>, <span class="hljs-literal">true</span>);
            };
            <span class="hljs-keyword">var</span> removeUnknownOption = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                unknownOption.remove();
            };
            <span class="hljs-keyword">if</span> (!multiple) {
                selectCtrl.writeValue = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">writeNgOptionsValue</span>(<span class="hljs-params">value</span>) </span>{
                    <span class="hljs-keyword">var</span> option = options.getOptionFromViewValue(value);
                    <span class="hljs-keyword">if</span> (option) {
                        <span class="hljs-keyword">if</span> (selectElement[<span class="hljs-number">0</span>].value !== option.selectValue) {
                            removeUnknownOption();
                            removeEmptyOption();
                            selectElement[<span class="hljs-number">0</span>].value = option.selectValue;
                            option.element.selected = <span class="hljs-literal">true</span>;
                        }
                        option.element.setAttribute(<span class="hljs-string">'selected'</span>, <span class="hljs-string">'selected'</span>);
                    } <span class="hljs-keyword">else</span> {
                        <span class="hljs-keyword">if</span> (value === <span class="hljs-literal">null</span> || providedEmptyOption) {
                            removeUnknownOption();
                            renderEmptyOption();
                        } <span class="hljs-keyword">else</span> {
                            removeEmptyOption();
                            renderUnknownOption();
                        }
                    }
                };
                selectCtrl.readValue = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readNgOptionsValue</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">var</span> selectedOption = options.selectValueMap[selectElement.val()];
                    <span class="hljs-keyword">if</span> (selectedOption &amp;&amp; !selectedOption.disabled) {
                        removeEmptyOption();
                        removeUnknownOption();
                        <span class="hljs-keyword">return</span> options.getViewValueFromOption(selectedOption);
                    }
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
                };
                <span class="hljs-keyword">if</span> (ngOptions.trackBy) {
                    scope.$watch(
                        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            <span class="hljs-keyword">return</span> ngOptions.getTrackByValue(ngModelCtrl.$viewValue);
                        },
                        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            ngModelCtrl.$render();
                        }
                    );
                }
            } <span class="hljs-keyword">else</span> {
                ngModelCtrl.$isEmpty = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                    <span class="hljs-keyword">return</span> !value || value.length === <span class="hljs-number">0</span>;
                };
                selectCtrl.writeValue = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">writeNgOptionsMultiple</span>(<span class="hljs-params">value</span>) </span>{
                    options.items.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">option</span>) </span>{
                        option.element.selected = <span class="hljs-literal">false</span>;
                    });
                    <span class="hljs-keyword">if</span> (value) {
                        value.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">item</span>) </span>{
                            <span class="hljs-keyword">var</span> option = options.getOptionFromViewValue(item);
                            <span class="hljs-keyword">if</span> (option) option.element.selected = <span class="hljs-literal">true</span>;
                        });
                    }
                };
                selectCtrl.readValue = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readNgOptionsMultiple</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">var</span> selectedValues = selectElement.val() || [],
                        selections = [];
                    forEach(selectedValues, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                        <span class="hljs-keyword">var</span> option = options.selectValueMap[value];
                        <span class="hljs-keyword">if</span> (option &amp;&amp; !option.disabled) selections.push(options.getViewValueFromOption(option));
                    });
                    <span class="hljs-keyword">return</span> selections;
                };
                <span class="hljs-keyword">if</span> (ngOptions.trackBy) {
                    scope.$watchCollection(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">if</span> (isArray(ngModelCtrl.$viewValue)) {
                            <span class="hljs-keyword">return</span> ngModelCtrl.$viewValue.map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                                <span class="hljs-keyword">return</span> ngOptions.getTrackByValue(value);
                            });
                        }
                    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        ngModelCtrl.$render();
                    });
                }
            }
            <span class="hljs-keyword">if</span> (providedEmptyOption) {
                emptyOption.remove();
                $compile(emptyOption)(scope);
                emptyOption.removeClass(<span class="hljs-string">'ng-scope'</span>);
            } <span class="hljs-keyword">else</span> {
                emptyOption = jqLite(optionTemplate.cloneNode(<span class="hljs-literal">false</span>));
            }
            selectElement.empty();
            updateOptions();
            scope.$watchCollection(ngOptions.getWatchables, updateOptions);

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addOptionElement</span>(<span class="hljs-params">option, parent</span>) </span>{
                <span class="hljs-keyword">var</span> optionElement = optionTemplate.cloneNode(<span class="hljs-literal">false</span>);
                parent.appendChild(optionElement);
                updateOptionElement(option, optionElement);
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateOptionElement</span>(<span class="hljs-params">option, element</span>) </span>{
                option.element = element;
                element.disabled = option.disabled;
                <span class="hljs-keyword">if</span> (option.label !== element.label) {
                    element.label = option.label;
                    element.textContent = option.label;
                }
                <span class="hljs-keyword">if</span> (option.value !== element.value) element.value = option.selectValue;
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateOptions</span>(<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">var</span> previousValue = options &amp;&amp; selectCtrl.readValue();
                <span class="hljs-keyword">if</span> (options) {
                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = options.items.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
                        <span class="hljs-keyword">var</span> option = options.items[i];
                        <span class="hljs-keyword">if</span> (isDefined(option.group)) {
                            jqLiteRemove(option.element.parentNode);
                        } <span class="hljs-keyword">else</span> {
                            jqLiteRemove(option.element);
                        }
                    }
                }
                options = ngOptions.getOptions();
                <span class="hljs-keyword">var</span> groupElementMap = {};
                <span class="hljs-keyword">if</span> (providedEmptyOption) {
                    selectElement.prepend(emptyOption);
                }
                options.items.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addOption</span>(<span class="hljs-params">option</span>) </span>{
                    <span class="hljs-keyword">var</span> groupElement;
                    <span class="hljs-keyword">if</span> (isDefined(option.group)) {
                        groupElement = groupElementMap[option.group];
                        <span class="hljs-keyword">if</span> (!groupElement) {
                            groupElement = optGroupTemplate.cloneNode(<span class="hljs-literal">false</span>);
                            listFragment.appendChild(groupElement);
                            groupElement.label = option.group === <span class="hljs-literal">null</span> ? <span class="hljs-string">'null'</span> : option.group;
                            groupElementMap[option.group] = groupElement;
                        }
                        addOptionElement(option, groupElement);
                    } <span class="hljs-keyword">else</span> {
                        addOptionElement(option, listFragment);
                    }
                });
                selectElement[<span class="hljs-number">0</span>].appendChild(listFragment);
                ngModelCtrl.$render();
                <span class="hljs-keyword">if</span> (!ngModelCtrl.$isEmpty(previousValue)) {
                    <span class="hljs-keyword">var</span> nextValue = selectCtrl.readValue();
                    <span class="hljs-keyword">var</span> isNotPrimitive = ngOptions.trackBy || multiple;
                    <span class="hljs-keyword">if</span> (isNotPrimitive ? !equals(previousValue, nextValue) : previousValue !== nextValue) {
                        ngModelCtrl.$setViewValue(nextValue);
                        ngModelCtrl.$render();
                    }
                }
            }
        }
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">restrict</span>: <span class="hljs-string">'A'</span>,
            <span class="hljs-attr">terminal</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">require</span>: [<span class="hljs-string">'select'</span>, <span class="hljs-string">'ngModel'</span>],
            <span class="hljs-attr">link</span>: {
                <span class="hljs-attr">pre</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngOptionsPreLink</span>(<span class="hljs-params">scope, selectElement, attr, ctrls</span>) </span>{
                    ctrls[<span class="hljs-number">0</span>].registerOption = noop;
                },
                <span class="hljs-attr">post</span>: ngOptionsPostLink
            }
        };
    }];
    <span class="hljs-keyword">var</span> ngPluralizeDirective = [<span class="hljs-string">'$locale'</span>, <span class="hljs-string">'$interpolate'</span>, <span class="hljs-string">'$log'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$locale, $interpolate, $log</span>) </span>{
        <span class="hljs-keyword">var</span> BRACE = <span class="hljs-regexp">/{}/g</span>,
            IS_WHEN = <span class="hljs-regexp">/^when(Minus)?(.+)$/</span>;
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">link</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, element, attr</span>) </span>{
                <span class="hljs-keyword">var</span> numberExp = attr.count,
                    whenExp = attr.$attr.when &amp;&amp; element.attr(attr.$attr.when),
                    offset = attr.offset || <span class="hljs-number">0</span>,
                    whens = scope.$<span class="hljs-built_in">eval</span>(whenExp) || {},
                    whensExpFns = {},
                    startSymbol = $interpolate.startSymbol(),
                    endSymbol = $interpolate.endSymbol(),
                    braceReplacement = startSymbol + numberExp + <span class="hljs-string">'-'</span> + offset + endSymbol,
                    watchRemover = angular.noop,
                    lastCount;
                forEach(attr, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">expression, attributeName</span>) </span>{
                    <span class="hljs-keyword">var</span> tmpMatch = IS_WHEN.exec(attributeName);
                    <span class="hljs-keyword">if</span> (tmpMatch) {
                        <span class="hljs-keyword">var</span> whenKey = (tmpMatch[<span class="hljs-number">1</span>] ? <span class="hljs-string">'-'</span> : <span class="hljs-string">''</span>) + lowercase(tmpMatch[<span class="hljs-number">2</span>]);
                        whens[whenKey] = element.attr(attr.$attr[attributeName]);
                    }
                });
                forEach(whens, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">expression, key</span>) </span>{
                    whensExpFns[key] = $interpolate(expression.replace(BRACE, braceReplacement));
                });
                scope.$watch(numberExp, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngPluralizeWatchAction</span>(<span class="hljs-params">newVal</span>) </span>{
                    <span class="hljs-keyword">var</span> count = <span class="hljs-built_in">parseFloat</span>(newVal);
                    <span class="hljs-keyword">var</span> countIsNaN = <span class="hljs-built_in">isNaN</span>(count);
                    <span class="hljs-keyword">if</span> (!countIsNaN &amp;&amp; !(count <span class="hljs-keyword">in</span> whens)) {
                        count = $locale.pluralCat(count - offset);
                    }
                    <span class="hljs-keyword">if</span> ((count !== lastCount) &amp;&amp; !(countIsNaN &amp;&amp; isNumber(lastCount) &amp;&amp; <span class="hljs-built_in">isNaN</span>(lastCount))) {
                        watchRemover();
                        <span class="hljs-keyword">var</span> whenExpFn = whensExpFns[count];
                        <span class="hljs-keyword">if</span> (isUndefined(whenExpFn)) {
                            <span class="hljs-keyword">if</span> (newVal != <span class="hljs-literal">null</span>) {
                                $log.debug(<span class="hljs-string">"ngPluralize: no rule defined for '"</span> + count + <span class="hljs-string">"' in "</span> + whenExp);
                            }
                            watchRemover = noop;
                            updateElementText();
                        } <span class="hljs-keyword">else</span> {
                            watchRemover = scope.$watch(whenExpFn, updateElementText);
                        }
                        lastCount = count;
                    }
                });

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateElementText</span>(<span class="hljs-params">newText</span>) </span>{
                    element.text(newText || <span class="hljs-string">''</span>);
                }
            }
        };
    }];
    <span class="hljs-keyword">var</span> ngRepeatDirective = [<span class="hljs-string">'$parse'</span>, <span class="hljs-string">'$animate'</span>, <span class="hljs-string">'$compile'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$parse, $animate, $compile</span>) </span>{
        <span class="hljs-keyword">var</span> NG_REMOVED = <span class="hljs-string">'$$NG_REMOVED'</span>;
        <span class="hljs-keyword">var</span> ngRepeatMinErr = minErr(<span class="hljs-string">'ngRepeat'</span>);
        <span class="hljs-keyword">var</span> updateScope = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, index, valueIdentifier, value, keyIdentifier, key, arrayLength</span>) </span>{
            scope[valueIdentifier] = value;
            <span class="hljs-keyword">if</span> (keyIdentifier) scope[keyIdentifier] = key;
            scope.$index = index;
            scope.$first = (index === <span class="hljs-number">0</span>);
            scope.$last = (index === (arrayLength - <span class="hljs-number">1</span>));
            scope.$middle = !(scope.$first || scope.$last);
            scope.$odd = !(scope.$even = (index &amp; <span class="hljs-number">1</span>) === <span class="hljs-number">0</span>);
        };
        <span class="hljs-keyword">var</span> getBlockStart = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">block</span>) </span>{
            <span class="hljs-keyword">return</span> block.clone[<span class="hljs-number">0</span>];
        };
        <span class="hljs-keyword">var</span> getBlockEnd = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">block</span>) </span>{
            <span class="hljs-keyword">return</span> block.clone[block.clone.length - <span class="hljs-number">1</span>];
        };
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">restrict</span>: <span class="hljs-string">'A'</span>,
            <span class="hljs-attr">multiElement</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">transclude</span>: <span class="hljs-string">'element'</span>,
            <span class="hljs-attr">priority</span>: <span class="hljs-number">1000</span>,
            <span class="hljs-attr">terminal</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">$$tlb</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">compile</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngRepeatCompile</span>(<span class="hljs-params">$element, $attr</span>) </span>{
                <span class="hljs-keyword">var</span> expression = $attr.ngRepeat;
                <span class="hljs-keyword">var</span> ngRepeatEndComment = $compile.$$createComment(<span class="hljs-string">'end ngRepeat'</span>, expression);
                <span class="hljs-keyword">var</span> match = expression.match(<span class="hljs-regexp">/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/</span>);
                <span class="hljs-keyword">if</span> (!match) {
                    <span class="hljs-keyword">throw</span> ngRepeatMinErr(<span class="hljs-string">'iexp'</span>, <span class="hljs-string">"Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'."</span>,
                        expression);
                }
                <span class="hljs-keyword">var</span> lhs = match[<span class="hljs-number">1</span>];
                <span class="hljs-keyword">var</span> rhs = match[<span class="hljs-number">2</span>];
                <span class="hljs-keyword">var</span> aliasAs = match[<span class="hljs-number">3</span>];
                <span class="hljs-keyword">var</span> trackByExp = match[<span class="hljs-number">4</span>];
                match = lhs.match(<span class="hljs-regexp">/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/</span>);
                <span class="hljs-keyword">if</span> (!match) {
                    <span class="hljs-keyword">throw</span> ngRepeatMinErr(<span class="hljs-string">'iidexp'</span>, <span class="hljs-string">"'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'."</span>,
                        lhs);
                }
                <span class="hljs-keyword">var</span> valueIdentifier = match[<span class="hljs-number">3</span>] || match[<span class="hljs-number">1</span>];
                <span class="hljs-keyword">var</span> keyIdentifier = match[<span class="hljs-number">2</span>];
                <span class="hljs-keyword">if</span> (aliasAs &amp;&amp; (!<span class="hljs-regexp">/^[$a-zA-Z_][$a-zA-Z0-9_]*$/</span>.test(aliasAs) ||
                        <span class="hljs-regexp">/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/</span>.test(aliasAs))) {
                    <span class="hljs-keyword">throw</span> ngRepeatMinErr(<span class="hljs-string">'badident'</span>, <span class="hljs-string">"alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name."</span>,
                        aliasAs);
                }
                <span class="hljs-keyword">var</span> trackByExpGetter, trackByIdExpFn, trackByIdArrayFn, trackByIdObjFn;
                <span class="hljs-keyword">var</span> hashFnLocals = {
                    <span class="hljs-attr">$id</span>: hashKey
                };
                <span class="hljs-keyword">if</span> (trackByExp) {
                    trackByExpGetter = $parse(trackByExp);
                } <span class="hljs-keyword">else</span> {
                    trackByIdArrayFn = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key, value</span>) </span>{
                        <span class="hljs-keyword">return</span> hashKey(value);
                    };
                    trackByIdObjFn = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key</span>) </span>{
                        <span class="hljs-keyword">return</span> key;
                    };
                }
                <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngRepeatLink</span>(<span class="hljs-params">$scope, $element, $attr, ctrl, $transclude</span>) </span>{
                    <span class="hljs-keyword">if</span> (trackByExpGetter) {
                        trackByIdExpFn = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key, value, index</span>) </span>{
                            <span class="hljs-keyword">if</span> (keyIdentifier) hashFnLocals[keyIdentifier] = key;
                            hashFnLocals[valueIdentifier] = value;
                            hashFnLocals.$index = index;
                            <span class="hljs-keyword">return</span> trackByExpGetter($scope, hashFnLocals);
                        };
                    }
                    <span class="hljs-keyword">var</span> lastBlockMap = createMap();
                    $scope.$watchCollection(rhs, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngRepeatAction</span>(<span class="hljs-params">collection</span>) </span>{
                        <span class="hljs-keyword">var</span> index, length,
                            previousNode = $element[<span class="hljs-number">0</span>],
                            nextNode,
                            nextBlockMap = createMap(),
                            collectionLength,
                            key, value,
                            trackById,
                            trackByIdFn,
                            collectionKeys,
                            block,
                            nextBlockOrder,
                            elementsToRemove;
                        <span class="hljs-keyword">if</span> (aliasAs) {
                            $scope[aliasAs] = collection;
                        }
                        <span class="hljs-keyword">if</span> (isArrayLike(collection)) {
                            collectionKeys = collection;
                            trackByIdFn = trackByIdExpFn || trackByIdArrayFn;
                        } <span class="hljs-keyword">else</span> {
                            trackByIdFn = trackByIdExpFn || trackByIdObjFn;
                            collectionKeys = [];
                            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> itemKey <span class="hljs-keyword">in</span> collection) {
                                <span class="hljs-keyword">if</span> (hasOwnProperty.call(collection, itemKey) &amp;&amp; itemKey.charAt(<span class="hljs-number">0</span>) !== <span class="hljs-string">'$'</span>) {
                                    collectionKeys.push(itemKey);
                                }
                            }
                        }
                        collectionLength = collectionKeys.length;
                        nextBlockOrder = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(collectionLength);
                        <span class="hljs-keyword">for</span> (index = <span class="hljs-number">0</span>; index &lt; collectionLength; index++) {
                            key = (collection === collectionKeys) ? index : collectionKeys[index];
                            value = collection[key];
                            trackById = trackByIdFn(key, value, index);
                            <span class="hljs-keyword">if</span> (lastBlockMap[trackById]) {
                                block = lastBlockMap[trackById];
                                <span class="hljs-keyword">delete</span> lastBlockMap[trackById];
                                nextBlockMap[trackById] = block;
                                nextBlockOrder[index] = block;
                            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (nextBlockMap[trackById]) {
                                forEach(nextBlockOrder, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">block</span>) </span>{
                                    <span class="hljs-keyword">if</span> (block &amp;&amp; block.scope) lastBlockMap[block.id] = block;
                                });
                                <span class="hljs-keyword">throw</span> ngRepeatMinErr(<span class="hljs-string">'dupes'</span>,
                                    <span class="hljs-string">"Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}"</span>,
                                    expression, trackById, value);
                            } <span class="hljs-keyword">else</span> {
                                nextBlockOrder[index] = {
                                    <span class="hljs-attr">id</span>: trackById,
                                    <span class="hljs-attr">scope</span>: <span class="hljs-literal">undefined</span>,
                                    <span class="hljs-attr">clone</span>: <span class="hljs-literal">undefined</span>
                                };
                                nextBlockMap[trackById] = <span class="hljs-literal">true</span>;
                            }
                        }
                        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> blockKey <span class="hljs-keyword">in</span> lastBlockMap) {
                            block = lastBlockMap[blockKey];
                            elementsToRemove = getBlockNodes(block.clone);
                            $animate.leave(elementsToRemove);
                            <span class="hljs-keyword">if</span> (elementsToRemove[<span class="hljs-number">0</span>].parentNode) {
                                <span class="hljs-keyword">for</span> (index = <span class="hljs-number">0</span>, length = elementsToRemove.length; index &lt; length; index++) {
                                    elementsToRemove[index][NG_REMOVED] = <span class="hljs-literal">true</span>;
                                }
                            }
                            block.scope.$destroy();
                        }
                        <span class="hljs-keyword">for</span> (index = <span class="hljs-number">0</span>; index &lt; collectionLength; index++) {
                            key = (collection === collectionKeys) ? index : collectionKeys[index];
                            value = collection[key];
                            block = nextBlockOrder[index];
                            <span class="hljs-keyword">if</span> (block.scope) {
                                nextNode = previousNode;
                                <span class="hljs-keyword">do</span> {
                                    nextNode = nextNode.nextSibling;
                                } <span class="hljs-keyword">while</span> (nextNode &amp;&amp; nextNode[NG_REMOVED]);
                                <span class="hljs-keyword">if</span> (getBlockStart(block) != nextNode) {
                                    $animate.move(getBlockNodes(block.clone), <span class="hljs-literal">null</span>, previousNode);
                                }
                                previousNode = getBlockEnd(block);
                                updateScope(block.scope, index, valueIdentifier, value, keyIdentifier, key, collectionLength);
                            } <span class="hljs-keyword">else</span> {
                                $transclude(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngRepeatTransclude</span>(<span class="hljs-params">clone, scope</span>) </span>{
                                    block.scope = scope;
                                    <span class="hljs-keyword">var</span> endNode = ngRepeatEndComment.cloneNode(<span class="hljs-literal">false</span>);
                                    clone[clone.length++] = endNode;
                                    $animate.enter(clone, <span class="hljs-literal">null</span>, previousNode);
                                    previousNode = endNode;
                                    block.clone = clone;
                                    nextBlockMap[block.id] = block;
                                    updateScope(block.scope, index, valueIdentifier, value, keyIdentifier, key, collectionLength);
                                });
                            }
                        }
                        lastBlockMap = nextBlockMap;
                    });
                };
            }
        };
    }];
    <span class="hljs-keyword">var</span> NG_HIDE_CLASS = <span class="hljs-string">'ng-hide'</span>;
    <span class="hljs-keyword">var</span> NG_HIDE_IN_PROGRESS_CLASS = <span class="hljs-string">'ng-hide-animate'</span>;
    <span class="hljs-keyword">var</span> ngShowDirective = [<span class="hljs-string">'$animate'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$animate</span>) </span>{
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">restrict</span>: <span class="hljs-string">'A'</span>,
            <span class="hljs-attr">multiElement</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">link</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, element, attr</span>) </span>{
                scope.$watch(attr.ngShow, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngShowWatchAction</span>(<span class="hljs-params">value</span>) </span>{
                    $animate[value ? <span class="hljs-string">'removeClass'</span> : <span class="hljs-string">'addClass'</span>](element, NG_HIDE_CLASS, {
                        <span class="hljs-attr">tempClasses</span>: NG_HIDE_IN_PROGRESS_CLASS
                    });
                });
            }
        };
    }];
    <span class="hljs-keyword">var</span> ngHideDirective = [<span class="hljs-string">'$animate'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$animate</span>) </span>{
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">restrict</span>: <span class="hljs-string">'A'</span>,
            <span class="hljs-attr">multiElement</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">link</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, element, attr</span>) </span>{
                scope.$watch(attr.ngHide, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngHideWatchAction</span>(<span class="hljs-params">value</span>) </span>{
                    $animate[value ? <span class="hljs-string">'addClass'</span> : <span class="hljs-string">'removeClass'</span>](element, NG_HIDE_CLASS, {
                        <span class="hljs-attr">tempClasses</span>: NG_HIDE_IN_PROGRESS_CLASS
                    });
                });
            }
        };
    }];
    <span class="hljs-keyword">var</span> ngStyleDirective = ngDirective(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, element, attr</span>) </span>{
        scope.$watch(attr.ngStyle, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngStyleWatchAction</span>(<span class="hljs-params">newStyles, oldStyles</span>) </span>{
            <span class="hljs-keyword">if</span> (oldStyles &amp;&amp; (newStyles !== oldStyles)) {
                forEach(oldStyles, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">val, style</span>) </span>{
                    element.css(style, <span class="hljs-string">''</span>);
                });
            }
            <span class="hljs-keyword">if</span> (newStyles) element.css(newStyles);
        }, <span class="hljs-literal">true</span>);
    });
    <span class="hljs-keyword">var</span> ngSwitchDirective = [<span class="hljs-string">'$animate'</span>, <span class="hljs-string">'$compile'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$animate, $compile</span>) </span>{
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">require</span>: <span class="hljs-string">'ngSwitch'</span>,
            <span class="hljs-attr">controller</span>: [<span class="hljs-string">'$scope'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngSwitchController</span>(<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">this</span>.cases = {};
            }],
            <span class="hljs-attr">link</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, element, attr, ngSwitchController</span>) </span>{
                <span class="hljs-keyword">var</span> watchExpr = attr.ngSwitch || attr.on,
                    selectedTranscludes = [],
                    selectedElements = [],
                    previousLeaveAnimations = [],
                    selectedScopes = [];
                <span class="hljs-keyword">var</span> spliceFactory = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">array, index</span>) </span>{
                    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        array.splice(index, <span class="hljs-number">1</span>);
                    };
                };
                scope.$watch(watchExpr, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngSwitchWatchAction</span>(<span class="hljs-params">value</span>) </span>{
                    <span class="hljs-keyword">var</span> i, ii;
                    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, ii = previousLeaveAnimations.length; i &lt; ii; ++i) {
                        $animate.cancel(previousLeaveAnimations[i]);
                    }
                    previousLeaveAnimations.length = <span class="hljs-number">0</span>;
                    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, ii = selectedScopes.length; i &lt; ii; ++i) {
                        <span class="hljs-keyword">var</span> selected = getBlockNodes(selectedElements[i].clone);
                        selectedScopes[i].$destroy();
                        <span class="hljs-keyword">var</span> promise = previousLeaveAnimations[i] = $animate.leave(selected);
                        promise.then(spliceFactory(previousLeaveAnimations, i));
                    }
                    selectedElements.length = <span class="hljs-number">0</span>;
                    selectedScopes.length = <span class="hljs-number">0</span>;
                    <span class="hljs-keyword">if</span> ((selectedTranscludes = ngSwitchController.cases[<span class="hljs-string">'!'</span> + value] || ngSwitchController.cases[<span class="hljs-string">'?'</span>])) {
                        forEach(selectedTranscludes, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">selectedTransclude</span>) </span>{
                            selectedTransclude.transclude(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">caseElement, selectedScope</span>) </span>{
                                selectedScopes.push(selectedScope);
                                <span class="hljs-keyword">var</span> anchor = selectedTransclude.element;
                                caseElement[caseElement.length++] = $compile.$$createComment(<span class="hljs-string">'end ngSwitchWhen'</span>);
                                <span class="hljs-keyword">var</span> block = {
                                    <span class="hljs-attr">clone</span>: caseElement
                                };
                                selectedElements.push(block);
                                $animate.enter(caseElement, anchor.parent(), anchor);
                            });
                        });
                    }
                });
            }
        };
    }];
    <span class="hljs-keyword">var</span> ngSwitchWhenDirective = ngDirective({
        <span class="hljs-attr">transclude</span>: <span class="hljs-string">'element'</span>,
        <span class="hljs-attr">priority</span>: <span class="hljs-number">1200</span>,
        <span class="hljs-attr">require</span>: <span class="hljs-string">'^ngSwitch'</span>,
        <span class="hljs-attr">multiElement</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">link</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, element, attrs, ctrl, $transclude</span>) </span>{
            ctrl.cases[<span class="hljs-string">'!'</span> + attrs.ngSwitchWhen] = (ctrl.cases[<span class="hljs-string">'!'</span> + attrs.ngSwitchWhen] || []);
            ctrl.cases[<span class="hljs-string">'!'</span> + attrs.ngSwitchWhen].push({
                <span class="hljs-attr">transclude</span>: $transclude,
                <span class="hljs-attr">element</span>: element
            });
        }
    });
    <span class="hljs-keyword">var</span> ngSwitchDefaultDirective = ngDirective({
        <span class="hljs-attr">transclude</span>: <span class="hljs-string">'element'</span>,
        <span class="hljs-attr">priority</span>: <span class="hljs-number">1200</span>,
        <span class="hljs-attr">require</span>: <span class="hljs-string">'^ngSwitch'</span>,
        <span class="hljs-attr">multiElement</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">link</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, element, attr, ctrl, $transclude</span>) </span>{
            ctrl.cases[<span class="hljs-string">'?'</span>] = (ctrl.cases[<span class="hljs-string">'?'</span>] || []);
            ctrl.cases[<span class="hljs-string">'?'</span>].push({
                <span class="hljs-attr">transclude</span>: $transclude,
                <span class="hljs-attr">element</span>: element
            });
        }
    });
    <span class="hljs-keyword">var</span> ngTranscludeMinErr = minErr(<span class="hljs-string">'ngTransclude'</span>);
    <span class="hljs-keyword">var</span> ngTranscludeDirective = [<span class="hljs-string">'$compile'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$compile</span>) </span>{
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">restrict</span>: <span class="hljs-string">'EAC'</span>,
            <span class="hljs-attr">terminal</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">compile</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngTranscludeCompile</span>(<span class="hljs-params">tElement</span>) </span>{
                <span class="hljs-keyword">var</span> fallbackLinkFn = $compile(tElement.contents());
                tElement.empty();
                <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngTranscludePostLink</span>(<span class="hljs-params">$scope, $element, $attrs, controller, $transclude</span>) </span>{
                    <span class="hljs-keyword">if</span> (!$transclude) {
                        <span class="hljs-keyword">throw</span> ngTranscludeMinErr(<span class="hljs-string">'orphan'</span>,
                            <span class="hljs-string">'Illegal use of ngTransclude directive in the template! '</span> +
                            <span class="hljs-string">'No parent directive that requires a transclusion found. '</span> +
                            <span class="hljs-string">'Element: {0}'</span>,
                            startingTag($element));
                    }
                    <span class="hljs-keyword">if</span> ($attrs.ngTransclude === $attrs.$attr.ngTransclude) {
                        $attrs.ngTransclude = <span class="hljs-string">''</span>;
                    }
                    <span class="hljs-keyword">var</span> slotName = $attrs.ngTransclude || $attrs.ngTranscludeSlot;
                    $transclude(ngTranscludeCloneAttachFn, <span class="hljs-literal">null</span>, slotName);
                    <span class="hljs-keyword">if</span> (slotName &amp;&amp; !$transclude.isSlotFilled(slotName)) {
                        useFallbackContent();
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngTranscludeCloneAttachFn</span>(<span class="hljs-params">clone, transcludedScope</span>) </span>{
                        <span class="hljs-keyword">if</span> (clone.length) {
                            $element.append(clone);
                        } <span class="hljs-keyword">else</span> {
                            useFallbackContent();
                            transcludedScope.$destroy();
                        }
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">useFallbackContent</span>(<span class="hljs-params"></span>) </span>{
                        fallbackLinkFn($scope, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">clone</span>) </span>{
                            $element.append(clone);
                        });
                    }
                };
            }
        };
    }];
    <span class="hljs-keyword">var</span> scriptDirective = [<span class="hljs-string">'$templateCache'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$templateCache</span>) </span>{
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">restrict</span>: <span class="hljs-string">'E'</span>,
            <span class="hljs-attr">terminal</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">compile</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, attr</span>) </span>{
                <span class="hljs-keyword">if</span> (attr.type == <span class="hljs-string">'text/ng-template'</span>) {
                    <span class="hljs-keyword">var</span> templateUrl = attr.id,
                        text = element[<span class="hljs-number">0</span>].text;
                    $templateCache.put(templateUrl, text);
                }
            }
        };
    }];
    <span class="hljs-keyword">var</span> noopNgModelController = {
        <span class="hljs-attr">$setViewValue</span>: noop,
        <span class="hljs-attr">$render</span>: noop
    };

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">chromeHack</span>(<span class="hljs-params">optionElement</span>) </span>{
        <span class="hljs-keyword">if</span> (optionElement[<span class="hljs-number">0</span>].hasAttribute(<span class="hljs-string">'selected'</span>)) {
            optionElement[<span class="hljs-number">0</span>].selected = <span class="hljs-literal">true</span>;
        }
    }
    <span class="hljs-keyword">var</span> SelectController = [<span class="hljs-string">'$element'</span>, <span class="hljs-string">'$scope'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$element, $scope</span>) </span>{
        <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>,
            optionsMap = <span class="hljs-keyword">new</span> HashMap();
        self.ngModelCtrl = noopNgModelController;
        self.unknownOption = jqLite(<span class="hljs-built_in">window</span>.document.createElement(<span class="hljs-string">'option'</span>));
        self.renderUnknownOption = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">val</span>) </span>{
            <span class="hljs-keyword">var</span> unknownVal = <span class="hljs-string">'? '</span> + hashKey(val) + <span class="hljs-string">' ?'</span>;
            self.unknownOption.val(unknownVal);
            $element.prepend(self.unknownOption);
            $element.val(unknownVal);
        };
        $scope.$on(<span class="hljs-string">'$destroy'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            self.renderUnknownOption = noop;
        });
        self.removeUnknownOption = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">if</span> (self.unknownOption.parent()) self.unknownOption.remove();
        };
        self.readValue = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readSingleValue</span>(<span class="hljs-params"></span>) </span>{
            self.removeUnknownOption();
            <span class="hljs-keyword">return</span> $element.val();
        };
        self.writeValue = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">writeSingleValue</span>(<span class="hljs-params">value</span>) </span>{
            <span class="hljs-keyword">if</span> (self.hasOption(value)) {
                self.removeUnknownOption();
                $element.val(value);
                <span class="hljs-keyword">if</span> (value === <span class="hljs-string">''</span>) self.emptyOption.prop(<span class="hljs-string">'selected'</span>, <span class="hljs-literal">true</span>);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">if</span> (value == <span class="hljs-literal">null</span> &amp;&amp; self.emptyOption) {
                    self.removeUnknownOption();
                    $element.val(<span class="hljs-string">''</span>);
                } <span class="hljs-keyword">else</span> {
                    self.renderUnknownOption(value);
                }
            }
        };
        self.addOption = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, element</span>) </span>{
            <span class="hljs-keyword">if</span> (element[<span class="hljs-number">0</span>].nodeType === NODE_TYPE_COMMENT) <span class="hljs-keyword">return</span>;
            assertNotHasOwnProperty(value, <span class="hljs-string">'"option value"'</span>);
            <span class="hljs-keyword">if</span> (value === <span class="hljs-string">''</span>) {
                self.emptyOption = element;
            }
            <span class="hljs-keyword">var</span> count = optionsMap.get(value) || <span class="hljs-number">0</span>;
            optionsMap.put(value, count + <span class="hljs-number">1</span>);
            self.ngModelCtrl.$render();
            chromeHack(element);
        };
        self.removeOption = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
            <span class="hljs-keyword">var</span> count = optionsMap.get(value);
            <span class="hljs-keyword">if</span> (count) {
                <span class="hljs-keyword">if</span> (count === <span class="hljs-number">1</span>) {
                    optionsMap.remove(value);
                    <span class="hljs-keyword">if</span> (value === <span class="hljs-string">''</span>) {
                        self.emptyOption = <span class="hljs-literal">undefined</span>;
                    }
                } <span class="hljs-keyword">else</span> {
                    optionsMap.put(value, count - <span class="hljs-number">1</span>);
                }
            }
        };
        self.hasOption = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
            <span class="hljs-keyword">return</span> !!optionsMap.get(value);
        };
        self.registerOption = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">optionScope, optionElement, optionAttrs, interpolateValueFn, interpolateTextFn</span>) </span>{
            <span class="hljs-keyword">if</span> (interpolateValueFn) {
                <span class="hljs-keyword">var</span> oldVal;
                optionAttrs.$observe(<span class="hljs-string">'value'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">valueAttributeObserveAction</span>(<span class="hljs-params">newVal</span>) </span>{
                    <span class="hljs-keyword">if</span> (isDefined(oldVal)) {
                        self.removeOption(oldVal);
                    }
                    oldVal = newVal;
                    self.addOption(newVal, optionElement);
                });
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (interpolateTextFn) {
                optionScope.$watch(interpolateTextFn, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">interpolateWatchAction</span>(<span class="hljs-params">newVal, oldVal</span>) </span>{
                    optionAttrs.$set(<span class="hljs-string">'value'</span>, newVal);
                    <span class="hljs-keyword">if</span> (oldVal !== newVal) {
                        self.removeOption(oldVal);
                    }
                    self.addOption(newVal, optionElement);
                });
            } <span class="hljs-keyword">else</span> {
                self.addOption(optionAttrs.value, optionElement);
            }
            optionElement.on(<span class="hljs-string">'$destroy'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                self.removeOption(optionAttrs.value);
                self.ngModelCtrl.$render();
            });
        };
    }];
    <span class="hljs-keyword">var</span> selectDirective = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">restrict</span>: <span class="hljs-string">'E'</span>,
            <span class="hljs-attr">require</span>: [<span class="hljs-string">'select'</span>, <span class="hljs-string">'?ngModel'</span>],
            <span class="hljs-attr">controller</span>: SelectController,
            <span class="hljs-attr">priority</span>: <span class="hljs-number">1</span>,
            <span class="hljs-attr">link</span>: {
                <span class="hljs-attr">pre</span>: selectPreLink,
                <span class="hljs-attr">post</span>: selectPostLink
            }
        };

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">selectPreLink</span>(<span class="hljs-params">scope, element, attr, ctrls</span>) </span>{
            <span class="hljs-keyword">var</span> ngModelCtrl = ctrls[<span class="hljs-number">1</span>];
            <span class="hljs-keyword">if</span> (!ngModelCtrl) <span class="hljs-keyword">return</span>;
            <span class="hljs-keyword">var</span> selectCtrl = ctrls[<span class="hljs-number">0</span>];
            selectCtrl.ngModelCtrl = ngModelCtrl;
            element.on(<span class="hljs-string">'change'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                scope.$apply(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                    ngModelCtrl.$setViewValue(selectCtrl.readValue());
                });
            });
            <span class="hljs-keyword">if</span> (attr.multiple) {
                selectCtrl.readValue = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readMultipleValue</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">var</span> array = [];
                    forEach(element.find(<span class="hljs-string">'option'</span>), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">option</span>) </span>{
                        <span class="hljs-keyword">if</span> (option.selected) {
                            array.push(option.value);
                        }
                    });
                    <span class="hljs-keyword">return</span> array;
                };
                selectCtrl.writeValue = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">writeMultipleValue</span>(<span class="hljs-params">value</span>) </span>{
                    <span class="hljs-keyword">var</span> items = <span class="hljs-keyword">new</span> HashMap(value);
                    forEach(element.find(<span class="hljs-string">'option'</span>), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">option</span>) </span>{
                        option.selected = isDefined(items.get(option.value));
                    });
                };
                <span class="hljs-keyword">var</span> lastView, lastViewRef = <span class="hljs-literal">NaN</span>;
                scope.$watch(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">selectMultipleWatch</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">if</span> (lastViewRef === ngModelCtrl.$viewValue &amp;&amp; !equals(lastView, ngModelCtrl.$viewValue)) {
                        lastView = shallowCopy(ngModelCtrl.$viewValue);
                        ngModelCtrl.$render();
                    }
                    lastViewRef = ngModelCtrl.$viewValue;
                });
                ngModelCtrl.$isEmpty = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                    <span class="hljs-keyword">return</span> !value || value.length === <span class="hljs-number">0</span>;
                };
            }
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">selectPostLink</span>(<span class="hljs-params">scope, element, attrs, ctrls</span>) </span>{
            <span class="hljs-keyword">var</span> ngModelCtrl = ctrls[<span class="hljs-number">1</span>];
            <span class="hljs-keyword">if</span> (!ngModelCtrl) <span class="hljs-keyword">return</span>;
            <span class="hljs-keyword">var</span> selectCtrl = ctrls[<span class="hljs-number">0</span>];
            ngModelCtrl.$render = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                selectCtrl.writeValue(ngModelCtrl.$viewValue);
            };
        }
    };
    <span class="hljs-keyword">var</span> optionDirective = [<span class="hljs-string">'$interpolate'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$interpolate</span>) </span>{
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">restrict</span>: <span class="hljs-string">'E'</span>,
            <span class="hljs-attr">priority</span>: <span class="hljs-number">100</span>,
            <span class="hljs-attr">compile</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, attr</span>) </span>{
                <span class="hljs-keyword">if</span> (isDefined(attr.value)) {
                    <span class="hljs-keyword">var</span> interpolateValueFn = $interpolate(attr.value, <span class="hljs-literal">true</span>);
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">var</span> interpolateTextFn = $interpolate(element.text(), <span class="hljs-literal">true</span>);
                    <span class="hljs-keyword">if</span> (!interpolateTextFn) {
                        attr.$set(<span class="hljs-string">'value'</span>, element.text());
                    }
                }
                <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, element, attr</span>) </span>{
                    <span class="hljs-keyword">var</span> selectCtrlName = <span class="hljs-string">'$selectController'</span>,
                        parent = element.parent(),
                        selectCtrl = parent.data(selectCtrlName) ||
                        parent.parent().data(selectCtrlName);
                    <span class="hljs-keyword">if</span> (selectCtrl) {
                        selectCtrl.registerOption(scope, element, attr, interpolateValueFn, interpolateTextFn);
                    }
                };
            }
        };
    }];
    <span class="hljs-keyword">var</span> styleDirective = valueFn({
        <span class="hljs-attr">restrict</span>: <span class="hljs-string">'E'</span>,
        <span class="hljs-attr">terminal</span>: <span class="hljs-literal">false</span>
    });
    <span class="hljs-keyword">var</span> requiredDirective = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">restrict</span>: <span class="hljs-string">'A'</span>,
            <span class="hljs-attr">require</span>: <span class="hljs-string">'?ngModel'</span>,
            <span class="hljs-attr">link</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, elm, attr, ctrl</span>) </span>{
                <span class="hljs-keyword">if</span> (!ctrl) <span class="hljs-keyword">return</span>;
                attr.required = <span class="hljs-literal">true</span>;
                ctrl.$validators.required = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">modelValue, viewValue</span>) </span>{
                    <span class="hljs-keyword">return</span> !attr.required || !ctrl.$isEmpty(viewValue);
                };
                attr.$observe(<span class="hljs-string">'required'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                    ctrl.$validate();
                });
            }
        };
    };
    <span class="hljs-keyword">var</span> patternDirective = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">restrict</span>: <span class="hljs-string">'A'</span>,
            <span class="hljs-attr">require</span>: <span class="hljs-string">'?ngModel'</span>,
            <span class="hljs-attr">link</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, elm, attr, ctrl</span>) </span>{
                <span class="hljs-keyword">if</span> (!ctrl) <span class="hljs-keyword">return</span>;
                <span class="hljs-keyword">var</span> regexp, patternExp = attr.ngPattern || attr.pattern;
                attr.$observe(<span class="hljs-string">'pattern'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">regex</span>) </span>{
                    <span class="hljs-keyword">if</span> (isString(regex) &amp;&amp; regex.length &gt; <span class="hljs-number">0</span>) {
                        regex = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">'^'</span> + regex + <span class="hljs-string">'$'</span>);
                    }
                    <span class="hljs-keyword">if</span> (regex &amp;&amp; !regex.test) {
                        <span class="hljs-keyword">throw</span> minErr(<span class="hljs-string">'ngPattern'</span>)(<span class="hljs-string">'noregexp'</span>,
                            <span class="hljs-string">'Expected {0} to be a RegExp but was {1}. Element: {2}'</span>, patternExp,
                            regex, startingTag(elm));
                    }
                    regexp = regex || <span class="hljs-literal">undefined</span>;
                    ctrl.$validate();
                });
                ctrl.$validators.pattern = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">modelValue, viewValue</span>) </span>{
                    <span class="hljs-keyword">return</span> ctrl.$isEmpty(viewValue) || isUndefined(regexp) || regexp.test(viewValue);
                };
            }
        };
    };
    <span class="hljs-keyword">var</span> maxlengthDirective = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">restrict</span>: <span class="hljs-string">'A'</span>,
            <span class="hljs-attr">require</span>: <span class="hljs-string">'?ngModel'</span>,
            <span class="hljs-attr">link</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, elm, attr, ctrl</span>) </span>{
                <span class="hljs-keyword">if</span> (!ctrl) <span class="hljs-keyword">return</span>;
                <span class="hljs-keyword">var</span> maxlength = <span class="hljs-number">-1</span>;
                attr.$observe(<span class="hljs-string">'maxlength'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                    <span class="hljs-keyword">var</span> intVal = toInt(value);
                    maxlength = <span class="hljs-built_in">isNaN</span>(intVal) ? <span class="hljs-number">-1</span> : intVal;
                    ctrl.$validate();
                });
                ctrl.$validators.maxlength = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">modelValue, viewValue</span>) </span>{
                    <span class="hljs-keyword">return</span> (maxlength &lt; <span class="hljs-number">0</span>) || ctrl.$isEmpty(viewValue) || (viewValue.length &lt;= maxlength);
                };
            }
        };
    };
    <span class="hljs-keyword">var</span> minlengthDirective = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">restrict</span>: <span class="hljs-string">'A'</span>,
            <span class="hljs-attr">require</span>: <span class="hljs-string">'?ngModel'</span>,
            <span class="hljs-attr">link</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, elm, attr, ctrl</span>) </span>{
                <span class="hljs-keyword">if</span> (!ctrl) <span class="hljs-keyword">return</span>;
                <span class="hljs-keyword">var</span> minlength = <span class="hljs-number">0</span>;
                attr.$observe(<span class="hljs-string">'minlength'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                    minlength = toInt(value) || <span class="hljs-number">0</span>;
                    ctrl.$validate();
                });
                ctrl.$validators.minlength = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">modelValue, viewValue</span>) </span>{
                    <span class="hljs-keyword">return</span> ctrl.$isEmpty(viewValue) || viewValue.length &gt;= minlength;
                };
            }
        };
    };
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.angular.bootstrap) {
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.console) {
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'WARNING: Tried to load angular more than once.'</span>);
        }
        <span class="hljs-keyword">return</span>;
    }
    bindJQuery();
    publishExternalAPI(angular);
    angular.module(<span class="hljs-string">"ngLocale"</span>, [], [<span class="hljs-string">"$provide"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$provide</span>) </span>{
        <span class="hljs-keyword">var</span> PLURAL_CATEGORY = {
            <span class="hljs-attr">ZERO</span>: <span class="hljs-string">"zero"</span>,
            <span class="hljs-attr">ONE</span>: <span class="hljs-string">"one"</span>,
            <span class="hljs-attr">TWO</span>: <span class="hljs-string">"two"</span>,
            <span class="hljs-attr">FEW</span>: <span class="hljs-string">"few"</span>,
            <span class="hljs-attr">MANY</span>: <span class="hljs-string">"many"</span>,
            <span class="hljs-attr">OTHER</span>: <span class="hljs-string">"other"</span>
        };

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getDecimals</span>(<span class="hljs-params">n</span>) </span>{
            n = n + <span class="hljs-string">''</span>;
            <span class="hljs-keyword">var</span> i = n.indexOf(<span class="hljs-string">'.'</span>);
            <span class="hljs-keyword">return</span> (i == <span class="hljs-number">-1</span>) ? <span class="hljs-number">0</span> : n.length - i - <span class="hljs-number">1</span>;
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getVF</span>(<span class="hljs-params">n, opt_precision</span>) </span>{
            <span class="hljs-keyword">var</span> v = opt_precision;
            <span class="hljs-keyword">if</span> (<span class="hljs-literal">undefined</span> === v) {
                v = <span class="hljs-built_in">Math</span>.min(getDecimals(n), <span class="hljs-number">3</span>);
            }
            <span class="hljs-keyword">var</span> base = <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">10</span>, v);
            <span class="hljs-keyword">var</span> f = ((n * base) | <span class="hljs-number">0</span>) % base;
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">v</span>: v,
                <span class="hljs-attr">f</span>: f
            };
        }
        $provide.value(<span class="hljs-string">"$locale"</span>, {
            <span class="hljs-string">"DATETIME_FORMATS"</span>: {
                <span class="hljs-string">"AMPMS"</span>: [
                    <span class="hljs-string">"AM"</span>,
                    <span class="hljs-string">"PM"</span>
                ],
                <span class="hljs-string">"DAY"</span>: [
                    <span class="hljs-string">"Sunday"</span>,
                    <span class="hljs-string">"Monday"</span>,
                    <span class="hljs-string">"Tuesday"</span>,
                    <span class="hljs-string">"Wednesday"</span>,
                    <span class="hljs-string">"Thursday"</span>,
                    <span class="hljs-string">"Friday"</span>,
                    <span class="hljs-string">"Saturday"</span>
                ],
                <span class="hljs-string">"ERANAMES"</span>: [
                    <span class="hljs-string">"Before Christ"</span>,
                    <span class="hljs-string">"Anno Domini"</span>
                ],
                <span class="hljs-string">"ERAS"</span>: [
                    <span class="hljs-string">"BC"</span>,
                    <span class="hljs-string">"AD"</span>
                ],
                <span class="hljs-string">"FIRSTDAYOFWEEK"</span>: <span class="hljs-number">6</span>,
                <span class="hljs-string">"MONTH"</span>: [
                    <span class="hljs-string">"January"</span>,
                    <span class="hljs-string">"February"</span>,
                    <span class="hljs-string">"March"</span>,
                    <span class="hljs-string">"April"</span>,
                    <span class="hljs-string">"May"</span>,
                    <span class="hljs-string">"June"</span>,
                    <span class="hljs-string">"July"</span>,
                    <span class="hljs-string">"August"</span>,
                    <span class="hljs-string">"September"</span>,
                    <span class="hljs-string">"October"</span>,
                    <span class="hljs-string">"November"</span>,
                    <span class="hljs-string">"December"</span>
                ],
                <span class="hljs-string">"SHORTDAY"</span>: [
                    <span class="hljs-string">"Sun"</span>,
                    <span class="hljs-string">"Mon"</span>,
                    <span class="hljs-string">"Tue"</span>,
                    <span class="hljs-string">"Wed"</span>,
                    <span class="hljs-string">"Thu"</span>,
                    <span class="hljs-string">"Fri"</span>,
                    <span class="hljs-string">"Sat"</span>
                ],
                <span class="hljs-string">"SHORTMONTH"</span>: [
                    <span class="hljs-string">"Jan"</span>,
                    <span class="hljs-string">"Feb"</span>,
                    <span class="hljs-string">"Mar"</span>,
                    <span class="hljs-string">"Apr"</span>,
                    <span class="hljs-string">"May"</span>,
                    <span class="hljs-string">"Jun"</span>,
                    <span class="hljs-string">"Jul"</span>,
                    <span class="hljs-string">"Aug"</span>,
                    <span class="hljs-string">"Sep"</span>,
                    <span class="hljs-string">"Oct"</span>,
                    <span class="hljs-string">"Nov"</span>,
                    <span class="hljs-string">"Dec"</span>
                ],
                <span class="hljs-string">"STANDALONEMONTH"</span>: [
                    <span class="hljs-string">"January"</span>,
                    <span class="hljs-string">"February"</span>,
                    <span class="hljs-string">"March"</span>,
                    <span class="hljs-string">"April"</span>,
                    <span class="hljs-string">"May"</span>,
                    <span class="hljs-string">"June"</span>,
                    <span class="hljs-string">"July"</span>,
                    <span class="hljs-string">"August"</span>,
                    <span class="hljs-string">"September"</span>,
                    <span class="hljs-string">"October"</span>,
                    <span class="hljs-string">"November"</span>,
                    <span class="hljs-string">"December"</span>
                ],
                <span class="hljs-string">"WEEKENDRANGE"</span>: [
                    <span class="hljs-number">5</span>,
                    <span class="hljs-number">6</span>
                ],
                <span class="hljs-string">"fullDate"</span>: <span class="hljs-string">"EEEE, MMMM d, y"</span>,
                <span class="hljs-string">"longDate"</span>: <span class="hljs-string">"MMMM d, y"</span>,
                <span class="hljs-string">"medium"</span>: <span class="hljs-string">"MMM d, y h:mm:ss a"</span>,
                <span class="hljs-string">"mediumDate"</span>: <span class="hljs-string">"MMM d, y"</span>,
                <span class="hljs-string">"mediumTime"</span>: <span class="hljs-string">"h:mm:ss a"</span>,
                <span class="hljs-string">"short"</span>: <span class="hljs-string">"M/d/yy h:mm a"</span>,
                <span class="hljs-string">"shortDate"</span>: <span class="hljs-string">"M/d/yy"</span>,
                <span class="hljs-string">"shortTime"</span>: <span class="hljs-string">"h:mm a"</span>
            },
            <span class="hljs-string">"NUMBER_FORMATS"</span>: {
                <span class="hljs-string">"CURRENCY_SYM"</span>: <span class="hljs-string">"$"</span>,
                <span class="hljs-string">"DECIMAL_SEP"</span>: <span class="hljs-string">"."</span>,
                <span class="hljs-string">"GROUP_SEP"</span>: <span class="hljs-string">","</span>,
                <span class="hljs-string">"PATTERNS"</span>: [{
                        <span class="hljs-string">"gSize"</span>: <span class="hljs-number">3</span>,
                        <span class="hljs-string">"lgSize"</span>: <span class="hljs-number">3</span>,
                        <span class="hljs-string">"maxFrac"</span>: <span class="hljs-number">3</span>,
                        <span class="hljs-string">"minFrac"</span>: <span class="hljs-number">0</span>,
                        <span class="hljs-string">"minInt"</span>: <span class="hljs-number">1</span>,
                        <span class="hljs-string">"negPre"</span>: <span class="hljs-string">"-"</span>,
                        <span class="hljs-string">"negSuf"</span>: <span class="hljs-string">""</span>,
                        <span class="hljs-string">"posPre"</span>: <span class="hljs-string">""</span>,
                        <span class="hljs-string">"posSuf"</span>: <span class="hljs-string">""</span>
                    },
                    {
                        <span class="hljs-string">"gSize"</span>: <span class="hljs-number">3</span>,
                        <span class="hljs-string">"lgSize"</span>: <span class="hljs-number">3</span>,
                        <span class="hljs-string">"maxFrac"</span>: <span class="hljs-number">2</span>,
                        <span class="hljs-string">"minFrac"</span>: <span class="hljs-number">2</span>,
                        <span class="hljs-string">"minInt"</span>: <span class="hljs-number">1</span>,
                        <span class="hljs-string">"negPre"</span>: <span class="hljs-string">"-\u00a4"</span>,
                        <span class="hljs-string">"negSuf"</span>: <span class="hljs-string">""</span>,
                        <span class="hljs-string">"posPre"</span>: <span class="hljs-string">"\u00a4"</span>,
                        <span class="hljs-string">"posSuf"</span>: <span class="hljs-string">""</span>
                    }
                ]
            },
            <span class="hljs-string">"id"</span>: <span class="hljs-string">"en-us"</span>,
            <span class="hljs-string">"localeID"</span>: <span class="hljs-string">"en_US"</span>,
            <span class="hljs-string">"pluralCat"</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n, opt_precision</span>) </span>{
                <span class="hljs-keyword">var</span> i = n | <span class="hljs-number">0</span>;
                <span class="hljs-keyword">var</span> vf = getVF(n, opt_precision);
                <span class="hljs-keyword">if</span> (i == <span class="hljs-number">1</span> &amp;&amp; vf.v == <span class="hljs-number">0</span>) {
                    <span class="hljs-keyword">return</span> PLURAL_CATEGORY.ONE;
                }
                <span class="hljs-keyword">return</span> PLURAL_CATEGORY.OTHER;
            }
        });
    }]);
    jqLite(<span class="hljs-built_in">window</span>.document).ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        angularInit(<span class="hljs-built_in">window</span>.document, bootstrap);
    });
})(<span class="hljs-built_in">window</span>);
!<span class="hljs-built_in">window</span>.angular.$$csp().noInlineStyle &amp;&amp; <span class="hljs-built_in">window</span>.angular.element(<span class="hljs-built_in">document</span>.head).prepend(<span class="hljs-string">'&lt;style type="text/css"&gt;@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}&lt;/style&gt;'</span>);;
<span class="hljs-comment">/*! RESOURCE: /scripts/angular_1.5.8/angular-sanitize.js */</span>
(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">window, angular</span>) </span>{
<span class="hljs-meta">    'use strict'</span>;
    <span class="hljs-keyword">var</span> $sanitizeMinErr = angular.$$minErr(<span class="hljs-string">'$sanitize'</span>);
    <span class="hljs-keyword">var</span> bind;
    <span class="hljs-keyword">var</span> extend;
    <span class="hljs-keyword">var</span> forEach;
    <span class="hljs-keyword">var</span> isDefined;
    <span class="hljs-keyword">var</span> lowercase;
    <span class="hljs-keyword">var</span> noop;
    <span class="hljs-keyword">var</span> htmlParser;
    <span class="hljs-keyword">var</span> htmlSanitizeWriter;

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$SanitizeProvider</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> svgEnabled = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$$sanitizeUri'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$$sanitizeUri</span>) </span>{
            <span class="hljs-keyword">if</span> (svgEnabled) {
                extend(validElements, svgElements);
            }
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">html</span>) </span>{
                <span class="hljs-keyword">var</span> buf = [];
                htmlParser(html, htmlSanitizeWriter(buf, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">uri, isImage</span>) </span>{
                    <span class="hljs-keyword">return</span> !<span class="hljs-regexp">/^unsafe:/</span>.test($$sanitizeUri(uri, isImage));
                }));
                <span class="hljs-keyword">return</span> buf.join(<span class="hljs-string">''</span>);
            };
        }];
        <span class="hljs-keyword">this</span>.enableSvg = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">enableSvg</span>) </span>{
            <span class="hljs-keyword">if</span> (isDefined(enableSvg)) {
                svgEnabled = enableSvg;
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> svgEnabled;
            }
        };
        bind = angular.bind;
        extend = angular.extend;
        forEach = angular.forEach;
        isDefined = angular.isDefined;
        lowercase = angular.lowercase;
        noop = angular.noop;
        htmlParser = htmlParserImpl;
        htmlSanitizeWriter = htmlSanitizeWriterImpl;
        <span class="hljs-keyword">var</span> SURROGATE_PAIR_REGEXP = <span class="hljs-regexp">/[\uD800-\uDBFF][\uDC00-\uDFFF]/g</span>,
            NON_ALPHANUMERIC_REGEXP = <span class="hljs-regexp">/([^\#-~ |!])/g</span>;
        <span class="hljs-keyword">var</span> voidElements = toMap(<span class="hljs-string">"area,br,col,hr,img,wbr"</span>);
        <span class="hljs-keyword">var</span> optionalEndTagBlockElements = toMap(<span class="hljs-string">"colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"</span>),
            optionalEndTagInlineElements = toMap(<span class="hljs-string">"rp,rt"</span>),
            optionalEndTagElements = extend({},
                optionalEndTagInlineElements,
                optionalEndTagBlockElements);
        <span class="hljs-keyword">var</span> blockElements = extend({}, optionalEndTagBlockElements, toMap(<span class="hljs-string">"address,article,"</span> +
            <span class="hljs-string">"aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,"</span> +
            <span class="hljs-string">"h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul"</span>));
        <span class="hljs-keyword">var</span> inlineElements = extend({}, optionalEndTagInlineElements, toMap(<span class="hljs-string">"a,abbr,acronym,b,"</span> +
            <span class="hljs-string">"bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,"</span> +
            <span class="hljs-string">"samp,small,span,strike,strong,sub,sup,time,tt,u,var"</span>));
        <span class="hljs-keyword">var</span> svgElements = toMap(<span class="hljs-string">"circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,"</span> +
            <span class="hljs-string">"hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,"</span> +
            <span class="hljs-string">"radialGradient,rect,stop,svg,switch,text,title,tspan"</span>);
        <span class="hljs-keyword">var</span> blockedElements = toMap(<span class="hljs-string">"script,style"</span>);
        <span class="hljs-keyword">var</span> validElements = extend({},
            voidElements,
            blockElements,
            inlineElements,
            optionalEndTagElements);
        <span class="hljs-keyword">var</span> uriAttrs = toMap(<span class="hljs-string">"background,cite,href,longdesc,src,xlink:href"</span>);
        <span class="hljs-keyword">var</span> htmlAttrs = toMap(<span class="hljs-string">'abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,'</span> +
            <span class="hljs-string">'color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,'</span> +
            <span class="hljs-string">'ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,'</span> +
            <span class="hljs-string">'scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,'</span> +
            <span class="hljs-string">'valign,value,vspace,width'</span>);
        <span class="hljs-keyword">var</span> svgAttrs = toMap(<span class="hljs-string">'accent-height,accumulate,additive,alphabetic,arabic-form,ascent,'</span> +
            <span class="hljs-string">'baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,'</span> +
            <span class="hljs-string">'cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,'</span> +
            <span class="hljs-string">'font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,'</span> +
            <span class="hljs-string">'height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,'</span> +
            <span class="hljs-string">'marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,'</span> +
            <span class="hljs-string">'max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,'</span> +
            <span class="hljs-string">'path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,'</span> +
            <span class="hljs-string">'requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,'</span> +
            <span class="hljs-string">'stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,'</span> +
            <span class="hljs-string">'stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,'</span> +
            <span class="hljs-string">'stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,'</span> +
            <span class="hljs-string">'underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,'</span> +
            <span class="hljs-string">'width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,'</span> +
            <span class="hljs-string">'xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan'</span>, <span class="hljs-literal">true</span>);
        <span class="hljs-keyword">var</span> validAttrs = extend({},
            uriAttrs,
            svgAttrs,
            htmlAttrs);

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toMap</span>(<span class="hljs-params">str, lowercaseKeys</span>) </span>{
            <span class="hljs-keyword">var</span> obj = {},
                items = str.split(<span class="hljs-string">','</span>),
                i;
            <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; items.length; i++) {
                obj[lowercaseKeys ? lowercase(items[i]) : items[i]] = <span class="hljs-literal">true</span>;
            }
            <span class="hljs-keyword">return</span> obj;
        }
        <span class="hljs-keyword">var</span> inertBodyElement;
        (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">window</span>) </span>{
            <span class="hljs-keyword">var</span> doc;
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.document &amp;&amp; <span class="hljs-built_in">window</span>.document.implementation) {
                doc = <span class="hljs-built_in">window</span>.document.implementation.createHTMLDocument(<span class="hljs-string">"inert"</span>);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">throw</span> $sanitizeMinErr(<span class="hljs-string">'noinert'</span>, <span class="hljs-string">"Can't create an inert html document"</span>);
            }
            <span class="hljs-keyword">var</span> docElement = doc.documentElement || doc.getDocumentElement();
            <span class="hljs-keyword">var</span> bodyElements = docElement.getElementsByTagName(<span class="hljs-string">'body'</span>);
            <span class="hljs-keyword">if</span> (bodyElements.length === <span class="hljs-number">1</span>) {
                inertBodyElement = bodyElements[<span class="hljs-number">0</span>];
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">var</span> html = doc.createElement(<span class="hljs-string">'html'</span>);
                inertBodyElement = doc.createElement(<span class="hljs-string">'body'</span>);
                html.appendChild(inertBodyElement);
                doc.appendChild(html);
            }
        })(<span class="hljs-built_in">window</span>);

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">htmlParserImpl</span>(<span class="hljs-params">html, handler</span>) </span>{
            <span class="hljs-keyword">if</span> (html === <span class="hljs-literal">null</span> || html === <span class="hljs-literal">undefined</span>) {
                html = <span class="hljs-string">''</span>;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> html !== <span class="hljs-string">'string'</span>) {
                html = <span class="hljs-string">''</span> + html;
            }
            inertBodyElement.innerHTML = html;
            <span class="hljs-keyword">var</span> mXSSAttempts = <span class="hljs-number">5</span>;
            <span class="hljs-keyword">do</span> {
                <span class="hljs-keyword">if</span> (mXSSAttempts === <span class="hljs-number">0</span>) {
                    <span class="hljs-keyword">throw</span> $sanitizeMinErr(<span class="hljs-string">'uinput'</span>, <span class="hljs-string">"Failed to sanitize html because the input is unstable"</span>);
                }
                mXSSAttempts--;
                <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.document.documentMode) {
                    stripCustomNsAttrs(inertBodyElement);
                }
                html = inertBodyElement.innerHTML;
                inertBodyElement.innerHTML = html;
            } <span class="hljs-keyword">while</span> (html !== inertBodyElement.innerHTML);
            <span class="hljs-keyword">var</span> node = inertBodyElement.firstChild;
            <span class="hljs-keyword">while</span> (node) {
                <span class="hljs-keyword">switch</span> (node.nodeType) {
                    <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
                        handler.start(node.nodeName.toLowerCase(), attrToMap(node.attributes));
                        <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:
                        handler.chars(node.textContent);
                        <span class="hljs-keyword">break</span>;
                }
                <span class="hljs-keyword">var</span> nextNode;
                <span class="hljs-keyword">if</span> (!(nextNode = node.firstChild)) {
                    <span class="hljs-keyword">if</span> (node.nodeType == <span class="hljs-number">1</span>) {
                        handler.end(node.nodeName.toLowerCase());
                    }
                    nextNode = node.nextSibling;
                    <span class="hljs-keyword">if</span> (!nextNode) {
                        <span class="hljs-keyword">while</span> (nextNode == <span class="hljs-literal">null</span>) {
                            node = node.parentNode;
                            <span class="hljs-keyword">if</span> (node === inertBodyElement) <span class="hljs-keyword">break</span>;
                            nextNode = node.nextSibling;
                            <span class="hljs-keyword">if</span> (node.nodeType == <span class="hljs-number">1</span>) {
                                handler.end(node.nodeName.toLowerCase());
                            }
                        }
                    }
                }
                node = nextNode;
            }
            <span class="hljs-keyword">while</span> (node = inertBodyElement.firstChild) {
                inertBodyElement.removeChild(node);
            }
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">attrToMap</span>(<span class="hljs-params">attrs</span>) </span>{
            <span class="hljs-keyword">var</span> map = {};
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, ii = attrs.length; i &lt; ii; i++) {
                <span class="hljs-keyword">var</span> attr = attrs[i];
                map[attr.name] = attr.value;
            }
            <span class="hljs-keyword">return</span> map;
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">encodeEntities</span>(<span class="hljs-params">value</span>) </span>{
            <span class="hljs-keyword">return</span> value.
            replace(<span class="hljs-regexp">/&amp;/g</span>, <span class="hljs-string">'&amp;amp;'</span>).
            replace(SURROGATE_PAIR_REGEXP, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                <span class="hljs-keyword">var</span> hi = value.charCodeAt(<span class="hljs-number">0</span>);
                <span class="hljs-keyword">var</span> low = value.charCodeAt(<span class="hljs-number">1</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-string">'&amp;#'</span> + (((hi - <span class="hljs-number">0xD800</span>) * <span class="hljs-number">0x400</span>) + (low - <span class="hljs-number">0xDC00</span>) + <span class="hljs-number">0x10000</span>) + <span class="hljs-string">';'</span>;
            }).
            replace(NON_ALPHANUMERIC_REGEXP, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-string">'&amp;#'</span> + value.charCodeAt(<span class="hljs-number">0</span>) + <span class="hljs-string">';'</span>;
            }).
            replace(<span class="hljs-regexp">/&lt;/g</span>, <span class="hljs-string">'&amp;lt;'</span>).
            replace(<span class="hljs-regexp">/&gt;/g</span>, <span class="hljs-string">'&amp;gt;'</span>);
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">htmlSanitizeWriterImpl</span>(<span class="hljs-params">buf, uriValidator</span>) </span>{
            <span class="hljs-keyword">var</span> ignoreCurrentElement = <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">var</span> out = bind(buf, buf.push);
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">start</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">tag, attrs</span>) </span>{
                    tag = lowercase(tag);
                    <span class="hljs-keyword">if</span> (!ignoreCurrentElement &amp;&amp; blockedElements[tag]) {
                        ignoreCurrentElement = tag;
                    }
                    <span class="hljs-keyword">if</span> (!ignoreCurrentElement &amp;&amp; validElements[tag] === <span class="hljs-literal">true</span>) {
                        out(<span class="hljs-string">'&lt;'</span>);
                        out(tag);
                        forEach(attrs, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, key</span>) </span>{
                            <span class="hljs-keyword">var</span> lkey = lowercase(key);
                            <span class="hljs-keyword">var</span> isImage = (tag === <span class="hljs-string">'img'</span> &amp;&amp; lkey === <span class="hljs-string">'src'</span>) || (lkey === <span class="hljs-string">'background'</span>);
                            <span class="hljs-keyword">if</span> (validAttrs[lkey] === <span class="hljs-literal">true</span> &amp;&amp;
                                (uriAttrs[lkey] !== <span class="hljs-literal">true</span> || uriValidator(value, isImage))) {
                                out(<span class="hljs-string">' '</span>);
                                out(key);
                                out(<span class="hljs-string">'="'</span>);
                                out(encodeEntities(value));
                                out(<span class="hljs-string">'"'</span>);
                            }
                        });
                        out(<span class="hljs-string">'&gt;'</span>);
                    }
                },
                <span class="hljs-attr">end</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">tag</span>) </span>{
                    tag = lowercase(tag);
                    <span class="hljs-keyword">if</span> (!ignoreCurrentElement &amp;&amp; validElements[tag] === <span class="hljs-literal">true</span> &amp;&amp; voidElements[tag] !== <span class="hljs-literal">true</span>) {
                        out(<span class="hljs-string">'&lt;/'</span>);
                        out(tag);
                        out(<span class="hljs-string">'&gt;'</span>);
                    }
                    <span class="hljs-keyword">if</span> (tag == ignoreCurrentElement) {
                        ignoreCurrentElement = <span class="hljs-literal">false</span>;
                    }
                },
                <span class="hljs-attr">chars</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">chars</span>) </span>{
                    <span class="hljs-keyword">if</span> (!ignoreCurrentElement) {
                        out(encodeEntities(chars));
                    }
                }
            };
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stripCustomNsAttrs</span>(<span class="hljs-params">node</span>) </span>{
            <span class="hljs-keyword">if</span> (node.nodeType === <span class="hljs-built_in">window</span>.Node.ELEMENT_NODE) {
                <span class="hljs-keyword">var</span> attrs = node.attributes;
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, l = attrs.length; i &lt; l; i++) {
                    <span class="hljs-keyword">var</span> attrNode = attrs[i];
                    <span class="hljs-keyword">var</span> attrName = attrNode.name.toLowerCase();
                    <span class="hljs-keyword">if</span> (attrName === <span class="hljs-string">'xmlns:ns1'</span> || attrName.lastIndexOf(<span class="hljs-string">'ns1:'</span>, <span class="hljs-number">0</span>) === <span class="hljs-number">0</span>) {
                        node.removeAttributeNode(attrNode);
                        i--;
                        l--;
                    }
                }
            }
            <span class="hljs-keyword">var</span> nextNode = node.firstChild;
            <span class="hljs-keyword">if</span> (nextNode) {
                stripCustomNsAttrs(nextNode);
            }
            nextNode = node.nextSibling;
            <span class="hljs-keyword">if</span> (nextNode) {
                stripCustomNsAttrs(nextNode);
            }
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sanitizeText</span>(<span class="hljs-params">chars</span>) </span>{
        <span class="hljs-keyword">var</span> buf = [];
        <span class="hljs-keyword">var</span> writer = htmlSanitizeWriter(buf, noop);
        writer.chars(chars);
        <span class="hljs-keyword">return</span> buf.join(<span class="hljs-string">''</span>);
    }
    angular.module(<span class="hljs-string">'ngSanitize'</span>, []).provider(<span class="hljs-string">'$sanitize'</span>, $SanitizeProvider);
    angular.module(<span class="hljs-string">'ngSanitize'</span>).filter(<span class="hljs-string">'linky'</span>, [<span class="hljs-string">'$sanitize'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$sanitize</span>) </span>{
        <span class="hljs-keyword">var</span> LINKY_URL_REGEXP =
            <span class="hljs-regexp">/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}&lt;&gt;"\u201d\u2019]/i</span>,
            MAILTO_REGEXP = <span class="hljs-regexp">/^mailto:/i</span>;
        <span class="hljs-keyword">var</span> linkyMinErr = angular.$$minErr(<span class="hljs-string">'linky'</span>);
        <span class="hljs-keyword">var</span> isDefined = angular.isDefined;
        <span class="hljs-keyword">var</span> isFunction = angular.isFunction;
        <span class="hljs-keyword">var</span> isObject = angular.isObject;
        <span class="hljs-keyword">var</span> isString = angular.isString;
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">text, target, attributes</span>) </span>{
            <span class="hljs-keyword">if</span> (text == <span class="hljs-literal">null</span> || text === <span class="hljs-string">''</span>) <span class="hljs-keyword">return</span> text;
            <span class="hljs-keyword">if</span> (!isString(text)) <span class="hljs-keyword">throw</span> linkyMinErr(<span class="hljs-string">'notstring'</span>, <span class="hljs-string">'Expected string but received: {0}'</span>, text);
            <span class="hljs-keyword">var</span> attributesFn =
                isFunction(attributes) ? attributes :
                isObject(attributes) ? <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getAttributesObject</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">return</span> attributes;
                } :
                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getEmptyAttributesObject</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">return</span> {};
                };
            <span class="hljs-keyword">var</span> match;
            <span class="hljs-keyword">var</span> raw = text;
            <span class="hljs-keyword">var</span> html = [];
            <span class="hljs-keyword">var</span> url;
            <span class="hljs-keyword">var</span> i;
            <span class="hljs-keyword">while</span> ((match = raw.match(LINKY_URL_REGEXP))) {
                url = match[<span class="hljs-number">0</span>];
                <span class="hljs-keyword">if</span> (!match[<span class="hljs-number">2</span>] &amp;&amp; !match[<span class="hljs-number">4</span>]) {
                    url = (match[<span class="hljs-number">3</span>] ? <span class="hljs-string">'http://'</span> : <span class="hljs-string">'mailto:'</span>) + url;
                }
                i = match.index;
                addText(raw.substr(<span class="hljs-number">0</span>, i));
                addLink(url, match[<span class="hljs-number">0</span>].replace(MAILTO_REGEXP, <span class="hljs-string">''</span>));
                raw = raw.substring(i + match[<span class="hljs-number">0</span>].length);
            }
            addText(raw);
            <span class="hljs-keyword">return</span> $sanitize(html.join(<span class="hljs-string">''</span>));

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addText</span>(<span class="hljs-params">text</span>) </span>{
                <span class="hljs-keyword">if</span> (!text) {
                    <span class="hljs-keyword">return</span>;
                }
                html.push(sanitizeText(text));
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addLink</span>(<span class="hljs-params">url, text</span>) </span>{
                <span class="hljs-keyword">var</span> key, linkAttributes = attributesFn(url);
                html.push(<span class="hljs-string">'&lt;a '</span>);
                <span class="hljs-keyword">for</span> (key <span class="hljs-keyword">in</span> linkAttributes) {
                    html.push(key + <span class="hljs-string">'="'</span> + linkAttributes[key] + <span class="hljs-string">'" '</span>);
                }
                <span class="hljs-keyword">if</span> (isDefined(target) &amp;&amp; !(<span class="hljs-string">'target'</span> <span class="hljs-keyword">in</span> linkAttributes)) {
                    html.push(<span class="hljs-string">'target="'</span>,
                        target,
                        <span class="hljs-string">'" '</span>);
                }
                html.push(<span class="hljs-string">'href="'</span>,
                    url.replace(<span class="hljs-regexp">/"/g</span>, <span class="hljs-string">'&amp;quot;'</span>),
                    <span class="hljs-string">'"&gt;'</span>);
                addText(text);
                html.push(<span class="hljs-string">'&lt;/a&gt;'</span>);
            }
        };
    }]);
})(<span class="hljs-built_in">window</span>, <span class="hljs-built_in">window</span>.angular);;
<span class="hljs-comment">/*! RESOURCE: /scripts/angular_1.5.8/angular-animate.js */</span>
(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">window, angular</span>) </span>{
<span class="hljs-meta">    'use strict'</span>;
    <span class="hljs-keyword">var</span> ELEMENT_NODE = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">var</span> COMMENT_NODE = <span class="hljs-number">8</span>;
    <span class="hljs-keyword">var</span> ADD_CLASS_SUFFIX = <span class="hljs-string">'-add'</span>;
    <span class="hljs-keyword">var</span> REMOVE_CLASS_SUFFIX = <span class="hljs-string">'-remove'</span>;
    <span class="hljs-keyword">var</span> EVENT_CLASS_PREFIX = <span class="hljs-string">'ng-'</span>;
    <span class="hljs-keyword">var</span> ACTIVE_CLASS_SUFFIX = <span class="hljs-string">'-active'</span>;
    <span class="hljs-keyword">var</span> PREPARE_CLASS_SUFFIX = <span class="hljs-string">'-prepare'</span>;
    <span class="hljs-keyword">var</span> NG_ANIMATE_CLASSNAME = <span class="hljs-string">'ng-animate'</span>;
    <span class="hljs-keyword">var</span> NG_ANIMATE_CHILDREN_DATA = <span class="hljs-string">'$$ngAnimateChildren'</span>;
    <span class="hljs-keyword">var</span> CSS_PREFIX = <span class="hljs-string">''</span>,
        TRANSITION_PROP, TRANSITIONEND_EVENT, ANIMATION_PROP, ANIMATIONEND_EVENT;
    <span class="hljs-keyword">if</span> ((<span class="hljs-built_in">window</span>.ontransitionend === <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>) &amp;&amp; (<span class="hljs-built_in">window</span>.onwebkittransitionend !== <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)) {
        CSS_PREFIX = <span class="hljs-string">'-webkit-'</span>;
        TRANSITION_PROP = <span class="hljs-string">'WebkitTransition'</span>;
        TRANSITIONEND_EVENT = <span class="hljs-string">'webkitTransitionEnd transitionend'</span>;
    } <span class="hljs-keyword">else</span> {
        TRANSITION_PROP = <span class="hljs-string">'transition'</span>;
        TRANSITIONEND_EVENT = <span class="hljs-string">'transitionend'</span>;
    }
    <span class="hljs-keyword">if</span> ((<span class="hljs-built_in">window</span>.onanimationend === <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>) &amp;&amp; (<span class="hljs-built_in">window</span>.onwebkitanimationend !== <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)) {
        CSS_PREFIX = <span class="hljs-string">'-webkit-'</span>;
        ANIMATION_PROP = <span class="hljs-string">'WebkitAnimation'</span>;
        ANIMATIONEND_EVENT = <span class="hljs-string">'webkitAnimationEnd animationend'</span>;
    } <span class="hljs-keyword">else</span> {
        ANIMATION_PROP = <span class="hljs-string">'animation'</span>;
        ANIMATIONEND_EVENT = <span class="hljs-string">'animationend'</span>;
    }
    <span class="hljs-keyword">var</span> DURATION_KEY = <span class="hljs-string">'Duration'</span>;
    <span class="hljs-keyword">var</span> PROPERTY_KEY = <span class="hljs-string">'Property'</span>;
    <span class="hljs-keyword">var</span> DELAY_KEY = <span class="hljs-string">'Delay'</span>;
    <span class="hljs-keyword">var</span> TIMING_KEY = <span class="hljs-string">'TimingFunction'</span>;
    <span class="hljs-keyword">var</span> ANIMATION_ITERATION_COUNT_KEY = <span class="hljs-string">'IterationCount'</span>;
    <span class="hljs-keyword">var</span> ANIMATION_PLAYSTATE_KEY = <span class="hljs-string">'PlayState'</span>;
    <span class="hljs-keyword">var</span> SAFE_FAST_FORWARD_DURATION_VALUE = <span class="hljs-number">9999</span>;
    <span class="hljs-keyword">var</span> ANIMATION_DELAY_PROP = ANIMATION_PROP + DELAY_KEY;
    <span class="hljs-keyword">var</span> ANIMATION_DURATION_PROP = ANIMATION_PROP + DURATION_KEY;
    <span class="hljs-keyword">var</span> TRANSITION_DELAY_PROP = TRANSITION_PROP + DELAY_KEY;
    <span class="hljs-keyword">var</span> TRANSITION_DURATION_PROP = TRANSITION_PROP + DURATION_KEY;
    <span class="hljs-keyword">var</span> ngMinErr = angular.$$minErr(<span class="hljs-string">'ng'</span>);

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">assertArg</span>(<span class="hljs-params">arg, name, reason</span>) </span>{
        <span class="hljs-keyword">if</span> (!arg) {
            <span class="hljs-keyword">throw</span> ngMinErr(<span class="hljs-string">'areq'</span>, <span class="hljs-string">"Argument '{0}' is {1}"</span>, (name || <span class="hljs-string">'?'</span>), (reason || <span class="hljs-string">"required"</span>));
        }
        <span class="hljs-keyword">return</span> arg;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mergeClasses</span>(<span class="hljs-params">a, b</span>) </span>{
        <span class="hljs-keyword">if</span> (!a &amp;&amp; !b) <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
        <span class="hljs-keyword">if</span> (!a) <span class="hljs-keyword">return</span> b;
        <span class="hljs-keyword">if</span> (!b) <span class="hljs-keyword">return</span> a;
        <span class="hljs-keyword">if</span> (isArray(a)) a = a.join(<span class="hljs-string">' '</span>);
        <span class="hljs-keyword">if</span> (isArray(b)) b = b.join(<span class="hljs-string">' '</span>);
        <span class="hljs-keyword">return</span> a + <span class="hljs-string">' '</span> + b;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">packageStyles</span>(<span class="hljs-params">options</span>) </span>{
        <span class="hljs-keyword">var</span> styles = {};
        <span class="hljs-keyword">if</span> (options &amp;&amp; (options.to || options.from)) {
            styles.to = options.to;
            styles.from = options.from;
        }
        <span class="hljs-keyword">return</span> styles;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pendClasses</span>(<span class="hljs-params">classes, fix, isPrefix</span>) </span>{
        <span class="hljs-keyword">var</span> className = <span class="hljs-string">''</span>;
        classes = isArray(classes) ?
            classes :
            classes &amp;&amp; isString(classes) &amp;&amp; classes.length ?
            classes.split(<span class="hljs-regexp">/\s+/</span>) :
            [];
        forEach(classes, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">klass, i</span>) </span>{
            <span class="hljs-keyword">if</span> (klass &amp;&amp; klass.length &gt; <span class="hljs-number">0</span>) {
                className += (i &gt; <span class="hljs-number">0</span>) ? <span class="hljs-string">' '</span> : <span class="hljs-string">''</span>;
                className += isPrefix ? fix + klass :
                    klass + fix;
            }
        });
        <span class="hljs-keyword">return</span> className;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeFromArray</span>(<span class="hljs-params">arr, val</span>) </span>{
        <span class="hljs-keyword">var</span> index = arr.indexOf(val);
        <span class="hljs-keyword">if</span> (val &gt;= <span class="hljs-number">0</span>) {
            arr.splice(index, <span class="hljs-number">1</span>);
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stripCommentsFromElement</span>(<span class="hljs-params">element</span>) </span>{
        <span class="hljs-keyword">if</span> (element <span class="hljs-keyword">instanceof</span> jqLite) {
            <span class="hljs-keyword">switch</span> (element.length) {
                <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:
                    <span class="hljs-keyword">return</span> element;
                <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
                    <span class="hljs-keyword">if</span> (element[<span class="hljs-number">0</span>].nodeType === ELEMENT_NODE) {
                        <span class="hljs-keyword">return</span> element;
                    }
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">default</span>:
                    <span class="hljs-keyword">return</span> jqLite(extractElementNode(element));
            }
        }
        <span class="hljs-keyword">if</span> (element.nodeType === ELEMENT_NODE) {
            <span class="hljs-keyword">return</span> jqLite(element);
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">extractElementNode</span>(<span class="hljs-params">element</span>) </span>{
        <span class="hljs-keyword">if</span> (!element[<span class="hljs-number">0</span>]) <span class="hljs-keyword">return</span> element;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; element.length; i++) {
            <span class="hljs-keyword">var</span> elm = element[i];
            <span class="hljs-keyword">if</span> (elm.nodeType == ELEMENT_NODE) {
                <span class="hljs-keyword">return</span> elm;
            }
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$$addClass</span>(<span class="hljs-params">$$jqLite, element, className</span>) </span>{
        forEach(element, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">elm</span>) </span>{
            $$jqLite.addClass(elm, className);
        });
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$$removeClass</span>(<span class="hljs-params">$$jqLite, element, className</span>) </span>{
        forEach(element, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">elm</span>) </span>{
            $$jqLite.removeClass(elm, className);
        });
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">applyAnimationClassesFactory</span>(<span class="hljs-params">$$jqLite</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, options</span>) </span>{
            <span class="hljs-keyword">if</span> (options.addClass) {
                $$addClass($$jqLite, element, options.addClass);
                options.addClass = <span class="hljs-literal">null</span>;
            }
            <span class="hljs-keyword">if</span> (options.removeClass) {
                $$removeClass($$jqLite, element, options.removeClass);
                options.removeClass = <span class="hljs-literal">null</span>;
            }
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">prepareAnimationOptions</span>(<span class="hljs-params">options</span>) </span>{
        options = options || {};
        <span class="hljs-keyword">if</span> (!options.$$prepared) {
            <span class="hljs-keyword">var</span> domOperation = options.domOperation || noop;
            options.domOperation = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                options.$$domOperationFired = <span class="hljs-literal">true</span>;
                domOperation();
                domOperation = noop;
            };
            options.$$prepared = <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">return</span> options;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">applyAnimationStyles</span>(<span class="hljs-params">element, options</span>) </span>{
        applyAnimationFromStyles(element, options);
        applyAnimationToStyles(element, options);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">applyAnimationFromStyles</span>(<span class="hljs-params">element, options</span>) </span>{
        <span class="hljs-keyword">if</span> (options.from) {
            element.css(options.from);
            options.from = <span class="hljs-literal">null</span>;
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">applyAnimationToStyles</span>(<span class="hljs-params">element, options</span>) </span>{
        <span class="hljs-keyword">if</span> (options.to) {
            element.css(options.to);
            options.to = <span class="hljs-literal">null</span>;
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mergeAnimationDetails</span>(<span class="hljs-params">element, oldAnimation, newAnimation</span>) </span>{
        <span class="hljs-keyword">var</span> target = oldAnimation.options || {};
        <span class="hljs-keyword">var</span> newOptions = newAnimation.options || {};
        <span class="hljs-keyword">var</span> toAdd = (target.addClass || <span class="hljs-string">''</span>) + <span class="hljs-string">' '</span> + (newOptions.addClass || <span class="hljs-string">''</span>);
        <span class="hljs-keyword">var</span> toRemove = (target.removeClass || <span class="hljs-string">''</span>) + <span class="hljs-string">' '</span> + (newOptions.removeClass || <span class="hljs-string">''</span>);
        <span class="hljs-keyword">var</span> classes = resolveElementClasses(element.attr(<span class="hljs-string">'class'</span>), toAdd, toRemove);
        <span class="hljs-keyword">if</span> (newOptions.preparationClasses) {
            target.preparationClasses = concatWithSpace(newOptions.preparationClasses, target.preparationClasses);
            <span class="hljs-keyword">delete</span> newOptions.preparationClasses;
        }
        <span class="hljs-keyword">var</span> realDomOperation = target.domOperation !== noop ? target.domOperation : <span class="hljs-literal">null</span>;
        extend(target, newOptions);
        <span class="hljs-keyword">if</span> (realDomOperation) {
            target.domOperation = realDomOperation;
        }
        <span class="hljs-keyword">if</span> (classes.addClass) {
            target.addClass = classes.addClass;
        } <span class="hljs-keyword">else</span> {
            target.addClass = <span class="hljs-literal">null</span>;
        }
        <span class="hljs-keyword">if</span> (classes.removeClass) {
            target.removeClass = classes.removeClass;
        } <span class="hljs-keyword">else</span> {
            target.removeClass = <span class="hljs-literal">null</span>;
        }
        oldAnimation.addClass = target.addClass;
        oldAnimation.removeClass = target.removeClass;
        <span class="hljs-keyword">return</span> target;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resolveElementClasses</span>(<span class="hljs-params">existing, toAdd, toRemove</span>) </span>{
        <span class="hljs-keyword">var</span> ADD_CLASS = <span class="hljs-number">1</span>;
        <span class="hljs-keyword">var</span> REMOVE_CLASS = <span class="hljs-number">-1</span>;
        <span class="hljs-keyword">var</span> flags = {};
        existing = splitClassesToLookup(existing);
        toAdd = splitClassesToLookup(toAdd);
        forEach(toAdd, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, key</span>) </span>{
            flags[key] = ADD_CLASS;
        });
        toRemove = splitClassesToLookup(toRemove);
        forEach(toRemove, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, key</span>) </span>{
            flags[key] = flags[key] === ADD_CLASS ? <span class="hljs-literal">null</span> : REMOVE_CLASS;
        });
        <span class="hljs-keyword">var</span> classes = {
            <span class="hljs-attr">addClass</span>: <span class="hljs-string">''</span>,
            <span class="hljs-attr">removeClass</span>: <span class="hljs-string">''</span>
        };
        forEach(flags, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">val, klass</span>) </span>{
            <span class="hljs-keyword">var</span> prop, allow;
            <span class="hljs-keyword">if</span> (val === ADD_CLASS) {
                prop = <span class="hljs-string">'addClass'</span>;
                allow = !existing[klass] || existing[klass + REMOVE_CLASS_SUFFIX];
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (val === REMOVE_CLASS) {
                prop = <span class="hljs-string">'removeClass'</span>;
                allow = existing[klass] || existing[klass + ADD_CLASS_SUFFIX];
            }
            <span class="hljs-keyword">if</span> (allow) {
                <span class="hljs-keyword">if</span> (classes[prop].length) {
                    classes[prop] += <span class="hljs-string">' '</span>;
                }
                classes[prop] += klass;
            }
        });

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">splitClassesToLookup</span>(<span class="hljs-params">classes</span>) </span>{
            <span class="hljs-keyword">if</span> (isString(classes)) {
                classes = classes.split(<span class="hljs-string">' '</span>);
            }
            <span class="hljs-keyword">var</span> obj = {};
            forEach(classes, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">klass</span>) </span>{
                <span class="hljs-keyword">if</span> (klass.length) {
                    obj[klass] = <span class="hljs-literal">true</span>;
                }
            });
            <span class="hljs-keyword">return</span> obj;
        }
        <span class="hljs-keyword">return</span> classes;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getDomNode</span>(<span class="hljs-params">element</span>) </span>{
        <span class="hljs-keyword">return</span> (element <span class="hljs-keyword">instanceof</span> jqLite) ? element[<span class="hljs-number">0</span>] : element;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">applyGeneratedPreparationClasses</span>(<span class="hljs-params">element, event, options</span>) </span>{
        <span class="hljs-keyword">var</span> classes = <span class="hljs-string">''</span>;
        <span class="hljs-keyword">if</span> (event) {
            classes = pendClasses(event, EVENT_CLASS_PREFIX, <span class="hljs-literal">true</span>);
        }
        <span class="hljs-keyword">if</span> (options.addClass) {
            classes = concatWithSpace(classes, pendClasses(options.addClass, ADD_CLASS_SUFFIX));
        }
        <span class="hljs-keyword">if</span> (options.removeClass) {
            classes = concatWithSpace(classes, pendClasses(options.removeClass, REMOVE_CLASS_SUFFIX));
        }
        <span class="hljs-keyword">if</span> (classes.length) {
            options.preparationClasses = classes;
            element.addClass(classes);
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">clearGeneratedClasses</span>(<span class="hljs-params">element, options</span>) </span>{
        <span class="hljs-keyword">if</span> (options.preparationClasses) {
            element.removeClass(options.preparationClasses);
            options.preparationClasses = <span class="hljs-literal">null</span>;
        }
        <span class="hljs-keyword">if</span> (options.activeClasses) {
            element.removeClass(options.activeClasses);
            options.activeClasses = <span class="hljs-literal">null</span>;
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">blockTransitions</span>(<span class="hljs-params">node, duration</span>) </span>{
        <span class="hljs-keyword">var</span> value = duration ? <span class="hljs-string">'-'</span> + duration + <span class="hljs-string">'s'</span> : <span class="hljs-string">''</span>;
        applyInlineStyle(node, [TRANSITION_DELAY_PROP, value]);
        <span class="hljs-keyword">return</span> [TRANSITION_DELAY_PROP, value];
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">blockKeyframeAnimations</span>(<span class="hljs-params">node, applyBlock</span>) </span>{
        <span class="hljs-keyword">var</span> value = applyBlock ? <span class="hljs-string">'paused'</span> : <span class="hljs-string">''</span>;
        <span class="hljs-keyword">var</span> key = ANIMATION_PROP + ANIMATION_PLAYSTATE_KEY;
        applyInlineStyle(node, [key, value]);
        <span class="hljs-keyword">return</span> [key, value];
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">applyInlineStyle</span>(<span class="hljs-params">node, styleTuple</span>) </span>{
        <span class="hljs-keyword">var</span> prop = styleTuple[<span class="hljs-number">0</span>];
        <span class="hljs-keyword">var</span> value = styleTuple[<span class="hljs-number">1</span>];
        node.style[prop] = value;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">concatWithSpace</span>(<span class="hljs-params">a, b</span>) </span>{
        <span class="hljs-keyword">if</span> (!a) <span class="hljs-keyword">return</span> b;
        <span class="hljs-keyword">if</span> (!b) <span class="hljs-keyword">return</span> a;
        <span class="hljs-keyword">return</span> a + <span class="hljs-string">' '</span> + b;
    }
    <span class="hljs-keyword">var</span> $$rAFSchedulerFactory = [<span class="hljs-string">'$$rAF'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$$rAF</span>) </span>{
        <span class="hljs-keyword">var</span> queue, cancelFn;

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">scheduler</span>(<span class="hljs-params">tasks</span>) </span>{
            queue = queue.concat(tasks);
            nextTick();
        }
        queue = scheduler.queue = [];
        scheduler.waitUntilQuiet = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fn</span>) </span>{
            <span class="hljs-keyword">if</span> (cancelFn) cancelFn();
            cancelFn = $$rAF(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                cancelFn = <span class="hljs-literal">null</span>;
                fn();
                nextTick();
            });
        };
        <span class="hljs-keyword">return</span> scheduler;

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">nextTick</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">if</span> (!queue.length) <span class="hljs-keyword">return</span>;
            <span class="hljs-keyword">var</span> items = queue.shift();
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; items.length; i++) {
                items[i]();
            }
            <span class="hljs-keyword">if</span> (!cancelFn) {
                $$rAF(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">if</span> (!cancelFn) nextTick();
                });
            }
        }
    }];
    <span class="hljs-keyword">var</span> $$AnimateChildrenDirective = [<span class="hljs-string">'$interpolate'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$interpolate</span>) </span>{
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">link</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, element, attrs</span>) </span>{
                <span class="hljs-keyword">var</span> val = attrs.ngAnimateChildren;
                <span class="hljs-keyword">if</span> (isString(val) &amp;&amp; val.length === <span class="hljs-number">0</span>) {
                    element.data(NG_ANIMATE_CHILDREN_DATA, <span class="hljs-literal">true</span>);
                } <span class="hljs-keyword">else</span> {
                    setData($interpolate(val)(scope));
                    attrs.$observe(<span class="hljs-string">'ngAnimateChildren'</span>, setData);
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setData</span>(<span class="hljs-params">value</span>) </span>{
                    value = value === <span class="hljs-string">'on'</span> || value === <span class="hljs-string">'true'</span>;
                    element.data(NG_ANIMATE_CHILDREN_DATA, value);
                }
            }
        };
    }];
    <span class="hljs-keyword">var</span> ANIMATE_TIMER_KEY = <span class="hljs-string">'$$animateCss'</span>;
    <span class="hljs-keyword">var</span> ONE_SECOND = <span class="hljs-number">1000</span>;
    <span class="hljs-keyword">var</span> BASE_TEN = <span class="hljs-number">10</span>;
    <span class="hljs-keyword">var</span> ELAPSED_TIME_MAX_DECIMAL_PLACES = <span class="hljs-number">3</span>;
    <span class="hljs-keyword">var</span> CLOSING_TIME_BUFFER = <span class="hljs-number">1.5</span>;
    <span class="hljs-keyword">var</span> DETECT_CSS_PROPERTIES = {
        <span class="hljs-attr">transitionDuration</span>: TRANSITION_DURATION_PROP,
        <span class="hljs-attr">transitionDelay</span>: TRANSITION_DELAY_PROP,
        <span class="hljs-attr">transitionProperty</span>: TRANSITION_PROP + PROPERTY_KEY,
        <span class="hljs-attr">animationDuration</span>: ANIMATION_DURATION_PROP,
        <span class="hljs-attr">animationDelay</span>: ANIMATION_DELAY_PROP,
        <span class="hljs-attr">animationIterationCount</span>: ANIMATION_PROP + ANIMATION_ITERATION_COUNT_KEY
    };
    <span class="hljs-keyword">var</span> DETECT_STAGGER_CSS_PROPERTIES = {
        <span class="hljs-attr">transitionDuration</span>: TRANSITION_DURATION_PROP,
        <span class="hljs-attr">transitionDelay</span>: TRANSITION_DELAY_PROP,
        <span class="hljs-attr">animationDuration</span>: ANIMATION_DURATION_PROP,
        <span class="hljs-attr">animationDelay</span>: ANIMATION_DELAY_PROP
    };

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getCssKeyframeDurationStyle</span>(<span class="hljs-params">duration</span>) </span>{
        <span class="hljs-keyword">return</span> [ANIMATION_DURATION_PROP, duration + <span class="hljs-string">'s'</span>];
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getCssDelayStyle</span>(<span class="hljs-params">delay, isKeyframeAnimation</span>) </span>{
        <span class="hljs-keyword">var</span> prop = isKeyframeAnimation ? ANIMATION_DELAY_PROP : TRANSITION_DELAY_PROP;
        <span class="hljs-keyword">return</span> [prop, delay + <span class="hljs-string">'s'</span>];
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">computeCssStyles</span>(<span class="hljs-params">$window, element, properties</span>) </span>{
        <span class="hljs-keyword">var</span> styles = <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>);
        <span class="hljs-keyword">var</span> detectedStyles = $<span class="hljs-built_in">window</span>.getComputedStyle(element) || {};
        forEach(properties, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">formalStyleName, actualStyleName</span>) </span>{
            <span class="hljs-keyword">var</span> val = detectedStyles[formalStyleName];
            <span class="hljs-keyword">if</span> (val) {
                <span class="hljs-keyword">var</span> c = val.charAt(<span class="hljs-number">0</span>);
                <span class="hljs-keyword">if</span> (c === <span class="hljs-string">'-'</span> || c === <span class="hljs-string">'+'</span> || c &gt;= <span class="hljs-number">0</span>) {
                    val = parseMaxTime(val);
                }
                <span class="hljs-keyword">if</span> (val === <span class="hljs-number">0</span>) {
                    val = <span class="hljs-literal">null</span>;
                }
                styles[actualStyleName] = val;
            }
        });
        <span class="hljs-keyword">return</span> styles;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseMaxTime</span>(<span class="hljs-params">str</span>) </span>{
        <span class="hljs-keyword">var</span> maxValue = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">var</span> values = str.split(<span class="hljs-regexp">/\s*,\s*/</span>);
        forEach(values, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
            <span class="hljs-keyword">if</span> (value.charAt(value.length - <span class="hljs-number">1</span>) == <span class="hljs-string">'s'</span>) {
                value = value.substring(<span class="hljs-number">0</span>, value.length - <span class="hljs-number">1</span>);
            }
            value = <span class="hljs-built_in">parseFloat</span>(value) || <span class="hljs-number">0</span>;
            maxValue = maxValue ? <span class="hljs-built_in">Math</span>.max(value, maxValue) : value;
        });
        <span class="hljs-keyword">return</span> maxValue;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">truthyTimingValue</span>(<span class="hljs-params">val</span>) </span>{
        <span class="hljs-keyword">return</span> val === <span class="hljs-number">0</span> || val != <span class="hljs-literal">null</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getCssTransitionDurationStyle</span>(<span class="hljs-params">duration, applyOnlyDuration</span>) </span>{
        <span class="hljs-keyword">var</span> style = TRANSITION_PROP;
        <span class="hljs-keyword">var</span> value = duration + <span class="hljs-string">'s'</span>;
        <span class="hljs-keyword">if</span> (applyOnlyDuration) {
            style += DURATION_KEY;
        } <span class="hljs-keyword">else</span> {
            value += <span class="hljs-string">' linear all'</span>;
        }
        <span class="hljs-keyword">return</span> [style, value];
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createLocalCacheLookup</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> cache = <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>);
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">flush</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                cache = <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>);
            },
            <span class="hljs-attr">count</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key</span>) </span>{
                <span class="hljs-keyword">var</span> entry = cache[key];
                <span class="hljs-keyword">return</span> entry ? entry.total : <span class="hljs-number">0</span>;
            },
            <span class="hljs-attr">get</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key</span>) </span>{
                <span class="hljs-keyword">var</span> entry = cache[key];
                <span class="hljs-keyword">return</span> entry &amp;&amp; entry.value;
            },
            <span class="hljs-attr">put</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key, value</span>) </span>{
                <span class="hljs-keyword">if</span> (!cache[key]) {
                    cache[key] = {
                        <span class="hljs-attr">total</span>: <span class="hljs-number">1</span>,
                        <span class="hljs-attr">value</span>: value
                    };
                } <span class="hljs-keyword">else</span> {
                    cache[key].total++;
                }
            }
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">registerRestorableStyles</span>(<span class="hljs-params">backup, node, properties</span>) </span>{
        forEach(properties, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">prop</span>) </span>{
            backup[prop] = isDefined(backup[prop]) ?
                backup[prop] :
                node.style.getPropertyValue(prop);
        });
    }
    <span class="hljs-keyword">var</span> $AnimateCssProvider = [<span class="hljs-string">'$animateProvider'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$animateProvider</span>) </span>{
        <span class="hljs-keyword">var</span> gcsLookup = createLocalCacheLookup();
        <span class="hljs-keyword">var</span> gcsStaggerLookup = createLocalCacheLookup();
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$window'</span>, <span class="hljs-string">'$$jqLite'</span>, <span class="hljs-string">'$$AnimateRunner'</span>, <span class="hljs-string">'$timeout'</span>,
            <span class="hljs-string">'$$forceReflow'</span>, <span class="hljs-string">'$sniffer'</span>, <span class="hljs-string">'$$rAFScheduler'</span>, <span class="hljs-string">'$$animateQueue'</span>,
            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$window, $$jqLite, $$AnimateRunner, $timeout,
                $$forceReflow, $sniffer, $$rAFScheduler, $$animateQueue</span>) </span>{
                <span class="hljs-keyword">var</span> applyAnimationClasses = applyAnimationClassesFactory($$jqLite);
                <span class="hljs-keyword">var</span> parentCounter = <span class="hljs-number">0</span>;

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">gcsHashFn</span>(<span class="hljs-params">node, extraClasses</span>) </span>{
                    <span class="hljs-keyword">var</span> KEY = <span class="hljs-string">"$$ngAnimateParentKey"</span>;
                    <span class="hljs-keyword">var</span> parentNode = node.parentNode;
                    <span class="hljs-keyword">var</span> parentID = parentNode[KEY] || (parentNode[KEY] = ++parentCounter);
                    <span class="hljs-keyword">return</span> parentID + <span class="hljs-string">'-'</span> + node.getAttribute(<span class="hljs-string">'class'</span>) + <span class="hljs-string">'-'</span> + extraClasses;
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">computeCachedCssStyles</span>(<span class="hljs-params">node, className, cacheKey, properties</span>) </span>{
                    <span class="hljs-keyword">var</span> timings = gcsLookup.get(cacheKey);
                    <span class="hljs-keyword">if</span> (!timings) {
                        timings = computeCssStyles($<span class="hljs-built_in">window</span>, node, properties);
                        <span class="hljs-keyword">if</span> (timings.animationIterationCount === <span class="hljs-string">'infinite'</span>) {
                            timings.animationIterationCount = <span class="hljs-number">1</span>;
                        }
                    }
                    gcsLookup.put(cacheKey, timings);
                    <span class="hljs-keyword">return</span> timings;
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">computeCachedCssStaggerStyles</span>(<span class="hljs-params">node, className, cacheKey, properties</span>) </span>{
                    <span class="hljs-keyword">var</span> stagger;
                    <span class="hljs-keyword">if</span> (gcsLookup.count(cacheKey) &gt; <span class="hljs-number">0</span>) {
                        stagger = gcsStaggerLookup.get(cacheKey);
                        <span class="hljs-keyword">if</span> (!stagger) {
                            <span class="hljs-keyword">var</span> staggerClassName = pendClasses(className, <span class="hljs-string">'-stagger'</span>);
                            $$jqLite.addClass(node, staggerClassName);
                            stagger = computeCssStyles($<span class="hljs-built_in">window</span>, node, properties);
                            stagger.animationDuration = <span class="hljs-built_in">Math</span>.max(stagger.animationDuration, <span class="hljs-number">0</span>);
                            stagger.transitionDuration = <span class="hljs-built_in">Math</span>.max(stagger.transitionDuration, <span class="hljs-number">0</span>);
                            $$jqLite.removeClass(node, staggerClassName);
                            gcsStaggerLookup.put(cacheKey, stagger);
                        }
                    }
                    <span class="hljs-keyword">return</span> stagger || {};
                }
                <span class="hljs-keyword">var</span> cancelLastRAFRequest;
                <span class="hljs-keyword">var</span> rafWaitQueue = [];

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">waitUntilQuiet</span>(<span class="hljs-params">callback</span>) </span>{
                    rafWaitQueue.push(callback);
                    $$rAFScheduler.waitUntilQuiet(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        gcsLookup.flush();
                        gcsStaggerLookup.flush();
                        <span class="hljs-keyword">var</span> pageWidth = $$forceReflow();
                        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; rafWaitQueue.length; i++) {
                            rafWaitQueue[i](pageWidth);
                        }
                        rafWaitQueue.length = <span class="hljs-number">0</span>;
                    });
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">computeTimings</span>(<span class="hljs-params">node, className, cacheKey</span>) </span>{
                    <span class="hljs-keyword">var</span> timings = computeCachedCssStyles(node, className, cacheKey, DETECT_CSS_PROPERTIES);
                    <span class="hljs-keyword">var</span> aD = timings.animationDelay;
                    <span class="hljs-keyword">var</span> tD = timings.transitionDelay;
                    timings.maxDelay = aD &amp;&amp; tD ?
                        <span class="hljs-built_in">Math</span>.max(aD, tD) :
                        (aD || tD);
                    timings.maxDuration = <span class="hljs-built_in">Math</span>.max(
                        timings.animationDuration * timings.animationIterationCount,
                        timings.transitionDuration);
                    <span class="hljs-keyword">return</span> timings;
                }
                <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">init</span>(<span class="hljs-params">element, initialOptions</span>) </span>{
                    <span class="hljs-keyword">var</span> options = initialOptions || {};
                    <span class="hljs-keyword">if</span> (!options.$$prepared) {
                        options = prepareAnimationOptions(copy(options));
                    }
                    <span class="hljs-keyword">var</span> restoreStyles = {};
                    <span class="hljs-keyword">var</span> node = getDomNode(element);
                    <span class="hljs-keyword">if</span> (!node ||
                        !node.parentNode ||
                        !$$animateQueue.enabled()) {
                        <span class="hljs-keyword">return</span> closeAndReturnNoopAnimator();
                    }
                    <span class="hljs-keyword">var</span> temporaryStyles = [];
                    <span class="hljs-keyword">var</span> classes = element.attr(<span class="hljs-string">'class'</span>);
                    <span class="hljs-keyword">var</span> styles = packageStyles(options);
                    <span class="hljs-keyword">var</span> animationClosed;
                    <span class="hljs-keyword">var</span> animationPaused;
                    <span class="hljs-keyword">var</span> animationCompleted;
                    <span class="hljs-keyword">var</span> runner;
                    <span class="hljs-keyword">var</span> runnerHost;
                    <span class="hljs-keyword">var</span> maxDelay;
                    <span class="hljs-keyword">var</span> maxDelayTime;
                    <span class="hljs-keyword">var</span> maxDuration;
                    <span class="hljs-keyword">var</span> maxDurationTime;
                    <span class="hljs-keyword">var</span> startTime;
                    <span class="hljs-keyword">var</span> events = [];
                    <span class="hljs-keyword">if</span> (options.duration === <span class="hljs-number">0</span> || (!$sniffer.animations &amp;&amp; !$sniffer.transitions)) {
                        <span class="hljs-keyword">return</span> closeAndReturnNoopAnimator();
                    }
                    <span class="hljs-keyword">var</span> method = options.event &amp;&amp; isArray(options.event) ?
                        options.event.join(<span class="hljs-string">' '</span>) :
                        options.event;
                    <span class="hljs-keyword">var</span> isStructural = method &amp;&amp; options.structural;
                    <span class="hljs-keyword">var</span> structuralClassName = <span class="hljs-string">''</span>;
                    <span class="hljs-keyword">var</span> addRemoveClassName = <span class="hljs-string">''</span>;
                    <span class="hljs-keyword">if</span> (isStructural) {
                        structuralClassName = pendClasses(method, EVENT_CLASS_PREFIX, <span class="hljs-literal">true</span>);
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (method) {
                        structuralClassName = method;
                    }
                    <span class="hljs-keyword">if</span> (options.addClass) {
                        addRemoveClassName += pendClasses(options.addClass, ADD_CLASS_SUFFIX);
                    }
                    <span class="hljs-keyword">if</span> (options.removeClass) {
                        <span class="hljs-keyword">if</span> (addRemoveClassName.length) {
                            addRemoveClassName += <span class="hljs-string">' '</span>;
                        }
                        addRemoveClassName += pendClasses(options.removeClass, REMOVE_CLASS_SUFFIX);
                    }
                    <span class="hljs-keyword">if</span> (options.applyClassesEarly &amp;&amp; addRemoveClassName.length) {
                        applyAnimationClasses(element, options);
                    }
                    <span class="hljs-keyword">var</span> preparationClasses = [structuralClassName, addRemoveClassName].join(<span class="hljs-string">' '</span>).trim();
                    <span class="hljs-keyword">var</span> fullClassName = classes + <span class="hljs-string">' '</span> + preparationClasses;
                    <span class="hljs-keyword">var</span> activeClasses = pendClasses(preparationClasses, ACTIVE_CLASS_SUFFIX);
                    <span class="hljs-keyword">var</span> hasToStyles = styles.to &amp;&amp; <span class="hljs-built_in">Object</span>.keys(styles.to).length &gt; <span class="hljs-number">0</span>;
                    <span class="hljs-keyword">var</span> containsKeyframeAnimation = (options.keyframeStyle || <span class="hljs-string">''</span>).length &gt; <span class="hljs-number">0</span>;
                    <span class="hljs-keyword">if</span> (!containsKeyframeAnimation &amp;&amp;
                        !hasToStyles &amp;&amp;
                        !preparationClasses) {
                        <span class="hljs-keyword">return</span> closeAndReturnNoopAnimator();
                    }
                    <span class="hljs-keyword">var</span> cacheKey, stagger;
                    <span class="hljs-keyword">if</span> (options.stagger &gt; <span class="hljs-number">0</span>) {
                        <span class="hljs-keyword">var</span> staggerVal = <span class="hljs-built_in">parseFloat</span>(options.stagger);
                        stagger = {
                            <span class="hljs-attr">transitionDelay</span>: staggerVal,
                            <span class="hljs-attr">animationDelay</span>: staggerVal,
                            <span class="hljs-attr">transitionDuration</span>: <span class="hljs-number">0</span>,
                            <span class="hljs-attr">animationDuration</span>: <span class="hljs-number">0</span>
                        };
                    } <span class="hljs-keyword">else</span> {
                        cacheKey = gcsHashFn(node, fullClassName);
                        stagger = computeCachedCssStaggerStyles(node, preparationClasses, cacheKey, DETECT_STAGGER_CSS_PROPERTIES);
                    }
                    <span class="hljs-keyword">if</span> (!options.$$skipPreparationClasses) {
                        $$jqLite.addClass(element, preparationClasses);
                    }
                    <span class="hljs-keyword">var</span> applyOnlyDuration;
                    <span class="hljs-keyword">if</span> (options.transitionStyle) {
                        <span class="hljs-keyword">var</span> transitionStyle = [TRANSITION_PROP, options.transitionStyle];
                        applyInlineStyle(node, transitionStyle);
                        temporaryStyles.push(transitionStyle);
                    }
                    <span class="hljs-keyword">if</span> (options.duration &gt;= <span class="hljs-number">0</span>) {
                        applyOnlyDuration = node.style[TRANSITION_PROP].length &gt; <span class="hljs-number">0</span>;
                        <span class="hljs-keyword">var</span> durationStyle = getCssTransitionDurationStyle(options.duration, applyOnlyDuration);
                        applyInlineStyle(node, durationStyle);
                        temporaryStyles.push(durationStyle);
                    }
                    <span class="hljs-keyword">if</span> (options.keyframeStyle) {
                        <span class="hljs-keyword">var</span> keyframeStyle = [ANIMATION_PROP, options.keyframeStyle];
                        applyInlineStyle(node, keyframeStyle);
                        temporaryStyles.push(keyframeStyle);
                    }
                    <span class="hljs-keyword">var</span> itemIndex = stagger ?
                        options.staggerIndex &gt;= <span class="hljs-number">0</span> ?
                        options.staggerIndex :
                        gcsLookup.count(cacheKey) :
                        <span class="hljs-number">0</span>;
                    <span class="hljs-keyword">var</span> isFirst = itemIndex === <span class="hljs-number">0</span>;
                    <span class="hljs-keyword">if</span> (isFirst &amp;&amp; !options.skipBlocking) {
                        blockTransitions(node, SAFE_FAST_FORWARD_DURATION_VALUE);
                    }
                    <span class="hljs-keyword">var</span> timings = computeTimings(node, fullClassName, cacheKey);
                    <span class="hljs-keyword">var</span> relativeDelay = timings.maxDelay;
                    maxDelay = <span class="hljs-built_in">Math</span>.max(relativeDelay, <span class="hljs-number">0</span>);
                    maxDuration = timings.maxDuration;
                    <span class="hljs-keyword">var</span> flags = {};
                    flags.hasTransitions = timings.transitionDuration &gt; <span class="hljs-number">0</span>;
                    flags.hasAnimations = timings.animationDuration &gt; <span class="hljs-number">0</span>;
                    flags.hasTransitionAll = flags.hasTransitions &amp;&amp; timings.transitionProperty == <span class="hljs-string">'all'</span>;
                    flags.applyTransitionDuration = hasToStyles &amp;&amp; (
                        (flags.hasTransitions &amp;&amp; !flags.hasTransitionAll) ||
                        (flags.hasAnimations &amp;&amp; !flags.hasTransitions));
                    flags.applyAnimationDuration = options.duration &amp;&amp; flags.hasAnimations;
                    flags.applyTransitionDelay = truthyTimingValue(options.delay) &amp;&amp; (flags.applyTransitionDuration || flags.hasTransitions);
                    flags.applyAnimationDelay = truthyTimingValue(options.delay) &amp;&amp; flags.hasAnimations;
                    flags.recalculateTimingStyles = addRemoveClassName.length &gt; <span class="hljs-number">0</span>;
                    <span class="hljs-keyword">if</span> (flags.applyTransitionDuration || flags.applyAnimationDuration) {
                        maxDuration = options.duration ? <span class="hljs-built_in">parseFloat</span>(options.duration) : maxDuration;
                        <span class="hljs-keyword">if</span> (flags.applyTransitionDuration) {
                            flags.hasTransitions = <span class="hljs-literal">true</span>;
                            timings.transitionDuration = maxDuration;
                            applyOnlyDuration = node.style[TRANSITION_PROP + PROPERTY_KEY].length &gt; <span class="hljs-number">0</span>;
                            temporaryStyles.push(getCssTransitionDurationStyle(maxDuration, applyOnlyDuration));
                        }
                        <span class="hljs-keyword">if</span> (flags.applyAnimationDuration) {
                            flags.hasAnimations = <span class="hljs-literal">true</span>;
                            timings.animationDuration = maxDuration;
                            temporaryStyles.push(getCssKeyframeDurationStyle(maxDuration));
                        }
                    }
                    <span class="hljs-keyword">if</span> (maxDuration === <span class="hljs-number">0</span> &amp;&amp; !flags.recalculateTimingStyles) {
                        <span class="hljs-keyword">return</span> closeAndReturnNoopAnimator();
                    }
                    <span class="hljs-keyword">if</span> (options.delay != <span class="hljs-literal">null</span>) {
                        <span class="hljs-keyword">var</span> delayStyle;
                        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> options.delay !== <span class="hljs-string">"boolean"</span>) {
                            delayStyle = <span class="hljs-built_in">parseFloat</span>(options.delay);
                            maxDelay = <span class="hljs-built_in">Math</span>.max(delayStyle, <span class="hljs-number">0</span>);
                        }
                        <span class="hljs-keyword">if</span> (flags.applyTransitionDelay) {
                            temporaryStyles.push(getCssDelayStyle(delayStyle));
                        }
                        <span class="hljs-keyword">if</span> (flags.applyAnimationDelay) {
                            temporaryStyles.push(getCssDelayStyle(delayStyle, <span class="hljs-literal">true</span>));
                        }
                    }
                    <span class="hljs-keyword">if</span> (options.duration == <span class="hljs-literal">null</span> &amp;&amp; timings.transitionDuration &gt; <span class="hljs-number">0</span>) {
                        flags.recalculateTimingStyles = flags.recalculateTimingStyles || isFirst;
                    }
                    maxDelayTime = maxDelay * ONE_SECOND;
                    maxDurationTime = maxDuration * ONE_SECOND;
                    <span class="hljs-keyword">if</span> (!options.skipBlocking) {
                        flags.blockTransition = timings.transitionDuration &gt; <span class="hljs-number">0</span>;
                        flags.blockKeyframeAnimation = timings.animationDuration &gt; <span class="hljs-number">0</span> &amp;&amp;
                            stagger.animationDelay &gt; <span class="hljs-number">0</span> &amp;&amp;
                            stagger.animationDuration === <span class="hljs-number">0</span>;
                    }
                    <span class="hljs-keyword">if</span> (options.from) {
                        <span class="hljs-keyword">if</span> (options.cleanupStyles) {
                            registerRestorableStyles(restoreStyles, node, <span class="hljs-built_in">Object</span>.keys(options.from));
                        }
                        applyAnimationFromStyles(element, options);
                    }
                    <span class="hljs-keyword">if</span> (flags.blockTransition || flags.blockKeyframeAnimation) {
                        applyBlocking(maxDuration);
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!options.skipBlocking) {
                        blockTransitions(node, <span class="hljs-literal">false</span>);
                    }
                    <span class="hljs-keyword">return</span> {
                        <span class="hljs-attr">$$willAnimate</span>: <span class="hljs-literal">true</span>,
                        <span class="hljs-attr">end</span>: endFn,
                        <span class="hljs-attr">start</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            <span class="hljs-keyword">if</span> (animationClosed) <span class="hljs-keyword">return</span>;
                            runnerHost = {
                                <span class="hljs-attr">end</span>: endFn,
                                <span class="hljs-attr">cancel</span>: cancelFn,
                                <span class="hljs-attr">resume</span>: <span class="hljs-literal">null</span>,
                                <span class="hljs-attr">pause</span>: <span class="hljs-literal">null</span>
                            };
                            runner = <span class="hljs-keyword">new</span> $$AnimateRunner(runnerHost);
                            waitUntilQuiet(start);
                            <span class="hljs-keyword">return</span> runner;
                        }
                    };

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">endFn</span>(<span class="hljs-params"></span>) </span>{
                        close();
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cancelFn</span>(<span class="hljs-params"></span>) </span>{
                        close(<span class="hljs-literal">true</span>);
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">close</span>(<span class="hljs-params">rejected</span>) </span>{
                        <span class="hljs-keyword">if</span> (animationClosed || (animationCompleted &amp;&amp; animationPaused)) <span class="hljs-keyword">return</span>;
                        animationClosed = <span class="hljs-literal">true</span>;
                        animationPaused = <span class="hljs-literal">false</span>;
                        <span class="hljs-keyword">if</span> (!options.$$skipPreparationClasses) {
                            $$jqLite.removeClass(element, preparationClasses);
                        }
                        $$jqLite.removeClass(element, activeClasses);
                        blockKeyframeAnimations(node, <span class="hljs-literal">false</span>);
                        blockTransitions(node, <span class="hljs-literal">false</span>);
                        forEach(temporaryStyles, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">entry</span>) </span>{
                            node.style[entry[<span class="hljs-number">0</span>]] = <span class="hljs-string">''</span>;
                        });
                        applyAnimationClasses(element, options);
                        applyAnimationStyles(element, options);
                        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Object</span>.keys(restoreStyles).length) {
                            forEach(restoreStyles, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, prop</span>) </span>{
                                value ? node.style.setProperty(prop, value) :
                                    node.style.removeProperty(prop);
                            });
                        }
                        <span class="hljs-keyword">if</span> (options.onDone) {
                            options.onDone();
                        }
                        <span class="hljs-keyword">if</span> (events &amp;&amp; events.length) {
                            element.off(events.join(<span class="hljs-string">' '</span>), onAnimationProgress);
                        }
                        <span class="hljs-keyword">var</span> animationTimerData = element.data(ANIMATE_TIMER_KEY);
                        <span class="hljs-keyword">if</span> (animationTimerData) {
                            $timeout.cancel(animationTimerData[<span class="hljs-number">0</span>].timer);
                            element.removeData(ANIMATE_TIMER_KEY);
                        }
                        <span class="hljs-keyword">if</span> (runner) {
                            runner.complete(!rejected);
                        }
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">applyBlocking</span>(<span class="hljs-params">duration</span>) </span>{
                        <span class="hljs-keyword">if</span> (flags.blockTransition) {
                            blockTransitions(node, duration);
                        }
                        <span class="hljs-keyword">if</span> (flags.blockKeyframeAnimation) {
                            blockKeyframeAnimations(node, !!duration);
                        }
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">closeAndReturnNoopAnimator</span>(<span class="hljs-params"></span>) </span>{
                        runner = <span class="hljs-keyword">new</span> $$AnimateRunner({
                            <span class="hljs-attr">end</span>: endFn,
                            <span class="hljs-attr">cancel</span>: cancelFn
                        });
                        waitUntilQuiet(noop);
                        close();
                        <span class="hljs-keyword">return</span> {
                            <span class="hljs-attr">$$willAnimate</span>: <span class="hljs-literal">false</span>,
                            <span class="hljs-attr">start</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                                <span class="hljs-keyword">return</span> runner;
                            },
                            <span class="hljs-attr">end</span>: endFn
                        };
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onAnimationProgress</span>(<span class="hljs-params">event</span>) </span>{
                        event.stopPropagation();
                        <span class="hljs-keyword">var</span> ev = event.originalEvent || event;
                        <span class="hljs-keyword">var</span> timeStamp = ev.$manualTimeStamp || <span class="hljs-built_in">Date</span>.now();
                        <span class="hljs-keyword">var</span> elapsedTime = <span class="hljs-built_in">parseFloat</span>(ev.elapsedTime.toFixed(ELAPSED_TIME_MAX_DECIMAL_PLACES));
                        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Math</span>.max(timeStamp - startTime, <span class="hljs-number">0</span>) &gt;= maxDelayTime &amp;&amp; elapsedTime &gt;= maxDuration) {
                            animationCompleted = <span class="hljs-literal">true</span>;
                            close();
                        }
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">start</span>(<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">if</span> (animationClosed) <span class="hljs-keyword">return</span>;
                        <span class="hljs-keyword">if</span> (!node.parentNode) {
                            close();
                            <span class="hljs-keyword">return</span>;
                        }
                        <span class="hljs-keyword">var</span> playPause = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">playAnimation</span>) </span>{
                            <span class="hljs-keyword">if</span> (!animationCompleted) {
                                animationPaused = !playAnimation;
                                <span class="hljs-keyword">if</span> (timings.animationDuration) {
                                    <span class="hljs-keyword">var</span> value = blockKeyframeAnimations(node, animationPaused);
                                    animationPaused
                                        ?
                                        temporaryStyles.push(value) :
                                        removeFromArray(temporaryStyles, value);
                                }
                            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (animationPaused &amp;&amp; playAnimation) {
                                animationPaused = <span class="hljs-literal">false</span>;
                                close();
                            }
                        };
                        <span class="hljs-keyword">var</span> maxStagger = itemIndex &gt; <span class="hljs-number">0</span> &amp;&amp;
                            ((timings.transitionDuration &amp;&amp; stagger.transitionDuration === <span class="hljs-number">0</span>) ||
                                (timings.animationDuration &amp;&amp; stagger.animationDuration === <span class="hljs-number">0</span>)) &amp;&amp;
                            <span class="hljs-built_in">Math</span>.max(stagger.animationDelay, stagger.transitionDelay);
                        <span class="hljs-keyword">if</span> (maxStagger) {
                            $timeout(triggerAnimationStart,
                                <span class="hljs-built_in">Math</span>.floor(maxStagger * itemIndex * ONE_SECOND),
                                <span class="hljs-literal">false</span>);
                        } <span class="hljs-keyword">else</span> {
                            triggerAnimationStart();
                        }
                        runnerHost.resume = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            playPause(<span class="hljs-literal">true</span>);
                        };
                        runnerHost.pause = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            playPause(<span class="hljs-literal">false</span>);
                        };

                        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">triggerAnimationStart</span>(<span class="hljs-params"></span>) </span>{
                            <span class="hljs-keyword">if</span> (animationClosed) <span class="hljs-keyword">return</span>;
                            applyBlocking(<span class="hljs-literal">false</span>);
                            forEach(temporaryStyles, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">entry</span>) </span>{
                                <span class="hljs-keyword">var</span> key = entry[<span class="hljs-number">0</span>];
                                <span class="hljs-keyword">var</span> value = entry[<span class="hljs-number">1</span>];
                                node.style[key] = value;
                            });
                            applyAnimationClasses(element, options);
                            $$jqLite.addClass(element, activeClasses);
                            <span class="hljs-keyword">if</span> (flags.recalculateTimingStyles) {
                                fullClassName = node.className + <span class="hljs-string">' '</span> + preparationClasses;
                                cacheKey = gcsHashFn(node, fullClassName);
                                timings = computeTimings(node, fullClassName, cacheKey);
                                relativeDelay = timings.maxDelay;
                                maxDelay = <span class="hljs-built_in">Math</span>.max(relativeDelay, <span class="hljs-number">0</span>);
                                maxDuration = timings.maxDuration;
                                <span class="hljs-keyword">if</span> (maxDuration === <span class="hljs-number">0</span>) {
                                    close();
                                    <span class="hljs-keyword">return</span>;
                                }
                                flags.hasTransitions = timings.transitionDuration &gt; <span class="hljs-number">0</span>;
                                flags.hasAnimations = timings.animationDuration &gt; <span class="hljs-number">0</span>;
                            }
                            <span class="hljs-keyword">if</span> (flags.applyAnimationDelay) {
                                relativeDelay = <span class="hljs-keyword">typeof</span> options.delay !== <span class="hljs-string">"boolean"</span> &amp;&amp; truthyTimingValue(options.delay) ?
                                    <span class="hljs-built_in">parseFloat</span>(options.delay) :
                                    relativeDelay;
                                maxDelay = <span class="hljs-built_in">Math</span>.max(relativeDelay, <span class="hljs-number">0</span>);
                                timings.animationDelay = relativeDelay;
                                delayStyle = getCssDelayStyle(relativeDelay, <span class="hljs-literal">true</span>);
                                temporaryStyles.push(delayStyle);
                                node.style[delayStyle[<span class="hljs-number">0</span>]] = delayStyle[<span class="hljs-number">1</span>];
                            }
                            maxDelayTime = maxDelay * ONE_SECOND;
                            maxDurationTime = maxDuration * ONE_SECOND;
                            <span class="hljs-keyword">if</span> (options.easing) {
                                <span class="hljs-keyword">var</span> easeProp, easeVal = options.easing;
                                <span class="hljs-keyword">if</span> (flags.hasTransitions) {
                                    easeProp = TRANSITION_PROP + TIMING_KEY;
                                    temporaryStyles.push([easeProp, easeVal]);
                                    node.style[easeProp] = easeVal;
                                }
                                <span class="hljs-keyword">if</span> (flags.hasAnimations) {
                                    easeProp = ANIMATION_PROP + TIMING_KEY;
                                    temporaryStyles.push([easeProp, easeVal]);
                                    node.style[easeProp] = easeVal;
                                }
                            }
                            <span class="hljs-keyword">if</span> (timings.transitionDuration) {
                                events.push(TRANSITIONEND_EVENT);
                            }
                            <span class="hljs-keyword">if</span> (timings.animationDuration) {
                                events.push(ANIMATIONEND_EVENT);
                            }
                            startTime = <span class="hljs-built_in">Date</span>.now();
                            <span class="hljs-keyword">var</span> timerTime = maxDelayTime + CLOSING_TIME_BUFFER * maxDurationTime;
                            <span class="hljs-keyword">var</span> endTime = startTime + timerTime;
                            <span class="hljs-keyword">var</span> animationsData = element.data(ANIMATE_TIMER_KEY) || [];
                            <span class="hljs-keyword">var</span> setupFallbackTimer = <span class="hljs-literal">true</span>;
                            <span class="hljs-keyword">if</span> (animationsData.length) {
                                <span class="hljs-keyword">var</span> currentTimerData = animationsData[<span class="hljs-number">0</span>];
                                setupFallbackTimer = endTime &gt; currentTimerData.expectedEndTime;
                                <span class="hljs-keyword">if</span> (setupFallbackTimer) {
                                    $timeout.cancel(currentTimerData.timer);
                                } <span class="hljs-keyword">else</span> {
                                    animationsData.push(close);
                                }
                            }
                            <span class="hljs-keyword">if</span> (setupFallbackTimer) {
                                <span class="hljs-keyword">var</span> timer = $timeout(onAnimationExpired, timerTime, <span class="hljs-literal">false</span>);
                                animationsData[<span class="hljs-number">0</span>] = {
                                    <span class="hljs-attr">timer</span>: timer,
                                    <span class="hljs-attr">expectedEndTime</span>: endTime
                                };
                                animationsData.push(close);
                                element.data(ANIMATE_TIMER_KEY, animationsData);
                            }
                            <span class="hljs-keyword">if</span> (events.length) {
                                element.on(events.join(<span class="hljs-string">' '</span>), onAnimationProgress);
                            }
                            <span class="hljs-keyword">if</span> (options.to) {
                                <span class="hljs-keyword">if</span> (options.cleanupStyles) {
                                    registerRestorableStyles(restoreStyles, node, <span class="hljs-built_in">Object</span>.keys(options.to));
                                }
                                applyAnimationToStyles(element, options);
                            }
                        }

                        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onAnimationExpired</span>(<span class="hljs-params"></span>) </span>{
                            <span class="hljs-keyword">var</span> animationsData = element.data(ANIMATE_TIMER_KEY);
                            <span class="hljs-keyword">if</span> (animationsData) {
                                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>; i &lt; animationsData.length; i++) {
                                    animationsData[i]();
                                }
                                element.removeData(ANIMATE_TIMER_KEY);
                            }
                        }
                    }
                };
            }
        ];
    }];
    <span class="hljs-keyword">var</span> $$AnimateCssDriverProvider = [<span class="hljs-string">'$$animationProvider'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$$animationProvider</span>) </span>{
        $$animationProvider.drivers.push(<span class="hljs-string">'$$animateCssDriver'</span>);
        <span class="hljs-keyword">var</span> NG_ANIMATE_SHIM_CLASS_NAME = <span class="hljs-string">'ng-animate-shim'</span>;
        <span class="hljs-keyword">var</span> NG_ANIMATE_ANCHOR_CLASS_NAME = <span class="hljs-string">'ng-anchor'</span>;
        <span class="hljs-keyword">var</span> NG_OUT_ANCHOR_CLASS_NAME = <span class="hljs-string">'ng-anchor-out'</span>;
        <span class="hljs-keyword">var</span> NG_IN_ANCHOR_CLASS_NAME = <span class="hljs-string">'ng-anchor-in'</span>;

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isDocumentFragment</span>(<span class="hljs-params">node</span>) </span>{
            <span class="hljs-keyword">return</span> node.parentNode &amp;&amp; node.parentNode.nodeType === <span class="hljs-number">11</span>;
        }
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$animateCss'</span>, <span class="hljs-string">'$rootScope'</span>, <span class="hljs-string">'$$AnimateRunner'</span>, <span class="hljs-string">'$rootElement'</span>, <span class="hljs-string">'$sniffer'</span>, <span class="hljs-string">'$$jqLite'</span>, <span class="hljs-string">'$document'</span>,
            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$animateCss, $rootScope, $$AnimateRunner, $rootElement, $sniffer, $$jqLite, $document</span>) </span>{
                <span class="hljs-keyword">if</span> (!$sniffer.animations &amp;&amp; !$sniffer.transitions) <span class="hljs-keyword">return</span> noop;
                <span class="hljs-keyword">var</span> bodyNode = $<span class="hljs-built_in">document</span>[<span class="hljs-number">0</span>].body;
                <span class="hljs-keyword">var</span> rootNode = getDomNode($rootElement);
                <span class="hljs-keyword">var</span> rootBodyElement = jqLite(
                    isDocumentFragment(rootNode) || bodyNode.contains(rootNode) ? rootNode : bodyNode
                );
                <span class="hljs-keyword">var</span> applyAnimationClasses = applyAnimationClassesFactory($$jqLite);
                <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">initDriverFn</span>(<span class="hljs-params">animationDetails</span>) </span>{
                    <span class="hljs-keyword">return</span> animationDetails.from &amp;&amp; animationDetails.to ?
                        prepareFromToAnchorAnimation(animationDetails.from,
                            animationDetails.to,
                            animationDetails.classes,
                            animationDetails.anchors) :
                        prepareRegularAnimation(animationDetails);
                };

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">filterCssClasses</span>(<span class="hljs-params">classes</span>) </span>{
                    <span class="hljs-keyword">return</span> classes.replace(<span class="hljs-regexp">/\bng-\S+\b/g</span>, <span class="hljs-string">''</span>);
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUniqueValues</span>(<span class="hljs-params">a, b</span>) </span>{
                    <span class="hljs-keyword">if</span> (isString(a)) a = a.split(<span class="hljs-string">' '</span>);
                    <span class="hljs-keyword">if</span> (isString(b)) b = b.split(<span class="hljs-string">' '</span>);
                    <span class="hljs-keyword">return</span> a.filter(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">val</span>) </span>{
                        <span class="hljs-keyword">return</span> b.indexOf(val) === <span class="hljs-number">-1</span>;
                    }).join(<span class="hljs-string">' '</span>);
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">prepareAnchoredAnimation</span>(<span class="hljs-params">classes, outAnchor, inAnchor</span>) </span>{
                    <span class="hljs-keyword">var</span> clone = jqLite(getDomNode(outAnchor).cloneNode(<span class="hljs-literal">true</span>));
                    <span class="hljs-keyword">var</span> startingClasses = filterCssClasses(getClassVal(clone));
                    outAnchor.addClass(NG_ANIMATE_SHIM_CLASS_NAME);
                    inAnchor.addClass(NG_ANIMATE_SHIM_CLASS_NAME);
                    clone.addClass(NG_ANIMATE_ANCHOR_CLASS_NAME);
                    rootBodyElement.append(clone);
                    <span class="hljs-keyword">var</span> animatorIn, animatorOut = prepareOutAnimation();
                    <span class="hljs-keyword">if</span> (!animatorOut) {
                        animatorIn = prepareInAnimation();
                        <span class="hljs-keyword">if</span> (!animatorIn) {
                            <span class="hljs-keyword">return</span> end();
                        }
                    }
                    <span class="hljs-keyword">var</span> startingAnimator = animatorOut || animatorIn;
                    <span class="hljs-keyword">return</span> {
                        <span class="hljs-attr">start</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            <span class="hljs-keyword">var</span> runner;
                            <span class="hljs-keyword">var</span> currentAnimation = startingAnimator.start();
                            currentAnimation.done(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                                currentAnimation = <span class="hljs-literal">null</span>;
                                <span class="hljs-keyword">if</span> (!animatorIn) {
                                    animatorIn = prepareInAnimation();
                                    <span class="hljs-keyword">if</span> (animatorIn) {
                                        currentAnimation = animatorIn.start();
                                        currentAnimation.done(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                                            currentAnimation = <span class="hljs-literal">null</span>;
                                            end();
                                            runner.complete();
                                        });
                                        <span class="hljs-keyword">return</span> currentAnimation;
                                    }
                                }
                                end();
                                runner.complete();
                            });
                            runner = <span class="hljs-keyword">new</span> $$AnimateRunner({
                                <span class="hljs-attr">end</span>: endFn,
                                <span class="hljs-attr">cancel</span>: endFn
                            });
                            <span class="hljs-keyword">return</span> runner;

                            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">endFn</span>(<span class="hljs-params"></span>) </span>{
                                <span class="hljs-keyword">if</span> (currentAnimation) {
                                    currentAnimation.end();
                                }
                            }
                        }
                    };

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">calculateAnchorStyles</span>(<span class="hljs-params">anchor</span>) </span>{
                        <span class="hljs-keyword">var</span> styles = {};
                        <span class="hljs-keyword">var</span> coords = getDomNode(anchor).getBoundingClientRect();
                        forEach([<span class="hljs-string">'width'</span>, <span class="hljs-string">'height'</span>, <span class="hljs-string">'top'</span>, <span class="hljs-string">'left'</span>], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key</span>) </span>{
                            <span class="hljs-keyword">var</span> value = coords[key];
                            <span class="hljs-keyword">switch</span> (key) {
                                <span class="hljs-keyword">case</span> <span class="hljs-string">'top'</span>:
                                    value += bodyNode.scrollTop;
                                    <span class="hljs-keyword">break</span>;
                                <span class="hljs-keyword">case</span> <span class="hljs-string">'left'</span>:
                                    value += bodyNode.scrollLeft;
                                    <span class="hljs-keyword">break</span>;
                            }
                            styles[key] = <span class="hljs-built_in">Math</span>.floor(value) + <span class="hljs-string">'px'</span>;
                        });
                        <span class="hljs-keyword">return</span> styles;
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">prepareOutAnimation</span>(<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">var</span> animator = $animateCss(clone, {
                            <span class="hljs-attr">addClass</span>: NG_OUT_ANCHOR_CLASS_NAME,
                            <span class="hljs-attr">delay</span>: <span class="hljs-literal">true</span>,
                            <span class="hljs-attr">from</span>: calculateAnchorStyles(outAnchor)
                        });
                        <span class="hljs-keyword">return</span> animator.$$willAnimate ? animator : <span class="hljs-literal">null</span>;
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getClassVal</span>(<span class="hljs-params">element</span>) </span>{
                        <span class="hljs-keyword">return</span> element.attr(<span class="hljs-string">'class'</span>) || <span class="hljs-string">''</span>;
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">prepareInAnimation</span>(<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">var</span> endingClasses = filterCssClasses(getClassVal(inAnchor));
                        <span class="hljs-keyword">var</span> toAdd = getUniqueValues(endingClasses, startingClasses);
                        <span class="hljs-keyword">var</span> toRemove = getUniqueValues(startingClasses, endingClasses);
                        <span class="hljs-keyword">var</span> animator = $animateCss(clone, {
                            <span class="hljs-attr">to</span>: calculateAnchorStyles(inAnchor),
                            <span class="hljs-attr">addClass</span>: NG_IN_ANCHOR_CLASS_NAME + <span class="hljs-string">' '</span> + toAdd,
                            <span class="hljs-attr">removeClass</span>: NG_OUT_ANCHOR_CLASS_NAME + <span class="hljs-string">' '</span> + toRemove,
                            <span class="hljs-attr">delay</span>: <span class="hljs-literal">true</span>
                        });
                        <span class="hljs-keyword">return</span> animator.$$willAnimate ? animator : <span class="hljs-literal">null</span>;
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">end</span>(<span class="hljs-params"></span>) </span>{
                        clone.remove();
                        outAnchor.removeClass(NG_ANIMATE_SHIM_CLASS_NAME);
                        inAnchor.removeClass(NG_ANIMATE_SHIM_CLASS_NAME);
                    }
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">prepareFromToAnchorAnimation</span>(<span class="hljs-params">from, to, classes, anchors</span>) </span>{
                    <span class="hljs-keyword">var</span> fromAnimation = prepareRegularAnimation(<span class="hljs-keyword">from</span>, noop);
                    <span class="hljs-keyword">var</span> toAnimation = prepareRegularAnimation(to, noop);
                    <span class="hljs-keyword">var</span> anchorAnimations = [];
                    forEach(anchors, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">anchor</span>) </span>{
                        <span class="hljs-keyword">var</span> outElement = anchor[<span class="hljs-string">'out'</span>];
                        <span class="hljs-keyword">var</span> inElement = anchor[<span class="hljs-string">'in'</span>];
                        <span class="hljs-keyword">var</span> animator = prepareAnchoredAnimation(classes, outElement, inElement);
                        <span class="hljs-keyword">if</span> (animator) {
                            anchorAnimations.push(animator);
                        }
                    });
                    <span class="hljs-keyword">if</span> (!fromAnimation &amp;&amp; !toAnimation &amp;&amp; anchorAnimations.length === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;
                    <span class="hljs-keyword">return</span> {
                        <span class="hljs-attr">start</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            <span class="hljs-keyword">var</span> animationRunners = [];
                            <span class="hljs-keyword">if</span> (fromAnimation) {
                                animationRunners.push(fromAnimation.start());
                            }
                            <span class="hljs-keyword">if</span> (toAnimation) {
                                animationRunners.push(toAnimation.start());
                            }
                            forEach(anchorAnimations, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">animation</span>) </span>{
                                animationRunners.push(animation.start());
                            });
                            <span class="hljs-keyword">var</span> runner = <span class="hljs-keyword">new</span> $$AnimateRunner({
                                <span class="hljs-attr">end</span>: endFn,
                                <span class="hljs-attr">cancel</span>: endFn
                            });
                            $$AnimateRunner.all(animationRunners, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">status</span>) </span>{
                                runner.complete(status);
                            });
                            <span class="hljs-keyword">return</span> runner;

                            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">endFn</span>(<span class="hljs-params"></span>) </span>{
                                forEach(animationRunners, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">runner</span>) </span>{
                                    runner.end();
                                });
                            }
                        }
                    };
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">prepareRegularAnimation</span>(<span class="hljs-params">animationDetails</span>) </span>{
                    <span class="hljs-keyword">var</span> element = animationDetails.element;
                    <span class="hljs-keyword">var</span> options = animationDetails.options || {};
                    <span class="hljs-keyword">if</span> (animationDetails.structural) {
                        options.event = animationDetails.event;
                        options.structural = <span class="hljs-literal">true</span>;
                        options.applyClassesEarly = <span class="hljs-literal">true</span>;
                        <span class="hljs-keyword">if</span> (animationDetails.event === <span class="hljs-string">'leave'</span>) {
                            options.onDone = options.domOperation;
                        }
                    }
                    <span class="hljs-keyword">if</span> (options.preparationClasses) {
                        options.event = concatWithSpace(options.event, options.preparationClasses);
                    }
                    <span class="hljs-keyword">var</span> animator = $animateCss(element, options);
                    <span class="hljs-keyword">return</span> animator.$$willAnimate ? animator : <span class="hljs-literal">null</span>;
                }
            }
        ];
    }];
    <span class="hljs-keyword">var</span> $$AnimateJsProvider = [<span class="hljs-string">'$animateProvider'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$animateProvider</span>) </span>{
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$injector'</span>, <span class="hljs-string">'$$AnimateRunner'</span>, <span class="hljs-string">'$$jqLite'</span>,
            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$injector, $$AnimateRunner, $$jqLite</span>) </span>{
                <span class="hljs-keyword">var</span> applyAnimationClasses = applyAnimationClassesFactory($$jqLite);
                <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, event, classes, options</span>) </span>{
                    <span class="hljs-keyword">var</span> animationClosed = <span class="hljs-literal">false</span>;
                    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">arguments</span>.length === <span class="hljs-number">3</span> &amp;&amp; isObject(classes)) {
                        options = classes;
                        classes = <span class="hljs-literal">null</span>;
                    }
                    options = prepareAnimationOptions(options);
                    <span class="hljs-keyword">if</span> (!classes) {
                        classes = element.attr(<span class="hljs-string">'class'</span>) || <span class="hljs-string">''</span>;
                        <span class="hljs-keyword">if</span> (options.addClass) {
                            classes += <span class="hljs-string">' '</span> + options.addClass;
                        }
                        <span class="hljs-keyword">if</span> (options.removeClass) {
                            classes += <span class="hljs-string">' '</span> + options.removeClass;
                        }
                    }
                    <span class="hljs-keyword">var</span> classesToAdd = options.addClass;
                    <span class="hljs-keyword">var</span> classesToRemove = options.removeClass;
                    <span class="hljs-keyword">var</span> animations = lookupAnimations(classes);
                    <span class="hljs-keyword">var</span> before, after;
                    <span class="hljs-keyword">if</span> (animations.length) {
                        <span class="hljs-keyword">var</span> afterFn, beforeFn;
                        <span class="hljs-keyword">if</span> (event == <span class="hljs-string">'leave'</span>) {
                            beforeFn = <span class="hljs-string">'leave'</span>;
                            afterFn = <span class="hljs-string">'afterLeave'</span>;
                        } <span class="hljs-keyword">else</span> {
                            beforeFn = <span class="hljs-string">'before'</span> + event.charAt(<span class="hljs-number">0</span>).toUpperCase() + event.substr(<span class="hljs-number">1</span>);
                            afterFn = event;
                        }
                        <span class="hljs-keyword">if</span> (event !== <span class="hljs-string">'enter'</span> &amp;&amp; event !== <span class="hljs-string">'move'</span>) {
                            before = packageAnimations(element, event, options, animations, beforeFn);
                        }
                        after = packageAnimations(element, event, options, animations, afterFn);
                    }
                    <span class="hljs-keyword">if</span> (!before &amp;&amp; !after) <span class="hljs-keyword">return</span>;

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">applyOptions</span>(<span class="hljs-params"></span>) </span>{
                        options.domOperation();
                        applyAnimationClasses(element, options);
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">close</span>(<span class="hljs-params"></span>) </span>{
                        animationClosed = <span class="hljs-literal">true</span>;
                        applyOptions();
                        applyAnimationStyles(element, options);
                    }
                    <span class="hljs-keyword">var</span> runner;
                    <span class="hljs-keyword">return</span> {
                        <span class="hljs-attr">$$willAnimate</span>: <span class="hljs-literal">true</span>,
                        <span class="hljs-attr">end</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            <span class="hljs-keyword">if</span> (runner) {
                                runner.end();
                            } <span class="hljs-keyword">else</span> {
                                close();
                                runner = <span class="hljs-keyword">new</span> $$AnimateRunner();
                                runner.complete(<span class="hljs-literal">true</span>);
                            }
                            <span class="hljs-keyword">return</span> runner;
                        },
                        <span class="hljs-attr">start</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            <span class="hljs-keyword">if</span> (runner) {
                                <span class="hljs-keyword">return</span> runner;
                            }
                            runner = <span class="hljs-keyword">new</span> $$AnimateRunner();
                            <span class="hljs-keyword">var</span> closeActiveAnimations;
                            <span class="hljs-keyword">var</span> chain = [];
                            <span class="hljs-keyword">if</span> (before) {
                                chain.push(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fn</span>) </span>{
                                    closeActiveAnimations = before(fn);
                                });
                            }
                            <span class="hljs-keyword">if</span> (chain.length) {
                                chain.push(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fn</span>) </span>{
                                    applyOptions();
                                    fn(<span class="hljs-literal">true</span>);
                                });
                            } <span class="hljs-keyword">else</span> {
                                applyOptions();
                            }
                            <span class="hljs-keyword">if</span> (after) {
                                chain.push(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fn</span>) </span>{
                                    closeActiveAnimations = after(fn);
                                });
                            }
                            runner.setHost({
                                <span class="hljs-attr">end</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                                    endAnimations();
                                },
                                <span class="hljs-attr">cancel</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                                    endAnimations(<span class="hljs-literal">true</span>);
                                }
                            });
                            $$AnimateRunner.chain(chain, onComplete);
                            <span class="hljs-keyword">return</span> runner;

                            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onComplete</span>(<span class="hljs-params">success</span>) </span>{
                                close(success);
                                runner.complete(success);
                            }

                            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">endAnimations</span>(<span class="hljs-params">cancelled</span>) </span>{
                                <span class="hljs-keyword">if</span> (!animationClosed) {
                                    (closeActiveAnimations || noop)(cancelled);
                                    onComplete(cancelled);
                                }
                            }
                        }
                    };

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">executeAnimationFn</span>(<span class="hljs-params">fn, element, event, options, onDone</span>) </span>{
                        <span class="hljs-keyword">var</span> args;
                        <span class="hljs-keyword">switch</span> (event) {
                            <span class="hljs-keyword">case</span> <span class="hljs-string">'animate'</span>:
                                args = [element, options.from, options.to, onDone];
                                <span class="hljs-keyword">break</span>;
                            <span class="hljs-keyword">case</span> <span class="hljs-string">'setClass'</span>:
                                args = [element, classesToAdd, classesToRemove, onDone];
                                <span class="hljs-keyword">break</span>;
                            <span class="hljs-keyword">case</span> <span class="hljs-string">'addClass'</span>:
                                args = [element, classesToAdd, onDone];
                                <span class="hljs-keyword">break</span>;
                            <span class="hljs-keyword">case</span> <span class="hljs-string">'removeClass'</span>:
                                args = [element, classesToRemove, onDone];
                                <span class="hljs-keyword">break</span>;
                            <span class="hljs-keyword">default</span>:
                                args = [element, onDone];
                                <span class="hljs-keyword">break</span>;
                        }
                        args.push(options);
                        <span class="hljs-keyword">var</span> value = fn.apply(fn, args);
                        <span class="hljs-keyword">if</span> (value) {
                            <span class="hljs-keyword">if</span> (isFunction(value.start)) {
                                value = value.start();
                            }
                            <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">instanceof</span> $$AnimateRunner) {
                                value.done(onDone);
                            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isFunction(value)) {
                                <span class="hljs-keyword">return</span> value;
                            }
                        }
                        <span class="hljs-keyword">return</span> noop;
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">groupEventedAnimations</span>(<span class="hljs-params">element, event, options, animations, fnName</span>) </span>{
                        <span class="hljs-keyword">var</span> operations = [];
                        forEach(animations, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ani</span>) </span>{
                            <span class="hljs-keyword">var</span> animation = ani[fnName];
                            <span class="hljs-keyword">if</span> (!animation) <span class="hljs-keyword">return</span>;
                            operations.push(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                                <span class="hljs-keyword">var</span> runner;
                                <span class="hljs-keyword">var</span> endProgressCb;
                                <span class="hljs-keyword">var</span> resolved = <span class="hljs-literal">false</span>;
                                <span class="hljs-keyword">var</span> onAnimationComplete = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rejected</span>) </span>{
                                    <span class="hljs-keyword">if</span> (!resolved) {
                                        resolved = <span class="hljs-literal">true</span>;
                                        (endProgressCb || noop)(rejected);
                                        runner.complete(!rejected);
                                    }
                                };
                                runner = <span class="hljs-keyword">new</span> $$AnimateRunner({
                                    <span class="hljs-attr">end</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                                        onAnimationComplete();
                                    },
                                    <span class="hljs-attr">cancel</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                                        onAnimationComplete(<span class="hljs-literal">true</span>);
                                    }
                                });
                                endProgressCb = executeAnimationFn(animation, element, event, options, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>) </span>{
                                    <span class="hljs-keyword">var</span> cancelled = result === <span class="hljs-literal">false</span>;
                                    onAnimationComplete(cancelled);
                                });
                                <span class="hljs-keyword">return</span> runner;
                            });
                        });
                        <span class="hljs-keyword">return</span> operations;
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">packageAnimations</span>(<span class="hljs-params">element, event, options, animations, fnName</span>) </span>{
                        <span class="hljs-keyword">var</span> operations = groupEventedAnimations(element, event, options, animations, fnName);
                        <span class="hljs-keyword">if</span> (operations.length === <span class="hljs-number">0</span>) {
                            <span class="hljs-keyword">var</span> a, b;
                            <span class="hljs-keyword">if</span> (fnName === <span class="hljs-string">'beforeSetClass'</span>) {
                                a = groupEventedAnimations(element, <span class="hljs-string">'removeClass'</span>, options, animations, <span class="hljs-string">'beforeRemoveClass'</span>);
                                b = groupEventedAnimations(element, <span class="hljs-string">'addClass'</span>, options, animations, <span class="hljs-string">'beforeAddClass'</span>);
                            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (fnName === <span class="hljs-string">'setClass'</span>) {
                                a = groupEventedAnimations(element, <span class="hljs-string">'removeClass'</span>, options, animations, <span class="hljs-string">'removeClass'</span>);
                                b = groupEventedAnimations(element, <span class="hljs-string">'addClass'</span>, options, animations, <span class="hljs-string">'addClass'</span>);
                            }
                            <span class="hljs-keyword">if</span> (a) {
                                operations = operations.concat(a);
                            }
                            <span class="hljs-keyword">if</span> (b) {
                                operations = operations.concat(b);
                            }
                        }
                        <span class="hljs-keyword">if</span> (operations.length === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;
                        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">startAnimation</span>(<span class="hljs-params">callback</span>) </span>{
                            <span class="hljs-keyword">var</span> runners = [];
                            <span class="hljs-keyword">if</span> (operations.length) {
                                forEach(operations, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">animateFn</span>) </span>{
                                    runners.push(animateFn());
                                });
                            }
                            runners.length ? $$AnimateRunner.all(runners, callback) : callback();
                            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">endFn</span>(<span class="hljs-params">reject</span>) </span>{
                                forEach(runners, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">runner</span>) </span>{
                                    reject ? runner.cancel() : runner.end();
                                });
                            };
                        };
                    }
                };

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">lookupAnimations</span>(<span class="hljs-params">classes</span>) </span>{
                    classes = isArray(classes) ? classes : classes.split(<span class="hljs-string">' '</span>);
                    <span class="hljs-keyword">var</span> matches = [],
                        flagMap = {};
                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; classes.length; i++) {
                        <span class="hljs-keyword">var</span> klass = classes[i],
                            animationFactory = $animateProvider.$$registeredAnimations[klass];
                        <span class="hljs-keyword">if</span> (animationFactory &amp;&amp; !flagMap[klass]) {
                            matches.push($injector.get(animationFactory));
                            flagMap[klass] = <span class="hljs-literal">true</span>;
                        }
                    }
                    <span class="hljs-keyword">return</span> matches;
                }
            }
        ];
    }];
    <span class="hljs-keyword">var</span> $$AnimateJsDriverProvider = [<span class="hljs-string">'$$animationProvider'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$$animationProvider</span>) </span>{
        $$animationProvider.drivers.push(<span class="hljs-string">'$$animateJsDriver'</span>);
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$$animateJs'</span>, <span class="hljs-string">'$$AnimateRunner'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$$animateJs, $$AnimateRunner</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">initDriverFn</span>(<span class="hljs-params">animationDetails</span>) </span>{
                <span class="hljs-keyword">if</span> (animationDetails.from &amp;&amp; animationDetails.to) {
                    <span class="hljs-keyword">var</span> fromAnimation = prepareAnimation(animationDetails.from);
                    <span class="hljs-keyword">var</span> toAnimation = prepareAnimation(animationDetails.to);
                    <span class="hljs-keyword">if</span> (!fromAnimation &amp;&amp; !toAnimation) <span class="hljs-keyword">return</span>;
                    <span class="hljs-keyword">return</span> {
                        <span class="hljs-attr">start</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            <span class="hljs-keyword">var</span> animationRunners = [];
                            <span class="hljs-keyword">if</span> (fromAnimation) {
                                animationRunners.push(fromAnimation.start());
                            }
                            <span class="hljs-keyword">if</span> (toAnimation) {
                                animationRunners.push(toAnimation.start());
                            }
                            $$AnimateRunner.all(animationRunners, done);
                            <span class="hljs-keyword">var</span> runner = <span class="hljs-keyword">new</span> $$AnimateRunner({
                                <span class="hljs-attr">end</span>: endFnFactory(),
                                <span class="hljs-attr">cancel</span>: endFnFactory()
                            });
                            <span class="hljs-keyword">return</span> runner;

                            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">endFnFactory</span>(<span class="hljs-params"></span>) </span>{
                                <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                                    forEach(animationRunners, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">runner</span>) </span>{
                                        runner.end();
                                    });
                                };
                            }

                            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">done</span>(<span class="hljs-params">status</span>) </span>{
                                runner.complete(status);
                            }
                        }
                    };
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">return</span> prepareAnimation(animationDetails);
                }
            };

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">prepareAnimation</span>(<span class="hljs-params">animationDetails</span>) </span>{
                <span class="hljs-keyword">var</span> element = animationDetails.element;
                <span class="hljs-keyword">var</span> event = animationDetails.event;
                <span class="hljs-keyword">var</span> options = animationDetails.options;
                <span class="hljs-keyword">var</span> classes = animationDetails.classes;
                <span class="hljs-keyword">return</span> $$animateJs(element, event, classes, options);
            }
        }];
    }];
    <span class="hljs-keyword">var</span> NG_ANIMATE_ATTR_NAME = <span class="hljs-string">'data-ng-animate'</span>;
    <span class="hljs-keyword">var</span> NG_ANIMATE_PIN_DATA = <span class="hljs-string">'$ngAnimatePin'</span>;
    <span class="hljs-keyword">var</span> $$AnimateQueueProvider = [<span class="hljs-string">'$animateProvider'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$animateProvider</span>) </span>{
        <span class="hljs-keyword">var</span> PRE_DIGEST_STATE = <span class="hljs-number">1</span>;
        <span class="hljs-keyword">var</span> RUNNING_STATE = <span class="hljs-number">2</span>;
        <span class="hljs-keyword">var</span> ONE_SPACE = <span class="hljs-string">' '</span>;
        <span class="hljs-keyword">var</span> rules = <span class="hljs-keyword">this</span>.rules = {
            <span class="hljs-attr">skip</span>: [],
            <span class="hljs-attr">cancel</span>: [],
            <span class="hljs-attr">join</span>: []
        };

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeTruthyCssClassMap</span>(<span class="hljs-params">classString</span>) </span>{
            <span class="hljs-keyword">if</span> (!classString) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            }
            <span class="hljs-keyword">var</span> keys = classString.split(ONE_SPACE);
            <span class="hljs-keyword">var</span> map = <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>);
            forEach(keys, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key</span>) </span>{
                map[key] = <span class="hljs-literal">true</span>;
            });
            <span class="hljs-keyword">return</span> map;
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hasMatchingClasses</span>(<span class="hljs-params">newClassString, currentClassString</span>) </span>{
            <span class="hljs-keyword">if</span> (newClassString &amp;&amp; currentClassString) {
                <span class="hljs-keyword">var</span> currentClassMap = makeTruthyCssClassMap(currentClassString);
                <span class="hljs-keyword">return</span> newClassString.split(ONE_SPACE).some(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">className</span>) </span>{
                    <span class="hljs-keyword">return</span> currentClassMap[className];
                });
            }
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isAllowed</span>(<span class="hljs-params">ruleType, element, currentAnimation, previousAnimation</span>) </span>{
            <span class="hljs-keyword">return</span> rules[ruleType].some(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fn</span>) </span>{
                <span class="hljs-keyword">return</span> fn(element, currentAnimation, previousAnimation);
            });
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hasAnimationClasses</span>(<span class="hljs-params">animation, and</span>) </span>{
            <span class="hljs-keyword">var</span> a = (animation.addClass || <span class="hljs-string">''</span>).length &gt; <span class="hljs-number">0</span>;
            <span class="hljs-keyword">var</span> b = (animation.removeClass || <span class="hljs-string">''</span>).length &gt; <span class="hljs-number">0</span>;
            <span class="hljs-keyword">return</span> and ? a &amp;&amp; b : a || b;
        }
        rules.join.push(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, newAnimation, currentAnimation</span>) </span>{
            <span class="hljs-keyword">return</span> !newAnimation.structural &amp;&amp; hasAnimationClasses(newAnimation);
        });
        rules.skip.push(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, newAnimation, currentAnimation</span>) </span>{
            <span class="hljs-keyword">return</span> !newAnimation.structural &amp;&amp; !hasAnimationClasses(newAnimation);
        });
        rules.skip.push(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, newAnimation, currentAnimation</span>) </span>{
            <span class="hljs-keyword">return</span> currentAnimation.event == <span class="hljs-string">'leave'</span> &amp;&amp; newAnimation.structural;
        });
        rules.skip.push(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, newAnimation, currentAnimation</span>) </span>{
            <span class="hljs-keyword">return</span> currentAnimation.structural &amp;&amp; currentAnimation.state === RUNNING_STATE &amp;&amp; !newAnimation.structural;
        });
        rules.cancel.push(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, newAnimation, currentAnimation</span>) </span>{
            <span class="hljs-keyword">return</span> currentAnimation.structural &amp;&amp; newAnimation.structural;
        });
        rules.cancel.push(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, newAnimation, currentAnimation</span>) </span>{
            <span class="hljs-keyword">return</span> currentAnimation.state === RUNNING_STATE &amp;&amp; newAnimation.structural;
        });
        rules.cancel.push(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, newAnimation, currentAnimation</span>) </span>{
            <span class="hljs-keyword">if</span> (currentAnimation.structural) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">var</span> nA = newAnimation.addClass;
            <span class="hljs-keyword">var</span> nR = newAnimation.removeClass;
            <span class="hljs-keyword">var</span> cA = currentAnimation.addClass;
            <span class="hljs-keyword">var</span> cR = currentAnimation.removeClass;
            <span class="hljs-keyword">if</span> ((isUndefined(nA) &amp;&amp; isUndefined(nR)) || (isUndefined(cA) &amp;&amp; isUndefined(cR))) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
            <span class="hljs-keyword">return</span> hasMatchingClasses(nA, cR) || hasMatchingClasses(nR, cA);
        });
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$$rAF'</span>, <span class="hljs-string">'$rootScope'</span>, <span class="hljs-string">'$rootElement'</span>, <span class="hljs-string">'$document'</span>, <span class="hljs-string">'$$HashMap'</span>,
            <span class="hljs-string">'$$animation'</span>, <span class="hljs-string">'$$AnimateRunner'</span>, <span class="hljs-string">'$templateRequest'</span>, <span class="hljs-string">'$$jqLite'</span>, <span class="hljs-string">'$$forceReflow'</span>,
            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$$rAF, $rootScope, $rootElement, $document, $$HashMap,
                $$animation, $$AnimateRunner, $templateRequest, $$jqLite, $$forceReflow</span>) </span>{
                <span class="hljs-keyword">var</span> activeAnimationsLookup = <span class="hljs-keyword">new</span> $$HashMap();
                <span class="hljs-keyword">var</span> disabledElementsLookup = <span class="hljs-keyword">new</span> $$HashMap();
                <span class="hljs-keyword">var</span> animationsEnabled = <span class="hljs-literal">null</span>;

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">postDigestTaskFactory</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">var</span> postDigestCalled = <span class="hljs-literal">false</span>;
                    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fn</span>) </span>{
                        <span class="hljs-keyword">if</span> (postDigestCalled) {
                            fn();
                        } <span class="hljs-keyword">else</span> {
                            $rootScope.$$postDigest(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                                postDigestCalled = <span class="hljs-literal">true</span>;
                                fn();
                            });
                        }
                    };
                }
                <span class="hljs-keyword">var</span> deregisterWatch = $rootScope.$watch(
                    <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">return</span> $templateRequest.totalPendingRequests === <span class="hljs-number">0</span>;
                    },
                    <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">isEmpty</span>) </span>{
                        <span class="hljs-keyword">if</span> (!isEmpty) <span class="hljs-keyword">return</span>;
                        deregisterWatch();
                        $rootScope.$$postDigest(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            $rootScope.$$postDigest(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                                <span class="hljs-keyword">if</span> (animationsEnabled === <span class="hljs-literal">null</span>) {
                                    animationsEnabled = <span class="hljs-literal">true</span>;
                                }
                            });
                        });
                    }
                );
                <span class="hljs-keyword">var</span> callbackRegistry = <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>);
                <span class="hljs-keyword">var</span> classNameFilter = $animateProvider.classNameFilter();
                <span class="hljs-keyword">var</span> isAnimatableClassName = !classNameFilter ?
                    <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                    } :
                    <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">className</span>) </span>{
                        <span class="hljs-keyword">return</span> classNameFilter.test(className);
                    };
                <span class="hljs-keyword">var</span> applyAnimationClasses = applyAnimationClassesFactory($$jqLite);

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalizeAnimationDetails</span>(<span class="hljs-params">element, animation</span>) </span>{
                    <span class="hljs-keyword">return</span> mergeAnimationDetails(element, animation, {});
                }
                <span class="hljs-keyword">var</span> contains = <span class="hljs-built_in">window</span>.Node.prototype.contains || <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">arg</span>) </span>{
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span> === arg || !!(<span class="hljs-keyword">this</span>.compareDocumentPosition(arg) &amp; <span class="hljs-number">16</span>);
                };

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findCallbacks</span>(<span class="hljs-params">parent, element, event</span>) </span>{
                    <span class="hljs-keyword">var</span> targetNode = getDomNode(element);
                    <span class="hljs-keyword">var</span> targetParentNode = getDomNode(parent);
                    <span class="hljs-keyword">var</span> matches = [];
                    <span class="hljs-keyword">var</span> entries = callbackRegistry[event];
                    <span class="hljs-keyword">if</span> (entries) {
                        forEach(entries, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">entry</span>) </span>{
                            <span class="hljs-keyword">if</span> (contains.call(entry.node, targetNode)) {
                                matches.push(entry.callback);
                            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (event === <span class="hljs-string">'leave'</span> &amp;&amp; contains.call(entry.node, targetParentNode)) {
                                matches.push(entry.callback);
                            }
                        });
                    }
                    <span class="hljs-keyword">return</span> matches;
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">filterFromRegistry</span>(<span class="hljs-params">list, matchContainer, matchCallback</span>) </span>{
                    <span class="hljs-keyword">var</span> containerNode = extractElementNode(matchContainer);
                    <span class="hljs-keyword">return</span> list.filter(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">entry</span>) </span>{
                        <span class="hljs-keyword">var</span> isMatch = entry.node === containerNode &amp;&amp;
                            (!matchCallback || entry.callback === matchCallback);
                        <span class="hljs-keyword">return</span> !isMatch;
                    });
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cleanupEventListeners</span>(<span class="hljs-params">phase, element</span>) </span>{
                    <span class="hljs-keyword">if</span> (phase === <span class="hljs-string">'close'</span> &amp;&amp; !element[<span class="hljs-number">0</span>].parentNode) {
                        $animate.off(element);
                    }
                }
                <span class="hljs-keyword">var</span> $animate = {
                    <span class="hljs-attr">on</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event, container, callback</span>) </span>{
                        <span class="hljs-keyword">var</span> node = extractElementNode(container);
                        callbackRegistry[event] = callbackRegistry[event] || [];
                        callbackRegistry[event].push({
                            <span class="hljs-attr">node</span>: node,
                            <span class="hljs-attr">callback</span>: callback
                        });
                        jqLite(container).on(<span class="hljs-string">'$destroy'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            <span class="hljs-keyword">var</span> animationDetails = activeAnimationsLookup.get(node);
                            <span class="hljs-keyword">if</span> (!animationDetails) {
                                $animate.off(event, container, callback);
                            }
                        });
                    },
                    <span class="hljs-attr">off</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event, container, callback</span>) </span>{
                        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">arguments</span>.length === <span class="hljs-number">1</span> &amp;&amp; !isString(<span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>])) {
                            container = <span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>];
                            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> eventType <span class="hljs-keyword">in</span> callbackRegistry) {
                                callbackRegistry[eventType] = filterFromRegistry(callbackRegistry[eventType], container);
                            }
                            <span class="hljs-keyword">return</span>;
                        }
                        <span class="hljs-keyword">var</span> entries = callbackRegistry[event];
                        <span class="hljs-keyword">if</span> (!entries) <span class="hljs-keyword">return</span>;
                        callbackRegistry[event] = <span class="hljs-built_in">arguments</span>.length === <span class="hljs-number">1</span> ?
                            <span class="hljs-literal">null</span> :
                            filterFromRegistry(entries, container, callback);
                    },
                    <span class="hljs-attr">pin</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, parentElement</span>) </span>{
                        assertArg(isElement(element), <span class="hljs-string">'element'</span>, <span class="hljs-string">'not an element'</span>);
                        assertArg(isElement(parentElement), <span class="hljs-string">'parentElement'</span>, <span class="hljs-string">'not an element'</span>);
                        element.data(NG_ANIMATE_PIN_DATA, parentElement);
                    },
                    <span class="hljs-attr">push</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, event, options, domOperation</span>) </span>{
                        options = options || {};
                        options.domOperation = domOperation;
                        <span class="hljs-keyword">return</span> queueAnimation(element, event, options);
                    },
                    <span class="hljs-attr">enabled</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, bool</span>) </span>{
                        <span class="hljs-keyword">var</span> argCount = <span class="hljs-built_in">arguments</span>.length;
                        <span class="hljs-keyword">if</span> (argCount === <span class="hljs-number">0</span>) {
                            bool = !!animationsEnabled;
                        } <span class="hljs-keyword">else</span> {
                            <span class="hljs-keyword">var</span> hasElement = isElement(element);
                            <span class="hljs-keyword">if</span> (!hasElement) {
                                bool = animationsEnabled = !!element;
                            } <span class="hljs-keyword">else</span> {
                                <span class="hljs-keyword">var</span> node = getDomNode(element);
                                <span class="hljs-keyword">if</span> (argCount === <span class="hljs-number">1</span>) {
                                    bool = !disabledElementsLookup.get(node);
                                } <span class="hljs-keyword">else</span> {
                                    disabledElementsLookup.put(node, !bool);
                                }
                            }
                        }
                        <span class="hljs-keyword">return</span> bool;
                    }
                };
                <span class="hljs-keyword">return</span> $animate;

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">queueAnimation</span>(<span class="hljs-params">element, event, initialOptions</span>) </span>{
                    <span class="hljs-keyword">var</span> options = copy(initialOptions);
                    <span class="hljs-keyword">var</span> node, parent;
                    element = stripCommentsFromElement(element);
                    <span class="hljs-keyword">if</span> (element) {
                        node = getDomNode(element);
                        parent = element.parent();
                    }
                    options = prepareAnimationOptions(options);
                    <span class="hljs-keyword">var</span> runner = <span class="hljs-keyword">new</span> $$AnimateRunner();
                    <span class="hljs-keyword">var</span> runInNextPostDigestOrNow = postDigestTaskFactory();
                    <span class="hljs-keyword">if</span> (isArray(options.addClass)) {
                        options.addClass = options.addClass.join(<span class="hljs-string">' '</span>);
                    }
                    <span class="hljs-keyword">if</span> (options.addClass &amp;&amp; !isString(options.addClass)) {
                        options.addClass = <span class="hljs-literal">null</span>;
                    }
                    <span class="hljs-keyword">if</span> (isArray(options.removeClass)) {
                        options.removeClass = options.removeClass.join(<span class="hljs-string">' '</span>);
                    }
                    <span class="hljs-keyword">if</span> (options.removeClass &amp;&amp; !isString(options.removeClass)) {
                        options.removeClass = <span class="hljs-literal">null</span>;
                    }
                    <span class="hljs-keyword">if</span> (options.from &amp;&amp; !isObject(options.from)) {
                        options.from = <span class="hljs-literal">null</span>;
                    }
                    <span class="hljs-keyword">if</span> (options.to &amp;&amp; !isObject(options.to)) {
                        options.to = <span class="hljs-literal">null</span>;
                    }
                    <span class="hljs-keyword">if</span> (!node) {
                        close();
                        <span class="hljs-keyword">return</span> runner;
                    }
                    <span class="hljs-keyword">var</span> className = [node.className, options.addClass, options.removeClass].join(<span class="hljs-string">' '</span>);
                    <span class="hljs-keyword">if</span> (!isAnimatableClassName(className)) {
                        close();
                        <span class="hljs-keyword">return</span> runner;
                    }
                    <span class="hljs-keyword">var</span> isStructural = [<span class="hljs-string">'enter'</span>, <span class="hljs-string">'move'</span>, <span class="hljs-string">'leave'</span>].indexOf(event) &gt;= <span class="hljs-number">0</span>;
                    <span class="hljs-keyword">var</span> documentHidden = $<span class="hljs-built_in">document</span>[<span class="hljs-number">0</span>].hidden;
                    <span class="hljs-keyword">var</span> skipAnimations = !animationsEnabled || documentHidden || disabledElementsLookup.get(node);
                    <span class="hljs-keyword">var</span> existingAnimation = (!skipAnimations &amp;&amp; activeAnimationsLookup.get(node)) || {};
                    <span class="hljs-keyword">var</span> hasExistingAnimation = !!existingAnimation.state;
                    <span class="hljs-keyword">if</span> (!skipAnimations &amp;&amp; (!hasExistingAnimation || existingAnimation.state != PRE_DIGEST_STATE)) {
                        skipAnimations = !areAnimationsAllowed(element, parent, event);
                    }
                    <span class="hljs-keyword">if</span> (skipAnimations) {
                        <span class="hljs-keyword">if</span> (documentHidden) notifyProgress(runner, event, <span class="hljs-string">'start'</span>);
                        close();
                        <span class="hljs-keyword">if</span> (documentHidden) notifyProgress(runner, event, <span class="hljs-string">'close'</span>);
                        <span class="hljs-keyword">return</span> runner;
                    }
                    <span class="hljs-keyword">if</span> (isStructural) {
                        closeChildAnimations(element);
                    }
                    <span class="hljs-keyword">var</span> newAnimation = {
                        <span class="hljs-attr">structural</span>: isStructural,
                        <span class="hljs-attr">element</span>: element,
                        <span class="hljs-attr">event</span>: event,
                        <span class="hljs-attr">addClass</span>: options.addClass,
                        <span class="hljs-attr">removeClass</span>: options.removeClass,
                        <span class="hljs-attr">close</span>: close,
                        <span class="hljs-attr">options</span>: options,
                        <span class="hljs-attr">runner</span>: runner
                    };
                    <span class="hljs-keyword">if</span> (hasExistingAnimation) {
                        <span class="hljs-keyword">var</span> skipAnimationFlag = isAllowed(<span class="hljs-string">'skip'</span>, element, newAnimation, existingAnimation);
                        <span class="hljs-keyword">if</span> (skipAnimationFlag) {
                            <span class="hljs-keyword">if</span> (existingAnimation.state === RUNNING_STATE) {
                                close();
                                <span class="hljs-keyword">return</span> runner;
                            } <span class="hljs-keyword">else</span> {
                                mergeAnimationDetails(element, existingAnimation, newAnimation);
                                <span class="hljs-keyword">return</span> existingAnimation.runner;
                            }
                        }
                        <span class="hljs-keyword">var</span> cancelAnimationFlag = isAllowed(<span class="hljs-string">'cancel'</span>, element, newAnimation, existingAnimation);
                        <span class="hljs-keyword">if</span> (cancelAnimationFlag) {
                            <span class="hljs-keyword">if</span> (existingAnimation.state === RUNNING_STATE) {
                                existingAnimation.runner.end();
                            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (existingAnimation.structural) {
                                existingAnimation.close();
                            } <span class="hljs-keyword">else</span> {
                                mergeAnimationDetails(element, existingAnimation, newAnimation);
                                <span class="hljs-keyword">return</span> existingAnimation.runner;
                            }
                        } <span class="hljs-keyword">else</span> {
                            <span class="hljs-keyword">var</span> joinAnimationFlag = isAllowed(<span class="hljs-string">'join'</span>, element, newAnimation, existingAnimation);
                            <span class="hljs-keyword">if</span> (joinAnimationFlag) {
                                <span class="hljs-keyword">if</span> (existingAnimation.state === RUNNING_STATE) {
                                    normalizeAnimationDetails(element, newAnimation);
                                } <span class="hljs-keyword">else</span> {
                                    applyGeneratedPreparationClasses(element, isStructural ? event : <span class="hljs-literal">null</span>, options);
                                    event = newAnimation.event = existingAnimation.event;
                                    options = mergeAnimationDetails(element, existingAnimation, newAnimation);
                                    <span class="hljs-keyword">return</span> existingAnimation.runner;
                                }
                            }
                        }
                    } <span class="hljs-keyword">else</span> {
                        normalizeAnimationDetails(element, newAnimation);
                    }
                    <span class="hljs-keyword">var</span> isValidAnimation = newAnimation.structural;
                    <span class="hljs-keyword">if</span> (!isValidAnimation) {
                        isValidAnimation = (newAnimation.event === <span class="hljs-string">'animate'</span> &amp;&amp; <span class="hljs-built_in">Object</span>.keys(newAnimation.options.to || {}).length &gt; <span class="hljs-number">0</span>) ||
                            hasAnimationClasses(newAnimation);
                    }
                    <span class="hljs-keyword">if</span> (!isValidAnimation) {
                        close();
                        clearElementAnimationState(element);
                        <span class="hljs-keyword">return</span> runner;
                    }
                    <span class="hljs-keyword">var</span> counter = (existingAnimation.counter || <span class="hljs-number">0</span>) + <span class="hljs-number">1</span>;
                    newAnimation.counter = counter;
                    markElementAnimationState(element, PRE_DIGEST_STATE, newAnimation);
                    $rootScope.$$postDigest(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">var</span> animationDetails = activeAnimationsLookup.get(node);
                        <span class="hljs-keyword">var</span> animationCancelled = !animationDetails;
                        animationDetails = animationDetails || {};
                        <span class="hljs-keyword">var</span> parentElement = element.parent() || [];
                        <span class="hljs-keyword">var</span> isValidAnimation = parentElement.length &gt; <span class="hljs-number">0</span> &amp;&amp;
                            (animationDetails.event === <span class="hljs-string">'animate'</span> ||
                                animationDetails.structural ||
                                hasAnimationClasses(animationDetails));
                        <span class="hljs-keyword">if</span> (animationCancelled || animationDetails.counter !== counter || !isValidAnimation) {
                            <span class="hljs-keyword">if</span> (animationCancelled) {
                                applyAnimationClasses(element, options);
                                applyAnimationStyles(element, options);
                            }
                            <span class="hljs-keyword">if</span> (animationCancelled || (isStructural &amp;&amp; animationDetails.event !== event)) {
                                options.domOperation();
                                runner.end();
                            }
                            <span class="hljs-keyword">if</span> (!isValidAnimation) {
                                clearElementAnimationState(element);
                            }
                            <span class="hljs-keyword">return</span>;
                        }
                        event = !animationDetails.structural &amp;&amp; hasAnimationClasses(animationDetails, <span class="hljs-literal">true</span>) ?
                            <span class="hljs-string">'setClass'</span> :
                            animationDetails.event;
                        markElementAnimationState(element, RUNNING_STATE);
                        <span class="hljs-keyword">var</span> realRunner = $$animation(element, event, animationDetails.options);
                        runner.setHost(realRunner);
                        notifyProgress(runner, event, <span class="hljs-string">'start'</span>, {});
                        realRunner.done(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">status</span>) </span>{
                            close(!status);
                            <span class="hljs-keyword">var</span> animationDetails = activeAnimationsLookup.get(node);
                            <span class="hljs-keyword">if</span> (animationDetails &amp;&amp; animationDetails.counter === counter) {
                                clearElementAnimationState(getDomNode(element));
                            }
                            notifyProgress(runner, event, <span class="hljs-string">'close'</span>, {});
                        });
                    });
                    <span class="hljs-keyword">return</span> runner;

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">notifyProgress</span>(<span class="hljs-params">runner, event, phase, data</span>) </span>{
                        runInNextPostDigestOrNow(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            <span class="hljs-keyword">var</span> callbacks = findCallbacks(parent, element, event);
                            <span class="hljs-keyword">if</span> (callbacks.length) {
                                $$rAF(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                                    forEach(callbacks, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) </span>{
                                        callback(element, phase, data);
                                    });
                                    cleanupEventListeners(phase, element);
                                });
                            } <span class="hljs-keyword">else</span> {
                                cleanupEventListeners(phase, element);
                            }
                        });
                        runner.progress(event, phase, data);
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">close</span>(<span class="hljs-params">reject</span>) </span>{
                        clearGeneratedClasses(element, options);
                        applyAnimationClasses(element, options);
                        applyAnimationStyles(element, options);
                        options.domOperation();
                        runner.complete(!reject);
                    }
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">closeChildAnimations</span>(<span class="hljs-params">element</span>) </span>{
                    <span class="hljs-keyword">var</span> node = getDomNode(element);
                    <span class="hljs-keyword">var</span> children = node.querySelectorAll(<span class="hljs-string">'['</span> + NG_ANIMATE_ATTR_NAME + <span class="hljs-string">']'</span>);
                    forEach(children, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">child</span>) </span>{
                        <span class="hljs-keyword">var</span> state = <span class="hljs-built_in">parseInt</span>(child.getAttribute(NG_ANIMATE_ATTR_NAME));
                        <span class="hljs-keyword">var</span> animationDetails = activeAnimationsLookup.get(child);
                        <span class="hljs-keyword">if</span> (animationDetails) {
                            <span class="hljs-keyword">switch</span> (state) {
                                <span class="hljs-keyword">case</span> RUNNING_STATE:
                                    animationDetails.runner.end();
                                <span class="hljs-keyword">case</span> PRE_DIGEST_STATE:
                                    activeAnimationsLookup.remove(child);
                                    <span class="hljs-keyword">break</span>;
                            }
                        }
                    });
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">clearElementAnimationState</span>(<span class="hljs-params">element</span>) </span>{
                    <span class="hljs-keyword">var</span> node = getDomNode(element);
                    node.removeAttribute(NG_ANIMATE_ATTR_NAME);
                    activeAnimationsLookup.remove(node);
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isMatchingElement</span>(<span class="hljs-params">nodeOrElmA, nodeOrElmB</span>) </span>{
                    <span class="hljs-keyword">return</span> getDomNode(nodeOrElmA) === getDomNode(nodeOrElmB);
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">areAnimationsAllowed</span>(<span class="hljs-params">element, parentElement, event</span>) </span>{
                    <span class="hljs-keyword">var</span> bodyElement = jqLite($<span class="hljs-built_in">document</span>[<span class="hljs-number">0</span>].body);
                    <span class="hljs-keyword">var</span> bodyElementDetected = isMatchingElement(element, bodyElement) || element[<span class="hljs-number">0</span>].nodeName === <span class="hljs-string">'HTML'</span>;
                    <span class="hljs-keyword">var</span> rootElementDetected = isMatchingElement(element, $rootElement);
                    <span class="hljs-keyword">var</span> parentAnimationDetected = <span class="hljs-literal">false</span>;
                    <span class="hljs-keyword">var</span> animateChildren;
                    <span class="hljs-keyword">var</span> elementDisabled = disabledElementsLookup.get(getDomNode(element));
                    <span class="hljs-keyword">var</span> parentHost = jqLite.data(element[<span class="hljs-number">0</span>], NG_ANIMATE_PIN_DATA);
                    <span class="hljs-keyword">if</span> (parentHost) {
                        parentElement = parentHost;
                    }
                    parentElement = getDomNode(parentElement);
                    <span class="hljs-keyword">while</span> (parentElement) {
                        <span class="hljs-keyword">if</span> (!rootElementDetected) {
                            rootElementDetected = isMatchingElement(parentElement, $rootElement);
                        }
                        <span class="hljs-keyword">if</span> (parentElement.nodeType !== ELEMENT_NODE) {
                            <span class="hljs-keyword">break</span>;
                        }
                        <span class="hljs-keyword">var</span> details = activeAnimationsLookup.get(parentElement) || {};
                        <span class="hljs-keyword">if</span> (!parentAnimationDetected) {
                            <span class="hljs-keyword">var</span> parentElementDisabled = disabledElementsLookup.get(parentElement);
                            <span class="hljs-keyword">if</span> (parentElementDisabled === <span class="hljs-literal">true</span> &amp;&amp; elementDisabled !== <span class="hljs-literal">false</span>) {
                                elementDisabled = <span class="hljs-literal">true</span>;
                                <span class="hljs-keyword">break</span>;
                            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (parentElementDisabled === <span class="hljs-literal">false</span>) {
                                elementDisabled = <span class="hljs-literal">false</span>;
                            }
                            parentAnimationDetected = details.structural;
                        }
                        <span class="hljs-keyword">if</span> (isUndefined(animateChildren) || animateChildren === <span class="hljs-literal">true</span>) {
                            <span class="hljs-keyword">var</span> value = jqLite.data(parentElement, NG_ANIMATE_CHILDREN_DATA);
                            <span class="hljs-keyword">if</span> (isDefined(value)) {
                                animateChildren = value;
                            }
                        }
                        <span class="hljs-keyword">if</span> (parentAnimationDetected &amp;&amp; animateChildren === <span class="hljs-literal">false</span>) <span class="hljs-keyword">break</span>;
                        <span class="hljs-keyword">if</span> (!bodyElementDetected) {
                            bodyElementDetected = isMatchingElement(parentElement, bodyElement);
                        }
                        <span class="hljs-keyword">if</span> (bodyElementDetected &amp;&amp; rootElementDetected) {
                            <span class="hljs-keyword">break</span>;
                        }
                        <span class="hljs-keyword">if</span> (!rootElementDetected) {
                            parentHost = jqLite.data(parentElement, NG_ANIMATE_PIN_DATA);
                            <span class="hljs-keyword">if</span> (parentHost) {
                                parentElement = getDomNode(parentHost);
                                <span class="hljs-keyword">continue</span>;
                            }
                        }
                        parentElement = parentElement.parentNode;
                    }
                    <span class="hljs-keyword">var</span> allowAnimation = (!parentAnimationDetected || animateChildren) &amp;&amp; elementDisabled !== <span class="hljs-literal">true</span>;
                    <span class="hljs-keyword">return</span> allowAnimation &amp;&amp; rootElementDetected &amp;&amp; bodyElementDetected;
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">markElementAnimationState</span>(<span class="hljs-params">element, state, details</span>) </span>{
                    details = details || {};
                    details.state = state;
                    <span class="hljs-keyword">var</span> node = getDomNode(element);
                    node.setAttribute(NG_ANIMATE_ATTR_NAME, state);
                    <span class="hljs-keyword">var</span> oldValue = activeAnimationsLookup.get(node);
                    <span class="hljs-keyword">var</span> newValue = oldValue ?
                        extend(oldValue, details) :
                        details;
                    activeAnimationsLookup.put(node, newValue);
                }
            }
        ];
    }];
    <span class="hljs-keyword">var</span> $$AnimationProvider = [<span class="hljs-string">'$animateProvider'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$animateProvider</span>) </span>{
        <span class="hljs-keyword">var</span> NG_ANIMATE_REF_ATTR = <span class="hljs-string">'ng-animate-ref'</span>;
        <span class="hljs-keyword">var</span> drivers = <span class="hljs-keyword">this</span>.drivers = [];
        <span class="hljs-keyword">var</span> RUNNER_STORAGE_KEY = <span class="hljs-string">'$$animationRunner'</span>;

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setRunner</span>(<span class="hljs-params">element, runner</span>) </span>{
            element.data(RUNNER_STORAGE_KEY, runner);
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeRunner</span>(<span class="hljs-params">element</span>) </span>{
            element.removeData(RUNNER_STORAGE_KEY);
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getRunner</span>(<span class="hljs-params">element</span>) </span>{
            <span class="hljs-keyword">return</span> element.data(RUNNER_STORAGE_KEY);
        }
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$$jqLite'</span>, <span class="hljs-string">'$rootScope'</span>, <span class="hljs-string">'$injector'</span>, <span class="hljs-string">'$$AnimateRunner'</span>, <span class="hljs-string">'$$HashMap'</span>, <span class="hljs-string">'$$rAFScheduler'</span>,
            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$$jqLite, $rootScope, $injector, $$AnimateRunner, $$HashMap, $$rAFScheduler</span>) </span>{
                <span class="hljs-keyword">var</span> animationQueue = [];
                <span class="hljs-keyword">var</span> applyAnimationClasses = applyAnimationClassesFactory($$jqLite);

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sortAnimations</span>(<span class="hljs-params">animations</span>) </span>{
                    <span class="hljs-keyword">var</span> tree = {
                        <span class="hljs-attr">children</span>: []
                    };
                    <span class="hljs-keyword">var</span> i, lookup = <span class="hljs-keyword">new</span> $$HashMap();
                    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; animations.length; i++) {
                        <span class="hljs-keyword">var</span> animation = animations[i];
                        lookup.put(animation.domNode, animations[i] = {
                            <span class="hljs-attr">domNode</span>: animation.domNode,
                            <span class="hljs-attr">fn</span>: animation.fn,
                            <span class="hljs-attr">children</span>: []
                        });
                    }
                    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; animations.length; i++) {
                        processNode(animations[i]);
                    }
                    <span class="hljs-keyword">return</span> flatten(tree);

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processNode</span>(<span class="hljs-params">entry</span>) </span>{
                        <span class="hljs-keyword">if</span> (entry.processed) <span class="hljs-keyword">return</span> entry;
                        entry.processed = <span class="hljs-literal">true</span>;
                        <span class="hljs-keyword">var</span> elementNode = entry.domNode;
                        <span class="hljs-keyword">var</span> parentNode = elementNode.parentNode;
                        lookup.put(elementNode, entry);
                        <span class="hljs-keyword">var</span> parentEntry;
                        <span class="hljs-keyword">while</span> (parentNode) {
                            parentEntry = lookup.get(parentNode);
                            <span class="hljs-keyword">if</span> (parentEntry) {
                                <span class="hljs-keyword">if</span> (!parentEntry.processed) {
                                    parentEntry = processNode(parentEntry);
                                }
                                <span class="hljs-keyword">break</span>;
                            }
                            parentNode = parentNode.parentNode;
                        }
                        (parentEntry || tree).children.push(entry);
                        <span class="hljs-keyword">return</span> entry;
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">flatten</span>(<span class="hljs-params">tree</span>) </span>{
                        <span class="hljs-keyword">var</span> result = [];
                        <span class="hljs-keyword">var</span> queue = [];
                        <span class="hljs-keyword">var</span> i;
                        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; tree.children.length; i++) {
                            queue.push(tree.children[i]);
                        }
                        <span class="hljs-keyword">var</span> remainingLevelEntries = queue.length;
                        <span class="hljs-keyword">var</span> nextLevelEntries = <span class="hljs-number">0</span>;
                        <span class="hljs-keyword">var</span> row = [];
                        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; queue.length; i++) {
                            <span class="hljs-keyword">var</span> entry = queue[i];
                            <span class="hljs-keyword">if</span> (remainingLevelEntries &lt;= <span class="hljs-number">0</span>) {
                                remainingLevelEntries = nextLevelEntries;
                                nextLevelEntries = <span class="hljs-number">0</span>;
                                result.push(row);
                                row = [];
                            }
                            row.push(entry.fn);
                            entry.children.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">childEntry</span>) </span>{
                                nextLevelEntries++;
                                queue.push(childEntry);
                            });
                            remainingLevelEntries--;
                        }
                        <span class="hljs-keyword">if</span> (row.length) {
                            result.push(row);
                        }
                        <span class="hljs-keyword">return</span> result;
                    }
                }
                <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, event, options</span>) </span>{
                    options = prepareAnimationOptions(options);
                    <span class="hljs-keyword">var</span> isStructural = [<span class="hljs-string">'enter'</span>, <span class="hljs-string">'move'</span>, <span class="hljs-string">'leave'</span>].indexOf(event) &gt;= <span class="hljs-number">0</span>;
                    <span class="hljs-keyword">var</span> runner = <span class="hljs-keyword">new</span> $$AnimateRunner({
                        <span class="hljs-attr">end</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            close();
                        },
                        <span class="hljs-attr">cancel</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            close(<span class="hljs-literal">true</span>);
                        }
                    });
                    <span class="hljs-keyword">if</span> (!drivers.length) {
                        close();
                        <span class="hljs-keyword">return</span> runner;
                    }
                    setRunner(element, runner);
                    <span class="hljs-keyword">var</span> classes = mergeClasses(element.attr(<span class="hljs-string">'class'</span>), mergeClasses(options.addClass, options.removeClass));
                    <span class="hljs-keyword">var</span> tempClasses = options.tempClasses;
                    <span class="hljs-keyword">if</span> (tempClasses) {
                        classes += <span class="hljs-string">' '</span> + tempClasses;
                        options.tempClasses = <span class="hljs-literal">null</span>;
                    }
                    <span class="hljs-keyword">var</span> prepareClassName;
                    <span class="hljs-keyword">if</span> (isStructural) {
                        prepareClassName = <span class="hljs-string">'ng-'</span> + event + PREPARE_CLASS_SUFFIX;
                        $$jqLite.addClass(element, prepareClassName);
                    }
                    animationQueue.push({
                        <span class="hljs-attr">element</span>: element,
                        <span class="hljs-attr">classes</span>: classes,
                        <span class="hljs-attr">event</span>: event,
                        <span class="hljs-attr">structural</span>: isStructural,
                        <span class="hljs-attr">options</span>: options,
                        <span class="hljs-attr">beforeStart</span>: beforeStart,
                        <span class="hljs-attr">close</span>: close
                    });
                    element.on(<span class="hljs-string">'$destroy'</span>, handleDestroyedElement);
                    <span class="hljs-keyword">if</span> (animationQueue.length &gt; <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> runner;
                    $rootScope.$$postDigest(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">var</span> animations = [];
                        forEach(animationQueue, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">entry</span>) </span>{
                            <span class="hljs-keyword">if</span> (getRunner(entry.element)) {
                                animations.push(entry);
                            } <span class="hljs-keyword">else</span> {
                                entry.close();
                            }
                        });
                        animationQueue.length = <span class="hljs-number">0</span>;
                        <span class="hljs-keyword">var</span> groupedAnimations = groupAnimations(animations);
                        <span class="hljs-keyword">var</span> toBeSortedAnimations = [];
                        forEach(groupedAnimations, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">animationEntry</span>) </span>{
                            toBeSortedAnimations.push({
                                <span class="hljs-attr">domNode</span>: getDomNode(animationEntry.from ? animationEntry.from.element : animationEntry.element),
                                <span class="hljs-attr">fn</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">triggerAnimationStart</span>(<span class="hljs-params"></span>) </span>{
                                    animationEntry.beforeStart();
                                    <span class="hljs-keyword">var</span> startAnimationFn, closeFn = animationEntry.close;
                                    <span class="hljs-keyword">var</span> targetElement = animationEntry.anchors ?
                                        (animationEntry.from.element || animationEntry.to.element) :
                                        animationEntry.element;
                                    <span class="hljs-keyword">if</span> (getRunner(targetElement)) {
                                        <span class="hljs-keyword">var</span> operation = invokeFirstDriver(animationEntry);
                                        <span class="hljs-keyword">if</span> (operation) {
                                            startAnimationFn = operation.start;
                                        }
                                    }
                                    <span class="hljs-keyword">if</span> (!startAnimationFn) {
                                        closeFn();
                                    } <span class="hljs-keyword">else</span> {
                                        <span class="hljs-keyword">var</span> animationRunner = startAnimationFn();
                                        animationRunner.done(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">status</span>) </span>{
                                            closeFn(!status);
                                        });
                                        updateAnimationRunners(animationEntry, animationRunner);
                                    }
                                }
                            });
                        });
                        $$rAFScheduler(sortAnimations(toBeSortedAnimations));
                    });
                    <span class="hljs-keyword">return</span> runner;

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getAnchorNodes</span>(<span class="hljs-params">node</span>) </span>{
                        <span class="hljs-keyword">var</span> SELECTOR = <span class="hljs-string">'['</span> + NG_ANIMATE_REF_ATTR + <span class="hljs-string">']'</span>;
                        <span class="hljs-keyword">var</span> items = node.hasAttribute(NG_ANIMATE_REF_ATTR) ?
                            [node] :
                            node.querySelectorAll(SELECTOR);
                        <span class="hljs-keyword">var</span> anchors = [];
                        forEach(items, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">node</span>) </span>{
                            <span class="hljs-keyword">var</span> attr = node.getAttribute(NG_ANIMATE_REF_ATTR);
                            <span class="hljs-keyword">if</span> (attr &amp;&amp; attr.length) {
                                anchors.push(node);
                            }
                        });
                        <span class="hljs-keyword">return</span> anchors;
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">groupAnimations</span>(<span class="hljs-params">animations</span>) </span>{
                        <span class="hljs-keyword">var</span> preparedAnimations = [];
                        <span class="hljs-keyword">var</span> refLookup = {};
                        forEach(animations, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">animation, index</span>) </span>{
                            <span class="hljs-keyword">var</span> element = animation.element;
                            <span class="hljs-keyword">var</span> node = getDomNode(element);
                            <span class="hljs-keyword">var</span> event = animation.event;
                            <span class="hljs-keyword">var</span> enterOrMove = [<span class="hljs-string">'enter'</span>, <span class="hljs-string">'move'</span>].indexOf(event) &gt;= <span class="hljs-number">0</span>;
                            <span class="hljs-keyword">var</span> anchorNodes = animation.structural ? getAnchorNodes(node) : [];
                            <span class="hljs-keyword">if</span> (anchorNodes.length) {
                                <span class="hljs-keyword">var</span> direction = enterOrMove ? <span class="hljs-string">'to'</span> : <span class="hljs-string">'from'</span>;
                                forEach(anchorNodes, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">anchor</span>) </span>{
                                    <span class="hljs-keyword">var</span> key = anchor.getAttribute(NG_ANIMATE_REF_ATTR);
                                    refLookup[key] = refLookup[key] || {};
                                    refLookup[key][direction] = {
                                        <span class="hljs-attr">animationID</span>: index,
                                        <span class="hljs-attr">element</span>: jqLite(anchor)
                                    };
                                });
                            } <span class="hljs-keyword">else</span> {
                                preparedAnimations.push(animation);
                            }
                        });
                        <span class="hljs-keyword">var</span> usedIndicesLookup = {};
                        <span class="hljs-keyword">var</span> anchorGroups = {};
                        forEach(refLookup, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">operations, key</span>) </span>{
                            <span class="hljs-keyword">var</span> <span class="hljs-keyword">from</span> = operations.from;
                            <span class="hljs-keyword">var</span> to = operations.to;
                            <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">from</span> || !to) {
                                <span class="hljs-keyword">var</span> index = <span class="hljs-keyword">from</span> ? <span class="hljs-keyword">from</span>.animationID : to.animationID;
                                <span class="hljs-keyword">var</span> indexKey = index.toString();
                                <span class="hljs-keyword">if</span> (!usedIndicesLookup[indexKey]) {
                                    usedIndicesLookup[indexKey] = <span class="hljs-literal">true</span>;
                                    preparedAnimations.push(animations[index]);
                                }
                                <span class="hljs-keyword">return</span>;
                            }
                            <span class="hljs-keyword">var</span> fromAnimation = animations[<span class="hljs-keyword">from</span>.animationID];
                            <span class="hljs-keyword">var</span> toAnimation = animations[to.animationID];
                            <span class="hljs-keyword">var</span> lookupKey = <span class="hljs-keyword">from</span>.animationID.toString();
                            <span class="hljs-keyword">if</span> (!anchorGroups[lookupKey]) {
                                <span class="hljs-keyword">var</span> group = anchorGroups[lookupKey] = {
                                    <span class="hljs-attr">structural</span>: <span class="hljs-literal">true</span>,
                                    <span class="hljs-attr">beforeStart</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                                        fromAnimation.beforeStart();
                                        toAnimation.beforeStart();
                                    },
                                    <span class="hljs-attr">close</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                                        fromAnimation.close();
                                        toAnimation.close();
                                    },
                                    <span class="hljs-attr">classes</span>: cssClassesIntersection(fromAnimation.classes, toAnimation.classes),
                                    <span class="hljs-attr">from</span>: fromAnimation,
                                    <span class="hljs-attr">to</span>: toAnimation,
                                    <span class="hljs-attr">anchors</span>: []
                                };
                                <span class="hljs-keyword">if</span> (group.classes.length) {
                                    preparedAnimations.push(group);
                                } <span class="hljs-keyword">else</span> {
                                    preparedAnimations.push(fromAnimation);
                                    preparedAnimations.push(toAnimation);
                                }
                            }
                            anchorGroups[lookupKey].anchors.push({
                                <span class="hljs-string">'out'</span>: <span class="hljs-keyword">from</span>.element,
                                <span class="hljs-string">'in'</span>: to.element
                            });
                        });
                        <span class="hljs-keyword">return</span> preparedAnimations;
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cssClassesIntersection</span>(<span class="hljs-params">a, b</span>) </span>{
                        a = a.split(<span class="hljs-string">' '</span>);
                        b = b.split(<span class="hljs-string">' '</span>);
                        <span class="hljs-keyword">var</span> matches = [];
                        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; a.length; i++) {
                            <span class="hljs-keyword">var</span> aa = a[i];
                            <span class="hljs-keyword">if</span> (aa.substring(<span class="hljs-number">0</span>, <span class="hljs-number">3</span>) === <span class="hljs-string">'ng-'</span>) <span class="hljs-keyword">continue</span>;
                            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>; j &lt; b.length; j++) {
                                <span class="hljs-keyword">if</span> (aa === b[j]) {
                                    matches.push(aa);
                                    <span class="hljs-keyword">break</span>;
                                }
                            }
                        }
                        <span class="hljs-keyword">return</span> matches.join(<span class="hljs-string">' '</span>);
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">invokeFirstDriver</span>(<span class="hljs-params">animationDetails</span>) </span>{
                        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = drivers.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
                            <span class="hljs-keyword">var</span> driverName = drivers[i];
                            <span class="hljs-keyword">var</span> factory = $injector.get(driverName);
                            <span class="hljs-keyword">var</span> driver = factory(animationDetails);
                            <span class="hljs-keyword">if</span> (driver) {
                                <span class="hljs-keyword">return</span> driver;
                            }
                        }
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">beforeStart</span>(<span class="hljs-params"></span>) </span>{
                        element.addClass(NG_ANIMATE_CLASSNAME);
                        <span class="hljs-keyword">if</span> (tempClasses) {
                            $$jqLite.addClass(element, tempClasses);
                        }
                        <span class="hljs-keyword">if</span> (prepareClassName) {
                            $$jqLite.removeClass(element, prepareClassName);
                            prepareClassName = <span class="hljs-literal">null</span>;
                        }
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateAnimationRunners</span>(<span class="hljs-params">animation, newRunner</span>) </span>{
                        <span class="hljs-keyword">if</span> (animation.from &amp;&amp; animation.to) {
                            update(animation.from.element);
                            update(animation.to.element);
                        } <span class="hljs-keyword">else</span> {
                            update(animation.element);
                        }

                        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">update</span>(<span class="hljs-params">element</span>) </span>{
                            <span class="hljs-keyword">var</span> runner = getRunner(element);
                            <span class="hljs-keyword">if</span> (runner) runner.setHost(newRunner);
                        }
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleDestroyedElement</span>(<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">var</span> runner = getRunner(element);
                        <span class="hljs-keyword">if</span> (runner &amp;&amp; (event !== <span class="hljs-string">'leave'</span> || !options.$$domOperationFired)) {
                            runner.end();
                        }
                    }

                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">close</span>(<span class="hljs-params">rejected</span>) </span>{
                        element.off(<span class="hljs-string">'$destroy'</span>, handleDestroyedElement);
                        removeRunner(element);
                        applyAnimationClasses(element, options);
                        applyAnimationStyles(element, options);
                        options.domOperation();
                        <span class="hljs-keyword">if</span> (tempClasses) {
                            $$jqLite.removeClass(element, tempClasses);
                        }
                        element.removeClass(NG_ANIMATE_CLASSNAME);
                        runner.complete(!rejected);
                    }
                };
            }
        ];
    }];
    <span class="hljs-keyword">var</span> ngAnimateSwapDirective = [<span class="hljs-string">'$animate'</span>, <span class="hljs-string">'$rootScope'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$animate, $rootScope</span>) </span>{
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">restrict</span>: <span class="hljs-string">'A'</span>,
            <span class="hljs-attr">transclude</span>: <span class="hljs-string">'element'</span>,
            <span class="hljs-attr">terminal</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">priority</span>: <span class="hljs-number">600</span>,
            <span class="hljs-attr">link</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, $element, attrs, ctrl, $transclude</span>) </span>{
                <span class="hljs-keyword">var</span> previousElement, previousScope;
                scope.$watchCollection(attrs.ngAnimateSwap || attrs[<span class="hljs-string">'for'</span>], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                    <span class="hljs-keyword">if</span> (previousElement) {
                        $animate.leave(previousElement);
                    }
                    <span class="hljs-keyword">if</span> (previousScope) {
                        previousScope.$destroy();
                        previousScope = <span class="hljs-literal">null</span>;
                    }
                    <span class="hljs-keyword">if</span> (value || value === <span class="hljs-number">0</span>) {
                        previousScope = scope.$<span class="hljs-keyword">new</span>();
                        $transclude(previousScope, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>) </span>{
                            previousElement = element;
                            $animate.enter(element, <span class="hljs-literal">null</span>, $element);
                        });
                    }
                });
            }
        };
    }];
    <span class="hljs-keyword">var</span> copy;
    <span class="hljs-keyword">var</span> extend;
    <span class="hljs-keyword">var</span> forEach;
    <span class="hljs-keyword">var</span> isArray;
    <span class="hljs-keyword">var</span> isDefined;
    <span class="hljs-keyword">var</span> isElement;
    <span class="hljs-keyword">var</span> isFunction;
    <span class="hljs-keyword">var</span> isObject;
    <span class="hljs-keyword">var</span> isString;
    <span class="hljs-keyword">var</span> isUndefined;
    <span class="hljs-keyword">var</span> jqLite;
    <span class="hljs-keyword">var</span> noop;
    angular.module(<span class="hljs-string">'ngAnimate'</span>, [], <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">initAngularHelpers</span>(<span class="hljs-params"></span>) </span>{
            noop = angular.noop;
            copy = angular.copy;
            extend = angular.extend;
            jqLite = angular.element;
            forEach = angular.forEach;
            isArray = angular.isArray;
            isString = angular.isString;
            isObject = angular.isObject;
            isUndefined = angular.isUndefined;
            isDefined = angular.isDefined;
            isFunction = angular.isFunction;
            isElement = angular.isElement;
        })
        .directive(<span class="hljs-string">'ngAnimateSwap'</span>, ngAnimateSwapDirective)
        .directive(<span class="hljs-string">'ngAnimateChildren'</span>, $$AnimateChildrenDirective)
        .factory(<span class="hljs-string">'$$rAFScheduler'</span>, $$rAFSchedulerFactory)
        .provider(<span class="hljs-string">'$$animateQueue'</span>, $$AnimateQueueProvider)
        .provider(<span class="hljs-string">'$$animation'</span>, $$AnimationProvider)
        .provider(<span class="hljs-string">'$animateCss'</span>, $AnimateCssProvider)
        .provider(<span class="hljs-string">'$$animateCssDriver'</span>, $$AnimateCssDriverProvider)
        .provider(<span class="hljs-string">'$$animateJs'</span>, $$AnimateJsProvider)
        .provider(<span class="hljs-string">'$$animateJsDriver'</span>, $$AnimateJsDriverProvider);
})(<span class="hljs-built_in">window</span>, <span class="hljs-built_in">window</span>.angular);;
<span class="hljs-comment">/*! RESOURCE: /scripts/angular_1.5.8/angular-resource.js */</span>
(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">window, angular</span>) </span>{
<span class="hljs-meta">    'use strict'</span>;
    <span class="hljs-keyword">var</span> $resourceMinErr = angular.$$minErr(<span class="hljs-string">'$resource'</span>);
    <span class="hljs-keyword">var</span> MEMBER_NAME_REGEX = <span class="hljs-regexp">/^(\.[a-zA-Z_$@][0-9a-zA-Z_$@]*)+$/</span>;

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isValidDottedPath</span>(<span class="hljs-params">path</span>) </span>{
        <span class="hljs-keyword">return</span> (path != <span class="hljs-literal">null</span> &amp;&amp; path !== <span class="hljs-string">''</span> &amp;&amp; path !== <span class="hljs-string">'hasOwnProperty'</span> &amp;&amp;
            MEMBER_NAME_REGEX.test(<span class="hljs-string">'.'</span> + path));
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">lookupDottedPath</span>(<span class="hljs-params">obj, path</span>) </span>{
        <span class="hljs-keyword">if</span> (!isValidDottedPath(path)) {
            <span class="hljs-keyword">throw</span> $resourceMinErr(<span class="hljs-string">'badmember'</span>, <span class="hljs-string">'Dotted member path "@{0}" is invalid.'</span>, path);
        }
        <span class="hljs-keyword">var</span> keys = path.split(<span class="hljs-string">'.'</span>);
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, ii = keys.length; i &lt; ii &amp;&amp; angular.isDefined(obj); i++) {
            <span class="hljs-keyword">var</span> key = keys[i];
            obj = (obj !== <span class="hljs-literal">null</span>) ? obj[key] : <span class="hljs-literal">undefined</span>;
        }
        <span class="hljs-keyword">return</span> obj;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">shallowClearAndCopy</span>(<span class="hljs-params">src, dst</span>) </span>{
        dst = dst || {};
        angular.forEach(dst, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, key</span>) </span>{
            <span class="hljs-keyword">delete</span> dst[key];
        });
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> src) {
            <span class="hljs-keyword">if</span> (src.hasOwnProperty(key) &amp;&amp; !(key.charAt(<span class="hljs-number">0</span>) === <span class="hljs-string">'$'</span> &amp;&amp; key.charAt(<span class="hljs-number">1</span>) === <span class="hljs-string">'$'</span>)) {
                dst[key] = src[key];
            }
        }
        <span class="hljs-keyword">return</span> dst;
    }
    angular.module(<span class="hljs-string">'ngResource'</span>, [<span class="hljs-string">'ng'</span>]).
    provider(<span class="hljs-string">'$resource'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> PROTOCOL_AND_DOMAIN_REGEX = <span class="hljs-regexp">/^https?:\/\/[^\/]*/</span>;
        <span class="hljs-keyword">var</span> provider = <span class="hljs-keyword">this</span>;
        <span class="hljs-keyword">this</span>.defaults = {
            <span class="hljs-attr">stripTrailingSlashes</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">cancellable</span>: <span class="hljs-literal">false</span>,
            <span class="hljs-attr">actions</span>: {
                <span class="hljs-string">'get'</span>: {
                    <span class="hljs-attr">method</span>: <span class="hljs-string">'GET'</span>
                },
                <span class="hljs-string">'save'</span>: {
                    <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>
                },
                <span class="hljs-string">'query'</span>: {
                    <span class="hljs-attr">method</span>: <span class="hljs-string">'GET'</span>,
                    <span class="hljs-attr">isArray</span>: <span class="hljs-literal">true</span>
                },
                <span class="hljs-string">'remove'</span>: {
                    <span class="hljs-attr">method</span>: <span class="hljs-string">'DELETE'</span>
                },
                <span class="hljs-string">'delete'</span>: {
                    <span class="hljs-attr">method</span>: <span class="hljs-string">'DELETE'</span>
                }
            }
        };
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$http'</span>, <span class="hljs-string">'$log'</span>, <span class="hljs-string">'$q'</span>, <span class="hljs-string">'$timeout'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$http, $log, $q, $timeout</span>) </span>{
            <span class="hljs-keyword">var</span> noop = angular.noop,
                forEach = angular.forEach,
                extend = angular.extend,
                copy = angular.copy,
                isFunction = angular.isFunction;

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">encodeUriSegment</span>(<span class="hljs-params">val</span>) </span>{
                <span class="hljs-keyword">return</span> encodeUriQuery(val, <span class="hljs-literal">true</span>).
                replace(<span class="hljs-regexp">/%26/gi</span>, <span class="hljs-string">'&amp;'</span>).
                replace(<span class="hljs-regexp">/%3D/gi</span>, <span class="hljs-string">'='</span>).
                replace(<span class="hljs-regexp">/%2B/gi</span>, <span class="hljs-string">'+'</span>);
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">encodeUriQuery</span>(<span class="hljs-params">val, pctEncodeSpaces</span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-built_in">encodeURIComponent</span>(val).
                replace(<span class="hljs-regexp">/%40/gi</span>, <span class="hljs-string">'@'</span>).
                replace(<span class="hljs-regexp">/%3A/gi</span>, <span class="hljs-string">':'</span>).
                replace(<span class="hljs-regexp">/%24/g</span>, <span class="hljs-string">'$'</span>).
                replace(<span class="hljs-regexp">/%2C/gi</span>, <span class="hljs-string">','</span>).
                replace(<span class="hljs-regexp">/%20/g</span>, (pctEncodeSpaces ? <span class="hljs-string">'%20'</span> : <span class="hljs-string">'+'</span>));
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Route</span>(<span class="hljs-params">template, defaults</span>) </span>{
                <span class="hljs-keyword">this</span>.template = template;
                <span class="hljs-keyword">this</span>.defaults = extend({}, provider.defaults, defaults);
                <span class="hljs-keyword">this</span>.urlParams = {};
            }
            Route.prototype = {
                <span class="hljs-attr">setUrlParams</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">config, params, actionUrl</span>) </span>{
                    <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>,
                        url = actionUrl || self.template,
                        val,
                        encodedVal,
                        protocolAndDomain = <span class="hljs-string">''</span>;
                    <span class="hljs-keyword">var</span> urlParams = self.urlParams = {};
                    forEach(url.split(<span class="hljs-regexp">/\W/</span>), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">param</span>) </span>{
                        <span class="hljs-keyword">if</span> (param === <span class="hljs-string">'hasOwnProperty'</span>) {
                            <span class="hljs-keyword">throw</span> $resourceMinErr(<span class="hljs-string">'badname'</span>, <span class="hljs-string">"hasOwnProperty is not a valid parameter name."</span>);
                        }
                        <span class="hljs-keyword">if</span> (!(<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">"^\\d+$"</span>).test(param)) &amp;&amp; param &amp;&amp;
                            (<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">"(^|[^\\\\]):"</span> + param + <span class="hljs-string">"(\\W|$)"</span>).test(url))) {
                            urlParams[param] = {
                                <span class="hljs-attr">isQueryParamValue</span>: (<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">"\\?.*=:"</span> + param + <span class="hljs-string">"(?:\\W|$)"</span>)).test(url)
                            };
                        }
                    });
                    url = url.replace(<span class="hljs-regexp">/\\:/g</span>, <span class="hljs-string">':'</span>);
                    url = url.replace(PROTOCOL_AND_DOMAIN_REGEX, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">match</span>) </span>{
                        protocolAndDomain = match;
                        <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
                    });
                    params = params || {};
                    forEach(self.urlParams, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">paramInfo, urlParam</span>) </span>{
                        val = params.hasOwnProperty(urlParam) ? params[urlParam] : self.defaults[urlParam];
                        <span class="hljs-keyword">if</span> (angular.isDefined(val) &amp;&amp; val !== <span class="hljs-literal">null</span>) {
                            <span class="hljs-keyword">if</span> (paramInfo.isQueryParamValue) {
                                encodedVal = encodeUriQuery(val, <span class="hljs-literal">true</span>);
                            } <span class="hljs-keyword">else</span> {
                                encodedVal = encodeUriSegment(val);
                            }
                            url = url.replace(<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">":"</span> + urlParam + <span class="hljs-string">"(\\W|$)"</span>, <span class="hljs-string">"g"</span>), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">match, p1</span>) </span>{
                                <span class="hljs-keyword">return</span> encodedVal + p1;
                            });
                        } <span class="hljs-keyword">else</span> {
                            url = url.replace(<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">"(\/?):"</span> + urlParam + <span class="hljs-string">"(\\W|$)"</span>, <span class="hljs-string">"g"</span>), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">match,
                                leadingSlashes, tail</span>) </span>{
                                <span class="hljs-keyword">if</span> (tail.charAt(<span class="hljs-number">0</span>) == <span class="hljs-string">'/'</span>) {
                                    <span class="hljs-keyword">return</span> tail;
                                } <span class="hljs-keyword">else</span> {
                                    <span class="hljs-keyword">return</span> leadingSlashes + tail;
                                }
                            });
                        }
                    });
                    <span class="hljs-keyword">if</span> (self.defaults.stripTrailingSlashes) {
                        url = url.replace(<span class="hljs-regexp">/\/+$/</span>, <span class="hljs-string">''</span>) || <span class="hljs-string">'/'</span>;
                    }
                    url = url.replace(<span class="hljs-regexp">/\/\.(?=\w+($|\?))/</span>, <span class="hljs-string">'.'</span>);
                    config.url = protocolAndDomain + url.replace(<span class="hljs-regexp">/\/\\\./</span>, <span class="hljs-string">'/.'</span>);
                    forEach(params, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, key</span>) </span>{
                        <span class="hljs-keyword">if</span> (!self.urlParams[key]) {
                            config.params = config.params || {};
                            config.params[key] = value;
                        }
                    });
                }
            };

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resourceFactory</span>(<span class="hljs-params">url, paramDefaults, actions, options</span>) </span>{
                <span class="hljs-keyword">var</span> route = <span class="hljs-keyword">new</span> Route(url, options);
                actions = extend({}, provider.defaults.actions, actions);

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">extractParams</span>(<span class="hljs-params">data, actionParams</span>) </span>{
                    <span class="hljs-keyword">var</span> ids = {};
                    actionParams = extend({}, paramDefaults, actionParams);
                    forEach(actionParams, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, key</span>) </span>{
                        <span class="hljs-keyword">if</span> (isFunction(value)) {
                            value = value(data);
                        }
                        ids[key] = value &amp;&amp; value.charAt &amp;&amp; value.charAt(<span class="hljs-number">0</span>) == <span class="hljs-string">'@'</span> ?
                            lookupDottedPath(data, value.substr(<span class="hljs-number">1</span>)) : value;
                    });
                    <span class="hljs-keyword">return</span> ids;
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">defaultResponseInterceptor</span>(<span class="hljs-params">response</span>) </span>{
                    <span class="hljs-keyword">return</span> response.resource;
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Resource</span>(<span class="hljs-params">value</span>) </span>{
                    shallowClearAndCopy(value || {}, <span class="hljs-keyword">this</span>);
                }
                Resource.prototype.toJSON = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">var</span> data = extend({}, <span class="hljs-keyword">this</span>);
                    <span class="hljs-keyword">delete</span> data.$promise;
                    <span class="hljs-keyword">delete</span> data.$resolved;
                    <span class="hljs-keyword">return</span> data;
                };
                forEach(actions, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">action, name</span>) </span>{
                    <span class="hljs-keyword">var</span> hasBody = <span class="hljs-regexp">/^(POST|PUT|PATCH)$/i</span>.test(action.method);
                    <span class="hljs-keyword">var</span> numericTimeout = action.timeout;
                    <span class="hljs-keyword">var</span> cancellable = angular.isDefined(action.cancellable) ? action.cancellable :
                        (options &amp;&amp; angular.isDefined(options.cancellable)) ? options.cancellable :
                        provider.defaults.cancellable;
                    <span class="hljs-keyword">if</span> (numericTimeout &amp;&amp; !angular.isNumber(numericTimeout)) {
                        $log.debug(<span class="hljs-string">'ngResource:\n'</span> +
                            <span class="hljs-string">'  Only numeric values are allowed as `timeout`.\n'</span> +
                            <span class="hljs-string">'  Promises are not supported in $resource, because the same value would '</span> +
                            <span class="hljs-string">'be used for multiple requests. If you are looking for a way to cancel '</span> +
                            <span class="hljs-string">'requests, you should use the `cancellable` option.'</span>);
                        <span class="hljs-keyword">delete</span> action.timeout;
                        numericTimeout = <span class="hljs-literal">null</span>;
                    }
                    Resource[name] = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">a1, a2, a3, a4</span>) </span>{
                        <span class="hljs-keyword">var</span> params = {},
                            data, success, error;
                        <span class="hljs-keyword">switch</span> (<span class="hljs-built_in">arguments</span>.length) {
                            <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:
                                error = a4;
                                success = a3;
                            <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:
                            <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
                                <span class="hljs-keyword">if</span> (isFunction(a2)) {
                                    <span class="hljs-keyword">if</span> (isFunction(a1)) {
                                        success = a1;
                                        error = a2;
                                        <span class="hljs-keyword">break</span>;
                                    }
                                    success = a2;
                                    error = a3;
                                } <span class="hljs-keyword">else</span> {
                                    params = a1;
                                    data = a2;
                                    success = a3;
                                    <span class="hljs-keyword">break</span>;
                                }
                            <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
                                <span class="hljs-keyword">if</span> (isFunction(a1)) success = a1;
                                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (hasBody) data = a1;
                                <span class="hljs-keyword">else</span> params = a1;
                                <span class="hljs-keyword">break</span>;
                            <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:
                                <span class="hljs-keyword">break</span>;
                            <span class="hljs-keyword">default</span>:
                                <span class="hljs-keyword">throw</span> $resourceMinErr(<span class="hljs-string">'badargs'</span>,
                                    <span class="hljs-string">"Expected up to 4 arguments [params, data, success, error], got {0} arguments"</span>,
                                    <span class="hljs-built_in">arguments</span>.length);
                        }
                        <span class="hljs-keyword">var</span> isInstanceCall = <span class="hljs-keyword">this</span> <span class="hljs-keyword">instanceof</span> Resource;
                        <span class="hljs-keyword">var</span> value = isInstanceCall ? data : (action.isArray ? [] : <span class="hljs-keyword">new</span> Resource(data));
                        <span class="hljs-keyword">var</span> httpConfig = {};
                        <span class="hljs-keyword">var</span> responseInterceptor = action.interceptor &amp;&amp; action.interceptor.response ||
                            defaultResponseInterceptor;
                        <span class="hljs-keyword">var</span> responseErrorInterceptor = action.interceptor &amp;&amp; action.interceptor.responseError ||
                            <span class="hljs-literal">undefined</span>;
                        <span class="hljs-keyword">var</span> timeoutDeferred;
                        <span class="hljs-keyword">var</span> numericTimeoutPromise;
                        forEach(action, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, key</span>) </span>{
                            <span class="hljs-keyword">switch</span> (key) {
                                <span class="hljs-attr">default</span>: httpConfig[key] = copy(value);
                                <span class="hljs-keyword">break</span>;
                                <span class="hljs-keyword">case</span> <span class="hljs-string">'params'</span>:
                                        <span class="hljs-keyword">case</span> <span class="hljs-string">'isArray'</span>:
                                        <span class="hljs-keyword">case</span> <span class="hljs-string">'interceptor'</span>:
                                        <span class="hljs-keyword">case</span> <span class="hljs-string">'cancellable'</span>:
                                        <span class="hljs-keyword">break</span>;
                            }
                        });
                        <span class="hljs-keyword">if</span> (!isInstanceCall &amp;&amp; cancellable) {
                            timeoutDeferred = $q.defer();
                            httpConfig.timeout = timeoutDeferred.promise;
                            <span class="hljs-keyword">if</span> (numericTimeout) {
                                numericTimeoutPromise = $timeout(timeoutDeferred.resolve, numericTimeout);
                            }
                        }
                        <span class="hljs-keyword">if</span> (hasBody) httpConfig.data = data;
                        route.setUrlParams(httpConfig,
                            extend({}, extractParams(data, action.params || {}), params),
                            action.url);
                        <span class="hljs-keyword">var</span> promise = $http(httpConfig).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) </span>{
                            <span class="hljs-keyword">var</span> data = response.data;
                            <span class="hljs-keyword">if</span> (data) {
                                <span class="hljs-keyword">if</span> (angular.isArray(data) !== (!!action.isArray)) {
                                    <span class="hljs-keyword">throw</span> $resourceMinErr(<span class="hljs-string">'badcfg'</span>,
                                        <span class="hljs-string">'Error in resource configuration for action `{0}`. Expected response to '</span> +
                                        <span class="hljs-string">'contain an {1} but got an {2} (Request: {3} {4})'</span>, name, action.isArray ? <span class="hljs-string">'array'</span> : <span class="hljs-string">'object'</span>,
                                        angular.isArray(data) ? <span class="hljs-string">'array'</span> : <span class="hljs-string">'object'</span>, httpConfig.method, httpConfig.url);
                                }
                                <span class="hljs-keyword">if</span> (action.isArray) {
                                    value.length = <span class="hljs-number">0</span>;
                                    forEach(data, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">item</span>) </span>{
                                        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> item === <span class="hljs-string">"object"</span>) {
                                            value.push(<span class="hljs-keyword">new</span> Resource(item));
                                        } <span class="hljs-keyword">else</span> {
                                            value.push(item);
                                        }
                                    });
                                } <span class="hljs-keyword">else</span> {
                                    <span class="hljs-keyword">var</span> promise = value.$promise;
                                    shallowClearAndCopy(data, value);
                                    value.$promise = promise;
                                }
                            }
                            response.resource = value;
                            <span class="hljs-keyword">return</span> response;
                        }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) </span>{
                            (error || noop)(response);
                            <span class="hljs-keyword">return</span> $q.reject(response);
                        });
                        promise[<span class="hljs-string">'finally'</span>](<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            value.$resolved = <span class="hljs-literal">true</span>;
                            <span class="hljs-keyword">if</span> (!isInstanceCall &amp;&amp; cancellable) {
                                value.$cancelRequest = angular.noop;
                                $timeout.cancel(numericTimeoutPromise);
                                timeoutDeferred = numericTimeoutPromise = httpConfig.timeout = <span class="hljs-literal">null</span>;
                            }
                        });
                        promise = promise.then(
                            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) </span>{
                                <span class="hljs-keyword">var</span> value = responseInterceptor(response);
                                (success || noop)(value, response.headers);
                                <span class="hljs-keyword">return</span> value;
                            },
                            responseErrorInterceptor);
                        <span class="hljs-keyword">if</span> (!isInstanceCall) {
                            value.$promise = promise;
                            value.$resolved = <span class="hljs-literal">false</span>;
                            <span class="hljs-keyword">if</span> (cancellable) value.$cancelRequest = timeoutDeferred.resolve;
                            <span class="hljs-keyword">return</span> value;
                        }
                        <span class="hljs-keyword">return</span> promise;
                    };
                    Resource.prototype[<span class="hljs-string">'$'</span> + name] = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">params, success, error</span>) </span>{
                        <span class="hljs-keyword">if</span> (isFunction(params)) {
                            error = success;
                            success = params;
                            params = {};
                        }
                        <span class="hljs-keyword">var</span> result = Resource[name].call(<span class="hljs-keyword">this</span>, params, <span class="hljs-keyword">this</span>, success, error);
                        <span class="hljs-keyword">return</span> result.$promise || result;
                    };
                });
                Resource.bind = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">additionalParamDefaults</span>) </span>{
                    <span class="hljs-keyword">return</span> resourceFactory(url, extend({}, paramDefaults, additionalParamDefaults), actions);
                };
                <span class="hljs-keyword">return</span> Resource;
            }
            <span class="hljs-keyword">return</span> resourceFactory;
        }];
    });
})(<span class="hljs-built_in">window</span>, <span class="hljs-built_in">window</span>.angular);;
<span class="hljs-comment">/*! RESOURCE: /scripts/angular_1.5.8/angular-route.js */</span>
(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">window, angular</span>) </span>{
<span class="hljs-meta">    'use strict'</span>;

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">shallowCopy</span>(<span class="hljs-params">src, dst</span>) </span>{
        <span class="hljs-keyword">if</span> (isArray(src)) {
            dst = dst || [];
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, ii = src.length; i &lt; ii; i++) {
                dst[i] = src[i];
            }
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isObject(src)) {
            dst = dst || {};
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> src) {
                <span class="hljs-keyword">if</span> (!(key.charAt(<span class="hljs-number">0</span>) === <span class="hljs-string">'$'</span> &amp;&amp; key.charAt(<span class="hljs-number">1</span>) === <span class="hljs-string">'$'</span>)) {
                    dst[key] = src[key];
                }
            }
        }
        <span class="hljs-keyword">return</span> dst || src;
    }
    <span class="hljs-keyword">var</span> isArray;
    <span class="hljs-keyword">var</span> isObject;
    <span class="hljs-keyword">var</span> ngRouteModule = angular.module(<span class="hljs-string">'ngRoute'</span>, [<span class="hljs-string">'ng'</span>]).
    provider(<span class="hljs-string">'$route'</span>, $RouteProvider),
        $routeMinErr = angular.$$minErr(<span class="hljs-string">'ngRoute'</span>);

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$RouteProvider</span>(<span class="hljs-params"></span>) </span>{
        isArray = angular.isArray;
        isObject = angular.isObject;

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">inherit</span>(<span class="hljs-params">parent, extra</span>) </span>{
            <span class="hljs-keyword">return</span> angular.extend(<span class="hljs-built_in">Object</span>.create(parent), extra);
        }
        <span class="hljs-keyword">var</span> routes = {};
        <span class="hljs-keyword">this</span>.when = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">path, route</span>) </span>{
            <span class="hljs-keyword">var</span> routeCopy = shallowCopy(route);
            <span class="hljs-keyword">if</span> (angular.isUndefined(routeCopy.reloadOnSearch)) {
                routeCopy.reloadOnSearch = <span class="hljs-literal">true</span>;
            }
            <span class="hljs-keyword">if</span> (angular.isUndefined(routeCopy.caseInsensitiveMatch)) {
                routeCopy.caseInsensitiveMatch = <span class="hljs-keyword">this</span>.caseInsensitiveMatch;
            }
            routes[path] = angular.extend(
                routeCopy,
                path &amp;&amp; pathRegExp(path, routeCopy)
            );
            <span class="hljs-keyword">if</span> (path) {
                <span class="hljs-keyword">var</span> redirectPath = (path[path.length - <span class="hljs-number">1</span>] == <span class="hljs-string">'/'</span>) ?
                    path.substr(<span class="hljs-number">0</span>, path.length - <span class="hljs-number">1</span>) :
                    path + <span class="hljs-string">'/'</span>;
                routes[redirectPath] = angular.extend({
                        <span class="hljs-attr">redirectTo</span>: path
                    },
                    pathRegExp(redirectPath, routeCopy)
                );
            }
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        };
        <span class="hljs-keyword">this</span>.caseInsensitiveMatch = <span class="hljs-literal">false</span>;

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pathRegExp</span>(<span class="hljs-params">path, opts</span>) </span>{
            <span class="hljs-keyword">var</span> insensitive = opts.caseInsensitiveMatch,
                ret = {
                    <span class="hljs-attr">originalPath</span>: path,
                    <span class="hljs-attr">regexp</span>: path
                },
                keys = ret.keys = [];
            path = path
                .replace(<span class="hljs-regexp">/([().])/g</span>, <span class="hljs-string">'\\$1'</span>)
                .replace(<span class="hljs-regexp">/(\/)?:(\w+)(\*\?|[\?\*])?/g</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">_, slash, key, option</span>) </span>{
                    <span class="hljs-keyword">var</span> optional = (option === <span class="hljs-string">'?'</span> || option === <span class="hljs-string">'*?'</span>) ? <span class="hljs-string">'?'</span> : <span class="hljs-literal">null</span>;
                    <span class="hljs-keyword">var</span> star = (option === <span class="hljs-string">'*'</span> || option === <span class="hljs-string">'*?'</span>) ? <span class="hljs-string">'*'</span> : <span class="hljs-literal">null</span>;
                    keys.push({
                        <span class="hljs-attr">name</span>: key,
                        <span class="hljs-attr">optional</span>: !!optional
                    });
                    slash = slash || <span class="hljs-string">''</span>;
                    <span class="hljs-keyword">return</span> <span class="hljs-string">''</span> +
                        (optional ? <span class="hljs-string">''</span> : slash) +
                        <span class="hljs-string">'(?:'</span> +
                        (optional ? slash : <span class="hljs-string">''</span>) +
                        (star &amp;&amp; <span class="hljs-string">'(.+?)'</span> || <span class="hljs-string">'([^/]+)'</span>) +
                        (optional || <span class="hljs-string">''</span>) +
                        <span class="hljs-string">')'</span> +
                        (optional || <span class="hljs-string">''</span>);
                })
                .replace(<span class="hljs-regexp">/([\/$\*])/g</span>, <span class="hljs-string">'\\$1'</span>);
            ret.regexp = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">'^'</span> + path + <span class="hljs-string">'$'</span>, insensitive ? <span class="hljs-string">'i'</span> : <span class="hljs-string">''</span>);
            <span class="hljs-keyword">return</span> ret;
        }
        <span class="hljs-keyword">this</span>.otherwise = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">params</span>) </span>{
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> params === <span class="hljs-string">'string'</span>) {
                params = {
                    <span class="hljs-attr">redirectTo</span>: params
                };
            }
            <span class="hljs-keyword">this</span>.when(<span class="hljs-literal">null</span>, params);
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        };
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$rootScope'</span>,
            <span class="hljs-string">'$location'</span>,
            <span class="hljs-string">'$routeParams'</span>,
            <span class="hljs-string">'$q'</span>,
            <span class="hljs-string">'$injector'</span>,
            <span class="hljs-string">'$templateRequest'</span>,
            <span class="hljs-string">'$sce'</span>,
            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$rootScope, $location, $routeParams, $q, $injector, $templateRequest, $sce</span>) </span>{
                <span class="hljs-keyword">var</span> forceReload = <span class="hljs-literal">false</span>,
                    preparedRoute,
                    preparedRouteIsUpdateOnly,
                    $route = {
                        <span class="hljs-attr">routes</span>: routes,
                        <span class="hljs-attr">reload</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            forceReload = <span class="hljs-literal">true</span>;
                            <span class="hljs-keyword">var</span> fakeLocationEvent = {
                                <span class="hljs-attr">defaultPrevented</span>: <span class="hljs-literal">false</span>,
                                <span class="hljs-attr">preventDefault</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fakePreventDefault</span>(<span class="hljs-params"></span>) </span>{
                                    <span class="hljs-keyword">this</span>.defaultPrevented = <span class="hljs-literal">true</span>;
                                    forceReload = <span class="hljs-literal">false</span>;
                                }
                            };
                            $rootScope.$evalAsync(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                                prepareRoute(fakeLocationEvent);
                                <span class="hljs-keyword">if</span> (!fakeLocationEvent.defaultPrevented) commitRoute();
                            });
                        },
                        <span class="hljs-attr">updateParams</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">newParams</span>) </span>{
                            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.current &amp;&amp; <span class="hljs-keyword">this</span>.current.$$route) {
                                newParams = angular.extend({}, <span class="hljs-keyword">this</span>.current.params, newParams);
                                $location.path(interpolate(<span class="hljs-keyword">this</span>.current.$$route.originalPath, newParams));
                                $location.search(newParams);
                            } <span class="hljs-keyword">else</span> {
                                <span class="hljs-keyword">throw</span> $routeMinErr(<span class="hljs-string">'norout'</span>, <span class="hljs-string">'Tried updating route when with no current route'</span>);
                            }
                        }
                    };
                $rootScope.$on(<span class="hljs-string">'$locationChangeStart'</span>, prepareRoute);
                $rootScope.$on(<span class="hljs-string">'$locationChangeSuccess'</span>, commitRoute);
                <span class="hljs-keyword">return</span> $route;

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">switchRouteMatcher</span>(<span class="hljs-params">on, route</span>) </span>{
                    <span class="hljs-keyword">var</span> keys = route.keys,
                        params = {};
                    <span class="hljs-keyword">if</span> (!route.regexp) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
                    <span class="hljs-keyword">var</span> m = route.regexp.exec(on);
                    <span class="hljs-keyword">if</span> (!m) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>, len = m.length; i &lt; len; ++i) {
                        <span class="hljs-keyword">var</span> key = keys[i - <span class="hljs-number">1</span>];
                        <span class="hljs-keyword">var</span> val = m[i];
                        <span class="hljs-keyword">if</span> (key &amp;&amp; val) {
                            params[key.name] = val;
                        }
                    }
                    <span class="hljs-keyword">return</span> params;
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">prepareRoute</span>(<span class="hljs-params">$locationEvent</span>) </span>{
                    <span class="hljs-keyword">var</span> lastRoute = $route.current;
                    preparedRoute = parseRoute();
                    preparedRouteIsUpdateOnly = preparedRoute &amp;&amp; lastRoute &amp;&amp; preparedRoute.$$route === lastRoute.$$route &amp;&amp;
                        angular.equals(preparedRoute.pathParams, lastRoute.pathParams) &amp;&amp;
                        !preparedRoute.reloadOnSearch &amp;&amp; !forceReload;
                    <span class="hljs-keyword">if</span> (!preparedRouteIsUpdateOnly &amp;&amp; (lastRoute || preparedRoute)) {
                        <span class="hljs-keyword">if</span> ($rootScope.$broadcast(<span class="hljs-string">'$routeChangeStart'</span>, preparedRoute, lastRoute).defaultPrevented) {
                            <span class="hljs-keyword">if</span> ($locationEvent) {
                                $locationEvent.preventDefault();
                            }
                        }
                    }
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">commitRoute</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">var</span> lastRoute = $route.current;
                    <span class="hljs-keyword">var</span> nextRoute = preparedRoute;
                    <span class="hljs-keyword">if</span> (preparedRouteIsUpdateOnly) {
                        lastRoute.params = nextRoute.params;
                        angular.copy(lastRoute.params, $routeParams);
                        $rootScope.$broadcast(<span class="hljs-string">'$routeUpdate'</span>, lastRoute);
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (nextRoute || lastRoute) {
                        forceReload = <span class="hljs-literal">false</span>;
                        $route.current = nextRoute;
                        <span class="hljs-keyword">if</span> (nextRoute) {
                            <span class="hljs-keyword">if</span> (nextRoute.redirectTo) {
                                <span class="hljs-keyword">if</span> (angular.isString(nextRoute.redirectTo)) {
                                    $location.path(interpolate(nextRoute.redirectTo, nextRoute.params)).search(nextRoute.params)
                                        .replace();
                                } <span class="hljs-keyword">else</span> {
                                    $location.url(nextRoute.redirectTo(nextRoute.pathParams, $location.path(), $location.search()))
                                        .replace();
                                }
                            }
                        }
                        $q.when(nextRoute).
                        then(resolveLocals).
                        then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">locals</span>) </span>{
                            <span class="hljs-keyword">if</span> (nextRoute == $route.current) {
                                <span class="hljs-keyword">if</span> (nextRoute) {
                                    nextRoute.locals = locals;
                                    angular.copy(nextRoute.params, $routeParams);
                                }
                                $rootScope.$broadcast(<span class="hljs-string">'$routeChangeSuccess'</span>, nextRoute, lastRoute);
                            }
                        }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) </span>{
                            <span class="hljs-keyword">if</span> (nextRoute == $route.current) {
                                $rootScope.$broadcast(<span class="hljs-string">'$routeChangeError'</span>, nextRoute, lastRoute, error);
                            }
                        });
                    }
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resolveLocals</span>(<span class="hljs-params">route</span>) </span>{
                    <span class="hljs-keyword">if</span> (route) {
                        <span class="hljs-keyword">var</span> locals = angular.extend({}, route.resolve);
                        angular.forEach(locals, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, key</span>) </span>{
                            locals[key] = angular.isString(value) ?
                                $injector.get(value) :
                                $injector.invoke(value, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, key);
                        });
                        <span class="hljs-keyword">var</span> template = getTemplateFor(route);
                        <span class="hljs-keyword">if</span> (angular.isDefined(template)) {
                            locals[<span class="hljs-string">'$template'</span>] = template;
                        }
                        <span class="hljs-keyword">return</span> $q.all(locals);
                    }
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getTemplateFor</span>(<span class="hljs-params">route</span>) </span>{
                    <span class="hljs-keyword">var</span> template, templateUrl;
                    <span class="hljs-keyword">if</span> (angular.isDefined(template = route.template)) {
                        <span class="hljs-keyword">if</span> (angular.isFunction(template)) {
                            template = template(route.params);
                        }
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (angular.isDefined(templateUrl = route.templateUrl)) {
                        <span class="hljs-keyword">if</span> (angular.isFunction(templateUrl)) {
                            templateUrl = templateUrl(route.params);
                        }
                        <span class="hljs-keyword">if</span> (angular.isDefined(templateUrl)) {
                            route.loadedTemplateUrl = $sce.valueOf(templateUrl);
                            template = $templateRequest(templateUrl);
                        }
                    }
                    <span class="hljs-keyword">return</span> template;
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseRoute</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">var</span> params, match;
                    angular.forEach(routes, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">route, path</span>) </span>{
                        <span class="hljs-keyword">if</span> (!match &amp;&amp; (params = switchRouteMatcher($location.path(), route))) {
                            match = inherit(route, {
                                <span class="hljs-attr">params</span>: angular.extend({}, $location.search(), params),
                                <span class="hljs-attr">pathParams</span>: params
                            });
                            match.$$route = route;
                        }
                    });
                    <span class="hljs-keyword">return</span> match || routes[<span class="hljs-literal">null</span>] &amp;&amp; inherit(routes[<span class="hljs-literal">null</span>], {
                        <span class="hljs-attr">params</span>: {},
                        <span class="hljs-attr">pathParams</span>: {}
                    });
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">interpolate</span>(<span class="hljs-params">string, params</span>) </span>{
                    <span class="hljs-keyword">var</span> result = [];
                    angular.forEach((string || <span class="hljs-string">''</span>).split(<span class="hljs-string">':'</span>), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">segment, i</span>) </span>{
                        <span class="hljs-keyword">if</span> (i === <span class="hljs-number">0</span>) {
                            result.push(segment);
                        } <span class="hljs-keyword">else</span> {
                            <span class="hljs-keyword">var</span> segmentMatch = segment.match(<span class="hljs-regexp">/(\w+)(?:[?*])?(.*)/</span>);
                            <span class="hljs-keyword">var</span> key = segmentMatch[<span class="hljs-number">1</span>];
                            result.push(params[key]);
                            result.push(segmentMatch[<span class="hljs-number">2</span>] || <span class="hljs-string">''</span>);
                            <span class="hljs-keyword">delete</span> params[key];
                        }
                    });
                    <span class="hljs-keyword">return</span> result.join(<span class="hljs-string">''</span>);
                }
            }
        ];
    }
    ngRouteModule.provider(<span class="hljs-string">'$routeParams'</span>, $RouteParamsProvider);

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$RouteParamsProvider</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.$get = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> {};
        };
    }
    ngRouteModule.directive(<span class="hljs-string">'ngView'</span>, ngViewFactory);
    ngRouteModule.directive(<span class="hljs-string">'ngView'</span>, ngViewFillContentFactory);
    ngViewFactory.$inject = [<span class="hljs-string">'$route'</span>, <span class="hljs-string">'$anchorScroll'</span>, <span class="hljs-string">'$animate'</span>];

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngViewFactory</span>(<span class="hljs-params">$route, $anchorScroll, $animate</span>) </span>{
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">restrict</span>: <span class="hljs-string">'ECA'</span>,
            <span class="hljs-attr">terminal</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">priority</span>: <span class="hljs-number">400</span>,
            <span class="hljs-attr">transclude</span>: <span class="hljs-string">'element'</span>,
            <span class="hljs-attr">link</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, $element, attr, ctrl, $transclude</span>) </span>{
                <span class="hljs-keyword">var</span> currentScope,
                    currentElement,
                    previousLeaveAnimation,
                    autoScrollExp = attr.autoscroll,
                    onloadExp = attr.onload || <span class="hljs-string">''</span>;
                scope.$on(<span class="hljs-string">'$routeChangeSuccess'</span>, update);
                update();

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cleanupLastView</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">if</span> (previousLeaveAnimation) {
                        $animate.cancel(previousLeaveAnimation);
                        previousLeaveAnimation = <span class="hljs-literal">null</span>;
                    }
                    <span class="hljs-keyword">if</span> (currentScope) {
                        currentScope.$destroy();
                        currentScope = <span class="hljs-literal">null</span>;
                    }
                    <span class="hljs-keyword">if</span> (currentElement) {
                        previousLeaveAnimation = $animate.leave(currentElement);
                        previousLeaveAnimation.then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            previousLeaveAnimation = <span class="hljs-literal">null</span>;
                        });
                        currentElement = <span class="hljs-literal">null</span>;
                    }
                }

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">update</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">var</span> locals = $route.current &amp;&amp; $route.current.locals,
                        template = locals &amp;&amp; locals.$template;
                    <span class="hljs-keyword">if</span> (angular.isDefined(template)) {
                        <span class="hljs-keyword">var</span> newScope = scope.$<span class="hljs-keyword">new</span>();
                        <span class="hljs-keyword">var</span> current = $route.current;
                        <span class="hljs-keyword">var</span> clone = $transclude(newScope, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">clone</span>) </span>{
                            $animate.enter(clone, <span class="hljs-literal">null</span>, currentElement || $element).then(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onNgViewEnter</span>(<span class="hljs-params"></span>) </span>{
                                <span class="hljs-keyword">if</span> (angular.isDefined(autoScrollExp) &amp;&amp;
                                    (!autoScrollExp || scope.$<span class="hljs-built_in">eval</span>(autoScrollExp))) {
                                    $anchorScroll();
                                }
                            });
                            cleanupLastView();
                        });
                        currentElement = clone;
                        currentScope = current.scope = newScope;
                        currentScope.$emit(<span class="hljs-string">'$viewContentLoaded'</span>);
                        currentScope.$<span class="hljs-built_in">eval</span>(onloadExp);
                    } <span class="hljs-keyword">else</span> {
                        cleanupLastView();
                    }
                }
            }
        };
    }
    ngViewFillContentFactory.$inject = [<span class="hljs-string">'$compile'</span>, <span class="hljs-string">'$controller'</span>, <span class="hljs-string">'$route'</span>];

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngViewFillContentFactory</span>(<span class="hljs-params">$compile, $controller, $route</span>) </span>{
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">restrict</span>: <span class="hljs-string">'ECA'</span>,
            <span class="hljs-attr">priority</span>: <span class="hljs-number">-400</span>,
            <span class="hljs-attr">link</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, $element</span>) </span>{
                <span class="hljs-keyword">var</span> current = $route.current,
                    locals = current.locals;
                $element.html(locals.$template);
                <span class="hljs-keyword">var</span> link = $compile($element.contents());
                <span class="hljs-keyword">if</span> (current.controller) {
                    locals.$scope = scope;
                    <span class="hljs-keyword">var</span> controller = $controller(current.controller, locals);
                    <span class="hljs-keyword">if</span> (current.controllerAs) {
                        scope[current.controllerAs] = controller;
                    }
                    $element.data(<span class="hljs-string">'$ngControllerController'</span>, controller);
                    $element.children().data(<span class="hljs-string">'$ngControllerController'</span>, controller);
                }
                scope[current.resolveAs || <span class="hljs-string">'$resolve'</span>] = locals;
                link(scope);
            }
        };
    }
})(<span class="hljs-built_in">window</span>, <span class="hljs-built_in">window</span>.angular);;
<span class="hljs-comment">/*! RESOURCE: /scripts/angular_1.5.8/angular-touch.js */</span>
(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">window, angular</span>) </span>{
<span class="hljs-meta">    'use strict'</span>;
    <span class="hljs-keyword">var</span> ngTouch = angular.module(<span class="hljs-string">'ngTouch'</span>, []);
    ngTouch.provider(<span class="hljs-string">'$touch'</span>, $TouchProvider);

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">nodeName_</span>(<span class="hljs-params">element</span>) </span>{
        <span class="hljs-keyword">return</span> angular.lowercase(element.nodeName || (element[<span class="hljs-number">0</span>] &amp;&amp; element[<span class="hljs-number">0</span>].nodeName));
    }
    $TouchProvider.$inject = [<span class="hljs-string">'$provide'</span>, <span class="hljs-string">'$compileProvider'</span>];

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$TouchProvider</span>(<span class="hljs-params">$provide, $compileProvider</span>) </span>{
        <span class="hljs-keyword">var</span> ngClickOverrideEnabled = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">var</span> ngClickDirectiveAdded = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">this</span>.ngClickOverrideEnabled = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">enabled</span>) </span>{
            <span class="hljs-keyword">if</span> (angular.isDefined(enabled)) {
                <span class="hljs-keyword">if</span> (enabled &amp;&amp; !ngClickDirectiveAdded) {
                    ngClickDirectiveAdded = <span class="hljs-literal">true</span>;
                    ngTouchClickDirectiveFactory.$$moduleName = <span class="hljs-string">'ngTouch'</span>;
                    $compileProvider.directive(<span class="hljs-string">'ngClick'</span>, ngTouchClickDirectiveFactory);
                    $provide.decorator(<span class="hljs-string">'ngClickDirective'</span>, [<span class="hljs-string">'$delegate'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$delegate</span>) </span>{
                        <span class="hljs-keyword">if</span> (ngClickOverrideEnabled) {
                            $delegate.shift();
                        } <span class="hljs-keyword">else</span> {
                            <span class="hljs-keyword">var</span> i = $delegate.length - <span class="hljs-number">1</span>;
                            <span class="hljs-keyword">while</span> (i &gt;= <span class="hljs-number">0</span>) {
                                <span class="hljs-keyword">if</span> ($delegate[i].$$moduleName === <span class="hljs-string">'ngTouch'</span>) {
                                    $delegate.splice(i, <span class="hljs-number">1</span>);
                                    <span class="hljs-keyword">break</span>;
                                }
                                i--;
                            }
                        }
                        <span class="hljs-keyword">return</span> $delegate;
                    }]);
                }
                ngClickOverrideEnabled = enabled;
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
            }
            <span class="hljs-keyword">return</span> ngClickOverrideEnabled;
        };
        <span class="hljs-keyword">this</span>.$get = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">ngClickOverrideEnabled</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">return</span> ngClickOverrideEnabled;
                }
            };
        };
    }
    ngTouch.factory(<span class="hljs-string">'$swipe'</span>, [<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> MOVE_BUFFER_RADIUS = <span class="hljs-number">10</span>;
        <span class="hljs-keyword">var</span> POINTER_EVENTS = {
            <span class="hljs-string">'mouse'</span>: {
                <span class="hljs-attr">start</span>: <span class="hljs-string">'mousedown'</span>,
                <span class="hljs-attr">move</span>: <span class="hljs-string">'mousemove'</span>,
                <span class="hljs-attr">end</span>: <span class="hljs-string">'mouseup'</span>
            },
            <span class="hljs-string">'touch'</span>: {
                <span class="hljs-attr">start</span>: <span class="hljs-string">'touchstart'</span>,
                <span class="hljs-attr">move</span>: <span class="hljs-string">'touchmove'</span>,
                <span class="hljs-attr">end</span>: <span class="hljs-string">'touchend'</span>,
                <span class="hljs-attr">cancel</span>: <span class="hljs-string">'touchcancel'</span>
            },
            <span class="hljs-string">'pointer'</span>: {
                <span class="hljs-attr">start</span>: <span class="hljs-string">'pointerdown'</span>,
                <span class="hljs-attr">move</span>: <span class="hljs-string">'pointermove'</span>,
                <span class="hljs-attr">end</span>: <span class="hljs-string">'pointerup'</span>,
                <span class="hljs-attr">cancel</span>: <span class="hljs-string">'pointercancel'</span>
            }
        };

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getCoordinates</span>(<span class="hljs-params">event</span>) </span>{
            <span class="hljs-keyword">var</span> originalEvent = event.originalEvent || event;
            <span class="hljs-keyword">var</span> touches = originalEvent.touches &amp;&amp; originalEvent.touches.length ? originalEvent.touches : [originalEvent];
            <span class="hljs-keyword">var</span> e = (originalEvent.changedTouches &amp;&amp; originalEvent.changedTouches[<span class="hljs-number">0</span>]) || touches[<span class="hljs-number">0</span>];
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">x</span>: e.clientX,
                <span class="hljs-attr">y</span>: e.clientY
            };
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getEvents</span>(<span class="hljs-params">pointerTypes, eventType</span>) </span>{
            <span class="hljs-keyword">var</span> res = [];
            angular.forEach(pointerTypes, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">pointerType</span>) </span>{
                <span class="hljs-keyword">var</span> eventName = POINTER_EVENTS[pointerType][eventType];
                <span class="hljs-keyword">if</span> (eventName) {
                    res.push(eventName);
                }
            });
            <span class="hljs-keyword">return</span> res.join(<span class="hljs-string">' '</span>);
        }
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">bind</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, eventHandlers, pointerTypes</span>) </span>{
                <span class="hljs-keyword">var</span> totalX, totalY;
                <span class="hljs-keyword">var</span> startCoords;
                <span class="hljs-keyword">var</span> lastPos;
                <span class="hljs-keyword">var</span> active = <span class="hljs-literal">false</span>;
                pointerTypes = pointerTypes || [<span class="hljs-string">'mouse'</span>, <span class="hljs-string">'touch'</span>, <span class="hljs-string">'pointer'</span>];
                element.on(getEvents(pointerTypes, <span class="hljs-string">'start'</span>), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
                    startCoords = getCoordinates(event);
                    active = <span class="hljs-literal">true</span>;
                    totalX = <span class="hljs-number">0</span>;
                    totalY = <span class="hljs-number">0</span>;
                    lastPos = startCoords;
                    eventHandlers[<span class="hljs-string">'start'</span>] &amp;&amp; eventHandlers[<span class="hljs-string">'start'</span>](startCoords, event);
                });
                <span class="hljs-keyword">var</span> events = getEvents(pointerTypes, <span class="hljs-string">'cancel'</span>);
                <span class="hljs-keyword">if</span> (events) {
                    element.on(events, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
                        active = <span class="hljs-literal">false</span>;
                        eventHandlers[<span class="hljs-string">'cancel'</span>] &amp;&amp; eventHandlers[<span class="hljs-string">'cancel'</span>](event);
                    });
                }
                element.on(getEvents(pointerTypes, <span class="hljs-string">'move'</span>), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
                    <span class="hljs-keyword">if</span> (!active) <span class="hljs-keyword">return</span>;
                    <span class="hljs-keyword">if</span> (!startCoords) <span class="hljs-keyword">return</span>;
                    <span class="hljs-keyword">var</span> coords = getCoordinates(event);
                    totalX += <span class="hljs-built_in">Math</span>.abs(coords.x - lastPos.x);
                    totalY += <span class="hljs-built_in">Math</span>.abs(coords.y - lastPos.y);
                    lastPos = coords;
                    <span class="hljs-keyword">if</span> (totalX &lt; MOVE_BUFFER_RADIUS &amp;&amp; totalY &lt; MOVE_BUFFER_RADIUS) {
                        <span class="hljs-keyword">return</span>;
                    }
                    <span class="hljs-keyword">if</span> (totalY &gt; totalX) {
                        active = <span class="hljs-literal">false</span>;
                        eventHandlers[<span class="hljs-string">'cancel'</span>] &amp;&amp; eventHandlers[<span class="hljs-string">'cancel'</span>](event);
                        <span class="hljs-keyword">return</span>;
                    } <span class="hljs-keyword">else</span> {
                        event.preventDefault();
                        eventHandlers[<span class="hljs-string">'move'</span>] &amp;&amp; eventHandlers[<span class="hljs-string">'move'</span>](coords, event);
                    }
                });
                element.on(getEvents(pointerTypes, <span class="hljs-string">'end'</span>), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
                    <span class="hljs-keyword">if</span> (!active) <span class="hljs-keyword">return</span>;
                    active = <span class="hljs-literal">false</span>;
                    eventHandlers[<span class="hljs-string">'end'</span>] &amp;&amp; eventHandlers[<span class="hljs-string">'end'</span>](getCoordinates(event), event);
                });
            }
        };
    }]);
    <span class="hljs-keyword">var</span> ngTouchClickDirectiveFactory = [<span class="hljs-string">'$parse'</span>, <span class="hljs-string">'$timeout'</span>, <span class="hljs-string">'$rootElement'</span>,
        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$parse, $timeout, $rootElement</span>) </span>{
            <span class="hljs-keyword">var</span> TAP_DURATION = <span class="hljs-number">750</span>;
            <span class="hljs-keyword">var</span> MOVE_TOLERANCE = <span class="hljs-number">12</span>;
            <span class="hljs-keyword">var</span> PREVENT_DURATION = <span class="hljs-number">2500</span>;
            <span class="hljs-keyword">var</span> CLICKBUSTER_THRESHOLD = <span class="hljs-number">25</span>;
            <span class="hljs-keyword">var</span> ACTIVE_CLASS_NAME = <span class="hljs-string">'ng-click-active'</span>;
            <span class="hljs-keyword">var</span> lastPreventedTime;
            <span class="hljs-keyword">var</span> touchCoordinates;
            <span class="hljs-keyword">var</span> lastLabelClickCoordinates;

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hit</span>(<span class="hljs-params">x1, y1, x2, y2</span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.abs(x1 - x2) &lt; CLICKBUSTER_THRESHOLD &amp;&amp; <span class="hljs-built_in">Math</span>.abs(y1 - y2) &lt; CLICKBUSTER_THRESHOLD;
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkAllowableRegions</span>(<span class="hljs-params">touchCoordinates, x, y</span>) </span>{
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; touchCoordinates.length; i += <span class="hljs-number">2</span>) {
                    <span class="hljs-keyword">if</span> (hit(touchCoordinates[i], touchCoordinates[i + <span class="hljs-number">1</span>], x, y)) {
                        touchCoordinates.splice(i, i + <span class="hljs-number">2</span>);
                        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                    }
                }
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onClick</span>(<span class="hljs-params">event</span>) </span>{
                <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Date</span>.now() - lastPreventedTime &gt; PREVENT_DURATION) {
                    <span class="hljs-keyword">return</span>;
                }
                <span class="hljs-keyword">var</span> touches = event.touches &amp;&amp; event.touches.length ? event.touches : [event];
                <span class="hljs-keyword">var</span> x = touches[<span class="hljs-number">0</span>].clientX;
                <span class="hljs-keyword">var</span> y = touches[<span class="hljs-number">0</span>].clientY;
                <span class="hljs-keyword">if</span> (x &lt; <span class="hljs-number">1</span> &amp;&amp; y &lt; <span class="hljs-number">1</span>) {
                    <span class="hljs-keyword">return</span>;
                }
                <span class="hljs-keyword">if</span> (lastLabelClickCoordinates &amp;&amp;
                    lastLabelClickCoordinates[<span class="hljs-number">0</span>] === x &amp;&amp; lastLabelClickCoordinates[<span class="hljs-number">1</span>] === y) {
                    <span class="hljs-keyword">return</span>;
                }
                <span class="hljs-keyword">if</span> (lastLabelClickCoordinates) {
                    lastLabelClickCoordinates = <span class="hljs-literal">null</span>;
                }
                <span class="hljs-keyword">if</span> (nodeName_(event.target) === <span class="hljs-string">'label'</span>) {
                    lastLabelClickCoordinates = [x, y];
                }
                <span class="hljs-keyword">if</span> (checkAllowableRegions(touchCoordinates, x, y)) {
                    <span class="hljs-keyword">return</span>;
                }
                event.stopPropagation();
                event.preventDefault();
                event.target &amp;&amp; event.target.blur &amp;&amp; event.target.blur();
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onTouchStart</span>(<span class="hljs-params">event</span>) </span>{
                <span class="hljs-keyword">var</span> touches = event.touches &amp;&amp; event.touches.length ? event.touches : [event];
                <span class="hljs-keyword">var</span> x = touches[<span class="hljs-number">0</span>].clientX;
                <span class="hljs-keyword">var</span> y = touches[<span class="hljs-number">0</span>].clientY;
                touchCoordinates.push(x, y);
                $timeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; touchCoordinates.length; i += <span class="hljs-number">2</span>) {
                        <span class="hljs-keyword">if</span> (touchCoordinates[i] == x &amp;&amp; touchCoordinates[i + <span class="hljs-number">1</span>] == y) {
                            touchCoordinates.splice(i, i + <span class="hljs-number">2</span>);
                            <span class="hljs-keyword">return</span>;
                        }
                    }
                }, PREVENT_DURATION, <span class="hljs-literal">false</span>);
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">preventGhostClick</span>(<span class="hljs-params">x, y</span>) </span>{
                <span class="hljs-keyword">if</span> (!touchCoordinates) {
                    $rootElement[<span class="hljs-number">0</span>].addEventListener(<span class="hljs-string">'click'</span>, onClick, <span class="hljs-literal">true</span>);
                    $rootElement[<span class="hljs-number">0</span>].addEventListener(<span class="hljs-string">'touchstart'</span>, onTouchStart, <span class="hljs-literal">true</span>);
                    touchCoordinates = [];
                }
                lastPreventedTime = <span class="hljs-built_in">Date</span>.now();
                checkAllowableRegions(touchCoordinates, x, y);
            }
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, element, attr</span>) </span>{
                <span class="hljs-keyword">var</span> clickHandler = $parse(attr.ngClick),
                    tapping = <span class="hljs-literal">false</span>,
                    tapElement,
                    startTime,
                    touchStartX,
                    touchStartY;

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resetState</span>(<span class="hljs-params"></span>) </span>{
                    tapping = <span class="hljs-literal">false</span>;
                    element.removeClass(ACTIVE_CLASS_NAME);
                }
                element.on(<span class="hljs-string">'touchstart'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
                    tapping = <span class="hljs-literal">true</span>;
                    tapElement = event.target ? event.target : event.srcElement;
                    <span class="hljs-keyword">if</span> (tapElement.nodeType == <span class="hljs-number">3</span>) {
                        tapElement = tapElement.parentNode;
                    }
                    element.addClass(ACTIVE_CLASS_NAME);
                    startTime = <span class="hljs-built_in">Date</span>.now();
                    <span class="hljs-keyword">var</span> originalEvent = event.originalEvent || event;
                    <span class="hljs-keyword">var</span> touches = originalEvent.touches &amp;&amp; originalEvent.touches.length ? originalEvent.touches : [originalEvent];
                    <span class="hljs-keyword">var</span> e = touches[<span class="hljs-number">0</span>];
                    touchStartX = e.clientX;
                    touchStartY = e.clientY;
                });
                element.on(<span class="hljs-string">'touchcancel'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
                    resetState();
                });
                element.on(<span class="hljs-string">'touchend'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
                    <span class="hljs-keyword">var</span> diff = <span class="hljs-built_in">Date</span>.now() - startTime;
                    <span class="hljs-keyword">var</span> originalEvent = event.originalEvent || event;
                    <span class="hljs-keyword">var</span> touches = (originalEvent.changedTouches &amp;&amp; originalEvent.changedTouches.length) ?
                        originalEvent.changedTouches :
                        ((originalEvent.touches &amp;&amp; originalEvent.touches.length) ? originalEvent.touches : [originalEvent]);
                    <span class="hljs-keyword">var</span> e = touches[<span class="hljs-number">0</span>];
                    <span class="hljs-keyword">var</span> x = e.clientX;
                    <span class="hljs-keyword">var</span> y = e.clientY;
                    <span class="hljs-keyword">var</span> dist = <span class="hljs-built_in">Math</span>.sqrt(<span class="hljs-built_in">Math</span>.pow(x - touchStartX, <span class="hljs-number">2</span>) + <span class="hljs-built_in">Math</span>.pow(y - touchStartY, <span class="hljs-number">2</span>));
                    <span class="hljs-keyword">if</span> (tapping &amp;&amp; diff &lt; TAP_DURATION &amp;&amp; dist &lt; MOVE_TOLERANCE) {
                        preventGhostClick(x, y);
                        <span class="hljs-keyword">if</span> (tapElement) {
                            tapElement.blur();
                        }
                        <span class="hljs-keyword">if</span> (!angular.isDefined(attr.disabled) || attr.disabled === <span class="hljs-literal">false</span>) {
                            element.triggerHandler(<span class="hljs-string">'click'</span>, [event]);
                        }
                    }
                    resetState();
                });
                element.onclick = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{};
                element.on(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event, touchend</span>) </span>{
                    scope.$apply(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        clickHandler(scope, {
                            <span class="hljs-attr">$event</span>: (touchend || event)
                        });
                    });
                });
                element.on(<span class="hljs-string">'mousedown'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
                    element.addClass(ACTIVE_CLASS_NAME);
                });
                element.on(<span class="hljs-string">'mousemove mouseup'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
                    element.removeClass(ACTIVE_CLASS_NAME);
                });
            };
        }
    ];

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeSwipeDirective</span>(<span class="hljs-params">directiveName, direction, eventName</span>) </span>{
        ngTouch.directive(directiveName, [<span class="hljs-string">'$parse'</span>, <span class="hljs-string">'$swipe'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$parse, $swipe</span>) </span>{
            <span class="hljs-keyword">var</span> MAX_VERTICAL_DISTANCE = <span class="hljs-number">75</span>;
            <span class="hljs-keyword">var</span> MAX_VERTICAL_RATIO = <span class="hljs-number">0.3</span>;
            <span class="hljs-keyword">var</span> MIN_HORIZONTAL_DISTANCE = <span class="hljs-number">30</span>;
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, element, attr</span>) </span>{
                <span class="hljs-keyword">var</span> swipeHandler = $parse(attr[directiveName]);
                <span class="hljs-keyword">var</span> startCoords, valid;

                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validSwipe</span>(<span class="hljs-params">coords</span>) </span>{
                    <span class="hljs-keyword">if</span> (!startCoords) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                    <span class="hljs-keyword">var</span> deltaY = <span class="hljs-built_in">Math</span>.abs(coords.y - startCoords.y);
                    <span class="hljs-keyword">var</span> deltaX = (coords.x - startCoords.x) * direction;
                    <span class="hljs-keyword">return</span> valid &amp;&amp;
                        deltaY &lt; MAX_VERTICAL_DISTANCE &amp;&amp;
                        deltaX &gt; <span class="hljs-number">0</span> &amp;&amp;
                        deltaX &gt; MIN_HORIZONTAL_DISTANCE &amp;&amp;
                        deltaY / deltaX &lt; MAX_VERTICAL_RATIO;
                }
                <span class="hljs-keyword">var</span> pointerTypes = [<span class="hljs-string">'touch'</span>];
                <span class="hljs-keyword">if</span> (!angular.isDefined(attr[<span class="hljs-string">'ngSwipeDisableMouse'</span>])) {
                    pointerTypes.push(<span class="hljs-string">'mouse'</span>);
                }
                $swipe.bind(element, {
                    <span class="hljs-string">'start'</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">coords, event</span>) </span>{
                        startCoords = coords;
                        valid = <span class="hljs-literal">true</span>;
                    },
                    <span class="hljs-string">'cancel'</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
                        valid = <span class="hljs-literal">false</span>;
                    },
                    <span class="hljs-string">'end'</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">coords, event</span>) </span>{
                        <span class="hljs-keyword">if</span> (validSwipe(coords)) {
                            scope.$apply(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                                element.triggerHandler(eventName);
                                swipeHandler(scope, {
                                    <span class="hljs-attr">$event</span>: event
                                });
                            });
                        }
                    }
                }, pointerTypes);
            };
        }]);
    }
    makeSwipeDirective(<span class="hljs-string">'ngSwipeLeft'</span>, <span class="hljs-number">-1</span>, <span class="hljs-string">'swipeleft'</span>);
    makeSwipeDirective(<span class="hljs-string">'ngSwipeRight'</span>, <span class="hljs-number">1</span>, <span class="hljs-string">'swiperight'</span>);
})(<span class="hljs-built_in">window</span>, <span class="hljs-built_in">window</span>.angular);;
<span class="hljs-comment">/*! RESOURCE: /scripts/angular_1.5.8/angular-cookies.js */</span>
(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">window, angular</span>) </span>{
<span class="hljs-meta">    'use strict'</span>;
    angular.module(<span class="hljs-string">'ngCookies'</span>, [<span class="hljs-string">'ng'</span>]).
    provider(<span class="hljs-string">'$cookies'</span>, [<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$CookiesProvider</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> defaults = <span class="hljs-keyword">this</span>.defaults = {};

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">calcOptions</span>(<span class="hljs-params">options</span>) </span>{
            <span class="hljs-keyword">return</span> options ? angular.extend({}, defaults, options) : defaults;
        }
        <span class="hljs-keyword">this</span>.$get = [<span class="hljs-string">'$$cookieReader'</span>, <span class="hljs-string">'$$cookieWriter'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$$cookieReader, $$cookieWriter</span>) </span>{
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">get</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key</span>) </span>{
                    <span class="hljs-keyword">return</span> $$cookieReader()[key];
                },
                <span class="hljs-attr">getObject</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key</span>) </span>{
                    <span class="hljs-keyword">var</span> value = <span class="hljs-keyword">this</span>.get(key);
                    <span class="hljs-keyword">return</span> value ? angular.fromJson(value) : value;
                },
                <span class="hljs-attr">getAll</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">return</span> $$cookieReader();
                },
                <span class="hljs-attr">put</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key, value, options</span>) </span>{
                    $$cookieWriter(key, value, calcOptions(options));
                },
                <span class="hljs-attr">putObject</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key, value, options</span>) </span>{
                    <span class="hljs-keyword">this</span>.put(key, angular.toJson(value), options);
                },
                <span class="hljs-attr">remove</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key, options</span>) </span>{
                    $$cookieWriter(key, <span class="hljs-literal">undefined</span>, calcOptions(options));
                }
            };
        }];
    }]);
    angular.module(<span class="hljs-string">'ngCookies'</span>).
    factory(<span class="hljs-string">'$cookieStore'</span>, [<span class="hljs-string">'$cookies'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$cookies</span>) </span>{
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">get</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key</span>) </span>{
                <span class="hljs-keyword">return</span> $cookies.getObject(key);
            },
            <span class="hljs-attr">put</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key, value</span>) </span>{
                $cookies.putObject(key, value);
            },
            <span class="hljs-attr">remove</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key</span>) </span>{
                $cookies.remove(key);
            }
        };
    }]);

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$$CookieWriter</span>(<span class="hljs-params">$document, $log, $browser</span>) </span>{
        <span class="hljs-keyword">var</span> cookiePath = $browser.baseHref();
        <span class="hljs-keyword">var</span> rawDocument = $<span class="hljs-built_in">document</span>[<span class="hljs-number">0</span>];

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildCookieString</span>(<span class="hljs-params">name, value, options</span>) </span>{
            <span class="hljs-keyword">var</span> path, expires;
            options = options || {};
            expires = options.expires;
            path = angular.isDefined(options.path) ? options.path : cookiePath;
            <span class="hljs-keyword">if</span> (angular.isUndefined(value)) {
                expires = <span class="hljs-string">'Thu, 01 Jan 1970 00:00:00 GMT'</span>;
                value = <span class="hljs-string">''</span>;
            }
            <span class="hljs-keyword">if</span> (angular.isString(expires)) {
                expires = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(expires);
            }
            <span class="hljs-keyword">var</span> str = <span class="hljs-built_in">encodeURIComponent</span>(name) + <span class="hljs-string">'='</span> + <span class="hljs-built_in">encodeURIComponent</span>(value);
            str += path ? <span class="hljs-string">';path='</span> + path : <span class="hljs-string">''</span>;
            str += options.domain ? <span class="hljs-string">';domain='</span> + options.domain : <span class="hljs-string">''</span>;
            str += expires ? <span class="hljs-string">';expires='</span> + expires.toUTCString() : <span class="hljs-string">''</span>;
            str += options.secure ? <span class="hljs-string">';secure'</span> : <span class="hljs-string">''</span>;
            <span class="hljs-keyword">var</span> cookieLength = str.length + <span class="hljs-number">1</span>;
            <span class="hljs-keyword">if</span> (cookieLength &gt; <span class="hljs-number">4096</span>) {
                $log.warn(<span class="hljs-string">"Cookie '"</span> + name +
                    <span class="hljs-string">"' possibly not set or overflowed because it was too large ("</span> +
                    cookieLength + <span class="hljs-string">" &gt; 4096 bytes)!"</span>);
            }
            <span class="hljs-keyword">return</span> str;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name, value, options</span>) </span>{
            rawDocument.cookie = buildCookieString(name, value, options);
        };
    }
    $$CookieWriter.$inject = [<span class="hljs-string">'$document'</span>, <span class="hljs-string">'$log'</span>, <span class="hljs-string">'$browser'</span>];
    angular.module(<span class="hljs-string">'ngCookies'</span>).provider(<span class="hljs-string">'$$cookieWriter'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$$CookieWriterProvider</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.$get = $$CookieWriter;
    });
})(<span class="hljs-built_in">window</span>, <span class="hljs-built_in">window</span>.angular);;
<span class="hljs-comment">/*! RESOURCE: /scripts/angular_1.5.8/angular-aria.js */</span>
(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">window, angular</span>) </span>{
<span class="hljs-meta">    'use strict'</span>;
    <span class="hljs-keyword">var</span> ngAriaModule = angular.module(<span class="hljs-string">'ngAria'</span>, [<span class="hljs-string">'ng'</span>]).
    provider(<span class="hljs-string">'$aria'</span>, $AriaProvider);
    <span class="hljs-keyword">var</span> nodeBlackList = [<span class="hljs-string">'BUTTON'</span>, <span class="hljs-string">'A'</span>, <span class="hljs-string">'INPUT'</span>, <span class="hljs-string">'TEXTAREA'</span>, <span class="hljs-string">'SELECT'</span>, <span class="hljs-string">'DETAILS'</span>, <span class="hljs-string">'SUMMARY'</span>];
    <span class="hljs-keyword">var</span> isNodeOneOf = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">elem, nodeTypeArray</span>) </span>{
        <span class="hljs-keyword">if</span> (nodeTypeArray.indexOf(elem[<span class="hljs-number">0</span>].nodeName) !== <span class="hljs-number">-1</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
    };

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$AriaProvider</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> config = {
            <span class="hljs-attr">ariaHidden</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">ariaChecked</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">ariaReadonly</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">ariaDisabled</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">ariaRequired</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">ariaInvalid</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">ariaValue</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">tabindex</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">bindKeypress</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">bindRoleForClick</span>: <span class="hljs-literal">true</span>
        };
        <span class="hljs-keyword">this</span>.config = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">newConfig</span>) </span>{
            config = angular.extend(config, newConfig);
        };

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">watchExpr</span>(<span class="hljs-params">attrName, ariaAttr, nodeBlackList, negate</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, elem, attr</span>) </span>{
                <span class="hljs-keyword">var</span> ariaCamelName = attr.$normalize(ariaAttr);
                <span class="hljs-keyword">if</span> (config[ariaCamelName] &amp;&amp; !isNodeOneOf(elem, nodeBlackList) &amp;&amp; !attr[ariaCamelName]) {
                    scope.$watch(attr[attrName], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">boolVal</span>) </span>{
                        boolVal = negate ? !boolVal : !!boolVal;
                        elem.attr(ariaAttr, boolVal);
                    });
                }
            };
        }
        <span class="hljs-keyword">this</span>.$get = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">config</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key</span>) </span>{
                    <span class="hljs-keyword">return</span> config[key];
                },
                <span class="hljs-attr">$$watchExpr</span>: watchExpr
            };
        };
    }
    ngAriaModule.directive(<span class="hljs-string">'ngShow'</span>, [<span class="hljs-string">'$aria'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$aria</span>) </span>{
            <span class="hljs-keyword">return</span> $aria.$$watchExpr(<span class="hljs-string">'ngShow'</span>, <span class="hljs-string">'aria-hidden'</span>, [], <span class="hljs-literal">true</span>);
        }])
        .directive(<span class="hljs-string">'ngHide'</span>, [<span class="hljs-string">'$aria'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$aria</span>) </span>{
            <span class="hljs-keyword">return</span> $aria.$$watchExpr(<span class="hljs-string">'ngHide'</span>, <span class="hljs-string">'aria-hidden'</span>, [], <span class="hljs-literal">false</span>);
        }])
        .directive(<span class="hljs-string">'ngValue'</span>, [<span class="hljs-string">'$aria'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$aria</span>) </span>{
            <span class="hljs-keyword">return</span> $aria.$$watchExpr(<span class="hljs-string">'ngValue'</span>, <span class="hljs-string">'aria-checked'</span>, nodeBlackList, <span class="hljs-literal">false</span>);
        }])
        .directive(<span class="hljs-string">'ngChecked'</span>, [<span class="hljs-string">'$aria'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$aria</span>) </span>{
            <span class="hljs-keyword">return</span> $aria.$$watchExpr(<span class="hljs-string">'ngChecked'</span>, <span class="hljs-string">'aria-checked'</span>, nodeBlackList, <span class="hljs-literal">false</span>);
        }])
        .directive(<span class="hljs-string">'ngReadonly'</span>, [<span class="hljs-string">'$aria'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$aria</span>) </span>{
            <span class="hljs-keyword">return</span> $aria.$$watchExpr(<span class="hljs-string">'ngReadonly'</span>, <span class="hljs-string">'aria-readonly'</span>, nodeBlackList, <span class="hljs-literal">false</span>);
        }])
        .directive(<span class="hljs-string">'ngRequired'</span>, [<span class="hljs-string">'$aria'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$aria</span>) </span>{
            <span class="hljs-keyword">return</span> $aria.$$watchExpr(<span class="hljs-string">'ngRequired'</span>, <span class="hljs-string">'aria-required'</span>, nodeBlackList, <span class="hljs-literal">false</span>);
        }])
        .directive(<span class="hljs-string">'ngModel'</span>, [<span class="hljs-string">'$aria'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$aria</span>) </span>{
            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">shouldAttachAttr</span>(<span class="hljs-params">attr, normalizedAttr, elem, allowBlacklistEls</span>) </span>{
                <span class="hljs-keyword">return</span> $aria.config(normalizedAttr) &amp;&amp; !elem.attr(attr) &amp;&amp; (allowBlacklistEls || !isNodeOneOf(elem, nodeBlackList));
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">shouldAttachRole</span>(<span class="hljs-params">role, elem</span>) </span>{
                <span class="hljs-keyword">return</span> !elem.attr(<span class="hljs-string">'role'</span>) &amp;&amp; (elem.attr(<span class="hljs-string">'type'</span>) === role) &amp;&amp; (elem[<span class="hljs-number">0</span>].nodeName !== <span class="hljs-string">'INPUT'</span>);
            }

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getShape</span>(<span class="hljs-params">attr, elem</span>) </span>{
                <span class="hljs-keyword">var</span> type = attr.type,
                    role = attr.role;
                <span class="hljs-keyword">return</span> ((type || role) === <span class="hljs-string">'checkbox'</span> || role === <span class="hljs-string">'menuitemcheckbox'</span>) ? <span class="hljs-string">'checkbox'</span> :
                    ((type || role) === <span class="hljs-string">'radio'</span> || role === <span class="hljs-string">'menuitemradio'</span>) ? <span class="hljs-string">'radio'</span> :
                    (type === <span class="hljs-string">'range'</span> || role === <span class="hljs-string">'progressbar'</span> || role === <span class="hljs-string">'slider'</span>) ? <span class="hljs-string">'range'</span> : <span class="hljs-string">''</span>;
            }
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">restrict</span>: <span class="hljs-string">'A'</span>,
                <span class="hljs-attr">require</span>: <span class="hljs-string">'ngModel'</span>,
                <span class="hljs-attr">priority</span>: <span class="hljs-number">200</span>,
                <span class="hljs-attr">compile</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">elem, attr</span>) </span>{
                    <span class="hljs-keyword">var</span> shape = getShape(attr, elem);
                    <span class="hljs-keyword">return</span> {
                        <span class="hljs-attr">pre</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, elem, attr, ngModel</span>) </span>{
                            <span class="hljs-keyword">if</span> (shape === <span class="hljs-string">'checkbox'</span>) {
                                ngModel.$isEmpty = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                                    <span class="hljs-keyword">return</span> value === <span class="hljs-literal">false</span>;
                                };
                            }
                        },
                        <span class="hljs-attr">post</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, elem, attr, ngModel</span>) </span>{
                            <span class="hljs-keyword">var</span> needsTabIndex = shouldAttachAttr(<span class="hljs-string">'tabindex'</span>, <span class="hljs-string">'tabindex'</span>, elem, <span class="hljs-literal">false</span>);

                            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngAriaWatchModelValue</span>(<span class="hljs-params"></span>) </span>{
                                <span class="hljs-keyword">return</span> ngModel.$modelValue;
                            }

                            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getRadioReaction</span>(<span class="hljs-params">newVal</span>) </span>{
                                <span class="hljs-keyword">var</span> boolVal = (attr.value == ngModel.$viewValue);
                                elem.attr(<span class="hljs-string">'aria-checked'</span>, boolVal);
                            }

                            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getCheckboxReaction</span>(<span class="hljs-params"></span>) </span>{
                                elem.attr(<span class="hljs-string">'aria-checked'</span>, !ngModel.$isEmpty(ngModel.$viewValue));
                            }
                            <span class="hljs-keyword">switch</span> (shape) {
                                <span class="hljs-keyword">case</span> <span class="hljs-string">'radio'</span>:
                                <span class="hljs-keyword">case</span> <span class="hljs-string">'checkbox'</span>:
                                    <span class="hljs-keyword">if</span> (shouldAttachRole(shape, elem)) {
                                        elem.attr(<span class="hljs-string">'role'</span>, shape);
                                    }
                                    <span class="hljs-keyword">if</span> (shouldAttachAttr(<span class="hljs-string">'aria-checked'</span>, <span class="hljs-string">'ariaChecked'</span>, elem, <span class="hljs-literal">false</span>)) {
                                        scope.$watch(ngAriaWatchModelValue, shape === <span class="hljs-string">'radio'</span> ?
                                            getRadioReaction : getCheckboxReaction);
                                    }
                                    <span class="hljs-keyword">if</span> (needsTabIndex) {
                                        elem.attr(<span class="hljs-string">'tabindex'</span>, <span class="hljs-number">0</span>);
                                    }
                                    <span class="hljs-keyword">break</span>;
                                <span class="hljs-keyword">case</span> <span class="hljs-string">'range'</span>:
                                    <span class="hljs-keyword">if</span> (shouldAttachRole(shape, elem)) {
                                        elem.attr(<span class="hljs-string">'role'</span>, <span class="hljs-string">'slider'</span>);
                                    }
                                    <span class="hljs-keyword">if</span> ($aria.config(<span class="hljs-string">'ariaValue'</span>)) {
                                        <span class="hljs-keyword">var</span> needsAriaValuemin = !elem.attr(<span class="hljs-string">'aria-valuemin'</span>) &amp;&amp;
                                            (attr.hasOwnProperty(<span class="hljs-string">'min'</span>) || attr.hasOwnProperty(<span class="hljs-string">'ngMin'</span>));
                                        <span class="hljs-keyword">var</span> needsAriaValuemax = !elem.attr(<span class="hljs-string">'aria-valuemax'</span>) &amp;&amp;
                                            (attr.hasOwnProperty(<span class="hljs-string">'max'</span>) || attr.hasOwnProperty(<span class="hljs-string">'ngMax'</span>));
                                        <span class="hljs-keyword">var</span> needsAriaValuenow = !elem.attr(<span class="hljs-string">'aria-valuenow'</span>);
                                        <span class="hljs-keyword">if</span> (needsAriaValuemin) {
                                            attr.$observe(<span class="hljs-string">'min'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngAriaValueMinReaction</span>(<span class="hljs-params">newVal</span>) </span>{
                                                elem.attr(<span class="hljs-string">'aria-valuemin'</span>, newVal);
                                            });
                                        }
                                        <span class="hljs-keyword">if</span> (needsAriaValuemax) {
                                            attr.$observe(<span class="hljs-string">'max'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngAriaValueMinReaction</span>(<span class="hljs-params">newVal</span>) </span>{
                                                elem.attr(<span class="hljs-string">'aria-valuemax'</span>, newVal);
                                            });
                                        }
                                        <span class="hljs-keyword">if</span> (needsAriaValuenow) {
                                            scope.$watch(ngAriaWatchModelValue, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngAriaValueNowReaction</span>(<span class="hljs-params">newVal</span>) </span>{
                                                elem.attr(<span class="hljs-string">'aria-valuenow'</span>, newVal);
                                            });
                                        }
                                    }
                                    <span class="hljs-keyword">if</span> (needsTabIndex) {
                                        elem.attr(<span class="hljs-string">'tabindex'</span>, <span class="hljs-number">0</span>);
                                    }
                                    <span class="hljs-keyword">break</span>;
                            }
                            <span class="hljs-keyword">if</span> (!attr.hasOwnProperty(<span class="hljs-string">'ngRequired'</span>) &amp;&amp; ngModel.$validators.required &amp;&amp;
                                shouldAttachAttr(<span class="hljs-string">'aria-required'</span>, <span class="hljs-string">'ariaRequired'</span>, elem, <span class="hljs-literal">false</span>)) {
                                attr.$observe(<span class="hljs-string">'required'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                                    elem.attr(<span class="hljs-string">'aria-required'</span>, !!attr[<span class="hljs-string">'required'</span>]);
                                });
                            }
                            <span class="hljs-keyword">if</span> (shouldAttachAttr(<span class="hljs-string">'aria-invalid'</span>, <span class="hljs-string">'ariaInvalid'</span>, elem, <span class="hljs-literal">true</span>)) {
                                scope.$watch(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngAriaInvalidWatch</span>(<span class="hljs-params"></span>) </span>{
                                    <span class="hljs-keyword">return</span> ngModel.$invalid;
                                }, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ngAriaInvalidReaction</span>(<span class="hljs-params">newVal</span>) </span>{
                                    elem.attr(<span class="hljs-string">'aria-invalid'</span>, !!newVal);
                                });
                            }
                        }
                    };
                }
            };
        }])
        .directive(<span class="hljs-string">'ngDisabled'</span>, [<span class="hljs-string">'$aria'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$aria</span>) </span>{
            <span class="hljs-keyword">return</span> $aria.$$watchExpr(<span class="hljs-string">'ngDisabled'</span>, <span class="hljs-string">'aria-disabled'</span>, nodeBlackList, <span class="hljs-literal">false</span>);
        }])
        .directive(<span class="hljs-string">'ngMessages'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">restrict</span>: <span class="hljs-string">'A'</span>,
                <span class="hljs-attr">require</span>: <span class="hljs-string">'?ngMessages'</span>,
                <span class="hljs-attr">link</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, elem, attr, ngMessages</span>) </span>{
                    <span class="hljs-keyword">if</span> (!elem.attr(<span class="hljs-string">'aria-live'</span>)) {
                        elem.attr(<span class="hljs-string">'aria-live'</span>, <span class="hljs-string">'assertive'</span>);
                    }
                }
            };
        })
        .directive(<span class="hljs-string">'ngClick'</span>, [<span class="hljs-string">'$aria'</span>, <span class="hljs-string">'$parse'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$aria, $parse</span>) </span>{
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">restrict</span>: <span class="hljs-string">'A'</span>,
                <span class="hljs-attr">compile</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">elem, attr</span>) </span>{
                    <span class="hljs-keyword">var</span> fn = $parse(attr.ngClick, <span class="hljs-literal">null</span>, <span class="hljs-literal">true</span>);
                    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, elem, attr</span>) </span>{
                        <span class="hljs-keyword">if</span> (!isNodeOneOf(elem, nodeBlackList)) {
                            <span class="hljs-keyword">if</span> ($aria.config(<span class="hljs-string">'bindRoleForClick'</span>) &amp;&amp; !elem.attr(<span class="hljs-string">'role'</span>)) {
                                elem.attr(<span class="hljs-string">'role'</span>, <span class="hljs-string">'button'</span>);
                            }
                            <span class="hljs-keyword">if</span> ($aria.config(<span class="hljs-string">'tabindex'</span>) &amp;&amp; !elem.attr(<span class="hljs-string">'tabindex'</span>)) {
                                elem.attr(<span class="hljs-string">'tabindex'</span>, <span class="hljs-number">0</span>);
                            }
                            <span class="hljs-keyword">if</span> ($aria.config(<span class="hljs-string">'bindKeypress'</span>) &amp;&amp; !attr.ngKeypress) {
                                elem.on(<span class="hljs-string">'keypress'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
                                    <span class="hljs-keyword">var</span> keyCode = event.which || event.keyCode;
                                    <span class="hljs-keyword">if</span> (keyCode === <span class="hljs-number">32</span> || keyCode === <span class="hljs-number">13</span>) {
                                        scope.$apply(callback);
                                    }

                                    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">callback</span>(<span class="hljs-params"></span>) </span>{
                                        fn(scope, {
                                            <span class="hljs-attr">$event</span>: event
                                        });
                                    }
                                });
                            }
                        }
                    };
                }
            };
        }])
        .directive(<span class="hljs-string">'ngDblclick'</span>, [<span class="hljs-string">'$aria'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$aria</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope, elem, attr</span>) </span>{
                <span class="hljs-keyword">if</span> ($aria.config(<span class="hljs-string">'tabindex'</span>) &amp;&amp; !elem.attr(<span class="hljs-string">'tabindex'</span>) &amp;&amp; !isNodeOneOf(elem, nodeBlackList)) {
                    elem.attr(<span class="hljs-string">'tabindex'</span>, <span class="hljs-number">0</span>);
                }
            };
        }]);
})(<span class="hljs-built_in">window</span>, <span class="hljs-built_in">window</span>.angular);;
<span class="hljs-comment">/*! RESOURCE: /scripts/app/base/_module.js */</span>
angular.module(<span class="hljs-string">'sn.base'</span>, [<span class="hljs-string">'sn.common.auth'</span>]);
<span class="hljs-built_in">window</span>.countWatchers = <span class="hljs-built_in">window</span>.countWatchers || <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">root</span>) </span>{
    <span class="hljs-keyword">var</span> watchers = [];
    <span class="hljs-keyword">var</span> f = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>) </span>{
        angular.forEach([<span class="hljs-string">'$scope'</span>, <span class="hljs-string">'$isolateScope'</span>], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scopeProperty</span>) </span>{
            <span class="hljs-keyword">if</span> (element.data() &amp;&amp; element.data().hasOwnProperty(scopeProperty)) {
                angular.forEach(element.data()[scopeProperty].$$watchers, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">watcher</span>) </span>{
                    watchers.push(watcher);
                });
            }
        });
        angular.forEach(element.children(), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">childElement</span>) </span>{
            f(angular.element(childElement));
        });
    };
    f(root);
    <span class="hljs-keyword">var</span> watchersWithoutDuplicates = [];
    angular.forEach(watchers, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">item</span>) </span>{
        <span class="hljs-keyword">if</span> (watchersWithoutDuplicates.indexOf(item) &lt; <span class="hljs-number">0</span>) {
            watchersWithoutDuplicates.push(item);
        }
    });
    <span class="hljs-built_in">console</span>.log(watchersWithoutDuplicates.length);
};;
<span class="hljs-comment">/*! RESOURCE: /scripts/sn/common/auth/_module.js */</span>
angular.module(<span class="hljs-string">'sn.common.auth'</span>, []);
angular.module(<span class="hljs-string">'sn.auth'</span>, [<span class="hljs-string">'sn.common.auth'</span>]);;
<span class="hljs-comment">/*! RESOURCE: /scripts/sn/common/auth/service.authInterceptor.js */</span>
angular.module(<span class="hljs-string">'sn.common.auth'</span>).config(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$httpProvider</span>) </span>{
    $httpProvider.interceptors.push(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$rootScope, $q, $injector, $window, $log</span>) </span>{
        <span class="hljs-keyword">var</span> LOG_PREFIX = <span class="hljs-string">'(authIntercepter) '</span>;

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">error</span>(<span class="hljs-params">response</span>) </span>{
            <span class="hljs-keyword">var</span> status = response.status;
            <span class="hljs-keyword">if</span> (status == <span class="hljs-number">401</span>) {
                <span class="hljs-keyword">var</span> newPromise = handle401(response);
                <span class="hljs-keyword">if</span> (newPromise)
                    <span class="hljs-keyword">return</span> newPromise;
            }
            <span class="hljs-keyword">return</span> $q.reject(response);
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handle401</span>(<span class="hljs-params">response</span>) </span>{
            <span class="hljs-keyword">if</span> (canResendRequest(response)) {
                <span class="hljs-keyword">var</span> deferredAgain = $q.defer();
                <span class="hljs-keyword">var</span> $http = $injector.get(<span class="hljs-string">'$http'</span>);
                $http(response.config).then(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">success</span>(<span class="hljs-params">newResponse</span>) </span>{
                    deferredAgain.resolve(newResponse);
                }, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">error</span>(<span class="hljs-params">newResponse</span>) </span>{
                    deferredAgain.reject(newResponse);
                });
                <span class="hljs-keyword">return</span> deferredAgain.promise;
            }
            $log.info(LOG_PREFIX + <span class="hljs-string">'User has been logged out'</span>);
            $rootScope.$broadcast(<span class="hljs-string">"@page.login"</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">canResendRequest</span>(<span class="hljs-params">response</span>) </span>{
            <span class="hljs-keyword">var</span> headers = response.headers();
            <span class="hljs-keyword">var</span> requestToken = response.config.headers[<span class="hljs-string">'X-UserToken'</span>];
            <span class="hljs-keyword">if</span> (!requestToken) {
                requestToken = headers[<span class="hljs-string">'x-usertoken-request'</span>];
            }
            <span class="hljs-keyword">if</span> ($<span class="hljs-built_in">window</span>.g_ck &amp;&amp; (requestToken !== $<span class="hljs-built_in">window</span>.g_ck)) {
                $log.info(LOG_PREFIX + <span class="hljs-string">'Token refreshed since request -- retrying'</span>);
                response.config.headers[<span class="hljs-string">'X-UserToken'</span>] = $<span class="hljs-built_in">window</span>.g_ck;
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
            <span class="hljs-keyword">if</span> (headers[<span class="hljs-string">'x-sessionloggedin'</span>] != <span class="hljs-string">'true'</span>)
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">if</span> (headers[<span class="hljs-string">'x-usertoken-allowresubmit'</span>] == <span class="hljs-string">'false'</span>)
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">var</span> token = headers[<span class="hljs-string">'x-usertoken-response'</span>];
            <span class="hljs-keyword">if</span> (token) {
                $log.info(LOG_PREFIX + <span class="hljs-string">'Received new token -- retrying'</span>);
                response.config.headers[<span class="hljs-string">'X-UserToken'</span>] = token;
                setToken(token);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setToken</span>(<span class="hljs-params">token</span>) </span>{
            $<span class="hljs-built_in">window</span>.g_ck = token;
            <span class="hljs-keyword">if</span> (!token) {
                $httpProvider.defaults.headers.common[<span class="hljs-string">"X-UserToken"</span>] = <span class="hljs-string">'token_intentionally_left_blank'</span>;
            } <span class="hljs-keyword">else</span> {
                $httpProvider.defaults.headers.common[<span class="hljs-string">"X-UserToken"</span>] = token;
            }
            <span class="hljs-keyword">if</span> ($<span class="hljs-built_in">window</span>.jQuery) {
                jQuery.ajaxSetup({
                    <span class="hljs-attr">headers</span>: {
                        <span class="hljs-string">'X-UserToken'</span>: token
                    }
                });
            }
            <span class="hljs-keyword">if</span> ($<span class="hljs-built_in">window</span>.Zepto) {
                <span class="hljs-keyword">if</span> (!Zepto.ajaxSettings.headers)
                    Zepto.ajaxSettings.headers = {};
                Zepto.ajaxSettings.headers[<span class="hljs-string">'X-UserToken'</span>] = token;
            }
        }
        setToken($<span class="hljs-built_in">window</span>.g_ck);
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">responseError</span>: error
        }
    });
});;;</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
