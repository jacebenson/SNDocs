<!DOCTYPE html>

<html>
<head>
  <title>js_includes_list_edit_doctype.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="AJAXCompleter.html">
                  AJAXCompleter.js
                </a>
              
                
                <a class="source" href="AJAXEmailClientCompleter.html">
                  AJAXEmailClientCompleter.js
                </a>
              
                
                <a class="source" href="AJAXOtherCompleter.html">
                  AJAXOtherCompleter.js
                </a>
              
                
                <a class="source" href="AJAXReferenceChoice.html">
                  AJAXReferenceChoice.js
                </a>
              
                
                <a class="source" href="AJAXReferenceCompleter.html">
                  AJAXReferenceCompleter.js
                </a>
              
                
                <a class="source" href="AJAXReferenceCompleterMulti.html">
                  AJAXReferenceCompleterMulti.js
                </a>
              
                
                <a class="source" href="AJAXReferenceControls.html">
                  AJAXReferenceControls.js
                </a>
              
                
                <a class="source" href="AJAXTableCompleter.html">
                  AJAXTableCompleter.js
                </a>
              
                
                <a class="source" href="AttachmentUploader.html">
                  AttachmentUploader.js
                </a>
              
                
                <a class="source" href="AutoComplete.html">
                  AutoComplete.js
                </a>
              
                
                <a class="source" href="CookieJar.html">
                  CookieJar.js
                </a>
              
                
                <a class="source" href="CustomEventManager.html">
                  CustomEventManager.js
                </a>
              
                
                <a class="source" href="DaysOfWeekElement.html">
                  DaysOfWeekElement.js
                </a>
              
                
                <a class="source" href="DerivedFields.html">
                  DerivedFields.js
                </a>
              
                
                <a class="source" href="FieldListElement.html">
                  FieldListElement.js
                </a>
              
                
                <a class="source" href="GlideAPI1.html">
                  GlideAPI1.js
                </a>
              
                
                <a class="source" href="GlideAjax.html">
                  GlideAjax.js
                </a>
              
                
                <a class="source" href="GlideAjaxForm.html">
                  GlideAjaxForm.js
                </a>
              
                
                <a class="source" href="GlideBox.html">
                  GlideBox.js
                </a>
              
                
                <a class="source" href="GlideClientCache.html">
                  GlideClientCache.js
                </a>
              
                
                <a class="source" href="GlideDecoration.html">
                  GlideDecoration.js
                </a>
              
                
                <a class="source" href="GlideDialogForm.html">
                  GlideDialogForm.js
                </a>
              
                
                <a class="source" href="GlideDialogWindow.html">
                  GlideDialogWindow.js
                </a>
              
                
                <a class="source" href="GlideDraggable.html">
                  GlideDraggable.js
                </a>
              
                
                <a class="source" href="GlideDuration.html">
                  GlideDuration.js
                </a>
              
                
                <a class="source" href="GlideEvent.html">
                  GlideEvent.js
                </a>
              
                
                <a class="source" href="GlideEventHandler.html">
                  GlideEventHandler.js
                </a>
              
                
                <a class="source" href="GlideFilter14.html">
                  GlideFilter14.js
                </a>
              
                
                <a class="source" href="GlideFilterDate.html">
                  GlideFilterDate.js
                </a>
              
                
                <a class="source" href="GlideFilterDescription.html">
                  GlideFilterDescription.js
                </a>
              
                
                <a class="source" href="GlideFilterHandlers.html">
                  GlideFilterHandlers.js
                </a>
              
                
                <a class="source" href="GlideFilterItemVariables.html">
                  GlideFilterItemVariables.js
                </a>
              
                
                <a class="source" href="GlideFilterLabels.html">
                  GlideFilterLabels.js
                </a>
              
                
                <a class="source" href="GlideFilterQuestions.html">
                  GlideFilterQuestions.js
                </a>
              
                
                <a class="source" href="GlideFilterReference.html">
                  GlideFilterReference.js
                </a>
              
                
                <a class="source" href="GlideFilterReferenceMulti.html">
                  GlideFilterReferenceMulti.js
                </a>
              
                
                <a class="source" href="GlideFilterVariableMap.html">
                  GlideFilterVariableMap.js
                </a>
              
                
                <a class="source" href="GlideFilterVariables.html">
                  GlideFilterVariables.js
                </a>
              
                
                <a class="source" href="GlideForm14.html">
                  GlideForm14.js
                </a>
              
                
                <a class="source" href="GlideHeaderSearch.html">
                  GlideHeaderSearch.js
                </a>
              
                
                <a class="source" href="GlideList2.html">
                  GlideList2.js
                </a>
              
                
                <a class="source" href="GlideList2FilterUtil.html">
                  GlideList2FilterUtil.js
                </a>
              
                
                <a class="source" href="GlideList2Handlers.html">
                  GlideList2Handlers.js
                </a>
              
                
                <a class="source" href="GlideList2InitEvents.html">
                  GlideList2InitEvents.js
                </a>
              
                
                <a class="source" href="GlideList2Statics.html">
                  GlideList2Statics.js
                </a>
              
                
                <a class="source" href="GlideListAggregates.html">
                  GlideListAggregates.js
                </a>
              
                
                <a class="source" href="GlideListEditor.html">
                  GlideListEditor.js
                </a>
              
                
                <a class="source" href="GlideListEditorMessaging.html">
                  GlideListEditorMessaging.js
                </a>
              
                
                <a class="source" href="GlideListElement.html">
                  GlideListElement.js
                </a>
              
                
                <a class="source" href="GlideListWidget.html">
                  GlideListWidget.js
                </a>
              
                
                <a class="source" href="GlideListv3Compatibility.html">
                  GlideListv3Compatibility.js
                </a>
              
                
                <a class="source" href="GlideModal.html">
                  GlideModal.js
                </a>
              
                
                <a class="source" href="GlideModalForm.html">
                  GlideModalForm.js
                </a>
              
                
                <a class="source" href="GlideNavigation.html">
                  GlideNavigation.js
                </a>
              
                
                <a class="source" href="GlideOverlay.html">
                  GlideOverlay.js
                </a>
              
                
                <a class="source" href="GlidePane.html">
                  GlidePane.js
                </a>
              
                
                <a class="source" href="GlidePaneForm.html">
                  GlidePaneForm.js
                </a>
              
                
                <a class="source" href="GlideRecord.html">
                  GlideRecord.js
                </a>
              
                
                <a class="source" href="GlideTabs2.html">
                  GlideTabs2.js
                </a>
              
                
                <a class="source" href="GlideTabs2State.html">
                  GlideTabs2State.js
                </a>
              
                
                <a class="source" href="GlideTabs2Tab.html">
                  GlideTabs2Tab.js
                </a>
              
                
                <a class="source" href="GlideTimeElement.html">
                  GlideTimeElement.js
                </a>
              
                
                <a class="source" href="GlideTimerElement.html">
                  GlideTimerElement.js
                </a>
              
                
                <a class="source" href="GlideTransactionScope.html">
                  GlideTransactionScope.js
                </a>
              
                
                <a class="source" href="GlideUI.html">
                  GlideUI.js
                </a>
              
                
                <a class="source" href="GlideUIDefault.html">
                  GlideUIDefault.js
                </a>
              
                
                <a class="source" href="GlideUIElement.html">
                  GlideUIElement.js
                </a>
              
                
                <a class="source" href="GlideUINotification.html">
                  GlideUINotification.js
                </a>
              
                
                <a class="source" href="GlideURL.html">
                  GlideURL.js
                </a>
              
                
                <a class="source" href="GlideURLElement.html">
                  GlideURLElement.js
                </a>
              
                
                <a class="source" href="GlideUser.html">
                  GlideUser.js
                </a>
              
                
                <a class="source" href="GlideUserImageElement.html">
                  GlideUserImageElement.js
                </a>
              
                
                <a class="source" href="GlideWidgetActions.html">
                  GlideWidgetActions.js
                </a>
              
                
                <a class="source" href="GlideWidgetFilter.html">
                  GlideWidgetFilter.js
                </a>
              
                
                <a class="source" href="GlideWidgetHideOnEmpty.html">
                  GlideWidgetHideOnEmpty.js
                </a>
              
                
                <a class="source" href="GlideWidgetSearch.html">
                  GlideWidgetSearch.js
                </a>
              
                
                <a class="source" href="GlideWidgetVCR.html">
                  GlideWidgetVCR.js
                </a>
              
                
                <a class="source" href="GlideWindow.html">
                  GlideWindow.js
                </a>
              
                
                <a class="source" href="GuidedTourElementTranslator.html">
                  GuidedTourElementTranslator.js
                </a>
              
                
                <a class="source" href="GwtCellEditor.html">
                  GwtCellEditor.js
                </a>
              
                
                <a class="source" href="GwtCellSelector.html">
                  GwtCellSelector.js
                </a>
              
                
                <a class="source" href="GwtContextMenu.html">
                  GwtContextMenu.js
                </a>
              
                
                <a class="source" href="GwtCursor.html">
                  GwtCursor.js
                </a>
              
                
                <a class="source" href="GwtDate.html">
                  GwtDate.js
                </a>
              
                
                <a class="source" href="GwtDraggable.html">
                  GwtDraggable.js
                </a>
              
                
                <a class="source" href="GwtDraggableSnap.html">
                  GwtDraggableSnap.js
                </a>
              
                
                <a class="source" href="GwtExportScheduleDialog.html">
                  GwtExportScheduleDialog.js
                </a>
              
                
                <a class="source" href="GwtGridEdit.html">
                  GwtGridEdit.js
                </a>
              
                
                <a class="source" href="GwtListEditAjaxChangeSaver.html">
                  GwtListEditAjaxChangeSaver.js
                </a>
              
                
                <a class="source" href="GwtListEditAjaxValueLoader.html">
                  GwtListEditAjaxValueLoader.js
                </a>
              
                
                <a class="source" href="GwtListEditBoolean.html">
                  GwtListEditBoolean.js
                </a>
              
                
                <a class="source" href="GwtListEditCalendar.html">
                  GwtListEditCalendar.js
                </a>
              
                
                <a class="source" href="GwtListEditDependent.html">
                  GwtListEditDependent.js
                </a>
              
                
                <a class="source" href="GwtListEditDuration.html">
                  GwtListEditDuration.js
                </a>
              
                
                <a class="source" href="GwtListEditEncryptedText.html">
                  GwtListEditEncryptedText.js
                </a>
              
                
                <a class="source" href="GwtListEditError.html">
                  GwtListEditError.js
                </a>
              
                
                <a class="source" href="GwtListEditGList.html">
                  GwtListEditGList.js
                </a>
              
                
                <a class="source" href="GwtListEditGlideRecord.html">
                  GwtListEditGlideRecord.js
                </a>
              
                
                <a class="source" href="GwtListEditGridSelector.html">
                  GwtListEditGridSelector.js
                </a>
              
                
                <a class="source" href="GwtListEditInternalType.html">
                  GwtListEditInternalType.js
                </a>
              
                
                <a class="source" href="GwtListEditJournal.html">
                  GwtListEditJournal.js
                </a>
              
                
                <a class="source" href="GwtListEditMultiText.html">
                  GwtListEditMultiText.js
                </a>
              
                
                <a class="source" href="GwtListEditPassword.html">
                  GwtListEditPassword.js
                </a>
              
                
                <a class="source" href="GwtListEditRecord.html">
                  GwtListEditRecord.js
                </a>
              
                
                <a class="source" href="GwtListEditRecordDecorations.html">
                  GwtListEditRecordDecorations.js
                </a>
              
                
                <a class="source" href="GwtListEditReference.html">
                  GwtListEditReference.js
                </a>
              
                
                <a class="source" href="GwtListEditRelatedTags.html">
                  GwtListEditRelatedTags.js
                </a>
              
                
                <a class="source" href="GwtListEditSavePolicy.html">
                  GwtListEditSavePolicy.js
                </a>
              
                
                <a class="source" href="GwtListEditSelect.html">
                  GwtListEditSelect.js
                </a>
              
                
                <a class="source" href="GwtListEditTableController.html">
                  GwtListEditTableController.js
                </a>
              
                
                <a class="source" href="GwtListEditTablename.html">
                  GwtListEditTablename.js
                </a>
              
                
                <a class="source" href="GwtListEditText.html">
                  GwtListEditText.js
                </a>
              
                
                <a class="source" href="GwtListEditTranslatedField.html">
                  GwtListEditTranslatedField.js
                </a>
              
                
                <a class="source" href="GwtListEditUpdateTablename.html">
                  GwtListEditUpdateTablename.js
                </a>
              
                
                <a class="source" href="GwtListEditValueRenderer.html">
                  GwtListEditValueRenderer.js
                </a>
              
                
                <a class="source" href="GwtListEditWindow.html">
                  GwtListEditWindow.js
                </a>
              
                
                <a class="source" href="GwtListEditor.html">
                  GwtListEditor.js
                </a>
              
                
                <a class="source" href="GwtListEditorPendingChanges.html">
                  GwtListEditorPendingChanges.js
                </a>
              
                
                <a class="source" href="GwtMessage14.html">
                  GwtMessage14.js
                </a>
              
                
                <a class="source" href="GwtObservable.html">
                  GwtObservable.js
                </a>
              
                
                <a class="source" href="GwtPollDialog.html">
                  GwtPollDialog.js
                </a>
              
                
                <a class="source" href="ISO9075.html">
                  ISO9075.js
                </a>
              
                
                <a class="source" href="InPlaceEdit.html">
                  InPlaceEdit.js
                </a>
              
                
                <a class="source" href="LAB.min.html">
                  LAB.min.js
                </a>
              
                
                <a class="source" href="NOW.messaging.html">
                  NOW.messaging.js
                </a>
              
                
                <a class="source" href="NOW.messaging.record.html">
                  NOW.messaging.record.js
                </a>
              
                
                <a class="source" href="NameMapEntry.html">
                  NameMapEntry.js
                </a>
              
                
                <a class="source" href="NotificationMessage.html">
                  NotificationMessage.js
                </a>
              
                
                <a class="source" href="PageTiming14.html">
                  PageTiming14.js
                </a>
              
                
                <a class="source" href="PersonalizeForm.html">
                  PersonalizeForm.js
                </a>
              
                
                <a class="source" href="Point.html">
                  Point.js
                </a>
              
                
                <a class="source" href="SLARepairClient.html">
                  SLARepairClient.js
                </a>
              
                
                <a class="source" href="ScriptLoader.html">
                  ScriptLoader.js
                </a>
              
                
                <a class="source" href="Select.html">
                  Select.js
                </a>
              
                
                <a class="source" href="SlushBucket.html">
                  SlushBucket.js
                </a>
              
                
                <a class="source" href="StopWatch.html">
                  StopWatch.js
                </a>
              
                
                <a class="source" href="Table.html">
                  Table.js
                </a>
              
                
                <a class="source" href="TableElement.html">
                  TableElement.js
                </a>
              
                
                <a class="source" href="TableExtension.html">
                  TableExtension.js
                </a>
              
                
                <a class="source" href="TemplateRecord.html">
                  TemplateRecord.js
                </a>
              
                
                <a class="source" href="TextAreaElement.html">
                  TextAreaElement.js
                </a>
              
                
                <a class="source" href="UserRolesElement.html">
                  UserRolesElement.js
                </a>
              
                
                <a class="source" href="_module.heisenberg.html">
                  _module.heisenberg.js
                </a>
              
                
                <a class="source" href="_module.html">
                  _module.js
                </a>
              
                
                <a class="source" href="ac.html">
                  ac.js
                </a>
              
                
                <a class="source" href="ac_derived_field_support.html">
                  ac_derived_field_support.js
                </a>
              
                
                <a class="source" href="accessibility.html">
                  accessibility.js
                </a>
              
                
                <a class="source" href="accessibility_tabindex.html">
                  accessibility_tabindex.js
                </a>
              
                
                <a class="source" href="affix.html">
                  affix.js
                </a>
              
                
                <a class="source" href="alert.html">
                  alert.js
                </a>
              
                
                <a class="source" href="amb.Channel.html">
                  amb.Channel.js
                </a>
              
                
                <a class="source" href="amb.ChannelListener.html">
                  amb.ChannelListener.js
                </a>
              
                
                <a class="source" href="amb.ChannelRedirect.html">
                  amb.ChannelRedirect.js
                </a>
              
                
                <a class="source" href="amb.EventManager.html">
                  amb.EventManager.js
                </a>
              
                
                <a class="source" href="amb.Logger.html">
                  amb.Logger.js
                </a>
              
                
                <a class="source" href="amb.MessageClient.html">
                  amb.MessageClient.js
                </a>
              
                
                <a class="source" href="amb.MessageClientBuilder.html">
                  amb.MessageClientBuilder.js
                </a>
              
                
                <a class="source" href="amb.ServerConnection.html">
                  amb.ServerConnection.js
                </a>
              
                
                <a class="source" href="amb_properties.html">
                  amb_properties.js
                </a>
              
                
                <a class="source" href="angular-animate.min.html">
                  angular-animate.min.js
                </a>
              
                
                <a class="source" href="angular-aria.min.html">
                  angular-aria.min.js
                </a>
              
                
                <a class="source" href="angular-cookies.min.html">
                  angular-cookies.min.js
                </a>
              
                
                <a class="source" href="angular-resource.min.html">
                  angular-resource.min.js
                </a>
              
                
                <a class="source" href="angular-route.min.html">
                  angular-route.min.js
                </a>
              
                
                <a class="source" href="angular-sanitize.min.html">
                  angular-sanitize.min.js
                </a>
              
                
                <a class="source" href="angular-touch.min.html">
                  angular-touch.min.js
                </a>
              
                
                <a class="source" href="angular.min.html">
                  angular.min.js
                </a>
              
                
                <a class="source" href="angular_includes_1.4.html">
                  angular_includes_1.4.js
                </a>
              
                
                <a class="source" href="annotations_toggle.html">
                  annotations_toggle.js
                </a>
              
                
                <a class="source" href="app.form_presence.html">
                  app.form_presence.js
                </a>
              
                
                <a class="source" href="app.ng.amb.html">
                  app.ng.amb.js
                </a>
              
                
                <a class="source" href="app_guided_tours.html">
                  app_guided_tours.js
                </a>
              
                
                <a class="source" href="button.html">
                  button.js
                </a>
              
                
                <a class="source" href="calendar.html">
                  calendar.js
                </a>
              
                
                <a class="source" href="carousel.html">
                  carousel.js
                </a>
              
                
                <a class="source" href="collapse.html">
                  collapse.js
                </a>
              
                
                <a class="source" href="cometd.html">
                  cometd.js
                </a>
              
                
                <a class="source" href="condition14_new.html">
                  condition14_new.js
                </a>
              
                
                <a class="source" href="condition14_reporting.html">
                  condition14_reporting.js
                </a>
              
                
                <a class="source" href="condition14_templates.html">
                  condition14_templates.js
                </a>
              
                
                <a class="source" href="condition_global_variables14.html">
                  condition_global_variables14.js
                </a>
              
                
                <a class="source" href="constants_embedded_help.html">
                  constants_embedded_help.js
                </a>
              
                
                <a class="source" href="context_actions.html">
                  context_actions.js
                </a>
              
                
                <a class="source" href="controller.AMBRecordWatcher.html">
                  controller.AMBRecordWatcher.js
                </a>
              
                
                <a class="source" href="controller.Stream.html">
                  controller.Stream.js
                </a>
              
                
                <a class="source" href="controller.formStream.html">
                  controller.formStream.js
                </a>
              
                
                <a class="source" href="controller.guidedTours.html">
                  controller.guidedTours.js
                </a>
              
                
                <a class="source" href="deferred_related_lists.html">
                  deferred_related_lists.js
                </a>
              
                
                <a class="source" href="depends.html">
                  depends.js
                </a>
              
                
                <a class="source" href="directive.contenteditable.html">
                  directive.contenteditable.js
                </a>
              
                
                <a class="source" href="directive.formStreamEntry.html">
                  directive.formStreamEntry.js
                </a>
              
                
                <a class="source" href="directive.message.html">
                  directive.message.js
                </a>
              
                
                <a class="source" href="directive.scroll_form.html">
                  directive.scroll_form.js
                </a>
              
                
                <a class="source" href="directive.snAttachmentPreview.html">
                  directive.snAttachmentPreview.js
                </a>
              
                
                <a class="source" href="directive.snAvatar.html">
                  directive.snAvatar.js
                </a>
              
                
                <a class="source" href="directive.snAvatarPopover.html">
                  directive.snAvatarPopover.js
                </a>
              
                
                <a class="source" href="directive.snBindI18n.html">
                  directive.snBindI18n.js
                </a>
              
                
                <a class="source" href="directive.snBindOnce.html">
                  directive.snBindOnce.js
                </a>
              
                
                <a class="source" href="directive.snBindPopoverSelection.html">
                  directive.snBindPopoverSelection.js
                </a>
              
                
                <a class="source" href="directive.snBlurOnEnter.html">
                  directive.snBlurOnEnter.js
                </a>
              
                
                <a class="source" href="directive.snBootstrapPopover.html">
                  directive.snBootstrapPopover.js
                </a>
              
                
                <a class="source" href="directive.snChoiceList.html">
                  directive.snChoiceList.js
                </a>
              
                
                <a class="source" href="directive.snCloak.html">
                  directive.snCloak.js
                </a>
              
                
                <a class="source" href="directive.snComplexPopover.html">
                  directive.snComplexPopover.js
                </a>
              
                
                <a class="source" href="directive.snConfirmModal.html">
                  directive.snConfirmModal.js
                </a>
              
                
                <a class="source" href="directive.snContextMenu.html">
                  directive.snContextMenu.js
                </a>
              
                
                <a class="source" href="directive.snDayAgo.html">
                  directive.snDayAgo.js
                </a>
              
                
                <a class="source" href="directive.snDialog.html">
                  directive.snDialog.js
                </a>
              
                
                <a class="source" href="directive.snExpandedEmail.html">
                  directive.snExpandedEmail.js
                </a>
              
                
                <a class="source" href="directive.snFieldReference.html">
                  directive.snFieldReference.js
                </a>
              
                
                <a class="source" href="directive.snFlyout.html">
                  directive.snFlyout.js
                </a>
              
                
                <a class="source" href="directive.snFocus.html">
                  directive.snFocus.js
                </a>
              
                
                <a class="source" href="directive.snGlyph.html">
                  directive.snGlyph.js
                </a>
              
                
                <a class="source" href="directive.snImageUploader.html">
                  directive.snImageUploader.js
                </a>
              
                
                <a class="source" href="directive.snLinkContent.html">
                  directive.snLinkContent.js
                </a>
              
                
                <a class="source" href="directive.snLinkContentArticle.html">
                  directive.snLinkContentArticle.js
                </a>
              
                
                <a class="source" href="directive.snLinkContentAttachment.html">
                  directive.snLinkContentAttachment.js
                </a>
              
                
                <a class="source" href="directive.snLinkContentError.html">
                  directive.snLinkContentError.js
                </a>
              
                
                <a class="source" href="directive.snLinkContentImage.html">
                  directive.snLinkContentImage.js
                </a>
              
                
                <a class="source" href="directive.snLinkContentRecord.html">
                  directive.snLinkContentRecord.js
                </a>
              
                
                <a class="source" href="directive.snLinkContentSoundcloud.html">
                  directive.snLinkContentSoundcloud.js
                </a>
              
                
                <a class="source" href="directive.snLinkContentYoutube.html">
                  directive.snLinkContentYoutube.js
                </a>
              
                
                <a class="source" href="directive.snMentionPopover.html">
                  directive.snMentionPopover.js
                </a>
              
                
                <a class="source" href="directive.snModal.html">
                  directive.snModal.js
                </a>
              
                
                <a class="source" href="directive.snModalShow.html">
                  directive.snModalShow.js
                </a>
              
                
                <a class="source" href="directive.snNotification.html">
                  directive.snNotification.js
                </a>
              
                
                <a class="source" href="directive.snPopoverBasic.html">
                  directive.snPopoverBasic.js
                </a>
              
                
                <a class="source" href="directive.snPresence.html">
                  directive.snPresence.js
                </a>
              
                
                <a class="source" href="directive.snRecordPicker.html">
                  directive.snRecordPicker.js
                </a>
              
                
                <a class="source" href="directive.snReferencePicker.html">
                  directive.snReferencePicker.js
                </a>
              
                
                <a class="source" href="directive.snResizeHeight.html">
                  directive.snResizeHeight.js
                </a>
              
                
                <a class="source" href="directive.snSelectBasic.html">
                  directive.snSelectBasic.js
                </a>
              
                
                <a class="source" href="directive.snStickyHeaders.html">
                  directive.snStickyHeaders.js
                </a>
              
                
                <a class="source" href="directive.snStream.html">
                  directive.snStream.js
                </a>
              
                
                <a class="source" href="directive.snSyncWith.html">
                  directive.snSyncWith.js
                </a>
              
                
                <a class="source" href="directive.snTableReference.html">
                  directive.snTableReference.js
                </a>
              
                
                <a class="source" href="directive.snTabs.html">
                  directive.snTabs.js
                </a>
              
                
                <a class="source" href="directive.snTabsBasic.html">
                  directive.snTabsBasic.js
                </a>
              
                
                <a class="source" href="directive.snTextExpander.html">
                  directive.snTextExpander.js
                </a>
              
                
                <a class="source" href="directive.snTimeAgo.html">
                  directive.snTimeAgo.js
                </a>
              
                
                <a class="source" href="directive.snTooltipBasic.html">
                  directive.snTooltipBasic.js
                </a>
              
                
                <a class="source" href="directive.snUserAvatar.html">
                  directive.snUserAvatar.js
                </a>
              
                
                <a class="source" href="directive.snUserProfile.html">
                  directive.snUserProfile.js
                </a>
              
                
                <a class="source" href="dropdown.html">
                  dropdown.js
                </a>
              
                
                <a class="source" href="dropdowns.html">
                  dropdowns.js
                </a>
              
                
                <a class="source" href="email_activity.html">
                  email_activity.js
                </a>
              
                
                <a class="source" href="event_initialize.html">
                  event_initialize.js
                </a>
              
                
                <a class="source" href="factory.AMBOverlay.html">
                  factory.AMBOverlay.js
                </a>
              
                
                <a class="source" href="factory.ArraySynchronizer.html">
                  factory.ArraySynchronizer.js
                </a>
              
                
                <a class="source" href="factory.glideUrlBuilder.html">
                  factory.glideUrlBuilder.js
                </a>
              
                
                <a class="source" href="factory.notificationWrapper.html">
                  factory.notificationWrapper.js
                </a>
              
                
                <a class="source" href="factory.paneManager.html">
                  factory.paneManager.js
                </a>
              
                
                <a class="source" href="factory.snPresence.html">
                  factory.snPresence.js
                </a>
              
                
                <a class="source" href="factory.snRecordPresence.html">
                  factory.snRecordPresence.js
                </a>
              
                
                <a class="source" href="factory.snRecordWatcher.html">
                  factory.snRecordWatcher.js
                </a>
              
                
                <a class="source" href="factory.unwrappedHTTPPromise.html">
                  factory.unwrappedHTTPPromise.js
                </a>
              
                
                <a class="source" href="fixedHeaders.html">
                  fixedHeaders.js
                </a>
              
                
                <a class="source" href="floating_scrollbar.min.html">
                  floating_scrollbar.min.js
                </a>
              
                
                <a class="source" href="focus-trap.html">
                  focus-trap.js
                </a>
              
                
                <a class="source" href="form_submitted_mask.html">
                  form_submitted_mask.js
                </a>
              
                
                <a class="source" href="form_tags.html">
                  form_tags.js
                </a>
              
                
                <a class="source" href="formatting.html">
                  formatting.js
                </a>
              
                
                <a class="source" href="functions.html">
                  functions.js
                </a>
              
                
                <a class="source" href="functions_attachments.html">
                  functions_attachments.js
                </a>
              
                
                <a class="source" href="functions_bootstrap14.html">
                  functions_bootstrap14.js
                </a>
              
                
                <a class="source" href="functions_calendar.html">
                  functions_calendar.js
                </a>
              
                
                <a class="source" href="functions_clipboard.html">
                  functions_clipboard.js
                </a>
              
                
                <a class="source" href="functions_email.html">
                  functions_email.js
                </a>
              
                
                <a class="source" href="functions_fontsizer.html">
                  functions_fontsizer.js
                </a>
              
                
                <a class="source" href="functions_onchange.html">
                  functions_onchange.js
                </a>
              
                
                <a class="source" href="functions_reference.html">
                  functions_reference.js
                </a>
              
                
                <a class="source" href="functions_showloading.html">
                  functions_showloading.js
                </a>
              
                
                <a class="source" href="functions_user_image.html">
                  functions_user_image.js
                </a>
              
                
                <a class="source" href="guided_tours_template.html">
                  guided_tours_template.js
                </a>
              
                
                <a class="source" href="heisenberg_all.html">
                  heisenberg_all.js
                </a>
              
                
                <a class="source" href="html_class_setter.html">
                  html_class_setter.js
                </a>
              
                
                <a class="source" href="jquery-2.2.3.min.html">
                  jquery-2.2.3.min.js
                </a>
              
                
                <a class="source" href="jquery-ui-1.9.2.custom.html">
                  jquery-ui-1.9.2.custom.js
                </a>
              
                
                <a class="source" href="jquery.cometd.html">
                  jquery.cometd.js
                </a>
              
                
                <a class="source" href="jquery2_includes.html">
                  jquery2_includes.js
                </a>
              
                
                <a class="source" href="jquery_clean.html">
                  jquery_clean.js
                </a>
              
                
                <a class="source" href="jquery_no_conflict.html">
                  jquery_no_conflict.js
                </a>
              
                
                <a class="source" href="js_guided_tours_includes.html">
                  js_guided_tours_includes.js
                </a>
              
                
                <a class="source" href="js_includes_amb.html">
                  js_includes_amb.js
                </a>
              
                
                <a class="source" href="js_includes_angular.html">
                  js_includes_angular.js
                </a>
              
                
                <a class="source" href="js_includes_controls.html">
                  js_includes_controls.js
                </a>
              
                
                <a class="source" href="js_includes_customer.html">
                  js_includes_customer.js
                </a>
              
                
                <a class="source" href="js_includes_datetime.html">
                  js_includes_datetime.js
                </a>
              
                
                <a class="source" href="js_includes_doctype.html">
                  js_includes_doctype.js
                </a>
              
                
                <a class="source" href="js_includes_form_presence.html">
                  js_includes_form_presence.js
                </a>
              
                
                <a class="source" href="js_includes_glide.html">
                  js_includes_glide.js
                </a>
              
                
                <a class="source" href="js_includes_i18n.html">
                  js_includes_i18n.js
                </a>
              
                
                <a class="source" href="js_includes_last_doctype.html">
                  js_includes_last_doctype.js
                </a>
              
                
                <a class="source" href="js_includes_link.html">
                  js_includes_link.js
                </a>
              
                
                <a class="source" href="js_includes_list_edit_doctype.html">
                  js_includes_list_edit_doctype.js
                </a>
              
                
                <a class="source" href="js_includes_listv2_doctype.html">
                  js_includes_listv2_doctype.js
                </a>
              
                
                <a class="source" href="js_includes_mention.html">
                  js_includes_mention.js
                </a>
              
                
                <a class="source" href="js_includes_notification.html">
                  js_includes_notification.js
                </a>
              
                
                <a class="source" href="js_includes_stream.html">
                  js_includes_stream.js
                </a>
              
                
                <a class="source" href="js_includes_ui.html">
                  js_includes_ui.js
                </a>
              
                
                <a class="source" href="js_includes_ui16_form.html">
                  js_includes_ui16_form.js
                </a>
              
                
                <a class="source" href="js_includes_ui_popover.html">
                  js_includes_ui_popover.js
                </a>
              
                
                <a class="source" href="js_includes_user_profile.html">
                  js_includes_user_profile.js
                </a>
              
                
                <a class="source" href="js_includes_util.html">
                  js_includes_util.js
                </a>
              
                
                <a class="source" href="list_filter.html">
                  list_filter.js
                </a>
              
                
                <a class="source" href="magellan.CreateFavoriteModal.html">
                  magellan.CreateFavoriteModal.js
                </a>
              
                
                <a class="source" href="mentio.html">
                  mentio.js
                </a>
              
                
                <a class="source" href="modal.html">
                  modal.js
                </a>
              
                
                <a class="source" href="modals.html">
                  modals.js
                </a>
              
                
                <a class="source" href="newtag-it.html">
                  newtag-it.js
                </a>
              
                
                <a class="source" href="page_title.html">
                  page_title.js
                </a>
              
                
                <a class="source" href="popover.html">
                  popover.js
                </a>
              
                
                <a class="source" href="popovers.html">
                  popovers.js
                </a>
              
                
                <a class="source" href="popupdivs14.html">
                  popupdivs14.js
                </a>
              
                
                <a class="source" href="popups.html">
                  popups.js
                </a>
              
                
                <a class="source" href="prototype.effects.html">
                  prototype.effects.js
                </a>
              
                
                <a class="source" href="prototype.hidefix.html">
                  prototype.hidefix.js
                </a>
              
                
                <a class="source" href="prototype.html">
                  prototype.js
                </a>
              
                
                <a class="source" href="prototype.min.html">
                  prototype.min.js
                </a>
              
                
                <a class="source" href="prototype.plugin.html">
                  prototype.plugin.js
                </a>
              
                
                <a class="source" href="prototype.template.html">
                  prototype.template.js
                </a>
              
                
                <a class="source" href="provider.linkContentTypes.html">
                  provider.linkContentTypes.js
                </a>
              
                
                <a class="source" href="scoped_object_generators.html">
                  scoped_object_generators.js
                </a>
              
                
                <a class="source" href="scrollable.html">
                  scrollable.js
                </a>
              
                
                <a class="source" href="scrollspy.html">
                  scrollspy.js
                </a>
              
                
                <a class="source" href="section.html">
                  section.js
                </a>
              
                
                <a class="source" href="select2.min.html">
                  select2.min.js
                </a>
              
                
                <a class="source" href="selects.html">
                  selects.js
                </a>
              
                
                <a class="source" href="service.AMB.html">
                  service.AMB.js
                </a>
              
                
                <a class="source" href="service.authInterceptor.html">
                  service.authInterceptor.js
                </a>
              
                
                <a class="source" href="service.avatarProfilePersister.html">
                  service.avatarProfilePersister.js
                </a>
              
                
                <a class="source" href="service.dateUtils.html">
                  service.dateUtils.js
                </a>
              
                
                <a class="source" href="service.debounceFn.html">
                  service.debounceFn.js
                </a>
              
                
                <a class="source" href="service.filterExpressionParser.html">
                  service.filterExpressionParser.js
                </a>
              
                
                <a class="source" href="service.getTemplateUrl.html">
                  service.getTemplateUrl.js
                </a>
              
                
                <a class="source" href="service.guidedToursService.html">
                  service.guidedToursService.js
                </a>
              
                
                <a class="source" href="service.i18n.html">
                  service.i18n.js
                </a>
              
                
                <a class="source" href="service.md5.html">
                  service.md5.js
                </a>
              
                
                <a class="source" href="service.nowServer.html">
                  service.nowServer.js
                </a>
              
                
                <a class="source" href="service.nowStream.html">
                  service.nowStream.js
                </a>
              
                
                <a class="source" href="service.priorityQueue.html">
                  service.priorityQueue.js
                </a>
              
                
                <a class="source" href="service.progressDialog.html">
                  service.progressDialog.js
                </a>
              
                
                <a class="source" href="service.queryFilter.html">
                  service.queryFilter.js
                </a>
              
                
                <a class="source" href="service.snComplexPopoverService.html">
                  service.snComplexPopoverService.js
                </a>
              
                
                <a class="source" href="service.snConnect.html">
                  service.snConnect.js
                </a>
              
                
                <a class="source" href="service.snCustomEvent.html">
                  service.snCustomEvent.js
                </a>
              
                
                <a class="source" href="service.snMention.html">
                  service.snMention.js
                </a>
              
                
                <a class="source" href="service.snNotification.html">
                  service.snNotification.js
                </a>
              
                
                <a class="source" href="service.snNotifier.html">
                  service.snNotifier.js
                </a>
              
                
                <a class="source" href="service.snResource.html">
                  service.snResource.js
                </a>
              
                
                <a class="source" href="service.snTabActivity.html">
                  service.snTabActivity.js
                </a>
              
                
                <a class="source" href="service.urlTools.html">
                  service.urlTools.js
                </a>
              
                
                <a class="source" href="service.userData.html">
                  service.userData.js
                </a>
              
                
                <a class="source" href="service.userPreferences.html">
                  service.userPreferences.js
                </a>
              
                
                <a class="source" href="simpleStorage.html">
                  simpleStorage.js
                </a>
              
                
                <a class="source" href="snPolyfill.html">
                  snPolyfill.js
                </a>
              
                
                <a class="source" href="snPopover.html">
                  snPopover.js
                </a>
              
                
                <a class="source" href="snTimeAgoSettings.html">
                  snTimeAgoSettings.js
                </a>
              
                
                <a class="source" href="streamButton.html">
                  streamButton.js
                </a>
              
                
                <a class="source" href="tabbable.html">
                  tabbable.js
                </a>
              
                
                <a class="source" href="tables.html">
                  tables.js
                </a>
              
                
                <a class="source" href="tabs.html">
                  tabs.js
                </a>
              
                
                <a class="source" href="tabs2_14.html">
                  tabs2_14.js
                </a>
              
                
                <a class="source" href="templates.html">
                  templates.js
                </a>
              
                
                <a class="source" href="textutil.html">
                  textutil.js
                </a>
              
                
                <a class="source" href="timeAgo.html">
                  timeAgo.js
                </a>
              
                
                <a class="source" href="tooltip.html">
                  tooltip.js
                </a>
              
                
                <a class="source" href="tooltips.html">
                  tooltips.js
                </a>
              
                
                <a class="source" href="transaction_scope_includes.html">
                  transaction_scope_includes.js
                </a>
              
                
                <a class="source" href="transition.html">
                  transition.js
                </a>
              
                
                <a class="source" href="ui_policy.html">
                  ui_policy.js
                </a>
              
                
                <a class="source" href="utils14.html">
                  utils14.js
                </a>
              
                
                <a class="source" href="velocity.min.html">
                  velocity.min.js
                </a>
              
                
                <a class="source" href="velocity.ui.html">
                  velocity.ui.js
                </a>
              
                
                <a class="source" href="xmlhttp.html">
                  xmlhttp.js
                </a>
              
                
                <a class="source" href="z_last_include.html">
                  z_last_include.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>js_includes_list_edit_doctype.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/*! RESOURCE: /scripts/js_includes_list_edit_doctype.js */</span>
<span class="hljs-comment">/*! RESOURCE: /scripts/GwtListEditWindow.js */</span>
<span class="hljs-keyword">var</span> GwtListEditWindow = Class.create(GlideWindow, {
    <span class="hljs-attr">MESSAGES</span>: [
        <span class="hljs-string">"1 row will be updated"</span>,
        <span class="hljs-string">" rows will be updated"</span>,
        <span class="hljs-string">"1 row will not be updated"</span>,
        <span class="hljs-string">" rows will not be updated"</span>,
        <span class="hljs-string">"Cancel (ESC)"</span>,
        <span class="hljs-string">"Save (Enter)"</span>
    ],
    <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$super, editor, gridEdit</span>) </span>{
        <span class="hljs-keyword">this</span>.originalValue = editor.getValue();
        <span class="hljs-keyword">this</span>.originalRenderValue = gridEdit.selected.textContent;
        <span class="hljs-keyword">this</span>.editor = editor;
        <span class="hljs-keyword">this</span>.gridEdit = gridEdit;
        $<span class="hljs-keyword">super</span>(GwtListEditWindow.glideWindowId, <span class="hljs-literal">true</span>);
        <span class="hljs-keyword">this</span>.refName = editor.name;
        <span class="hljs-keyword">this</span>._getMessages();
        <span class="hljs-keyword">this</span>.state = <span class="hljs-string">'initialize'</span>;
        <span class="hljs-keyword">this</span>.destroyed = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">this</span>.statusPane = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">this</span>._createControls();
    },
    <span class="hljs-attr">_showUpdateMessage</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.removeStatusPane();
        <span class="hljs-keyword">this</span>.getCountCellsSelected();
        <span class="hljs-keyword">var</span> numSelected = <span class="hljs-keyword">this</span>.numCanEdit + <span class="hljs-keyword">this</span>.numCannotEdit;
        <span class="hljs-keyword">if</span> (numSelected &lt;= <span class="hljs-number">1</span>)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">var</span> msgStr;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.numCanEdit == <span class="hljs-number">1</span>)
            msgStr = <span class="hljs-keyword">this</span>.msgRowUpdated;
        <span class="hljs-keyword">else</span>
            msgStr = <span class="hljs-keyword">this</span>.numCanEdit + <span class="hljs-keyword">this</span>.msgRowsUpdated;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.numCannotEdit &gt; <span class="hljs-number">0</span>) {
            msgStr = msgStr + <span class="hljs-string">"&lt;br/&gt;"</span>;
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.numCannotEdit == <span class="hljs-number">1</span>)
                msgStr += <span class="hljs-keyword">this</span>.msgRowNotUpdated;
            <span class="hljs-keyword">else</span>
                msgStr += <span class="hljs-keyword">this</span>.numCannotEdit + <span class="hljs-keyword">this</span>.msgRowsNotUpdated;
        }
        <span class="hljs-keyword">this</span>.appendStatusPane(msgStr);
    },
    <span class="hljs-attr">appendStatusPane</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">msgHtml</span>) </span>{
        <span class="hljs-keyword">var</span> div = <span class="hljs-keyword">new</span> Element(<span class="hljs-string">'div'</span>);
        div.style.marginTop = <span class="hljs-number">2</span>;
        div.style.fontWeight = <span class="hljs-string">"normal"</span>;
        div.update(msgHtml);
        $(GwtListEditWindow.glideWindowId + <span class="hljs-string">"_header"</span>).appendChild(div);
        <span class="hljs-keyword">this</span>.statusPane = div;
    },
    <span class="hljs-attr">removeStatusPane</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.statusPane)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">this</span>.statusPane.remove();
        <span class="hljs-keyword">this</span>.statusPane = <span class="hljs-literal">null</span>;
    },
    <span class="hljs-attr">truncateDisplayValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">dispValue</span>) </span>{
        <span class="hljs-keyword">var</span> displayChars = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Number</span>(<span class="hljs-keyword">this</span>.editor.tableElement.getDisplayChars());
        <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">isNaN</span>(displayChars) &amp;&amp; (displayChars != <span class="hljs-number">-1</span>)) {
            <span class="hljs-keyword">if</span> (dispValue.length &gt; displayChars)
                dispValue = dispValue.substring(<span class="hljs-number">0</span>, displayChars) + <span class="hljs-string">"..."</span>;
        }
        <span class="hljs-keyword">return</span> dispValue;
    },
    <span class="hljs-attr">getCountCellsSelected</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> selected = <span class="hljs-keyword">this</span>.gridEdit.getSelectedSysIds();
        <span class="hljs-keyword">var</span> writeable = <span class="hljs-keyword">this</span>.editor.getCanWriteIds();
        <span class="hljs-keyword">this</span>.numCanEdit = writeable.length;
        <span class="hljs-keyword">this</span>.numCannotEdit = selected.length - writeable.length;
    },
    <span class="hljs-attr">_createControls</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        $(<span class="hljs-keyword">this</span>.window).observe(<span class="hljs-string">"resize"</span>, <span class="hljs-keyword">this</span>._onResize.bind(<span class="hljs-keyword">this</span>));
        $(<span class="hljs-keyword">this</span>.window).observe(<span class="hljs-string">"keydown"</span>, <span class="hljs-keyword">this</span>._onKeyDown.bind(<span class="hljs-keyword">this</span>));
        <span class="hljs-keyword">this</span>.removeBody();
        <span class="hljs-keyword">this</span>.clearSpacing();
        <span class="hljs-keyword">this</span>.addMandatoryDecorator();
        <span class="hljs-keyword">this</span>.createOkCancel();
        <span class="hljs-keyword">this</span>.setPreferredWidth();
        <span class="hljs-keyword">var</span> parent = getFormContentParent();
        <span class="hljs-keyword">this</span>.insert(parent, <span class="hljs-literal">null</span>, <span class="hljs-literal">true</span>);
        <span class="hljs-keyword">var</span> ret = <span class="hljs-keyword">this</span>.createEditControls();
        <span class="hljs-keyword">if</span> (!(ret === <span class="hljs-literal">false</span>))
            <span class="hljs-keyword">this</span>.createEditControlsComplete();
    },
    <span class="hljs-attr">createEditControls</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.setTitle(<span class="hljs-string">"unimplemented abstract function createEditControls"</span>);
    },
    <span class="hljs-attr">createEditControlsComplete</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.state != <span class="hljs-string">'initialize'</span>)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">var</span> cursorCell = <span class="hljs-keyword">this</span>.gridEdit.getCursorCell();
        <span class="hljs-keyword">if</span> (cursorCell !== <span class="hljs-keyword">this</span>.getAnchorCell()) {
            <span class="hljs-keyword">this</span>.dismiss();
            <span class="hljs-keyword">this</span>.gridEdit.editCursor();
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">this</span>.editor.hideLoading();
        <span class="hljs-keyword">this</span>.moveToCell();
        <span class="hljs-keyword">this</span>._showUpdateMessage();
        <span class="hljs-keyword">this</span>.visible();
        setTimeout(<span class="hljs-keyword">this</span>.focusEditor.bind(<span class="hljs-keyword">this</span>), <span class="hljs-number">10</span>);
        <span class="hljs-keyword">this</span>.state = <span class="hljs-string">'complete'</span>;
    },
    <span class="hljs-attr">createTextInput</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> answer = <span class="hljs-keyword">new</span> Element(<span class="hljs-string">'input'</span>, {
            <span class="hljs-string">'id'</span>: GwtListEditWindow.inputID
        });
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.doctype)
            answer.addClassName(<span class="hljs-string">'form-control list-edit-input'</span>);
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.doctype)
            answer.setStyle({
                <span class="hljs-attr">width</span>: <span class="hljs-keyword">this</span>.preferredWidth
            });
        <span class="hljs-keyword">this</span>.focusElement = answer;
        <span class="hljs-keyword">return</span> answer;
    },
    <span class="hljs-attr">getText</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>) </span>{
        <span class="hljs-keyword">if</span> (!t)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">if</span> (t.innerText)
            <span class="hljs-keyword">return</span> t.innerText;
        <span class="hljs-keyword">else</span>
            <span class="hljs-keyword">return</span> t.textContent;
    },
    <span class="hljs-attr">moveToCell</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.container)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">var</span> cell = <span class="hljs-keyword">this</span>.getAnchorCell();
        <span class="hljs-keyword">this</span>.container.style.top = <span class="hljs-keyword">this</span>._getOffsetTop(cell) + <span class="hljs-string">'px'</span>;
        <span class="hljs-keyword">this</span>.container.style.left = <span class="hljs-keyword">this</span>._getOffsetLeft(cell) + <span class="hljs-string">'px'</span>;
        <span class="hljs-keyword">this</span>.container.style.right = <span class="hljs-string">'auto'</span>;
    },
    <span class="hljs-attr">_getOffsetLeftOverflow</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">cell, offset</span>) </span>{
        <span class="hljs-keyword">var</span> formList = $j(cell).closest(<span class="hljs-string">'div.custom-form-group'</span>);
        <span class="hljs-keyword">var</span> offsetLeft = formList.length != <span class="hljs-number">0</span> ? offset - formList.scrollLeft() : offset;
        <span class="hljs-keyword">return</span> offsetLeft;
    },
    <span class="hljs-attr">_getOffsetLeft</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">cell</span>) </span>{
        <span class="hljs-keyword">var</span> offsetLeft = getOffset(cell, <span class="hljs-string">'offsetLeft'</span>);
        <span class="hljs-keyword">var</span> viewportLeft = cell.viewportOffset().left;
        <span class="hljs-keyword">var</span> editorWidth = <span class="hljs-keyword">this</span>.getWidth();
        offsetLeft = isDoctype() ? <span class="hljs-keyword">this</span>._getOffsetLeftOverflow(cell, offsetLeft) : offsetLeft;
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">document</span>.viewport.getDimensions().width &gt;= (editorWidth + viewportLeft))
            <span class="hljs-keyword">return</span> offsetLeft;
        <span class="hljs-keyword">var</span> drawWidth = editorWidth + <span class="hljs-number">2</span>;
        <span class="hljs-keyword">if</span> (drawWidth &lt;= cell.clientWidth)
            <span class="hljs-keyword">return</span> offsetLeft;
        <span class="hljs-keyword">return</span> offsetLeft + cell.clientWidth - drawWidth;
    },
    <span class="hljs-attr">_getOffsetTop</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">cell</span>) </span>{
        <span class="hljs-keyword">var</span> offsetTop = getOffset(cell, <span class="hljs-string">'offsetTop'</span>);
        <span class="hljs-keyword">var</span> viewportTop = cell.viewportOffset().top;
        <span class="hljs-keyword">var</span> editorHeight = <span class="hljs-keyword">this</span>.getHeight();
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">document</span>.viewport.getDimensions().height &gt;= (editorHeight + viewportTop))
            <span class="hljs-keyword">return</span> offsetTop;
        <span class="hljs-keyword">var</span> drawHeight = editorHeight + <span class="hljs-number">2</span>;
        <span class="hljs-keyword">if</span> (drawHeight &lt;= cell.clientHeight)
            <span class="hljs-keyword">return</span> offsetTop;
        <span class="hljs-keyword">return</span> offsetTop + cell.clientHeight - drawHeight;
    },
    <span class="hljs-attr">addMandatoryDecorator</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.editor.isMandatory())
            <span class="hljs-keyword">return</span>
        <span class="hljs-keyword">var</span> mandatory = cel(<span class="hljs-string">'span'</span>);
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.doctype) {
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.originalRenderValue != <span class="hljs-string">""</span>)
                mandatory.className = <span class="hljs-string">'mandatory_populated'</span>;
            <span class="hljs-keyword">else</span>
                mandatory.className = <span class="hljs-string">'mandatory'</span>;
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.doctype)
            mandatory.className = <span class="hljs-string">'required-marker'</span>;
        mandatory.style.fontSize = <span class="hljs-string">'18px'</span>;
        mandatory.innerHTML = <span class="hljs-string">'&amp;nbsp;'</span>;
        <span class="hljs-keyword">this</span>.addDecoration(mandatory, <span class="hljs-literal">true</span>);
    },
    <span class="hljs-attr">createOkCancel</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> cancel = createImage(<span class="hljs-string">'images/workflow_approval_rejected.gif'</span>, <span class="hljs-keyword">this</span>.msgCancelButton, <span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.dismissEvent);
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.doctype)
            cancel = createIcon(<span class="hljs-string">'btn btn-icon icon-cross-circle color-red'</span>, <span class="hljs-keyword">this</span>.msgCancelButton, <span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.dismissEvent);
        cancel.id = <span class="hljs-string">'cell_edit_cancel'</span>;
        cancel.width = <span class="hljs-number">18</span>;
        cancel.height = <span class="hljs-number">18</span>;
        <span class="hljs-keyword">this</span>.addDecoration(cancel);
        <span class="hljs-keyword">var</span> save = createImage(<span class="hljs-string">'images/workflow_approved.gifx'</span>, <span class="hljs-keyword">this</span>.msgSaveButton, <span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.saveEvent);
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.doctype)
            save = createIcon(<span class="hljs-string">'btn btn-icon icon-check-circle color-green'</span>, <span class="hljs-keyword">this</span>.msgSaveButton, <span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.saveEvent);
        save.id = <span class="hljs-string">'cell_edit_ok'</span>;
        save.width = <span class="hljs-number">18</span>;
        save.height = <span class="hljs-number">18</span>;
        <span class="hljs-keyword">this</span>.addDecoration(save);
    },
    <span class="hljs-attr">saveAndClose</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">keyCallback, evt</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.destroyed)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.state != <span class="hljs-string">'complete'</span>) {
            <span class="hljs-keyword">this</span>.dismiss();
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">var</span> input = GwtListEditWindow.getCellEditValue();
        <span class="hljs-keyword">if</span> (!input)
            input = $(<span class="hljs-string">"LIST_EDIT_"</span> + <span class="hljs-keyword">this</span>.editor.name);
        <span class="hljs-keyword">var</span> value = <span class="hljs-string">""</span>;
        <span class="hljs-keyword">if</span> (input) {
            value = input.value;
        }
        <span class="hljs-keyword">var</span> isEmpty = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">if</span> ((value.trim() == <span class="hljs-string">""</span>) || (value == <span class="hljs-string">"NULL"</span> &amp;&amp; <span class="hljs-keyword">this</span>.editor.tableElement.isReference())) {
            isEmpty = <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">if</span> (isEmpty &amp;&amp; <span class="hljs-keyword">this</span>.editor.isMandatory()) {
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.editor.tableElement.type !== <span class="hljs-string">'glide_duration'</span>) {
                alert(getMessage(<span class="hljs-string">'The following mandatory fields are not filled in'</span>) + <span class="hljs-string">': '</span> + <span class="hljs-keyword">this</span>.editor.tableElement.getLabel());
                <span class="hljs-keyword">this</span>.focusEditor();
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">var</span> dur = {
                    <span class="hljs-attr">day</span>: gel(<span class="hljs-string">"dur_day"</span>),
                    <span class="hljs-attr">hour</span>: gel(<span class="hljs-string">"dur_hour"</span>),
                    <span class="hljs-attr">min</span>: gel(<span class="hljs-string">"dur_min"</span>),
                    <span class="hljs-attr">sec</span>: gel(<span class="hljs-string">"dur_sec"</span>)
                };
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> prop <span class="hljs-keyword">in</span> dur) {
                    <span class="hljs-keyword">if</span> (dur[prop] &amp;&amp; dur[prop].value.trim() === <span class="hljs-string">""</span>) {
                        alert(getMessage(<span class="hljs-string">'The following mandatory fields are not filled in'</span>) + <span class="hljs-string">': '</span> + <span class="hljs-keyword">this</span>.editor.tableElement.getLabel());
                        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                    }
                }
            }
        }
        <span class="hljs-keyword">var</span> editControls = gel(<span class="hljs-string">"editControls"</span>);
        <span class="hljs-keyword">var</span> result = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">if</span> (input)
            result = <span class="hljs-keyword">this</span>.runScript(<span class="hljs-number">0</span>, <span class="hljs-literal">true</span>, <span class="hljs-keyword">this</span>.editor.fieldName, value, <span class="hljs-literal">null</span>, keyCallback, evt);
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (editControls)
            result = <span class="hljs-keyword">this</span>.runScriptsForMultipleFields(<span class="hljs-number">0</span>, editControls.getElementsByTagName(<span class="hljs-string">"select"</span>));
        <span class="hljs-keyword">else</span>
            <span class="hljs-keyword">this</span>._commitSave();
        <span class="hljs-keyword">return</span> result === <span class="hljs-literal">false</span> ? <span class="hljs-literal">false</span> : <span class="hljs-literal">true</span>;
    },
    <span class="hljs-attr">runScriptsForMultipleFields</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">index, choiceLists</span>) </span>{
        <span class="hljs-keyword">if</span> (index &lt; choiceLists.length) {
            <span class="hljs-keyword">var</span> element = choiceLists[index];
            <span class="hljs-keyword">var</span> option = element.options[element.selectedIndex];
            <span class="hljs-keyword">var</span> fName = element.name.substring(<span class="hljs-keyword">this</span>.editor.table.length + <span class="hljs-number">1</span>);
            <span class="hljs-keyword">var</span> thisObj = <span class="hljs-keyword">this</span>;
            <span class="hljs-keyword">var</span> saveCallback = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                thisObj.runScriptsForMultipleFields(index + <span class="hljs-number">1</span>, choiceLists);
            }
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.runScript(<span class="hljs-number">0</span>, <span class="hljs-literal">true</span>, fName, option.value, saveCallback);
        } <span class="hljs-keyword">else</span>
            <span class="hljs-keyword">this</span>._commitSave();
    },
    <span class="hljs-attr">runScript</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">index, lastScriptResult, fieldName, newValue, saveCallback, keyCallback, evt</span>) </span>{
        <span class="hljs-keyword">var</span> scripts = [];
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.editor &amp;&amp; <span class="hljs-keyword">this</span>.editor.table &amp;&amp; fieldName)
            scripts = g_event_handlers_onCellEdit[<span class="hljs-keyword">this</span>.editor.table + <span class="hljs-string">"."</span> + fieldName];
        <span class="hljs-keyword">if</span> (!scripts || scripts.length == <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">if</span> (saveCallback)
                saveCallback();
            <span class="hljs-keyword">else</span>
                <span class="hljs-keyword">this</span>._commitSave();
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">if</span> (!lastScriptResult) {
            <span class="hljs-keyword">this</span>.dismiss();
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">if</span> (index &lt; scripts.length) {
            <span class="hljs-keyword">var</span> thisObj = <span class="hljs-keyword">this</span>;
            <span class="hljs-keyword">var</span> callback = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result, doKeyEvent</span>) </span>{
                thisObj.runScript(index + <span class="hljs-number">1</span>, result, fieldName, newValue, saveCallback);
                <span class="hljs-keyword">if</span> (doKeyEvent &amp;&amp; keyCallback != <span class="hljs-literal">null</span> &amp;&amp; evt != <span class="hljs-literal">null</span>) {
                    keyCallback(evt);
                }
            };
            <span class="hljs-keyword">var</span> sysIDs = <span class="hljs-keyword">this</span>.gridEdit.getSelectedSysIds();
            <span class="hljs-keyword">var</span> atts = <span class="hljs-keyword">this</span>.gridEdit.getSelectedAttributes(sysIDs, fieldName);
            <span class="hljs-keyword">var</span> result = scripts[index](sysIDs, <span class="hljs-keyword">this</span>.editor.table, atts, newValue, callback);
            <span class="hljs-keyword">return</span> result;
        }
        <span class="hljs-keyword">if</span> (saveCallback)
            saveCallback();
        <span class="hljs-keyword">else</span>
            <span class="hljs-keyword">this</span>._commitSave();
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    },
    <span class="hljs-attr">_commitSave</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.state = <span class="hljs-string">'saving'</span>;
        <span class="hljs-keyword">this</span>.save();
        <span class="hljs-keyword">this</span>.dismiss();
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.editor)
            <span class="hljs-keyword">this</span>.editor.saveValues();
        <span class="hljs-keyword">return</span>;
    },
    <span class="hljs-attr">save</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> input = GwtListEditWindow.getCellEditValue();
        <span class="hljs-keyword">if</span> (input)
            <span class="hljs-keyword">this</span>.setValue(input.value);
    },
    <span class="hljs-attr">setValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, displayValue</span>) </span>{
        <span class="hljs-keyword">if</span> (!displayValue)
            displayValue = <span class="hljs-string">''</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.editor)
            <span class="hljs-keyword">this</span>.editor.setValue(value, displayValue);
    },
    <span class="hljs-attr">setRenderValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
        <span class="hljs-keyword">if</span> (!value)
            value = <span class="hljs-string">''</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.editor)
            <span class="hljs-keyword">this</span>.editor.setRenderValue(value);
    },
    <span class="hljs-attr">focusEditor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.focusElement) {
            $(<span class="hljs-keyword">this</span>.focusElement).activate();
        }
    },
    <span class="hljs-attr">_onKeyDown</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        <span class="hljs-keyword">switch</span> (e.keyCode) {
            <span class="hljs-keyword">case</span> Event.KEY_ESC:
                <span class="hljs-keyword">this</span>.onKeyEsc(e);
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> Event.KEY_RETURN:
                <span class="hljs-keyword">this</span>.onKeyReturn(e);
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> Event.KEY_TAB:
                <span class="hljs-keyword">this</span>.onKeyTab(e);
                <span class="hljs-keyword">break</span>;
        }
    },
    <span class="hljs-attr">onKeyEsc</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">this</span>.dismissEvent(evt);
    },
    <span class="hljs-attr">onKeyReturn</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        evt.stop();
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.saveAndClose())
            <span class="hljs-keyword">this</span>._placeCursorReturn(evt);
    },
    <span class="hljs-attr">onKeyTab</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        evt.stop();
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.saveAndClose(<span class="hljs-keyword">this</span>._placeCursorTab.bind(<span class="hljs-keyword">this</span>), evt))
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">this</span>._placeCursorTab(evt);
    },
    <span class="hljs-attr">_placeCursorReturn</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">if</span> (!evt.ctrlKey)
            <span class="hljs-keyword">this</span>.gridEdit.refreshCursor();
        <span class="hljs-keyword">else</span>
            <span class="hljs-keyword">this</span>.gridEdit.editNextRow();
    },
    <span class="hljs-attr">_placeCursorTab</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">if</span> (evt.shiftKey)
            <span class="hljs-keyword">this</span>.prevColumn();
        <span class="hljs-keyword">else</span>
            <span class="hljs-keyword">this</span>.nextColumn();
    },
    <span class="hljs-attr">prevColumn</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.gridEdit.moveLeft();
        <span class="hljs-keyword">this</span>.gridEdit.editCursor();
    },
    <span class="hljs-attr">nextColumn</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.gridEdit.moveRight();
        <span class="hljs-keyword">this</span>.gridEdit.editCursor();
    },
    <span class="hljs-attr">dismiss</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.destroyed)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">this</span>.destroyed = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">document</span>.selection)
            <span class="hljs-built_in">document</span>.selection.empty();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">this</span>.destroy();
        } <span class="hljs-keyword">catch</span> (e) {}
        <span class="hljs-keyword">this</span>.state = <span class="hljs-string">'destroyed'</span>;
        <span class="hljs-keyword">this</span>.gridEdit.clearSelected();
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    },
    <span class="hljs-attr">setPreferredWidth</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.preferredWidth = <span class="hljs-keyword">this</span>.getAnchorCell().clientWidth;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.preferredWidth &gt; <span class="hljs-number">400</span>)
            <span class="hljs-keyword">this</span>.preferredWidth = <span class="hljs-number">400</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.preferredWidth &lt; <span class="hljs-number">150</span>)
            <span class="hljs-keyword">this</span>.preferredWidth = <span class="hljs-number">150</span>;
        <span class="hljs-keyword">this</span>.setWidth(<span class="hljs-number">10</span>);
    },
    <span class="hljs-attr">_onResize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.destroyed)
            <span class="hljs-keyword">return</span>;
        setTimeout(<span class="hljs-keyword">this</span>.moveToCell.bind(<span class="hljs-keyword">this</span>), <span class="hljs-number">0</span>);
    },
    <span class="hljs-attr">_getMessages</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> gMessage = <span class="hljs-keyword">new</span> GwtMessage();
        <span class="hljs-keyword">var</span> map = gMessage.getMessages(<span class="hljs-keyword">this</span>.MESSAGES);
        <span class="hljs-keyword">this</span>.msgRowUpdated = map[<span class="hljs-keyword">this</span>.MESSAGES[<span class="hljs-number">0</span>]];
        <span class="hljs-keyword">this</span>.msgRowsUpdated = map[<span class="hljs-keyword">this</span>.MESSAGES[<span class="hljs-number">1</span>]];
        <span class="hljs-keyword">this</span>.msgRowNotUpdated = map[<span class="hljs-keyword">this</span>.MESSAGES[<span class="hljs-number">2</span>]];
        <span class="hljs-keyword">this</span>.msgRowsNotUpdated = map[<span class="hljs-keyword">this</span>.MESSAGES[<span class="hljs-number">3</span>]];
        <span class="hljs-keyword">this</span>.msgCancelButton = map[<span class="hljs-keyword">this</span>.MESSAGES[<span class="hljs-number">4</span>]];
        <span class="hljs-keyword">this</span>.msgSaveButton = map[<span class="hljs-keyword">this</span>.MESSAGES[<span class="hljs-number">5</span>]];
    },
    <span class="hljs-attr">getAnchorCell</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.gridEdit.getAnchorCell();
    },
    <span class="hljs-attr">getAnchorSysId</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.gridEdit.getAnchorSysId();
    },
    <span class="hljs-attr">dismissEvent</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        Event.stop(evt);
        <span class="hljs-keyword">this</span>.dismiss();
        <span class="hljs-keyword">this</span>.gridEdit.refreshCursor();
    },
    <span class="hljs-attr">saveEvent</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        Event.stop(evt);
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.saveAndClose())
            <span class="hljs-keyword">this</span>.gridEdit.refreshCursor();
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"GwtListEditWindow"</span>;
    }
});
GwtListEditWindow.glideWindowId = <span class="hljs-string">'cell_edit_window'</span>;
GwtListEditWindow.inputID = <span class="hljs-string">'cell_edit_value'</span>;
GwtListEditWindow.getCellEditValue = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> $(GwtListEditWindow.inputID);
};
GwtListEditWindow.getCellEditWindow = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> $(GwtListEditWindow.glideWindowId);
};;
<span class="hljs-comment">/*! RESOURCE: /scripts/GwtListEditSavePolicy.js */</span>
<span class="hljs-keyword">var</span> GwtListEditSavePolicy = Class.create({
    <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">listId</span>) </span>{
        <span class="hljs-keyword">this</span>.listId = listId;
    },
    <span class="hljs-attr">analyzeEvent</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">return</span>;
    },
    <span class="hljs-attr">isDirectSave</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    },
    <span class="hljs-attr">isDeferredSave</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    },
    <span class="hljs-attr">isImpliedSave</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    },
    <span class="hljs-attr">getDeferredSaves</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> [];
    },
    <span class="hljs-attr">handleChangesSaved</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{},
    <span class="hljs-attr">handleRowsDeleted</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{},
    <span class="hljs-attr">getEdits</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-string">'glide:list_v2.edit.cells_changed'</span> !== evt.eventName)
            <span class="hljs-keyword">return</span> [];
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.listId !== evt.memo.listId)
            <span class="hljs-keyword">return</span> [];
        <span class="hljs-keyword">return</span> evt.memo.edits;
    },
    <span class="hljs-attr">getSaves</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-string">'glide:list_v2.edit.changes_saved'</span> !== evt.eventName)
            <span class="hljs-keyword">return</span> [];
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.listId !== evt.memo.listId)
            <span class="hljs-keyword">return</span> [];
        <span class="hljs-keyword">return</span> evt.memo.saves;
    },
    <span class="hljs-attr">getDeletes</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-string">'glide:list_v2.edit.rows_deleted'</span> !== evt.eventName)
            <span class="hljs-keyword">return</span> [];
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.listId !== evt.memo.listId)
            <span class="hljs-keyword">return</span> [];
        <span class="hljs-keyword">return</span> evt.memo.deletes;
    },
    <span class="hljs-attr">isSaveNow</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-string">'glide:list_v2.edit.save_now'</span> !== evt.eventName)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>.listId === evt.memo.listId);
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">'GwtListEditSavePolicy'</span>;
    }
});
GwtListEditSavePolicy.CellEdit = Class.create(GwtListEditSavePolicy, {
    <span class="hljs-attr">analyzeEvent</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isSaveNow(evt))
            <span class="hljs-keyword">this</span>.isSave = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.getEdits(evt).length &gt; <span class="hljs-number">0</span>)
            <span class="hljs-keyword">this</span>.isSave = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">else</span>
            <span class="hljs-keyword">this</span>.isSave = <span class="hljs-literal">false</span>;
    },
    <span class="hljs-attr">isDirectSave</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.isSave;
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">'GwtListEditSavePolicy.CellEdit'</span>;
    }
});
GwtListEditSavePolicy.SaveWithForm = Class.create(GwtListEditSavePolicy, {
    <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$super, listId</span>) </span>{
        $<span class="hljs-keyword">super</span>(listId);
        <span class="hljs-keyword">this</span>.defers = [];
    },
    <span class="hljs-attr">analyzeEvent</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">this</span>.defers = [];
        <span class="hljs-keyword">var</span> edits = <span class="hljs-keyword">this</span>.getEdits(evt);
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; edits.length; i++) {
            <span class="hljs-keyword">var</span> edit = edits[i];
            <span class="hljs-keyword">var</span> sysId = edit[<span class="hljs-number">0</span>];
            g_form.fieldChanged(sysId + <span class="hljs-string">"_"</span> + edit[<span class="hljs-number">1</span>], <span class="hljs-literal">true</span>);
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.defers.indexOf(sysId) &lt; <span class="hljs-number">0</span>)
                <span class="hljs-keyword">this</span>.defers.push(sysId);
        }
    },
    <span class="hljs-attr">isDeferredSave</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>.defers.length &gt; <span class="hljs-number">0</span>);
    },
    <span class="hljs-attr">getDeferredSaves</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.defers;
    },
    <span class="hljs-attr">handleChangesSaved</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">this</span>.defers = [];
    },
    <span class="hljs-attr">handleRowsDeleted</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">var</span> deletes = <span class="hljs-keyword">this</span>.getDeletes(evt);
        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>.defers.length; i++) {
            <span class="hljs-keyword">var</span> delSysId = <span class="hljs-keyword">this</span>.defers[i];
            <span class="hljs-keyword">if</span> (deletes.indexOf(delSysId) &gt;= <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">this</span>.defers.splice(i, <span class="hljs-number">1</span>);
                i--;
            }
        }
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">'GwtListEditSavePolicy.SaveWithForm'</span>;
    }
});
GwtListEditSavePolicy.SaveByRow = Class.create(GwtListEditSavePolicy, {
    <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$super, tableController</span>) </span>{
        $<span class="hljs-keyword">super</span>(tableController.listID);
        <span class="hljs-keyword">this</span>.tableController = tableController;
        <span class="hljs-keyword">this</span>.pendingSysId = <span class="hljs-literal">null</span>;
    },
    <span class="hljs-attr">analyzeEvent</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">this</span>.signalSave = (<span class="hljs-keyword">this</span>.getEdits(evt).length &gt; <span class="hljs-number">0</span>);
        <span class="hljs-keyword">this</span>.directSave = <span class="hljs-keyword">this</span>._isSaveEdit(evt);
        <span class="hljs-keyword">this</span>.impliedSave = <span class="hljs-keyword">this</span>._isSaveMotion(evt);
    },
    <span class="hljs-attr">isDirectSave</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.directSave;
    },
    <span class="hljs-attr">isDeferredSave</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isDirectSave())
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.signalSave;
    },
    <span class="hljs-attr">isImpliedSave</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.impliedSave;
    },
    <span class="hljs-attr">getDeferredSaves</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.pendingSysId)
            <span class="hljs-keyword">return</span> [<span class="hljs-keyword">this</span>.pendingSysId];
        <span class="hljs-keyword">return</span> [];
    },
    <span class="hljs-attr">handleChangesSaved</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">var</span> saves = <span class="hljs-keyword">this</span>.getSaves(evt);
        <span class="hljs-keyword">if</span> (saves.indexOf(<span class="hljs-keyword">this</span>.pendingSysId) &gt;= <span class="hljs-number">0</span>)
            <span class="hljs-keyword">this</span>._clearPendingSysId();
    },
    <span class="hljs-attr">handleRowsDeleted</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">var</span> deletes = <span class="hljs-keyword">this</span>.getDeletes(evt);
        <span class="hljs-keyword">if</span> (deletes.indexOf(<span class="hljs-keyword">this</span>.pendingSysId) &gt;= <span class="hljs-number">0</span>)
            <span class="hljs-keyword">this</span>._clearPendingSysId();
    },
    <span class="hljs-attr">_clearPendingSysId</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.pendingSysId = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">this</span>.signalSave = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">this</span>.directSave = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">this</span>.impliedSave = <span class="hljs-literal">false</span>;
    },
    <span class="hljs-attr">_isSaveEdit</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isSaveNow(evt))
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">var</span> edits = <span class="hljs-keyword">this</span>.getEdits(evt);
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; edits.length; i++) {
            <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.pendingSysId)
                <span class="hljs-keyword">this</span>.pendingSysId = edits[i][<span class="hljs-number">0</span>];
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.pendingSysId !== edits[i][<span class="hljs-number">0</span>])
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    },
    <span class="hljs-attr">_isSaveMotion</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.pendingSysId)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isSaveMove(evt))
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isSaveClick(evt))
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    },
    <span class="hljs-attr">_isSaveMove</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">if</span> (!evt.eventName)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-string">'glide:list_v2.edit.focus_moved'</span> !== evt.eventName)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">if</span> (!evt.memo)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">if</span> (evt.memo.listId !== <span class="hljs-keyword">this</span>.listId)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">var</span> toRow = evt.memo.toRow;
        <span class="hljs-keyword">if</span> (!toRow)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">var</span> moveSysId = <span class="hljs-keyword">this</span>.tableController.getSysID(toRow);
        <span class="hljs-keyword">if</span> (!moveSysId)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">return</span> moveSysId !== <span class="hljs-keyword">this</span>.pendingSysId;
    },
    <span class="hljs-attr">_isSaveClick</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-string">'click'</span> !== evt.type)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">var</span> row = Event.findElement(evt, <span class="hljs-string">'tr.list_row'</span>);
        <span class="hljs-keyword">if</span> (!row || row === <span class="hljs-built_in">document</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">var</span> clickSysId = <span class="hljs-keyword">this</span>.tableController.getSysID(row.rowIndex);
        <span class="hljs-keyword">if</span> (!clickSysId)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">return</span> clickSysId !== <span class="hljs-keyword">this</span>.pendingSysId;
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">'GwtListEditSavePolicy.SaveByRow'</span>;
    }
});;
<span class="hljs-comment">/*! RESOURCE: /scripts/GwtListEditTableController.js */</span>
<span class="hljs-keyword">var</span> GwtListEditTableController = Class.create({
    <span class="hljs-attr">MSGS</span>: [
        <span class="hljs-string">'New rows'</span>
    ],
    <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">tableElementDOM</span>) </span>{
        <span class="hljs-keyword">this</span>.tableElementDOM = $(tableElementDOM);
        <span class="hljs-keyword">this</span>._initMeta();
        <span class="hljs-keyword">this</span>._updateTableData();
        <span class="hljs-keyword">this</span>.msgs = getMessages(<span class="hljs-keyword">this</span>.MSGS);
    },
    <span class="hljs-attr">isForTable</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">tableDOM</span>) </span>{
        <span class="hljs-keyword">return</span> tableDOM === <span class="hljs-keyword">this</span>.tableElementDOM;
    },
    <span class="hljs-attr">removeExistingRow</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId</span>) </span>{
        <span class="hljs-keyword">this</span>.changes.remove(sysId);
    },
    <span class="hljs-attr">addExistingRow</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId</span>) </span>{
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.changes.has(sysId)) {
            <span class="hljs-keyword">var</span> record = <span class="hljs-keyword">this</span>.changes.addRecord(sysId, <span class="hljs-string">"add_existing"</span>);
            <span class="hljs-keyword">this</span>.changes.addToAggregates(record);
        }
    },
    <span class="hljs-attr">addRow</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId</span>) </span>{
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.changes.has(sysId)) {
            <span class="hljs-keyword">var</span> record = <span class="hljs-keyword">this</span>.changes.addRecord(sysId, <span class="hljs-string">"add"</span>);
            <span class="hljs-keyword">this</span>.changes.addToAggregates(record);
        }
    },
    <span class="hljs-attr">updateTable</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">tableElementDOM</span>) </span>{
        <span class="hljs-keyword">var</span> tableName = tableElementDOM.getAttribute(<span class="hljs-string">'glide_table'</span>);
        <span class="hljs-keyword">if</span> (tableName !== <span class="hljs-keyword">this</span>.tableName)
            jslog(<span class="hljs-string">"New table name "</span> + tableName + <span class="hljs-string">" does not match existing table name "</span> + <span class="hljs-keyword">this</span>.tableName);
        <span class="hljs-keyword">this</span>.tableElementDOM = $(tableElementDOM);
        <span class="hljs-keyword">this</span>._updateTableData();
    },
    <span class="hljs-attr">unLoadTable</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">tableElementDOM</span>) </span>{
        <span class="hljs-keyword">if</span> (tableElementDOM !== <span class="hljs-keyword">this</span>.tableElementDOM)
            jslog(<span class="hljs-string">"Unloaded table does not match current table "</span> + <span class="hljs-keyword">this</span>.tableName);
    },
    <span class="hljs-attr">exportXml</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">elem</span>) </span>{
        elem.setAttribute(<span class="hljs-string">"table"</span>, <span class="hljs-keyword">this</span>.tableName);
        elem.setAttribute(<span class="hljs-string">"field"</span>, <span class="hljs-keyword">this</span>.relatedField);
        elem.setAttribute(<span class="hljs-string">"query"</span>, <span class="hljs-keyword">this</span>.query);
    },
    <span class="hljs-attr">_initMeta</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.tableName = <span class="hljs-keyword">this</span>.getAttribute(<span class="hljs-string">'glide_table'</span>);
        <span class="hljs-keyword">this</span>.listID = <span class="hljs-keyword">this</span>.getAttribute(<span class="hljs-string">'glide_list_edit_id'</span>) + <span class="hljs-string">''</span>;
        <span class="hljs-keyword">if</span> (!GwtListEditTableController.controllers)
            GwtListEditTableController.controllers = {};
        GwtListEditTableController.controllers[<span class="hljs-keyword">this</span>.listID] = <span class="hljs-keyword">this</span>;
        <span class="hljs-keyword">this</span>.listEditType = <span class="hljs-keyword">this</span>.getAttribute(<span class="hljs-string">'glide_list_edit_type'</span>) + <span class="hljs-string">''</span>;
        <span class="hljs-keyword">this</span>.relatedField = <span class="hljs-keyword">this</span>.getAttribute(<span class="hljs-string">'glide_list_field'</span>) + <span class="hljs-string">''</span>;
        <span class="hljs-keyword">this</span>.query = <span class="hljs-keyword">this</span>.getAttribute(<span class="hljs-string">'glide_list_query'</span>) + <span class="hljs-string">''</span>;
        <span class="hljs-keyword">this</span>.rowCount = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Number</span>(<span class="hljs-keyword">this</span>.getAttribute(<span class="hljs-string">'total_rows'</span>));
        <span class="hljs-keyword">this</span>.insertRow = <span class="hljs-keyword">this</span>._getBooleanAttribute(<span class="hljs-string">'glide_list_edit_insert_row'</span>);
        <span class="hljs-keyword">this</span>.canCreate = <span class="hljs-keyword">this</span>._getBooleanAttribute(<span class="hljs-string">'glide_list_can_create'</span>);
        <span class="hljs-keyword">this</span>.canDelete = <span class="hljs-keyword">this</span>._getBooleanAttribute(<span class="hljs-string">'glide_list_can_delete'</span>);
        <span class="hljs-keyword">this</span>.hasHierarchy = <span class="hljs-keyword">this</span>._getBooleanAttribute(<span class="hljs-string">'glide_list_has_hierarchy'</span>);
        <span class="hljs-keyword">this</span>.hasHeader = <span class="hljs-keyword">this</span>._getBooleanAttribute(<span class="hljs-string">'glide_list_has_header'</span>);
        <span class="hljs-keyword">this</span>.omitLinks = <span class="hljs-keyword">this</span>._getBooleanAttribute(<span class="hljs-string">'glide_list_omit_links'</span>);
        <span class="hljs-keyword">this</span>.hasActions = <span class="hljs-keyword">this</span>.getAttribute(<span class="hljs-string">'glide_list_has_actions'</span>) == <span class="hljs-string">'false'</span> ? <span class="hljs-literal">false</span> : <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">this</span>.groupFields = <span class="hljs-keyword">this</span>._getGroupFields();
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.rowCount == <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-string">"save_with_form"</span> == <span class="hljs-keyword">this</span>.listEditType &amp;&amp; !<span class="hljs-keyword">this</span>.hasHeader)
            <span class="hljs-keyword">this</span>.insertRow = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">var</span> prefixLength = <span class="hljs-keyword">this</span>.tableName.length + <span class="hljs-number">1</span>;
        <span class="hljs-keyword">this</span>.fields = [];
        <span class="hljs-keyword">this</span>.firstField = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">var</span> cellIndexOffset = <span class="hljs-keyword">this</span>._getHeaderOffset();
        <span class="hljs-keyword">var</span> cells = [];
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.tableElementDOM &amp;&amp; <span class="hljs-keyword">this</span>.tableElementDOM.rows &amp;&amp; <span class="hljs-keyword">this</span>.tableElementDOM.rows.length &gt; <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-keyword">this</span>.tableElementDOM.rows[<span class="hljs-number">0</span>].cells) {
            cells = <span class="hljs-keyword">this</span>.tableElementDOM.rows[<span class="hljs-number">0</span>].cells;
        }
        <span class="hljs-keyword">this</span>.headers = [];
        <span class="hljs-keyword">this</span>.headersByName = {};
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; cells.length; i++) {
            <span class="hljs-keyword">var</span> cell = cells[i];
            <span class="hljs-keyword">if</span> (hasClassName(cell, <span class="hljs-string">"column_head"</span>) || hasClassName(cell, <span class="hljs-string">"list_header_cell"</span>)) {
                <span class="hljs-keyword">var</span> fieldName = cell.getAttribute(<span class="hljs-string">'glide_field'</span>);
                <span class="hljs-keyword">var</span> type = cell.getAttribute(<span class="hljs-string">'glide_type'</span>);
                <span class="hljs-keyword">if</span> (type == <span class="hljs-string">'composite_field'</span>) {
                    <span class="hljs-keyword">var</span> compositeField = cell.getAttribute(<span class="hljs-string">'name'</span>);
                    <span class="hljs-keyword">var</span> compositeFirstField = cell.getAttribute(<span class="hljs-string">'composite_edit_field'</span>);
                    <span class="hljs-keyword">var</span> fieldPos = i + cellIndexOffset;
                    fieldName = <span class="hljs-keyword">this</span>.getFqFieldName(compositeFirstField);
                    cell.setAttribute(<span class="hljs-string">'glide_field'</span>, fieldName);
                    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>[<span class="hljs-string">'GlideCompositeField'</span>])
                        <span class="hljs-keyword">new</span> GlideCompositeField(<span class="hljs-keyword">this</span>, fieldPos, compositeField, compositeFirstField);
                }
                <span class="hljs-keyword">if</span> (fieldName) {
                    <span class="hljs-keyword">this</span>.fields.push(fieldName.substring(prefixLength));
                    <span class="hljs-keyword">this</span>.headers[i + cellIndexOffset] = fieldName;
                    <span class="hljs-keyword">this</span>.headersByName[fieldName] = i + cellIndexOffset;
                    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.firstField)
                        <span class="hljs-keyword">this</span>.firstField = fieldName;
                }
            }
        }
    },
    <span class="hljs-attr">_getHeaderOffset</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    },
    <span class="hljs-attr">_updateTableData</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>._updateSysIdToRowMapping();
        <span class="hljs-keyword">this</span>._configureFocus();
        <span class="hljs-keyword">this</span>.observe(<span class="hljs-string">'glide:list_v2.edit.changes_saved'</span>, <span class="hljs-keyword">this</span>._handleChangesSaved.bind(<span class="hljs-keyword">this</span>));
        <span class="hljs-keyword">this</span>.groupSeparator = <span class="hljs-literal">null</span>;
    },
    <span class="hljs-attr">_updateSysIdToRowMapping</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> rows = <span class="hljs-keyword">this</span>.tableElementDOM.rows;
        <span class="hljs-keyword">this</span>.listRows = [];
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, n = rows.length; i &lt; n; i++) {
            <span class="hljs-keyword">var</span> row = rows[i];
            <span class="hljs-keyword">if</span> (!hasClassName(row, <span class="hljs-string">'list_row'</span>) &amp;&amp; !hasClassName(row, <span class="hljs-string">'list_row_detail'</span>))
                <span class="hljs-keyword">continue</span>;
            <span class="hljs-keyword">this</span>.listRows.push(row);
        }
        <span class="hljs-keyword">this</span>.lastRecordRow = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">this</span>.sysIds = [];
        <span class="hljs-keyword">this</span>.sysIdsToRows = {};
        <span class="hljs-keyword">var</span> rowCount = <span class="hljs-keyword">this</span>.getRowCount();
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; rowCount; i++) {
            <span class="hljs-keyword">var</span> sysId = <span class="hljs-keyword">this</span>.getSysID(i);
            <span class="hljs-keyword">if</span> (sysId) {
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.sysIdsToRows.hasOwnProperty(sysId))
                    <span class="hljs-keyword">continue</span>;
                <span class="hljs-keyword">this</span>.sysIdsToRows[sysId] = i;
                <span class="hljs-keyword">this</span>.sysIds.push(sysId);
                <span class="hljs-keyword">this</span>.lastRecordRow = i;
            }
        }
    },
    <span class="hljs-attr">buildCellSelector</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> GwtListEditGridSelector(<span class="hljs-keyword">this</span>.tableElementDOM);
    },
    <span class="hljs-attr">getAttribute</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.tableElementDOM.getAttribute(name);
    },
    <span class="hljs-attr">_configureFocus</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.tableElementDOM.writeAttribute(<span class="hljs-string">"tabIndex"</span>, <span class="hljs-string">"0"</span>);
        <span class="hljs-keyword">this</span>.tableElementDOM.setStyle({
            <span class="hljs-attr">outline</span>: <span class="hljs-string">"none"</span>
        });
        <span class="hljs-keyword">this</span>.tableElementDOM.hideFocus = <span class="hljs-literal">true</span>;
    },
    <span class="hljs-attr">_getBooleanAttribute</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">attrName</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"true"</span> === <span class="hljs-keyword">this</span>.getAttribute(attrName);
    },
    <span class="hljs-attr">getFields</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.fields;
    },
    <span class="hljs-attr">getNameFromColumn</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">colNdx</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.headers[colNdx];
    },
    <span class="hljs-attr">getCell</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, fieldName</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getFqField(sysId, <span class="hljs-keyword">this</span>.getFqFieldName(fieldName));
    },
    <span class="hljs-attr">getFqFieldName</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">"."</span> + fieldName;
    },
    <span class="hljs-attr">getFqField</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, fqFieldName</span>) </span>{
        <span class="hljs-keyword">var</span> col = <span class="hljs-keyword">this</span>.headersByName[fqFieldName];
        <span class="hljs-keyword">if</span> (!col) {
            <span class="hljs-keyword">var</span> row = <span class="hljs-keyword">this</span>.tableElementDOM.select(<span class="hljs-string">'tr[data-detail-row='</span> + fqFieldName + <span class="hljs-string">'][sys_id='</span> + sysId + <span class="hljs-string">']'</span>);
            <span class="hljs-keyword">if</span> (row.length &gt; <span class="hljs-number">0</span>)
                <span class="hljs-keyword">return</span> $(row[<span class="hljs-number">0</span>].cells[<span class="hljs-number">0</span>]);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
        <span class="hljs-keyword">var</span> row = <span class="hljs-keyword">this</span>.getRow(sysId);
        <span class="hljs-keyword">if</span> (!row)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">return</span> $(row.cells[col]);
    },
    <span class="hljs-attr">getRowCount</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.tableElementDOM.rows.length;
    },
    <span class="hljs-attr">getRow</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId</span>) </span>{
        <span class="hljs-keyword">var</span> rowNdx = <span class="hljs-keyword">this</span>.sysIdsToRows[sysId];
        <span class="hljs-keyword">if</span> (!rowNdx)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getRowByNdx(rowNdx);
    },
    <span class="hljs-attr">getRowByNdx</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rowNdx</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.tableElementDOM.rows[rowNdx];
    },
    <span class="hljs-attr">getCellByNdx</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rowNdx, cellNdx</span>) </span>{
        <span class="hljs-keyword">var</span> row = <span class="hljs-keyword">this</span>.getRowByNdx(rowNdx);
        <span class="hljs-keyword">if</span> (!row)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">return</span> $(row.cells[cellNdx]);
    },
    <span class="hljs-attr">getSysID</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rowNdx</span>) </span>{
        <span class="hljs-keyword">var</span> row = <span class="hljs-keyword">this</span>.getRowByNdx(rowNdx);
        <span class="hljs-keyword">if</span> (!row)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">return</span> row.getAttribute(<span class="hljs-string">'sys_id'</span>);
    },
    <span class="hljs-attr">getRelatedSysID</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.relatedField || <span class="hljs-keyword">this</span>.relatedField == <span class="hljs-string">"null"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">var</span> indexOfSysId = <span class="hljs-keyword">this</span>.query.indexOf(<span class="hljs-keyword">this</span>.relatedField + <span class="hljs-string">"="</span>) + <span class="hljs-keyword">this</span>.relatedField.length + <span class="hljs-number">1</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.query.substring(indexOfSysId, indexOfSysId + <span class="hljs-number">32</span>);
    },
    <span class="hljs-attr">_insertFinalBodyRow</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> body = <span class="hljs-keyword">this</span>.tableElementDOM.tBodies[<span class="hljs-number">0</span>];
        <span class="hljs-keyword">var</span> result = body.insertRow(<span class="hljs-keyword">this</span>._getInsertRow(body));
        <span class="hljs-keyword">return</span> $(result);
    },
    <span class="hljs-attr">_getInsertRow</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">body</span>) </span>{
        <span class="hljs-keyword">var</span> rows = body.rows;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = rows.length; i &gt; <span class="hljs-number">0</span>; i--) {
            <span class="hljs-keyword">var</span> row = $(rows[i - <span class="hljs-number">1</span>]);
            <span class="hljs-keyword">if</span> (row.hasClassName(<span class="hljs-string">'aggregate'</span>))
                <span class="hljs-keyword">continue</span>;
            <span class="hljs-keyword">var</span> aggMsg = row.down(<span class="hljs-string">'td.aggregate_message'</span>);
            <span class="hljs-keyword">if</span> (aggMsg)
                <span class="hljs-keyword">continue</span>;
            <span class="hljs-keyword">if</span> (row.hasClassName(<span class="hljs-string">'calculationLine'</span>))
                <span class="hljs-keyword">return</span> i - <span class="hljs-number">1</span>;
            <span class="hljs-keyword">return</span> i;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    },
    <span class="hljs-attr">_getRowCss</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">tr</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.listEditType != <span class="hljs-string">"save_with_form"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-string">"list_unsaved"</span>;
        <span class="hljs-keyword">if</span> ((tr.rowIndex % <span class="hljs-number">2</span>) == <span class="hljs-number">0</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-string">"list_even"</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-string">"list_odd"</span>;
    },
    <span class="hljs-attr">deleteRow</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId</span>) </span>{
        <span class="hljs-keyword">var</span> rowNdx = <span class="hljs-keyword">this</span>.sysIdsToRows[sysId];
        <span class="hljs-keyword">this</span>.tableElementDOM.deleteRow(rowNdx);
        <span class="hljs-keyword">this</span>._updateSysIdToRowMapping();
    },
    <span class="hljs-attr">isHierarchical</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.tableElementDOM.hasClassName(<span class="hljs-string">"hierarchical"</span>);
    },
    <span class="hljs-attr">getListRows</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.listRows;
    },
    <span class="hljs-attr">getRowByCell</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">cell</span>) </span>{
        <span class="hljs-keyword">return</span> $(cell).up(<span class="hljs-string">'tr.list_row, tr.list_row_detail'</span>);
    },
    <span class="hljs-attr">getSysIdByCell</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">cell</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getRowByCell(cell).getAttribute(<span class="hljs-string">'sys_id'</span>);
    },
    <span class="hljs-attr">buildRow</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId</span>) </span>{
        <span class="hljs-keyword">var</span> row = <span class="hljs-keyword">this</span>.getRowByNdx(<span class="hljs-keyword">this</span>.lastRecordRow);
        <span class="hljs-keyword">var</span> cellCnt = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; row.cells.length; i++)
            cellCnt += row.cells[i].colSpan;
        <span class="hljs-keyword">this</span>._ensureGroupSeparator(sysId);
        <span class="hljs-keyword">var</span> tr = <span class="hljs-keyword">this</span>._insertFinalBodyRow();
        tr.id = sysId;
        tr.setAttribute(<span class="hljs-string">'sys_id'</span>, sysId);
        tr.setAttribute(<span class="hljs-string">'record_class'</span>, <span class="hljs-keyword">this</span>.tableName);
        addClassName(tr, <span class="hljs-keyword">this</span>._getRowCss(tr));
        addClassName(tr, <span class="hljs-string">'list_row'</span>);
        <span class="hljs-keyword">var</span> decor = <span class="hljs-keyword">this</span>._buildDecorationCell(tr);
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>; i &lt; cellCnt; i++) {
            <span class="hljs-keyword">var</span> td = tr.insertCell(i);
            td.innerHTML = <span class="hljs-string">"&amp;nbsp;"</span>;
            <span class="hljs-keyword">var</span> fname = <span class="hljs-keyword">this</span>.getNameFromColumn(i);
            <span class="hljs-keyword">if</span> (fname) {
                addClassName(td, <span class="hljs-string">"vt"</span>);
            }
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.lastRecordRow == <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">var</span> tdExtra = $(tr.insertCell(i));
            tdExtra.writeAttribute(<span class="hljs-string">'class'</span>, <span class="hljs-string">'vt'</span>);
            tdExtra.writeAttribute(<span class="hljs-string">'style'</span>, <span class="hljs-string">'padding: 0;'</span>);
        }
        GwtListEditTableController.addClassToRow(tr, <span class="hljs-string">"list_add"</span>);
        <span class="hljs-keyword">this</span>._updateSysIdToRowMapping();
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.hasShowableHierarchy())
            <span class="hljs-keyword">this</span>._buildHierarchyRow(sysId);
        <span class="hljs-keyword">return</span> row;
    },
    <span class="hljs-attr">_buildDecorationCell</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">tr</span>) </span>{
        <span class="hljs-keyword">var</span> td = $(tr.insertCell(<span class="hljs-number">0</span>));
        td.writeAttribute(<span class="hljs-string">'class'</span>, <span class="hljs-string">'list_decoration_cell'</span>);
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._isDoctype()) {
            <span class="hljs-keyword">var</span> style = <span class="hljs-string">'padding-top: 3px; padding-bottom: 3px;'</span>;
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isGrouped() &amp;&amp; <span class="hljs-keyword">this</span>.hasHierarchy)
                style = <span class="hljs-string">'padding-left: 20px;'</span> + style;
            <span class="hljs-keyword">else</span>
                style = <span class="hljs-string">'padding-left: 2px;'</span> + style;
            td.writeAttribute(<span class="hljs-string">'style'</span>, style);
        } <span class="hljs-keyword">else</span> {
            td.className += <span class="hljs-string">' col-control col-small col-center'</span>;
        }
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._isDoctype())
            <span class="hljs-keyword">return</span> td;
    },
    <span class="hljs-attr">_isDoctype</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">document</span>.documentElement.getAttribute(<span class="hljs-string">'data-doctype'</span>) == <span class="hljs-string">'true'</span>;
    },
    <span class="hljs-attr">_buildHierarchyRow</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId</span>) </span>{
        <span class="hljs-keyword">var</span> tr = <span class="hljs-keyword">this</span>._insertFinalBodyRow();
        tr.setAttribute(<span class="hljs-string">'hierarchical'</span>, <span class="hljs-string">'not_loaded'</span>);
        tr.setAttribute(<span class="hljs-string">'style'</span>, <span class="hljs-string">'display: none'</span>);
        tr.setAttribute(<span class="hljs-string">'collapsed'</span>, <span class="hljs-string">'true'</span>);
        tr.setAttribute(<span class="hljs-string">'id'</span>, <span class="hljs-string">'hier_row_'</span> + <span class="hljs-keyword">this</span>.listID + <span class="hljs-string">'_'</span> + sysId);
        <span class="hljs-keyword">var</span> td = tr.insertCell(<span class="hljs-number">0</span>);
        td.setAttribute(<span class="hljs-string">'colspan'</span>, <span class="hljs-string">'99'</span>);
        addClassName(td, <span class="hljs-string">'list_hierarchical_hdr'</span>);
        <span class="hljs-keyword">return</span> tr;
    },
    <span class="hljs-attr">needsInsertRow</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.tableElementDOM.select(<span class="hljs-string">".list_unsaved"</span>) != <span class="hljs-number">0</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.tableElementDOM.select(<span class="hljs-string">".list_edit_new_row"</span>) != <span class="hljs-number">0</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> isTablet != <span class="hljs-string">'undefined'</span> &amp;&amp; isTablet)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.insertRow;
    },
    <span class="hljs-attr">fire</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt, info</span>) </span>{
        <span class="hljs-keyword">if</span> (!info.listId)
            jslog(<span class="hljs-string">'Event '</span> + evt + <span class="hljs-string">' fired with no listId'</span>);
        <span class="hljs-keyword">if</span> (info.listId !== <span class="hljs-keyword">this</span>.listID)
            jslog(<span class="hljs-string">'Event '</span> + evt + <span class="hljs-string">' fired for unknown list '</span> + info.listId);
        <span class="hljs-keyword">this</span>.tableElementDOM.fire(evt, info);
    },
    <span class="hljs-attr">fireCellsChanged</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">edits</span>) </span>{
        <span class="hljs-keyword">var</span> info = {
            <span class="hljs-attr">listId</span>: <span class="hljs-keyword">this</span>.listID,
            <span class="hljs-attr">edits</span>: edits
        };
        <span class="hljs-keyword">this</span>.fire(<span class="hljs-string">'glide:list_v2.edit.cells_changed'</span>, info);
    },
    <span class="hljs-attr">fireFocusMoved</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">toRow, toCol</span>) </span>{
        <span class="hljs-keyword">var</span> info = {
            <span class="hljs-attr">listId</span>: <span class="hljs-keyword">this</span>.listID,
            <span class="hljs-attr">toRow</span>: toRow,
            <span class="hljs-attr">toCol</span>: toCol
        };
        <span class="hljs-keyword">this</span>.fire(<span class="hljs-string">'glide:list_v2.edit.focus_moved'</span>, info);
    },
    <span class="hljs-attr">observe</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt, callback</span>) </span>{
        <span class="hljs-keyword">this</span>.tableElementDOM.observe(evt, callback);
    },
    <span class="hljs-attr">observeOnBody</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt, callback</span>) </span>{
        <span class="hljs-keyword">this</span>.tableElementDOM.down(<span class="hljs-string">'tbody'</span>).observe(evt, callback);
    },
    <span class="hljs-attr">stopObserving</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt, callback</span>) </span>{
        <span class="hljs-keyword">this</span>.tableElementDOM.stopObserving(evt, callback);
    },
    <span class="hljs-attr">stopObservingOnBody</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt, callback</span>) </span>{
        <span class="hljs-keyword">this</span>.tableElementDOM.down(<span class="hljs-string">'tbody'</span>).stopObserving(evt, callback);
    },
    <span class="hljs-attr">hasDeferredChanges</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-string">'save_with_form'</span> === <span class="hljs-keyword">this</span>.listEditType)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-string">'save_by_row'</span> === <span class="hljs-keyword">this</span>.listEditType)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    },
    <span class="hljs-attr">isFormUI</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-string">'save_with_form'</span> === <span class="hljs-keyword">this</span>.listEditType)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    },
    <span class="hljs-attr">canEdit</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> (<span class="hljs-string">'disabled'</span> !== <span class="hljs-keyword">this</span>.listEditType);
    },
    <span class="hljs-attr">buildSavePolicy</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">type</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-string">"save_with_form"</span> === <span class="hljs-keyword">this</span>.listEditType)
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> GwtListEditSavePolicy.SaveWithForm(<span class="hljs-keyword">this</span>.listID);
        <span class="hljs-keyword">if</span> (<span class="hljs-string">"save_by_row"</span> === <span class="hljs-keyword">this</span>.listEditType)
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> GwtListEditSavePolicy.SaveByRow(<span class="hljs-keyword">this</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> GwtListEditSavePolicy.CellEdit(<span class="hljs-keyword">this</span>.listID);
    },
    <span class="hljs-attr">focus</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.tableElementDOM.setActive)
            <span class="hljs-keyword">this</span>.tableElementDOM.setActive();
        <span class="hljs-keyword">else</span>
            <span class="hljs-keyword">this</span>.tableElementDOM.focus();
    },
    <span class="hljs-attr">focusBody</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> el = <span class="hljs-keyword">this</span>.tableElementDOM.down(<span class="hljs-string">'tbody'</span>);
        <span class="hljs-keyword">if</span> (el.setActive)
            el.setActive();
        <span class="hljs-keyword">else</span>
            el.focus();
    },
    <span class="hljs-attr">getDecorationCell</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId</span>) </span>{
        <span class="hljs-keyword">var</span> row = <span class="hljs-keyword">this</span>.getRow(sysId);
        <span class="hljs-keyword">if</span> (!row)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">return</span> row.cells[<span class="hljs-number">0</span>];
    },
    <span class="hljs-attr">_handleChangesSaved</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">if</span> (evt.memo.listId !== <span class="hljs-keyword">this</span>.listID)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.insertRow)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-string">"save_with_form"</span> === <span class="hljs-keyword">this</span>.listEditType)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.needsInsertRow &amp;&amp; (<span class="hljs-keyword">this</span>.listRows.length === <span class="hljs-number">1</span>))
            <span class="hljs-keyword">this</span>._showListActions();
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.listRows.length === <span class="hljs-number">2</span>) {
            <span class="hljs-keyword">this</span>._showListActions();
        }
    },
    <span class="hljs-attr">_showListActions</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> container = $(<span class="hljs-keyword">this</span>.listID + <span class="hljs-string">'_expanded'</span>);
        <span class="hljs-keyword">if</span> (!container)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">var</span> navTables = container.select(<span class="hljs-string">'table.list_nav_bottom'</span>);
        <span class="hljs-keyword">if</span> (<span class="hljs-number">1</span> !== navTables.length)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">var</span> spans = navTables[<span class="hljs-number">0</span>].select(<span class="hljs-string">'span.list_hide_empty'</span>);
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; spans.length; i++) {
            spans[i].show();
        }
    },
    <span class="hljs-attr">getRecordPos</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">row</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getListRows().indexOf(row) + <span class="hljs-number">1</span>;
    },
    <span class="hljs-attr">getRecordIndex</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">recPos</span>) </span>{
        <span class="hljs-keyword">var</span> rows = <span class="hljs-keyword">this</span>.getListRows();
        <span class="hljs-keyword">var</span> extra = recPos - rows.length
        <span class="hljs-keyword">if</span> (rows.length &gt; <span class="hljs-number">0</span> &amp;&amp; extra &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">var</span> lastNdx = rows[rows.length - <span class="hljs-number">1</span>].rowIndex;
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.hasHierarchy)
                <span class="hljs-keyword">return</span> lastNdx + extra + extra;
            <span class="hljs-keyword">return</span> lastNdx + extra;
        }
        <span class="hljs-keyword">var</span> row = <span class="hljs-keyword">this</span>.getRowByPos(recPos);
        <span class="hljs-keyword">if</span> (row)
            <span class="hljs-keyword">return</span> row.rowIndex;
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    },
    <span class="hljs-attr">getRowByPos</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">recPos</span>) </span>{
        <span class="hljs-keyword">if</span> (recPos &lt; <span class="hljs-number">1</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">var</span> rows = <span class="hljs-keyword">this</span>.getListRows();
        <span class="hljs-keyword">if</span> (recPos &gt; rows.length)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">return</span> rows[recPos - <span class="hljs-number">1</span>];
    },
    <span class="hljs-attr">getCellByPos</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">recPos, cellNdx</span>) </span>{
        <span class="hljs-keyword">var</span> row = <span class="hljs-keyword">this</span>.getRowByPos(recPos);
        <span class="hljs-keyword">if</span> (!row)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">if</span> (hasClassName(row, <span class="hljs-string">'list_row_detail'</span>))
            <span class="hljs-keyword">return</span> $(row.cells[<span class="hljs-number">0</span>]);
        <span class="hljs-keyword">return</span> $(row.cells[cellNdx]);
    },
    <span class="hljs-attr">getSysIDByPos</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">recPos</span>) </span>{
        <span class="hljs-keyword">var</span> row = <span class="hljs-keyword">this</span>.getRowByPos(recPos);
        <span class="hljs-keyword">if</span> (!row)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">return</span> row.getAttribute(<span class="hljs-string">'sys_id'</span>);
    },
    <span class="hljs-attr">getFieldElement</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName</span>) </span>{
        <span class="hljs-keyword">return</span> TableElement.get(<span class="hljs-keyword">this</span>.getFqFieldName(fieldName));
    },
    <span class="hljs-attr">isFirstField</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName</span>) </span>{
        <span class="hljs-keyword">var</span> fqFieldName = <span class="hljs-keyword">this</span>.getFqFieldName(fieldName);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.firstField === fqFieldName;
    },
    <span class="hljs-attr">_getGroupFields</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> GROUP_BY = <span class="hljs-string">"GROUPBY"</span>;
        <span class="hljs-keyword">var</span> groupBy = [];
        <span class="hljs-keyword">var</span> query = <span class="hljs-keyword">this</span>.getAttribute(<span class="hljs-string">'glide_list_query'</span>) + <span class="hljs-string">''</span>;
        <span class="hljs-keyword">var</span> terms = query.split(<span class="hljs-string">'^'</span>);
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; terms.length; i++) {
            <span class="hljs-keyword">var</span> term = terms[i];
            <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> === term.indexOf(GROUP_BY))
                groupBy.push(term.substring(GROUP_BY.length));
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> === groupBy.length)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">return</span> groupBy.join(<span class="hljs-string">','</span>);
    },
    <span class="hljs-attr">_isGrouped</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> (<span class="hljs-literal">null</span> !== <span class="hljs-keyword">this</span>.groupFields);
    },
    <span class="hljs-attr">_ensureGroupSeparator</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId</span>) </span>{
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._isGrouped())
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> !== <span class="hljs-keyword">this</span>.groupSeparator)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">this</span>.groupSeparator = <span class="hljs-keyword">this</span>._buildGroupSeparator(sysId);
    },
    <span class="hljs-attr">_buildGroupSeparator</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId</span>) </span>{
        <span class="hljs-keyword">var</span> tr = <span class="hljs-keyword">this</span>._insertFinalBodyRow();
        addClassName(tr, <span class="hljs-string">'list_group'</span>);
        tr.setAttribute(<span class="hljs-string">'group_row'</span>, <span class="hljs-string">'true'</span>);
        tr.setAttribute(<span class="hljs-string">'collapsed'</span>, <span class="hljs-string">'never'</span>);
        tr.setAttribute(<span class="hljs-string">'id'</span>, <span class="hljs-string">'row_'</span> + <span class="hljs-keyword">this</span>.listID + <span class="hljs-string">'_'</span> + sysId);
        tr.setAttribute(<span class="hljs-string">'groupfield'</span>, <span class="hljs-keyword">this</span>.groupFields);
        <span class="hljs-keyword">var</span> td = $(tr.insertCell(<span class="hljs-number">0</span>));
        addClassName(td, <span class="hljs-string">'list_group'</span>);
        td.setAttribute(<span class="hljs-string">'colSpan'</span>, <span class="hljs-string">'99'</span>);
        td.setAttribute(<span class="hljs-string">'group_row_td'</span>, <span class="hljs-string">'true'</span>);
        td.setAttribute(<span class="hljs-string">'style'</span>, <span class="hljs-string">'page-break-before: auto;'</span>);
        <span class="hljs-keyword">var</span> o = {
            <span class="hljs-attr">newRows</span>: <span class="hljs-keyword">this</span>.msgs[<span class="hljs-string">'New rows'</span>]
        };
        td.insert(GwtListEditTableController.Templates.NEW_ROWS.evaluate(o));
        <span class="hljs-keyword">return</span> tr;
    },
    <span class="hljs-attr">hasShowableHierarchy</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isGrouped())
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.hasHierarchy;
    },
    <span class="hljs-attr">getNextRowByPos</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fromPos</span>) </span>{
        <span class="hljs-keyword">var</span> limit = <span class="hljs-keyword">this</span>.getListRows().length;
        <span class="hljs-keyword">var</span> ndx = fromPos + <span class="hljs-number">1</span>;
        <span class="hljs-keyword">while</span> (ndx &lt;= limit) {
            <span class="hljs-keyword">var</span> row = <span class="hljs-keyword">this</span>.getRowByPos(ndx);
            <span class="hljs-keyword">if</span> (row &amp;&amp; row.style.display != <span class="hljs-string">'none'</span>)
                <span class="hljs-keyword">return</span> ndx;
            ndx++;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    },
    <span class="hljs-attr">getPrevRowByPos</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fromPos</span>) </span>{
        <span class="hljs-keyword">var</span> ndx = fromPos - <span class="hljs-number">1</span>;
        <span class="hljs-keyword">while</span> (ndx &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">var</span> row = <span class="hljs-keyword">this</span>.getRowByPos(ndx);
            <span class="hljs-keyword">if</span> (row &amp;&amp; row.style.display != <span class="hljs-string">'none'</span>)
                <span class="hljs-keyword">return</span> ndx;
            ndx--;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">'GwtListEditTableController'</span>;
    }
});
GwtListEditTableController.showImage = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, imageSrc</span>) </span>{
    <span class="hljs-keyword">var</span> left = getOffset(element, <span class="hljs-string">"offsetLeft"</span>);
    <span class="hljs-keyword">var</span> top = getOffset(element, <span class="hljs-string">"offsetTop"</span>);
    <span class="hljs-keyword">var</span> w = element.offsetWidth;
    <span class="hljs-keyword">var</span> h = element.offsetHeight;
    left += w - <span class="hljs-number">11</span>;
    top += h - <span class="hljs-number">11</span>;
    <span class="hljs-keyword">var</span> img = cel(<span class="hljs-string">'img'</span>);
    img.src = imageSrc;
    img.alt = <span class="hljs-string">''</span>;
    img.style.position = <span class="hljs-string">'absolute'</span>;
    img.style.left = left + <span class="hljs-string">'px'</span>;
    img.style.top = top + <span class="hljs-string">'px'</span>;
    addChild(img);
    <span class="hljs-keyword">return</span> img;
};
GwtListEditTableController.addClassToRow = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">tr, className</span>) </span>{
    addClassName(tr, className);
    <span class="hljs-keyword">var</span> cells = tr.cells;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>; i &lt; cells.length; i++)
        addClassName(cells[i], className);
};
GwtListEditTableController.removeClassFromRow = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">tr, className</span>) </span>{
    removeClassName(tr, className);
    <span class="hljs-keyword">var</span> cells = tr.cells;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; cells.length; i++)
        removeClassName(cells[i], className);
};
GwtListEditTableController.Templates = {
    <span class="hljs-attr">NEW_ROWS</span>: <span class="hljs-keyword">new</span> Template(
        <span class="hljs-string">'&lt;span class="list_group"&gt;#{newRows}&lt;/span&gt;'</span>
    )
};;
<span class="hljs-comment">/*! RESOURCE: /scripts/GwtListEditorPendingChanges.js */</span>
<span class="hljs-keyword">var</span> GwtListEditorPendingChanges = Class.create({
    <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">tableController</span>) </span>{
        <span class="hljs-keyword">this</span>.aggregates = <span class="hljs-keyword">new</span> GlideListAggregates(tableController);
        <span class="hljs-keyword">this</span>.valueLoader = <span class="hljs-keyword">new</span> GwtListEditAjaxValueLoader(<span class="hljs-keyword">this</span>, tableController);
        <span class="hljs-keyword">this</span>.modifiedRecords = {};
        <span class="hljs-keyword">this</span>.emptyRecord = <span class="hljs-literal">null</span>;
    },
    <span class="hljs-attr">get</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isEmptyRecord(sysId))
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.emptyRecord;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.modifiedRecords[sysId];
    },
    <span class="hljs-attr">getModifiedRecords</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.modifiedRecords;
    },
    <span class="hljs-attr">put</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, record</span>) </span>{
        <span class="hljs-keyword">this</span>.modifiedRecords[sysId] = record;
    },
    <span class="hljs-attr">has</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.modifiedRecords[sysId] != <span class="hljs-literal">null</span>;
    },
    <span class="hljs-attr">addRecord</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, operation</span>) </span>{
        <span class="hljs-keyword">var</span> record = <span class="hljs-keyword">new</span> GwtListEditRecord(sysId);
        <span class="hljs-keyword">if</span> (operation)
            record.setOperation(operation);
        <span class="hljs-keyword">this</span>.put(sysId, record);
        <span class="hljs-keyword">return</span> record;
    },
    <span class="hljs-attr">addEmptyRecord</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId</span>) </span>{
        <span class="hljs-keyword">this</span>.saveEmptyRecord();
        <span class="hljs-keyword">this</span>.emptyRecord = <span class="hljs-keyword">new</span> GwtListEditRecord(sysId);
        <span class="hljs-keyword">this</span>.emptyRecord.setOperation(<span class="hljs-string">"new"</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.emptyRecord;
    },
    <span class="hljs-attr">addField</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, fieldName, value</span>) </span>{
        <span class="hljs-keyword">var</span> record = <span class="hljs-keyword">this</span>.get(sysId);
        <span class="hljs-keyword">var</span> field = record.addField(fieldName);
        field.setValue(value);
    },
    <span class="hljs-attr">saveEmptyRecord</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">this</span>.emptyRecord;
        <span class="hljs-keyword">if</span> (result) {
            result.setOperation(<span class="hljs-string">"add"</span>);
            <span class="hljs-keyword">this</span>.modifiedRecords[<span class="hljs-keyword">this</span>.emptyRecord.sysId] = result;
        }
        <span class="hljs-keyword">this</span>.emptyRecord = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">return</span> result;
    },
    <span class="hljs-attr">isEmptyRecord</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.emptyRecord &amp;&amp; <span class="hljs-keyword">this</span>.emptyRecord.sysId == sysId;
    },
    <span class="hljs-attr">getValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, fieldName</span>) </span>{
        <span class="hljs-keyword">var</span> field = <span class="hljs-keyword">this</span>.getField(sysId, fieldName);
        <span class="hljs-keyword">if</span> (!field)
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
        <span class="hljs-keyword">return</span> field.getValue();
    },
    <span class="hljs-attr">setValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, fieldName, value, notify</span>) </span>{
        <span class="hljs-keyword">var</span> field = <span class="hljs-keyword">this</span>.getField(sysId, fieldName);
        <span class="hljs-keyword">if</span> (!field)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">var</span> oldValue = field.getValue();
        notify(sysId, fieldName, oldValue, value);
        field.setValue(value);
        <span class="hljs-keyword">this</span>.aggregates.updateAggregates(fieldName, oldValue, value);
        <span class="hljs-keyword">return</span> field;
    },
    <span class="hljs-attr">setDisplayValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, fieldName, value, notify</span>) </span>{
        <span class="hljs-keyword">var</span> field = <span class="hljs-keyword">this</span>.getField(sysId, fieldName);
        <span class="hljs-keyword">if</span> (!field)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">var</span> oldValue = field.getDisplayValue();
        notify(sysId, fieldName, oldValue, value);
        field.setDisplayValue(value);
        <span class="hljs-keyword">this</span>.aggregates.updateAggregates(fieldName, oldValue, value);
        <span class="hljs-keyword">return</span> field;
    },
    <span class="hljs-attr">setReferenceValid</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, fieldName, valid</span>) </span>{
        <span class="hljs-keyword">var</span> field = <span class="hljs-keyword">this</span>.getField(sysId, fieldName);
        <span class="hljs-keyword">if</span> (field)
            field.setReferenceValid(valid);
    },
    <span class="hljs-attr">isReferenceValid</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, fieldName</span>) </span>{
        <span class="hljs-keyword">var</span> field = <span class="hljs-keyword">this</span>.getField(sysId, fieldName);
        <span class="hljs-keyword">if</span> (field)
            <span class="hljs-keyword">return</span> field.isReferenceValid();
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    },
    <span class="hljs-attr">getDisplayValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, fieldName</span>) </span>{
        <span class="hljs-keyword">var</span> field = <span class="hljs-keyword">this</span>.getField(sysId, fieldName);
        <span class="hljs-keyword">if</span> (!field)
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
        <span class="hljs-keyword">return</span> field.getDisplayValue();
    },
    <span class="hljs-attr">getRenderValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, fieldName</span>) </span>{
        <span class="hljs-keyword">var</span> field = <span class="hljs-keyword">this</span>.getField(sysId, fieldName);
        <span class="hljs-keyword">if</span> (!field)
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
        <span class="hljs-keyword">return</span> field.getRenderValue();
    },
    <span class="hljs-attr">getRecordOperation</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId</span>) </span>{
        <span class="hljs-keyword">var</span> r = <span class="hljs-keyword">this</span>.get(sysId);
        <span class="hljs-keyword">if</span> (r)
            <span class="hljs-keyword">return</span> r.operation;
        <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
    },
    <span class="hljs-attr">setRecordOperation</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, operation</span>) </span>{
        <span class="hljs-keyword">var</span> r = <span class="hljs-keyword">this</span>.get(sysId);
        <span class="hljs-keyword">if</span> (r)
            r.operation = operation;
    },
    <span class="hljs-attr">getField</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, field</span>) </span>{
        <span class="hljs-keyword">var</span> r = <span class="hljs-keyword">this</span>.get(sysId);
        <span class="hljs-keyword">if</span> (!r)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">return</span> r.getField(field);
    },
    <span class="hljs-attr">getFieldDefaults</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> defaults = <span class="hljs-keyword">this</span>.getDefaults();
        <span class="hljs-keyword">if</span> (!defaults)
            <span class="hljs-keyword">return</span> {};
        <span class="hljs-keyword">return</span> defaults.getFields();
    },
    <span class="hljs-attr">setDefaults</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">record</span>) </span>{
        <span class="hljs-keyword">var</span> fields = <span class="hljs-keyword">this</span>.getFieldDefaults();
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> n <span class="hljs-keyword">in</span> fields) {
            <span class="hljs-keyword">var</span> defaultField = fields[n];
            <span class="hljs-keyword">var</span> f = record.addField(n);
            f.setInitialValues(defaultField.getValue(), defaultField.getDisplayValue());
            f.setWritable(defaultField.isWritable());
            f.setMandatory(defaultField.isMandatory());
            f.setOKExtension(defaultField.isOKExtension());
            f.setLabel(defaultField.getLabel());
        }
    },
    <span class="hljs-attr">setRenderValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, fieldName, value</span>) </span>{
        <span class="hljs-keyword">var</span> field = <span class="hljs-keyword">this</span>.getField(sysId, fieldName);
        <span class="hljs-keyword">if</span> (!field)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        field.setRenderValue(value);
        <span class="hljs-keyword">return</span> field;
    },
    <span class="hljs-attr">isFieldDirty</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, fieldName</span>) </span>{
        <span class="hljs-keyword">var</span> field = <span class="hljs-keyword">this</span>.getField(sysId, fieldName);
        <span class="hljs-keyword">if</span> (!field)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">return</span> field.isModified();
    },
    <span class="hljs-attr">isValueSet</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, fieldName</span>) </span>{
        <span class="hljs-keyword">var</span> field = <span class="hljs-keyword">this</span>.getField(sysId, fieldName);
        <span class="hljs-keyword">if</span> (!field)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">return</span> field.isValueSet();
    },
    <span class="hljs-attr">getDefaults</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.modifiedRecords[<span class="hljs-string">"-1"</span>];
    },
    <span class="hljs-attr">getDeletedRowCount</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> count = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> id <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.modifiedRecords) {
            <span class="hljs-keyword">var</span> record = <span class="hljs-keyword">this</span>.modifiedRecords[id];
            <span class="hljs-keyword">if</span> (record.isDeleted())
                count++;
        }
        <span class="hljs-keyword">return</span> count;
    },
    <span class="hljs-attr">getAddedRowCount</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> count = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> id <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.modifiedRecords) {
            <span class="hljs-keyword">var</span> record = <span class="hljs-keyword">this</span>.modifiedRecords[id];
            <span class="hljs-keyword">if</span> (record.isAdded())
                count++;
        }
        <span class="hljs-keyword">return</span> count;
    },
    <span class="hljs-attr">canWriteToFields</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">id, fields</span>) </span>{
        <span class="hljs-keyword">var</span> record = <span class="hljs-keyword">this</span>.get(id);
        <span class="hljs-keyword">if</span> (!record)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">var</span> canWrite = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>; j &lt; fields.length; j++) {
            <span class="hljs-keyword">var</span> field = record.getField(fields[j]);
            <span class="hljs-keyword">if</span> (!field)
                <span class="hljs-keyword">continue</span>;
            <span class="hljs-keyword">if</span> (!field.canWrite) {
                canWrite = <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">break</span>;
            }
        }
        <span class="hljs-keyword">return</span> canWrite;
    },
    <span class="hljs-attr">clearDefaults</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.modifiedRecords[<span class="hljs-string">"-1"</span>];
    },
    <span class="hljs-attr">clearModified</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId</span>) </span>{
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.get(sysId))
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">this</span>.get(sysId).clearModified();
    },
    <span class="hljs-attr">clearAllModified</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> id <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.changes)
            <span class="hljs-keyword">this</span>.clearModified(id);
    },
    <span class="hljs-attr">remove</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.modifiedRecords[sysId])
            <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.modifiedRecords[sysId];
    },
    <span class="hljs-attr">removeAll</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.modifiedRecords)
            <span class="hljs-keyword">if</span> (i != <span class="hljs-number">-1</span>)
                <span class="hljs-keyword">this</span>.remove(i);
    },
    <span class="hljs-attr">getValueToRender</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, fieldName</span>) </span>{
        <span class="hljs-keyword">var</span> field = <span class="hljs-keyword">this</span>.getField(sysId, fieldName);
        <span class="hljs-keyword">if</span> (!field || (<span class="hljs-keyword">this</span>.emptyRecord &amp;&amp; sysId == <span class="hljs-keyword">this</span>.emptyRecord.sysId))
            <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
        <span class="hljs-keyword">if</span> (field.isRenderValueSet())
            <span class="hljs-keyword">return</span> field.getRenderValue();
        <span class="hljs-keyword">if</span> (field.isDisplayValueSet())
            <span class="hljs-keyword">return</span> field.getDisplayValue();
        <span class="hljs-keyword">if</span> (field.isValueSet())
            <span class="hljs-keyword">return</span> field.getValue();
        <span class="hljs-keyword">if</span> (field.getRenderValue())
            <span class="hljs-keyword">return</span> field.getRenderValue();
        <span class="hljs-keyword">if</span> (field.getDisplayValue())
            <span class="hljs-keyword">return</span> field.getDisplayValue();
        <span class="hljs-keyword">return</span> field.getValue();
    },
    <span class="hljs-attr">exportRecords</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">receiver</span>) </span>{
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> id <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.modifiedRecords) {
            <span class="hljs-keyword">var</span> record = <span class="hljs-keyword">this</span>.get(id);
            receiver.changedRecord(id, record);
        }
    },
    <span class="hljs-attr">exportChanges</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">receiver</span>) </span>{
        <span class="hljs-keyword">var</span> exporter = <span class="hljs-keyword">new</span> GwtListEditorPendingChanges.ChangeExporter(receiver);
        <span class="hljs-keyword">this</span>.exportRecords(exporter);
    },
    <span class="hljs-attr">inspectRecords</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">receiver</span>) </span>{
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> id <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.modifiedRecords) {
            <span class="hljs-keyword">if</span> (receiver.isDone())
                <span class="hljs-keyword">return</span>;
            <span class="hljs-keyword">var</span> record = <span class="hljs-keyword">this</span>.get(id);
            receiver.changedRecord(id, record);
        }
    },
    <span class="hljs-attr">getAggregateValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName, type</span>) </span>{
        <span class="hljs-keyword">this</span>.aggregates.getAggregateValue(fieldName, type);
    },
    <span class="hljs-attr">getAggregateFields</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.aggregates.getAggregateFields();
    },
    <span class="hljs-attr">addToAggregates</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">record</span>) </span>{
        <span class="hljs-keyword">var</span> fields = record.getFields();
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> n <span class="hljs-keyword">in</span> fields) {
            <span class="hljs-keyword">var</span> field = fields[n];
            <span class="hljs-keyword">var</span> value = field.getValue();
            <span class="hljs-keyword">if</span> (field.isDisplayValueSet())
                value = field.getDisplayValue();
            <span class="hljs-keyword">this</span>.aggregates.addToAggregates(n, value);
        }
    },
    <span class="hljs-attr">removeFromAggregates</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">record</span>) </span>{
        <span class="hljs-keyword">var</span> fields = record.getFields();
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> n <span class="hljs-keyword">in</span> fields) {
            <span class="hljs-keyword">var</span> field = fields[n];
            <span class="hljs-keyword">var</span> value = field.getValue();
            <span class="hljs-keyword">if</span> (field.isDisplayValueSet())
                value = field.getDisplayValue();
            <span class="hljs-keyword">this</span>.aggregates.removeFromAggregates(n, value);
        }
    },
    <span class="hljs-attr">updateAggregates</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n, originalValue, value</span>) </span>{
        <span class="hljs-keyword">this</span>.aggregates.updateAggregates(n, originalValue, value);
    },
    <span class="hljs-attr">rowCountChanged</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
        <span class="hljs-keyword">this</span>.aggregates.rowCountChanged(value);
    },
    <span class="hljs-attr">resetAggregates</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.aggregates.resetAggregates();
    },
    <span class="hljs-attr">calcWritableSysIds</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysIds, securityFields</span>) </span>{
        <span class="hljs-keyword">var</span> writableSysIds = [];
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; sysIds.length; i++) {
            <span class="hljs-keyword">var</span> sysId = sysIds[i];
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.canWriteToFields(sysId, securityFields))
                writableSysIds.push(sysId);
        }
        <span class="hljs-keyword">return</span> writableSysIds;
    },
    <span class="hljs-attr">isDeletedRow</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId</span>) </span>{
        <span class="hljs-keyword">var</span> record = <span class="hljs-keyword">this</span>.get(sysId);
        <span class="hljs-keyword">if</span> (!record)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">return</span> record.isDeleted();
    },
    <span class="hljs-attr">isUpdatedRow</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId</span>) </span>{
        <span class="hljs-keyword">var</span> record = <span class="hljs-keyword">this</span>.get(sysId);
        <span class="hljs-keyword">if</span> (!record)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">return</span> record.isUpdated();
    },
    <span class="hljs-attr">isAddedRow</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId</span>) </span>{
        <span class="hljs-keyword">var</span> record = <span class="hljs-keyword">this</span>.get(sysId);
        <span class="hljs-keyword">if</span> (!record)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">return</span> record.isAdded();
    },
    <span class="hljs-attr">loadValues</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysIds, fields, callback</span>) </span>{
        <span class="hljs-keyword">this</span>.valueLoader.loadValues(sysIds, fields, callback);
    },
    <span class="hljs-attr">loadDefaults</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) </span>{
        <span class="hljs-keyword">this</span>.valueLoader.loadDefaults(callback);
    },
    <span class="hljs-attr">loadTable</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) </span>{
        <span class="hljs-keyword">this</span>.valueLoader.loadTable(callback);
    },
    <span class="hljs-attr">getLoaderErrorMsg</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.valueLoader.getErrorMsg();
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">'GwtListEditorPendingChanges'</span>;
    }
});
GwtListEditorPendingChanges.RecordReceiver = Class.create({
    <span class="hljs-attr">changedRecord</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysID, record</span>) </span>{},
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">'GwtListEditorPendingChanges.RecordReceiver'</span>;
    }
});
GwtListEditorPendingChanges.RecordInspector = Class.create(
    GwtListEditorPendingChanges.RecordReceiver, {
        <span class="hljs-attr">isDone</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        },
        <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-string">'GwtListEditorPendingChanges.RecordReceiver'</span>;
        }
    });
GwtListEditorPendingChanges.ChangeExporter = Class.create(
    GwtListEditorPendingChanges.RecordReceiver, {
        <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$super, receiver</span>) </span>{
            $<span class="hljs-keyword">super</span>();
            <span class="hljs-keyword">this</span>.receiver = receiver;
        },
        <span class="hljs-attr">changedRecord</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysID, record</span>) </span>{
            <span class="hljs-keyword">if</span> (record.isDefaultValues())
                <span class="hljs-keyword">return</span>;
            <span class="hljs-keyword">if</span> (record.isNew())
                <span class="hljs-keyword">return</span>;
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.receiver.beginRecord(sysID, record.operation)) {
                <span class="hljs-keyword">var</span> fields = record.getFields();
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> fieldName <span class="hljs-keyword">in</span> fields) {
                    <span class="hljs-keyword">var</span> field = fields[fieldName];
                    <span class="hljs-keyword">this</span>.receiver.changedField(sysID, field)
                }
            }
            <span class="hljs-keyword">this</span>.receiver.endRecord(sysID);
        },
        <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-string">'GwtListEditorPendingChanges.ChangeExporter'</span>;
        }
    });
GwtListEditorPendingChanges.ChangeReceiver = Class.create({
    <span class="hljs-attr">beginRecord</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysID, op</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    },
    <span class="hljs-attr">endRecord</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysID</span>) </span>{},
    <span class="hljs-attr">changedField</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysID, field</span>) </span>{},
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">'GwtListEditorPendingChanges.ChangeReceiver'</span>;
    }
});
GwtListEditorPendingChanges.ComposableChangeReceiver = Class.create(
    GwtListEditorPendingChanges.ChangeReceiver, {
        <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$super</span>) </span>{
            $<span class="hljs-keyword">super</span>();
            <span class="hljs-keyword">this</span>.receivers = [];
        },
        <span class="hljs-attr">addReceiver</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">receiver</span>) </span>{
            <span class="hljs-keyword">this</span>.receivers.push(receiver);
        },
        <span class="hljs-attr">beginRecord</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysID, op</span>) </span>{
            <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>.receivers.length; i++) {
                <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">this</span>.receivers[i].beginRecord(sysID, op);
                <span class="hljs-keyword">if</span> (!result) {
                    <span class="hljs-keyword">this</span>.limit = i + <span class="hljs-number">1</span>;
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                }
            }
            <span class="hljs-keyword">this</span>.limit = <span class="hljs-keyword">this</span>.receivers.length;
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        },
        <span class="hljs-attr">endRecord</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysID</span>) </span>{
            <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>.limit; i++)
                <span class="hljs-keyword">this</span>.receivers[i].endRecord(sysID);
        },
        <span class="hljs-attr">changedField</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysID, field</span>) </span>{
            <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>.limit; i++)
                <span class="hljs-keyword">this</span>.receivers[i].changedField(sysID, field);
        },
        <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-string">'GwtListEditorPendingChanges.ComposableChangeReceiver'</span>;
        }
    });;
<span class="hljs-comment">/*! RESOURCE: /scripts/GwtListEditText.js */</span>
<span class="hljs-keyword">var</span> GwtListEditText = Class.create(GwtListEditWindow, {
    <span class="hljs-attr">createEditControls</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> input = <span class="hljs-keyword">this</span>.createTextInput();
        input.value = <span class="hljs-keyword">this</span>.editor.getValue();
        <span class="hljs-keyword">var</span> tableElement = <span class="hljs-keyword">this</span>.editor.tableElement;
        <span class="hljs-keyword">if</span> (tableElement.maxLength &gt; <span class="hljs-number">0</span>)
            input.setAttribute(<span class="hljs-string">"maxLength"</span>, tableElement.maxLength);
        <span class="hljs-keyword">var</span> answer = <span class="hljs-keyword">this</span>.editor.getValue();
        <span class="hljs-keyword">if</span> (tableElement.isNumber()) {
            input.value = <span class="hljs-keyword">this</span>.editor.getDisplayValue();
            input.className = <span class="hljs-keyword">this</span>.doctype ? <span class="hljs-string">'decimal form-control list-edit-input'</span> : <span class="hljs-string">'decimal'</span>;
            answer = <span class="hljs-keyword">this</span>.editor.getDisplayValue();
        }
        <span class="hljs-keyword">this</span>.setTitle(input);
        answer = answer.replace(<span class="hljs-regexp">/\n/g</span>, <span class="hljs-string">" "</span>);
        answer = answer.replace(<span class="hljs-regexp">/\t/g</span>, <span class="hljs-string">""</span>);
        <span class="hljs-keyword">this</span>.focusElement.value = answer;
    },
    <span class="hljs-attr">save</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> input = GwtListEditWindow.getCellEditValue();
        <span class="hljs-keyword">if</span> (input) {
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.editor.tableElement.isNumber() || <span class="hljs-keyword">this</span>.editor.tableElement.getType() == <span class="hljs-string">"translated_text"</span>)
                <span class="hljs-keyword">this</span>.setValue(<span class="hljs-literal">null</span>, input.value);
            <span class="hljs-keyword">else</span>
                <span class="hljs-keyword">this</span>.setValue(input.value);
            <span class="hljs-keyword">this</span>.setRenderValue(<span class="hljs-keyword">this</span>.truncateDisplayValue(input.value));
        }
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"GwtListEditText"</span>;
    }
});;
<span class="hljs-comment">/*! RESOURCE: /scripts/GwtListEditSelect.js */</span>
<span class="hljs-keyword">var</span> GwtListEditSelect = Class.create(GwtListEditWindow, {
    <span class="hljs-attr">createEditControls</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> select = <span class="hljs-string">''</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.doctype)
            select = <span class="hljs-string">"&lt;select id = '"</span> + GwtListEditWindow.inputID + <span class="hljs-string">"' class='form-control list-edit-input' /&gt;"</span>;
        <span class="hljs-keyword">else</span>
            select = <span class="hljs-string">"&lt;select id = '"</span> + GwtListEditWindow.inputID + <span class="hljs-string">"' /&gt;"</span>;
        <span class="hljs-keyword">this</span>.setTitle(select);
        <span class="hljs-keyword">this</span>.focusElement = GwtListEditWindow.getCellEditValue();
        <span class="hljs-keyword">this</span>.addOptions();
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.staticOptions)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    },
    <span class="hljs-attr">addOptions</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> rowSysId = <span class="hljs-keyword">this</span>.getAnchorSysId();
        <span class="hljs-keyword">var</span> allIDs = <span class="hljs-keyword">this</span>.gridEdit.getSelectedSysIds();
        <span class="hljs-keyword">var</span> ajax = <span class="hljs-keyword">new</span> GlideAjax(<span class="hljs-string">'PickList'</span>);
        ajax.addParam(<span class="hljs-string">'sys_uniqueValue'</span>, rowSysId);
        ajax.addParam(<span class="hljs-string">'sysparm_id_list'</span>, allIDs.join());
        ajax.addParam(<span class="hljs-string">'sysparm_target'</span>, <span class="hljs-keyword">this</span>.editor.tableElement.getTable().getName());
        ajax.addParam(<span class="hljs-string">'sysparm_chars'</span>, <span class="hljs-string">'*'</span>);
        ajax.addParam(<span class="hljs-string">'sysparm_name'</span>, <span class="hljs-keyword">this</span>.refName);
        ajax.addParam(<span class="hljs-string">'sysparm_nomax'</span>, <span class="hljs-string">'true'</span>);
        ajax.getXML(<span class="hljs-keyword">this</span>._createOptions.bind(<span class="hljs-keyword">this</span>));
    },
    <span class="hljs-attr">_createOptions</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.state != <span class="hljs-string">'initialize'</span>)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">var</span> xml = response.responseXML;
        <span class="hljs-keyword">var</span> items = xml.getElementsByTagName(<span class="hljs-string">"item"</span>);
        <span class="hljs-keyword">var</span> value = <span class="hljs-keyword">this</span>.editor.getValue();
        <span class="hljs-keyword">this</span>.focusElement.options.length = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.editor.tableElement.choice != <span class="hljs-string">"3"</span>) {
            <span class="hljs-keyword">this</span>.nullOverride = xml.documentElement.getAttribute(<span class="hljs-string">"default_option"</span>);
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.nullOverride)
                addOption(<span class="hljs-keyword">this</span>.focusElement, <span class="hljs-string">""</span>, <span class="hljs-keyword">this</span>.nullOverride, <span class="hljs-keyword">this</span>._isSelected(value, <span class="hljs-string">""</span>, <span class="hljs-keyword">this</span>.nullOverride));
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.editor.selectedOnly)
                addOption(<span class="hljs-keyword">this</span>.focusElement, <span class="hljs-string">""</span>, getMessage(<span class="hljs-string">'-- None --'</span>), <span class="hljs-literal">true</span>);
        }
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; items.length; i++) {
            <span class="hljs-keyword">var</span> v = items[i].getAttribute(<span class="hljs-string">"value"</span>);
            <span class="hljs-keyword">var</span> l = items[i].getAttribute(<span class="hljs-string">"label"</span>);
            <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._checkDuplicateOptions(v, l))
                addOption(<span class="hljs-keyword">this</span>.focusElement, v, l, <span class="hljs-keyword">this</span>._isSelected(value, v, l));
        }
        <span class="hljs-keyword">this</span>.createEditControlsComplete();
    },
    <span class="hljs-attr">_checkDuplicateOptions</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, label</span>) </span>{
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.focusElement.length)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">var</span> opts = <span class="hljs-keyword">this</span>.focusElement.options;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; opts.length; i++)
            <span class="hljs-keyword">if</span> (opts[i].value == value &amp;&amp; opts[i].text === label)
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    },
    <span class="hljs-attr">_isSelected</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, v, l</span>) </span>{
        <span class="hljs-keyword">if</span> (l == value || v == value)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">else</span>
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    },
    <span class="hljs-attr">save</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> select = <span class="hljs-keyword">this</span>.focusElement;
        <span class="hljs-keyword">var</span> i = select.selectedIndex;
        <span class="hljs-keyword">var</span> option = select.options[i];
        <span class="hljs-keyword">this</span>.setValue(option.value);
        <span class="hljs-keyword">var</span> text = option.text;
        <span class="hljs-keyword">if</span> (!option.value)
            text = <span class="hljs-string">''</span>;
        <span class="hljs-keyword">this</span>.setRenderValue(text);
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"GwtListEditSelect"</span>;
    }
});;
<span class="hljs-comment">/*! RESOURCE: /scripts/doctype/GwtListEditCalendar.js */</span>
<span class="hljs-keyword">var</span> GwtListEditCalendar = Class.create(GwtListEditWindow, {
    <span class="hljs-attr">createEditControls</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        ScriptLoader.getScripts(<span class="hljs-string">'scripts/classes/GwtDateTimePicker.js'</span>, <span class="hljs-keyword">this</span>._start.bind(<span class="hljs-keyword">this</span>));
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    },
    <span class="hljs-attr">_start</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> html = <span class="hljs-keyword">this</span>._createCalendarHTML();
        <span class="hljs-keyword">this</span>.setTitle(html);
        <span class="hljs-keyword">if</span> (g_full_calendar_edit)
            $(<span class="hljs-string">'cell_edit_window'</span>).addClassName(<span class="hljs-string">'hide_input_edit'</span>);
        <span class="hljs-keyword">this</span>.createEditControlsComplete();
    },
    <span class="hljs-attr">save</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> input = GwtListEditWindow.getCellEditValue();
        <span class="hljs-keyword">if</span> (input) {
            <span class="hljs-keyword">this</span>.setValue(<span class="hljs-literal">null</span>, input.value);
            <span class="hljs-keyword">this</span>.setRenderValue(input.value);
        }
    },
    <span class="hljs-attr">dismiss</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$super</span>) </span>{
        <span class="hljs-keyword">this</span>._dismissCalendar();
        <span class="hljs-keyword">if</span> (GwtListEditWindow.inputID) {
            <span class="hljs-keyword">var</span> input = GwtListEditWindow.getCellEditValue();
            <span class="hljs-keyword">if</span> (input)
                input.onfocus = <span class="hljs-literal">null</span>;
        }
        $<span class="hljs-keyword">super</span>();
    },
    <span class="hljs-attr">_dismissCalendar</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (gel(<span class="hljs-string">"GwtDateTimePicker"</span>) &amp;&amp; <span class="hljs-keyword">this</span>.cal)
            <span class="hljs-keyword">this</span>.cal.dismiss();
        <span class="hljs-keyword">this</span>.cal = <span class="hljs-literal">null</span>;
    },
    <span class="hljs-attr">_createCalendarHTML</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> answer = cel(<span class="hljs-string">'div'</span>);
        <span class="hljs-keyword">var</span> input = <span class="hljs-keyword">this</span>.createTextInput();
        input.value = <span class="hljs-keyword">this</span>.editor.getDisplayValue();
        answer.style.borderSpacing = <span class="hljs-string">'0'</span>;
        answer.className = <span class="hljs-string">'input-group'</span>;
        answer.appendChild(input);
        input.onfocus = <span class="hljs-keyword">this</span>.onFocus.bind(<span class="hljs-keyword">this</span>);
        <span class="hljs-keyword">var</span> img = createIcon(<span class="hljs-string">'icon-calendar'</span>, getMessage(<span class="hljs-string">"Choose date..."</span>), <span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>._showCalendar.bind(<span class="hljs-keyword">this</span>));
        img.id = <span class="hljs-keyword">this</span>.type();
        img = img.wrap(<span class="hljs-string">'span'</span>, {
            <span class="hljs-string">'class'</span>: <span class="hljs-string">'input-group-addon'</span>
        });
        answer.appendChild(img);
        <span class="hljs-keyword">return</span> answer;
    },
    <span class="hljs-attr">onFocus</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> input = GwtListEditWindow.getCellEditValue();
        <span class="hljs-keyword">if</span> (input)
            input.onfocus = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">this</span>._showCalendar();
        <span class="hljs-keyword">if</span> (g_full_calendar_edit)
            <span class="hljs-keyword">this</span>._hideInput();
    },
    <span class="hljs-attr">_hideInput</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> cell = <span class="hljs-keyword">this</span>.getAnchorCell();
        <span class="hljs-keyword">var</span> leftPosition = <span class="hljs-keyword">this</span>._getOffsetLeft(cell);
        $j(<span class="hljs-string">'#cell_edit_window'</span>).css({
            <span class="hljs-string">'display'</span>: <span class="hljs-string">'none'</span>
        });
        $j(<span class="hljs-string">'#GwtDateTimePicker'</span>).css({
            <span class="hljs-string">'top'</span>: <span class="hljs-keyword">this</span>._getOffsetTop(cell),
            <span class="hljs-string">'left'</span>: leftPosition,
            <span class="hljs-string">'z-index'</span>: <span class="hljs-number">1</span>
        });
        cell = <span class="hljs-keyword">this</span>;
        $j(<span class="hljs-string">'#GwtDateTimePicker_ok'</span>).click(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            $j(<span class="hljs-string">'#cell_edit_ok'</span>).trigger(<span class="hljs-string">'click'</span>);
        });
        $j(<span class="hljs-string">'#GwtDateTimePicker_cancel'</span>).click(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            cell.dismiss();
        });
    },
    <span class="hljs-attr">_showCalendar</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (gel(<span class="hljs-string">"GwtDateTimePicker"</span>))
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">var</span> format;
        <span class="hljs-keyword">var</span> useTime;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.editor.tableElement.isDateTime()) {
            format = g_user_date_time_format;
            useTime = <span class="hljs-literal">true</span>;
        } <span class="hljs-keyword">else</span>
            format = g_user_date_format;
        <span class="hljs-keyword">this</span>.cal = <span class="hljs-keyword">new</span> GwtDateTimePicker(GwtListEditWindow.inputID, format, useTime);
        <span class="hljs-keyword">this</span>.addMultipleEditMsg();
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    },
    <span class="hljs-attr">addMultipleEditMsg</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">window</span>.g_full_calendar_edit)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">var</span> msgStr;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.numCanEdit == <span class="hljs-number">1</span>)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">else</span>
            msgStr = <span class="hljs-keyword">this</span>.numCanEdit + <span class="hljs-keyword">this</span>.msgRowsUpdated;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.numCannotEdit &gt; <span class="hljs-number">0</span>) {
            msgStr = msgStr + <span class="hljs-string">"&lt;br/&gt;"</span>;
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.numCannotEdit == <span class="hljs-number">1</span>)
                msgStr += <span class="hljs-keyword">this</span>.msgRowNotUpdated;
            <span class="hljs-keyword">else</span>
                msgStr += <span class="hljs-keyword">this</span>.numCannotEdit + <span class="hljs-keyword">this</span>.msgRowsNotUpdated;
        }
        <span class="hljs-keyword">var</span> div = <span class="hljs-keyword">new</span> Element(<span class="hljs-string">'div'</span>);
        div.style.marginTop = <span class="hljs-number">2</span>;
        div.style.fontWeight = <span class="hljs-string">"normal"</span>;
        div.update(msgStr);
        $(<span class="hljs-string">'window.GwtDateTimePicker'</span>).appendChild(div);
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"GwtListEditCalendar"</span>;
    }
});;
<span class="hljs-comment">/*! RESOURCE: /scripts/GwtListEditReference.js */</span>
<span class="hljs-keyword">var</span> GwtListEditReference = Class.create(GwtListEditWindow, {
    <span class="hljs-attr">createEditControls</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.id = <span class="hljs-keyword">this</span>.refName;
        <span class="hljs-keyword">this</span>._createInputControls(<span class="hljs-keyword">this</span>.getTitle());
    },
    <span class="hljs-attr">_createInputControls</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">parent</span>) </span>{
        <span class="hljs-keyword">var</span> refSysId = <span class="hljs-keyword">this</span>.editor.getValue();
        <span class="hljs-keyword">var</span> rowSysId = <span class="hljs-keyword">this</span>.getAnchorSysId();
        <span class="hljs-keyword">this</span>.inputControls = <span class="hljs-keyword">new</span> AJAXReferenceControls(<span class="hljs-keyword">this</span>.editor.tableElement, <span class="hljs-keyword">this</span>.id, parent, refSysId, rowSysId, <span class="hljs-keyword">this</span>._getRefQualTag());
        <span class="hljs-keyword">this</span>.inputControls.setDisplayValue(<span class="hljs-keyword">this</span>._getDisplayValue());
        <span class="hljs-keyword">this</span>.focusElement = <span class="hljs-keyword">this</span>.inputControls.getInput();
        <span class="hljs-keyword">this</span>.focusElement.style.width = <span class="hljs-keyword">this</span>.preferredWidth;
        <span class="hljs-keyword">this</span>.inputControls.setRecord(<span class="hljs-keyword">this</span>.editor);
    },
    <span class="hljs-attr">saveAndClose</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$super</span>) </span>{
        <span class="hljs-keyword">this</span>.inputControls.resolveReference();
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.inputControls.isResolving())
            <span class="hljs-keyword">this</span>.inputControls.setResolveCallback(<span class="hljs-keyword">this</span>.saveAndClose.bind(<span class="hljs-keyword">this</span>));
        <span class="hljs-keyword">else</span>
            <span class="hljs-keyword">return</span> $<span class="hljs-keyword">super</span>();
    },
    <span class="hljs-attr">save</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> sys_id = <span class="hljs-keyword">this</span>.inputControls.getValue();
        <span class="hljs-keyword">if</span> (!sys_id)
            sys_id = <span class="hljs-string">"NULL"</span>;
        <span class="hljs-keyword">if</span> (sys_id == <span class="hljs-string">"1111"</span>)
            sys_id = <span class="hljs-string">"NULL"</span>;
        <span class="hljs-keyword">var</span> displayValue = <span class="hljs-keyword">this</span>.inputControls.getDisplayValue();
        <span class="hljs-keyword">var</span> refValid = <span class="hljs-keyword">this</span>.inputControls.isReferenceValid();
        <span class="hljs-keyword">if</span> (!refValid) {
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.inputControls.tableElement.isDynamicCreation())
                sys_id = displayValue;
            <span class="hljs-keyword">else</span>
                <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">if</span> (sys_id == <span class="hljs-string">"NULL"</span>) {
            displayValue = <span class="hljs-string">''</span>;
        }
        <span class="hljs-keyword">this</span>.setReferenceValue(sys_id, refValid);
        <span class="hljs-keyword">this</span>.setRenderValue(displayValue);
    },
    <span class="hljs-attr">setReferenceValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, valid</span>) </span>{
        <span class="hljs-keyword">this</span>.setValue(value);
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.editor)
            <span class="hljs-keyword">this</span>.editor.setReferenceValid(valid);
    },
    <span class="hljs-attr">dismiss</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$super</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.destroyed || !<span class="hljs-keyword">this</span>.inputControls)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">this</span>.inputControls.clearDropDown();
        $<span class="hljs-keyword">super</span>();
    },
    <span class="hljs-attr">onKeyReturn</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        evt.stop();
        setTimeout(<span class="hljs-keyword">this</span>.saveAndClose.bind(<span class="hljs-keyword">this</span>), <span class="hljs-number">50</span>);
        <span class="hljs-keyword">this</span>._placeCursorReturn(evt);
    },
    <span class="hljs-attr">_getRefQualTag</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> cell = <span class="hljs-keyword">this</span>.getAnchorCell();
        <span class="hljs-keyword">var</span> table = findParentByTag(cell, <span class="hljs-string">"TABLE"</span>);
        <span class="hljs-keyword">if</span> (table) {
            <span class="hljs-keyword">var</span> tag = getAttributeValue(table, <span class="hljs-string">'glide_list_edit_ref_qual_tag'</span>);
            <span class="hljs-keyword">if</span> (tag)
                <span class="hljs-keyword">return</span> tag;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
    },
    <span class="hljs-attr">_getDisplayValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.editor.getValue() == <span class="hljs-string">"NULL"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.editor.getRenderValue() || <span class="hljs-keyword">this</span>.editor.getDisplayValue();
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"GwtListEditReference"</span>;
    }
});;
<span class="hljs-comment">/*! RESOURCE: /scripts/GwtListEditBoolean.js */</span>
<span class="hljs-keyword">var</span> GwtListEditBoolean = Class.create(GwtListEditSelect, {
    <span class="hljs-attr">addOptions</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.staticOptions = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">var</span> select = <span class="hljs-keyword">this</span>.focusElement;
        <span class="hljs-keyword">var</span> value = <span class="hljs-keyword">this</span>.editor.getValue();
        addOption(select, <span class="hljs-literal">true</span>, getMessage(<span class="hljs-string">"true"</span>), value == <span class="hljs-string">"true"</span>);
        addOption(select, <span class="hljs-literal">false</span>, getMessage(<span class="hljs-string">"false"</span>), value != <span class="hljs-string">"true"</span>);
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"GwtListEditBoolean"</span>;
    }
});;
<span class="hljs-comment">/*! RESOURCE: /scripts/GwtListEditDuration.js */</span>
<span class="hljs-keyword">var</span> GwtListEditDuration = Class.create(GwtListEditWindow, {
    <span class="hljs-attr">MS_IN_DAY</span>: <span class="hljs-number">86400000</span>,
    <span class="hljs-attr">MAX_UNIT_DAYS</span>: <span class="hljs-number">4</span>,
    <span class="hljs-attr">MAX_UNIT_HOURS</span>: <span class="hljs-number">3</span>,
    <span class="hljs-attr">MAX_UNIT_MINUTES</span>: <span class="hljs-number">2</span>,
    <span class="hljs-attr">MAX_UNIT_SECONDS</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">createEditControls</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.setDateParts(<span class="hljs-keyword">this</span>.editor.getValue());
        <span class="hljs-keyword">this</span>.gMessage = <span class="hljs-keyword">new</span> GwtMessage();
        <span class="hljs-keyword">this</span>.gMessage.getMessages([<span class="hljs-string">'Hours'</span>, <span class="hljs-string">'Days'</span>, <span class="hljs-string">'day'</span>, <span class="hljs-string">'hour'</span>, <span class="hljs-string">'minute'</span>, <span class="hljs-string">'second'</span>, <span class="hljs-string">'minutes'</span>, <span class="hljs-string">'seconds'</span>]);
        <span class="hljs-keyword">this</span>.renderControl();
    },
    <span class="hljs-attr">onKeyTab</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        evt.stop();
        <span class="hljs-keyword">if</span> (evt.shiftKey) {
            <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._previousChoice(evt)) {
                <span class="hljs-keyword">this</span>.saveAndClose();
                <span class="hljs-keyword">this</span>.prevColumn();
            }
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._nextChoice(evt)) {
            <span class="hljs-keyword">this</span>.saveAndClose();
            <span class="hljs-keyword">this</span>.nextColumn();
        }
    },
    <span class="hljs-attr">_previousChoice</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        <span class="hljs-keyword">var</span> previous = <span class="hljs-keyword">this</span>.focusElement.up().previousSibling;
        <span class="hljs-keyword">if</span> (previous)
            previous = previous.previousSibling;
        <span class="hljs-keyword">if</span> (previous == <span class="hljs-literal">null</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">this</span>.focusElement = $(previous).select(<span class="hljs-string">"input"</span>)[<span class="hljs-number">0</span>];
        <span class="hljs-keyword">this</span>.focusEditor();
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    },
    <span class="hljs-attr">_nextChoice</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        <span class="hljs-keyword">var</span> next = <span class="hljs-keyword">this</span>.focusElement.up().nextSibling;
        <span class="hljs-keyword">if</span> (next)
            next = next.nextSibling;
        <span class="hljs-keyword">if</span> (next == <span class="hljs-literal">null</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">this</span>.focusElement = $(next).select(<span class="hljs-string">"input"</span>)[<span class="hljs-number">0</span>];
        <span class="hljs-keyword">this</span>.focusEditor();
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    },
    <span class="hljs-attr">setDateParts</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">dateStr</span>) </span>{
        <span class="hljs-keyword">if</span> (dateStr.length &lt;= <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">this</span>.days = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">this</span>.hours = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">this</span>.minutes = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">this</span>.seconds = <span class="hljs-number">0</span>;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">var</span> dateTime = dateStr.split(<span class="hljs-string">" "</span>);
            <span class="hljs-keyword">var</span> dateParts = dateTime[<span class="hljs-number">0</span>].split(<span class="hljs-string">"-"</span>);
            <span class="hljs-keyword">var</span> timeParts = dateTime[<span class="hljs-number">1</span>].split(<span class="hljs-string">":"</span>);
            <span class="hljs-keyword">this</span>.days = <span class="hljs-built_in">parseInt</span>(<span class="hljs-built_in">Date</span>.parse(dateParts[<span class="hljs-number">1</span>] + <span class="hljs-string">"/"</span> + dateParts[<span class="hljs-number">2</span>] + <span class="hljs-string">"/"</span> + dateParts[<span class="hljs-number">0</span>] + <span class="hljs-string">" 00:00:00 UTC"</span>) / <span class="hljs-keyword">this</span>.MS_IN_DAY);
            <span class="hljs-keyword">this</span>.hours = timeParts[<span class="hljs-number">0</span>];
            <span class="hljs-keyword">this</span>.minutes = timeParts[<span class="hljs-number">1</span>];
            <span class="hljs-keyword">this</span>.seconds = timeParts[<span class="hljs-number">2</span>];
            <span class="hljs-keyword">var</span> max_level = <span class="hljs-keyword">this</span>._getUnitLevel();
            <span class="hljs-keyword">if</span> (max_level &lt;= <span class="hljs-keyword">this</span>.MAX_UNIT_HOURS) {
                <span class="hljs-keyword">this</span>.hours = <span class="hljs-built_in">parseInt</span>(<span class="hljs-keyword">this</span>.hours, <span class="hljs-number">10</span>) + (<span class="hljs-keyword">this</span>.days * <span class="hljs-number">24</span>);
                <span class="hljs-keyword">this</span>.days = <span class="hljs-number">0</span>;
            }
            <span class="hljs-keyword">if</span> (max_level &lt;= <span class="hljs-keyword">this</span>.MAX_UNIT_MINUTES) {
                <span class="hljs-keyword">this</span>.minutes = <span class="hljs-built_in">parseInt</span>(<span class="hljs-keyword">this</span>.minutes, <span class="hljs-number">10</span>) + (<span class="hljs-keyword">this</span>.hours * <span class="hljs-number">60</span>);
                <span class="hljs-keyword">this</span>.hours = <span class="hljs-number">0</span>;
            }
            <span class="hljs-keyword">if</span> (max_level &lt;= <span class="hljs-keyword">this</span>.MAX_UNIT_SECONDS) {
                <span class="hljs-keyword">this</span>.seconds = <span class="hljs-built_in">parseInt</span>(<span class="hljs-keyword">this</span>.seconds, <span class="hljs-number">10</span>) + (<span class="hljs-keyword">this</span>.minutes * <span class="hljs-number">60</span>);
                <span class="hljs-keyword">this</span>.minutes = <span class="hljs-number">0</span>;
            }
        }
    },
    <span class="hljs-attr">renderControl</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> table = cel(<span class="hljs-string">"table"</span>);
        <span class="hljs-keyword">var</span> cls = <span class="hljs-string">''</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.doctype)
            cls = <span class="hljs-string">'form-control list-edit-input'</span>;
        table.cellPadding = <span class="hljs-number">0</span>;
        table.style.backgroundColor = <span class="hljs-string">"EEEEEE"</span>;
        <span class="hljs-keyword">var</span> tbody = cel(<span class="hljs-string">"tbody"</span>, table);
        <span class="hljs-keyword">var</span> tr = cel(<span class="hljs-string">"tr"</span>, tbody);
        <span class="hljs-keyword">var</span> max_level = <span class="hljs-keyword">this</span>._getUnitLevel();
        <span class="hljs-keyword">var</span> td = cel(<span class="hljs-string">"td"</span>, tr);
        <span class="hljs-keyword">var</span> days;
        <span class="hljs-keyword">if</span> (max_level == <span class="hljs-keyword">this</span>.MAX_UNIT_DAYS) {
            td.innerHTML = <span class="hljs-keyword">this</span>.gMessage.getMessage(<span class="hljs-string">"Days"</span>) + <span class="hljs-string">"&amp;nbsp;"</span>;
            td = cel(<span class="hljs-string">"td"</span>, tr);
            days = cel(<span class="hljs-string">"input"</span>, td);
            days.id = <span class="hljs-string">"dur_day"</span>;
            days.className = cls;
            days.size = <span class="hljs-string">"2"</span>;
            days.maxLength = <span class="hljs-string">"5"</span>;
            days.style.marginRight = <span class="hljs-string">"5px"</span>;
            days.value = <span class="hljs-keyword">this</span>.days
            td = cel(<span class="hljs-string">"td"</span>, tr);
        }
        <span class="hljs-keyword">var</span> hours;
        <span class="hljs-keyword">if</span> (max_level &gt;= <span class="hljs-keyword">this</span>.MAX_UNIT_HOURS) {
            td.innerHTML = <span class="hljs-keyword">this</span>.gMessage.getMessage(<span class="hljs-string">"Hours"</span>) + <span class="hljs-string">"&amp;nbsp;"</span>;
            td = cel(<span class="hljs-string">"td"</span>, tr);
            hours = cel(<span class="hljs-string">"input"</span>, td);
            hours.id = <span class="hljs-string">"dur_hour"</span>;
            hours.className = cls;
            hours.size = <span class="hljs-string">"2"</span>;
            hours.maxLength = <span class="hljs-string">"2"</span>;
            hours.value = <span class="hljs-keyword">this</span>.hours;
            td = cel(<span class="hljs-string">"td"</span>, tr);
            td.innerHTML = <span class="hljs-string">":"</span>;
            td = cel(<span class="hljs-string">"td"</span>, tr);
        } <span class="hljs-keyword">else</span> {
            td.innerHTML = <span class="hljs-keyword">this</span>.gMessage.getMessage(<span class="hljs-string">"Minutes"</span>) + <span class="hljs-string">"&amp;nbsp;"</span>;
        }
        <span class="hljs-keyword">var</span> mins;
        <span class="hljs-keyword">if</span> (max_level &gt;= <span class="hljs-keyword">this</span>.MAX_UNIT_MINUTES) {
            mins = cel(<span class="hljs-string">"input"</span>, td);
            mins.id = <span class="hljs-string">"dur_min"</span>;
            mins.className = cls;
            mins.size = <span class="hljs-string">"2"</span>;
            mins.maxLength = <span class="hljs-string">"2"</span>;
            mins.value = <span class="hljs-keyword">this</span>.minutes;
            td = cel(<span class="hljs-string">"td"</span>, tr);
            td.innerHTML = <span class="hljs-string">":"</span>;
            td = cel(<span class="hljs-string">"td"</span>, tr);
        } <span class="hljs-keyword">else</span> {
            td.innerHTML = <span class="hljs-keyword">this</span>.gMessage.getMessage(<span class="hljs-string">"Seconds"</span>) + <span class="hljs-string">"&amp;nbsp;"</span>;
        }
        <span class="hljs-keyword">var</span> secs = cel(<span class="hljs-string">"input"</span>, td);
        secs.id = <span class="hljs-string">"dur_sec"</span>;
        secs.className = cls;
        secs.size = <span class="hljs-string">"2"</span>;
        secs.maxLength = <span class="hljs-string">"2"</span>;
        secs.value = <span class="hljs-keyword">this</span>.seconds;
        <span class="hljs-keyword">this</span>.setTitle(table);
        <span class="hljs-keyword">this</span>.focusElement = gel(<span class="hljs-string">"dur_day"</span>);
    },
    <span class="hljs-attr">save</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> max_level = <span class="hljs-keyword">this</span>._getUnitLevel();
        <span class="hljs-keyword">var</span> day = (max_level == <span class="hljs-keyword">this</span>.MAX_UNIT_DAYS) ? gel(<span class="hljs-string">"dur_day"</span>).value : <span class="hljs-number">0</span>;
        <span class="hljs-keyword">var</span> hour = (max_level &gt;= <span class="hljs-keyword">this</span>.MAX_UNIT_HOURS) ? gel(<span class="hljs-string">"dur_hour"</span>).value : <span class="hljs-number">0</span>;
        <span class="hljs-keyword">var</span> min = (max_level &gt;= <span class="hljs-keyword">this</span>.MAX_UNIT_MINUTES) ? gel(<span class="hljs-string">"dur_min"</span>).value : <span class="hljs-number">0</span>;
        <span class="hljs-keyword">var</span> sec = gel(<span class="hljs-string">"dur_sec"</span>).value;
        <span class="hljs-keyword">if</span> (!day || day == <span class="hljs-literal">null</span> || !isNumber(day))
            day = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">if</span> (!hour || hour == <span class="hljs-literal">null</span> || !isNumber(hour))
            hour = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">if</span> (!min || min == <span class="hljs-literal">null</span> || !isNumber(min))
            min = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">if</span> (!sec || sec == <span class="hljs-literal">null</span> || !isNumber(sec))
            sec = <span class="hljs-number">0</span>;
        day = <span class="hljs-built_in">parseInt</span>(day, <span class="hljs-number">10</span>);
        hour = <span class="hljs-built_in">parseInt</span>(hour, <span class="hljs-number">10</span>);
        min = <span class="hljs-built_in">parseInt</span>(min, <span class="hljs-number">10</span>);
        sec = <span class="hljs-built_in">parseInt</span>(sec, <span class="hljs-number">10</span>);
        <span class="hljs-keyword">if</span> (max_level == <span class="hljs-keyword">this</span>.MAX_UNIT_SECONDS) {
            min = <span class="hljs-built_in">Math</span>.floor(sec / <span class="hljs-number">60</span>);
            sec = sec % <span class="hljs-number">60</span>;
        }
        <span class="hljs-keyword">if</span> (max_level &lt;= <span class="hljs-keyword">this</span>.MAX_UNIT_MINUTES) {
            hour = <span class="hljs-built_in">Math</span>.floor(min / <span class="hljs-number">60</span>);
            min = min % <span class="hljs-number">60</span>;
        }
        <span class="hljs-keyword">if</span> (max_level &lt;= <span class="hljs-keyword">this</span>.MAX_UNIT_HOURS) {
            day = <span class="hljs-built_in">Math</span>.floor(hour / <span class="hljs-number">24</span>);
            hour = hour % <span class="hljs-number">24</span>;
        }
        <span class="hljs-keyword">var</span> dt = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-number">0</span>);
        dt.setUTCDate(day + <span class="hljs-number">1</span>);
        <span class="hljs-keyword">var</span> dateStr = dt.getUTCFullYear() + <span class="hljs-string">"-"</span> + padLeft(dt.getUTCMonth() + <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-string">'0'</span>) + <span class="hljs-string">"-"</span> + padLeft(dt.getUTCDate(), <span class="hljs-number">2</span>, <span class="hljs-string">'0'</span>) + <span class="hljs-string">" "</span> +
            padLeft(hour, <span class="hljs-number">2</span>, <span class="hljs-string">'0'</span>) + <span class="hljs-string">":"</span> + padLeft(min, <span class="hljs-number">2</span>, <span class="hljs-string">'0'</span>) + <span class="hljs-string">":"</span> + padLeft(sec, <span class="hljs-number">2</span>, <span class="hljs-string">'0'</span>);
        <span class="hljs-keyword">this</span>.setValue(dateStr);
        <span class="hljs-keyword">this</span>._setRenderValue(day, hour, min, sec);
    },
    <span class="hljs-attr">_setRenderValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">day, hour, min, sec</span>) </span>{
        <span class="hljs-keyword">var</span> dspVal = <span class="hljs-string">""</span>;
        <span class="hljs-keyword">if</span> (day &gt; <span class="hljs-number">0</span>)
            dspVal += day + <span class="hljs-string">" "</span> + <span class="hljs-keyword">this</span>._getLabel(<span class="hljs-string">"day"</span>, day) + <span class="hljs-string">" "</span>;
        <span class="hljs-keyword">if</span> (hour &gt; <span class="hljs-number">0</span>)
            dspVal += hour + <span class="hljs-string">" "</span> + <span class="hljs-keyword">this</span>._getLabel(<span class="hljs-string">"hour"</span>, hour) + <span class="hljs-string">" "</span>;
        <span class="hljs-keyword">if</span> (min &gt; <span class="hljs-number">0</span>)
            dspVal += min + <span class="hljs-string">" "</span> + <span class="hljs-keyword">this</span>._getLabel(<span class="hljs-string">"minute"</span>, min) + <span class="hljs-string">" "</span>;
        <span class="hljs-keyword">if</span> (dspVal == <span class="hljs-string">""</span>)
            dspVal += sec + <span class="hljs-string">" "</span> + <span class="hljs-keyword">this</span>._getLabel(<span class="hljs-string">"second"</span>, sec) + <span class="hljs-string">" "</span>;
        <span class="hljs-keyword">this</span>.setRenderValue(dspVal);
    },
    <span class="hljs-attr">_getLabel</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">label, val</span>) </span>{
        <span class="hljs-keyword">if</span> (val != <span class="hljs-number">1</span>)
            label += <span class="hljs-string">"s"</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.gMessage.getMessage(label).toLowerCase();
    },
    <span class="hljs-attr">_getUnitLevel</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> max_unit = <span class="hljs-keyword">this</span>.editor.tableElement.getNamedAttribute(<span class="hljs-string">'max_unit'</span>);
        <span class="hljs-keyword">if</span> (max_unit == <span class="hljs-literal">null</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.MAX_UNIT_DAYS;
        <span class="hljs-keyword">switch</span> (max_unit) {
            <span class="hljs-keyword">case</span> <span class="hljs-string">'hours'</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.MAX_UNIT_HOURS;
            <span class="hljs-keyword">case</span> <span class="hljs-string">'minutes'</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.MAX_UNIT_MINUTES;
            <span class="hljs-keyword">case</span> <span class="hljs-string">'seconds'</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.MAX_UNIT_SECONDS;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.MAX_UNIT_DAYS;
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"GwtListEditDuration"</span>;
    }
});;
<span class="hljs-comment">/*! RESOURCE: /scripts/GwtListEditTablename.js */</span>
<span class="hljs-keyword">var</span> GwtListEditTablename = Class.create(GwtListEditSelect, {
    <span class="hljs-attr">addOptions</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> ga = <span class="hljs-keyword">new</span> GlideAjax(<span class="hljs-string">'AjaxClientHelper'</span>);
        <span class="hljs-keyword">this</span>.editor.selectedOnly = <span class="hljs-keyword">this</span>.editor.tableElement.getNamedAttribute(<span class="hljs-string">"selected_only"</span>) == <span class="hljs-string">"true"</span>;
        ga.addParam(<span class="hljs-string">'sysparm_name'</span>, <span class="hljs-keyword">this</span>.getName());
        ga.addParam(<span class="hljs-string">'sysparm_noViews'</span>, <span class="hljs-keyword">this</span>.getNoViews());
        ga.addParam(<span class="hljs-string">'sysparm_noSystemTables'</span>, <span class="hljs-keyword">this</span>.editor.tableElement.getNamedAttribute(<span class="hljs-string">"no_system_tables"</span>) == <span class="hljs-string">"true"</span>);
        ga.addParam(<span class="hljs-string">'sysparm_currentTableName'</span>, <span class="hljs-keyword">this</span>.editor.tableElement.tableName);
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.editor.selectedOnly) {
            ga.addParam(<span class="hljs-string">'sysparm_selectedOnly'</span>, <span class="hljs-literal">true</span>);
            ga.addParam(<span class="hljs-string">'sysparm_selectedField'</span>, <span class="hljs-keyword">this</span>.editor.fields[<span class="hljs-number">0</span>]);
            ga.addParam(<span class="hljs-string">'sysparm_selected'</span>, <span class="hljs-keyword">this</span>._getSelected());
            ga.addParam(<span class="hljs-string">'sysparm_forceSelected'</span>, <span class="hljs-keyword">this</span>.editor.tableElement.getNamedAttribute(<span class="hljs-string">"force_selected"</span>) == <span class="hljs-string">"true"</span>)
        }
        ga.getXML(<span class="hljs-keyword">this</span>._createOptions.bind(<span class="hljs-keyword">this</span>));
    },
    <span class="hljs-attr">getName</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"generateChoiceTable"</span>;
    },
    <span class="hljs-attr">getNoViews</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.editor.tableElement.getNamedAttribute(<span class="hljs-string">"no_views"</span>) == <span class="hljs-string">"true"</span>;
    },
    <span class="hljs-attr">_getSelected</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> selected = <span class="hljs-keyword">this</span>.editor.getValue(<span class="hljs-keyword">this</span>.editor.fields[<span class="hljs-number">0</span>]);
        <span class="hljs-keyword">var</span> selectedOnlyOverride = <span class="hljs-keyword">this</span>.editor.tableElement.getNamedAttribute(<span class="hljs-string">"selected_only_list_override"</span>);
        <span class="hljs-keyword">if</span> ((selected == <span class="hljs-literal">null</span> || selected.length == <span class="hljs-number">0</span>) &amp;&amp; selectedOnlyOverride != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">if</span> (selectedOnlyOverride.indexOf(<span class="hljs-string">'javascript:'</span>) == <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">var</span> script = selectedOnlyOverride.substring(<span class="hljs-number">11</span>, selectedOnlyOverride.length);
                <span class="hljs-keyword">var</span> response;
                <span class="hljs-keyword">try</span> {
                    response = <span class="hljs-built_in">eval</span>(script);
                } <span class="hljs-keyword">catch</span> (e) {
                    <span class="hljs-keyword">return</span> selected;
                }
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> response == <span class="hljs-string">'undefined'</span>) {
                    <span class="hljs-keyword">return</span> selected;
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">return</span> response == <span class="hljs-literal">null</span> || response.length == <span class="hljs-number">0</span> ?
                        <span class="hljs-string">'empty_c460fe18-371f-4315-a61b-c7bf21c82786'</span> : response;
                }
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> selectedOnlyOverride;
            }
        }
        <span class="hljs-keyword">return</span> selected;
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"GwtListEditTablename"</span>;
    }
});;
<span class="hljs-comment">/*! RESOURCE: /scripts/GwtListEditUpdateTablename.js */</span>
<span class="hljs-keyword">var</span> GwtListEditUpdateTablename = Class.create(GwtListEditTablename, {
    <span class="hljs-attr">getName</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">'generateChoiceUpdateTable'</span>;
    },
    <span class="hljs-attr">getNoViews</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"GwtListEditUpdateTablename"</span>;
    }
});;
<span class="hljs-comment">/*! RESOURCE: /scripts/GwtListEditDependent.js */</span>
<span class="hljs-keyword">var</span> GwtListEditDependent = Class.create(GwtListEditWindow, {
    <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$super, editor, gridEdit, fields</span>) </span>{
        <span class="hljs-keyword">this</span>.fields = fields;
        $<span class="hljs-keyword">super</span>(editor, gridEdit);
    },
    <span class="hljs-attr">createEditControls</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.preferredWidth = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">this</span>.controlsCount = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">this</span>._renderContainer();
        <span class="hljs-keyword">this</span>._renderControls();
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    },
    <span class="hljs-attr">onKeyTab</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        evt.stop();
        <span class="hljs-keyword">if</span> (evt.shiftKey) {
            <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._previousChoice(evt)) {
                <span class="hljs-keyword">this</span>.saveAndClose();
                <span class="hljs-keyword">this</span>.prevColumn();
            }
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._nextChoice(evt)) {
            <span class="hljs-keyword">this</span>.saveAndClose();
            <span class="hljs-keyword">this</span>.nextColumn();
        }
    },
    <span class="hljs-attr">_previousChoice</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        <span class="hljs-keyword">var</span> previous = <span class="hljs-keyword">this</span>.focusElement.parentNode.parentNode.previousSibling;
        <span class="hljs-keyword">if</span> (previous == <span class="hljs-literal">null</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">this</span>.focusElement = $(previous).select(<span class="hljs-string">"select"</span>)[<span class="hljs-number">0</span>];
        <span class="hljs-keyword">this</span>.focusEditor();
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    },
    <span class="hljs-attr">_nextChoice</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        <span class="hljs-keyword">var</span> next = <span class="hljs-keyword">this</span>.focusElement.parentNode.parentNode.nextSibling;
        <span class="hljs-keyword">if</span> (next == <span class="hljs-literal">null</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">this</span>.focusElement = $(next).select(<span class="hljs-string">"select"</span>)[<span class="hljs-number">0</span>];
        <span class="hljs-keyword">this</span>.focusEditor();
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    },
    <span class="hljs-attr">_renderControls</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> clickedField = <span class="hljs-keyword">this</span>.refName;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>.fields.length; i++) {
            <span class="hljs-keyword">var</span> field = <span class="hljs-keyword">this</span>.fields[i];
            <span class="hljs-keyword">var</span> elName = <span class="hljs-keyword">this</span>.editor.table + <span class="hljs-string">'.'</span> + field;
            <span class="hljs-keyword">var</span> tableElement = TableElement.get(elName);
            <span class="hljs-keyword">if</span> (!tableElement || !tableElement.isChoice())
                <span class="hljs-keyword">continue</span>;
            <span class="hljs-keyword">var</span> focus = (elName == clickedField);
            <span class="hljs-keyword">var</span> el = <span class="hljs-keyword">this</span>._renderControl(tableElement, field, focus);
        }
    },
    <span class="hljs-attr">_resizeControls</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> editControls = gel(<span class="hljs-string">"editControls"</span>);
        <span class="hljs-keyword">if</span> (editControls) {
            <span class="hljs-keyword">var</span> choiceLists = editControls.getElementsByTagName(<span class="hljs-string">"select"</span>);
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; choiceLists.length; i++) {
                <span class="hljs-keyword">if</span> (choiceLists[i].clientWidth &gt; <span class="hljs-keyword">this</span>.preferredWidth)
                    <span class="hljs-keyword">this</span>.preferredWidth = choiceLists[i].clientWidth;
            }
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; choiceLists.length; i++) {
                choiceLists[i].style.width = <span class="hljs-keyword">this</span>.preferredWidth + <span class="hljs-string">'px'</span>;
            }
        }
    },
    <span class="hljs-attr">_renderContainer</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> table = cel(<span class="hljs-string">"table"</span>);
        table.cellPadding = <span class="hljs-number">2</span>;
        table.style.backgroundColor = <span class="hljs-string">"EEEEEE"</span>;
        <span class="hljs-keyword">var</span> tbody = cel(<span class="hljs-string">"tbody"</span>, table);
        tbody.id = <span class="hljs-string">"editControls"</span>;
        <span class="hljs-keyword">this</span>.setTitle(table);
    },
    <span class="hljs-attr">_renderControl</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">tableElement, fieldName, focus</span>) </span>{
        <span class="hljs-keyword">this</span>.refName = <span class="hljs-keyword">this</span>.editor.table + <span class="hljs-string">"."</span> + fieldName;
        <span class="hljs-keyword">var</span> id = <span class="hljs-string">"LIST_EDIT_"</span> + <span class="hljs-keyword">this</span>.refName;
        <span class="hljs-keyword">if</span> (gel(id))
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">var</span> tbody = gel(<span class="hljs-string">"editControls"</span>);
        <span class="hljs-keyword">var</span> tr = cel(<span class="hljs-string">"tr"</span>, tbody);
        <span class="hljs-keyword">var</span> td = cel(<span class="hljs-string">"td"</span>, tr);
        td.id = <span class="hljs-string">"container_"</span> + <span class="hljs-keyword">this</span>.refName;
        td.innerHTML = tableElement.label + <span class="hljs-string">":&lt;br&gt;"</span>;
        <span class="hljs-keyword">var</span> select = cel(<span class="hljs-string">"select"</span>);
        select.id = id;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.doctype)
            select.className = <span class="hljs-string">'form-control list-edit-input'</span>;
        select.name = <span class="hljs-keyword">this</span>.refName;
        select.setAttribute(<span class="hljs-string">"dbVal"</span>, <span class="hljs-keyword">this</span>.editor.getValue(fieldName));
        select.onchange = <span class="hljs-keyword">this</span>._handleOnChange.bindAsEventListener(<span class="hljs-keyword">this</span>);
        td.appendChild(select)
        <span class="hljs-keyword">this</span>.controlsCount++;
        <span class="hljs-keyword">var</span> dependent = tableElement.getDependent();
        <span class="hljs-keyword">var</span> depVal = <span class="hljs-string">''</span>;
        <span class="hljs-keyword">if</span> (dependent)
            depVal = <span class="hljs-keyword">this</span>.editor.getValue(<span class="hljs-keyword">this</span>._getTargetName(fieldName, dependent));
        <span class="hljs-keyword">this</span>._addOptions(select, depVal);
        <span class="hljs-keyword">if</span> (focus)
            <span class="hljs-keyword">this</span>.focusElement = select;
    },
    <span class="hljs-attr">_handleOnChange</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        <span class="hljs-keyword">var</span> parent = Event.element(e);
        <span class="hljs-keyword">var</span> tableElement = TableElement.get(parent.name);
        <span class="hljs-keyword">var</span> children = tableElement.getDependentChildren();
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> k <span class="hljs-keyword">in</span> children) {
            <span class="hljs-keyword">var</span> focusElement = gel(<span class="hljs-string">"LIST_EDIT_"</span> + <span class="hljs-keyword">this</span>._getTargetName(parent.name, k));
            <span class="hljs-keyword">if</span> (!focusElement)
                <span class="hljs-keyword">return</span>;
            focusElement.setAttribute(<span class="hljs-string">"dbVal"</span>, <span class="hljs-string">""</span>);
            <span class="hljs-keyword">this</span>._addOptions(focusElement, parent.options[parent.options.selectedIndex].value);
        }
    },
    <span class="hljs-attr">_getTargetName</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">base, field</span>) </span>{
        <span class="hljs-keyword">var</span> parts = base.split(<span class="hljs-string">"."</span>);
        parts[parts.length - <span class="hljs-number">1</span>] = field;
        <span class="hljs-keyword">return</span> parts.join(<span class="hljs-string">"."</span>);
    },
    <span class="hljs-attr">_addOptions</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, depValue</span>) </span>{
        <span class="hljs-keyword">var</span> ajax = <span class="hljs-keyword">new</span> GlideAjax(<span class="hljs-string">'PickList'</span>);
        ajax.addParam(<span class="hljs-string">'sysparm_chars'</span>, <span class="hljs-string">'*'</span>);
        ajax.addParam(<span class="hljs-string">'sysparm_name'</span>, element.name);
        <span class="hljs-keyword">if</span> (depValue)
            ajax.addParam(<span class="hljs-string">'sysparm_value'</span>, depValue);
        ajax.addParam(<span class="hljs-string">'sysparm_nomax'</span>, <span class="hljs-string">'true'</span>);
        ajax.addParam(<span class="hljs-string">'sysparm_id_list'</span>, <span class="hljs-keyword">this</span>.gridEdit.getSelectedSysIds().join());
        ajax.getXML(<span class="hljs-keyword">this</span>._createOptions.bind(<span class="hljs-keyword">this</span>, element));
    },
    <span class="hljs-attr">_createOptions</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, response</span>) </span>{
        element.options.length = <span class="hljs-number">0</span>;
        element.style.width = <span class="hljs-string">''</span>;
        <span class="hljs-keyword">var</span> xml = response.responseXML;
        <span class="hljs-keyword">var</span> items = xml.getElementsByTagName(<span class="hljs-string">"item"</span>);
        <span class="hljs-keyword">var</span> value = element.getAttribute(<span class="hljs-string">"dbVal"</span>);
        <span class="hljs-keyword">var</span> nullOverride = xml.documentElement.getAttribute(<span class="hljs-string">"default_option"</span>);
        <span class="hljs-keyword">if</span> (nullOverride != <span class="hljs-literal">null</span> &amp;&amp; nullOverride.length &gt; <span class="hljs-number">0</span>) {
            addOption(element, <span class="hljs-string">""</span>, nullOverride, <span class="hljs-literal">true</span>);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">var</span> msg = getMessage(<span class="hljs-string">"-- None --"</span>);
            addOption(element, <span class="hljs-string">""</span>, msg, <span class="hljs-literal">true</span>);
        }
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; items.length; i++) {
            <span class="hljs-keyword">var</span> v = items[i].getAttribute(<span class="hljs-string">"value"</span>);
            <span class="hljs-keyword">var</span> l = items[i].getAttribute(<span class="hljs-string">"label"</span>);
            <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._checkDuplicateOptions(element, v, l))
                addOption(element, v, l, (v == value));
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.controlsCount &gt; <span class="hljs-number">0</span>)
            <span class="hljs-keyword">this</span>.controlsCount--;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.controlsCount == <span class="hljs-number">0</span>) {
            setTimeout(<span class="hljs-keyword">this</span>._resizeControls.bind(<span class="hljs-keyword">this</span>), <span class="hljs-number">0</span>);
            <span class="hljs-keyword">this</span>.createEditControlsComplete();
        }
    },
    <span class="hljs-attr">_checkDuplicateOptions</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, value, label</span>) </span>{
        <span class="hljs-keyword">if</span> (!element.length)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">var</span> opts = element.options;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; opts.length; i++)
            <span class="hljs-keyword">if</span> (opts[i].value == value &amp;&amp; opts[i].text === label)
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    },
    <span class="hljs-attr">save</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> tbody = gel(<span class="hljs-string">"editControls"</span>);
        <span class="hljs-keyword">var</span> choiceLists = tbody.getElementsByTagName(<span class="hljs-string">"select"</span>);
        <span class="hljs-keyword">if</span> (choiceLists) {
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; choiceLists.length; i++) {
                <span class="hljs-keyword">var</span> element = choiceLists[i];
                <span class="hljs-keyword">var</span> option = element.options[element.selectedIndex];
                <span class="hljs-keyword">var</span> fName = element.name.substring(<span class="hljs-keyword">this</span>.editor.table.length + <span class="hljs-number">1</span>);
                <span class="hljs-keyword">this</span>.editor.setFieldValue(fName, option.value);
                <span class="hljs-keyword">var</span> dspValue;
                <span class="hljs-keyword">if</span> (!option.value)
                    dspValue = <span class="hljs-string">''</span>;
                <span class="hljs-keyword">else</span>
                    dspValue = option.text;
                <span class="hljs-keyword">this</span>.editor.setFieldRenderValue(fName, dspValue);
            }
        }
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"GwtListEditDependent"</span>;
    }
});;
<span class="hljs-comment">/*! RESOURCE: /scripts/GwtListEditMultiText.js */</span>
<span class="hljs-keyword">var</span> GwtListEditMultiText = Class.create(GwtListEditWindow, {
    <span class="hljs-attr">createEditControls</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> input = <span class="hljs-keyword">this</span>._createTextAreaInput();
        <span class="hljs-keyword">this</span>.setTitle(input);
    },
    <span class="hljs-attr">onKeyEsc</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        evt.stop();
        <span class="hljs-keyword">this</span>.dismiss();
        setTimeout(<span class="hljs-keyword">this</span>._delayedRefresh.bind(<span class="hljs-keyword">this</span>), <span class="hljs-number">10</span>);
    },
    <span class="hljs-attr">onKeyReturn</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">if</span> (evt.shiftKey)
            <span class="hljs-keyword">return</span>;
        evt.stop();
        <span class="hljs-keyword">this</span>.saveAndClose();
        <span class="hljs-keyword">if</span> (evt.ctrlKey)
            setTimeout(<span class="hljs-keyword">this</span>._delayedEdit.bind(<span class="hljs-keyword">this</span>), <span class="hljs-number">10</span>);
        <span class="hljs-keyword">else</span>
            setTimeout(<span class="hljs-keyword">this</span>._delayedRefresh.bind(<span class="hljs-keyword">this</span>), <span class="hljs-number">10</span>);
    },
    <span class="hljs-attr">_delayedRefresh</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.gridEdit.refreshCursor();
    },
    <span class="hljs-attr">_delayedEdit</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.gridEdit.editNextRow();
    },
    <span class="hljs-attr">_createTextAreaInput</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> answer = cel(<span class="hljs-string">"textarea"</span>);
        answer.value = <span class="hljs-keyword">this</span>.editor.getDisplayValue();
        answer.rows = <span class="hljs-number">4</span>;
        answer.id = GwtListEditWindow.inputID;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.doctype)
            answer.addClassName(<span class="hljs-string">'form-control list-edit-input'</span>);
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.doctype) {
            answer.style.width = <span class="hljs-keyword">this</span>.preferredWidth;
            answer.style.overflow = <span class="hljs-string">"auto"</span>;
        }
        <span class="hljs-keyword">this</span>.focusElement = answer;
        <span class="hljs-keyword">return</span> answer;
    },
    <span class="hljs-attr">save</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> input = GwtListEditWindow.getCellEditValue();
        <span class="hljs-keyword">if</span> (input) {
            <span class="hljs-keyword">this</span>.setValue(<span class="hljs-literal">null</span>, input.value);
            <span class="hljs-keyword">this</span>.setRenderValue(<span class="hljs-keyword">this</span>.truncateDisplayValue(input.value));
        }
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"GwtListEditMultiText"</span>;
    }
});;
<span class="hljs-comment">/*! RESOURCE: /scripts/GwtListEditJournal.js */</span>
<span class="hljs-keyword">var</span> GwtListEditJournal = Class.create(GwtListEditWindow, {
    <span class="hljs-attr">createEditControls</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> input = <span class="hljs-keyword">this</span>._createTextAreaInput();
        <span class="hljs-keyword">this</span>.setTitle(input);
    },
    <span class="hljs-attr">onKeyReturn</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$super, evt</span>) </span>{
        <span class="hljs-keyword">if</span> (evt.shiftKey)
            <span class="hljs-keyword">return</span>;
        $<span class="hljs-keyword">super</span>(evt);
    },
    <span class="hljs-attr">_createTextAreaInput</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> answer = cel(<span class="hljs-string">"textarea"</span>);
        answer.value = <span class="hljs-string">""</span>;
        answer.rows = <span class="hljs-number">3</span>;
        answer.id = GwtListEditWindow.inputID;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.doctype)
            answer.addClassName(<span class="hljs-string">'form-control list-edit-input'</span>);
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.doctype) {
            answer.style.width = <span class="hljs-keyword">this</span>.preferredWidth;
            answer.style.overflow = <span class="hljs-string">"auto"</span>;
        }
        <span class="hljs-keyword">this</span>.focusElement = answer;
        <span class="hljs-keyword">return</span> answer;
    },
    <span class="hljs-attr">save</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> input = GwtListEditWindow.getCellEditValue();
        <span class="hljs-keyword">if</span> (input)
            <span class="hljs-keyword">this</span>.setValue(<span class="hljs-literal">null</span>, input.value);
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"GwtListEditJournal"</span>;
    }
});;
<span class="hljs-comment">/*! RESOURCE: /scripts/GwtListEditInternalType.js */</span>
<span class="hljs-keyword">var</span> GwtListEditInternalType = Class.create(GwtListEditSelect, {
    <span class="hljs-attr">addOptions</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> ga = <span class="hljs-keyword">new</span> GlideAjax(<span class="hljs-string">'AjaxClientHelper'</span>);
        ga.addParam(<span class="hljs-string">'sysparm_name'</span>, <span class="hljs-string">'generateChoice'</span>);
        <span class="hljs-keyword">var</span> selectedValue = <span class="hljs-keyword">this</span>.editor.getValue();
        <span class="hljs-keyword">if</span> (selectedValue) {
            ga.addParam(<span class="hljs-string">'sysparm_selected_value'</span>, selectedValue);
        }
        ga.getXML(<span class="hljs-keyword">this</span>._createOptions.bind(<span class="hljs-keyword">this</span>));
    },
    <span class="hljs-attr">_createOptions</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.state != <span class="hljs-string">'initialize'</span>)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">var</span> xml = response.responseXML;
        <span class="hljs-keyword">var</span> items = xml.getElementsByTagName(<span class="hljs-string">"item"</span>);
        <span class="hljs-keyword">var</span> value = <span class="hljs-keyword">this</span>.editor.getValue();
        <span class="hljs-keyword">this</span>.focusElement.options.length = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; items.length; i++) {
            <span class="hljs-keyword">var</span> v = items[i].getAttribute(<span class="hljs-string">"value"</span>);
            <span class="hljs-keyword">var</span> l = items[i].getAttribute(<span class="hljs-string">"label"</span>);
            addOption(<span class="hljs-keyword">this</span>.focusElement, v, l, <span class="hljs-keyword">this</span>._isSelected(value, v, l));
        }
        <span class="hljs-keyword">this</span>.createEditControlsComplete();
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"GwtListEditInternalType"</span>;
    }
});;
<span class="hljs-comment">/*! RESOURCE: /scripts/GwtListEditRelatedTags.js */</span>
<span class="hljs-keyword">var</span> GwtListEditRelatedTags = Class.create(GwtListEditWindow, {
    <span class="hljs-attr">createOkCancel</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> save = createImage(<span class="hljs-string">'images/icons/nav_clear_2.png'</span>, <span class="hljs-keyword">this</span>.msgSaveButton, <span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.saveEvent);
        save.id = <span class="hljs-string">'cell_edit_ok'</span>;
        save.width = <span class="hljs-number">18</span>;
        save.height = <span class="hljs-number">18</span>;
        <span class="hljs-keyword">this</span>.addDecoration(save);
    },
    <span class="hljs-attr">save</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{},
    <span class="hljs-attr">createEditControls</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> $ = $j;
        <span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>;
        <span class="hljs-keyword">var</span> tags = <span class="hljs-keyword">new</span> Element(<span class="hljs-string">"ul"</span>, {
            <span class="hljs-string">"id"</span>: <span class="hljs-string">"tag_cell_edit"</span>
        });
        <span class="hljs-keyword">this</span>.setTitle(tags);
        $dt = $(<span class="hljs-string">'#tag_cell_edit'</span>);
        <span class="hljs-keyword">var</span> url = <span class="hljs-keyword">new</span> GlideURL(<span class="hljs-string">"data_table.do"</span>);
        url.addParam(<span class="hljs-string">'sysparm_type'</span>, <span class="hljs-string">'labels'</span>);
        url.addParam(<span class="hljs-string">'sysparm_table'</span>, <span class="hljs-keyword">this</span>.editor.table);
        url.addParam(<span class="hljs-string">'sysparm_sys_id'</span>, <span class="hljs-keyword">this</span>.editor.getCanWriteIds().toString());
        url.addParam(<span class="hljs-string">'sysparm_action'</span>, <span class="hljs-string">'common_labels'</span>);
        url.addParam(<span class="hljs-string">'nocache'</span>, (<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime().toString()));
        url = url.getURL();
        $.ajax({
            <span class="hljs-attr">dataType</span>: <span class="hljs-string">"json"</span>,
            <span class="hljs-attr">url</span>: url,
            <span class="hljs-attr">beforeSend</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">request</span>) </span>{
                request.setRequestHeader(<span class="hljs-string">"X-UserToken"</span>, <span class="hljs-built_in">window</span>.g_ck);
            },
            <span class="hljs-attr">success</span>: initializeResponse
        });

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">labelTypeAhead</span>(<span class="hljs-params">table, search, showChoices</span>) </span>{
            <span class="hljs-keyword">var</span> url = <span class="hljs-keyword">new</span> GlideURL(<span class="hljs-string">"data_table.do"</span>);
            url.addParam(<span class="hljs-string">'sysparm_type'</span>, <span class="hljs-string">'labels'</span>);
            url.addParam(<span class="hljs-string">'sysparm_table'</span>, table);
            url.addParam(<span class="hljs-string">'sysparm_action'</span>, <span class="hljs-string">'available_labels'</span>);
            url.addParam(<span class="hljs-string">'sysparm_prefix'</span>, search.term);
            url = url.getURL();
            $.ajax({
                <span class="hljs-attr">dataType</span>: <span class="hljs-string">"json"</span>,
                <span class="hljs-attr">url</span>: url,
                <span class="hljs-attr">beforeSend</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">request</span>) </span>{
                    request.setRequestHeader(<span class="hljs-string">"X-UserToken"</span>, <span class="hljs-built_in">window</span>.g_ck);
                },
                <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">var</span> t = <span class="hljs-built_in">arguments</span>[<span class="hljs-number">2</span>].responseText;
                    <span class="hljs-keyword">var</span> response = <span class="hljs-built_in">JSON</span>.parse(t);
                    showChoices(response.availableLabels);
                }
            });
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">initializeResponse</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> labels = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-built_in">arguments</span>[<span class="hljs-number">2</span>].responseText);
            $dt.html += <span class="hljs-string">"&lt;li&gt;&lt;/li&gt;"</span>;
            $dt.newtagit({
                <span class="hljs-attr">allowSpaces</span>: <span class="hljs-literal">true</span>,
                <span class="hljs-attr">afterTagAdded</span>: onTagAdded,
                <span class="hljs-attr">afterTagRemoved</span>: onTagRemoved,
                <span class="hljs-attr">showAutocompleteOnFocus</span>: <span class="hljs-literal">false</span>,
                <span class="hljs-attr">animate</span>: <span class="hljs-literal">false</span>,
                <span class="hljs-attr">placeholderText</span>: getMessage(<span class="hljs-string">"Add Tag..."</span>),
                <span class="hljs-attr">table</span>: labels.table,
                <span class="hljs-attr">labelsListString</span>: <span class="hljs-built_in">JSON</span>.stringify(labels),
                <span class="hljs-attr">autocomplete</span>: {
                    <span class="hljs-attr">source</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">search, showChoices</span>) </span>{
                        labelTypeAhead(labels.table, search, showChoices);
                    }
                },
                <span class="hljs-attr">query</span>: <span class="hljs-string">""</span>,
                <span class="hljs-attr">context</span>: <span class="hljs-string">"cellEdit"</span>,
                <span class="hljs-attr">rowId</span>: that.getAnchorSysId(),
                <span class="hljs-attr">fieldName</span>: <span class="hljs-string">"documentTags"</span>
            });
            $dt.css(<span class="hljs-string">"display"</span>, <span class="hljs-string">"inline-block"</span>);
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onTagAdded</span>(<span class="hljs-params">evt, ui</span>) </span>{
            <span class="hljs-keyword">if</span> (ui.duringInitialization)
                <span class="hljs-keyword">return</span>;
            <span class="hljs-keyword">var</span> rowIds = that.editor.getCanWriteIds();
            <span class="hljs-keyword">var</span> validRowIds = [];
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; rowIds.length; i++) {
                <span class="hljs-keyword">var</span> row = $(<span class="hljs-string">"tr[sys_id='"</span> + rowIds[i] + <span class="hljs-string">"']"</span>);
                <span class="hljs-keyword">var</span> labelNames = row.find(<span class="hljs-string">".tagit-label:contains("</span> + ui.tagLabel + <span class="hljs-string">")"</span>)
                    .filter(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.text == ui.tagLabel
                    });
                <span class="hljs-keyword">if</span> (labelNames.length != <span class="hljs-number">0</span>)
                    <span class="hljs-keyword">continue</span>;
                row.find(<span class="hljs-string">"input.ui-widget-content"</span>).parent().before(ui.tag.clone(<span class="hljs-literal">true</span>));
                validRowIds.push(rowIds[i]);
            }
            labelSet(<span class="hljs-string">'add'</span>, ui.tagLabel, ui.table, validRowIds);
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onTagRemoved</span>(<span class="hljs-params">evt, ui</span>) </span>{
            <span class="hljs-keyword">if</span> (ui.duringInitialization)
                <span class="hljs-keyword">return</span>;
            <span class="hljs-keyword">var</span> rowIds = that.editor.getCanWriteIds();
            <span class="hljs-keyword">var</span> validRowIds = [];
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; rowIds.length; i++) {
                <span class="hljs-keyword">var</span> label = $(<span class="hljs-string">"tr[sys_id='"</span> + rowIds[i] + <span class="hljs-string">"']"</span>).find(<span class="hljs-string">"li[id='"</span> + ui.tag + <span class="hljs-string">"']"</span>);
                <span class="hljs-keyword">if</span> (label.length != <span class="hljs-number">0</span>) {
                    label.remove();
                    validRowIds.push(rowIds[i]);
                }
            }
            labelSet(<span class="hljs-string">'removeById'</span>, ui.tag, ui.table, validRowIds);
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">labelSet</span>(<span class="hljs-params">action, label, table, rowId</span>) </span>{
            <span class="hljs-keyword">var</span> url = <span class="hljs-keyword">new</span> GlideURL(<span class="hljs-string">"data_table.do"</span>);
            url.addParam(<span class="hljs-string">'sysparm_type'</span>, <span class="hljs-string">'labels'</span>);
            url.addParam(<span class="hljs-string">'sysparm_table'</span>, table);
            url.addParam(<span class="hljs-string">'sysparm_sys_id'</span>, rowId.toString());
            url.addParam(<span class="hljs-string">'sysparm_label'</span>, label);
            url.addParam(<span class="hljs-string">'sysparm_action'</span>, action);
            url = url.getURL();
            $.ajax({
                <span class="hljs-attr">dataType</span>: <span class="hljs-string">"json"</span>,
                <span class="hljs-attr">url</span>: url,
                <span class="hljs-attr">beforeSend</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">request</span>) </span>{
                    request.setRequestHeader(<span class="hljs-string">"X-UserToken"</span>, <span class="hljs-built_in">window</span>.g_ck);
                },
                <span class="hljs-attr">success</span>: labelResponse
            });
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">labelResponse</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">if</span> (g_enhanced_activated == <span class="hljs-string">'false'</span>) <span class="hljs-keyword">return</span>;
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">arguments</span> == <span class="hljs-literal">null</span> || <span class="hljs-built_in">arguments</span>[<span class="hljs-number">2</span>] == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span>;
            <span class="hljs-keyword">var</span> t = <span class="hljs-built_in">arguments</span>[<span class="hljs-number">2</span>].responseText;
            <span class="hljs-keyword">if</span> (t == <span class="hljs-string">""</span> || t == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span>;
            <span class="hljs-keyword">var</span> json = <span class="hljs-built_in">JSON</span>.parse(t);
            <span class="hljs-keyword">var</span> share = $dt.find(<span class="hljs-string">'[id=\''</span> + json.label + <span class="hljs-string">'\'].tagit-share'</span>);
            share.parent().attr(<span class="hljs-string">"id"</span>, json.sysId).css({
                <span class="hljs-string">"background-color"</span>: json.bgcolor,
                <span class="hljs-string">"color"</span>: json.tcolor
            });
            share.parent().find(<span class="hljs-string">".tagit-label"</span>).unbind(<span class="hljs-string">'click'</span>).click(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                <span class="hljs-built_in">window</span>.location.href = json.table + <span class="hljs-string">"_list.do?sysparm_query="</span> + json.query
            });
            <span class="hljs-keyword">if</span> (json.owner != <span class="hljs-literal">true</span>) {
                share.removeClass(<span class="hljs-string">"pointerhand"</span>);
                share.unbind(<span class="hljs-string">"click"</span>);
            }
            <span class="hljs-keyword">var</span> icon = (json.type == <span class="hljs-string">'SHARED'</span>) ? <span class="hljs-string">'icon-user-group'</span> : <span class="hljs-string">'icon-user'</span>;
            share = share.children();
            share.removeClass(<span class="hljs-string">"icon-user-group icon-user"</span>).addClass(icon);
            <span class="hljs-keyword">var</span> rowIds = that.editor.getCanWriteIds();
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; rowIds.length; i++) {
                <span class="hljs-keyword">var</span> rowShare = $(<span class="hljs-string">"tr[sys_id='"</span> + rowIds[i] + <span class="hljs-string">"']"</span>).find(<span class="hljs-string">'[id=\''</span> + json.label + <span class="hljs-string">'\'].tagit-share'</span>);
                rowShare.parent().attr(<span class="hljs-string">"id"</span>, json.sysId).css({
                    <span class="hljs-string">"background-color"</span>: json.bgcolor,
                    <span class="hljs-string">"color"</span>: json.tcolor
                });
                rowShare.parent().find(<span class="hljs-string">".tagit-label"</span>).unbind(<span class="hljs-string">'click'</span>).click(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-built_in">window</span>.location.href = json.table + <span class="hljs-string">"_list.do?sysparm_query="</span> + json.query
                });
                <span class="hljs-keyword">if</span> (json.owner != <span class="hljs-literal">true</span>) {
                    rowShare.removeClass(<span class="hljs-string">"pointerhand"</span>);
                    rowShare.unbind(<span class="hljs-string">"click"</span>);
                }
                rowShare = rowShare.children();
                rowShare.removeClass(<span class="hljs-string">"icon-user-group icon-user"</span>).addClass(icon);
            }
        }
    },
    <span class="hljs-attr">_onKeyDown</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        <span class="hljs-keyword">switch</span> (e.keyCode) {
            <span class="hljs-keyword">case</span> Event.KEY_ESC:
                <span class="hljs-keyword">this</span>.onKeyEsc(e);
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> Event.KEY_TAB:
                <span class="hljs-keyword">this</span>.onKeyTab(e);
                <span class="hljs-keyword">break</span>;
        }
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"GwtListEditRelatedTags"</span>;
    }
});;
<span class="hljs-comment">/*! RESOURCE: /scripts/GwtListEditEncryptedText.js */</span>
<span class="hljs-keyword">var</span> GwtListEditEncryptedText = Class.create(GwtListEditWindow, {
    <span class="hljs-attr">createEditControls</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> input = <span class="hljs-keyword">this</span>._createTextAreaInput();
        <span class="hljs-keyword">this</span>.setTitle(input);
    },
    <span class="hljs-attr">_createTextAreaInput</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> answer = cel(<span class="hljs-string">"textarea"</span>);
        answer.value = <span class="hljs-keyword">this</span>.editor.getDisplayValue();
        answer.rows = <span class="hljs-number">4</span>;
        answer.id = GwtListEditWindow.inputID;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.doctype)
            answer.addClassName(<span class="hljs-string">'form-control list-edit-input'</span>);
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.doctype) {
            answer.style.width = <span class="hljs-keyword">this</span>.preferredWidth;
            answer.style.overflow = <span class="hljs-string">"auto"</span>;
        }
        <span class="hljs-keyword">this</span>.focusElement = answer;
        <span class="hljs-keyword">return</span> answer;
    },
    <span class="hljs-attr">save</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> input = GwtListEditWindow.getCellEditValue();
        <span class="hljs-keyword">if</span> (input) {
            <span class="hljs-keyword">this</span>.setValue(<span class="hljs-literal">null</span>, input.value);
            <span class="hljs-keyword">this</span>.setRenderValue(<span class="hljs-keyword">this</span>.truncateDisplayValue(input.value));
        }
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"GwtListEditEncryptedText"</span>;
    }
});;
<span class="hljs-comment">/*! RESOURCE: /scripts/GwtListEditTranslatedField.js */</span>
<span class="hljs-keyword">var</span> GwtListEditTranslatedField = Class.create(GwtListEditWindow, {
    <span class="hljs-attr">createEditControls</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> input = <span class="hljs-keyword">this</span>.createTextInput();
        input.value = <span class="hljs-keyword">this</span>.editor.getDisplayValue();
        <span class="hljs-keyword">this</span>.setTitle(input);
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.editor.tableElement.maxLength &gt; <span class="hljs-number">0</span>)
            input.setAttribute(<span class="hljs-string">"maxLength"</span>, <span class="hljs-keyword">this</span>.editor.tableElement.maxLength);
        <span class="hljs-keyword">var</span> answer = input.value.replace(<span class="hljs-regexp">/\n/g</span>, <span class="hljs-string">" "</span>);
        answer = answer.replace(<span class="hljs-regexp">/\t/g</span>, <span class="hljs-string">""</span>);
        <span class="hljs-keyword">this</span>.focusElement.value = answer;
    },
    <span class="hljs-attr">save</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> input = GwtListEditWindow.getCellEditValue();
        <span class="hljs-keyword">if</span> (input) {
            <span class="hljs-keyword">this</span>.setValue(<span class="hljs-literal">null</span>, input.value);
            <span class="hljs-keyword">this</span>.setRenderValue(<span class="hljs-keyword">this</span>.truncateDisplayValue(input.value));
        }
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"GwtListEditTranslatedField"</span>;
    }
});;
<span class="hljs-comment">/*! RESOURCE: /scripts/GwtListEditPassword.js */</span>
<span class="hljs-keyword">var</span> GwtListEditPassword = Class.create(GwtListEditWindow, {
    <span class="hljs-attr">createEditControls</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> input = <span class="hljs-keyword">this</span>.createTextInput();
        input.type = <span class="hljs-string">"password"</span>;
        <span class="hljs-keyword">this</span>.setTitle(input);
    },
    <span class="hljs-attr">save</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> input = GwtListEditWindow.getCellEditValue();
        <span class="hljs-keyword">if</span> (input)
            <span class="hljs-keyword">this</span>.setValue(<span class="hljs-literal">null</span>, input.value);
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"GwtListEditPassword"</span>;
    }
});;
<span class="hljs-comment">/*! RESOURCE: /scripts/GwtListEditError.js */</span>
<span class="hljs-keyword">var</span> GwtListEditError = Class.create(GwtListEditWindow, {
    <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$super, editor, gridEdit, errorMsg</span>) </span>{
        <span class="hljs-keyword">this</span>.errorMsg = errorMsg;
        $<span class="hljs-keyword">super</span>(editor, gridEdit);
    },
    <span class="hljs-attr">_showUpdateMessage</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span>;
    },
    <span class="hljs-attr">createEditControls</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> input = <span class="hljs-keyword">this</span>.createTextInput();
        input.value = <span class="hljs-keyword">this</span>.editor.getDisplayValue();
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.doctype)
            input.style.marginBottom = <span class="hljs-string">'3px'</span>;
        input.style.backgroundColor = <span class="hljs-string">"LightGrey"</span>;
        input.readOnly = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">this</span>.setTitle(input);
        <span class="hljs-keyword">this</span>.appendStatusPane(<span class="hljs-keyword">this</span>.errorMsg);
        <span class="hljs-keyword">var</span> e = $(<span class="hljs-string">'cell_edit_ok'</span>);
        <span class="hljs-keyword">if</span> (e)
            e.parentNode.removeChild(e);
    },
    <span class="hljs-attr">focusEditor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.focusElement.focus();
    },
    <span class="hljs-attr">saveAndClose</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.dismiss();
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"GwtListEditError"</span>;
    }
});;
<span class="hljs-comment">/*! RESOURCE: /scripts/GwtCellEditor.js */</span>
<span class="hljs-keyword">var</span> GwtCellEditor = Class.create({
    <span class="hljs-attr">REF_ELEMENT_PREFIX</span>: <span class="hljs-string">'ref_'</span>,
    <span class="hljs-attr">IGNORE_MSG</span>: <span class="hljs-string">"This element type is not editable from the list."</span>,
    <span class="hljs-attr">WAITING_IMAGE</span>: <span class="hljs-string">'images/loading_anim3.gifx'</span>,
    <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">gridEdit, ignoreTypes, changes, tableController, renderer</span>) </span>{
        <span class="hljs-keyword">this</span>.gridEdit = gridEdit;
        <span class="hljs-keyword">this</span>.ignoreTypes = ignoreTypes;
        <span class="hljs-keyword">this</span>.changes = changes;
        <span class="hljs-keyword">this</span>.tableController = tableController;
        <span class="hljs-keyword">this</span>.renderer = renderer;
        <span class="hljs-keyword">this</span>._initElement();
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.tableElement === <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">this</span>.savedFields = [];
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.changes.isDeletedRow(<span class="hljs-keyword">this</span>.sysId))
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">this</span>.timer = setTimeout(<span class="hljs-keyword">this</span>.showLoading.bind(<span class="hljs-keyword">this</span>), <span class="hljs-keyword">this</span>.WAIT_INITIAL_DELAY);
        <span class="hljs-keyword">this</span>.valid = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">this</span>.errorMsg = <span class="hljs-keyword">this</span>._checkIgnoreTypes();
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.errorMsg) {
            <span class="hljs-keyword">this</span>.editWindow = <span class="hljs-keyword">this</span>._buildErrorEditor();
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">this</span>.errorMsg = <span class="hljs-keyword">this</span>._checkMultipleDerivedOrExtended();
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.errorMsg) {
            <span class="hljs-keyword">this</span>.editWindow = <span class="hljs-keyword">this</span>._buildErrorEditor();
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">this</span>._loadValues(<span class="hljs-keyword">this</span>.renderEditor.bind(<span class="hljs-keyword">this</span>));
    },
    <span class="hljs-attr">dismiss</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.valid = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">this</span>.hideLoading();
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.editWindow)
            <span class="hljs-keyword">this</span>.editWindow.dismiss();
    },
    <span class="hljs-attr">saveAndClose</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.valid = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">this</span>.hideLoading();
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.editWindow)
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.editWindow.saveAndClose();
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    },
    <span class="hljs-attr">saveValues</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>._saveValues();
    },
    <span class="hljs-attr">_getSelectedSysIds</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.gridEdit.getSelectedSysIds();
    },
    <span class="hljs-attr">_getSecurityFields</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.tableElement.isReference()) {
            <span class="hljs-keyword">var</span> answer = [];
            answer.push(<span class="hljs-keyword">this</span>.fieldName);
            <span class="hljs-keyword">return</span> answer;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.fields;
    },
    <span class="hljs-attr">getValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">field</span>) </span>{
        <span class="hljs-keyword">if</span> (!field)
            field = <span class="hljs-keyword">this</span>.fieldName;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.changes.getValue(<span class="hljs-keyword">this</span>.sysId, field);
    },
    <span class="hljs-attr">getDisplayValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">field</span>) </span>{
        <span class="hljs-keyword">if</span> (!field)
            field = <span class="hljs-keyword">this</span>.fieldName;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.changes.getDisplayValue(<span class="hljs-keyword">this</span>.sysId, field);
    },
    <span class="hljs-attr">getRenderValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">field</span>) </span>{
        <span class="hljs-keyword">if</span> (!field)
            field = <span class="hljs-keyword">this</span>.fieldName;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.changes.getRenderValue(<span class="hljs-keyword">this</span>.sysId, field);
    },
    <span class="hljs-attr">getCanWriteIds</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> sysIds = <span class="hljs-keyword">this</span>._getSelectedSysIds();
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.changes.calcWritableSysIds(sysIds, <span class="hljs-keyword">this</span>._getSecurityFields());
    },
    <span class="hljs-attr">isMandatory</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">id, fieldName</span>) </span>{
        <span class="hljs-keyword">if</span> (!fieldName)
            fieldName = <span class="hljs-keyword">this</span>.fieldName;
        <span class="hljs-keyword">if</span> (!id)
            id = <span class="hljs-keyword">this</span>.sysId;
        <span class="hljs-keyword">var</span> record = <span class="hljs-keyword">this</span>.changes.get(id);
        <span class="hljs-keyword">if</span> (!record)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">var</span> field = record.getField(fieldName);
        <span class="hljs-keyword">if</span> (!field)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">if</span> (field.isMandatory())
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    },
    <span class="hljs-attr">setValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, displayValue</span>) </span>{
        <span class="hljs-keyword">this</span>.setFieldValue(<span class="hljs-keyword">this</span>.fieldName, value, displayValue);
    },
    <span class="hljs-attr">setReferenceValid</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">valid</span>) </span>{
        <span class="hljs-keyword">this</span>.changes.setReferenceValid(<span class="hljs-keyword">this</span>.sysId, <span class="hljs-keyword">this</span>.fieldName, valid);
    },
    <span class="hljs-attr">isReferenceValid</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.changes.isReferenceValid(<span class="hljs-keyword">this</span>.sysId, <span class="hljs-keyword">this</span>.fieldName);
    },
    <span class="hljs-attr">setFieldValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name, value, displayValue</span>) </span>{
        <span class="hljs-keyword">var</span> ids = <span class="hljs-keyword">this</span>.getCanWriteIds();
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; ids.length; i++) {
            <span class="hljs-keyword">var</span> id = ids[i];
            <span class="hljs-keyword">this</span>._beforeSetValue(id, name, value, displayValue);
            <span class="hljs-keyword">if</span> (value == <span class="hljs-literal">null</span>)
                <span class="hljs-keyword">this</span>.renderer.setDisplayValue(id, name, displayValue);
            <span class="hljs-keyword">else</span>
                <span class="hljs-keyword">this</span>.renderer.setValue(id, name, value);
            <span class="hljs-keyword">this</span>._afterSetValue(id, name);
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.changes.isAddedRow(id) || <span class="hljs-keyword">this</span>.changes.isFieldDirty(id, name)) {
                <span class="hljs-keyword">var</span> entry = [id, name];
                <span class="hljs-keyword">this</span>.savedFields.push(entry);
            }
        }
    },
    <span class="hljs-attr">setRenderValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, displayValue</span>) </span>{
        <span class="hljs-keyword">this</span>.setFieldRenderValue(<span class="hljs-keyword">this</span>.fieldName, value, displayValue);
    },
    <span class="hljs-attr">setFieldRenderValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name, value</span>) </span>{
        <span class="hljs-keyword">var</span> ids = <span class="hljs-keyword">this</span>.getCanWriteIds();
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; ids.length; i++) {
            <span class="hljs-keyword">var</span> id = ids[i];
            <span class="hljs-keyword">this</span>.changes.setRenderValue(id, name, value);
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.changes.isFieldDirty(id, name))
                <span class="hljs-keyword">this</span>.renderer.renderValue(id, name);
        }
    },
    <span class="hljs-attr">renderEditor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.valid)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">var</span> valueErr = <span class="hljs-keyword">this</span>.changes.getLoaderErrorMsg();
        <span class="hljs-keyword">if</span> (valueErr)
            <span class="hljs-keyword">this</span>.errorMsg = valueErr;
        <span class="hljs-keyword">else</span>
            <span class="hljs-keyword">this</span>.errorMsg = <span class="hljs-keyword">this</span>._checkSecurity();
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.errorMsg)
            <span class="hljs-keyword">this</span>.editWindow = <span class="hljs-keyword">this</span>._buildErrorEditor();
        <span class="hljs-keyword">else</span>
            <span class="hljs-keyword">this</span>.editWindow = <span class="hljs-keyword">this</span>._createEditWindow();
    },
    <span class="hljs-attr">_buildErrorEditor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.gridEdit.clearSelected();
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> GwtListEditError(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.gridEdit, <span class="hljs-keyword">this</span>.errorMsg);
    },
    <span class="hljs-attr">_checkIgnoreTypes</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> type = <span class="hljs-keyword">this</span>.tableElement.getType();
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>.ignoreTypes.length; i++) {
            <span class="hljs-keyword">if</span> (type == <span class="hljs-keyword">this</span>.ignoreTypes[i])
                <span class="hljs-keyword">return</span> getMessage(<span class="hljs-keyword">this</span>.IGNORE_MSG);
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.tableElement.isArray())
            <span class="hljs-keyword">return</span> getMessage(<span class="hljs-keyword">this</span>.IGNORE_MSG);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    },
    <span class="hljs-attr">_checkSecurity</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> canWriteIds = <span class="hljs-keyword">this</span>.getCanWriteIds();
        <span class="hljs-keyword">if</span> (canWriteIds.length != <span class="hljs-number">0</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">var</span> sysIds = <span class="hljs-keyword">this</span>._getSelectedSysIds();
        <span class="hljs-keyword">if</span> (sysIds.length == <span class="hljs-number">1</span>) {
            <span class="hljs-keyword">var</span> field = <span class="hljs-keyword">this</span>.changes.getField(sysIds[<span class="hljs-number">0</span>], <span class="hljs-keyword">this</span>.fields[<span class="hljs-number">0</span>]);
            <span class="hljs-keyword">if</span> (field &amp;&amp; !field.isOKExtension()) {
                <span class="hljs-keyword">return</span> getMessage(<span class="hljs-string">"Field does not exist for this record"</span>);
            }
        }
        <span class="hljs-keyword">return</span> getMessage(<span class="hljs-string">"Security prevents writing to this field"</span>);
    },
    <span class="hljs-attr">_checkMultipleDerivedOrExtended</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> parts = <span class="hljs-keyword">this</span>.name.split(<span class="hljs-string">'.'</span>);
        <span class="hljs-keyword">var</span> sysIds = <span class="hljs-keyword">this</span>._getSelectedSysIds();
        <span class="hljs-keyword">if</span> ((sysIds.length &gt; <span class="hljs-number">1</span>) &amp;&amp; (parts.length &gt; <span class="hljs-number">2</span>)) {
            <span class="hljs-keyword">if</span> (parts[<span class="hljs-number">1</span>].indexOf(<span class="hljs-keyword">this</span>.REF_ELEMENT_PREFIX) == <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">return</span> getMessage(<span class="hljs-string">"Only one extended field can be list edited at a time"</span>);
            }
            <span class="hljs-keyword">return</span> getMessage(<span class="hljs-string">"Only one derived field can be list edited at a time"</span>);
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    },
    <span class="hljs-attr">_createEditWindow</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> tableElement = <span class="hljs-keyword">this</span>.tableElement;
        <span class="hljs-keyword">var</span> isDoctype = <span class="hljs-built_in">document</span>.documentElement.getAttribute(<span class="hljs-string">"data-doctype"</span>) == <span class="hljs-string">"true"</span>;
        <span class="hljs-keyword">if</span> ((tableElement.isDependent() || tableElement.hasDependentChildren()) &amp;&amp; tableElement.isChoice())
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> GwtListEditDependent(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.gridEdit, <span class="hljs-keyword">this</span>.fields);
        <span class="hljs-keyword">if</span> (tableElement.isDate())
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> GwtListEditCalendar(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.gridEdit);
        <span class="hljs-keyword">if</span> (tableElement.isReference())
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> GwtListEditReference(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.gridEdit);
        <span class="hljs-keyword">if</span> (tableElement.isChoice() || tableElement.getType() == <span class="hljs-string">"workflow"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> GwtListEditSelect(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.gridEdit);
        <span class="hljs-keyword">if</span> (tableElement.getType() == <span class="hljs-string">"boolean"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> GwtListEditBoolean(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.gridEdit);
        <span class="hljs-keyword">if</span> (tableElement.getType() == <span class="hljs-string">"glide_duration"</span> || tableElement.getType() == <span class="hljs-string">"timer"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> GwtListEditDuration(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.gridEdit);
        <span class="hljs-keyword">if</span> (tableElement.getType() == <span class="hljs-string">"table_name"</span>) {
            <span class="hljs-keyword">if</span> (tableElement.getNamedAttribute(<span class="hljs-string">"update_tables_only"</span>) == <span class="hljs-string">"true"</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> GwtListEditUpdateTablename(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.gridEdit);
            }
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> GwtListEditTablename(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.gridEdit);
        }
        <span class="hljs-keyword">if</span> (tableElement.getType() == <span class="hljs-string">"glide_encrypted"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> GwtListEditEncryptedText(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.gridEdit);
        <span class="hljs-keyword">if</span> (tableElement.isMulti() &amp;&amp; tableElement.getType() != <span class="hljs-string">"journal_input"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> GwtListEditMultiText(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.gridEdit);
        <span class="hljs-keyword">if</span> (tableElement.getType() == <span class="hljs-string">"journal_input"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> GwtListEditJournal(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.gridEdit);
        <span class="hljs-keyword">if</span> (tableElement.getType() == <span class="hljs-string">"related_tags"</span>) {
            <span class="hljs-keyword">if</span> (!isDoctype)
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> GwtListEditError(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.gridEdit, getMessage(<span class="hljs-string">"In-cell editing not available, instead use the 'Assign Tag...' Context Menu to add a tag"</span>));
            <span class="hljs-keyword">else</span>
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> GwtListEditRelatedTags(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.gridEdit);
        }
        <span class="hljs-keyword">if</span> (tableElement.getType() == <span class="hljs-string">"internal_type"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> GwtListEditInternalType(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.gridEdit);
        <span class="hljs-keyword">if</span> (tableElement.getType() == <span class="hljs-string">"translated_field"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> GwtListEditTranslatedField(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.gridEdit);
        <span class="hljs-keyword">if</span> (tableElement.getType().startsWith(<span class="hljs-string">'password'</span>))
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> GwtListEditPassword(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.gridEdit);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> GwtListEditText(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.gridEdit);
    },
    <span class="hljs-attr">_beforeSetValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, name, value, displayValue</span>) </span>{},
    <span class="hljs-attr">_afterSetValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, name</span>) </span>{},
    <span class="hljs-attr">showLoading</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.loadingImage = GwtListEditTableController.showImage(
            <span class="hljs-keyword">this</span>.gridEdit.getAnchorCell(), <span class="hljs-keyword">this</span>.WAITING_IMAGE);
    },
    <span class="hljs-attr">hideLoading</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.timer) {
            clearTimeout(<span class="hljs-keyword">this</span>.timer);
            <span class="hljs-keyword">this</span>.timer = <span class="hljs-literal">null</span>;
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.loadingImage) {
            rel(<span class="hljs-keyword">this</span>.loadingImage);
            <span class="hljs-keyword">this</span>.loadingImage = <span class="hljs-literal">null</span>;
        }
    },
    <span class="hljs-attr">_initElement</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.sysId = <span class="hljs-keyword">this</span>.gridEdit.getAnchorSysId();
        <span class="hljs-keyword">this</span>.name = <span class="hljs-keyword">this</span>.gridEdit.getAnchorFqFieldName();
        <span class="hljs-keyword">var</span> parts = <span class="hljs-keyword">this</span>.name.split(<span class="hljs-string">'.'</span>);
        <span class="hljs-keyword">this</span>.table = parts[<span class="hljs-number">0</span>];
        <span class="hljs-keyword">this</span>.fieldName = parts.slice(<span class="hljs-number">1</span>).join(<span class="hljs-string">'.'</span>);
        <span class="hljs-keyword">this</span>.tableElement = TableElement.get(<span class="hljs-keyword">this</span>.name);
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.tableElement === <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">this</span>.fields = [];
        <span class="hljs-keyword">var</span> topParent = <span class="hljs-keyword">this</span>._findTopParent();
        <span class="hljs-keyword">this</span>._initFields(topParent);
        <span class="hljs-keyword">this</span>._addFieldName(<span class="hljs-keyword">this</span>.fieldName);
    },
    <span class="hljs-attr">_findTopParent</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> topParent = <span class="hljs-keyword">this</span>.name;
        <span class="hljs-keyword">var</span> visited = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Object</span>();
        <span class="hljs-keyword">var</span> name = topParent;
        <span class="hljs-keyword">while</span> (name) {
            name = <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">var</span> tableElement = TableElement.get(topParent);
            <span class="hljs-keyword">if</span> (tableElement) {
                name = tableElement.getDependent();
                <span class="hljs-keyword">if</span> (name) {
                    topParent = <span class="hljs-keyword">this</span>.table + <span class="hljs-string">"."</span> + name;
                    <span class="hljs-keyword">if</span> (visited[name])
                        <span class="hljs-keyword">return</span> topParent;
                    visited[name] = topParent;
                }
            }
        }
        <span class="hljs-keyword">return</span> topParent;
    },
    <span class="hljs-attr">_initFields</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName</span>) </span>{
        <span class="hljs-keyword">var</span> tableElement = TableElement.get(fieldName);
        <span class="hljs-keyword">if</span> (!tableElement)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">var</span> prefix = <span class="hljs-string">''</span>;
        <span class="hljs-keyword">var</span> parts = fieldName.split(<span class="hljs-string">'.'</span>);
        <span class="hljs-keyword">if</span> (parts.length &gt; <span class="hljs-number">2</span>)
            prefix = parts.slice(<span class="hljs-number">1</span>, <span class="hljs-number">-1</span>).join(<span class="hljs-string">'.'</span>) + <span class="hljs-string">'.'</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._addFieldName(prefix + tableElement.name)) {
            <span class="hljs-keyword">var</span> children = tableElement.getDependentChildren();
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> k <span class="hljs-keyword">in</span> children)
                <span class="hljs-keyword">this</span>._initFields(<span class="hljs-keyword">this</span>.table + <span class="hljs-string">"."</span> + prefix + k);
        }
    },
    <span class="hljs-attr">_addFieldName</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName</span>) </span>{
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>.fields.length; i++)
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.fields[i] == fieldName)
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">this</span>.fields.push(fieldName);
        <span class="hljs-keyword">return</span> fieldName;
    },
    <span class="hljs-attr">addRecSysId</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">recPos, callback</span>) </span>{
        <span class="hljs-keyword">var</span> sysId = <span class="hljs-keyword">this</span>.tableController.getSysIDByPos(recPos);
        <span class="hljs-keyword">if</span> (!sysId)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.changes.isDeletedRow(sysId))
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">this</span>._loadValues(callback);
    },
    <span class="hljs-attr">_loadValues</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callbackStub</span>) </span>{
        <span class="hljs-keyword">this</span>.changes.loadValues(<span class="hljs-keyword">this</span>._getSelectedSysIds(), <span class="hljs-keyword">this</span>.fields, callbackStub);
    },
    <span class="hljs-attr">_saveValues</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.savedFields.length &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">this</span>.tableController.fireCellsChanged(<span class="hljs-keyword">this</span>.savedFields);
            <span class="hljs-keyword">this</span>.savedFields = [];
        }
    },
    <span class="hljs-attr">isActive</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.valid)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.editWindow)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">return</span> !<span class="hljs-keyword">this</span>.editWindow.destroyed;
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"GwtCellEditor"</span>;
    }
});;
<span class="hljs-comment">/*! RESOURCE: /scripts/GwtListEditAjaxChangeSaver.js */</span>
<span class="hljs-keyword">var</span> GwtListEditAjaxChangeSaver = Class.create({
    <span class="hljs-attr">PROCESSOR</span>: <span class="hljs-string">'com.glide.ui_list_edit.AJAXListEdit'</span>,
    <span class="hljs-attr">WAIT_INITIAL_DELAY</span>: <span class="hljs-number">300</span>,
    <span class="hljs-attr">WAITING_IMAGE</span>: <span class="hljs-string">'images/loading_anim3.gifx'</span>,
    <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">changes, tableController, onCompletion</span>) </span>{
        <span class="hljs-keyword">this</span>.changes = changes;
        <span class="hljs-keyword">this</span>.tableController = tableController;
        <span class="hljs-keyword">this</span>.onCompletion = onCompletion;
        <span class="hljs-keyword">this</span>.changedEntries = [];
        <span class="hljs-keyword">this</span>.savingImages = [];
        <span class="hljs-keyword">this</span>.timer = <span class="hljs-literal">null</span>;
    },
    <span class="hljs-attr">save</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>._startSavingTimer();
        <span class="hljs-keyword">var</span> ajax = <span class="hljs-keyword">new</span> GlideAjax(<span class="hljs-keyword">this</span>.PROCESSOR);
        ajax.addParam(<span class="hljs-string">"sysparm_type"</span>, <span class="hljs-string">'set_value'</span>);
        ajax.addParam(<span class="hljs-string">'sysparm_table'</span>, <span class="hljs-keyword">this</span>.tableController.tableName);
        ajax.addParam(<span class="hljs-string">'sysparm_first_field'</span>, <span class="hljs-keyword">this</span>.tableController.firstField);
        ajax.addParam(<span class="hljs-string">'sysparm_omit_links'</span>, <span class="hljs-keyword">this</span>.tableController.omitLinks);
        ajax.addParam(<span class="hljs-string">'sysparm_xml'</span>, <span class="hljs-keyword">this</span>._buildXml());
        <span class="hljs-keyword">this</span>.tableController.tableElementDOM.fire(<span class="hljs-string">'glide:list_v2.edit.save'</span>, {
            <span class="hljs-attr">ajax</span>: ajax
        });
        ajax.setErrorCallback(<span class="hljs-keyword">this</span>._errorResponse.bind(<span class="hljs-keyword">this</span>));
        ajax.getXML(<span class="hljs-keyword">this</span>._saveResponse.bind(<span class="hljs-keyword">this</span>));
        <span class="hljs-keyword">this</span>.changes.clearAllModified();
        <span class="hljs-keyword">this</span>.changes.removeAll();
    },
    <span class="hljs-attr">_buildXml</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> xml = <span class="hljs-keyword">this</span>._createRecordUpdateXml();
        <span class="hljs-keyword">var</span> selector = <span class="hljs-keyword">new</span> GlideListEditor.IsModifiedRecordSelector(<span class="hljs-keyword">this</span>.changes);
        <span class="hljs-keyword">var</span> serializer = <span class="hljs-keyword">new</span> GlideListEditor.XmlSerializingReceiver(xml, xml.documentElement, selector);
        <span class="hljs-keyword">var</span> capture = <span class="hljs-keyword">new</span> GwtListEditAjaxChangeSaver.ChangeCaptureReceiver();
        <span class="hljs-keyword">var</span> receiver = <span class="hljs-keyword">new</span> GwtListEditorPendingChanges.ComposableChangeReceiver();
        receiver.addReceiver(serializer);
        receiver.addReceiver(capture);
        <span class="hljs-keyword">this</span>.changes.exportChanges(receiver);
        <span class="hljs-keyword">this</span>.changedEntries = capture.changedEntries;
        <span class="hljs-keyword">return</span> getXMLString(xml);
    },
    <span class="hljs-attr">_createRecordUpdateXml</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> xml = loadXML(<span class="hljs-string">"&lt;record_update/&gt;"</span>);
        <span class="hljs-keyword">this</span>.tableController.exportXml(xml.documentElement);
        <span class="hljs-keyword">return</span> xml;
    },
    <span class="hljs-attr">_saveResponse</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) </span>{
        <span class="hljs-keyword">this</span>._hideSaving();
        <span class="hljs-keyword">if</span> (!response || !response.responseXML) {
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.onCompletion)
                <span class="hljs-keyword">this</span>.onCompletion();
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">var</span> savedSysIds = [];
        <span class="hljs-keyword">var</span> xml = response.responseXML;
        <span class="hljs-keyword">var</span> items = xml.getElementsByTagName(<span class="hljs-string">"item"</span>);
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; items.length; i++) {
            <span class="hljs-keyword">var</span> item = items[i];
            <span class="hljs-keyword">var</span> sysId = item.getAttribute(<span class="hljs-string">"sys_id"</span>);
            <span class="hljs-keyword">if</span> (savedSysIds.indexOf(sysId) &lt; <span class="hljs-number">0</span>)
                savedSysIds.push(sysId);
            <span class="hljs-keyword">var</span> fqField = item.getAttribute(<span class="hljs-string">"fqField"</span>);
            <span class="hljs-keyword">var</span> data = item.firstChild;
            <span class="hljs-keyword">if</span> (!data)
                <span class="hljs-keyword">continue</span>
            <span class="hljs-keyword">var</span> cell = <span class="hljs-keyword">this</span>.tableController.getFqField(sysId, fqField);
            <span class="hljs-keyword">if</span> (!cell)
                <span class="hljs-keyword">continue</span>;
            GlideList2.updateCellContents(cell, data);
            <span class="hljs-keyword">var</span> n = <span class="hljs-keyword">new</span> GlideUINotification({
                <span class="hljs-attr">type</span>: <span class="hljs-string">'action'</span>,
                <span class="hljs-attr">attributes</span>: {
                    <span class="hljs-attr">table</span>: <span class="hljs-keyword">this</span>.tableController.tableName,
                    <span class="hljs-attr">sys_id</span>: sysId,
                    <span class="hljs-attr">action</span>: <span class="hljs-string">'list_update'</span>
                }
            });
            GlideUI.get().fire(n);
        }
        <span class="hljs-keyword">if</span> (savedSysIds.length &gt; <span class="hljs-number">0</span>)
            <span class="hljs-keyword">this</span>._fireChangesSaved(savedSysIds);
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.onCompletion)
            <span class="hljs-keyword">this</span>.onCompletion();
    },
    <span class="hljs-attr">_errorResponse</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>._hideSaving();
    },
    <span class="hljs-attr">_fireChangesSaved</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">savedSysIds</span>) </span>{
        <span class="hljs-keyword">var</span> info = {
            <span class="hljs-attr">listId</span>: <span class="hljs-keyword">this</span>.tableController.listID,
            <span class="hljs-attr">saves</span>: savedSysIds
        };
        <span class="hljs-keyword">this</span>.tableController.fire(<span class="hljs-string">'glide:list_v2.edit.changes_saved'</span>, info);
    },
    <span class="hljs-attr">_startSavingTimer</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.timer = setTimeout(<span class="hljs-keyword">this</span>._showSaving.bind(<span class="hljs-keyword">this</span>), <span class="hljs-keyword">this</span>.WAIT_INITIAL_DELAY);
    },
    <span class="hljs-attr">_hideSaving</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.timer) {
            clearTimeout(<span class="hljs-keyword">this</span>.timer);
            <span class="hljs-keyword">this</span>.timer = <span class="hljs-literal">null</span>;
        }
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>.savingImages.length; i++)
            rel(<span class="hljs-keyword">this</span>.savingImages[i]);
        <span class="hljs-keyword">this</span>.savingImages = [];
    },
    <span class="hljs-attr">_showSaving</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>.changedEntries.length; i++) {
            <span class="hljs-keyword">var</span> sysId = <span class="hljs-keyword">this</span>.changedEntries[i][<span class="hljs-number">0</span>];
            <span class="hljs-keyword">var</span> field = <span class="hljs-keyword">this</span>.changedEntries[i][<span class="hljs-number">1</span>];
            <span class="hljs-keyword">var</span> element = <span class="hljs-keyword">this</span>.tableController.getCell(sysId, field);
            <span class="hljs-keyword">if</span> (element)
                <span class="hljs-keyword">this</span>._showImage(element);
        }
    },
    <span class="hljs-attr">_showImage</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>) </span>{
        <span class="hljs-keyword">var</span> img = GwtListEditTableController.showImage(element, <span class="hljs-keyword">this</span>.WAITING_IMAGE);
        <span class="hljs-keyword">this</span>.savingImages.push(img);
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">'GwtListEditAjaxChangeSaver'</span>;
    }
});
GwtListEditAjaxChangeSaver.ChangeCaptureReceiver = Class.create(
    GwtListEditorPendingChanges.ChangeReceiver, {
        <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$super</span>) </span>{
            $<span class="hljs-keyword">super</span>();
            <span class="hljs-keyword">this</span>.changedEntries = [];
        },
        <span class="hljs-attr">changedField</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysID, field</span>) </span>{
            <span class="hljs-keyword">var</span> entry = [sysID, field.getName()];
            <span class="hljs-keyword">this</span>.changedEntries.push(entry);
        },
        <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-string">'GwtListEditAjaxChangeSaver.ChangeCaptureReceiver'</span>;
        }
    });;
<span class="hljs-comment">/*! RESOURCE: /scripts/GwtListEditAjaxValueLoader.js */</span>
<span class="hljs-keyword">var</span> GwtListEditAjaxValueLoader = Class.create({
    <span class="hljs-attr">_iso</span>: <span class="hljs-keyword">new</span> ISO9075(),
    <span class="hljs-attr">PROCESSOR</span>: <span class="hljs-string">'com.glide.ui_list_edit.AJAXListEdit'</span>,
    <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">changes, tableController</span>) </span>{
        <span class="hljs-keyword">this</span>.changes = changes;
        <span class="hljs-keyword">this</span>.tableController = tableController;
        <span class="hljs-keyword">this</span>._clearErrorMsg();
        <span class="hljs-keyword">this</span>.generatedSysId = <span class="hljs-literal">null</span>;
    },
    <span class="hljs-attr">loadValues</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysIds, fields, callback</span>) </span>{
        <span class="hljs-keyword">var</span> ajax = <span class="hljs-keyword">new</span> GlideAjax(<span class="hljs-keyword">this</span>.PROCESSOR);
        ajax.addParam(<span class="hljs-string">'sysparm_type'</span>, <span class="hljs-string">'get_value'</span>);
        ajax.addParam(<span class="hljs-string">'sysparm_table'</span>, <span class="hljs-keyword">this</span>.tableController.tableName);
        <span class="hljs-keyword">if</span> ((sysIds.length == <span class="hljs-number">1</span>) &amp;&amp; (sysIds[<span class="hljs-number">0</span>] == <span class="hljs-string">"-1"</span>))
            ajax.addParam(<span class="hljs-string">"sysparm_default_query"</span>, <span class="hljs-keyword">this</span>.tableController.query);
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._buildIdList(ajax, sysIds, fields)) {
            <span class="hljs-keyword">this</span>._waitForAjax(ajax, callback, <span class="hljs-number">5000</span>);
        } <span class="hljs-keyword">else</span>
            callback();
    },
    <span class="hljs-attr">loadDefaults</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) </span>{
        <span class="hljs-keyword">this</span>.changes.clearDefaults();
        <span class="hljs-keyword">this</span>.loadValues([<span class="hljs-string">"-1"</span>], <span class="hljs-keyword">this</span>.tableController.getFields(), callback);
    },
    <span class="hljs-attr">loadTable</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) </span>{
        <span class="hljs-keyword">var</span> ajax = <span class="hljs-keyword">new</span> GlideAjax(<span class="hljs-keyword">this</span>.PROCESSOR);
        ajax.addParam(<span class="hljs-string">'sysparm_type'</span>, <span class="hljs-string">'get_value'</span>);
        ajax.addParam(<span class="hljs-string">'sysparm_table'</span>, <span class="hljs-keyword">this</span>.tableController.tableName);
        ajax.addParam(<span class="hljs-string">'sysparm_query'</span>, <span class="hljs-keyword">this</span>.tableController.query);
        <span class="hljs-keyword">var</span> fields = <span class="hljs-keyword">this</span>.tableController.getFields();
        ajax.addParam(<span class="hljs-string">"sysparm_fields"</span>, fields.join(<span class="hljs-string">','</span>));
        <span class="hljs-keyword">this</span>._waitForAjax(ajax, callback, <span class="hljs-number">5000</span>);
    },
    <span class="hljs-attr">getErrorMsg</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.errorMsg;
    },
    <span class="hljs-attr">_buildIdList</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ajax, sysIds, fields</span>) </span>{
        <span class="hljs-keyword">var</span> needFields = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; sysIds.length; i++) {
            <span class="hljs-keyword">var</span> id = sysIds[i];
            <span class="hljs-keyword">var</span> fieldList = [];
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>; j &lt; fields.length; j++) {
                <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.changes.getField(id, fields[j]))
                    fieldList.push(fields[j]);
            }
            <span class="hljs-keyword">if</span> (fieldList.length &gt; <span class="hljs-number">0</span>) {
                needFields = <span class="hljs-literal">true</span>;
                ajax.addParam(<span class="hljs-string">'sysparm_sys_id_'</span> + id, fieldList.join(<span class="hljs-string">','</span>));
            }
        }
        <span class="hljs-keyword">return</span> needFields;
    },
    <span class="hljs-attr">_waitForAjax</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ajax, callback, timeout</span>) </span>{
        <span class="hljs-keyword">if</span> (timeout &lt; <span class="hljs-number">0</span>)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.ajax) {
            <span class="hljs-keyword">this</span>.ajax = <span class="hljs-literal">true</span>;
            ajax.getXML(<span class="hljs-keyword">this</span>._getValuesResponse.bind(<span class="hljs-keyword">this</span>, callback));
        } <span class="hljs-keyword">else</span> {
            setTimeout(<span class="hljs-keyword">this</span>._waitForAjax.bind(<span class="hljs-keyword">this</span>, ajax, callback), <span class="hljs-number">10</span>, timeout - <span class="hljs-number">10</span>);
        }
    },
    <span class="hljs-attr">_getValuesResponse</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback, response</span>) </span>{
        <span class="hljs-keyword">this</span>.ajax = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">if</span> (!response || !response.responseXML) {
            <span class="hljs-keyword">this</span>.errorMsg = getMessage(<span class="hljs-string">"No response from server - try again later"</span>);
            callback();
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">var</span> xml = response.responseXML;
        <span class="hljs-keyword">var</span> items = xml.getElementsByTagName(<span class="hljs-string">"item"</span>);
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; items.length; i++) {
            <span class="hljs-keyword">var</span> item = items[i];
            <span class="hljs-keyword">var</span> sysId = item.getAttribute(<span class="hljs-string">"sys_id"</span>);
            <span class="hljs-keyword">this</span>.generatedSysId = item.getAttribute(<span class="hljs-string">"new_sys_id"</span>);
            <span class="hljs-keyword">var</span> fieldList = item.getAttribute(<span class="hljs-string">"field_list"</span>);
            <span class="hljs-keyword">var</span> fields;
            <span class="hljs-keyword">if</span> (fieldList)
                fields = fieldList.split(<span class="hljs-string">','</span>);
            <span class="hljs-keyword">else</span>
                fields = [];
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>; j &lt; fields.length; j++) {
                <span class="hljs-keyword">var</span> n = fields[j];
                <span class="hljs-keyword">var</span> fieldItem = <span class="hljs-keyword">this</span>._getXMLFieldItem(item, n);
                <span class="hljs-keyword">if</span> (!fieldItem)
                    <span class="hljs-keyword">continue</span>;
                <span class="hljs-keyword">var</span> canWrite = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">if</span> (fieldItem.getAttribute(<span class="hljs-string">"can_write"</span>) == <span class="hljs-string">"false"</span>)
                    canWrite = <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">var</span> mandatory = <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">if</span> (fieldItem.getAttribute(<span class="hljs-string">"mandatory"</span>) == <span class="hljs-string">"true"</span>)
                    mandatory = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">var</span> okExtension = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">if</span> (fieldItem.getAttribute(<span class="hljs-string">"ok_extension"</span>) == <span class="hljs-string">"false"</span>)
                    okExtension = <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.changes.getField(sysId, n)) {
                    <span class="hljs-keyword">var</span> f = <span class="hljs-keyword">this</span>._addField(sysId, n);
                    f.setInitialValues(<span class="hljs-keyword">this</span>._getXMLValue(fieldItem, <span class="hljs-string">"value"</span>), <span class="hljs-keyword">this</span>._getXMLValue(fieldItem, <span class="hljs-string">"displayvalue"</span>));
                    f.setWritable(canWrite);
                    f.setMandatory(mandatory);
                    f.setOKExtension(okExtension);
                    f.setLabel(fieldItem.getAttribute(<span class="hljs-string">"label"</span>));
                }
            }
        }
        <span class="hljs-keyword">this</span>._clearErrorMsg();
        callback();
    },
    <span class="hljs-attr">_getXMLFieldItem</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">parent, n</span>) </span>{
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; parent.childNodes.length; i++) {
            <span class="hljs-keyword">var</span> item = parent.childNodes[i];
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._iso.decode(item.nodeName.toLowerCase()) == n)
                <span class="hljs-keyword">return</span> item;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    },
    <span class="hljs-attr">_getXMLValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">item, type</span>) </span>{
        <span class="hljs-keyword">var</span> value = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">var</span> e = item.getElementsByTagName(type);
        <span class="hljs-keyword">if</span> (e &amp;&amp; e.length &gt; <span class="hljs-number">0</span>)
            value = getTextValue(e[<span class="hljs-number">0</span>]);
        <span class="hljs-keyword">if</span> (!value)
            value = <span class="hljs-string">""</span>;
        <span class="hljs-keyword">return</span> value;
    },
    <span class="hljs-attr">_addField</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, field</span>) </span>{
        <span class="hljs-keyword">var</span> record = <span class="hljs-keyword">this</span>.changes.get(sysId);
        <span class="hljs-keyword">if</span> (!record)
            record = <span class="hljs-keyword">this</span>.changes.addRecord(sysId)
        <span class="hljs-keyword">return</span> record.addField(field);
    },
    <span class="hljs-attr">_clearErrorMsg</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.errorMsg = <span class="hljs-string">""</span>;
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">'GwtListEditAjaxValueLoader'</span>;
    }
});;
<span class="hljs-comment">/*! RESOURCE: /scripts/GwtListEditRecordDecorations.js */</span>
<span class="hljs-keyword">var</span> GwtListEditRecordDecorations = Class.create({
    <span class="hljs-attr">MSGS</span>: [
        <span class="hljs-string">'Insert a new row...'</span>,
        <span class="hljs-string">'Mark record for List Action'</span>,
        <span class="hljs-string">'View'</span>,
        <span class="hljs-string">'Save'</span>,
        <span class="hljs-string">'Delete'</span>,
        <span class="hljs-string">'Display / hide hierarchical lists'</span>
    ],
    <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">changes, tableController</span>) </span>{
        <span class="hljs-keyword">this</span>.changes = changes;
        <span class="hljs-keyword">this</span>.tableController = tableController;
        <span class="hljs-keyword">this</span>.msgs = getMessages(<span class="hljs-keyword">this</span>.MSGS);
        <span class="hljs-keyword">this</span>.updateTable();
    },
    <span class="hljs-attr">updateTable</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.currDecor = {};
        <span class="hljs-keyword">this</span>.viewDecor = {};
        <span class="hljs-keyword">this</span>.pendingDecor = {};
        <span class="hljs-keyword">this</span>.editDecor = {};
        <span class="hljs-keyword">this</span>.tableController.observe(<span class="hljs-string">'glide:list_v2.edit.changes_saved'</span>, <span class="hljs-keyword">this</span>._handleChangesSaved.bind(<span class="hljs-keyword">this</span>));
        <span class="hljs-keyword">this</span>.tableController.observe(<span class="hljs-string">'glide:list_v2.edit.rows_deleted'</span>, <span class="hljs-keyword">this</span>._handleRowsDeleted.bind(<span class="hljs-keyword">this</span>));
        <span class="hljs-keyword">this</span>.tableController.observe(<span class="hljs-string">'glide:list_v2.edit.changes_deferred'</span>, <span class="hljs-keyword">this</span>._handleChangesDeferred.bind(<span class="hljs-keyword">this</span>));
    },
    <span class="hljs-attr">showView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId</span>) </span>{
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.tableController.hasActions)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">var</span> currDecor = <span class="hljs-keyword">this</span>._getCurrDecor(sysId);
        <span class="hljs-keyword">var</span> showDecor = <span class="hljs-keyword">this</span>._getViewDecor(sysId);
        <span class="hljs-keyword">this</span>._displayDecor(sysId, showDecor, currDecor);
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isDoctype())
            <span class="hljs-keyword">this</span>._adjustView();
    },
    <span class="hljs-attr">_adjustView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> table = gel(<span class="hljs-keyword">this</span>.tableController.listID + <span class="hljs-string">'_table'</span>);
        <span class="hljs-keyword">var</span> popup = $j(table).find(<span class="hljs-string">'td.list_decoration_cell a.list_popup'</span>).last();
        <span class="hljs-keyword">var</span> row = popup.closest(<span class="hljs-string">'tr'</span>);
        popup.detach();
        row.children(<span class="hljs-string">':eq(1)'</span>).empty().append(popup);
    },
    <span class="hljs-attr">showPending</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId</span>) </span>{
        <span class="hljs-keyword">var</span> currDecor = <span class="hljs-keyword">this</span>._getCurrDecor(sysId);
        <span class="hljs-keyword">var</span> showDecor = <span class="hljs-keyword">this</span>._getPendingDecor(sysId);
        <span class="hljs-keyword">this</span>._displayDecor(sysId, showDecor, currDecor);
    },
    <span class="hljs-attr">showEdit</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId</span>) </span>{
        <span class="hljs-keyword">var</span> currDecor = <span class="hljs-keyword">this</span>._getCurrDecor(sysId);
        <span class="hljs-keyword">var</span> showDecor = <span class="hljs-keyword">this</span>._getEditDecor(sysId);
        <span class="hljs-keyword">this</span>._displayDecor(sysId, showDecor, currDecor);
    },
    <span class="hljs-attr">_displayDecor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, showDecor, currDecor</span>) </span>{
        <span class="hljs-keyword">if</span> (!showDecor)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">if</span> (currDecor &amp;&amp; (currDecor !== showDecor))
            currDecor.hide();
        <span class="hljs-keyword">this</span>.currDecor[sysId] = showDecor;
        showDecor.show();
    },
    <span class="hljs-attr">resetSaveIcons</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> thisDecor = <span class="hljs-keyword">this</span>;
        <span class="hljs-keyword">this</span>.tableController.tableElementDOM.select(<span class="hljs-string">"tr.list_row"</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">elem</span>) </span>{
            <span class="hljs-keyword">var</span> sys_id = elem.getAttribute(<span class="hljs-string">"sys_id"</span>);
            <span class="hljs-keyword">if</span> (sys_id &amp;&amp; (elem.hasClassName(<span class="hljs-string">"list_add"</span>) || elem.down(<span class="hljs-string">".list_edit_dirty"</span>)) &amp;&amp; !elem.down(<span class="hljs-string">"td.list_edit_new_row"</span>))
                thisDecor.showPending(sys_id);
        });
    },
    <span class="hljs-attr">resetPendingIcons</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> thisDecor = <span class="hljs-keyword">this</span>;
        <span class="hljs-keyword">this</span>.tableController.tableElementDOM.select(<span class="hljs-string">"tr.list_row"</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">elem</span>) </span>{
            <span class="hljs-keyword">var</span> sys_id = elem.getAttribute(<span class="hljs-string">"sys_id"</span>);
            <span class="hljs-keyword">if</span> (sys_id &amp;&amp; (elem.hasClassName(<span class="hljs-string">"list_add"</span>) || elem.down(<span class="hljs-string">".list_edit_dirty"</span>)) &amp;&amp; !elem.down(<span class="hljs-string">"td.list_edit_new_row"</span>)) {
                <span class="hljs-keyword">var</span> cell = thisDecor.tableController.getDecorationCell(sys_id);
                <span class="hljs-keyword">if</span> (cell) {
                    <span class="hljs-keyword">var</span> existingImg = cell.select(<span class="hljs-string">"img.list_popup"</span>);
                    <span class="hljs-keyword">if</span> (existingImg.length &gt; <span class="hljs-number">0</span>)
                        existingImg[<span class="hljs-number">0</span>].parentNode.removeChild(existingImg[<span class="hljs-number">0</span>]);
                }
                thisDecor.showPending(sys_id);
            }
        });
    },
    <span class="hljs-attr">_getCurrDecor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId</span>) </span>{
        <span class="hljs-keyword">var</span> decor = <span class="hljs-keyword">this</span>.currDecor[sysId];
        <span class="hljs-keyword">if</span> (decor)
            <span class="hljs-keyword">return</span> decor;
        <span class="hljs-keyword">var</span> cell = <span class="hljs-keyword">this</span>.tableController.getDecorationCell(sysId);
        decor = <span class="hljs-keyword">this</span>._getServerViewDecorations(sysId, cell);
        <span class="hljs-keyword">if</span> (decor) {
            <span class="hljs-keyword">this</span>.viewDecor[sysId] = decor;
            <span class="hljs-keyword">this</span>.currDecor[sysId] = decor;
            <span class="hljs-keyword">return</span> decor;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    },
    <span class="hljs-attr">_getViewDecor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId</span>) </span>{
        <span class="hljs-keyword">var</span> decor = <span class="hljs-keyword">this</span>.viewDecor[sysId];
        <span class="hljs-keyword">if</span> (decor)
            <span class="hljs-keyword">return</span> decor;
        <span class="hljs-keyword">var</span> cell = <span class="hljs-keyword">this</span>.tableController.getDecorationCell(sysId);
        <span class="hljs-keyword">if</span> (!cell)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        decor = <span class="hljs-keyword">this</span>._getServerViewDecorations(sysId, cell);
        <span class="hljs-keyword">if</span> (decor) {
            <span class="hljs-keyword">this</span>.viewDecor[sysId] = decor;
            <span class="hljs-keyword">return</span> decor;
        }
        decor = <span class="hljs-keyword">this</span>._buildDecorationSpan(sysId, cell, <span class="hljs-string">'view'</span>);
        <span class="hljs-keyword">this</span>._addViewDecorations(sysId, decor);
        <span class="hljs-keyword">this</span>.viewDecor[sysId] = decor;
        <span class="hljs-keyword">return</span> decor;
    },
    <span class="hljs-attr">_getPendingDecor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId</span>) </span>{
        <span class="hljs-keyword">var</span> decor = <span class="hljs-keyword">this</span>.pendingDecor[sysId];
        <span class="hljs-keyword">if</span> (decor)
            <span class="hljs-keyword">return</span> decor;
        <span class="hljs-keyword">var</span> cell = <span class="hljs-keyword">this</span>.tableController.getDecorationCell(sysId);
        cell = $(cell);
        <span class="hljs-keyword">if</span> (cell.down(<span class="hljs-string">"[icon_type='save']"</span>))
            <span class="hljs-keyword">return</span>;
        decor = <span class="hljs-keyword">this</span>._buildDecorationSpan(sysId, cell, <span class="hljs-string">'unsaved'</span>);
        <span class="hljs-keyword">var</span> existingImg = cell.select(<span class="hljs-string">"img.list_popup"</span>);
        <span class="hljs-keyword">this</span>._addPendingDecorations(sysId, decor, existingImg);
        <span class="hljs-keyword">this</span>.pendingDecor[sysId] = decor;
        <span class="hljs-keyword">return</span> decor;
    },
    <span class="hljs-attr">_getEditDecor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId</span>) </span>{
        <span class="hljs-keyword">var</span> decor = <span class="hljs-keyword">this</span>.editDecor[sysId];
        <span class="hljs-keyword">if</span> (decor)
            <span class="hljs-keyword">return</span> decor;
        <span class="hljs-keyword">var</span> cell = <span class="hljs-keyword">this</span>.tableController.getDecorationCell(sysId);
        decor = <span class="hljs-keyword">this</span>._buildDecorationSpan(sysId, cell, <span class="hljs-string">'edit'</span>);
        <span class="hljs-keyword">this</span>._addEditDecorations(sysId, decor);
        <span class="hljs-keyword">this</span>.editDecor[sysId] = decor;
        <span class="hljs-keyword">return</span> decor;
    },
    <span class="hljs-attr">_getServerViewDecorations</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, cell</span>) </span>{
        <span class="hljs-keyword">if</span> (!cell)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">var</span> decor = cell.firstChild;
        <span class="hljs-keyword">if</span> (!decor)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">Object</span>.isElement(decor))
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-string">"SPAN"</span> !== decor.tagName)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">if</span> (decor.id)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">return</span> $(decor);
    },
    <span class="hljs-attr">_buildDecorationSpan</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, cell, label</span>) </span>{
        <span class="hljs-keyword">var</span> decor = $(<span class="hljs-keyword">new</span> Element(<span class="hljs-string">"span"</span>, {
            <span class="hljs-string">'id'</span>: sysId + <span class="hljs-string">'_'</span> + label,
            <span class="hljs-string">'class'</span>: <span class="hljs-string">'list_decoration'</span>
        }));
        decor.hide();
        cell.appendChild(decor);
        <span class="hljs-keyword">return</span> decor;
    },
    <span class="hljs-attr">_addEditDecorations</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, span</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.tableController.isFormUI()) {
            <span class="hljs-keyword">this</span>._addEmbeddedEditIcon(span);
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">this</span>._addEditIcon(span);
    },
    <span class="hljs-attr">_addViewDecorations</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, span</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.tableController.isFormUI()) {
            <span class="hljs-keyword">this</span>._addDeleteIcon(span, sysId);
            <span class="hljs-keyword">this</span>._addSpacerIcon(span);
            <span class="hljs-keyword">this</span>._addEmbeddedPopUp(span, sysId);
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">this</span>._addCheckBox(span, sysId);
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.tableController.hasShowableHierarchy())
            <span class="hljs-keyword">this</span>._addHierarchyIcon(span, sysId);
        <span class="hljs-keyword">this</span>._addPopUp(span, sysId);
    },
    <span class="hljs-attr">_addPendingDecorations</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, span, existingImg</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.tableController.isFormUI()) {
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isDoctype() &amp;&amp; <span class="hljs-keyword">this</span>.changes.isUpdatedRow(sysId))
                <span class="hljs-keyword">return</span>;
            <span class="hljs-keyword">this</span>._addDeleteIcon(span, sysId);
            <span class="hljs-keyword">this</span>._addSpacerIcon(span);
            <span class="hljs-keyword">if</span> (existingImg &amp;&amp; existingImg.length &gt; <span class="hljs-number">0</span> &amp;&amp; existingImg[<span class="hljs-number">0</span>].parentElement)
                <span class="hljs-keyword">this</span>._addEmbeddedPopupIcon(span, sysId, existingImg[<span class="hljs-number">0</span>].parentElement);
            <span class="hljs-keyword">else</span>
                <span class="hljs-keyword">this</span>._addNewEmbeddedListIcon(span, sysId);
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.changes.isUpdatedRow(sysId)) {
            <span class="hljs-keyword">this</span>._addCheckBox(span, sysId);
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.tableController.hasShowableHierarchy())
                <span class="hljs-keyword">this</span>._addHierarchyIcon(span, sysId);
            <span class="hljs-keyword">this</span>._addSavePopUp(span, sysId);
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">this</span>._addDeleteIcon(span, sysId);
        <span class="hljs-keyword">this</span>._addSaveIcon(span, sysId);
    },
    <span class="hljs-attr">_handleRowsDeleted</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">this</span>.sortZebra();
    },
    <span class="hljs-attr">_addEditIcon</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">span</span>) </span>{
        <span class="hljs-keyword">var</span> o = {
            <span class="hljs-attr">title</span>: <span class="hljs-keyword">this</span>.msgs[<span class="hljs-string">'Insert a new row...'</span>]
        };
        span.insert(<span class="hljs-keyword">this</span>._getTemplate(<span class="hljs-string">"EDIT_ICON"</span>).evaluate(o));
    },
    <span class="hljs-attr">_addCheckBox</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">span, sysId</span>) </span>{
        <span class="hljs-keyword">var</span> o = {
            <span class="hljs-attr">row_id</span>: sysId,
            <span class="hljs-attr">listId</span>: <span class="hljs-keyword">this</span>.tableController.listID,
            <span class="hljs-attr">title</span>: <span class="hljs-keyword">this</span>.msgs[<span class="hljs-string">'Mark record for List Action'</span>]
        };
        span.insert(<span class="hljs-keyword">this</span>._getTemplate(<span class="hljs-string">"LIST_CHECKBOX_ICON"</span>).evaluate(o));
    },
    <span class="hljs-attr">_addPopUp</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">span, sysId</span>) </span>{
        <span class="hljs-keyword">var</span> o = {
            <span class="hljs-attr">row_id</span>: sysId,
            <span class="hljs-attr">table</span>: <span class="hljs-keyword">this</span>.tableController.tableName,
            <span class="hljs-attr">title</span>: <span class="hljs-keyword">this</span>.msgs[<span class="hljs-string">'View'</span>]
        };
        span.insert(<span class="hljs-keyword">this</span>._getTemplate(<span class="hljs-string">"POPUP_ICON"</span>).evaluate(o));
    },
    <span class="hljs-attr">_addSavePopUp</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">span, sysId</span>) </span>{
        <span class="hljs-keyword">var</span> o = {
            <span class="hljs-attr">row_id</span>: sysId,
            <span class="hljs-attr">table</span>: <span class="hljs-keyword">this</span>.tableController.tableName,
            <span class="hljs-attr">title</span>: <span class="hljs-keyword">this</span>.msgs[<span class="hljs-string">'Save'</span>]
        };
        span.insert(<span class="hljs-keyword">this</span>._getTemplate(<span class="hljs-string">"SAVE_POPUP_ICON"</span>).evaluate(o));
    },
    <span class="hljs-attr">_addDeleteIcon</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">span, sysId</span>) </span>{
        <span class="hljs-keyword">var</span> o = {
            <span class="hljs-attr">row_id</span>: sysId,
            <span class="hljs-attr">title</span>: <span class="hljs-keyword">this</span>.msgs[<span class="hljs-string">'Delete'</span>],
            <span class="hljs-attr">listID</span>: <span class="hljs-keyword">this</span>.tableController.listID,
            <span class="hljs-attr">dataType</span>: <span class="hljs-string">"list2_delete_row"</span>
        };
        span.insert(<span class="hljs-keyword">this</span>._getTemplate(<span class="hljs-string">"DELETE_ICON"</span>).evaluate(o));
    },
    <span class="hljs-attr">_addEmbeddedEditIcon</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">span</span>) </span>{
        <span class="hljs-keyword">var</span> o = {
            <span class="hljs-attr">title</span>: <span class="hljs-keyword">this</span>.msgs[<span class="hljs-string">'Insert a new row...'</span>]
        };
        span.insert(<span class="hljs-keyword">this</span>._getTemplate(<span class="hljs-string">"EMBEDDED_EDIT_ICON"</span>).evaluate(o));
    },
    <span class="hljs-attr">_addEmbeddedPopUp</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">span, sysId</span>) </span>{
        <span class="hljs-keyword">var</span> o = {
            <span class="hljs-attr">row_id</span>: sysId,
            <span class="hljs-attr">table</span>: <span class="hljs-keyword">this</span>.tableController.tableName,
            <span class="hljs-attr">title</span>: <span class="hljs-keyword">this</span>.msgs[<span class="hljs-string">'View'</span>]
        };
        span.insert(<span class="hljs-keyword">this</span>._getTemplate(<span class="hljs-string">"EMBEDDED_POPUP_ICON"</span>).evaluate(o));
    },
    <span class="hljs-attr">_addSaveIcon</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">span, sysId</span>) </span>{
        <span class="hljs-keyword">var</span> o = {
            <span class="hljs-attr">title</span>: <span class="hljs-keyword">this</span>.msgs[<span class="hljs-string">'Save'</span>]
        };
        span.insert(<span class="hljs-keyword">this</span>._getTemplate(<span class="hljs-string">"SAVE_ICON"</span>).evaluate(o));
    },
    <span class="hljs-attr">_addEmbeddedPopupIcon</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">span, sysId, elem</span>) </span>{
        <span class="hljs-keyword">var</span> o = {
            <span class="hljs-attr">row_id</span>: sysId,
            <span class="hljs-attr">table</span>: <span class="hljs-keyword">this</span>.tableController.tableName,
            <span class="hljs-attr">title</span>: <span class="hljs-keyword">this</span>.msgs[<span class="hljs-string">'Record Modified'</span>],
            <span class="hljs-attr">href</span>: elem.href,
            <span class="hljs-attr">dataType</span>: <span class="hljs-string">"list2_popup"</span>,
            <span class="hljs-attr">listID</span>: <span class="hljs-keyword">this</span>.tableController.listID
        };
        span.insert(<span class="hljs-keyword">this</span>._getTemplate(<span class="hljs-string">"EMBEDDED_MODIFIED_POPUP_ICON"</span>).evaluate(o));
    },
    <span class="hljs-attr">_addNewEmbeddedListIcon</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">span, sysId</span>) </span>{
        <span class="hljs-keyword">var</span> o = {
            <span class="hljs-attr">title</span>: <span class="hljs-keyword">this</span>.msgs[<span class="hljs-string">'New Record'</span>]
        };
        span.insert(<span class="hljs-keyword">this</span>._getTemplate(<span class="hljs-string">"EMBEDDED_LIST_NEW_ICON"</span>).evaluate(o));
    },
    <span class="hljs-attr">_addHierarchyIcon</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">span, sysId</span>) </span>{
        <span class="hljs-keyword">var</span> o = {
            <span class="hljs-attr">title</span>: <span class="hljs-keyword">this</span>.msgs[<span class="hljs-string">'Display / hide hierarchical lists'</span>]
        };
        span.insert(<span class="hljs-keyword">this</span>._getTemplate(<span class="hljs-string">"HIERARCHY_ICON"</span>).evaluate(o));
    },
    <span class="hljs-attr">_addSpacerIcon</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        e.insert(<span class="hljs-keyword">this</span>._getTemplate(<span class="hljs-string">"SPACER_ICON"</span>));
    },
    <span class="hljs-attr">_handleChangesSaved</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">if</span> (evt.memo.listId !== <span class="hljs-keyword">this</span>.tableController.listID)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">var</span> saves = evt.memo.saves;
        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; saves.length; i++) {
            <span class="hljs-keyword">var</span> saveId = saves[i];
            <span class="hljs-keyword">this</span>.showView(saveId);
        }
        <span class="hljs-keyword">this</span>.sortZebra();
    },
    <span class="hljs-attr">_handleChangesDeferred</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">if</span> (evt.memo.listId !== <span class="hljs-keyword">this</span>.tableController.listID)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">var</span> defers = evt.memo.defers;
        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; defers.length; i++) {
            <span class="hljs-keyword">var</span> deferId = defers[i];
            <span class="hljs-keyword">this</span>.showPending(deferId);
        }
        <span class="hljs-keyword">this</span>.sortZebra();
    },
    <span class="hljs-attr">sortZebra</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> flip = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">this</span>.tableController.tableElementDOM.select(<span class="hljs-string">"tr.list_row"</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">row</span>) </span>{
            <span class="hljs-keyword">if</span> (flip) {
                <span class="hljs-keyword">if</span> (row.hasClassName(<span class="hljs-string">"list_odd"</span>))
                    row.removeClassName(<span class="hljs-string">"list_odd"</span>);
                <span class="hljs-keyword">if</span> (!row.hasClassName(<span class="hljs-string">"list_even"</span>))
                    row.addClassName(<span class="hljs-string">"list_even"</span>);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">if</span> (row.hasClassName(<span class="hljs-string">"list_even"</span>))
                    row.removeClassName(<span class="hljs-string">"list_even"</span>);
                <span class="hljs-keyword">if</span> (!row.hasClassName(<span class="hljs-string">"list_odd"</span>))
                    row.addClassName(<span class="hljs-string">"list_odd"</span>);
            }
            flip = !flip;
        });
    },
    <span class="hljs-attr">_getTemplate</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name</span>) </span>{
        <span class="hljs-keyword">var</span> doctypeTempl = GwtListEditRecordDecorations.Templates[name + <span class="hljs-string">'_DOCTYPE'</span>];
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isDoctype() &amp;&amp; doctypeTempl)
            <span class="hljs-keyword">return</span> doctypeTempl;
        <span class="hljs-keyword">return</span> GwtListEditRecordDecorations.Templates[name];
    },
    <span class="hljs-attr">_isDoctype</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">document</span>.documentElement.getAttribute(<span class="hljs-string">'data-doctype'</span>);
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">'GwtListEditRecordDecorations'</span>;
    }
});
GwtListEditRecordDecorations.Templates = {
    <span class="hljs-attr">DELETE_ICON</span>: <span class="hljs-keyword">new</span> Template(
        <span class="hljs-string">'&lt;img data-type="#{dataType}" data-list_id="#{listID}" width="16" height="16" src="images/delete_row.gifx"'</span> +
        <span class="hljs-string">' class="list_delete_row list_decoration clsshort button"'</span> +
        <span class="hljs-string">' title="#{title}"&gt;&lt;/img&gt;'</span>
    ),
    <span class="hljs-attr">SPACER_ICON</span>: <span class="hljs-string">'&lt;img width="0" height="16" src="images/s.gifx" class="clsshort button"&gt;'</span>,
    <span class="hljs-attr">NEW_ICON</span>: <span class="hljs-keyword">new</span> Template(
        <span class="hljs-string">'&lt;img src="images/new_row.gifx" width="12" height="12" class="clsshort button" title="#{title}"&gt;&lt;/img&gt;'</span>),
    <span class="hljs-attr">SAVE_ICON</span>: <span class="hljs-keyword">new</span> Template(
        <span class="hljs-string">'&lt;img icon_type="save" src="images/save.pngx" width="16" height="16" class="clsshort button list_decoration" title="#{title}"'</span> +
        <span class="hljs-string">'onclick="editListSaveRow(this);" &gt;&lt;/img&gt;'</span>),
    <span class="hljs-attr">EMBEDDED_MODIFIED_POPUP_ICON</span>: <span class="hljs-keyword">new</span> Template(
        <span class="hljs-string">'&lt;a href="#{href}"&gt;'</span> +
        <span class="hljs-string">'&lt;img icon_type="save" data-type="#{dataType}" data-list_id="#{listID}" class="list_popup list_decoration" title="#{title}" src="images/icons/hover_icon_dirty.gifx" height="16" width="16"&gt;'</span> +
        <span class="hljs-string">'&lt;/a&gt;'</span>),
    <span class="hljs-attr">EMBEDDED_LIST_NEW_ICON</span>: <span class="hljs-keyword">new</span> Template(<span class="hljs-string">'&lt;img src="images/dirty.gifx" width="16" height="16" class="clsshort button list_decoration" title="#{title}" &gt;&lt;/img&gt;'</span>),
    <span class="hljs-attr">SAVE_POPUP_ICON</span>: <span class="hljs-keyword">new</span> Template(
        <span class="hljs-string">'&lt;img src="images/save.pngx" width="16" height="16" class="list_popup list_decoration" title="#{title}"'</span> +
        <span class="hljs-string">'onclick="editListSaveRow(this);" &gt;&lt;/img&gt;'</span>),
    <span class="hljs-attr">POPUP_ICON</span>: <span class="hljs-keyword">new</span> Template(
        <span class="hljs-string">'&lt;a href="#{table}.do?sys_id=#{row_id}&amp;amp;sysparm_view=&amp;amp;sysparm_record_target=#{table}&amp;amp;sysparm_record_list="&gt;'</span> +
        <span class="hljs-string">'&lt;img icon_type="save" class="list_popup list_decoration" title="#{title}" src="images/icons/hover_icon.gifx" height="16" width="16"&gt;'</span> +
        <span class="hljs-string">'&lt;/a&gt;'</span>),
    <span class="hljs-attr">LIST_CHECKBOX_ICON</span>: <span class="hljs-keyword">new</span> Template(
        <span class="hljs-string">'&lt;input class="list_checkbox checkbox" title="#{title}" type="checkbox" name="checkbox_#{listId}" id="checkbox_#{listId}_#{row_id}" /&gt;'</span>),
    <span class="hljs-attr">HIERARCHY_ICON</span>: <span class="hljs-keyword">new</span> Template(
        <span class="hljs-string">'&lt;img class="list_hier button" title="#{title}" src="images/list_v2_heir_hide.gifx" height="16" width="16"&gt;'</span>
    ),
    <span class="hljs-attr">EDIT_ICON</span>: <span class="hljs-keyword">new</span> Template(
        <span class="hljs-string">'&lt;img width="14" height="14" class="list_edit_image" title="#{title}" src="images/list_edit.pngx" /&gt;'</span>
    ),
    <span class="hljs-attr">EMBEDDED_POPUP_ICON</span>: <span class="hljs-keyword">new</span> Template(
        <span class="hljs-string">'&lt;a href="#{table}.do?sys_id=#{row_id}&amp;amp;sysparm_view=&amp;amp;sysparm_record_target=#{table}&amp;amp;sysparm_record_list="&gt;'</span> +
        <span class="hljs-string">'&lt;img class="list_popup list_decoration" title="#{title}" src="images/icons/hover_icon.gifx" height="12" width="12"&gt;'</span> +
        <span class="hljs-string">'&lt;/a&gt;'</span>),
    <span class="hljs-attr">EMBEDDED_EDIT_ICON</span>: <span class="hljs-keyword">new</span> Template(
        <span class="hljs-string">'&lt;img width="12" height="12" class="list_edit_image" title="#{title}" src="images/list_edit.pngx" /&gt;'</span>
    ),
    <span class="hljs-attr">EMBEDDED_EDIT_ICON_DOCTYPE</span>: <span class="hljs-keyword">new</span> Template(
        <span class="hljs-string">'&lt;i class="list_edit_image icon-add btn disabled" title="#{title}"&gt;'</span> +
        <span class="hljs-string">'&lt;span class="sr-only"&gt;#{title}&lt;/span&gt;'</span> +
        <span class="hljs-string">'&lt;/i&gt;'</span>
    ),
    <span class="hljs-attr">EMBEDDED_POPUP_ICON_DOCTYPE</span>: <span class="hljs-keyword">new</span> Template(
        <span class="hljs-string">'&lt;a href=#{table}.do?sys_id=#{row_id}&amp;amp;sysparm_view=&amp;amp;sysparm_record_target=#{table}&amp;amp;sysparm_record_list=" class="btn btn-icon icon-info list_popup" data-type="list2_popup" data-list_id="$[sysparm_list_id]" title="#{title}" style="margin-left:0px"&gt;'</span> +
        <span class="hljs-string">'&lt;span class="sr-only"&gt;#{title}&lt;/span&gt;'</span> +
        <span class="hljs-string">'&lt;/a&gt;'</span>),
    <span class="hljs-attr">EDIT_ICON_DOCTYPE</span>: <span class="hljs-keyword">new</span> Template(
        <span class="hljs-string">'&lt;i class="list_edit_image icon-add btn disabled" title="#{title}"&gt;'</span> +
        <span class="hljs-string">'&lt;span class="sr-only"&gt;#{title}&lt;/span&gt;'</span> +
        <span class="hljs-string">'&lt;/i&gt;'</span>
    ),
    <span class="hljs-attr">POPUP_ICON_DOCTYPE</span>: <span class="hljs-keyword">new</span> Template(
        <span class="hljs-string">'&lt;a href=#{table}.do?sys_id=#{row_id}&amp;amp;sysparm_view=&amp;amp;sysparm_record_target=#{table}&amp;amp;sysparm_record_list=" class="btn btn-icon table-btn-lg icon-info list_popup" data-type="list2_popup" data-list_id="$[sysparm_list_id]" title="#{title}" style="margin-left:0px"&gt;'</span> +
        <span class="hljs-string">'&lt;span class="sr-only"&gt;#{title}&lt;/span&gt;'</span> +
        <span class="hljs-string">'&lt;/a&gt;'</span>),
    <span class="hljs-attr">DELETE_ICON_DOCTYPE</span>: <span class="hljs-keyword">new</span> Template(
        <span class="hljs-string">'&lt;i data-type="#{dataType}" data-list_id="#{listID}" class="list_delete_row list_decoration clsshort button icon-cross btn" title="#{title}" style="color:#FF402C"&gt;&lt;/i&gt;'</span>
    ),
    <span class="hljs-attr">EMBEDDED_LIST_NEW_ICON_DOCTYPE</span>: <span class="hljs-keyword">new</span> Template(
        <span class="hljs-string">'&lt;i class="list_edit_image btn icon-edit disabled" title="#{title}"&gt;'</span> +
        <span class="hljs-string">'&lt;span class="sr-only"&gt;#{title}&lt;/span&gt;'</span> +
        <span class="hljs-string">'&lt;/i&gt;'</span>
    ),
    <span class="hljs-attr">LIST_CHECKBOX_ICON_DOCTYPE</span>: <span class="hljs-keyword">new</span> Template(
        <span class="hljs-string">'&lt;span class="input-group-checkbox"&gt;'</span> +
        <span class="hljs-string">'&lt;input type="checkbox"'</span> +
        <span class="hljs-string">'		title="#{title}"'</span> +
        <span class="hljs-string">'		id="check_#{listId}_#{row_id}"'</span> +
        <span class="hljs-string">'		name="check_#{listId}"'</span> +
        <span class="hljs-string">'		class="list_checkbox checkbox"'</span> +
        <span class="hljs-string">'		data-type="list2_checkbox"'</span> +
        <span class="hljs-string">'		data-list_id="#{listId}" /&gt;'</span> +
        <span class="hljs-string">'&lt;label class="checkbox-label" for="check_#{listId}_#{row_id}"&gt;'</span> +
        <span class="hljs-string">'&lt;span class="sr-only"&gt;Select record for action&lt;/span&gt;'</span> +
        <span class="hljs-string">'&lt;/label&gt;'</span> +
        <span class="hljs-string">'&lt;/span&gt;'</span>)
};;
<span class="hljs-comment">/*! RESOURCE: /scripts/GwtListEditValueRenderer.js */</span>
<span class="hljs-keyword">var</span> GwtListEditValueRenderer = Class.create({
    <span class="hljs-attr">MSGS</span>: [
        <span class="hljs-string">'Insert a new row...'</span>,
        <span class="hljs-string">'Undelete'</span>,
        <span class="hljs-string">'Mark deleted'</span>,
        <span class="hljs-string">'Loading...'</span>,
        <span class="hljs-string">'A new {0} identified by {1} will be created upon save'</span>
    ],
    <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">changes, tableController</span>) </span>{
        <span class="hljs-keyword">this</span>.changes = changes;
        <span class="hljs-keyword">this</span>.tableController = tableController;
        <span class="hljs-keyword">this</span>.gList = <span class="hljs-keyword">new</span> GwtListEditGList(<span class="hljs-keyword">this</span>.changes, <span class="hljs-keyword">this</span>.tableController, <span class="hljs-keyword">this</span>);
        <span class="hljs-keyword">this</span>.decor = <span class="hljs-keyword">new</span> GwtListEditRecordDecorations(<span class="hljs-keyword">this</span>.changes, <span class="hljs-keyword">this</span>.tableController);
        <span class="hljs-keyword">this</span>.emptyRecord = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">this</span>.msgs = getMessages(<span class="hljs-keyword">this</span>.MSGS);
    },
    <span class="hljs-attr">updateTable</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.decor.updateTable();
    },
    <span class="hljs-attr">setValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, fieldName, value</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.changes.isEmptyRecord(sysId))
            <span class="hljs-keyword">this</span>._saveEmptyRecord(sysId);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.changes.setValue(sysId, fieldName, value, <span class="hljs-keyword">this</span>._callOnChange.bind(<span class="hljs-keyword">this</span>));
    },
    <span class="hljs-attr">setDisplayValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, fieldName, value</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.changes.isEmptyRecord(sysId))
            <span class="hljs-keyword">this</span>._saveEmptyRecord(sysId);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.changes.setDisplayValue(sysId, fieldName, value, <span class="hljs-keyword">this</span>._callOnChange.bind(<span class="hljs-keyword">this</span>));
    },
    <span class="hljs-attr">addRow</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (GlideLists2[<span class="hljs-keyword">this</span>.tableController.listID] &amp;&amp; GlideLists2[<span class="hljs-keyword">this</span>.tableController.listID].disableRowAdd)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">this</span>.addRowWithValues({}, {});
    },
    <span class="hljs-attr">addRowWithValues</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">values, displayValues</span>) </span>{
        <span class="hljs-keyword">if</span> (GlideLists2[<span class="hljs-keyword">this</span>.tableController.listID] &amp;&amp; GlideLists2[<span class="hljs-keyword">this</span>.tableController.listID].disableRowAdd)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">var</span> adder = <span class="hljs-keyword">this</span>._addRowHandler.bind(<span class="hljs-keyword">this</span>, values, displayValues);
        <span class="hljs-keyword">this</span>.changes.loadDefaults(adder);
    },
    <span class="hljs-attr">_addRowHandler</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">values, displayValues</span>) </span>{
        <span class="hljs-keyword">var</span> sysId = <span class="hljs-keyword">this</span>._generateId();
        <span class="hljs-keyword">var</span> record = <span class="hljs-keyword">this</span>.changes.addRecord(sysId, <span class="hljs-string">"add"</span>);
        <span class="hljs-keyword">this</span>.changes.setDefaults(record);
        <span class="hljs-keyword">this</span>._populateFields(record, values, displayValues);
        <span class="hljs-keyword">this</span>.insertRowForRecord(record);
        <span class="hljs-keyword">this</span>.changes.addToAggregates(record);
    },
    <span class="hljs-attr">_populateFields</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">record, values, displayValues</span>) </span>{
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> v <span class="hljs-keyword">in</span> values) {
            <span class="hljs-keyword">var</span> field = record.addField(v);
            field.setValue(values[v]);
        }
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> v <span class="hljs-keyword">in</span> displayValues) {
            <span class="hljs-keyword">var</span> field = record.addField(v);
            field.setDisplayValue(displayValues[v]);
        }
    },
    <span class="hljs-attr">addRowNoInsert</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.tableController.canCreate)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">if</span> (GlideLists2[<span class="hljs-keyword">this</span>.tableController.listID] &amp;&amp; GlideLists2[<span class="hljs-keyword">this</span>.tableController.listID].disableRowAdd)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.emptyRecord) {
            <span class="hljs-keyword">this</span>.changes.loadDefaults(<span class="hljs-keyword">this</span>._addRowNoInsertHandler.bind(<span class="hljs-keyword">this</span>));
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">this</span>.insertRowForRecord(<span class="hljs-keyword">this</span>.emptyRecord);
        <span class="hljs-keyword">this</span>.decor.showEdit(<span class="hljs-keyword">this</span>.emptyRecord.sysId);
    },
    <span class="hljs-attr">_addRowNoInsertHandler</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.emptyRecord) {
            <span class="hljs-keyword">var</span> sysId = <span class="hljs-keyword">this</span>._generateId();
            <span class="hljs-keyword">this</span>.emptyRecord = <span class="hljs-keyword">this</span>.changes.addEmptyRecord(sysId);
        }
        <span class="hljs-keyword">this</span>.changes.setDefaults(<span class="hljs-keyword">this</span>.emptyRecord);
        <span class="hljs-keyword">this</span>.insertRowForRecord(<span class="hljs-keyword">this</span>.emptyRecord);
        <span class="hljs-keyword">this</span>.decor.showEdit(<span class="hljs-keyword">this</span>.emptyRecord.sysId);
    },
    <span class="hljs-attr">renderValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, fieldName, valueToDisplay, newRow</span>) </span>{
        <span class="hljs-keyword">var</span> cell = <span class="hljs-keyword">this</span>.tableController.getCell(sysId, fieldName);
        <span class="hljs-keyword">if</span> (!cell)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">var</span> cellIndex = <span class="hljs-built_in">document</span>.documentElement.getAttribute(<span class="hljs-string">'data-doctype'</span>) == <span class="hljs-string">'true'</span> ? <span class="hljs-number">2</span> : <span class="hljs-number">1</span>;
        <span class="hljs-keyword">var</span> dspValue = <span class="hljs-keyword">this</span>._getValueToRender(sysId, fieldName, valueToDisplay);
        <span class="hljs-keyword">if</span> (newRow &amp;&amp; (cellIndex === cell.cellIndex) &amp;&amp; (<span class="hljs-string">""</span> === dspValue)) {
            dspValue = <span class="hljs-keyword">this</span>.msgs[<span class="hljs-string">'Insert a new row...'</span>];
            cell.addClassName(<span class="hljs-string">"list_edit_new_row"</span>);
        }
        <span class="hljs-keyword">this</span>._renderContents(cell, sysId, fieldName, dspValue, newRow);
        <span class="hljs-keyword">this</span>._markChangedField(cell, sysId, fieldName);
    },
    <span class="hljs-attr">_renderContents</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">cell, sysId, fieldName, dspValue, newRow</span>) </span>{
        <span class="hljs-keyword">if</span> (dspValue)
            dspValue = dspValue.escapeHTML();
        <span class="hljs-keyword">if</span> (!newRow &amp;&amp; <span class="hljs-keyword">this</span>.tableController.isFirstField(fieldName)) {
            <span class="hljs-keyword">var</span> linkLabel = <span class="hljs-keyword">this</span>._getLinkLabel(cell);
            <span class="hljs-keyword">if</span> (linkLabel) {
                linkLabel.nodeValue = dspValue;
                <span class="hljs-keyword">return</span>;
            }
        }
        <span class="hljs-keyword">var</span> doctypeMode = <span class="hljs-built_in">document</span>.documentElement.getAttribute(<span class="hljs-string">'data-doctype'</span>) == <span class="hljs-string">'true'</span>;
        cell.innerHTML = <span class="hljs-string">""</span>;
        <span class="hljs-keyword">var</span> fieldElement = <span class="hljs-keyword">this</span>.tableController.getFieldElement(fieldName);
        <span class="hljs-keyword">if</span> (fieldElement.isReference()) {
            <span class="hljs-keyword">var</span> referenceValue = <span class="hljs-keyword">this</span>.changes.getValue(sysId, fieldName);
            <span class="hljs-keyword">if</span> (referenceValue) {
                <span class="hljs-keyword">if</span> (<span class="hljs-string">'NULL'</span> === referenceValue) {
                    <span class="hljs-keyword">if</span> (!hasClassName(cell, <span class="hljs-string">"list_edit_new_row"</span>))
                        dspValue = <span class="hljs-string">''</span>;
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.changes.isReferenceValid(sysId, fieldName)) {
                    <span class="hljs-keyword">if</span> (fieldElement.isDynamicCreation()) {
                        <span class="hljs-keyword">var</span> o = {
                            <span class="hljs-attr">sys_id</span>: referenceValue,
                            <span class="hljs-attr">display</span>: dspValue,
                            <span class="hljs-attr">title</span>: <span class="hljs-keyword">new</span> GwtMessage().format(
                                <span class="hljs-keyword">this</span>.msgs[<span class="hljs-string">'A new {0} identified by {1} will be created upon save.'</span>],
                                fieldElement.getRefLabel(), referenceValue)
                        };
                        <span class="hljs-keyword">var</span> dynamicTemplate = doctypeMode ?
                            GwtListEditValueRenderer.Templates.RENDER_DYNAMIC_REFERENCE_DOCTYPE :
                            GwtListEditValueRenderer.Templates.RENDER_DYNAMIC_REFERENCE
                        cell.insert(dynamicTemplate.evaluate(o));
                        <span class="hljs-keyword">return</span>;
                    }
                    dspValue = <span class="hljs-string">''</span>;
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.tableController.omitLinks == <span class="hljs-literal">false</span>) {
                        <span class="hljs-keyword">var</span> o = {
                            <span class="hljs-attr">sys_id</span>: referenceValue,
                            <span class="hljs-attr">refKey</span>: fieldElement.refKey,
                            <span class="hljs-attr">display</span>: dspValue,
                            <span class="hljs-attr">href</span>: fieldElement.reference
                        };
                        <span class="hljs-keyword">var</span> template = doctypeMode ?
                            GwtListEditValueRenderer.Templates.RENDER_REFERENCE_DOCTYPE :
                            GwtListEditValueRenderer.Templates.RENDER_REFERENCE
                        cell.insert(template.evaluate(o));
                        <span class="hljs-keyword">return</span>;
                    }
                }
            }
        }
        <span class="hljs-keyword">var</span> defaultTemplate = doctypeMode ? GwtListEditValueRenderer.Templates.RENDER_DEFAULT_DOCTYPE : GwtListEditValueRenderer.Templates.RENDER_DEFAULT;
        cell.insert(defaultTemplate.evaluate({
            <span class="hljs-attr">display</span>: dspValue
        }));
    },
    <span class="hljs-attr">_getLinkLabel</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">cell</span>) </span>{
        <span class="hljs-keyword">if</span> (!cell)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">if</span> (!cell.firstChild)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">var</span> child = cell.down(<span class="hljs-string">'a.linked'</span>) || cell.firstChild;
        <span class="hljs-keyword">return</span> child.firstChild;
    },
    <span class="hljs-attr">_getValueToRender</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, fieldName, valueToDisplay</span>) </span>{
        <span class="hljs-keyword">if</span> (valueToDisplay)
            <span class="hljs-keyword">return</span> valueToDisplay;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.changes.getValueToRender(sysId, fieldName);
    },
    <span class="hljs-attr">_saveEmptyRecord</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">id</span>) </span>{
        <span class="hljs-keyword">var</span> record = <span class="hljs-keyword">this</span>.changes.saveEmptyRecord(id);
        <span class="hljs-keyword">var</span> sysId = <span class="hljs-keyword">this</span>.tableController.getRelatedSysID();
        <span class="hljs-keyword">if</span> (sysId)
            <span class="hljs-keyword">this</span>.changes.addField(id, <span class="hljs-keyword">this</span>.tableController.relatedField, sysId);
        <span class="hljs-keyword">var</span> tr = $(id);
        <span class="hljs-keyword">if</span> (tr) {
            <span class="hljs-keyword">this</span>._removeAddRowClassName(tr);
            <span class="hljs-keyword">this</span>._resetBackgroundColor(tr);
        }
        <span class="hljs-keyword">this</span>.updateRowWithRecord(record);
        <span class="hljs-keyword">this</span>.changes.addToAggregates(record);
        <span class="hljs-keyword">this</span>.emptyRecord = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">this</span>.addRowNoInsert();
    },
    <span class="hljs-attr">insertRowForRecord</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">record</span>) </span>{
        <span class="hljs-keyword">var</span> isNew = record.isNew();
        <span class="hljs-keyword">this</span>.tableController.buildRow(record.sysId);
        <span class="hljs-keyword">this</span>.changes.rowCountChanged(<span class="hljs-number">1</span>);
        <span class="hljs-keyword">var</span> fields = record.getFields();
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> n <span class="hljs-keyword">in</span> fields)
            <span class="hljs-keyword">this</span>.renderValue(record.sysId, n, <span class="hljs-string">""</span>, isNew);
        <span class="hljs-keyword">var</span> info = {
            <span class="hljs-attr">listId</span>: <span class="hljs-keyword">this</span>.tableController.listID,
            <span class="hljs-attr">sys_id</span>: record.sysId
        };
        <span class="hljs-keyword">this</span>.tableController.fire(<span class="hljs-string">'glide:list_v2.edit.row_added'</span>, info);
    },
    <span class="hljs-attr">showViewDecorations</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId</span>) </span>{
        <span class="hljs-keyword">this</span>.decor.showView(sysId);
    },
    <span class="hljs-attr">isDoctype</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">document</span>.documentElement.getAttribute(<span class="hljs-string">'data-doctype'</span>) == <span class="hljs-string">'true'</span>;
    },
    <span class="hljs-attr">updateRowWithRecord</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">record</span>) </span>{
        <span class="hljs-keyword">var</span> fields = record.getFields();
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> n <span class="hljs-keyword">in</span> fields) {
            <span class="hljs-keyword">this</span>.renderValue(record.sysId, n);
            <span class="hljs-keyword">var</span> field = fields[n];
            <span class="hljs-keyword">if</span> (field.isDisplayValueSet())
                <span class="hljs-keyword">this</span>.changes.updateAggregates(n, field.getOriginalDisplay(), field.getDisplayValue());
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (field.isValueSet())
                <span class="hljs-keyword">this</span>.changes.updateAggregates(n, field.getOriginalValue(), field.getValue());
        }
    },
    <span class="hljs-attr">deleteRowWithRecord</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">record</span>) </span>{
        <span class="hljs-keyword">var</span> sysId = record.sysId;
        <span class="hljs-keyword">var</span> tr = <span class="hljs-keyword">this</span>.tableController.getRow(sysId);
        <span class="hljs-keyword">if</span> (tr) {
            <span class="hljs-keyword">if</span> (!hasClassName(tr, <span class="hljs-string">"list_delete"</span>))
                GwtListEditTableController.addClassToRow(tr, <span class="hljs-string">"list_delete"</span>);
            <span class="hljs-keyword">var</span> img = tr.select(<span class="hljs-string">'.list_delete_row'</span>)[<span class="hljs-number">0</span>];
            img.src = <span class="hljs-string">"images/undelete_row.gifx"</span>;
            writeTitle(img, <span class="hljs-keyword">this</span>.msgs[<span class="hljs-string">'Undelete'</span>]);
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isDoctype())
                img.setStyle({
                    <span class="hljs-attr">color</span>: <span class="hljs-string">'#cfcfcf'</span>
                });
        }
        <span class="hljs-keyword">this</span>.changes.removeFromAggregates(record);
    },
    <span class="hljs-attr">deleteRowToggle</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId</span>) </span>{
        <span class="hljs-keyword">var</span> record = <span class="hljs-keyword">this</span>.changes.get(sysId);
        <span class="hljs-keyword">if</span> (record &amp;&amp; record.operation == <span class="hljs-string">"delete_pending"</span>)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">if</span> (!record)
            record = <span class="hljs-keyword">this</span>.changes.addRecord(sysId, <span class="hljs-string">"delete_pending"</span>);
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.tableController.isFormUI())
            g_form.fieldChanged(<span class="hljs-string">"delete_row"</span>, <span class="hljs-literal">true</span>);
        <span class="hljs-keyword">if</span> (record.operation == <span class="hljs-string">"delete"</span>) {
            <span class="hljs-keyword">this</span>._undeleteRow(record);
            <span class="hljs-keyword">var</span> tr = <span class="hljs-keyword">this</span>.tableController.getRow(sysId);
            <span class="hljs-keyword">if</span> (tr) {
                GwtListEditTableController.removeClassFromRow(tr, <span class="hljs-string">"list_delete"</span>);
                <span class="hljs-keyword">var</span> img = tr.select(<span class="hljs-string">'.list_delete_row'</span>)[<span class="hljs-number">0</span>];
                img.src = <span class="hljs-string">"images/delete_row.gifx"</span>;
                writeTitle(img, <span class="hljs-keyword">this</span>.msgs[<span class="hljs-string">'Mark deleted'</span>]);
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isDoctype())
                    img.setStyle({
                        <span class="hljs-attr">color</span>: <span class="hljs-string">'#FF402C'</span>
                    })
            }
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (record.operation == <span class="hljs-string">"add"</span>) {
            <span class="hljs-keyword">this</span>.tableController.deleteRow(sysId);
            <span class="hljs-keyword">this</span>.changes.remove(sysId);
            <span class="hljs-keyword">this</span>.changes.rowCountChanged(<span class="hljs-number">-1</span>);
            <span class="hljs-keyword">this</span>.changes.removeFromAggregates(record);
            <span class="hljs-keyword">var</span> info = {
                <span class="hljs-attr">listId</span>: <span class="hljs-keyword">this</span>.tableController.listID,
                <span class="hljs-attr">deletes</span>: [sysId]
            };
            <span class="hljs-keyword">this</span>.tableController.fire(<span class="hljs-string">'glide:list_v2.edit.rows_deleted'</span>, info);
        } <span class="hljs-keyword">else</span> {
            record.operation = <span class="hljs-string">"delete_pending"</span>;
            <span class="hljs-keyword">if</span> (img) {
                img.src = <span class="hljs-string">"images/loading_anim2.gifx"</span>;
                img.alt = <span class="hljs-keyword">this</span>.msgs[<span class="hljs-string">'Loading...'</span>];
            }
            <span class="hljs-keyword">var</span> tr = <span class="hljs-keyword">this</span>.tableController.getRow(sysId);
            <span class="hljs-keyword">if</span> (tr) {
                GwtListEditTableController.addClassToRow(tr, <span class="hljs-string">"list_delete"</span>);
                <span class="hljs-keyword">var</span> img = tr.select(<span class="hljs-string">'.list_delete_row'</span>)[<span class="hljs-number">0</span>];
                img.src = <span class="hljs-string">"images/loading_anim2.gifx"</span>;
                writeTitle(img, <span class="hljs-keyword">this</span>.msgs[<span class="hljs-string">'Loading...'</span>]);
            }
            <span class="hljs-keyword">this</span>.changes.loadValues([sysId], <span class="hljs-keyword">this</span>.changes.getAggregateFields(), <span class="hljs-keyword">this</span>._deleteRowHandler.bind(<span class="hljs-keyword">this</span>, sysId));
        }
    },
    <span class="hljs-attr">_deleteRowHandler</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId</span>) </span>{
        <span class="hljs-keyword">var</span> record = <span class="hljs-keyword">this</span>.changes.get(sysId);
        <span class="hljs-keyword">if</span> (!record)
            <span class="hljs-keyword">return</span>;
        record.setOperation(<span class="hljs-string">"delete"</span>);
        <span class="hljs-keyword">this</span>.deleteRowWithRecord(record);
    },
    <span class="hljs-attr">_undeleteRow</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">record</span>) </span>{
        record.setOperation(<span class="hljs-string">"update"</span>);
        <span class="hljs-keyword">this</span>.changes.addToAggregates(record);
    },
    <span class="hljs-attr">_generateId</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> aj = <span class="hljs-keyword">new</span> GlideAjax(<span class="hljs-string">"GlideSystemAjax"</span>);
        aj.addParam(<span class="hljs-string">"sysparm_name"</span>, <span class="hljs-string">"newGuid"</span>);
        aj.getXMLWait();
        <span class="hljs-keyword">return</span> aj.getAnswer();
    },
    <span class="hljs-attr">_callOnChange</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, fieldName, oldValue, value</span>) </span>{
        <span class="hljs-keyword">var</span> old_g_list = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> g_list != <span class="hljs-string">"undefined"</span>)
            old_g_list = g_list;
        g_list = <span class="hljs-keyword">this</span>.gList;
        <span class="hljs-keyword">var</span> scriptName = <span class="hljs-string">"onChange_"</span> + <span class="hljs-keyword">this</span>.tableController.listID + <span class="hljs-string">"_"</span> + fieldName;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> ndx = <span class="hljs-number">0</span>; ndx &lt; <span class="hljs-number">100</span>; ndx++) {
            <span class="hljs-keyword">var</span> f = GlideListEditor.getClientScriptFunc(scriptName, ndx);
            <span class="hljs-keyword">if</span> (f == <span class="hljs-literal">null</span>)
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">try</span> {
                f(sysId, oldValue, value);
            } <span class="hljs-keyword">catch</span> (ex) {}
        }
        g_list = old_g_list;
    },
    <span class="hljs-attr">_markChangedField</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">cell, sysId, fieldName</span>) </span>{
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.tableController.hasDeferredChanges())
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.changes.isFieldDirty(sysId, fieldName))
            <span class="hljs-keyword">return</span>;
        addClassName(cell, <span class="hljs-string">'list_edit_dirty'</span>);
    },
    <span class="hljs-attr">_removeAddRowClassName</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">tr</span>) </span>{
        <span class="hljs-keyword">var</span> newRows = tr.select(<span class="hljs-string">'.list_edit_new_row'</span>);
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; newRows.length; i++)
            newRows[i].removeClassName(<span class="hljs-string">'list_edit_new_row'</span>);
    },
    <span class="hljs-attr">_resetBackgroundColor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">tr</span>) </span>{
        <span class="hljs-keyword">var</span> previousRows = tr.previousSiblings();
        <span class="hljs-keyword">if</span> (previousRows.length &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">if</span> (previousRows[<span class="hljs-number">0</span>].hasClassName(<span class="hljs-string">"list_odd"</span>))
                tr.className = <span class="hljs-string">"list_even"</span>;
            <span class="hljs-keyword">else</span>
                tr.className = <span class="hljs-string">"list_odd"</span>;
            addClassName(tr, <span class="hljs-string">"list_row"</span>);
        }
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">'GwtListEditValueRenderer'</span>;
    }
});
GwtListEditValueRenderer.Templates = {
    <span class="hljs-attr">RENDER_REFERENCE</span>: <span class="hljs-keyword">new</span> Template(
        <span class="hljs-string">'&lt;a class="linked" sys_id="#{sys_id}" href="#{href}.do?sys_id=#{sys_id}&amp;sysparm_refkey=#{refKey}"&gt;#{display}&lt;/a&gt;'</span>
    ),
    <span class="hljs-attr">RENDER_DYNAMIC_REFERENCE</span>: <span class="hljs-keyword">new</span> Template(
        <span class="hljs-string">'&lt;span class="ref_dynamic" title="#{title}"&gt;#{display}&lt;/span&gt;'</span>
    ),
    <span class="hljs-attr">RENDER_REFERENCE_DOCTYPE</span>: <span class="hljs-keyword">new</span> Template(
        <span class="hljs-string">'&lt;div&gt;&lt;/div&gt;&lt;a class="linked" sys_id="#{sys_id}" href="#{href}.do?sys_id=#{sys_id}&amp;sysparm_refkey=#{refKey}"&gt;#{display}&lt;/a&gt;'</span>
    ),
    <span class="hljs-attr">RENDER_DYNAMIC_REFERENCE_DOCTYPE</span>: <span class="hljs-keyword">new</span> Template(
        <span class="hljs-string">'&lt;div&gt;&lt;/div&gt;&lt;span class="ref_dynamic" title="#{title}"&gt;#{display}&lt;/span&gt;'</span>
    ),
    <span class="hljs-attr">RENDER_DEFAULT</span>: <span class="hljs-keyword">new</span> Template(<span class="hljs-string">'#{display}'</span>),
    <span class="hljs-attr">RENDER_DEFAULT_DOCTYPE</span>: <span class="hljs-keyword">new</span> Template(<span class="hljs-string">'&lt;div&gt;&lt;/div&gt;#{display}'</span>)
};;
<span class="hljs-comment">/*! RESOURCE: /scripts/GwtListEditGList.js */</span>
<span class="hljs-keyword">var</span> GwtListEditGList = Class.create({
    <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">changes, tableController, renderer</span>) </span>{
        <span class="hljs-keyword">this</span>.changes = changes;
        <span class="hljs-keyword">this</span>.tableController = tableController;
        <span class="hljs-keyword">this</span>.renderer = renderer;
    },
    <span class="hljs-attr">getValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, fieldName</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.changes.getValue(sysId, fieldName);
    },
    <span class="hljs-attr">getDisplayValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, fieldName</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.changes.getDisplayValue(sysId, fieldName);
    },
    <span class="hljs-attr">isWritable</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, fieldName</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.changes.isWritable(sysId, fieldName);
    },
    <span class="hljs-attr">setValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, fieldName, value</span>) </span>{
        <span class="hljs-keyword">this</span>.renderer.setValue(sysId, fieldName, value);
    },
    <span class="hljs-attr">setDisplayValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, fieldName, value</span>) </span>{
        <span class="hljs-keyword">this</span>.renderer.setDisplayValue(sysId, fieldName, value);
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.changes.isValueSet(sysId, fieldName))
            <span class="hljs-keyword">this</span>.changes.setValue(sysId, fieldName, value);
    },
    <span class="hljs-attr">renderValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId, fieldName, valueToDisplay</span>) </span>{
        <span class="hljs-keyword">this</span>.renderer.renderValue(sysId, fieldName, valueToDisplay, <span class="hljs-literal">false</span>);
    },
    <span class="hljs-attr">getAggregate</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName, type</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.changes.getAggregateValue(fieldName, type);
    },
    <span class="hljs-attr">getRowCount</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.tableController.rowCount - <span class="hljs-keyword">this</span>.changes.getDeletedRowCount() + <span class="hljs-keyword">this</span>.changes.getAddedRowCount();
    },
    <span class="hljs-attr">addRow</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.renderer.addRow();
    },
    <span class="hljs-attr">addRowWithValues</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">values, displayValues</span>) </span>{
        <span class="hljs-keyword">this</span>.renderer.addRow(values, displayValues);
    },
    <span class="hljs-attr">deleteRowToggle</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId</span>) </span>{
        <span class="hljs-keyword">this</span>.renderer.deleteRowToggle(sysId);
    },
    <span class="hljs-attr">getGlideRecord</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> GwtListEditGlideRecord(<span class="hljs-keyword">this</span>.changes, <span class="hljs-keyword">this</span>.tableController, <span class="hljs-keyword">this</span>.renderer);
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">'GwtListEditGList'</span>;
    }
});;
<span class="hljs-comment">/*! RESOURCE: /scripts/GwtListEditGlideRecord.js */</span>
<span class="hljs-keyword">var</span> GwtListEditGlideRecord = Class.create({
    <span class="hljs-attr">initialized</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">changes, tableController, renderer</span>) </span>{
        <span class="hljs-keyword">this</span>.changes = changes;
        <span class="hljs-keyword">this</span>.tableController = tableController;
        <span class="hljs-keyword">this</span>.renderer = renderer;
        <span class="hljs-keyword">this</span>.currentRow = <span class="hljs-number">-1</span>;
        <span class="hljs-keyword">this</span>.sysIds = [];
        <span class="hljs-keyword">this</span>.displayValues = {};
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.initialized)
            <span class="hljs-keyword">this</span>._setIgnoreNames();
        <span class="hljs-keyword">else</span>
            <span class="hljs-keyword">this</span>._clearValues();
        <span class="hljs-keyword">this</span>.initialized = <span class="hljs-literal">true</span>;
    },
    <span class="hljs-attr">addQuery</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        alert(<span class="hljs-string">'GwtListEditGlideRecord.addQuery is not currently supported'</span>);
    },
    <span class="hljs-attr">getEncodedQuery</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        alert(<span class="hljs-string">'GwtListEditGlideRecord.addQuery is not currently supported'</span>);
    },
    <span class="hljs-attr">deleteRecord</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> sysId = <span class="hljs-keyword">this</span>._getRowSysId();
        <span class="hljs-keyword">if</span> (!sysId)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.changes.isDeletedRow(sysId))
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">this</span>.renderer.deleteRowToggle(sysId);
    },
    <span class="hljs-attr">get</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId</span>) </span>{
        <span class="hljs-keyword">var</span> rec = <span class="hljs-keyword">this</span>.changes.get(sysId);
        <span class="hljs-keyword">if</span> (rec) {
            <span class="hljs-keyword">this</span>.currentRow = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">this</span>.sysIds = [sysId];
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">this</span>.currentRow = <span class="hljs-number">-1</span>;
        <span class="hljs-keyword">this</span>.sysIds = [];
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    },
    <span class="hljs-attr">getTableName</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.tableController.tableName;
    },
    <span class="hljs-attr">gotoTop</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.currentRow = <span class="hljs-number">-1</span>;
    },
    <span class="hljs-attr">hasNext</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>.currentRow + <span class="hljs-number">1</span> &lt; <span class="hljs-keyword">this</span>.sysIds.length);
    },
    <span class="hljs-attr">insert</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> values = {};
        <span class="hljs-keyword">var</span> dspValues = {};
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> xname <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>) {
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.ignoreNames[xname])
                <span class="hljs-keyword">continue</span>;
            values[xname] = <span class="hljs-keyword">this</span>[xname];
        }
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> xname <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.displayValues)
            dspValues[xname] = <span class="hljs-keyword">this</span>.displayValues[xname];
        <span class="hljs-keyword">this</span>.renderer.addRowWithValues(values, dspValues);
    },
    <span class="hljs-attr">next</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.hasNext())
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">this</span>.currentRow++;
        <span class="hljs-keyword">this</span>._loadRow();
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    },
    <span class="hljs-attr">_next</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.next;
    },
    <span class="hljs-attr">query</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>._initRows();
        <span class="hljs-keyword">this</span>.currentRow = <span class="hljs-number">-1</span>;
        <span class="hljs-keyword">return</span>;
    },
    <span class="hljs-attr">setDisplayValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName, dsp</span>) </span>{
        <span class="hljs-keyword">this</span>.displayValue[fieldName] = dsp;
        <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> === <span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>[fieldName])
            <span class="hljs-keyword">this</span>[fieldName] = dsp;
    },
    <span class="hljs-attr">update</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> sysId = <span class="hljs-keyword">this</span>._getRowSysId();
        <span class="hljs-keyword">if</span> (!sysId)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">var</span> record = <span class="hljs-keyword">this</span>.changes.get(sysId);
        <span class="hljs-keyword">if</span> (!record)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> xname <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>) {
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.ignoreNames[xname])
                <span class="hljs-keyword">continue</span>;
            <span class="hljs-keyword">if</span> (xname == <span class="hljs-string">'sys_id'</span>)
                <span class="hljs-keyword">continue</span>;
            <span class="hljs-keyword">var</span> val = <span class="hljs-keyword">this</span>[xname];
            <span class="hljs-keyword">var</span> dsp = <span class="hljs-keyword">this</span>.displayValues[xname];
            <span class="hljs-keyword">var</span> field = record.getField(xname);
            <span class="hljs-keyword">if</span> (!field)
                field = record.addField(xname);
            <span class="hljs-keyword">var</span> changed = <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">if</span> (field.getValue() != val) {
                <span class="hljs-keyword">this</span>.renderer.setValue(sysId, xname, val);
                changed = <span class="hljs-literal">true</span>;
            }
            <span class="hljs-keyword">if</span> ((<span class="hljs-keyword">typeof</span> dsp != <span class="hljs-string">'undefined'</span>) &amp;&amp; (field.getDisplayValue() != dsp)) {
                <span class="hljs-keyword">this</span>.renderer.setDisplayValue(sysId, xname, dsp);
                changed = <span class="hljs-literal">true</span>;
            }
            <span class="hljs-keyword">if</span> (changed)
                <span class="hljs-keyword">this</span>.renderer.renderValue(sysId, xname);
        }
    },
    <span class="hljs-attr">getRowCount</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.sysIds.length;
    },
    <span class="hljs-attr">_initRows</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> receiver = <span class="hljs-keyword">new</span> GwtListEditGlideRecord.RowBuilder();
        <span class="hljs-keyword">this</span>.changes.exportRecords(receiver);
        <span class="hljs-keyword">this</span>.sysIds = receiver.sysIds;
    },
    <span class="hljs-attr">_loadRow</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>._clearValues();
        <span class="hljs-keyword">var</span> sysId = <span class="hljs-keyword">this</span>._getRowSysId();
        <span class="hljs-keyword">if</span> (!sysId)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">var</span> record = <span class="hljs-keyword">this</span>.changes.get(sysId);
        <span class="hljs-keyword">if</span> (!record)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">this</span>.sys_id = sysId;
        <span class="hljs-keyword">var</span> fields = record.getFields();
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> fname <span class="hljs-keyword">in</span> fields) {
            <span class="hljs-keyword">if</span> (fname.indexOf(<span class="hljs-string">'.'</span>) != <span class="hljs-number">-1</span>)
                <span class="hljs-keyword">continue</span>;
            <span class="hljs-keyword">var</span> field = fields[fname];
            <span class="hljs-keyword">this</span>[fname] = field.getValue();
            <span class="hljs-keyword">this</span>.displayValues[fname] = field.getDisplayValue();
        }
    },
    <span class="hljs-attr">_getRowSysId</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> ((<span class="hljs-keyword">this</span>.currentRow &lt; <span class="hljs-number">0</span>) || (<span class="hljs-keyword">this</span>.currentRow &gt;= <span class="hljs-keyword">this</span>.sysIds.length))
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.sysIds[<span class="hljs-keyword">this</span>.currentRow];
    },
    <span class="hljs-attr">_clearValues</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.displayValues = {};
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> xname <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>) {
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.ignoreNames[xname] &amp;&amp; <span class="hljs-keyword">this</span>.ignoreNames[xname] == <span class="hljs-literal">true</span>)
                <span class="hljs-keyword">continue</span>;
            <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>[xname];
        }
    },
    <span class="hljs-attr">_setIgnoreNames</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.ignoreNames = [];
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> xname <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>) {
            <span class="hljs-keyword">this</span>.ignoreNames[xname] = <span class="hljs-literal">true</span>;
        }
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">'GwtListEditGlideRecord'</span>;
    }
});
GwtListEditGlideRecord.RowBuilder = Class.create(
    GwtListEditorPendingChanges.RecordReceiver, {
        <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$super</span>) </span>{
            $<span class="hljs-keyword">super</span>();
            <span class="hljs-keyword">this</span>.sysIds = [];
        },
        <span class="hljs-attr">changedRecord</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysID, record</span>) </span>{
            <span class="hljs-keyword">if</span> (record.isDeleted())
                <span class="hljs-keyword">return</span>;
            <span class="hljs-keyword">if</span> (record.isDefaultValues())
                <span class="hljs-keyword">return</span>;
            <span class="hljs-keyword">this</span>.sysIds.push(sysID);
        },
        <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-string">'GlideListEditor.RowUpdater'</span>;
        }
    });;
<span class="hljs-comment">/*! RESOURCE: /scripts/GlideListEditor.js */</span>
<span class="hljs-keyword">var</span> GlideListEditor = Class.create({
    <span class="hljs-attr">MSGS</span>: [
        <span class="hljs-string">'Mark deleted'</span>, <span class="hljs-string">'New row'</span>
    ],
    <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">table</span>) </span>{
        <span class="hljs-keyword">this</span>.tableController = <span class="hljs-keyword">new</span> GwtListEditTableController(table);
        <span class="hljs-keyword">this</span>.changes = <span class="hljs-keyword">new</span> GwtListEditorPendingChanges(<span class="hljs-keyword">this</span>.tableController);
        <span class="hljs-keyword">this</span>.tableController.changes = <span class="hljs-keyword">this</span>.changes;
        <span class="hljs-keyword">this</span>.renderer = <span class="hljs-keyword">new</span> GwtListEditValueRenderer(<span class="hljs-keyword">this</span>.changes, <span class="hljs-keyword">this</span>.tableController);
        <span class="hljs-keyword">this</span>.tableController.renderer = <span class="hljs-keyword">this</span>.renderer;
        <span class="hljs-keyword">this</span>.savePolicy = <span class="hljs-keyword">this</span>.tableController.buildSavePolicy();
        <span class="hljs-keyword">this</span>.gridEdit = <span class="hljs-keyword">new</span> GwtGridEdit(<span class="hljs-keyword">this</span>.tableController);
        <span class="hljs-keyword">this</span>.msgs = getMessages(<span class="hljs-keyword">this</span>.MSGS);
        <span class="hljs-keyword">this</span>.emptyRecord = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">this</span>._observeTableEvents();
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.tableController.isFormUI())
            <span class="hljs-keyword">this</span>.changes.loadTable(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{});
    },
    <span class="hljs-attr">updateTable</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">tableDOM</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.tableController.isForTable(tableDOM))
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">this</span>.tableController.updateTable(tableDOM);
        <span class="hljs-keyword">this</span>.renderer.updateTable();
        <span class="hljs-keyword">this</span>.gridEdit.updateTable();
        <span class="hljs-keyword">this</span>._observeTableEvents();
    },
    <span class="hljs-attr">unLoadTable</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">tableDOM</span>) </span>{
        <span class="hljs-keyword">this</span>.tableController.unLoadTable(tableDOM);
    },
    <span class="hljs-attr">_observeTableEvents</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> policyCallback = <span class="hljs-keyword">this</span>._savePolicy.bind(<span class="hljs-keyword">this</span>);
        <span class="hljs-keyword">this</span>.tableController.observe(<span class="hljs-string">'glide:list_v2.edit.cells_changed'</span>, policyCallback);
        <span class="hljs-keyword">this</span>.tableController.observe(<span class="hljs-string">'glide:list_v2.edit.focus_moved'</span>, policyCallback);
        <span class="hljs-keyword">this</span>.tableController.observe(<span class="hljs-string">'glide:list_v2.edit.save_now'</span>, policyCallback);
        Event.observe(<span class="hljs-keyword">this</span>.tableController.tableElementDOM, <span class="hljs-string">'click'</span>, policyCallback);
        <span class="hljs-keyword">this</span>.tableController.observe(<span class="hljs-string">'glide:list_v2.edit.changes_saved'</span>, <span class="hljs-keyword">this</span>._handleChangesSaved.bind(<span class="hljs-keyword">this</span>));
        <span class="hljs-keyword">this</span>.tableController.observe(<span class="hljs-string">'glide:list_v2.edit.rows_deleted'</span>, <span class="hljs-keyword">this</span>._handleRowsDeleted.bind(<span class="hljs-keyword">this</span>));
        <span class="hljs-keyword">this</span>.tableController.observe(<span class="hljs-string">'glide:list_v2.edit.focus_moved'</span>, <span class="hljs-keyword">this</span>._handleFocusMoved.bind(<span class="hljs-keyword">this</span>));
        Event.observe(<span class="hljs-keyword">this</span>.tableController.tableElementDOM, <span class="hljs-string">'glide:list_v2.edit.update_column'</span>, <span class="hljs-keyword">this</span>._updateColumn.bind(<span class="hljs-keyword">this</span>));
        Event.observe(<span class="hljs-keyword">this</span>.tableController.tableElementDOM, <span class="hljs-string">'glide:list_v2.edit.check_enter_once'</span>, <span class="hljs-keyword">this</span>._checkEnterOnce.bind(<span class="hljs-keyword">this</span>));
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.GlideListEditorMessaging)
            <span class="hljs-keyword">new</span> GlideListEditorMessaging(<span class="hljs-keyword">this</span>);
    },
    <span class="hljs-attr">createCellEditor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element, ignoreTypes</span>) </span>{
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.tableController.canEdit())
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">this</span>.gridEdit.hideCursor();
        <span class="hljs-keyword">this</span>.gridEdit.clearRanges();
        <span class="hljs-keyword">this</span>.gridEdit.setAnchorCell(element);
        <span class="hljs-keyword">this</span>.cellEditor = <span class="hljs-keyword">new</span> GwtCellEditor(<span class="hljs-keyword">this</span>.gridEdit, ignoreTypes,
            <span class="hljs-keyword">this</span>.changes, <span class="hljs-keyword">this</span>.tableController, <span class="hljs-keyword">this</span>.renderer);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.cellEditor;
    },
    <span class="hljs-attr">setCursor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>) </span>{
        <span class="hljs-keyword">this</span>.gridEdit.setCursorElement(element);
    },
    <span class="hljs-attr">_savePolicy</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">this</span>.savePolicy.analyzeEvent(evt);
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.savePolicy.isDirectSave()) {
            <span class="hljs-keyword">this</span>.saveChanges(<span class="hljs-keyword">this</span>._saveComplete.bind(<span class="hljs-keyword">this</span>));
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.savePolicy.isDeferredSave()) {
            <span class="hljs-keyword">this</span>._fireChangesDeferred();
            <span class="hljs-keyword">this</span>._saveComplete();
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.savePolicy.isImpliedSave()) {
            <span class="hljs-keyword">this</span>.saveChanges(<span class="hljs-literal">null</span>);
            <span class="hljs-keyword">return</span>;
        }
    },
    <span class="hljs-attr">_fireChangesDeferred</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> info = {
            <span class="hljs-attr">listId</span>: <span class="hljs-keyword">this</span>.tableController.listID,
            <span class="hljs-attr">defers</span>: <span class="hljs-keyword">this</span>.savePolicy.getDeferredSaves()
        };
        <span class="hljs-keyword">this</span>.tableController.fire(<span class="hljs-string">'glide:list_v2.edit.changes_deferred'</span>, info);
    },
    <span class="hljs-attr">_saveComplete</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> info = {
            <span class="hljs-attr">listId</span>: <span class="hljs-keyword">this</span>.tableController.listID
        };
        <span class="hljs-keyword">this</span>.tableController.fire(<span class="hljs-string">'glide:list_v2.edit.saves_completed'</span>, info);
        CustomEvent.fire(<span class="hljs-string">'list_content_changed'</span>);
    },
    <span class="hljs-attr">_handleChangesSaved</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">this</span>.savePolicy.handleChangesSaved(evt);
    },
    <span class="hljs-attr">_handleRowsDeleted</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">this</span>.savePolicy.handleRowsDeleted(evt);
        <span class="hljs-keyword">this</span>.gridEdit.showCursor();
    },
    <span class="hljs-attr">_handleFocusMoved</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.cellEditor)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.cellEditor.isActive())
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">if</span> (evt.memo.listId !== <span class="hljs-keyword">this</span>.tableController.listID)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">var</span> cursorCell = <span class="hljs-keyword">this</span>.gridEdit.getCursorCell();
        <span class="hljs-keyword">var</span> anchorCell = <span class="hljs-keyword">this</span>.gridEdit.getAnchorCell();
        <span class="hljs-keyword">if</span> (cursorCell !== anchorCell) {
            <span class="hljs-keyword">this</span>.cellEditor.dismiss();
            GwtListEditor.forPage.edit(cursorCell);
        }
    },
    <span class="hljs-attr">saveNow</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> info = {
            <span class="hljs-attr">listId</span>: <span class="hljs-keyword">this</span>.tableController.listID
        };
        <span class="hljs-keyword">this</span>.tableController.fire(<span class="hljs-string">'glide:list_v2.edit.save_now'</span>, info);
    },
    <span class="hljs-attr">applyUpdates</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.changes.resetAggregates();
        <span class="hljs-keyword">var</span> updater = <span class="hljs-keyword">new</span> GlideListEditor.RowUpdater(<span class="hljs-keyword">this</span>.changes, <span class="hljs-keyword">this</span>.tableController, <span class="hljs-keyword">this</span>.renderer);
        <span class="hljs-keyword">this</span>.changes.exportRecords(updater);
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.tableController.needsInsertRow())
            <span class="hljs-keyword">this</span>.renderer.addRowNoInsert();
    },
    <span class="hljs-attr">_getRow</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.tableController.getRow(sysId);
    },
    <span class="hljs-attr">addRow</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.renderer.addRow();
    },
    <span class="hljs-attr">saveUpdatesInForm</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        addHidden(<span class="hljs-keyword">this</span>._getForm(), <span class="hljs-keyword">this</span>._getXmlIslandName(), <span class="hljs-keyword">this</span>._serializeModified());
    },
    <span class="hljs-attr">_serializeModified</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> xml = <span class="hljs-keyword">this</span>._createRecordUpdateXml();
        <span class="hljs-keyword">var</span> selector = <span class="hljs-keyword">new</span> GlideListEditor.IsModifiedRecordSelector(<span class="hljs-keyword">this</span>.changes);
        <span class="hljs-keyword">var</span> receiver = <span class="hljs-keyword">new</span> GlideListEditor.XmlSerializingReceiver(xml, xml.documentElement, selector);
        <span class="hljs-keyword">this</span>.changes.exportChanges(receiver);
        <span class="hljs-keyword">return</span> getXMLString(xml);
    },
    <span class="hljs-attr">_createRecordUpdateXml</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> xml = loadXML(<span class="hljs-string">"&lt;record_update/&gt;"</span>);
        <span class="hljs-keyword">this</span>.tableController.exportXml(xml.documentElement);
        <span class="hljs-keyword">return</span> xml;
    },
    <span class="hljs-attr">_getForm</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> ((<span class="hljs-keyword">typeof</span> g_form == <span class="hljs-string">"undefined"</span>) || (!g_form))
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">return</span> gel(g_form.getTableName() + <span class="hljs-string">".do"</span>);
    },
    <span class="hljs-attr">_getXmlIslandName</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"ni.java.com.glide.ui_list_edit.ListEditFormatterAction["</span> + <span class="hljs-keyword">this</span>.tableController.listID + <span class="hljs-string">"]"</span>;
    },
    <span class="hljs-attr">callOnSubmit</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> retVal;
        <span class="hljs-keyword">var</span> scriptName = <span class="hljs-string">"onSubmit_"</span> + <span class="hljs-keyword">this</span>.tableController.listID;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> ndx = <span class="hljs-number">0</span>;
            (ndx &lt; <span class="hljs-number">100</span>) &amp;&amp; (retVal != <span class="hljs-literal">false</span>); ndx++) {
            <span class="hljs-keyword">var</span> f = GlideListEditor.getClientScriptFunc(scriptName, ndx);
            <span class="hljs-keyword">if</span> (f == <span class="hljs-literal">null</span>)
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">try</span> {
                retVal = f();
            } <span class="hljs-keyword">catch</span> (ex) {}
        }
        <span class="hljs-keyword">return</span> retVal;
    },
    <span class="hljs-attr">saveChanges</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">onComplete</span>) </span>{
        <span class="hljs-keyword">var</span> saver = <span class="hljs-keyword">new</span> GwtListEditAjaxChangeSaver(<span class="hljs-keyword">this</span>.changes, <span class="hljs-keyword">this</span>.tableController, onComplete);
        saver.save();
    },
    <span class="hljs-attr">buildGList</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> GwtListEditGList(<span class="hljs-keyword">this</span>.changes, <span class="hljs-keyword">this</span>.tableController, <span class="hljs-keyword">this</span>.renderer);
    },
    <span class="hljs-attr">hasChanges</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> selector = <span class="hljs-keyword">new</span> GlideListEditor.IsModifiedRecordSelector(<span class="hljs-keyword">this</span>.changes);
        <span class="hljs-keyword">var</span> inspector = <span class="hljs-keyword">new</span> GlideListEditor.ChangeCounter(selector);
        <span class="hljs-keyword">this</span>.changes.inspectRecords(inspector);
        <span class="hljs-keyword">return</span> inspector.isDone();
    },
    <span class="hljs-attr">deleteRowToggle</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId</span>) </span>{
        <span class="hljs-keyword">this</span>.renderer.deleteRowToggle(sysId);
    },
    <span class="hljs-attr">getSelectedRows</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.gridEdit.getSelectedRows();
    },
    <span class="hljs-attr">_updateColumn</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">var</span> columnName = evt.memo.columnName;
        <span class="hljs-keyword">var</span> value = evt.memo.newValue;
        <span class="hljs-keyword">var</span> ids = evt.memo.ids != <span class="hljs-literal">null</span> ? evt.memo.ids : <span class="hljs-keyword">this</span>.changes.calcWritableSysIds(<span class="hljs-keyword">this</span>.tableController.sysIds, [columnName]);
        <span class="hljs-keyword">var</span> numIds = ids.length;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; numIds; i++) {
            <span class="hljs-keyword">var</span> id = ids[i];
            <span class="hljs-keyword">if</span> (evt.memo.ids != <span class="hljs-literal">null</span> || <span class="hljs-keyword">this</span>.changes.emptyRecord == <span class="hljs-literal">null</span> || <span class="hljs-keyword">this</span>.changes.emptyRecord.sysId != id) {
                <span class="hljs-keyword">this</span>.renderer.setValue(id, columnName, value);
                <span class="hljs-keyword">this</span>.changes.setRenderValue(id, columnName, value);
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.changes.isFieldDirty(id, columnName)) {
                    <span class="hljs-keyword">this</span>.renderer.renderValue(id, columnName);
                }
            }
        }
    },
    <span class="hljs-attr">_checkEnterOnce</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">var</span> properties = evt.memo.properties;
        <span class="hljs-keyword">var</span> answer = [];
        <span class="hljs-keyword">var</span> l = properties.length;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>; j &lt; l; j++) {
            <span class="hljs-keyword">var</span> p = properties[j];
            <span class="hljs-keyword">var</span> columnName = p.field;
            <span class="hljs-keyword">var</span> ids = evt.memo.ids != <span class="hljs-literal">null</span> ? evt.memo.ids : <span class="hljs-keyword">this</span>.changes.calcWritableSysIds(<span class="hljs-keyword">this</span>.tableController.sysIds, [columnName]);
            <span class="hljs-keyword">var</span> numIds = ids.length;
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; numIds; i++) {
                <span class="hljs-keyword">var</span> id = ids[i];
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.changes.emptyRecord == <span class="hljs-literal">null</span> || <span class="hljs-keyword">this</span>.changes.emptyRecord.sysId != id) {
                    <span class="hljs-keyword">if</span> (evt.memo.oldValues != <span class="hljs-literal">null</span> || <span class="hljs-keyword">this</span>.changes.isFieldDirty(id, columnName)) {
                        <span class="hljs-keyword">var</span> field = <span class="hljs-keyword">this</span>.changes.getField(id, columnName);
                        <span class="hljs-keyword">var</span> originalValue = evt.memo.oldValues != <span class="hljs-literal">null</span> ? evt.memo.oldValues[i] : field.getOriginalDisplay();
                        <span class="hljs-keyword">var</span> currentValue = evt.memo.newValue != <span class="hljs-literal">null</span> ? evt.memo.newValue : field.getRenderValue();
                        <span class="hljs-keyword">var</span> isDirty = p.isDirty(originalValue, currentValue);
                        <span class="hljs-keyword">if</span> (isDirty) {
                            answer.push({
                                <span class="hljs-attr">sys_id</span>: id,
                                <span class="hljs-attr">name</span>: columnName,
                                <span class="hljs-attr">value</span>: currentValue
                            });
                        }
                    }
                }
            }
        }
        evt.answer = answer;
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">'GlideListEditor'</span>;
    }
});

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getQueryForList</span>(<span class="hljs-params">listID</span>) </span>{
    <span class="hljs-keyword">var</span> e = gel(<span class="hljs-string">'sysparm_query'</span>);
    <span class="hljs-keyword">if</span> (e)
        <span class="hljs-keyword">return</span> e.value;
    <span class="hljs-keyword">var</span> t = GwtListEditor.getTableElem(listID);
    <span class="hljs-keyword">if</span> (t)
        <span class="hljs-keyword">return</span> getAttributeValue(t, <span class="hljs-string">'glide_list_query'</span>) + <span class="hljs-string">''</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
}
GlideListEditor.getClientScriptFunc = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scriptName, ndx</span>) </span>{
    <span class="hljs-keyword">var</span> n = scriptName + <span class="hljs-string">"_"</span> + ndx;
    <span class="hljs-keyword">var</span> f = <span class="hljs-built_in">window</span>[n];
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> f != <span class="hljs-string">"function"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">return</span> f;
};
GlideListEditor.RowUpdater = Class.create(
    GwtListEditorPendingChanges.RecordReceiver, {
        <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$super, changes, tableController, renderer</span>) </span>{
            $<span class="hljs-keyword">super</span>();
            <span class="hljs-keyword">this</span>.changes = changes;
            <span class="hljs-keyword">this</span>.tableController = tableController;
            <span class="hljs-keyword">this</span>.renderer = renderer;
            <span class="hljs-keyword">this</span>.hasChanges = <span class="hljs-literal">false</span>;
        },
        <span class="hljs-attr">changedRecord</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysID, record</span>) </span>{
            <span class="hljs-keyword">if</span> (record.isAdded()) {
                <span class="hljs-keyword">this</span>.hasChanges = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.tableController.getRow(sysID))
                    <span class="hljs-keyword">this</span>.renderer.updateRowWithRecord(record);
                <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">this</span>.renderer.insertRowForRecord(record);
                    <span class="hljs-keyword">this</span>.renderer.showViewDecorations(sysID);
                    <span class="hljs-keyword">this</span>.changes.addToAggregates(record);
                }
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (record.isUpdated()) {
                <span class="hljs-keyword">this</span>.hasChanges = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">this</span>.renderer.updateRowWithRecord(record);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (record.isDeleted()) {
                <span class="hljs-keyword">this</span>.hasChanges = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">this</span>.renderer.updateRowWithRecord(record);
                <span class="hljs-keyword">this</span>.renderer.deleteRowWithRecord(record);
            }
        },
        <span class="hljs-attr">isChanged</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.hasChanges;
        },
        <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-string">'GlideListEditor.RowUpdater'</span>;
        }
    });
GlideListEditor.XmlSerializingReceiver = Class.create(
    GwtListEditorPendingChanges.ChangeReceiver, {
        <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$super, doc, dst, selector</span>) </span>{
            $<span class="hljs-keyword">super</span>();
            <span class="hljs-keyword">this</span>.doc = doc;
            <span class="hljs-keyword">this</span>.dst = dst;
            <span class="hljs-keyword">this</span>.selector = selector;
            <span class="hljs-keyword">this</span>.record = <span class="hljs-literal">null</span>;
        },
        <span class="hljs-attr">beginRecord</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysID, op</span>) </span>{
            <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.selector.isSelected(sysID, op))
                <span class="hljs-keyword">return</span>;
            <span class="hljs-keyword">var</span> record = <span class="hljs-keyword">this</span>._createElement(<span class="hljs-string">"record"</span>);
            record.setAttribute(<span class="hljs-string">"sys_id"</span>, sysID);
            record.setAttribute(<span class="hljs-string">"operation"</span>, op);
            <span class="hljs-keyword">this</span>.record = record;
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        },
        <span class="hljs-attr">endRecord</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysID</span>) </span>{
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.record)
                <span class="hljs-keyword">this</span>.dst.appendChild(<span class="hljs-keyword">this</span>.record);
            <span class="hljs-keyword">this</span>.record = <span class="hljs-literal">null</span>;
        },
        <span class="hljs-attr">changedField</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysID, info</span>) </span>{
            <span class="hljs-keyword">var</span> node = <span class="hljs-keyword">this</span>._createElement(<span class="hljs-string">"field"</span>);
            <span class="hljs-keyword">this</span>._populateFieldNode(node, info);
            <span class="hljs-keyword">this</span>.record.appendChild(node);
        },
        <span class="hljs-attr">_populateFieldNode</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">node, info</span>) </span>{
            node.setAttribute(<span class="hljs-string">'name'</span>, info.getName());
            node.setAttribute(<span class="hljs-string">'modified'</span>, info.isModified().toString());
            node.setAttribute(<span class="hljs-string">'value_set'</span>, info.isValueSet().toString());
            node.setAttribute(<span class="hljs-string">'dsp_set'</span>, info.isDisplayValueSet().toString());
            <span class="hljs-keyword">this</span>._appendValueNode(node, <span class="hljs-string">'value'</span>, info.value);
            <span class="hljs-keyword">if</span> (info.displaySet)
                <span class="hljs-keyword">this</span>._appendValueNode(node, <span class="hljs-string">'display_value'</span>, info.displayValue);
        },
        <span class="hljs-attr">_createElement</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.doc.createElement(name);
        },
        <span class="hljs-attr">_createTextNode</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.doc.createTextNode(value);
        },
        <span class="hljs-attr">_appendValueNode</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">dst, name, value</span>) </span>{
            <span class="hljs-keyword">if</span> (!value)
                value = <span class="hljs-string">''</span>;
            <span class="hljs-keyword">var</span> node = <span class="hljs-keyword">this</span>._createElement(name);
            <span class="hljs-keyword">var</span> text = <span class="hljs-keyword">this</span>._createTextNode(value);
            node.appendChild(text);
            dst.appendChild(node);
        },
        <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-string">'GlideListEditor.XmlSerializingReceiver'</span>;
        }
    });
GlideListEditor.ChangeCounter = Class.create(
    GwtListEditorPendingChanges.RecordReceiver, {
        <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">selector</span>) </span>{
            <span class="hljs-keyword">this</span>.selector = selector;
            <span class="hljs-keyword">this</span>.changeCount = <span class="hljs-number">0</span>;
        },
        <span class="hljs-attr">changedRecord</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysID, record</span>) </span>{
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.selector.isSelected(sysID, record.operation))
                <span class="hljs-keyword">this</span>.changeCount++;
        },
        <span class="hljs-attr">isDone</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.changeCount &gt; <span class="hljs-number">0</span>;
        },
        <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-string">'GlideListEditor.ChangeCounter'</span>;
        }
    });
GlideListEditor.IsModifiedRecordSelector = Class.create({
    <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">changes</span>) </span>{
        <span class="hljs-keyword">this</span>.changes = changes;
    },
    <span class="hljs-attr">isSelected</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysID, op</span>) </span>{
        <span class="hljs-keyword">if</span> ((<span class="hljs-string">"add"</span> === op) || (<span class="hljs-string">"delete"</span> === op) || (<span class="hljs-string">"delete_pending"</span> === op) || (<span class="hljs-string">"add_existing"</span> === op))
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">var</span> record = <span class="hljs-keyword">this</span>.changes.get(sysID);
        <span class="hljs-keyword">return</span> record.isModified();
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">'GlideListEditor.IsModifiedRecordSelector'</span>;
    }
});;
<span class="hljs-comment">/*! RESOURCE: /scripts/GlideListAggregates.js */</span>
<span class="hljs-keyword">var</span> GlideListAggregates = Class.create({
    <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">tableController</span>) </span>{
        <span class="hljs-keyword">this</span>.aggregates = {};
        <span class="hljs-keyword">this</span>.tableController = tableController;
        <span class="hljs-keyword">this</span>._initAggregates();
    },
    <span class="hljs-attr">getAggregate</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName, type</span>) </span>{
        <span class="hljs-keyword">var</span> agg = <span class="hljs-keyword">this</span>.aggregates[fieldName + <span class="hljs-string">":"</span> + type];
        <span class="hljs-keyword">if</span> (!agg)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">return</span> agg;
    },
    <span class="hljs-attr">getAggregateValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName, type</span>) </span>{
        <span class="hljs-keyword">var</span> agg = <span class="hljs-keyword">this</span>.aggregates[fieldName + <span class="hljs-string">":"</span> + type];
        <span class="hljs-keyword">if</span> (!agg)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">return</span> agg.value;
    },
    <span class="hljs-attr">getAggregateElement</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName, type</span>) </span>{
        <span class="hljs-keyword">var</span> agg = <span class="hljs-keyword">this</span>.getAggregate(fieldName, type);
        <span class="hljs-keyword">if</span> (!agg)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">var</span> td = <span class="hljs-keyword">this</span>.tableController.getCellByNdx(agg.rowNdx, agg.colNdx);
        <span class="hljs-keyword">var</span> spans = td.getElementsByTagName(<span class="hljs-string">"SPAN"</span>);
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> spanNdx = <span class="hljs-number">0</span>; spanNdx &lt; spans.length; spanNdx++) {
            <span class="hljs-keyword">var</span> span = spans[spanNdx];
            <span class="hljs-keyword">if</span> (!hasClassName(span, <span class="hljs-string">"aggregate_value"</span>))
                <span class="hljs-keyword">continue</span>;
            <span class="hljs-keyword">var</span> aggtype = getAttributeValue(span, <span class="hljs-string">"aggregate_type"</span>);
            <span class="hljs-keyword">if</span> (aggtype == type)
                <span class="hljs-keyword">return</span> span;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    },
    <span class="hljs-attr">getAggregateFields</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.aggregateFields;
    },
    <span class="hljs-attr">updateAggregates</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName, oldValue, newValue</span>) </span>{
        <span class="hljs-keyword">if</span> (oldValue == newValue)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">this</span>._updateAggregate(fieldName, <span class="hljs-string">"MIN"</span>, oldValue, newValue);
        <span class="hljs-keyword">this</span>._updateAggregate(fieldName, <span class="hljs-string">"MAX"</span>, oldValue, newValue);
        <span class="hljs-keyword">this</span>._updateAggregate(fieldName, <span class="hljs-string">"SUM"</span>, oldValue, newValue);
        <span class="hljs-keyword">this</span>._updateAggregate(fieldName, <span class="hljs-string">"AVG"</span>, oldValue, newValue, <span class="hljs-number">0</span>);
    },
    <span class="hljs-attr">addToAggregates</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName, value</span>) </span>{
        <span class="hljs-keyword">if</span> (value != <span class="hljs-string">""</span>) {
            <span class="hljs-keyword">this</span>._updateAggregate(fieldName, <span class="hljs-string">"MIN"</span>, <span class="hljs-literal">null</span>, value);
            <span class="hljs-keyword">this</span>._updateAggregate(fieldName, <span class="hljs-string">"MAX"</span>, <span class="hljs-literal">null</span>, value);
            <span class="hljs-keyword">this</span>._updateAggregate(fieldName, <span class="hljs-string">"SUM"</span>, <span class="hljs-literal">null</span>, value);
        }
        <span class="hljs-keyword">this</span>._updateAggregate(fieldName, <span class="hljs-string">"AVG"</span>, <span class="hljs-literal">null</span>, value, <span class="hljs-number">1</span>);
    },
    <span class="hljs-attr">removeFromAggregates</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName, value</span>) </span>{
        <span class="hljs-keyword">if</span> (value != <span class="hljs-string">""</span>) {
            <span class="hljs-keyword">this</span>._updateAggregate(fieldName, <span class="hljs-string">"MIN"</span>, value, <span class="hljs-literal">null</span>);
            <span class="hljs-keyword">this</span>._updateAggregate(fieldName, <span class="hljs-string">"MAX"</span>, value, <span class="hljs-literal">null</span>);
            <span class="hljs-keyword">this</span>._updateAggregate(fieldName, <span class="hljs-string">"SUM"</span>, value, <span class="hljs-literal">null</span>);
        }
        <span class="hljs-keyword">this</span>._updateAggregate(fieldName, <span class="hljs-string">"AVG"</span>, value, <span class="hljs-literal">null</span>, <span class="hljs-number">-1</span>);
    },
    <span class="hljs-attr">rowCountChanged</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">increment</span>) </span>{
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> k <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.aggregates)
            <span class="hljs-keyword">this</span>.aggregates[k].rowNdx += increment;
    },
    <span class="hljs-attr">_initAggregates</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> fields = {};
        <span class="hljs-keyword">this</span>.aggregateRow = <span class="hljs-number">-1</span>;
        <span class="hljs-keyword">this</span>.aggregates = {};
        <span class="hljs-keyword">this</span>.aggregateFields = [];
        <span class="hljs-keyword">var</span> rowCount = <span class="hljs-keyword">this</span>.tableController.getRowCount();
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> rowNdx = <span class="hljs-number">0</span>; rowNdx &lt; rowCount; rowNdx++) {
            <span class="hljs-keyword">var</span> row = <span class="hljs-keyword">this</span>.tableController.getRowByNdx(rowNdx);
            <span class="hljs-keyword">if</span> (!hasClassName(row, <span class="hljs-string">"aggregate"</span>))
                <span class="hljs-keyword">continue</span>;
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> colNdx = <span class="hljs-number">0</span>; colNdx &lt; row.cells.length; colNdx++) {
                <span class="hljs-keyword">var</span> spans = row.cells[colNdx].getElementsByTagName(<span class="hljs-string">"SPAN"</span>);
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> spanNdx = <span class="hljs-number">0</span>; spanNdx &lt; spans.length; spanNdx++) {
                    <span class="hljs-keyword">var</span> span = spans[spanNdx];
                    <span class="hljs-keyword">if</span> (!hasClassName(span, <span class="hljs-string">"aggregate_value"</span>))
                        <span class="hljs-keyword">continue</span>;
                    <span class="hljs-keyword">var</span> type = getAttributeValue(span, <span class="hljs-string">"aggregate_type"</span>);
                    <span class="hljs-keyword">if</span> (!type)
                        <span class="hljs-keyword">continue</span>;
                    <span class="hljs-keyword">this</span>._addAggregate(fields,
                        getAttributeValue(span, <span class="hljs-string">"aggregate_field"</span>),
                        type,
                        getAttributeValue(span, <span class="hljs-string">"aggregate_count"</span>),
                        getAttributeValue(span, <span class="hljs-string">"aggregate_value"</span>),
                        rowNdx, colNdx);
                }
            }
        }
    },
    <span class="hljs-attr">_addAggregate</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fields, fieldName, type, count, value, rowNdx, colNdx</span>) </span>{
        <span class="hljs-keyword">this</span>.aggregates[fieldName + <span class="hljs-string">":"</span> + type] = {
            <span class="hljs-attr">type</span>: type,
            <span class="hljs-attr">count</span>: count,
            <span class="hljs-attr">value</span>: value,
            <span class="hljs-attr">rowNdx</span>: rowNdx,
            <span class="hljs-attr">colNdx</span>: colNdx
        };
        <span class="hljs-keyword">if</span> (!fields[fieldName]) {
            fields[fieldName] = <span class="hljs-literal">true</span>;
            <span class="hljs-keyword">this</span>.aggregateFields.push(fieldName);
        }
    },
    <span class="hljs-attr">_updateAggregate</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName, type, oldValue, newValue, countChange</span>) </span>{
        <span class="hljs-keyword">var</span> agg = <span class="hljs-keyword">this</span>.getAggregate(fieldName, type);
        <span class="hljs-keyword">if</span> (!agg)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">var</span> aggValue = <span class="hljs-string">''</span>;
        <span class="hljs-keyword">if</span> (agg.type == <span class="hljs-string">"MIN"</span>)
            aggValue = <span class="hljs-keyword">this</span>._updateAggregateMin(agg, oldValue, newValue);
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (agg.type == <span class="hljs-string">"MAX"</span>)
            aggValue = <span class="hljs-keyword">this</span>._updateAggregateMax(agg, oldValue, newValue);
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (agg.type == <span class="hljs-string">"SUM"</span>)
            aggValue = <span class="hljs-keyword">this</span>._updateAggregateTotal(agg, oldValue, newValue);
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (agg.type == <span class="hljs-string">"AVG"</span>)
            aggValue = <span class="hljs-keyword">this</span>._updateAggregateAverage(agg, oldValue, newValue, countChange);
        <span class="hljs-keyword">this</span>._setAggregate(agg, fieldName, type, aggValue, countChange);
    },
    <span class="hljs-attr">_setAggregate</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">agg, fieldName, type, aggValue, countChange</span>) </span>{
        <span class="hljs-keyword">if</span> (aggValue != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">var</span> aggSpan = <span class="hljs-keyword">this</span>.getAggregateElement(fieldName, type);
            <span class="hljs-keyword">if</span> (!aggSpan)
                <span class="hljs-keyword">return</span>;
            agg.value = aggValue;
            setAttributeValue(aggSpan, <span class="hljs-string">"aggregate_value"</span>, agg.value);
            <span class="hljs-keyword">if</span> (((type == <span class="hljs-string">"SUM"</span>) || (type == <span class="hljs-string">"AVG"</span>)) &amp;&amp; agg.value % <span class="hljs-number">1</span> != <span class="hljs-number">0</span>)
                aggSpan.innerHTML = <span class="hljs-keyword">this</span>._format(agg.value);
            <span class="hljs-keyword">else</span>
                aggSpan.innerHTML = aggValue;
            <span class="hljs-keyword">if</span> (countChange)
                setAttributeValue(aggSpan, <span class="hljs-string">"aggregate_count"</span>, agg.count);
        }
    },
    <span class="hljs-attr">_updateAggregateMin</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">agg, oldValue, newValue</span>) </span>{
        <span class="hljs-keyword">if</span> (agg.value == <span class="hljs-string">"?"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">if</span> ((newValue != <span class="hljs-literal">null</span>) &amp;&amp; (newValue &lt; agg.value))
            <span class="hljs-keyword">return</span> newValue;
        <span class="hljs-keyword">if</span> ((oldValue != <span class="hljs-literal">null</span>) &amp;&amp; (oldValue == agg.value))
            <span class="hljs-keyword">return</span> <span class="hljs-string">"?"</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    },
    <span class="hljs-attr">_updateAggregateMax</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">agg, oldValue, newValue</span>) </span>{
        <span class="hljs-keyword">if</span> (agg.value == <span class="hljs-string">"?"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">if</span> ((newValue != <span class="hljs-literal">null</span>) &amp;&amp; (newValue &gt; agg.value))
            <span class="hljs-keyword">return</span> newValue;
        <span class="hljs-keyword">if</span> ((oldValue != <span class="hljs-literal">null</span>) &amp;&amp; (oldValue == agg.value))
            <span class="hljs-keyword">return</span> <span class="hljs-string">"?"</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    },
    <span class="hljs-attr">_updateAggregateTotal</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">agg, oldValue, newValue</span>) </span>{
        <span class="hljs-keyword">if</span> (!oldValue || <span class="hljs-built_in">isNaN</span>(oldValue))
            oldValue = <span class="hljs-string">'0'</span>;
        <span class="hljs-keyword">if</span> (!newValue || <span class="hljs-built_in">isNaN</span>(newValue))
            newValue = <span class="hljs-string">'0'</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNaN</span>(agg.value))
            <span class="hljs-keyword">return</span>;
        oldValue = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Number</span>(oldValue);
        newValue = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Number</span>(newValue);
        <span class="hljs-keyword">var</span> total = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Number</span>(agg.value);
        total += (newValue - oldValue);
        total = <span class="hljs-built_in">parseFloat</span>(total.toFixed(<span class="hljs-keyword">this</span>._precision(agg.value, oldValue, newValue)));
        <span class="hljs-keyword">return</span> total;
    },
    <span class="hljs-attr">_precision</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">total, oldValue, newValue</span>) </span>{
        <span class="hljs-keyword">var</span> len = <span class="hljs-built_in">Math</span>.max(<span class="hljs-keyword">this</span>._precisionLength(total), <span class="hljs-keyword">this</span>._precisionLength(oldValue), <span class="hljs-keyword">this</span>._precisionLength(newValue));
        <span class="hljs-keyword">return</span> len;
    },
    <span class="hljs-attr">_precisionLength</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
        value = <span class="hljs-built_in">parseFloat</span>(value);
        <span class="hljs-keyword">var</span> precisionLen = <span class="hljs-string">""</span>;
        <span class="hljs-keyword">if</span> (value.toString().indexOf(<span class="hljs-string">"."</span>) &gt;= <span class="hljs-number">0</span>) {
            precisionLen = value.toString().substr(value.toString().indexOf(<span class="hljs-string">"."</span>) + <span class="hljs-number">1</span>, value.toString().length);
        }
        <span class="hljs-keyword">return</span> precisionLen.length;
    },
    <span class="hljs-attr">_updateAggregateAverage</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">agg, oldValue, newValue, countChange</span>) </span>{
        <span class="hljs-keyword">if</span> (!oldValue || <span class="hljs-built_in">isNaN</span>(oldValue))
            oldValue = <span class="hljs-string">'0'</span>;
        <span class="hljs-keyword">if</span> (!newValue || <span class="hljs-built_in">isNaN</span>(newValue))
            newValue = <span class="hljs-string">'0'</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNaN</span>(agg.value) || <span class="hljs-built_in">isNaN</span>(agg.count))
            <span class="hljs-keyword">return</span>;
        agg.count = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Number</span>(agg.count);
        <span class="hljs-keyword">var</span> value = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Number</span>(agg.value);
        <span class="hljs-keyword">var</span> total = (value * agg.count);
        agg.count += countChange;
        <span class="hljs-keyword">if</span> (!agg.count)
            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
        oldValue = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Number</span>(oldValue);
        newValue = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Number</span>(newValue);
        total += (newValue - oldValue);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._format(total / agg.count);
    },
    <span class="hljs-attr">_format</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">num</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNaN</span>(num))
            <span class="hljs-keyword">return</span> num;
        <span class="hljs-keyword">return</span> num.toFixed(<span class="hljs-number">2</span>);
    },
    <span class="hljs-attr">resetAggregates</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>._initAggregates();
    },
    <span class="hljs-attr">type</span>: <span class="hljs-string">'GlideListAggregate'</span>
});;
<span class="hljs-comment">/*! RESOURCE: /scripts/GwtListEditRecord.js */</span>
<span class="hljs-keyword">var</span> GwtListEditRecord = Class.create({
    <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysId</span>) </span>{
        <span class="hljs-keyword">this</span>.sysId = sysId;
        <span class="hljs-keyword">if</span> (sysId == <span class="hljs-string">"-1"</span>)
            <span class="hljs-keyword">this</span>.operation = <span class="hljs-string">"default_values"</span>;
        <span class="hljs-keyword">else</span>
            <span class="hljs-keyword">this</span>.operation = <span class="hljs-string">"update"</span>;
        <span class="hljs-keyword">this</span>.fields = {};
    },
    <span class="hljs-attr">addField</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name</span>) </span>{
        <span class="hljs-keyword">var</span> f = <span class="hljs-keyword">this</span>.getField(name);
        <span class="hljs-keyword">if</span> (f)
            <span class="hljs-keyword">return</span> f;
        <span class="hljs-keyword">this</span>.fields[name] = <span class="hljs-keyword">new</span> GwtListEditField(name);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.fields[name];
    },
    <span class="hljs-attr">getField</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.fields[name];
    },
    <span class="hljs-attr">getFields</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.fields;
    },
    <span class="hljs-attr">setOperation</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">operation</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.sysId == <span class="hljs-string">"-1"</span>)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">this</span>.operation = operation;
    },
    <span class="hljs-attr">isModified</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> n <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.fields) {
            <span class="hljs-keyword">var</span> field = <span class="hljs-keyword">this</span>.fields[n];
            <span class="hljs-keyword">if</span> (field.isModified())
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    },
    <span class="hljs-attr">isNew</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"new"</span> === <span class="hljs-keyword">this</span>.operation;
    },
    <span class="hljs-attr">isDefaultValues</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.sysId == <span class="hljs-string">"-1"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-string">"default_values"</span> === <span class="hljs-keyword">this</span>.operation;
    },
    <span class="hljs-attr">isAdded</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"add"</span> === <span class="hljs-keyword">this</span>.operation || <span class="hljs-string">"add_existing"</span> === <span class="hljs-keyword">this</span>.operation;
    },
    <span class="hljs-attr">isUpdated</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"update"</span> === <span class="hljs-keyword">this</span>.operation;
    },
    <span class="hljs-attr">isDeleted</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-string">"delete_pending"</span> === <span class="hljs-keyword">this</span>.operation)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">return</span> (<span class="hljs-string">"delete"</span> === <span class="hljs-keyword">this</span>.operation);
    },
    <span class="hljs-attr">clearModified</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> n <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.fields)
            <span class="hljs-keyword">this</span>.fields[n].clearModified();
    },
    <span class="hljs-attr">type</span>: <span class="hljs-string">'GwtListEditRecord'</span>
});
<span class="hljs-keyword">var</span> GwtListEditField = Class.create({
    <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name</span>) </span>{
        <span class="hljs-keyword">this</span>.name = name;
        <span class="hljs-keyword">this</span>.label = name;
        <span class="hljs-keyword">this</span>.referenceValid = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">this</span>._clear();
    },
    <span class="hljs-attr">getName</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.name;
    },
    <span class="hljs-attr">getLabel</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.label;
    },
    <span class="hljs-attr">getOriginalValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.originalValue;
    },
    <span class="hljs-attr">getOriginalDisplay</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.originalDisplay;
    },
    <span class="hljs-attr">getValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.value;
    },
    <span class="hljs-attr">getDisplayValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.displayValue;
    },
    <span class="hljs-attr">getRenderValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.renderValue;
    },
    <span class="hljs-attr">isValueSet</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.valueSet;
    },
    <span class="hljs-attr">isDisplayValueSet</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.displaySet;
    },
    <span class="hljs-attr">isRenderValueSet</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.renderSet;
    },
    <span class="hljs-attr">isModified</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.modified;
    },
    <span class="hljs-attr">isWritable</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.canWrite;
    },
    <span class="hljs-attr">isMandatory</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.mandatory;
    },
    <span class="hljs-attr">isOKExtension</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.okExtension;
    },
    <span class="hljs-attr">isReferenceValid</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.referenceValid;
    },
    <span class="hljs-attr">clearModified</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.modified = <span class="hljs-literal">false</span>;
    },
    <span class="hljs-attr">setWritable</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">canWrite</span>) </span>{
        <span class="hljs-keyword">this</span>.canWrite = canWrite;
    },
    <span class="hljs-attr">setMandatory</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">mandatory</span>) </span>{
        <span class="hljs-keyword">this</span>.mandatory = mandatory;
    },
    <span class="hljs-attr">setOKExtension</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">okExtension</span>) </span>{
        <span class="hljs-keyword">this</span>.okExtension = okExtension;
    },
    <span class="hljs-attr">setLabel</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">label</span>) </span>{
        <span class="hljs-keyword">this</span>.label = label;
    },
    <span class="hljs-attr">setInitialValues</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">v, dsp</span>) </span>{
        <span class="hljs-keyword">this</span>._clear();
        <span class="hljs-keyword">this</span>.originalValue = v;
        <span class="hljs-keyword">this</span>.originalDisplay = dsp;
        <span class="hljs-keyword">this</span>.value = v;
        <span class="hljs-keyword">this</span>.displayValue = dsp;
        <span class="hljs-keyword">this</span>._convertNullsToBlank();
    },
    <span class="hljs-attr">setValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">v</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.value != v)
            <span class="hljs-keyword">this</span>.modified = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">this</span>.value = v;
        <span class="hljs-keyword">this</span>.valueSet = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">this</span>.renderSet = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">this</span>.renderValue = <span class="hljs-string">""</span>;
        <span class="hljs-keyword">this</span>._convertNullsToBlank();
    },
    <span class="hljs-attr">setDisplayValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">v</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.displayValue != v)
            <span class="hljs-keyword">this</span>.modified = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">this</span>.displayValue = v;
        <span class="hljs-keyword">this</span>.displaySet = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">this</span>.renderSet = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">this</span>.renderValue = <span class="hljs-string">""</span>;
        <span class="hljs-keyword">this</span>._convertNullsToBlank();
    },
    <span class="hljs-attr">setRenderValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">v</span>) </span>{
        <span class="hljs-keyword">this</span>.renderValue = v;
        <span class="hljs-keyword">this</span>.renderSet = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">this</span>._convertNullsToBlank();
    },
    <span class="hljs-attr">setReferenceValid</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">valid</span>) </span>{
        <span class="hljs-keyword">this</span>.referenceValid = valid;
    },
    <span class="hljs-attr">unsetValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.value = <span class="hljs-string">''</span>;
        <span class="hljs-keyword">this</span>.valueSet = <span class="hljs-literal">false</span>;
    },
    <span class="hljs-attr">unsetDisplayValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.displayValue = <span class="hljs-string">''</span>;
        <span class="hljs-keyword">this</span>.displaySet = <span class="hljs-literal">false</span>;
    },
    <span class="hljs-attr">unsetRenderValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.renderValue = <span class="hljs-string">''</span>;
        <span class="hljs-keyword">this</span>.renderSet = <span class="hljs-literal">false</span>;
    },
    <span class="hljs-attr">_clear</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.value = <span class="hljs-string">''</span>;
        <span class="hljs-keyword">this</span>.displayValue = <span class="hljs-string">''</span>;
        <span class="hljs-keyword">this</span>.renderValue = <span class="hljs-string">''</span>;
        <span class="hljs-keyword">this</span>.valueSet = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">this</span>.displaySet = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">this</span>.renderSet = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">this</span>.modified = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">this</span>.canWrite = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">this</span>.mandatory = <span class="hljs-literal">false</span>;
    },
    <span class="hljs-attr">_convertNullsToBlank</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.value)
            <span class="hljs-keyword">this</span>.value = <span class="hljs-string">''</span>;
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.displayValue)
            <span class="hljs-keyword">this</span>.displayValue = <span class="hljs-string">''</span>;
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.renderValue)
            <span class="hljs-keyword">this</span>.renderValue = <span class="hljs-string">''</span>;
    },
    <span class="hljs-attr">type</span>: <span class="hljs-string">'GwtListEditField'</span>
});;
<span class="hljs-comment">/*! RESOURCE: /scripts/GwtGridEdit.js */</span>
<span class="hljs-keyword">var</span> GwtGridEdit = Class.create({
    <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">tableController</span>) </span>{
        <span class="hljs-keyword">this</span>.tableController = tableController;
        <span class="hljs-keyword">this</span>.anchor = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">this</span>.rec = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">this</span>.col = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">this</span>.editOnInsert = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">this</span>.updateTable();
        Event.observe(<span class="hljs-built_in">window</span>, <span class="hljs-string">'resize'</span>, <span class="hljs-keyword">this</span>._resize.bind(<span class="hljs-keyword">this</span>));
        CustomEvent.observe(<span class="hljs-string">"partial.page.reload"</span>, <span class="hljs-keyword">this</span>.clearCursor.bind(<span class="hljs-keyword">this</span>));
        CustomEvent.observe(<span class="hljs-string">"tab.activated"</span>, <span class="hljs-keyword">this</span>.clearCursor.bind(<span class="hljs-keyword">this</span>));
        CustomEvent.observe(<span class="hljs-string">'list.section.toggle'</span>, <span class="hljs-keyword">this</span>.clearCursor.bind(<span class="hljs-keyword">this</span>));
    },
    <span class="hljs-attr">updateTable</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.tableController.observeOnBody(<span class="hljs-string">"keydown"</span>, <span class="hljs-keyword">this</span>.keyDown.bind(<span class="hljs-keyword">this</span>));
        <span class="hljs-keyword">this</span>.tableController.observeOnBody(<span class="hljs-string">"keypress"</span>, <span class="hljs-keyword">this</span>.keyPress.bind(<span class="hljs-keyword">this</span>));
        <span class="hljs-keyword">this</span>.tableController.observeOnBody(<span class="hljs-string">"blur"</span>, <span class="hljs-keyword">this</span>.blur.bind(<span class="hljs-keyword">this</span>));
        <span class="hljs-keyword">if</span> (isMSIE)
            <span class="hljs-keyword">this</span>.tableController.observeOnBody(<span class="hljs-string">"focusout"</span>, <span class="hljs-keyword">this</span>.blur.bind(<span class="hljs-keyword">this</span>));
        <span class="hljs-keyword">this</span>.tableController.observe(<span class="hljs-string">'glide:list_v2.edit.saves_completed'</span>, <span class="hljs-keyword">this</span>._handleSavesCompleted.bind(<span class="hljs-keyword">this</span>));
        <span class="hljs-keyword">this</span>.tableController.observe(<span class="hljs-string">'glide:list_v2.edit.row_added'</span>, <span class="hljs-keyword">this</span>._handleRowAdded.bind(<span class="hljs-keyword">this</span>));
        <span class="hljs-keyword">this</span>.cellSelector = <span class="hljs-keyword">this</span>.tableController.buildCellSelector();
    },
    <span class="hljs-attr">unLoadTable</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.cellSelector = <span class="hljs-literal">null</span>;
    },
    <span class="hljs-attr">setAnchorCell</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">anchor</span>) </span>{
        <span class="hljs-keyword">this</span>.anchor = $(anchor);
        <span class="hljs-keyword">this</span>.setCursorElement(<span class="hljs-keyword">this</span>.anchor);
    },
    <span class="hljs-attr">getAnchorCell</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.anchor;
    },
    <span class="hljs-attr">getAnchorSysId</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.tableController.getSysIdByCell(<span class="hljs-keyword">this</span>.getAnchorCell());
    },
    <span class="hljs-attr">getAnchorAttribute</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">attribute</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.tableController.getAttributeByCell(attribute, <span class="hljs-keyword">this</span>.getAnchorCell());
    },
    <span class="hljs-attr">getAnchorFqFieldName</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> anchor = <span class="hljs-keyword">this</span>.getAnchorCell();
        <span class="hljs-keyword">var</span> row = <span class="hljs-keyword">this</span>.tableController.getRowByCell(anchor);
        <span class="hljs-keyword">if</span> (row.hasAttribute(<span class="hljs-string">'data-detail-row'</span>))
            <span class="hljs-keyword">return</span> row.getAttribute(<span class="hljs-string">'data-detail-row'</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.tableController.getNameFromColumn(anchor.cellIndex);
    },
    <span class="hljs-attr">getAnchorRow</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.tableController.getRowByCell(<span class="hljs-keyword">this</span>.getAnchorCell());
    },
    <span class="hljs-attr">getAnchorPos</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.tableController.getRecordPos(<span class="hljs-keyword">this</span>.getAnchorRow());
    },
    <span class="hljs-attr">keyPress</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">if</span> ((evt.keyCode != Event.KEY_TAB) &amp;&amp; !<span class="hljs-keyword">this</span>._inEditor())
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">switch</span> (evt.keyCode) {
            <span class="hljs-keyword">case</span> Event.KEY_TAB:
            <span class="hljs-keyword">case</span> Event.KEY_UP:
            <span class="hljs-keyword">case</span> Event.KEY_DOWN:
            <span class="hljs-keyword">case</span> Event.KEY_RIGHT:
            <span class="hljs-keyword">case</span> Event.KEY_LEFT:
                evt.stop();
                <span class="hljs-keyword">break</span>;
        }
    },
    <span class="hljs-attr">keyDown</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        <span class="hljs-keyword">if</span> (e.keyCode == Event.KEY_TAB) {
            <span class="hljs-keyword">var</span> shouldStop = <span class="hljs-keyword">this</span>.tabKey(e);
            <span class="hljs-keyword">if</span> (shouldStop)
                e.stop();
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._inEditor())
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">switch</span> (e.keyCode) {
            <span class="hljs-keyword">case</span> Event.KEY_DOWN:
                e.stop();
                <span class="hljs-keyword">if</span> (e.shiftKey)
                    <span class="hljs-keyword">this</span>.selectVerticalKey(e, <span class="hljs-string">"down"</span>);
                <span class="hljs-keyword">else</span>
                    <span class="hljs-keyword">this</span>.downArrow(e);
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> Event.KEY_UP:
                e.stop();
                <span class="hljs-keyword">if</span> (e.shiftKey)
                    <span class="hljs-keyword">this</span>.selectVerticalKey(e, <span class="hljs-string">"up"</span>);
                <span class="hljs-keyword">else</span>
                    <span class="hljs-keyword">this</span>.upArrow(e);
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> Event.KEY_RIGHT:
                e.stop();
                <span class="hljs-keyword">this</span>.moveRight();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> Event.KEY_LEFT:
                e.stop();
                <span class="hljs-keyword">this</span>.moveLeft();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> Event.KEY_RETURN:
                e.preventDefault();
                <span class="hljs-keyword">if</span> (e.shiftKey || e.ctrlKey)
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.tableController.isHierarchical())
                    e.stop();
                <span class="hljs-keyword">this</span>.editCursor();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> Event.KEY_ESC:
                <span class="hljs-keyword">this</span>.clearCursor();
                <span class="hljs-keyword">break</span>;
        }
    },
    <span class="hljs-attr">blur</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">this</span>.hideCursor();
    },
    <span class="hljs-attr">editCursor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> cursor = <span class="hljs-keyword">this</span>.getCursorCell();
        <span class="hljs-keyword">if</span> (cursor)
            GwtListEditor.forPage.edit(cursor);
    },
    <span class="hljs-attr">editNextRow</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.tableController.insertRow &amp;&amp; (<span class="hljs-keyword">this</span>.rec &gt;= <span class="hljs-keyword">this</span>.cellSelector.maxRow))
            <span class="hljs-keyword">this</span>.editOnInsert = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">else</span>
            <span class="hljs-keyword">this</span>.editOnInsert = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">this</span>.downArrow();
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.editOnInsert)
            <span class="hljs-keyword">this</span>.editCursor();
    },
    <span class="hljs-attr">selectVerticalKey</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt, direction</span>) </span>{
        <span class="hljs-keyword">this</span>.selectVertical(evt, direction, <span class="hljs-keyword">this</span>.rec, <span class="hljs-keyword">this</span>.col);
        <span class="hljs-keyword">if</span> (<span class="hljs-string">"down"</span> === direction)
            <span class="hljs-keyword">this</span>._fireMove(<span class="hljs-keyword">this</span>.cellSelector.rowTo, <span class="hljs-keyword">this</span>.col);
        <span class="hljs-keyword">if</span> (<span class="hljs-string">"up"</span> === direction)
            <span class="hljs-keyword">this</span>._fireMove(<span class="hljs-keyword">this</span>.cellSelector.rowFrom, <span class="hljs-keyword">this</span>.col);
    },
    <span class="hljs-attr">downArrow</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.clearSelected();
        <span class="hljs-keyword">var</span> rec = <span class="hljs-keyword">this</span>.tableController.getNextRowByPos(<span class="hljs-keyword">this</span>.rec);
        <span class="hljs-keyword">if</span> (!rec)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">this</span>.rec = rec;
        <span class="hljs-keyword">this</span>._updateCursorCell();
    },
    <span class="hljs-attr">upArrow</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.clearSelected();
        <span class="hljs-keyword">var</span> rec = <span class="hljs-keyword">this</span>.tableController.getPrevRowByPos(<span class="hljs-keyword">this</span>.rec);
        <span class="hljs-keyword">if</span> (!rec)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">this</span>.rec = rec;
        <span class="hljs-keyword">this</span>._updateCursorCell();
    },
    <span class="hljs-attr">moveRight</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.clearSelected();
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.col + <span class="hljs-number">2</span> &gt;= <span class="hljs-keyword">this</span>._getMaxCol() || hasClassName(<span class="hljs-keyword">this</span>.getRowByPos(<span class="hljs-keyword">this</span>.rec), <span class="hljs-string">'list_row_detail'</span>)) {
            <span class="hljs-keyword">var</span> rec = <span class="hljs-keyword">this</span>.tableController.getNextRowByPos(<span class="hljs-keyword">this</span>.rec);
            <span class="hljs-keyword">if</span> (!rec) {
                <span class="hljs-keyword">var</span> id = <span class="hljs-keyword">this</span>.tableController.listID + <span class="hljs-string">'_bottom'</span>;
                setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                    $(id).focus();
                }, <span class="hljs-number">0</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
            <span class="hljs-keyword">this</span>.rec = rec;
            <span class="hljs-keyword">this</span>.col = isDoctype() ? <span class="hljs-number">2</span> : <span class="hljs-number">1</span>;
        } <span class="hljs-keyword">else</span>
            <span class="hljs-keyword">this</span>.col++;
        <span class="hljs-keyword">this</span>._updateCursorCell();
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    },
    <span class="hljs-attr">moveLeft</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.clearSelected();
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.rec == <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-keyword">this</span>.col == <span class="hljs-number">1</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">if</span> (isDoctype() &amp;&amp; <span class="hljs-keyword">this</span>.rec == <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-keyword">this</span>.col == <span class="hljs-number">2</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.col == <span class="hljs-number">1</span> || (isDoctype() &amp;&amp; <span class="hljs-keyword">this</span>.col == <span class="hljs-number">2</span>)) {
            <span class="hljs-keyword">var</span> rec = <span class="hljs-keyword">this</span>.tableController.getPrevRowByPos(<span class="hljs-keyword">this</span>.rec);
            <span class="hljs-keyword">var</span> maxCol = <span class="hljs-keyword">this</span>._getMaxCol();
            <span class="hljs-keyword">if</span> (!rec)
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">this</span>.rec = rec;
            <span class="hljs-keyword">this</span>.col = isDoctype() ? maxCol - <span class="hljs-number">2</span> : maxCol - <span class="hljs-number">1</span>;
        } <span class="hljs-keyword">else</span>
            <span class="hljs-keyword">this</span>.col--;
        <span class="hljs-keyword">this</span>._updateCursorCell();
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    },
    <span class="hljs-attr">tabKey</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        <span class="hljs-keyword">this</span>.clearSelected();
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._inEditor()) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        <span class="hljs-keyword">if</span> (e.shiftKey)
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.moveLeft();
        <span class="hljs-keyword">else</span>
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.moveRight();
    },
    <span class="hljs-attr">startTableEdit</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.col = isDoctype() ? <span class="hljs-number">2</span> : <span class="hljs-number">1</span>;
        <span class="hljs-keyword">this</span>.rec = <span class="hljs-number">1</span>;
        <span class="hljs-keyword">this</span>._updateCursorCell();
    },
    <span class="hljs-attr">_inEditor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>.rec != <span class="hljs-number">0</span> || <span class="hljs-keyword">this</span>.col != <span class="hljs-number">0</span>);
    },
    <span class="hljs-attr">_focus</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        <span class="hljs-keyword">var</span> parent = getFormContentParent();
        <span class="hljs-keyword">var</span> scroll = <span class="hljs-keyword">this</span>.getViewPosition(parent);
        <span class="hljs-keyword">this</span>.tableController.focusBody();
        <span class="hljs-keyword">this</span>.setViewPosition(parent, scroll);
    },
    <span class="hljs-attr">getViewPosition</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">parent</span>) </span>{
        <span class="hljs-keyword">var</span> scroll = {
            <span class="hljs-attr">left</span>: parent.scrollLeft,
            <span class="hljs-attr">top</span>: parent.scrollTop
        };
        <span class="hljs-keyword">return</span> scroll;
    },
    <span class="hljs-attr">setViewPosition</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">parent, scroll</span>) </span>{
        <span class="hljs-keyword">if</span> (parent.scrollTop == scroll.top &amp;&amp; parent.scrollLeft == scroll.left)
            <span class="hljs-keyword">return</span>;
        parent.scrollTop = scroll.top;
        parent.scrollLeft = scroll.left;
    },
    <span class="hljs-attr">_updateCursorCell</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>._fireMove();
        <span class="hljs-keyword">var</span> e = <span class="hljs-keyword">this</span>.getCursorCell();
        <span class="hljs-keyword">if</span> (e == <span class="hljs-literal">null</span>)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">this</span>._focus(e);
        <span class="hljs-keyword">this</span>._makeVisible(e);
        <span class="hljs-keyword">this</span>.showCursor();
    },
    <span class="hljs-attr">setCursorElement</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>) </span>{
        <span class="hljs-keyword">var</span> row = <span class="hljs-keyword">this</span>.tableController.getRowByCell(element);
        <span class="hljs-keyword">this</span>.rec = <span class="hljs-keyword">this</span>.tableController.getRecordPos(row);
        <span class="hljs-keyword">this</span>.col = element.cellIndex;
        <span class="hljs-keyword">if</span> (hasClassName(row, <span class="hljs-string">'list_row_detail'</span>))
            <span class="hljs-keyword">this</span>.col = <span class="hljs-number">1</span>;
        <span class="hljs-keyword">this</span>._updateCursorCell();
        <span class="hljs-keyword">this</span>.cellSelector.setAnchor(element);
    },
    <span class="hljs-attr">refreshCursor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>._updateCursorCell();
    },
    <span class="hljs-attr">_makeVisible</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        <span class="hljs-keyword">if</span> (!e.visible())
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">var</span> eVP = e.viewportOffset();
        <span class="hljs-keyword">var</span> vp = <span class="hljs-built_in">document</span>.viewport.getDimensions();
        <span class="hljs-keyword">var</span> eViewOffset = <span class="hljs-keyword">this</span>._getElementViewOffset(e);
        <span class="hljs-keyword">var</span> relatedListOffset = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">if</span> (eVP.left &gt; <span class="hljs-number">44</span> &amp;&amp; eViewOffset.right &lt; vp.width &amp;&amp; eVP.top &gt; <span class="hljs-number">24</span> &amp;&amp; eViewOffset.bottom &lt; vp.height)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">var</span> parent = getFormContentParent();
        <span class="hljs-keyword">if</span> (isDoctype())
            <span class="hljs-keyword">if</span> ($j(e).closest(<span class="hljs-string">'div.custom-form-group'</span>).length != <span class="hljs-number">0</span>) {
                parent = $j(e).closest(<span class="hljs-string">'div.custom-form-group'</span>)[<span class="hljs-number">0</span>];
                relatedListOffset = <span class="hljs-number">44</span>;
            }
        vp.top = <span class="hljs-keyword">this</span>._headerOffsetTop(parent);
        <span class="hljs-keyword">if</span> (e.getWidth() &gt;= vp.width)
            parent.scrollLeft = eViewOffset.left;
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (eVP.left &lt; <span class="hljs-number">44</span>)
            parent.scrollLeft = eViewOffset.left - <span class="hljs-number">44</span>;
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (eViewOffset.right &gt; parent.scrollLeft + vp.width)
            parent.scrollLeft = eViewOffset.right - vp.width + relatedListOffset;
        <span class="hljs-keyword">if</span> (isDoctype() &amp;&amp; <span class="hljs-keyword">this</span>.col == <span class="hljs-number">2</span>)
            parent.scrollLeft = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">if</span> (e.getHeight() &gt;= vp.height)
            parent.scrollTop = eViewOffset.top;
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (eVP.top &lt; (vp.top + <span class="hljs-number">24</span>))
            parent.scrollTop = eViewOffset.top - <span class="hljs-number">24</span>;
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (eViewOffset.bottom &gt; parent.scrollTop + vp.height)
            parent.scrollTop = eViewOffset.bottom - vp.height;
    },
    <span class="hljs-attr">_getElementViewOffset</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        <span class="hljs-keyword">var</span> eOffset = e.cumulativeOffset();
        eOffset.right = eOffset.left + e.getWidth() + <span class="hljs-number">17</span>;
        eOffset.bottom = eOffset.top + e.getHeight() + <span class="hljs-number">21</span>;
        <span class="hljs-keyword">return</span> eOffset;
    },
    <span class="hljs-attr">_headerOffsetTop</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">parent</span>) </span>{
        <span class="hljs-keyword">if</span> (parent == <span class="hljs-built_in">document</span>.body)
            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
        <span class="hljs-keyword">var</span> hdrDiv = $$(<span class="hljs-string">'.section_header_div_no_scroll'</span>);
        <span class="hljs-keyword">var</span> top = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">if</span> (hdrDiv &amp;&amp; hdrDiv.length &gt; <span class="hljs-number">0</span>)
            top = hdrDiv[<span class="hljs-number">0</span>].getHeight();
        <span class="hljs-keyword">return</span> top;
    },
    <span class="hljs-attr">getCursorCell</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.tableController.getCellByPos(<span class="hljs-keyword">this</span>.rec, <span class="hljs-keyword">this</span>.col);
    },
    <span class="hljs-attr">clearCursor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.hideCursor();
        <span class="hljs-keyword">this</span>.rec = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">this</span>.col = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">this</span>.anchor = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">this</span>.clearSelected();
    },
    <span class="hljs-attr">hideCursor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        GwtListEditor.forPage.cursor.hideCursor();
    },
    <span class="hljs-attr">showCursor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.hideCursor();
        <span class="hljs-keyword">var</span> e = <span class="hljs-keyword">this</span>.getCursorCell();
        <span class="hljs-keyword">if</span> (e == <span class="hljs-literal">null</span>)
            <span class="hljs-keyword">return</span>;
        GwtListEditor.forPage.cursor.createCursor(e);
        <span class="hljs-keyword">this</span>.selected = e;
    },
    <span class="hljs-attr">draw</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.rec != <span class="hljs-number">0</span> || <span class="hljs-keyword">this</span>.col != <span class="hljs-number">0</span>)
            <span class="hljs-keyword">this</span>.showCursor();
    },
    <span class="hljs-attr">_resize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (GwtListEditor.forPage.cursor.isHidden())
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">this</span>.showCursor();
    },
    <span class="hljs-attr">_fireMove</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">toRec, toCol</span>) </span>{
        <span class="hljs-keyword">var</span> moveRec = (toRec ? toRec : <span class="hljs-keyword">this</span>.rec);
        <span class="hljs-keyword">var</span> rowNdx = <span class="hljs-keyword">this</span>.tableController.getRecordIndex(moveRec);
        <span class="hljs-keyword">var</span> colNdx = (toCol ? toCol : <span class="hljs-keyword">this</span>.col);
        <span class="hljs-keyword">this</span>.fireFocusMoved(rowNdx, colNdx);
    },
    <span class="hljs-attr">fireFocusMoved</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">toRow, toCol</span>) </span>{
        <span class="hljs-keyword">this</span>.tableController.fireFocusMoved(toRow, toCol);
    },
    <span class="hljs-attr">_getMaxCol</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.cellSelector.getGridInfo();
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.cellSelector.maxCol;
    },
    <span class="hljs-attr">_getMaxRow</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.cellSelector.getGridInfo();
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.cellSelector.maxRow;
    },
    <span class="hljs-attr">_handleSavesCompleted</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">if</span> (evt.memo.listId !== <span class="hljs-keyword">this</span>.tableController.listID)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">this</span>.draw();
    },
    <span class="hljs-attr">_handleRowAdded</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">if</span> (evt.memo.listId !== <span class="hljs-keyword">this</span>.tableController.listID)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">this</span>.cellSelector.setMaxRow(<span class="hljs-keyword">this</span>.cellSelector.maxRow + <span class="hljs-number">1</span>);
        <span class="hljs-keyword">this</span>.draw();
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.editOnInsert) {
            <span class="hljs-keyword">this</span>.downArrow();
            <span class="hljs-keyword">this</span>.editCursor();
            <span class="hljs-keyword">this</span>.editOnInsert = <span class="hljs-literal">false</span>;
        }
    },
    <span class="hljs-attr">getSelectCount</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.cellSelector.selectCount
    },
    <span class="hljs-attr">clearSelected</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.cellSelector.clearSelected();
    },
    <span class="hljs-attr">clearRanges</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.cellSelector.clearRanges();
    },
    <span class="hljs-attr">getSelected</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.cellSelector.getSelected();
    },
    <span class="hljs-attr">selectVertical</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt, direction, recPos, cellIndex</span>) </span>{
        <span class="hljs-keyword">this</span>.cellSelector.selectVertical(evt, direction, recPos, cellIndex);
    },
    <span class="hljs-attr">updateSelectCount</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">amt</span>) </span>{
        <span class="hljs-keyword">this</span>.cellSelector.updateSelectCount(amt);
    },
    <span class="hljs-attr">getSelectedRows</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> result = [<span class="hljs-keyword">this</span>.getAnchorPos()];
        <span class="hljs-keyword">var</span> records = <span class="hljs-keyword">this</span>.cellSelector.getSelectedRows();
        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; records.length; i++) {
            <span class="hljs-keyword">var</span> recPos = records[i];
            <span class="hljs-keyword">var</span> row = <span class="hljs-keyword">this</span>.getRowByPos(recPos);
            <span class="hljs-keyword">if</span> (row &amp;&amp; (result.indexOf(row) &lt; <span class="hljs-number">0</span>))
                result.push(row);
        }
        <span class="hljs-keyword">return</span> result;
    },
    <span class="hljs-attr">getSelectedSysIds</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> result = [<span class="hljs-keyword">this</span>.getAnchorSysId()];
        <span class="hljs-keyword">var</span> records = <span class="hljs-keyword">this</span>.cellSelector.getSelectedRows();
        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; records.length; i++) {
            <span class="hljs-keyword">var</span> recPos = records[i];
            <span class="hljs-keyword">var</span> sysId = <span class="hljs-keyword">this</span>.tableController.getSysIDByPos(recPos);
            <span class="hljs-keyword">if</span> (sysId &amp;&amp; (result.indexOf(sysId) &lt; <span class="hljs-number">0</span>))
                result.push(sysId);
        }
        <span class="hljs-keyword">return</span> result;
    },
    <span class="hljs-attr">getSelectedAttributes</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sysIDs, attribute</span>) </span>{
        <span class="hljs-keyword">var</span> listEd = GwtListEditor.forPage.getListEditor(<span class="hljs-keyword">this</span>.tableController.listID);
        <span class="hljs-keyword">var</span> gList = listEd.buildGList();
        <span class="hljs-keyword">var</span> result = [];
        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; sysIDs.length; i++)
            result.push(gList.getValue(sysIDs[i], attribute));
        <span class="hljs-keyword">return</span> result;
    },
    <span class="hljs-attr">getRowByPos</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">recPos</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.tableController.getRowByPos(recPos);
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">'GwtGridEdit'</span>;
    }
});;
<span class="hljs-comment">/*! RESOURCE: /scripts/GwtListEditGridSelector.js */</span>
<span class="hljs-keyword">var</span> GwtListEditGridSelector = Class.create(GwtCellSelector, {
    <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$super, tableElement</span>) </span>{
        $<span class="hljs-keyword">super</span>(tableElement);
        <span class="hljs-keyword">this</span>.setBeforeSelect(<span class="hljs-literal">true</span>);
        <span class="hljs-keyword">this</span>.setOnSelect(<span class="hljs-literal">true</span>);
        <span class="hljs-keyword">this</span>.setSelectColor(<span class="hljs-string">"#ccccff"</span>);
        <span class="hljs-keyword">this</span>.setSelectColumnOnly(<span class="hljs-literal">true</span>);
        <span class="hljs-keyword">this</span>.setSelectNonContiguous(<span class="hljs-literal">true</span>);
        <span class="hljs-keyword">this</span>.anchor = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">this</span>._clearCellSelection();
    },
    <span class="hljs-attr">_clearCellSelection</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.selectCount = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">this</span>.selectorCol = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">this</span>.selectedCells = {};
    },
    <span class="hljs-attr">_resetCellSelection</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>._clearCellSelection();
        <span class="hljs-keyword">this</span>.restoreCellColors();
    },
    <span class="hljs-attr">_highlightCells</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.restoreCellColors();
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.selectedCells) {
            <span class="hljs-keyword">var</span> selection = <span class="hljs-keyword">this</span>._parseKey(key);
            <span class="hljs-keyword">var</span> cell = <span class="hljs-keyword">this</span>.getTableCell(selection.row - <span class="hljs-number">1</span>, selection.col);
            <span class="hljs-keyword">if</span> (cell) {
                addClassName(cell, <span class="hljs-string">"list_edit_selected_cell"</span>);
                <span class="hljs-keyword">this</span>.returnObjects[key] = cell.id;
            }
        }
    },
    <span class="hljs-attr">selectVertical</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e, direction, row, col</span>) </span>{
        e.preventDefault();
        <span class="hljs-keyword">var</span> selectedRow = row + <span class="hljs-keyword">this</span>.selectCount;
        <span class="hljs-keyword">if</span> (direction == <span class="hljs-string">"up"</span>) {
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.selectCount &gt; <span class="hljs-number">0</span>)
                <span class="hljs-keyword">this</span>._cleanCellSelection(selectedRow, col);
            <span class="hljs-keyword">this</span>.selectCount--;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.selectCount &lt; <span class="hljs-number">0</span>)
                <span class="hljs-keyword">this</span>._cleanCellSelection(selectedRow, col);
            <span class="hljs-keyword">this</span>.selectCount++;
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.selectCount + row &lt;= <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">this</span>.selectCount++;
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.selectCount &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">this</span>._setSelectedCells(col, col, row, row + <span class="hljs-keyword">this</span>.selectCount);
            <span class="hljs-keyword">this</span>._drawSelection(col, col, row, row + <span class="hljs-keyword">this</span>.selectCount);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">this</span>._setSelectedCells(col, col, row + <span class="hljs-keyword">this</span>.selectCount, row);
            <span class="hljs-keyword">this</span>._drawSelection(col, col, row + <span class="hljs-keyword">this</span>.selectCount, row);
        }
    },
    <span class="hljs-attr">_cleanCellSelection</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">row, col</span>) </span>{
        <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.selectedCells[<span class="hljs-keyword">this</span>._buildKey(row, col)];
    },
    <span class="hljs-attr">handleOnSelect</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">selectedCells</span>) </span>{
        <span class="hljs-keyword">this</span>.originalCell = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> selectedCells) {
            <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.originalCell)
                <span class="hljs-keyword">this</span>.originalCell = <span class="hljs-keyword">this</span>._parseKey(key);
            <span class="hljs-keyword">this</span>.selectedCells[key] = <span class="hljs-literal">true</span>;
        }
    },
    <span class="hljs-attr">handleBeforeSelect</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        <span class="hljs-keyword">var</span> selectedCellKey = <span class="hljs-keyword">this</span>._getSelectedCellKey(e);
        <span class="hljs-keyword">if</span> (!e.shiftKey &amp;&amp; !e.ctrlKey &amp;&amp; !e.metaKey) {
            <span class="hljs-keyword">this</span>.selectorCol = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.selectedCells[selectedCellKey])
                <span class="hljs-keyword">this</span>._resetCellSelection();
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._inAnchorColumn(e)) {
            GwtListEditor.forPage.onSelected(e);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        setTimeout(<span class="hljs-keyword">this</span>.clearRanges.bind(<span class="hljs-keyword">this</span>), <span class="hljs-number">0</span>);
        <span class="hljs-keyword">if</span> (e.ctrlKey || e.metaKey)
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._addRemoveSelection(selectedCellKey);
        <span class="hljs-keyword">if</span> (e.shiftKey &amp;&amp; <span class="hljs-keyword">this</span>.selectedCells[selectedCellKey])
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">this</span>._clearCellSelection();
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    },
    <span class="hljs-attr">_addRemoveSelection</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">selectedCellKey</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.selectedCells[selectedCellKey]) {
            <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.selectedCells[selectedCellKey];
            <span class="hljs-keyword">this</span>._draw();
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        <span class="hljs-keyword">this</span>.selectedCells[selectedCellKey] = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    },
    <span class="hljs-attr">clearSelected</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.rowTo = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">this</span>.rowFrom = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">this</span>.colTo = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">this</span>.colFrom = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">this</span>._resetCellSelection();
    },
    <span class="hljs-attr">_setSelectedCells</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$super, colFrom, colTo, rowFrom, rowTo</span>) </span>{
        $<span class="hljs-keyword">super</span>(colFrom, colTo, rowFrom, rowTo);
        <span class="hljs-keyword">this</span>._addToSelection();
    },
    <span class="hljs-attr">_addToSelection</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.rowFrom &lt;= <span class="hljs-number">0</span> || <span class="hljs-keyword">this</span>.rowTo &lt;= <span class="hljs-number">0</span>)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> row = <span class="hljs-keyword">this</span>.rowFrom; row &lt;= <span class="hljs-keyword">this</span>.rowTo; row++) {
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> col = <span class="hljs-keyword">this</span>.colFrom; col &lt;= <span class="hljs-keyword">this</span>.colTo; col++) {
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.selectorCol != <span class="hljs-number">0</span> &amp;&amp; col != <span class="hljs-keyword">this</span>.selectorCol)
                    <span class="hljs-keyword">this</span>.clearSelected();
                <span class="hljs-keyword">var</span> key = <span class="hljs-keyword">this</span>._buildKey(row, col);
                <span class="hljs-keyword">this</span>.selectedCells[key] = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">this</span>.selectorCol = col;
            }
        }
    },
    <span class="hljs-attr">_selectAndDrawCells</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        e = <span class="hljs-keyword">this</span>.retrieveCellFromNestedDOMElement(e, <span class="hljs-string">'DIV'</span>);
        <span class="hljs-keyword">this</span>._selectCells(e);
        <span class="hljs-keyword">this</span>._addToSelection();
        <span class="hljs-keyword">this</span>._drawSelection(<span class="hljs-keyword">this</span>.colFrom, <span class="hljs-keyword">this</span>.colTo, <span class="hljs-keyword">this</span>.rowFrom, <span class="hljs-keyword">this</span>.rowTo);
    },
    <span class="hljs-attr">_getSelectedCellKey</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        <span class="hljs-keyword">var</span> cell = Event.element(e);
        <span class="hljs-keyword">var</span> col = cell.cellIndex;
        <span class="hljs-keyword">var</span> row = <span class="hljs-keyword">this</span>._getRowIndex(cell.parentNode);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._buildKey(row, col);
    },
    <span class="hljs-attr">getSelected</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.selectedCells;
    },
    <span class="hljs-attr">updateSelectCount</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">delta</span>) </span>{
        <span class="hljs-keyword">this</span>.selectCount = <span class="hljs-keyword">this</span>.selectCount + delta;
    },
    <span class="hljs-attr">getSelectedRows</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> result = [];
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.selectedCells) {
            <span class="hljs-keyword">var</span> recPos = <span class="hljs-built_in">window</span>.g_detail_row &amp;&amp; <span class="hljs-built_in">window</span>.g_detail_row_present ? (<span class="hljs-keyword">this</span>._parseKey(key).row * <span class="hljs-number">2</span>) - <span class="hljs-number">1</span> : <span class="hljs-keyword">this</span>._parseKey(key).row;
            <span class="hljs-keyword">if</span> (result.indexOf(recPos) &lt; <span class="hljs-number">0</span>)
                result.push(recPos);
        }
        <span class="hljs-keyword">return</span> result;
    },
    <span class="hljs-attr">_parseKey</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key</span>) </span>{
        <span class="hljs-keyword">var</span> info = key.split(<span class="hljs-string">","</span>);
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">col</span>: info[<span class="hljs-number">0</span>],
            <span class="hljs-attr">row</span>: info[<span class="hljs-number">1</span>]
        };
    },
    <span class="hljs-attr">_buildKey</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">row, col</span>) </span>{
        <span class="hljs-keyword">return</span> col + <span class="hljs-string">","</span> + row;
    },
    <span class="hljs-attr">_inAnchorColumn</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.anchor)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">var</span> anchorCol = <span class="hljs-keyword">this</span>.anchor.cellIndex;
        <span class="hljs-keyword">var</span> selectCol = Event.element(evt).cellIndex;
        <span class="hljs-keyword">return</span> (anchorCol === selectCol);
    },
    <span class="hljs-attr">setAnchor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">anchor</span>) </span>{
        <span class="hljs-keyword">this</span>.anchor = anchor;
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">'GwtListEditGridSelector'</span>;
    }
});;
<span class="hljs-comment">/*! RESOURCE: /scripts/doctype/GwtCursor.js */</span>
<span class="hljs-keyword">var</span> GwtCursor = Class.create({
    <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.class = <span class="hljs-string">'list_edit_cursor_cell'</span>;
        <span class="hljs-keyword">this</span>.hidden = <span class="hljs-literal">true</span>;
    },
    <span class="hljs-attr">isHidden</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.hidden;
    },
    <span class="hljs-attr">hideCursor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>,
            tableCell = $j(<span class="hljs-built_in">document</span>).find(<span class="hljs-string">'.'</span> + <span class="hljs-keyword">this</span>.class);
        tableCell.each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            $j(<span class="hljs-keyword">this</span>).removeClass(self.class).addClass(<span class="hljs-string">'vt'</span>);
        });
        <span class="hljs-keyword">this</span>.hidden = <span class="hljs-literal">true</span>;
    },
    <span class="hljs-attr">createCursor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">cell</span>) </span>{
        <span class="hljs-keyword">this</span>.hideCursor();
        $j(cell).addClass(<span class="hljs-keyword">this</span>.class);
        <span class="hljs-keyword">this</span>.hidden = <span class="hljs-literal">false</span>;
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">'GwtCursor'</span>;
    }
});;
<span class="hljs-comment">/*! RESOURCE: /scripts/GwtListEditor.js */</span>
<span class="hljs-keyword">var</span> GwtListEditor = Class.create({
    <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.cellEditor = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">this</span>.ignoreTypes = [];
        <span class="hljs-keyword">this</span>._preparedTables = [];
        <span class="hljs-keyword">this</span>._clearListEditorCache();
        CustomEvent.observe(<span class="hljs-string">"tab.activated"</span>, <span class="hljs-keyword">this</span>._onTabActivated.bind(<span class="hljs-keyword">this</span>));
        <span class="hljs-keyword">this</span>.dirtyFormMessage = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">this</span>.openEditorMessage = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">this</span>.cursor = <span class="hljs-keyword">new</span> GwtCursor();
    },
    <span class="hljs-attr">edit</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>) </span>{
        <span class="hljs-keyword">this</span>.savePreviousEditor();
        <span class="hljs-keyword">var</span> cellEditor = <span class="hljs-keyword">this</span>._createCellEditor(element);
        <span class="hljs-keyword">if</span> (cellEditor)
            <span class="hljs-keyword">this</span>.cellEditor = cellEditor;
    },
    <span class="hljs-attr">_createCellEditor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>) </span>{
        <span class="hljs-keyword">var</span> listEditor = <span class="hljs-keyword">this</span>._getListEditorForElement(element);
        <span class="hljs-keyword">if</span> (listEditor)
            <span class="hljs-keyword">return</span> listEditor.createCellEditor(element, <span class="hljs-keyword">this</span>.ignoreTypes);
        <span class="hljs-keyword">else</span>
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    },
    <span class="hljs-attr">savePreviousEditor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.cellEditor)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.cellEditor.saveAndClose())
            <span class="hljs-keyword">this</span>.cellEditor = <span class="hljs-literal">null</span>;
    },
    <span class="hljs-attr">ignoreClick</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>) </span>{
        <span class="hljs-keyword">if</span> (element.tagName != <span class="hljs-string">'TD'</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">if</span> (!hasClassName(element, <span class="hljs-string">'vt'</span>))
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">if</span> (hasClassName(element, <span class="hljs-string">'vt-spacer'</span>))
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    },
    <span class="hljs-attr">onClickedAndDisabled</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        <span class="hljs-keyword">var</span> element = Event.element(e);
        <span class="hljs-keyword">if</span> (element.tagName == <span class="hljs-string">'DIV'</span> &amp;&amp; element.parentNode.tagName == <span class="hljs-string">'TD'</span>)
            element = element.parentNode;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.ignoreClick(element))
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">var</span> warn = $(<span class="hljs-string">"list_edit_disabled_warning"</span>);
        <span class="hljs-keyword">if</span> (warn)
            warn.remove();
        <span class="hljs-keyword">var</span> msg = getMessage(<span class="hljs-string">"List editing disabled - to enable, click the gear icon at top of list"</span>);
        <span class="hljs-keyword">var</span> imgHTML = <span class="hljs-string">'&lt;img id="list_edit_disabled_warning" style="padding-left:2px" src="images/icons/cancel_circle_grey.gif" title="'</span> + msg + <span class="hljs-string">'"/&gt;'</span>;
        <span class="hljs-keyword">if</span> (element.style.textAlign == <span class="hljs-string">"right"</span>)
            element.innerHTML = imgHTML + element.innerHTML;
        <span class="hljs-keyword">else</span>
            element.innerHTML = element.innerHTML + imgHTML;
    },
    <span class="hljs-attr">onSelected</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        <span class="hljs-keyword">var</span> element = Event.element(e);
        <span class="hljs-keyword">if</span> (element.tagName == <span class="hljs-string">'DIV'</span> &amp;&amp; element.parentNode.tagName == <span class="hljs-string">'TD'</span>)
            element = element.parentNode;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.ignoreClick(element))
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">var</span> listEditor = <span class="hljs-keyword">this</span>._getListEditorForElement(element);
        <span class="hljs-keyword">if</span> (listEditor)
            listEditor.setCursor(element);
    },
    <span class="hljs-attr">onTriggerEdit</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        <span class="hljs-keyword">var</span> element = Event.element(e);
        <span class="hljs-keyword">var</span> targetTable = $(element.getAttribute(<span class="hljs-string">'aria-controls'</span>));
        targetTable.down(<span class="hljs-string">'tbody'</span>).focus();
        <span class="hljs-keyword">var</span> listEditor = <span class="hljs-keyword">this</span>._getListEditorForElement(targetTable.down(<span class="hljs-string">'td'</span>));
        <span class="hljs-keyword">if</span> (listEditor)
            listEditor.gridEdit.startTableEdit();
    },
    <span class="hljs-attr">onClicked</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        <span class="hljs-keyword">var</span> element = Event.element(e);
        <span class="hljs-keyword">if</span> (element.tagName == <span class="hljs-string">'DIV'</span> &amp;&amp; element.parentNode.tagName == <span class="hljs-string">'TD'</span>)
            element = element.parentNode;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.ignoreClick(element))
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">if</span> (e.ctrlKey || e.metaKey) {
            <span class="hljs-keyword">if</span> (GwtListEditWindow.getCellEditWindow())
                <span class="hljs-keyword">this</span>.savePreviousEditor();
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        <span class="hljs-keyword">this</span>.edit(element);
    },
    <span class="hljs-attr">onMouseDown</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        <span class="hljs-keyword">if</span> (GwtListEditWindow.getCellEditWindow())
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.savePreviousEditor();
    },
    <span class="hljs-attr">setIgnoreTypes</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">types</span>) </span>{
        <span class="hljs-keyword">if</span> (!types)
            <span class="hljs-keyword">this</span>.ignoreTypes = [];
        <span class="hljs-keyword">else</span>
            <span class="hljs-keyword">this</span>.ignoreTypes = types.split(<span class="hljs-string">','</span>);
    },
    <span class="hljs-attr">addRow</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">listID</span>) </span>{
        <span class="hljs-keyword">var</span> listEditor = <span class="hljs-keyword">this</span>._getListEditor(listID);
        <span class="hljs-keyword">if</span> (listEditor)
            listEditor.addRow();
    },
    <span class="hljs-attr">deleteRowToggle</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">id, listID</span>) </span>{
        <span class="hljs-keyword">var</span> listEditor = <span class="hljs-keyword">this</span>._getListEditor(listID);
        <span class="hljs-keyword">if</span> (listEditor)
            listEditor.deleteRowToggle(id);
    },
    <span class="hljs-attr">_applyUpdates</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">tableElem</span>) </span>{
        <span class="hljs-keyword">var</span> listID = GwtListEditor.getListId(tableElem);
        <span class="hljs-keyword">var</span> listEditor = <span class="hljs-keyword">this</span>._getListEditor(listID);
        <span class="hljs-keyword">if</span> (!listEditor)
            <span class="hljs-keyword">return</span>;
        listEditor.applyUpdates();
    },
    <span class="hljs-attr">getListEditor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">listID</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._getListEditor(listID);
    },
    <span class="hljs-attr">clearState</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>._clearListEditorCache();
    },
    <span class="hljs-attr">_onLoad</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>._hookOnBeforeUnload();
        <span class="hljs-keyword">this</span>._onTableLoad();
    },
    <span class="hljs-attr">_onTableLoad</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">window</span>[<span class="hljs-string">'g_list_edit_enable_property'</span>])
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">this</span>.setIgnoreTypes(<span class="hljs-built_in">window</span>[<span class="hljs-string">'g_list_edit_ignore_types'</span>]);
        <span class="hljs-keyword">var</span> eventName = <span class="hljs-keyword">this</span>._getClickedEvent();
        <span class="hljs-keyword">var</span> tableElements = $$(<span class="hljs-string">"TABLE.list_table"</span>);
        <span class="hljs-keyword">var</span> sw = <span class="hljs-keyword">new</span> StopWatch();
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, n = tableElements.length; i &lt; n; i++) {
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._preparedTables.indexOf(tableElements[i]) != <span class="hljs-number">-1</span>)
                <span class="hljs-keyword">continue</span>;
            <span class="hljs-keyword">this</span>._prepareTable(tableElements[i], eventName);
            <span class="hljs-keyword">this</span>._preparedTables.push(tableElements[i]);
        }
        sw.jslog(<span class="hljs-string">"GwtListEditor onTableLoad, tables examined: "</span> + n);
    },
    <span class="hljs-attr">_getClickedEvent</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (g_list_edit_double)
            <span class="hljs-keyword">return</span> <span class="hljs-string">"dblclick"</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-string">"click"</span>;
    },
    <span class="hljs-attr">_prepareTable</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">table, eventName</span>) </span>{
        <span class="hljs-keyword">if</span> (!table.down(<span class="hljs-string">'tbody'</span>))
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._isEditableList(table))
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">window</span>[<span class="hljs-string">'g_list_edit_enable'</span>] &amp;&amp; <span class="hljs-built_in">window</span>[<span class="hljs-string">'g_list_edit_enable_property'</span>]) {
            Event.observe(table, eventName, <span class="hljs-keyword">this</span>.onClickedAndDisabled.bindAsEventListener(<span class="hljs-keyword">this</span>));
            <span class="hljs-keyword">return</span>;
        }
        Event.observe(table, eventName, <span class="hljs-keyword">this</span>.onClicked.bindAsEventListener(<span class="hljs-keyword">this</span>));
        <span class="hljs-keyword">if</span> (g_list_edit_double)
            table.down(<span class="hljs-string">'tbody'</span>).observe(<span class="hljs-string">"click"</span>, <span class="hljs-keyword">this</span>.onSelected.bindAsEventListener(<span class="hljs-keyword">this</span>));
        <span class="hljs-built_in">document</span>.on(<span class="hljs-string">'click'</span>, <span class="hljs-string">'.list2-edit-button'</span>, <span class="hljs-keyword">this</span>.onTriggerEdit.bindAsEventListener(<span class="hljs-keyword">this</span>));
        Event.observe(table, <span class="hljs-string">"mousedown"</span>, <span class="hljs-keyword">this</span>.onMouseDown.bindAsEventListener(<span class="hljs-keyword">this</span>));
        <span class="hljs-keyword">this</span>._applyUpdates(table);
    },
    <span class="hljs-attr">_onPartialLoad</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">targetSpan</span>) </span>{
        <span class="hljs-keyword">this</span>._onTableLoad();
    },
    <span class="hljs-attr">_unLoad</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> tableElements = <span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">"table"</span>);
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; tableElements.length; i++) {
            <span class="hljs-keyword">var</span> t = tableElements[i];
            <span class="hljs-keyword">if</span> (hasClassName(t, <span class="hljs-string">"data_list_table"</span>)) {
                <span class="hljs-keyword">this</span>._unLoadTable(t);
            }
        }
        <span class="hljs-keyword">this</span>._clearListEditorCache();
    },
    <span class="hljs-attr">_unLoadTable</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">tableElem</span>) </span>{
        <span class="hljs-keyword">var</span> listID = GwtListEditor.getListId(tableElem);
        <span class="hljs-keyword">var</span> listEditor = <span class="hljs-keyword">this</span>._getListEditor(listID);
        <span class="hljs-keyword">if</span> (!listEditor)
            <span class="hljs-keyword">return</span>;
        listEditor.unLoadTable(tableElem);
    },
    <span class="hljs-attr">_getListEditor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">listID</span>) </span>{
        <span class="hljs-keyword">var</span> table = <span class="hljs-keyword">this</span>._getListEditTable(listID);
        <span class="hljs-keyword">if</span> (!table)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">var</span> listEditor = <span class="hljs-keyword">this</span>.listEditorCache[listID];
        <span class="hljs-keyword">if</span> (!listEditor) {
            listEditor = <span class="hljs-keyword">new</span> GlideListEditor(table);
            <span class="hljs-keyword">this</span>.listEditorCache[listID] = listEditor;
            <span class="hljs-keyword">return</span> listEditor;
        }
        listEditor.updateTable(table);
        <span class="hljs-keyword">return</span> listEditor;
    },
    <span class="hljs-attr">_clearListEditorCache</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.listEditorCache = {};
    },
    <span class="hljs-attr">_getListEditTable</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">listID</span>) </span>{
        <span class="hljs-keyword">var</span> table = GwtListEditor.getTableElem(listID);
        <span class="hljs-keyword">if</span> (!table)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">if</span> (!hasClassName(table, <span class="hljs-string">"list_table"</span>))
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">return</span> table;
    },
    <span class="hljs-attr">_isEditableList</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        <span class="hljs-keyword">if</span> (e.tagName != <span class="hljs-string">'TABLE'</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">if</span> (!hasClassName(e, <span class="hljs-string">"list_table"</span>))
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">var</span> type = e.getAttribute(<span class="hljs-string">'glide_list_edit_type'</span>);
        <span class="hljs-keyword">return</span> type != <span class="hljs-string">'disabled'</span>;
    },
    <span class="hljs-attr">_getListEditorForElement</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">elem</span>) </span>{
        <span class="hljs-keyword">var</span> listID = <span class="hljs-keyword">this</span>._getListIdForCell(elem);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getListEditor(listID);
    },
    <span class="hljs-attr">_hasChanges</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> listID <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.listEditorCache) {
            <span class="hljs-keyword">var</span> listEditor = <span class="hljs-keyword">this</span>.listEditorCache[listID];
            <span class="hljs-keyword">if</span> (listEditor.hasChanges())
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    },
    <span class="hljs-attr">_getFormSubmitted</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> === <span class="hljs-keyword">typeof</span> g_form)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">if</span> (!g_form.submitted)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">return</span> g_form.submitted;
    },
    <span class="hljs-attr">_onBeforeUnload</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._testBeforeUnload();
    },
    <span class="hljs-attr">isDirty</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> (<span class="hljs-literal">null</span> !== <span class="hljs-keyword">this</span>._testBeforeUnload());
    },
    <span class="hljs-attr">_testBeforeUnload</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> beingSubmitted = <span class="hljs-keyword">this</span>._getFormSubmitted();
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.chainedUnloadHandler) {
            <span class="hljs-keyword">var</span> chainedResponse = <span class="hljs-keyword">this</span>.chainedUnloadHandler();
            <span class="hljs-keyword">if</span> (chainedResponse)
                <span class="hljs-keyword">return</span> chainedResponse;
        }
        <span class="hljs-keyword">if</span> (beingSubmitted)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">var</span> message;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.cellEditor &amp;&amp; <span class="hljs-keyword">this</span>.cellEditor.isActive())
            message = <span class="hljs-keyword">this</span>.openEditorMessage;
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._hasChanges()) {
            message = <span class="hljs-keyword">this</span>.dirtyFormMessage;
        }
        <span class="hljs-keyword">if</span> (!message)
            <span class="hljs-keyword">return</span>;
        setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            CustomEvent.fireTop(<span class="hljs-string">'glide:nav_form_dirty_cancel_stay'</span>, <span class="hljs-built_in">window</span>);
        }, <span class="hljs-number">750</span>);
        <span class="hljs-keyword">return</span> message;
    },
    <span class="hljs-attr">_hookOnBeforeUnload</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.dirtyFormMessage)
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.onbeforeunload)
            <span class="hljs-keyword">this</span>.chainedUnloadHandler = <span class="hljs-built_in">window</span>.onbeforeunload;
        <span class="hljs-built_in">window</span>.onbeforeunload = <span class="hljs-keyword">this</span>._onBeforeUnload.bind(<span class="hljs-keyword">this</span>);
    },
    <span class="hljs-attr">enableDirtyFormMessages</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> tableElements = $$(<span class="hljs-string">"TABLE.list_table"</span>);
        <span class="hljs-keyword">if</span> (tableElements &amp;&amp; tableElements.length &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">this</span>.dirtyFormMessage = getMessage(<span class="hljs-string">"Changes have been made. Continuing will discard the changes."</span>);
            <span class="hljs-keyword">this</span>.openEditorMessage = getMessage(<span class="hljs-string">"There is a cell editor open on this page. Continuing will discard the changes."</span>);
        }
    },
    <span class="hljs-attr">_getListIdForCell</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">cell</span>) </span>{
        <span class="hljs-keyword">var</span> table = cell.up(<span class="hljs-string">'table'</span>);
        <span class="hljs-keyword">return</span> GwtListEditor.getListId(table);
    },
    <span class="hljs-attr">_onTabActivated</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">if</span> (<span class="hljs-string">'string'</span> !== <span class="hljs-keyword">typeof</span> evt)
                <span class="hljs-keyword">return</span>;
            <span class="hljs-keyword">if</span> (!evt.startsWith(<span class="hljs-string">'tabs2_list_'</span>))
                <span class="hljs-keyword">return</span>;
            <span class="hljs-keyword">var</span> key = evt.substring(<span class="hljs-number">0</span>, evt.length - <span class="hljs-number">1</span>);
            <span class="hljs-keyword">var</span> index = evt.substring(evt.length - <span class="hljs-number">1</span>);
            <span class="hljs-keyword">var</span> tabs = $$(<span class="hljs-string">'div.'</span> + key);
            <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> === tabs.length)
                <span class="hljs-keyword">return</span>;
            <span class="hljs-keyword">var</span> div = tabs[index - <span class="hljs-number">1</span>];
            <span class="hljs-keyword">if</span> (!div)
                <span class="hljs-keyword">return</span>;
            <span class="hljs-keyword">var</span> divId = div.id;
            <span class="hljs-keyword">if</span> (!divId || divId.length &lt;= <span class="hljs-number">5</span>)
                <span class="hljs-keyword">return</span>;
            <span class="hljs-keyword">var</span> listId = divId.substring(<span class="hljs-number">0</span>, divId.length - <span class="hljs-number">5</span>);
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.listEditorCache[listId])
                <span class="hljs-keyword">return</span>;
            <span class="hljs-keyword">var</span> table = GwtListEditor.getTableElem(listId);
            <span class="hljs-keyword">if</span> (!table)
                <span class="hljs-keyword">return</span>;
            <span class="hljs-keyword">this</span>._prepareTable(table, <span class="hljs-keyword">this</span>._getClickedEvent());
        } <span class="hljs-keyword">catch</span> (err) {
            jslog(<span class="hljs-string">'Tab activation problem '</span> + err);
        }
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"GwtListEditor"</span>;
    }
});
GwtListEditor._getListEditor = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">listID</span>) </span>{
    <span class="hljs-keyword">if</span> (GwtListEditor.forPage)
        <span class="hljs-keyword">return</span> GwtListEditor.forPage.getListEditor(listID);
    <span class="hljs-keyword">else</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
};
GwtListEditor.getTableElem = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">listID</span>) </span>{
    <span class="hljs-keyword">return</span> $(listID + <span class="hljs-string">'_table'</span>);
};
GwtListEditor.getListId = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">elem</span>) </span>{
    <span class="hljs-keyword">return</span> elem.getAttribute(<span class="hljs-string">'glide_list_edit_id'</span>) + <span class="hljs-string">''</span>;
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">editListRegisterOnSubmit</span>(<span class="hljs-params">listID</span>) </span>{
    <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">window</span>[<span class="hljs-string">'g_list_edit_enable'</span>])
        <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> g_form == <span class="hljs-string">'undefined'</span>)
        <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">if</span> (!g_form)
        <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">var</span> form = gel(g_form.getTableName() + <span class="hljs-string">'.do'</span>);
    <span class="hljs-keyword">if</span> (!form)
        <span class="hljs-keyword">return</span>;
    addOnSubmitEvent(form, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> GwtListEditor._editListOnSubmitWrapper(listID);
    });
}
GwtListEditor._editListOnSubmitWrapper = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">listID</span>) </span>{
    <span class="hljs-keyword">var</span> editor = GwtListEditor._getListEditor(listID);
    <span class="hljs-keyword">if</span> (!editor)
        <span class="hljs-keyword">return</span>;
    g_list = editor.buildGList();
    <span class="hljs-keyword">var</span> result = editor.callOnSubmit();
    g_list = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">if</span> (result !== <span class="hljs-literal">false</span>)
        editor.saveUpdatesInForm();
    <span class="hljs-keyword">return</span> result;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">editListWithFormAddRow</span>(<span class="hljs-params">listID</span>) </span>{
    GwtListEditor.forPage.addRow(listID);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">editListWithFormDeleteRow</span>(<span class="hljs-params">id, listID</span>) </span>{
    GwtListEditor.forPage.deleteRowToggle(id, listID);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">editListSaveRow</span>(<span class="hljs-params">imd</span>) </span>{
    <span class="hljs-keyword">var</span> listID = imd.up(<span class="hljs-string">'div.list_div'</span>).id;
    GwtListEditor._getListEditor(listID).saveNow();
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">editListSetGlideList</span>(<span class="hljs-params">listID</span>) </span>{
    <span class="hljs-keyword">var</span> editor = GwtListEditor._getListEditor(listID);
    <span class="hljs-keyword">if</span> (!editor)
        <span class="hljs-keyword">return</span>;
    g_list = editor.buildGList();
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">initListEdit</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">window</span>.GwtListEditor.forPage = <span class="hljs-keyword">new</span> GwtListEditor();
    GwtListEditor.forPage._onLoad();
    addUnloadEvent(GwtListEditor.forPage._unLoad.bind(GwtListEditor.forPage));
    CustomEvent.observe(<span class="hljs-string">'partial.page.savePreviousEditor'</span>, GwtListEditor.forPage.savePreviousEditor.bind(GwtListEditor.forPage));
    CustomEvent.observe(<span class="hljs-string">'partial.page.reload'</span>, GwtListEditor.forPage._onPartialLoad.bind(GwtListEditor.forPage));
    GwtListEditor.forPage.enableDirtyFormMessages();
}
addAfterPageLoadedEvent(initListEdit);;;</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
