<!DOCTYPE html>

<html>
<head>
  <title>GlideForm14.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="AJAXEmailClientCompleter.html">
                  AJAXEmailClientCompleter.js
                </a>
              
                
                <a class="source" href="AJAXOtherCompleter.html">
                  AJAXOtherCompleter.js
                </a>
              
                
                <a class="source" href="AJAXReferenceChoice.html">
                  AJAXReferenceChoice.js
                </a>
              
                
                <a class="source" href="AJAXReferenceCompleter.html">
                  AJAXReferenceCompleter.js
                </a>
              
                
                <a class="source" href="AJAXReferenceCompleterMulti.html">
                  AJAXReferenceCompleterMulti.js
                </a>
              
                
                <a class="source" href="AJAXTableCompleter.html">
                  AJAXTableCompleter.js
                </a>
              
                
                <a class="source" href="AutoComplete.html">
                  AutoComplete.js
                </a>
              
                
                <a class="source" href="CookieJar.html">
                  CookieJar.js
                </a>
              
                
                <a class="source" href="CustomEventManager.html">
                  CustomEventManager.js
                </a>
              
                
                <a class="source" href="DerivedFields.html">
                  DerivedFields.js
                </a>
              
                
                <a class="source" href="FieldListElement.html">
                  FieldListElement.js
                </a>
              
                
                <a class="source" href="GlideAPI1.html">
                  GlideAPI1.js
                </a>
              
                
                <a class="source" href="GlideAjax.html">
                  GlideAjax.js
                </a>
              
                
                <a class="source" href="GlideAjaxForm.html">
                  GlideAjaxForm.js
                </a>
              
                
                <a class="source" href="GlideBox.html">
                  GlideBox.js
                </a>
              
                
                <a class="source" href="GlideClientCache.html">
                  GlideClientCache.js
                </a>
              
                
                <a class="source" href="GlideDecoration.html">
                  GlideDecoration.js
                </a>
              
                
                <a class="source" href="GlideDialogForm.html">
                  GlideDialogForm.js
                </a>
              
                
                <a class="source" href="GlideDialogWindow.html">
                  GlideDialogWindow.js
                </a>
              
                
                <a class="source" href="GlideDraggable.html">
                  GlideDraggable.js
                </a>
              
                
                <a class="source" href="GlideDuration.html">
                  GlideDuration.js
                </a>
              
                
                <a class="source" href="GlideEvent.html">
                  GlideEvent.js
                </a>
              
                
                <a class="source" href="GlideEventHandler.html">
                  GlideEventHandler.js
                </a>
              
                
                <a class="source" href="GlideFilter14.html">
                  GlideFilter14.js
                </a>
              
                
                <a class="source" href="GlideFilterDate.html">
                  GlideFilterDate.js
                </a>
              
                
                <a class="source" href="GlideFilterDescription.html">
                  GlideFilterDescription.js
                </a>
              
                
                <a class="source" href="GlideFilterHandlers.html">
                  GlideFilterHandlers.js
                </a>
              
                
                <a class="source" href="GlideFilterItemVariables.html">
                  GlideFilterItemVariables.js
                </a>
              
                
                <a class="source" href="GlideFilterLabels.html">
                  GlideFilterLabels.js
                </a>
              
                
                <a class="source" href="GlideFilterQuestions.html">
                  GlideFilterQuestions.js
                </a>
              
                
                <a class="source" href="GlideFilterReference.html">
                  GlideFilterReference.js
                </a>
              
                
                <a class="source" href="GlideFilterReferenceMulti.html">
                  GlideFilterReferenceMulti.js
                </a>
              
                
                <a class="source" href="GlideFilterVariableMap.html">
                  GlideFilterVariableMap.js
                </a>
              
                
                <a class="source" href="GlideFilterVariables.html">
                  GlideFilterVariables.js
                </a>
              
                
                <a class="source" href="GlideForm14.html">
                  GlideForm14.js
                </a>
              
                
                <a class="source" href="GlideHeaderSearch.html">
                  GlideHeaderSearch.js
                </a>
              
                
                <a class="source" href="GlideList2.html">
                  GlideList2.js
                </a>
              
                
                <a class="source" href="GlideList2FilterUtil.html">
                  GlideList2FilterUtil.js
                </a>
              
                
                <a class="source" href="GlideList2Handlers.html">
                  GlideList2Handlers.js
                </a>
              
                
                <a class="source" href="GlideList2InitEvents.html">
                  GlideList2InitEvents.js
                </a>
              
                
                <a class="source" href="GlideList2Statics.html">
                  GlideList2Statics.js
                </a>
              
                
                <a class="source" href="GlideListEditorMessaging.html">
                  GlideListEditorMessaging.js
                </a>
              
                
                <a class="source" href="GlideListElement.html">
                  GlideListElement.js
                </a>
              
                
                <a class="source" href="GlideListWidget.html">
                  GlideListWidget.js
                </a>
              
                
                <a class="source" href="GlideListv3Compatibility.html">
                  GlideListv3Compatibility.js
                </a>
              
                
                <a class="source" href="GlideModal.html">
                  GlideModal.js
                </a>
              
                
                <a class="source" href="GlideModalForm.html">
                  GlideModalForm.js
                </a>
              
                
                <a class="source" href="GlideNavigation.html">
                  GlideNavigation.js
                </a>
              
                
                <a class="source" href="GlideOverlay.html">
                  GlideOverlay.js
                </a>
              
                
                <a class="source" href="GlidePane.html">
                  GlidePane.js
                </a>
              
                
                <a class="source" href="GlidePaneForm.html">
                  GlidePaneForm.js
                </a>
              
                
                <a class="source" href="GlideRecord.html">
                  GlideRecord.js
                </a>
              
                
                <a class="source" href="GlideTimeElement.html">
                  GlideTimeElement.js
                </a>
              
                
                <a class="source" href="GlideTimerElement.html">
                  GlideTimerElement.js
                </a>
              
                
                <a class="source" href="GlideTransactionScope.html">
                  GlideTransactionScope.js
                </a>
              
                
                <a class="source" href="GlideUIElement.html">
                  GlideUIElement.js
                </a>
              
                
                <a class="source" href="GlideURL.html">
                  GlideURL.js
                </a>
              
                
                <a class="source" href="GlideURLElement.html">
                  GlideURLElement.js
                </a>
              
                
                <a class="source" href="GlideUser.html">
                  GlideUser.js
                </a>
              
                
                <a class="source" href="GlideUserImageElement.html">
                  GlideUserImageElement.js
                </a>
              
                
                <a class="source" href="GlideWidgetActions.html">
                  GlideWidgetActions.js
                </a>
              
                
                <a class="source" href="GlideWidgetFilter.html">
                  GlideWidgetFilter.js
                </a>
              
                
                <a class="source" href="GlideWidgetHideOnEmpty.html">
                  GlideWidgetHideOnEmpty.js
                </a>
              
                
                <a class="source" href="GlideWidgetSearch.html">
                  GlideWidgetSearch.js
                </a>
              
                
                <a class="source" href="GlideWidgetVCR.html">
                  GlideWidgetVCR.js
                </a>
              
                
                <a class="source" href="GlideWindow.html">
                  GlideWindow.js
                </a>
              
                
                <a class="source" href="GuidedTourElementTranslator.html">
                  GuidedTourElementTranslator.js
                </a>
              
                
                <a class="source" href="GwtCellEditor.html">
                  GwtCellEditor.js
                </a>
              
                
                <a class="source" href="GwtCellSelector.html">
                  GwtCellSelector.js
                </a>
              
                
                <a class="source" href="GwtContextMenu.html">
                  GwtContextMenu.js
                </a>
              
                
                <a class="source" href="GwtDraggable.html">
                  GwtDraggable.js
                </a>
              
                
                <a class="source" href="GwtDraggableSnap.html">
                  GwtDraggableSnap.js
                </a>
              
                
                <a class="source" href="GwtExportScheduleDialog.html">
                  GwtExportScheduleDialog.js
                </a>
              
                
                <a class="source" href="GwtGridEdit.html">
                  GwtGridEdit.js
                </a>
              
                
                <a class="source" href="GwtListEditAjaxChangeSaver.html">
                  GwtListEditAjaxChangeSaver.js
                </a>
              
                
                <a class="source" href="GwtListEditAjaxValueLoader.html">
                  GwtListEditAjaxValueLoader.js
                </a>
              
                
                <a class="source" href="GwtListEditBoolean.html">
                  GwtListEditBoolean.js
                </a>
              
                
                <a class="source" href="GwtListEditCalendar.html">
                  GwtListEditCalendar.js
                </a>
              
                
                <a class="source" href="GwtListEditDependent.html">
                  GwtListEditDependent.js
                </a>
              
                
                <a class="source" href="GwtListEditDuration.html">
                  GwtListEditDuration.js
                </a>
              
                
                <a class="source" href="GwtListEditEncryptedText.html">
                  GwtListEditEncryptedText.js
                </a>
              
                
                <a class="source" href="GwtListEditError.html">
                  GwtListEditError.js
                </a>
              
                
                <a class="source" href="GwtListEditGList.html">
                  GwtListEditGList.js
                </a>
              
                
                <a class="source" href="GwtListEditInternalType.html">
                  GwtListEditInternalType.js
                </a>
              
                
                <a class="source" href="GwtListEditJournal.html">
                  GwtListEditJournal.js
                </a>
              
                
                <a class="source" href="GwtListEditMultiText.html">
                  GwtListEditMultiText.js
                </a>
              
                
                <a class="source" href="GwtListEditPassword.html">
                  GwtListEditPassword.js
                </a>
              
                
                <a class="source" href="GwtListEditRecord.html">
                  GwtListEditRecord.js
                </a>
              
                
                <a class="source" href="GwtListEditRecordDecorations.html">
                  GwtListEditRecordDecorations.js
                </a>
              
                
                <a class="source" href="GwtListEditReference.html">
                  GwtListEditReference.js
                </a>
              
                
                <a class="source" href="GwtListEditRelatedTags.html">
                  GwtListEditRelatedTags.js
                </a>
              
                
                <a class="source" href="GwtListEditSavePolicy.html">
                  GwtListEditSavePolicy.js
                </a>
              
                
                <a class="source" href="GwtListEditSelect.html">
                  GwtListEditSelect.js
                </a>
              
                
                <a class="source" href="GwtListEditTableController.html">
                  GwtListEditTableController.js
                </a>
              
                
                <a class="source" href="GwtListEditTablename.html">
                  GwtListEditTablename.js
                </a>
              
                
                <a class="source" href="GwtListEditText.html">
                  GwtListEditText.js
                </a>
              
                
                <a class="source" href="GwtListEditTranslatedField.html">
                  GwtListEditTranslatedField.js
                </a>
              
                
                <a class="source" href="GwtListEditUpdateTablename.html">
                  GwtListEditUpdateTablename.js
                </a>
              
                
                <a class="source" href="GwtListEditValueRenderer.html">
                  GwtListEditValueRenderer.js
                </a>
              
                
                <a class="source" href="GwtListEditWindow.html">
                  GwtListEditWindow.js
                </a>
              
                
                <a class="source" href="GwtListEditor.html">
                  GwtListEditor.js
                </a>
              
                
                <a class="source" href="GwtListEditorPendingChanges.html">
                  GwtListEditorPendingChanges.js
                </a>
              
                
                <a class="source" href="GwtMessage14.html">
                  GwtMessage14.js
                </a>
              
                
                <a class="source" href="GwtObservable.html">
                  GwtObservable.js
                </a>
              
                
                <a class="source" href="GwtPollDialog.html">
                  GwtPollDialog.js
                </a>
              
                
                <a class="source" href="ISO9075.html">
                  ISO9075.js
                </a>
              
                
                <a class="source" href="InPlaceEdit.html">
                  InPlaceEdit.js
                </a>
              
                
                <a class="source" href="NOW.messaging.html">
                  NOW.messaging.js
                </a>
              
                
                <a class="source" href="NOW.messaging.record.html">
                  NOW.messaging.record.js
                </a>
              
                
                <a class="source" href="NameMapEntry.html">
                  NameMapEntry.js
                </a>
              
                
                <a class="source" href="PersonalizeForm.html">
                  PersonalizeForm.js
                </a>
              
                
                <a class="source" href="Point.html">
                  Point.js
                </a>
              
                
                <a class="source" href="SLARepairClient.html">
                  SLARepairClient.js
                </a>
              
                
                <a class="source" href="ScriptLoader.html">
                  ScriptLoader.js
                </a>
              
                
                <a class="source" href="Select.html">
                  Select.js
                </a>
              
                
                <a class="source" href="SlushBucket.html">
                  SlushBucket.js
                </a>
              
                
                <a class="source" href="StopWatch.html">
                  StopWatch.js
                </a>
              
                
                <a class="source" href="Table.html">
                  Table.js
                </a>
              
                
                <a class="source" href="TableElement.html">
                  TableElement.js
                </a>
              
                
                <a class="source" href="TableExtension.html">
                  TableExtension.js
                </a>
              
                
                <a class="source" href="TemplateRecord.html">
                  TemplateRecord.js
                </a>
              
                
                <a class="source" href="UserRolesElement.html">
                  UserRolesElement.js
                </a>
              
                
                <a class="source" href="_module.html">
                  _module.js
                </a>
              
                
                <a class="source" href="ac.html">
                  ac.js
                </a>
              
                
                <a class="source" href="ac_derived_field_support.html">
                  ac_derived_field_support.js
                </a>
              
                
                <a class="source" href="accessibility_tabindex.html">
                  accessibility_tabindex.js
                </a>
              
                
                <a class="source" href="affix.html">
                  affix.js
                </a>
              
                
                <a class="source" href="alert.html">
                  alert.js
                </a>
              
                
                <a class="source" href="amb.Channel.html">
                  amb.Channel.js
                </a>
              
                
                <a class="source" href="amb.ChannelListener.html">
                  amb.ChannelListener.js
                </a>
              
                
                <a class="source" href="amb.ChannelRedirect.html">
                  amb.ChannelRedirect.js
                </a>
              
                
                <a class="source" href="amb.EventManager.html">
                  amb.EventManager.js
                </a>
              
                
                <a class="source" href="amb.Logger.html">
                  amb.Logger.js
                </a>
              
                
                <a class="source" href="amb.MessageClient.html">
                  amb.MessageClient.js
                </a>
              
                
                <a class="source" href="amb.MessageClientBuilder.html">
                  amb.MessageClientBuilder.js
                </a>
              
                
                <a class="source" href="amb.ServerConnection.html">
                  amb.ServerConnection.js
                </a>
              
                
                <a class="source" href="amb_properties.html">
                  amb_properties.js
                </a>
              
                
                <a class="source" href="angular_includes_1.4.html">
                  angular_includes_1.4.js
                </a>
              
                
                <a class="source" href="app.form_presence.html">
                  app.form_presence.js
                </a>
              
                
                <a class="source" href="app.ng.amb.html">
                  app.ng.amb.js
                </a>
              
                
                <a class="source" href="app_guided_tours.html">
                  app_guided_tours.js
                </a>
              
                
                <a class="source" href="button.html">
                  button.js
                </a>
              
                
                <a class="source" href="calendar.html">
                  calendar.js
                </a>
              
                
                <a class="source" href="carousel.html">
                  carousel.js
                </a>
              
                
                <a class="source" href="collapse.html">
                  collapse.js
                </a>
              
                
                <a class="source" href="cometd.html">
                  cometd.js
                </a>
              
                
                <a class="source" href="condition14_new.html">
                  condition14_new.js
                </a>
              
                
                <a class="source" href="condition14_reporting.html">
                  condition14_reporting.js
                </a>
              
                
                <a class="source" href="condition14_templates.html">
                  condition14_templates.js
                </a>
              
                
                <a class="source" href="condition_global_variables14.html">
                  condition_global_variables14.js
                </a>
              
                
                <a class="source" href="constants_embedded_help.html">
                  constants_embedded_help.js
                </a>
              
                
                <a class="source" href="context_actions.html">
                  context_actions.js
                </a>
              
                
                <a class="source" href="controller.guidedTours.html">
                  controller.guidedTours.js
                </a>
              
                
                <a class="source" href="deferred_related_lists.html">
                  deferred_related_lists.js
                </a>
              
                
                <a class="source" href="depends.html">
                  depends.js
                </a>
              
                
                <a class="source" href="directive.contenteditable.html">
                  directive.contenteditable.js
                </a>
              
                
                <a class="source" href="directive.formStreamEntry.html">
                  directive.formStreamEntry.js
                </a>
              
                
                <a class="source" href="directive.message.html">
                  directive.message.js
                </a>
              
                
                <a class="source" href="directive.snAttachmentPreview.html">
                  directive.snAttachmentPreview.js
                </a>
              
                
                <a class="source" href="directive.snAvatar.html">
                  directive.snAvatar.js
                </a>
              
                
                <a class="source" href="directive.snAvatarPopover.html">
                  directive.snAvatarPopover.js
                </a>
              
                
                <a class="source" href="directive.snBindI18n.html">
                  directive.snBindI18n.js
                </a>
              
                
                <a class="source" href="directive.snBindOnce.html">
                  directive.snBindOnce.js
                </a>
              
                
                <a class="source" href="directive.snBindPopoverSelection.html">
                  directive.snBindPopoverSelection.js
                </a>
              
                
                <a class="source" href="directive.snBootstrapPopover.html">
                  directive.snBootstrapPopover.js
                </a>
              
                
                <a class="source" href="directive.snChoiceList.html">
                  directive.snChoiceList.js
                </a>
              
                
                <a class="source" href="directive.snCloak.html">
                  directive.snCloak.js
                </a>
              
                
                <a class="source" href="directive.snComplexPopover.html">
                  directive.snComplexPopover.js
                </a>
              
                
                <a class="source" href="directive.snConfirmModal.html">
                  directive.snConfirmModal.js
                </a>
              
                
                <a class="source" href="directive.snContextMenu.html">
                  directive.snContextMenu.js
                </a>
              
                
                <a class="source" href="directive.snDayAgo.html">
                  directive.snDayAgo.js
                </a>
              
                
                <a class="source" href="directive.snDialog.html">
                  directive.snDialog.js
                </a>
              
                
                <a class="source" href="directive.snExpandedEmail.html">
                  directive.snExpandedEmail.js
                </a>
              
                
                <a class="source" href="directive.snFieldReference.html">
                  directive.snFieldReference.js
                </a>
              
                
                <a class="source" href="directive.snFocus.html">
                  directive.snFocus.js
                </a>
              
                
                <a class="source" href="directive.snGlyph.html">
                  directive.snGlyph.js
                </a>
              
                
                <a class="source" href="directive.snImageUploader.html">
                  directive.snImageUploader.js
                </a>
              
                
                <a class="source" href="directive.snLinkContent.html">
                  directive.snLinkContent.js
                </a>
              
                
                <a class="source" href="directive.snLinkContentArticle.html">
                  directive.snLinkContentArticle.js
                </a>
              
                
                <a class="source" href="directive.snLinkContentAttachment.html">
                  directive.snLinkContentAttachment.js
                </a>
              
                
                <a class="source" href="directive.snLinkContentError.html">
                  directive.snLinkContentError.js
                </a>
              
                
                <a class="source" href="directive.snLinkContentImage.html">
                  directive.snLinkContentImage.js
                </a>
              
                
                <a class="source" href="directive.snLinkContentSoundcloud.html">
                  directive.snLinkContentSoundcloud.js
                </a>
              
                
                <a class="source" href="directive.snLinkContentYoutube.html">
                  directive.snLinkContentYoutube.js
                </a>
              
                
                <a class="source" href="directive.snModalShow.html">
                  directive.snModalShow.js
                </a>
              
                
                <a class="source" href="directive.snNotification.html">
                  directive.snNotification.js
                </a>
              
                
                <a class="source" href="directive.snPresence.html">
                  directive.snPresence.js
                </a>
              
                
                <a class="source" href="directive.snRecordPicker.html">
                  directive.snRecordPicker.js
                </a>
              
                
                <a class="source" href="directive.snReferencePicker.html">
                  directive.snReferencePicker.js
                </a>
              
                
                <a class="source" href="directive.snSelectBasic.html">
                  directive.snSelectBasic.js
                </a>
              
                
                <a class="source" href="directive.snStickyHeaders.html">
                  directive.snStickyHeaders.js
                </a>
              
                
                <a class="source" href="directive.snStream.html">
                  directive.snStream.js
                </a>
              
                
                <a class="source" href="directive.snTabs.html">
                  directive.snTabs.js
                </a>
              
                
                <a class="source" href="directive.snTabsBasic.html">
                  directive.snTabsBasic.js
                </a>
              
                
                <a class="source" href="directive.snTimeAgo.html">
                  directive.snTimeAgo.js
                </a>
              
                
                <a class="source" href="directive.snTooltipBasic.html">
                  directive.snTooltipBasic.js
                </a>
              
                
                <a class="source" href="directive.snUserAvatar.html">
                  directive.snUserAvatar.js
                </a>
              
                
                <a class="source" href="directive.snUserProfile.html">
                  directive.snUserProfile.js
                </a>
              
                
                <a class="source" href="dropdown.html">
                  dropdown.js
                </a>
              
                
                <a class="source" href="dropdowns.html">
                  dropdowns.js
                </a>
              
                
                <a class="source" href="email_activity.html">
                  email_activity.js
                </a>
              
                
                <a class="source" href="event_initialize.html">
                  event_initialize.js
                </a>
              
                
                <a class="source" href="factory.AMBOverlay.html">
                  factory.AMBOverlay.js
                </a>
              
                
                <a class="source" href="factory.ArraySynchronizer.html">
                  factory.ArraySynchronizer.js
                </a>
              
                
                <a class="source" href="factory.notificationWrapper.html">
                  factory.notificationWrapper.js
                </a>
              
                
                <a class="source" href="factory.paneManager.html">
                  factory.paneManager.js
                </a>
              
                
                <a class="source" href="factory.snPresence.html">
                  factory.snPresence.js
                </a>
              
                
                <a class="source" href="factory.snRecordPresence.html">
                  factory.snRecordPresence.js
                </a>
              
                
                <a class="source" href="factory.unwrappedHTTPPromise.html">
                  factory.unwrappedHTTPPromise.js
                </a>
              
                
                <a class="source" href="fixedHeaders.html">
                  fixedHeaders.js
                </a>
              
                
                <a class="source" href="form_submitted_mask.html">
                  form_submitted_mask.js
                </a>
              
                
                <a class="source" href="form_tags.html">
                  form_tags.js
                </a>
              
                
                <a class="source" href="formatting.html">
                  formatting.js
                </a>
              
                
                <a class="source" href="functions.html">
                  functions.js
                </a>
              
                
                <a class="source" href="functions_attachments.html">
                  functions_attachments.js
                </a>
              
                
                <a class="source" href="functions_bootstrap14.html">
                  functions_bootstrap14.js
                </a>
              
                
                <a class="source" href="functions_calendar.html">
                  functions_calendar.js
                </a>
              
                
                <a class="source" href="functions_clipboard.html">
                  functions_clipboard.js
                </a>
              
                
                <a class="source" href="functions_email.html">
                  functions_email.js
                </a>
              
                
                <a class="source" href="functions_fontsizer.html">
                  functions_fontsizer.js
                </a>
              
                
                <a class="source" href="functions_onchange.html">
                  functions_onchange.js
                </a>
              
                
                <a class="source" href="functions_reference.html">
                  functions_reference.js
                </a>
              
                
                <a class="source" href="functions_showloading.html">
                  functions_showloading.js
                </a>
              
                
                <a class="source" href="functions_user_image.html">
                  functions_user_image.js
                </a>
              
                
                <a class="source" href="glide-highcharts-v5.html">
                  glide-highcharts-v5.js
                </a>
              
                
                <a class="source" href="guided_tours_template.html">
                  guided_tours_template.js
                </a>
              
                
                <a class="source" href="heisenberg_all.html">
                  heisenberg_all.js
                </a>
              
                
                <a class="source" href="jquery.cometd.html">
                  jquery.cometd.js
                </a>
              
                
                <a class="source" href="jquery_clean.html">
                  jquery_clean.js
                </a>
              
                
                <a class="source" href="js_guided_tours_includes.html">
                  js_guided_tours_includes.js
                </a>
              
                
                <a class="source" href="js_includes_amb.html">
                  js_includes_amb.js
                </a>
              
                
                <a class="source" href="js_includes_customer.html">
                  js_includes_customer.js
                </a>
              
                
                <a class="source" href="js_includes_doctype.html">
                  js_includes_doctype.js
                </a>
              
                
                <a class="source" href="js_includes_form_presence.html">
                  js_includes_form_presence.js
                </a>
              
                
                <a class="source" href="js_includes_glide.html">
                  js_includes_glide.js
                </a>
              
                
                <a class="source" href="js_includes_i18n.html">
                  js_includes_i18n.js
                </a>
              
                
                <a class="source" href="js_includes_last_doctype.html">
                  js_includes_last_doctype.js
                </a>
              
                
                <a class="source" href="js_includes_link.html">
                  js_includes_link.js
                </a>
              
                
                <a class="source" href="js_includes_list_edit_doctype.html">
                  js_includes_list_edit_doctype.js
                </a>
              
                
                <a class="source" href="js_includes_listv2_doctype.html">
                  js_includes_listv2_doctype.js
                </a>
              
                
                <a class="source" href="js_includes_mention.html">
                  js_includes_mention.js
                </a>
              
                
                <a class="source" href="js_includes_notification.html">
                  js_includes_notification.js
                </a>
              
                
                <a class="source" href="js_includes_stream.html">
                  js_includes_stream.js
                </a>
              
                
                <a class="source" href="js_includes_ui.html">
                  js_includes_ui.js
                </a>
              
                
                <a class="source" href="js_includes_ui16_form.html">
                  js_includes_ui16_form.js
                </a>
              
                
                <a class="source" href="js_includes_ui_popover.html">
                  js_includes_ui_popover.js
                </a>
              
                
                <a class="source" href="js_includes_util.html">
                  js_includes_util.js
                </a>
              
                
                <a class="source" href="list_filter.html">
                  list_filter.js
                </a>
              
                
                <a class="source" href="magellan.CreateFavoriteModal.html">
                  magellan.CreateFavoriteModal.js
                </a>
              
                
                <a class="source" href="mentio.html">
                  mentio.js
                </a>
              
                
                <a class="source" href="modal.html">
                  modal.js
                </a>
              
                
                <a class="source" href="modals.html">
                  modals.js
                </a>
              
                
                <a class="source" href="newtag-it.html">
                  newtag-it.js
                </a>
              
                
                <a class="source" href="popover.html">
                  popover.js
                </a>
              
                
                <a class="source" href="popovers.html">
                  popovers.js
                </a>
              
                
                <a class="source" href="popupdivs14.html">
                  popupdivs14.js
                </a>
              
                
                <a class="source" href="popups.html">
                  popups.js
                </a>
              
                
                <a class="source" href="prototype.effects.html">
                  prototype.effects.js
                </a>
              
                
                <a class="source" href="prototype.hidefix.html">
                  prototype.hidefix.js
                </a>
              
                
                <a class="source" href="prototype.html">
                  prototype.js
                </a>
              
                
                <a class="source" href="prototype.plugin.html">
                  prototype.plugin.js
                </a>
              
                
                <a class="source" href="prototype.template.html">
                  prototype.template.js
                </a>
              
                
                <a class="source" href="provider.linkContentTypes.html">
                  provider.linkContentTypes.js
                </a>
              
                
                <a class="source" href="scoped_object_generators.html">
                  scoped_object_generators.js
                </a>
              
                
                <a class="source" href="scrollable.html">
                  scrollable.js
                </a>
              
                
                <a class="source" href="scrollspy.html">
                  scrollspy.js
                </a>
              
                
                <a class="source" href="service.AMB.html">
                  service.AMB.js
                </a>
              
                
                <a class="source" href="service.authInterceptor.html">
                  service.authInterceptor.js
                </a>
              
                
                <a class="source" href="service.avatarProfilePersister.html">
                  service.avatarProfilePersister.js
                </a>
              
                
                <a class="source" href="service.dateUtils.html">
                  service.dateUtils.js
                </a>
              
                
                <a class="source" href="service.filterExpressionParser.html">
                  service.filterExpressionParser.js
                </a>
              
                
                <a class="source" href="service.getTemplateUrl.html">
                  service.getTemplateUrl.js
                </a>
              
                
                <a class="source" href="service.guidedToursService.html">
                  service.guidedToursService.js
                </a>
              
                
                <a class="source" href="service.md5.html">
                  service.md5.js
                </a>
              
                
                <a class="source" href="service.nowServer.html">
                  service.nowServer.js
                </a>
              
                
                <a class="source" href="service.priorityQueue.html">
                  service.priorityQueue.js
                </a>
              
                
                <a class="source" href="service.snComplexPopoverService.html">
                  service.snComplexPopoverService.js
                </a>
              
                
                <a class="source" href="service.snConnect.html">
                  service.snConnect.js
                </a>
              
                
                <a class="source" href="service.snMention.html">
                  service.snMention.js
                </a>
              
                
                <a class="source" href="service.snNotifier.html">
                  service.snNotifier.js
                </a>
              
                
                <a class="source" href="service.snResource.html">
                  service.snResource.js
                </a>
              
                
                <a class="source" href="service.snTabActivity.html">
                  service.snTabActivity.js
                </a>
              
                
                <a class="source" href="service.urlTools.html">
                  service.urlTools.js
                </a>
              
                
                <a class="source" href="service.userData.html">
                  service.userData.js
                </a>
              
                
                <a class="source" href="service.userPreferences.html">
                  service.userPreferences.js
                </a>
              
                
                <a class="source" href="simpleStorage.html">
                  simpleStorage.js
                </a>
              
                
                <a class="source" href="snPolyfill.html">
                  snPolyfill.js
                </a>
              
                
                <a class="source" href="snPopover.html">
                  snPopover.js
                </a>
              
                
                <a class="source" href="snTimeAgoSettings.html">
                  snTimeAgoSettings.js
                </a>
              
                
                <a class="source" href="streamButton.html">
                  streamButton.js
                </a>
              
                
                <a class="source" href="templates.html">
                  templates.js
                </a>
              
                
                <a class="source" href="textutil.html">
                  textutil.js
                </a>
              
                
                <a class="source" href="timeAgo.html">
                  timeAgo.js
                </a>
              
                
                <a class="source" href="tooltip.html">
                  tooltip.js
                </a>
              
                
                <a class="source" href="tooltips.html">
                  tooltips.js
                </a>
              
                
                <a class="source" href="transition.html">
                  transition.js
                </a>
              
                
                <a class="source" href="ui_policy.html">
                  ui_policy.js
                </a>
              
                
                <a class="source" href="utils14.html">
                  utils14.js
                </a>
              
                
                <a class="source" href="velocity.ui.html">
                  velocity.ui.js
                </a>
              
                
                <a class="source" href="xmlhttp.html">
                  xmlhttp.js
                </a>
              
                
                <a class="source" href="z_last_include.html">
                  z_last_include.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>GlideForm14.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/*! RESOURCE: /scripts/doctype/GlideForm14.js */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">default_on_submit</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">if</span> (!g_form)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">return</span> g_form.onSubmit();
}
<span class="hljs-keyword">var</span> GlideForm = Class.create({
  <span class="hljs-attr">INFO_CLASS</span>: <span class="hljs-string">"fieldmsg notification notification-info"</span>,
  <span class="hljs-attr">ERROR_CLASS</span>: <span class="hljs-string">"fieldmsg notification notification-error"</span>,
  <span class="hljs-attr">WARNING_CLASS</span>: <span class="hljs-string">"fieldmsg notification notification-warning"</span>,
  <span class="hljs-attr">MSG_ROW</span>: <span class="hljs-string">"_message_row"</span>,
  <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">tableName, mandatory, checkMandatory, checkNumeric, checkInteger, isSearch</span>) </span>{
    <span class="hljs-keyword">this</span>.tableName = tableName;
    <span class="hljs-keyword">this</span>.modified = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">this</span>.modifiedFields = {};
    <span class="hljs-keyword">this</span>.mandatoryOnlyIfModified = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">this</span>.elements = [];
    <span class="hljs-keyword">this</span>.mandatory = mandatory;
    <span class="hljs-keyword">this</span>.checkMandatory = checkMandatory;
    <span class="hljs-keyword">this</span>.checkNumeric = checkNumeric;
    <span class="hljs-keyword">this</span>.checkInteger = checkInteger;
    <span class="hljs-keyword">this</span>.nameMap = [];
    <span class="hljs-keyword">this</span>.attributes = [];
    <span class="hljs-keyword">this</span>.validators = [];
    <span class="hljs-keyword">this</span>.disabledFields = [];
    <span class="hljs-keyword">this</span>.securityReadOnlyFields = [];
    <span class="hljs-keyword">this</span>.elementHandlers = {};
    <span class="hljs-keyword">this</span>.prefixHandlers = {};
    <span class="hljs-keyword">this</span>.derivedWaiting = [];
    <span class="hljs-keyword">this</span>.newRecord = gel(<span class="hljs-string">'sys_row'</span>) &amp;&amp; gel(<span class="hljs-string">'sys_row'</span>).value == <span class="hljs-string">"-1"</span>;
    <span class="hljs-keyword">this</span>.personalizeHiddenFields = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">this</span>.personalizePrefKey = <span class="hljs-string">"personalize_"</span> + <span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">"_"</span> + <span class="hljs-keyword">this</span>.getViewName();
    <span class="hljs-keyword">this</span>._isLiveUpdating = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">if</span> (!isSearch)
      CachedEvent.emit(<span class="hljs-string">'glideform.initialized'</span>, <span class="hljs-keyword">this</span>);
    <span class="hljs-keyword">else</span>
      setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        CachedEvent.emit(<span class="hljs-string">'glideform.initialized'</span>, <span class="hljs-keyword">this</span>)
      }, <span class="hljs-number">0</span>);
  },
  <span class="hljs-attr">fieldChanged</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">elementName, changeFlag</span>) </span>{
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._internalChange) {
      <span class="hljs-keyword">if</span> (changeFlag) {
        <span class="hljs-keyword">this</span>.modified = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">this</span>.modifiedFields[elementName] = <span class="hljs-literal">true</span>;
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.modifiedFields[elementName]) {
        <span class="hljs-keyword">this</span>.modifiedFields[elementName] = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">this</span>._checkModified();
      }
    }
    <span class="hljs-keyword">var</span> uniqueValue = <span class="hljs-keyword">this</span>.getUniqueValue();
    CustomEvent.fireAll(<span class="hljs-string">'form.isModified'</span>, {
      <span class="hljs-attr">uniqueValue</span>: uniqueValue,
      <span class="hljs-attr">isModified</span>: <span class="hljs-keyword">this</span>.modified
    });
  },
  <span class="hljs-attr">_checkModified</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> n <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.modifiedFields) {
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.modifiedFields[n]) {
        <span class="hljs-keyword">this</span>.modified = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">return</span>;
      }
    }
    <span class="hljs-keyword">this</span>.modified = <span class="hljs-literal">false</span>;
  },
  <span class="hljs-attr">setMandatoryOnlyIfModified</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.mandatoryOnlyIfModified = <span class="hljs-literal">true</span>;
  },
  <span class="hljs-attr">addNameMapEntry</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">entry</span>) </span>{
    <span class="hljs-keyword">this</span>.nameMap.push(entry);
  },
  <span class="hljs-attr">addGlideUIElement</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ed</span>) </span>{
    <span class="hljs-keyword">this</span>.elements.push(ed);
  },
  <span class="hljs-attr">registerHandler</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">id, handler</span>) </span>{
    <span class="hljs-keyword">this</span>.elementHandlers[id] = handler;
  },
  <span class="hljs-attr">registerPrefixHandler</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">prefix, handlerObject</span>) </span>{
    <span class="hljs-keyword">var</span> handler = <span class="hljs-keyword">new</span> GlideFormPrefixHandler(handlerObject);
    <span class="hljs-keyword">this</span>.prefixHandlers[prefix] = handler;
  },
  <span class="hljs-attr">getPrefixHandler</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">id</span>) </span>{
    <span class="hljs-keyword">if</span> (!id)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">if</span> (id.indexOf(<span class="hljs-string">'.'</span>) &lt; <span class="hljs-number">0</span>)
      id = <span class="hljs-string">'variables.'</span> + id;
    <span class="hljs-keyword">var</span> idSplit = id.split(<span class="hljs-string">"."</span>);
    <span class="hljs-keyword">var</span> handler = <span class="hljs-keyword">this</span>.prefixHandlers[idSplit[<span class="hljs-number">0</span>]];
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> handler == <span class="hljs-string">"undefined"</span>)
      <span class="hljs-keyword">return</span>;
    handler.setFieldName(id);
    <span class="hljs-keyword">return</span> handler;
  },
  <span class="hljs-attr">getElement</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">id</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.elementHandlers[id] &amp;&amp; (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.elementHandlers[id].getElement == <span class="hljs-string">"function"</span>))
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.elementHandlers[id].getElement();
    <span class="hljs-keyword">else</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getControl(id);
  },
  <span class="hljs-attr">getParameter</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">parm</span>) </span>{
    <span class="hljs-keyword">if</span> (!(parm.substr(<span class="hljs-number">0</span>, <span class="hljs-number">8</span>) == <span class="hljs-string">'sysparm_'</span>))
      parm = <span class="hljs-string">'sysparm_'</span> + parm;
    <span class="hljs-keyword">var</span> pcel = gel(parm);
    <span class="hljs-keyword">if</span> (pcel)
      <span class="hljs-keyword">return</span> pcel.value;
    <span class="hljs-keyword">else</span>
      <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
  },
  <span class="hljs-attr">hasAttribute</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">s</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.attributes[s])
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  },
  <span class="hljs-attr">addAttribute</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">s</span>) </span>{
    <span class="hljs-keyword">this</span>.attributes[s] = s;
  },
  <span class="hljs-attr">addValidator</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldType, validator</span>) </span>{
    <span class="hljs-keyword">this</span>.validators[fieldType] = validator;
  },
  <span class="hljs-attr">_getPersonalizeHiddenFields</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.personalizeHiddenFields == <span class="hljs-literal">null</span>) {
      <span class="hljs-keyword">var</span> prefVal = NOW[<span class="hljs-keyword">this</span>.personalizePrefKey] || getPreference(<span class="hljs-keyword">this</span>.personalizePrefKey);
      <span class="hljs-keyword">if</span> (<span class="hljs-string">'false'</span> == prefVal)
        <span class="hljs-keyword">this</span>.personalizeHiddenFields = [];
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (prefVal.length)
        <span class="hljs-keyword">this</span>.personalizeHiddenFields = prefVal.split(<span class="hljs-string">","</span>);
      <span class="hljs-keyword">else</span>
        <span class="hljs-keyword">this</span>.personalizeHiddenFields = [];
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.personalizeHiddenFields;
  },
  <span class="hljs-attr">resetPersonalizeHiddenFields</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.personalizeHiddenFields = [];
    <span class="hljs-keyword">this</span>._savePersonalizeHiddenFields(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-built_in">window</span>.reloadWindow(<span class="hljs-built_in">window</span>);
    });
  },
  <span class="hljs-attr">_savePersonalizeHiddenFields</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) </span>{
    setPreference(<span class="hljs-keyword">this</span>.personalizePrefKey, <span class="hljs-keyword">this</span>.personalizeHiddenFields.join(<span class="hljs-string">","</span>), callback);
  },
  <span class="hljs-attr">isUserPersonalizedField</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName</span>) </span>{
    fieldName = <span class="hljs-keyword">this</span>.removeCurrentPrefix(fieldName);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.personalizeHiddenFields === <span class="hljs-literal">null</span> ? <span class="hljs-literal">false</span> : <span class="hljs-keyword">this</span>.personalizeHiddenFields.indexOf(fieldName) != <span class="hljs-number">-1</span>;
  },
  <span class="hljs-attr">setUserDisplay</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName, display</span>) </span>{
    fieldName = <span class="hljs-keyword">this</span>.removeCurrentPrefix(fieldName);
    <span class="hljs-keyword">this</span>._getPersonalizeHiddenFields();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-keyword">this</span>.personalizeHiddenFields.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.personalizeHiddenFields[i] === fieldName) {
        <span class="hljs-keyword">this</span>.personalizeHiddenFields.splice(i, <span class="hljs-number">1</span>);
      }
    }
    <span class="hljs-keyword">this</span>.setDisplay(fieldName, display);
    <span class="hljs-keyword">if</span> ((display === <span class="hljs-literal">false</span> || display === <span class="hljs-string">'false'</span>) &amp;&amp; !<span class="hljs-keyword">this</span>.isMandatory(fieldName))
      <span class="hljs-keyword">this</span>.personalizeHiddenFields.push(fieldName);
    <span class="hljs-keyword">this</span>._savePersonalizeHiddenFields();
  },
  <span class="hljs-attr">setDisplay</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName, display</span>) </span>{
    fieldName = <span class="hljs-keyword">this</span>.removeCurrentPrefix(fieldName);
    <span class="hljs-keyword">this</span>._setDisplay(fieldName, display, <span class="hljs-keyword">this</span>.isMandatory(fieldName), <span class="hljs-keyword">this</span>.getValue(fieldName));
  },
  <span class="hljs-attr">_setDisplay</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName, display, isMandatory, fieldValue</span>) </span>{
    <span class="hljs-keyword">var</span> s = <span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">'.'</span> + fieldName;
    <span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>.getControl(fieldName);
    <span class="hljs-keyword">if</span> (!control) {
      <span class="hljs-keyword">var</span> handler = <span class="hljs-keyword">this</span>.getPrefixHandler(fieldName);
      <span class="hljs-keyword">if</span> (handler)
        handler.getObject().setDisplay(handler.getFieldName(), display);
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">var</span> displayValue = <span class="hljs-string">'none'</span>;
    <span class="hljs-keyword">if</span> (display == <span class="hljs-string">'true'</span> || display == <span class="hljs-literal">true</span>) {
      display = <span class="hljs-literal">true</span>;
      displayValue = <span class="hljs-string">''</span>;
    }
    <span class="hljs-keyword">if</span> ((display != <span class="hljs-literal">true</span>) &amp;&amp; isMandatory &amp;&amp; fieldValue == <span class="hljs-string">''</span>)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">var</span> theElement = control;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.elementHandlers[control.id] &amp;&amp; (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.elementHandlers[control.id].getElement == <span class="hljs-string">"function"</span>))
      theElement = <span class="hljs-keyword">this</span>.elementHandlers[control.id].getElement();
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.elementHandlers[control.id] &amp;&amp; (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.elementHandlers[control.id].setDisplay == <span class="hljs-string">"function"</span>)) {
      <span class="hljs-keyword">this</span>.elementHandlers[control.id].setDisplay(display ? <span class="hljs-string">''</span> : <span class="hljs-string">'none'</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">this</span>.changeElementStyle(fieldName, <span class="hljs-string">'display'</span>, displayValue);
    }
    <span class="hljs-keyword">this</span>.setSensitiveDisplayValue(s + <span class="hljs-string">".ui_policy_sensitive"</span>, displayValue);
    <span class="hljs-keyword">var</span> glideElement = <span class="hljs-keyword">this</span>.getGlideUIElement(fieldName);
    <span class="hljs-keyword">if</span> (glideElement)
      <span class="hljs-keyword">if</span> (glideElement.type == <span class="hljs-string">'script'</span> || glideElement.type == <span class="hljs-string">'script_plain'</span> || glideElement.type == <span class="hljs-string">'xml'</span>)
        CustomEvent.fire(<span class="hljs-string">'element_script_display_'</span> + display, {
          <span class="hljs-string">'element'</span>: glideElement
        });
    _frameChanged();
  },
  <span class="hljs-attr">setSensitiveDisplayValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name, displayValue</span>) </span>{
    <span class="hljs-keyword">var</span> elements = <span class="hljs-built_in">document</span>.getElementsByName(name);
    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; elements.length; i++) {
      elements[i].style.display = displayValue;
    }
  },
  <span class="hljs-attr">setValidation</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName, validate</span>) </span>{
    fieldName = <span class="hljs-keyword">this</span>.removeCurrentPrefix(fieldName);
    <span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>.getControl(fieldName);
    <span class="hljs-keyword">if</span> (!control)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">if</span> (validate == <span class="hljs-string">'false'</span>)
      validate = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">if</span> (validate != <span class="hljs-literal">false</span>) {
      control.removeAttribute(<span class="hljs-string">'validate'</span>);
      <span class="hljs-keyword">return</span>;
    }
    control.setAttribute(<span class="hljs-string">'validate'</span>, <span class="hljs-string">'false'</span>);
  },
  <span class="hljs-attr">getViewName</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> sysparmView = gel(<span class="hljs-string">'sysparm_view'</span>);
    <span class="hljs-keyword">var</span> view = <span class="hljs-string">"default"</span>;
    <span class="hljs-keyword">if</span> (sysparmView &amp;&amp; sysparmView.value)
      view = sysparmView.value;
    <span class="hljs-keyword">return</span> view;
  },
  <span class="hljs-attr">setVisible</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName, visibility</span>) </span>{
    fieldName = <span class="hljs-keyword">this</span>.removeCurrentPrefix(fieldName);
    <span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>.getControl(fieldName);
    <span class="hljs-keyword">if</span> (!control) {
      <span class="hljs-keyword">var</span> handler = <span class="hljs-keyword">this</span>.getPrefixHandler(fieldName);
      <span class="hljs-keyword">if</span> (handler)
        handler.getObject().setVisible(handler.getFieldName(),
          visibility);
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">var</span> v = <span class="hljs-string">'hidden'</span>;
    <span class="hljs-keyword">if</span> (visibility == <span class="hljs-string">'true'</span>)
      visibility = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">if</span> (visibility)
      v = <span class="hljs-string">'visible'</span>;
    <span class="hljs-keyword">if</span> ((visibility != <span class="hljs-literal">true</span>) &amp;&amp; <span class="hljs-keyword">this</span>.isMandatory(fieldName) &amp;&amp; (<span class="hljs-keyword">this</span>.getValue(fieldName) == <span class="hljs-string">''</span>))
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">this</span>.changeElementStyle(fieldName, <span class="hljs-string">'visibility'</span>, v);
  },
  <span class="hljs-attr">changeElementStyle</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName, name, value</span>) </span>{
    <span class="hljs-keyword">var</span> ge = <span class="hljs-keyword">this</span>.getGlideUIElement(fieldName);
    <span class="hljs-keyword">if</span> (!ge)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.changeElementParent(ge, name, value))
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">var</span> labelElement = ge.getLabelElement();
    <span class="hljs-keyword">if</span> (labelElement)
      labelElement.parentNode.parentNode.style[name] = value;
    <span class="hljs-keyword">var</span> parentTR = findParentByTag(ge.getElement(), <span class="hljs-string">"tr"</span>);
    <span class="hljs-keyword">if</span> (parentTR &amp;&amp; parentTR != labelElement)
      parentTR.style[name] = value;
  },
  <span class="hljs-attr">changeElementParent</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ge, name, value</span>) </span>{
    <span class="hljs-keyword">var</span> element = ge.getElementParentNode();
    <span class="hljs-keyword">if</span> (element) {
      element.style[name] = value;
      <span class="hljs-keyword">var</span> decoration = $(element).select(<span class="hljs-string">".reference_decoration, .btn-ref"</span>);
      <span class="hljs-keyword">var</span> isEmptyRef = ge.type == <span class="hljs-string">'reference'</span> &amp;&amp; <span class="hljs-keyword">this</span>.getValue(ge.fieldName) == <span class="hljs-string">''</span>;
      <span class="hljs-keyword">if</span> (decoration &amp;&amp; decoration.length &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; decoration.length; i++) {
          <span class="hljs-keyword">if</span> (isEmptyRef &amp;&amp; (decoration[i].getAttribute(<span class="hljs-string">'data-type'</span>) == <span class="hljs-string">'reference_popup'</span>))
            decoration[i].style[name] = <span class="hljs-string">'none'</span>;
          <span class="hljs-keyword">else</span>
            decoration[i].style[name] = value;
        }
      }
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  },
  <span class="hljs-attr">getLabel</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">id</span>) </span>{
    id = <span class="hljs-keyword">this</span>.removeCurrentPrefix(id);
    <span class="hljs-keyword">var</span> label;
    <span class="hljs-keyword">var</span> labels = <span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">'label'</span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>;
      (label = labels[i]); i++) {
      <span class="hljs-keyword">if</span> (label.htmlFor.endsWith(id)) {
        <span class="hljs-keyword">return</span> label;
      }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  },
  <span class="hljs-attr">isNewRecord</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.newRecord;
  },
  <span class="hljs-attr">isMandatory</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName</span>) </span>{
    fieldName = <span class="hljs-keyword">this</span>.removeCurrentPrefix(fieldName);
    <span class="hljs-keyword">var</span> thisElement = <span class="hljs-keyword">this</span>.getGlideUIElement(fieldName);
    <span class="hljs-keyword">if</span> (!thisElement) {
      <span class="hljs-keyword">var</span> handler = <span class="hljs-keyword">this</span>.getPrefixHandler(fieldName);
      <span class="hljs-keyword">if</span> (handler)
        <span class="hljs-keyword">return</span> handler.getObject().isMandatory(handler.getFieldName());
      <span class="hljs-keyword">else</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-keyword">return</span> thisElement.isMandatory();
  },
  <span class="hljs-attr">addSecurityReadOnlyFields</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fields</span>) </span>{
    <span class="hljs-keyword">this</span>.securityReadOnlyFields = fields.split(<span class="hljs-string">','</span>);
  },
  <span class="hljs-attr">setRequiredChecked</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName, required</span>) </span>{
    <span class="hljs-keyword">if</span> (!fieldName || !fieldName.startsWith(<span class="hljs-string">'ni.VE'</span>)) {
      jslog(<span class="hljs-string">"Invalid variable id"</span>);
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">var</span> handler = <span class="hljs-keyword">this</span>.getPrefixHandler(<span class="hljs-keyword">this</span>.resolvePrettyNameMap(fieldName));
    <span class="hljs-keyword">if</span> (!handler) {
      jslog(<span class="hljs-string">"Invalid variable id"</span>);
      <span class="hljs-keyword">return</span>;
    }
    handler.getObject().setRequiredChecked(fieldName, required);
  },
  <span class="hljs-attr">setMandatory</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName, mandatory</span>) </span>{
    <span class="hljs-keyword">var</span> thisElement = <span class="hljs-keyword">this</span>.getGlideUIElement(fieldName);
    <span class="hljs-keyword">if</span> (!thisElement) {
      <span class="hljs-keyword">var</span> handler = <span class="hljs-keyword">this</span>.getPrefixHandler(fieldName);
      <span class="hljs-keyword">if</span> (handler)
        handler.getObject().setMandatory(handler.getFieldName(), mandatory);
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.securityReadOnlyFields.indexOf(<span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">"."</span> + fieldName) &gt;= <span class="hljs-number">0</span>)
      <span class="hljs-keyword">return</span>;
    thisElement.setMandatory(mandatory);
    <span class="hljs-keyword">var</span> e = thisElement.getElement();
    <span class="hljs-keyword">if</span> (e) {
      e.setAttribute(<span class="hljs-string">"mandatory"</span>, mandatory);
      onChangeLabelProcessByEl(e, thisElement.getStatusElement());
    }
    <span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>.getControl(fieldName);
    <span class="hljs-keyword">if</span> (control &amp;&amp; control.id &amp;&amp; <span class="hljs-keyword">this</span>.elementHandlers[control.id] &amp;&amp; (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.elementHandlers[control.id].setMandatory == <span class="hljs-string">"function"</span>))
      <span class="hljs-keyword">this</span>.elementHandlers[control.id].setMandatory(mandatory);
    <span class="hljs-keyword">if</span> (mandatory) {
      setMandatoryExplained(<span class="hljs-literal">true</span>);
      <span class="hljs-keyword">var</span> value = <span class="hljs-keyword">this</span>.getValue(fieldName);
      <span class="hljs-keyword">if</span> (value == <span class="hljs-string">''</span>) {
        <span class="hljs-keyword">this</span>._setDisplay(fieldName, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>, <span class="hljs-string">''</span>);
        <span class="hljs-keyword">this</span>._setReadonly(fieldName, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>, <span class="hljs-string">''</span>);
      }
    }
    opticsLog(<span class="hljs-keyword">this</span>.getTableName(), fieldName, <span class="hljs-string">"Mandatory set to "</span> + mandatory);
  },
  <span class="hljs-attr">setDisabled</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName, disabled</span>) </span>{
    <span class="hljs-keyword">this</span>.setReadonly(fieldName, disabled);
    opticsLog(<span class="hljs-keyword">this</span>.getTableName(), fieldName, <span class="hljs-string">"Disabled set to "</span> + disabled);
  },
  <span class="hljs-attr">setReadOnly</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName, disabled</span>) </span>{
    <span class="hljs-keyword">this</span>.setReadonly(fieldName, disabled);
  },
  <span class="hljs-attr">setReadonly</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName, disabled</span>) </span>{
    fieldName = <span class="hljs-keyword">this</span>.removeCurrentPrefix(fieldName);
    <span class="hljs-keyword">this</span>._setReadonly(fieldName, disabled, <span class="hljs-keyword">this</span>.isMandatory(fieldName), <span class="hljs-keyword">this</span>.getValue(fieldName));
    opticsLog(<span class="hljs-keyword">this</span>.getTableName(), fieldName, <span class="hljs-string">"ReadOnly set to "</span> + disabled);
  },
  <span class="hljs-attr">_setReadonly</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName, disabled, isMandatory, fieldValue</span>) </span>{
    <span class="hljs-keyword">var</span> s = <span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">'.'</span> + fieldName;
    <span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>.getControl(fieldName);
    <span class="hljs-keyword">if</span> (!control) {
      <span class="hljs-keyword">var</span> handler = <span class="hljs-keyword">this</span>.getPrefixHandler(fieldName);
      <span class="hljs-keyword">if</span> (handler)
        handler.getObject()._setReadonly(
          handler.getFieldName(), disabled, isMandatory,
          fieldValue);
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">var</span> ge = <span class="hljs-keyword">this</span>.getGlideUIElement(fieldName);
    <span class="hljs-keyword">if</span> (!ge)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">this</span>._setReadonly0(ge, control, s, fieldName, disabled, isMandatory, fieldValue);
  },
  <span class="hljs-attr">_setReadonly0</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ge, control, s, fieldName, disabled, isMandatory, fieldValue</span>) </span>{
    <span class="hljs-keyword">if</span> (disabled &amp;&amp; isMandatory &amp;&amp; fieldValue == <span class="hljs-string">''</span>)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">if</span> (control.getAttribute(<span class="hljs-string">'gsftlocked'</span>) == <span class="hljs-string">'true'</span>)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.elementHandlers[control.id] &amp;&amp; (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.elementHandlers[control.id].setReadOnly == <span class="hljs-string">"function"</span>)) {
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.elementHandlers[control.id].setReadOnly(disabled) == <span class="hljs-literal">true</span>)
        <span class="hljs-keyword">return</span>;
    } <span class="hljs-keyword">else</span>
      <span class="hljs-keyword">this</span>.setDisabledControl(control, disabled);
    <span class="hljs-keyword">this</span>._setDisabledField(control, disabled);
    onChangeLabelProcessByEl(control, ge.getStatusElement());
    <span class="hljs-keyword">this</span>._setFieldReadOnly(ge, <span class="hljs-string">"sys_display."</span> + s, disabled);
    <span class="hljs-keyword">this</span>._setFieldReadOnly(ge, <span class="hljs-string">"sys_select."</span> + s, disabled);
    <span class="hljs-keyword">var</span> $inputGroup = $j(ge.getElementParentNode()).find(<span class="hljs-string">".input-group"</span>);
    <span class="hljs-keyword">if</span> ($inputGroup.length) {
      <span class="hljs-keyword">if</span> (disabled)
        $inputGroup.addClass(<span class="hljs-string">'input-group-disabled'</span>);
      <span class="hljs-keyword">else</span>
        $inputGroup.removeClass(<span class="hljs-string">'input-group-disabled'</span>);
    }
    <span class="hljs-keyword">this</span>.setSensitiveDisplayValue(s + <span class="hljs-string">".ui_policy_sensitive"</span>, disabled ? <span class="hljs-string">'none'</span> : <span class="hljs-string">''</span>);
    <span class="hljs-keyword">this</span>._setFieldReadOnly(ge, <span class="hljs-string">"ni."</span> + <span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">"."</span> + fieldName, disabled);
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.tableName == <span class="hljs-string">"ni"</span>)
      <span class="hljs-keyword">this</span>._setFieldReadOnly(ge, <span class="hljs-string">"ni."</span> + ge.fieldName, disabled);
    <span class="hljs-keyword">var</span> suggestionExists = gel(<span class="hljs-string">'ni.dependent_reverse.'</span> + <span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">'.'</span> + fieldName);
    <span class="hljs-keyword">if</span> (suggestionExists) {
      <span class="hljs-keyword">this</span>._setFieldReadOnly(ge, <span class="hljs-string">"lookup."</span> + <span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">"."</span> + fieldName, disabled, <span class="hljs-literal">true</span>);
    }
  },
  <span class="hljs-attr">_setFieldReadOnly</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ge, s, disabled, skipProcessLabelChange</span>) </span>{
    <span class="hljs-keyword">var</span> control = ge.getChildElementById(s);
    <span class="hljs-keyword">if</span> (control) {
      <span class="hljs-keyword">this</span>.setDisabledControl(control, disabled);
      <span class="hljs-keyword">this</span>._setDisabledField(control, disabled);
      <span class="hljs-keyword">if</span> (!skipProcessLabelChange)
        onChangeLabelProcessByEl(control, ge.getStatusElement());
    }
  },
  <span class="hljs-attr">setDisabledControl</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">control, disabled</span>) </span>{
    <span class="hljs-keyword">if</span> (disabled) {
      control.setAttribute(<span class="hljs-string">"readonly"</span>, <span class="hljs-string">"readonly"</span>);
      addClassName(control, <span class="hljs-string">'disabled'</span>);
    } <span class="hljs-keyword">else</span> {
      control.removeAttribute(<span class="hljs-string">"readonly"</span>);
      removeClassName(control, <span class="hljs-string">'disabled'</span>);
    }
    <span class="hljs-keyword">var</span> name = control.tagName.toLowerCase();
    <span class="hljs-keyword">var</span> type = control.getAttribute(<span class="hljs-string">'type'</span>);
    <span class="hljs-keyword">if</span> ((isFirefox &amp;&amp; (name == <span class="hljs-string">'input'</span> &amp;&amp; (type == <span class="hljs-string">'text'</span> || type == <span class="hljs-literal">null</span>))) || name == <span class="hljs-string">'textarea'</span>)
      control.disabled = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">else</span>
      control.disabled = disabled;
  },
  <span class="hljs-attr">_setDisabledField</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">control, disabled</span>) </span>{
    <span class="hljs-keyword">if</span> (disabled) {
      addClassName(control, <span class="hljs-string">'disabled'</span>);
      addClassName(control, <span class="hljs-string">'readonly'</span>);
      <span class="hljs-keyword">this</span>._addDisabledField(control);
    } <span class="hljs-keyword">else</span> {
      removeClassName(control, <span class="hljs-string">'disabled'</span>);
      removeClassName(control, <span class="hljs-string">'readonly'</span>);
      <span class="hljs-keyword">this</span>._removeDisabledField(control);
    }
  },
  <span class="hljs-attr">_addDisabledField</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">control</span>) </span>{
    <span class="hljs-keyword">var</span> n = <span class="hljs-keyword">this</span>.disabledFields.length;
    <span class="hljs-keyword">this</span>.disabledFields[n] = control;
  },
  <span class="hljs-attr">_removeDisabledField</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">control</span>) </span>{
    <span class="hljs-keyword">var</span> n = <span class="hljs-keyword">this</span>.disabledFields.length;
    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; n; i++) {
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.disabledFields[i] == control) {
        <span class="hljs-keyword">this</span>.disabledFields.splice(i, <span class="hljs-number">1</span>);
        <span class="hljs-keyword">break</span>;
      }
    }
  },
  <span class="hljs-attr">onSubmit</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.getFormElement().addClassName(<span class="hljs-string">'form-submitted'</span>);
    <span class="hljs-keyword">var</span> action = <span class="hljs-keyword">this</span>.getActionName();
    <span class="hljs-keyword">if</span> (action &amp;&amp; !action.startsWith(<span class="hljs-string">"sysverb_no_update"</span>))
      <span class="hljs-keyword">this</span>.submitted = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">if</span> (action == <span class="hljs-string">'sysverb_back'</span> || action == <span class="hljs-string">'sysverb_cancel'</span> || action == <span class="hljs-string">'sysverb_delete'</span> || action == <span class="hljs-string">'sysverb_query'</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">var</span> rc = <span class="hljs-keyword">this</span>.mandatoryCheck();
    <span class="hljs-keyword">if</span> (rc &amp;&amp; <span class="hljs-keyword">typeof</span> g_sc_form != <span class="hljs-string">"undefined"</span>)
      rc = g_sc_form.mandatoryCheck() &amp;&amp; g_sc_form.catalogOnSubmit();
    rc = rc &amp;&amp; <span class="hljs-keyword">this</span>.validate();
    <span class="hljs-keyword">return</span> rc;
  },
  <span class="hljs-attr">enableUIPolicyFields</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>.disabledFields.length; i++) {
      <span class="hljs-keyword">var</span> disabledID = <span class="hljs-keyword">this</span>.disabledFields[i].id;
      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._isDerivedWaiting(disabledID))
        <span class="hljs-keyword">this</span>.disabledFields[i].disabled = <span class="hljs-literal">false</span>;
      <span class="hljs-keyword">else</span>
        jslog(<span class="hljs-string">"Did not re-enable "</span> + disabledID + <span class="hljs-string">" as it is derived waiting for AJAX lookup"</span>);
    }
  },
  <span class="hljs-attr">mandatoryCheck</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.checkMandatory || (!<span class="hljs-keyword">this</span>.modified &amp;&amp; <span class="hljs-keyword">this</span>.mandatoryOnlyIfModified))
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">var</span> rc = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">var</span> invalidFields = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>();
    <span class="hljs-keyword">var</span> labels = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>();
    <span class="hljs-keyword">var</span> missing = <span class="hljs-keyword">this</span>.getMissingFields();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; missing.length; i++) {
      rc = <span class="hljs-literal">false</span>;
      <span class="hljs-keyword">var</span> field = missing[i];
      <span class="hljs-keyword">var</span> widget = <span class="hljs-keyword">this</span>.getControl(field);
      <span class="hljs-keyword">if</span> (i == <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">var</span> tryLabel = !$j(widget).is(<span class="hljs-string">':visible'</span>);
        <span class="hljs-keyword">if</span> (!tryLabel) {
          <span class="hljs-keyword">try</span> {
            widget.focus();
          } <span class="hljs-keyword">catch</span> (e) {
            tryLabel = <span class="hljs-literal">true</span>;
          }
        }
        <span class="hljs-keyword">if</span> (tryLabel) {
          <span class="hljs-keyword">var</span> displayWidget = <span class="hljs-keyword">this</span>.getDisplayBox(field);
          <span class="hljs-keyword">if</span> (displayWidget) {
            <span class="hljs-keyword">try</span> {
              displayWidget.focus();
            } <span class="hljs-keyword">catch</span> (exception) {}
          }
        }
      }
      labels.push(<span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">'.'</span> + field);
      <span class="hljs-keyword">var</span> widgetLabel = <span class="hljs-keyword">this</span>.getLabelOf(field);
      <span class="hljs-keyword">var</span> shortLabel = trim(widgetLabel + <span class="hljs-string">''</span>);
      invalidFields.push(shortLabel);
    }
    <span class="hljs-keyword">if</span> (!rc) {
      <span class="hljs-keyword">var</span> theText = invalidFields.join(<span class="hljs-string">', '</span>);
      theText = getMessage(<span class="hljs-string">'The following mandatory fields are not filled in'</span>) + <span class="hljs-string">': '</span> + theText;
      <span class="hljs-keyword">try</span> {
        alert(theText);
        <span class="hljs-keyword">this</span>.submitted = <span class="hljs-literal">false</span>;
      } <span class="hljs-keyword">catch</span> (e) {}
    }
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; labels.length; i++) {
      <span class="hljs-keyword">this</span>.flash(labels[i], <span class="hljs-string">"#FFFACD"</span>, <span class="hljs-number">0</span>);
    }
    <span class="hljs-keyword">return</span> rc;
  },
  <span class="hljs-attr">setVariablesReadOnly</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">readOnly</span>) </span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span>; x &lt; g_form.elements.length; x++) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>.nameMap.length; i++) {
        <span class="hljs-keyword">var</span> entry = <span class="hljs-keyword">this</span>.nameMap[i];
        <span class="hljs-keyword">var</span> element = g_form.elements[x];
        <span class="hljs-keyword">if</span> (entry.realName == element.fieldName &amp;&amp; element.tableName == <span class="hljs-string">"variable"</span>) {
          <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> g_sc_form == <span class="hljs-string">"undefined"</span> || !g_sc_form)
            <span class="hljs-keyword">this</span>.setReadOnly(entry.prettyName, readOnly);
          <span class="hljs-keyword">else</span>
            g_sc_form.setReadOnly(entry.prettyName, readOnly);
        }
      }
    }
  },
  <span class="hljs-attr">getHelpTextControl</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">variableName</span>) </span>{
    <span class="hljs-keyword">var</span> handler = <span class="hljs-keyword">this</span>.getPrefixHandler(variableName);
    <span class="hljs-keyword">var</span> ele;
    <span class="hljs-keyword">if</span> (handler) {
      <span class="hljs-keyword">var</span> handlerObject = handler.getObject();
      ele = handlerObject.getHelpTextControl(handlerObject.removeCurrentPrefix(variableName));
    }
    <span class="hljs-keyword">if</span> (!ele) {
      jslog(<span class="hljs-string">"getHelpTextControl is supported for only Service Catalog Variables"</span>);
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">return</span> ele;
  },
  <span class="hljs-attr">getEditableFields</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> fa = <span class="hljs-keyword">this</span>.elements;
    <span class="hljs-keyword">var</span> answer = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; fa.length; i++) {
      <span class="hljs-keyword">var</span> ed = fa[i];
      <span class="hljs-keyword">var</span> widget = <span class="hljs-keyword">this</span>.getControl(ed.fieldName);
      <span class="hljs-keyword">if</span> (!widget)
        <span class="hljs-keyword">continue</span>;
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isEditableField(ed, widget))
        answer.push(ed.fieldName);
    }
    <span class="hljs-keyword">return</span> answer;
  },
  <span class="hljs-attr">isEditableField</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ge, control</span>) </span>{
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.isTemplateCompatible(ge, control)) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.isVisible(ge, control))
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isReadOnly(ge, control))
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isDisplayNone(ge, control))
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  },
  <span class="hljs-attr">isTemplateCompatible</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ge, control</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.elementHandlers[control.id]) {
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.elementHandlers[control.id].isTemplatable == <span class="hljs-string">"function"</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.elementHandlers[control.id].isTemplatable();
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      }
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
  },
  <span class="hljs-attr">isVisible</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ge, control</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isDisplayNone(ge, control))
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.elementHandlers[control.id])
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.elementHandlers[control.id].isVisible == <span class="hljs-string">"function"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.elementHandlers[control.id].isVisible();
    <span class="hljs-keyword">if</span> (ge.getType() != <span class="hljs-string">"glide_duration"</span> &amp;&amp; ge.getType != <span class="hljs-string">"glide_time"</span>) {
      <span class="hljs-keyword">var</span> xx = control.style[<span class="hljs-string">'visibility'</span>];
      <span class="hljs-keyword">if</span> (xx == <span class="hljs-string">'hidden'</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    xx = <span class="hljs-keyword">this</span>._getElementStyle(ge, <span class="hljs-string">'visibility'</span>);
    <span class="hljs-keyword">if</span> (xx == <span class="hljs-string">'hidden'</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  },
  <span class="hljs-attr">isDisabled</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName</span>) </span>{
    fieldName = <span class="hljs-keyword">this</span>.removeCurrentPrefix(fieldName);
    <span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>.getControl(fieldName);
    <span class="hljs-keyword">if</span> (!control)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.elementHandlers[control.id])
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.elementHandlers[control.id].isDisabled == <span class="hljs-string">"function"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.elementHandlers[control.id].isDisabled();
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.isReadOnly(<span class="hljs-string">""</span>, control);
  },
  <span class="hljs-attr">isReadOnly</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ge, control</span>) </span>{
    <span class="hljs-keyword">if</span> (!control)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.elementHandlers[control.id])
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.elementHandlers[control.id].isReadOnly == <span class="hljs-string">"function"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.elementHandlers[control.id].isReadOnly();
    <span class="hljs-keyword">return</span> control.disabled || control.readOnly || control.hasClassName(<span class="hljs-string">"readonly"</span>);
  },
  <span class="hljs-attr">isDisplayNone</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ge, control</span>) </span>{
    <span class="hljs-keyword">var</span> parentNode = ge.getElementParentNode();
    <span class="hljs-keyword">if</span> (parentNode &amp;&amp; parentNode.style.display == <span class="hljs-string">'none'</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">if</span> (ge.getType() == <span class="hljs-string">'html'</span> || ge.getType() == <span class="hljs-string">'translated_html'</span> || ge.getType() == <span class="hljs-string">'composite_name'</span> || ge.getType() == <span class="hljs-string">'url'</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">if</span> (!control)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">var</span> xx = control.style[<span class="hljs-string">'display'</span>];
    <span class="hljs-keyword">if</span> (xx == <span class="hljs-string">'none'</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">var</span> xx = <span class="hljs-keyword">this</span>._getElementStyle(ge, <span class="hljs-string">'display'</span>);
    <span class="hljs-keyword">if</span> (xx == <span class="hljs-string">'none'</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  },
  <span class="hljs-attr">_getElementStyle</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ge, style</span>) </span>{
    <span class="hljs-keyword">var</span> element = ge.getElementParentNode();
    <span class="hljs-keyword">if</span> (element)
      <span class="hljs-keyword">return</span> element.style[style];
    <span class="hljs-keyword">var</span> labelElement = ge.getLabelElement();
    <span class="hljs-keyword">if</span> (labelElement)
      <span class="hljs-keyword">return</span> labelElement.parentNode.parentNode.style[style];
    <span class="hljs-keyword">var</span> parentTR = findParentByTag(ge.getElement(), <span class="hljs-string">"tr"</span>);
    <span class="hljs-keyword">if</span> (parentTR &amp;&amp; parentTR != labelElement)
      <span class="hljs-keyword">return</span> parentTR.style[name];
    <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
  },
  <span class="hljs-attr">getMissingFields</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> fa = <span class="hljs-keyword">this</span>.elements;
    <span class="hljs-keyword">var</span> answer = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; fa.length; i++) {
      <span class="hljs-keyword">var</span> ed = fa[i];
      <span class="hljs-keyword">if</span> (!ed.mandatory)
        <span class="hljs-keyword">continue</span>;
      <span class="hljs-keyword">var</span> widget = <span class="hljs-keyword">this</span>.getControl(ed.fieldName);
      <span class="hljs-keyword">if</span> (!widget)
        <span class="hljs-keyword">continue</span>;
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isMandatoryFieldEmpty(ed))
        answer.push(ed.fieldName);
    }
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> g_sc_form != <span class="hljs-string">"undefined"</span> &amp;&amp; g_sc_form)
      g_sc_form.getMissingFields(answer);
    <span class="hljs-keyword">return</span> answer;
  },
  <span class="hljs-attr">_isMandatoryFieldEmpty</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ed</span>) </span>{
    <span class="hljs-keyword">var</span> widgetValue = <span class="hljs-keyword">this</span>.getValue(ed.fieldName);
    <span class="hljs-keyword">if</span> (widgetValue != <span class="hljs-literal">null</span> &amp;&amp; widgetValue != <span class="hljs-string">''</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">if</span> (ed.supportsMapping) {
      <span class="hljs-keyword">var</span> id = <span class="hljs-string">"sys_mapping."</span> + ed.tableName + <span class="hljs-string">"."</span> + ed.fieldName;
      <span class="hljs-keyword">var</span> mappingValue = <span class="hljs-keyword">this</span>.getValue(id);
      <span class="hljs-keyword">if</span> (mappingValue.trim())
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      <span class="hljs-keyword">var</span> nonMappedFieldValue = <span class="hljs-keyword">this</span>.getValue(ed.tableName + <span class="hljs-string">"."</span> + ed.fieldName);
      <span class="hljs-keyword">if</span> (nonMappedFieldValue.trim())
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    <span class="hljs-keyword">var</span> displayBox = <span class="hljs-keyword">this</span>.getDisplayBox(ed.fieldName);
    <span class="hljs-keyword">if</span> (displayBox != <span class="hljs-literal">null</span>) {
      <span class="hljs-keyword">var</span> displayValue = displayBox.value;
      <span class="hljs-keyword">if</span> (displayValue != <span class="hljs-literal">null</span> &amp;&amp; displayValue != <span class="hljs-string">''</span> &amp;&amp; displayBox.getAttribute(<span class="hljs-string">'data-ref-dynamic'</span>) == <span class="hljs-string">'true'</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      }
    }
    <span class="hljs-keyword">if</span> ((<span class="hljs-keyword">this</span>.isNewRecord() || <span class="hljs-keyword">this</span>.mandatory) &amp;&amp; !ed.isDerived())
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    widgetName = <span class="hljs-string">"sys_original."</span> + <span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">'.'</span> + ed.fieldName;
    widget = gel(widgetName);
    <span class="hljs-keyword">if</span> (widget) {
      widgetValue = widget.value;
      <span class="hljs-keyword">if</span> ((widgetValue == <span class="hljs-literal">null</span> || widgetValue == <span class="hljs-string">''</span>) &amp;&amp; ed.type != <span class="hljs-string">"journal_input"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  },
  <span class="hljs-attr">resolveNameMap</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">prettyName</span>) </span>{
    <span class="hljs-keyword">var</span> rc = prettyName;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>.nameMap.length; i++) {
      <span class="hljs-keyword">var</span> entry = <span class="hljs-keyword">this</span>.nameMap[i];
      <span class="hljs-keyword">if</span> (entry.prettyName == prettyName) {
        rc = entry.realName;
      }
    }
    <span class="hljs-keyword">return</span> rc;
  },
  <span class="hljs-attr">resolvePrettyNameMap</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">realName</span>) </span>{
    <span class="hljs-keyword">var</span> pname = realName;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>.nameMap.length; i++)
      <span class="hljs-keyword">if</span> (<span class="hljs-string">'ni.VE'</span> + <span class="hljs-keyword">this</span>.nameMap[i].realName == realName) {
        pname = <span class="hljs-keyword">this</span>.nameMap[i].prettyName;
        <span class="hljs-keyword">break</span>;
      }
    <span class="hljs-keyword">return</span> pname;
  },
  <span class="hljs-attr">getFormElement</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> gel(<span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">'.do'</span>);
  },
  <span class="hljs-attr">getControl</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName</span>) </span>{
    <span class="hljs-keyword">var</span> ge = <span class="hljs-keyword">this</span>.getGlideUIElement(fieldName);
    <span class="hljs-keyword">if</span> (ge) {
      <span class="hljs-keyword">var</span> widget = ge.getElement();
      <span class="hljs-keyword">if</span> (widget) {
        <span class="hljs-keyword">return</span> widget;
      }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getControlByForm(fieldName);
  },
  <span class="hljs-attr">getControlByForm</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName</span>) </span>{
    <span class="hljs-keyword">var</span> form = <span class="hljs-keyword">this</span>.getFormElement();
    <span class="hljs-keyword">if</span> (!form)
      <span class="hljs-keyword">return</span>;
    widget = form[<span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">'.'</span> + fieldName];
    <span class="hljs-keyword">if</span> (!widget)
      widget = form[fieldName];
    <span class="hljs-keyword">if</span> (widget &amp;&amp; <span class="hljs-keyword">typeof</span> widget != <span class="hljs-string">'string'</span> &amp;&amp; widget.length &amp;&amp; widget.tagName != <span class="hljs-string">"SELECT"</span>) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; widget.length; i++) {
        <span class="hljs-keyword">if</span> (widget[i].checked)
          <span class="hljs-keyword">return</span> widget[i];
      }
      <span class="hljs-keyword">var</span> wt = widget[<span class="hljs-number">0</span>].type;
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> wt != <span class="hljs-string">'undefined'</span> &amp;&amp; wt == <span class="hljs-string">'radio'</span>)
        <span class="hljs-keyword">return</span> widget[<span class="hljs-number">0</span>];
    }
    <span class="hljs-keyword">return</span> widget;
  },
  <span class="hljs-attr">_tryLabelRow</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName</span>) </span>{
    <span class="hljs-keyword">var</span> element = <span class="hljs-keyword">this</span>._tryLabelRowElement(fieldName);
    <span class="hljs-keyword">if</span> (element)
      <span class="hljs-keyword">return</span> element.innerText || element.textContent;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  },
  <span class="hljs-attr">_tryLabelRowElement</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName</span>) </span>{
    <span class="hljs-keyword">var</span> id = <span class="hljs-string">"label_"</span> + fieldName;
    <span class="hljs-keyword">var</span> row = gel(id);
    <span class="hljs-keyword">if</span> (row) {
      <span class="hljs-keyword">var</span> child = row.firstChild;
      <span class="hljs-keyword">if</span> (child) {
        <span class="hljs-keyword">return</span> child;
      }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  },
  <span class="hljs-attr">getLabelOf</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName</span>) </span>{
    <span class="hljs-keyword">var</span> fieldid = <span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">'.'</span> + fieldName;
    <span class="hljs-keyword">var</span> widgetLabel = <span class="hljs-keyword">this</span>.getLabel(fieldid);
    <span class="hljs-keyword">var</span> labelContent = <span class="hljs-string">""</span>;
    <span class="hljs-keyword">if</span> (widgetLabel) {
      labelContent = $j(widgetLabel).find(<span class="hljs-string">'.label-text'</span>).text() ||
        widgetLabel.innerText ||
        widgetLabel.textContent;
      <span class="hljs-keyword">if</span> (labelContent.indexOf(<span class="hljs-string">'*'</span>) == <span class="hljs-number">0</span> &amp;&amp;
        <span class="hljs-built_in">document</span>.documentElement.getAttribute(<span class="hljs-string">'data-doctype'</span>) == <span class="hljs-string">'true'</span>)
        labelContent = labelContent.toString().substring(<span class="hljs-number">1</span>);
      <span class="hljs-keyword">if</span> ((labelContent.lastIndexOf(<span class="hljs-string">":"</span>) + <span class="hljs-number">1</span>) == labelContent.length)
        labelContent = labelContent.toString().substring(<span class="hljs-number">0</span>, (labelContent.length - <span class="hljs-number">1</span>));
    }
    <span class="hljs-keyword">if</span> (labelContent == <span class="hljs-literal">null</span> || labelContent == <span class="hljs-string">''</span>)
      labelContent = <span class="hljs-keyword">this</span>._tryLabelRow(fieldName);
    <span class="hljs-keyword">if</span> (labelContent == <span class="hljs-literal">null</span> || labelContent == <span class="hljs-string">''</span>) {
      <span class="hljs-keyword">var</span> handler = <span class="hljs-keyword">this</span>.getPrefixHandler(<span class="hljs-keyword">this</span>.resolvePrettyNameMap(fieldName));
      <span class="hljs-keyword">if</span> (handler)
        labelContent = handler.getObject().getLabelOf(fieldName);
      <span class="hljs-keyword">else</span>
        labelContent = fieldName;
    }
    <span class="hljs-keyword">return</span> labelContent.trim();
  },
  <span class="hljs-attr">setLabelOf</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName, value</span>) </span>{
    <span class="hljs-keyword">var</span> control = g_form.getControl(fieldName);
    <span class="hljs-keyword">var</span> setLabelOfSomething = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.elementHandlers[control.id] &amp;&amp; (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.elementHandlers[control.id].setLabelOf == <span class="hljs-string">"function"</span>))
      setLabelOfSomething = <span class="hljs-keyword">this</span>.elementHandlers[control.id].setLabelOf(value);
    <span class="hljs-keyword">var</span> labelEl = <span class="hljs-keyword">this</span>._getLabelEl(fieldName);
    <span class="hljs-keyword">if</span> (labelEl) {
      $j(labelEl).find(<span class="hljs-string">'.label-text'</span>).text(value);
      setLabelOfSomething = <span class="hljs-literal">true</span>;
    }
    <span class="hljs-keyword">return</span> setLabelOfSomething;
  },
  <span class="hljs-attr">_getLabelEl</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName</span>) </span>{
    <span class="hljs-keyword">var</span> fieldID = <span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">'.'</span> + fieldName;
    <span class="hljs-keyword">var</span> labelEl = <span class="hljs-keyword">this</span>.getLabel(fieldID);
    <span class="hljs-keyword">if</span> (labelEl)
      <span class="hljs-keyword">return</span> labelEl;
    labelEl = <span class="hljs-keyword">this</span>._tryLabelRowElement(fieldName);
    <span class="hljs-keyword">if</span> (labelEl)
      <span class="hljs-keyword">return</span> labelEl;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  },
  <span class="hljs-attr">_getDecorationsEl</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">field</span>) </span>{
    <span class="hljs-keyword">var</span> label = (field <span class="hljs-keyword">instanceof</span> jQuery) ? field : $j(<span class="hljs-keyword">this</span>._getLabelEl(field));
    <span class="hljs-keyword">if</span> (!label.length)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">var</span> decorations = label.find(<span class="hljs-string">'.field_decorations'</span>);
    <span class="hljs-keyword">if</span> (!decorations.length) {
      $j(<span class="hljs-string">'&lt;span class="field_decorations" data-label-decorations="[]" /&gt;'</span>).prependTo(label);
      decorations = label.find(<span class="hljs-string">'.field_decorations'</span>);
    }
    <span class="hljs-keyword">return</span> decorations;
  },
  <span class="hljs-attr">_getDecorations</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName</span>) </span>{
    <span class="hljs-keyword">var</span> attrName = <span class="hljs-string">'data-label-decorations'</span>;
    <span class="hljs-keyword">var</span> decorations = <span class="hljs-keyword">this</span>._getDecorationsEl(fieldName);
    <span class="hljs-keyword">if</span> (decorations &amp;&amp; decorations.length) {
      <span class="hljs-keyword">var</span> raw = decorations.attr(attrName);
      <span class="hljs-keyword">var</span> json = <span class="hljs-built_in">JSON</span>.parse(raw);
      <span class="hljs-keyword">if</span> (json)
        <span class="hljs-keyword">return</span> json;
    }
    <span class="hljs-keyword">return</span> [];
  },
  <span class="hljs-attr">_setDecorations</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName, decorations</span>) </span>{
    <span class="hljs-keyword">var</span> isArr = <span class="hljs-built_in">Array</span>.isArray || <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">obj</span>) </span>{
      <span class="hljs-keyword">return</span> $j.type(obj) === <span class="hljs-string">"array"</span>;
    };
    <span class="hljs-keyword">if</span> (!isArr(decorations))
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">var</span> attrName = <span class="hljs-string">'data-label-decorations'</span>;
    <span class="hljs-keyword">var</span> labelEl = <span class="hljs-keyword">this</span>._getLabelEl(fieldName);
    <span class="hljs-keyword">if</span> (labelEl) {
      <span class="hljs-keyword">var</span> raw = <span class="hljs-built_in">JSON</span>.stringify(decorations);
      <span class="hljs-keyword">var</span> decorEl = <span class="hljs-keyword">this</span>._getDecorationsEl($j(labelEl));
      decorEl.empty();
      decorEl.attr(attrName, raw);
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; decorations.length; i++) {
        <span class="hljs-keyword">var</span> dec = decorations[i];
        <span class="hljs-keyword">var</span> $dec = $j(<span class="hljs-string">'&lt;span class="field_decoration '</span> + dec.icon + <span class="hljs-string">' '</span> + dec.color + <span class="hljs-string">'" '</span> +
          <span class="hljs-string">'title="'</span> + dec.text + <span class="hljs-string">'" '</span> +
          <span class="hljs-string">'data-placement="right" data-container=".touch_scroll"&gt;&lt;/span&gt;'</span>)
        decorEl.append($dec);
        $dec.tooltip().hideFix();
      }
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  },
  <span class="hljs-attr">addDecoration</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">field, icon, text, color</span>) </span>{
    text = text || <span class="hljs-string">''</span>;
    color = color || <span class="hljs-string">''</span>;
    <span class="hljs-keyword">var</span> decorations = <span class="hljs-keyword">this</span>._getDecorations(field);
    <span class="hljs-keyword">var</span> deco = {
      <span class="hljs-attr">icon</span>: icon,
      <span class="hljs-attr">text</span>: text,
      <span class="hljs-attr">color</span>: color
    };
    <span class="hljs-keyword">var</span> isDuplicate = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">var</span> maxi = decorations.length;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; maxi; i++) {
      <span class="hljs-keyword">var</span> dec = decorations[i];
      <span class="hljs-keyword">if</span> (dec.icon == icon &amp;&amp;
        dec.text == text &amp;&amp;
        dec.color == color) {
        isDuplicate = <span class="hljs-literal">true</span>;
      }
    }
    <span class="hljs-keyword">if</span> (!isDuplicate)
      decorations.push(deco);
    <span class="hljs-keyword">this</span>._setDecorations(field, decorations);
  },
  <span class="hljs-attr">removeDecoration</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">field, icon, text, color</span>) </span>{
    text = text || <span class="hljs-string">''</span>;
    color = color || <span class="hljs-string">''</span>;
    <span class="hljs-keyword">var</span> decorations = <span class="hljs-keyword">this</span>._getDecorations(field);
    <span class="hljs-keyword">var</span> out = [];
    <span class="hljs-keyword">var</span> maxi = decorations.length;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; maxi; i++) {
      <span class="hljs-keyword">var</span> dec = decorations[i];
      <span class="hljs-keyword">if</span> (!(dec.icon == icon &amp;&amp;
          dec.text == text &amp;&amp;
          dec.color == color)) {
        out.push(dec);
      }
    }
    <span class="hljs-keyword">this</span>._setDecorations(field, out);
  },
  <span class="hljs-attr">removeAllDecorations</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    $j(<span class="hljs-string">'.field_decorations'</span>).remove();
  },
  <span class="hljs-attr">getSectionNames</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> g_tabs2Sections.tabNames;
  },
  <span class="hljs-attr">setSectionDisplay</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name, display</span>) </span>{
    <span class="hljs-keyword">var</span> index = g_tabs2Sections.findTabIndexByName(name);
    <span class="hljs-keyword">if</span> (index === <span class="hljs-number">-1</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">if</span> (display)
      g_tabs2Sections.showTab(index);
    <span class="hljs-keyword">else</span>
      g_tabs2Sections.hideTab(index);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  },
  <span class="hljs-attr">isSectionVisible</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name</span>) </span>{
    <span class="hljs-keyword">var</span> index = g_tabs2Sections.findTabIndexByName(name);
    <span class="hljs-keyword">if</span> (index !== <span class="hljs-number">-1</span>)
      <span class="hljs-keyword">return</span> g_tabs2Sections.isVisible(index);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  },
  <span class="hljs-attr">activateTab</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name</span>) </span>{
    <span class="hljs-keyword">var</span> index = g_tabs2Sections.findTabIndexByName(name);
    <span class="hljs-keyword">if</span> (index !== <span class="hljs-number">-1</span>)
      <span class="hljs-keyword">return</span> g_tabs2Sections.setActive(index);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  },
  <span class="hljs-attr">getTabNameForField</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName</span>) </span>{
    <span class="hljs-keyword">if</span> (!g_form.hasField(fieldName))
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">var</span> control = g_form.getControl(fieldName);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._getTabNameForElement(control);
  },
  <span class="hljs-attr">_getTabNameForElement</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>) </span>{
    <span class="hljs-keyword">var</span> sectionId = $j(element).closest(<span class="hljs-string">'[data-section-id]'</span>).attr(<span class="hljs-string">'id'</span>);
    <span class="hljs-keyword">if</span> (sectionId) {
      <span class="hljs-keyword">var</span> tabIndex = g_tabs2Sections.findTabIndexByID(sectionId);
      <span class="hljs-keyword">return</span> g_tabs2Sections.tabNames[tabIndex];
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  },
  <span class="hljs-attr">validate</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> fa = <span class="hljs-keyword">this</span>.elements;
    <span class="hljs-keyword">var</span> rc = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">var</span> labels = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; fa.length; i++) {
      <span class="hljs-keyword">var</span> ed = fa[i];
      <span class="hljs-keyword">var</span> widgetName = <span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">'.'</span> + ed.fieldName;
      <span class="hljs-keyword">var</span> widget = <span class="hljs-keyword">this</span>.getControl(ed.fieldName);
      <span class="hljs-keyword">if</span> (!widget)
        <span class="hljs-keyword">continue</span>;
      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.isEditableField(ed, widget))
        <span class="hljs-keyword">continue</span>;
      <span class="hljs-keyword">if</span> (widget.getAttribute(<span class="hljs-string">"validate"</span>) == <span class="hljs-string">"false"</span>)
        <span class="hljs-keyword">continue</span>;
      <span class="hljs-keyword">var</span> widgetValue = widget.value;
      <span class="hljs-keyword">var</span> widgetType = ed.type;
      <span class="hljs-keyword">var</span> specialType = widget.getAttribute(<span class="hljs-string">"specialtype"</span>);
      <span class="hljs-keyword">if</span> (specialType)
        widgetType = specialType;
      <span class="hljs-keyword">var</span> validator = <span class="hljs-keyword">this</span>.validators[widgetType];
      <span class="hljs-keyword">if</span> (!validator)
        <span class="hljs-keyword">continue</span>;
      <span class="hljs-keyword">this</span>.hideFieldMsg(widget);
      <span class="hljs-keyword">var</span> isValid = validator.call(<span class="hljs-keyword">this</span>, widgetValue);
      <span class="hljs-keyword">if</span> (isValid != <span class="hljs-literal">null</span> &amp;&amp; isValid != <span class="hljs-literal">true</span>) {
        <span class="hljs-keyword">var</span> widgetLabel = <span class="hljs-keyword">this</span>.getLabelOf(ed.fieldName);
        labels.push(widgetName);
        rc = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">if</span> (isValid == <span class="hljs-literal">false</span> || isValid == <span class="hljs-string">"false"</span>)
          isValid = getMessage(<span class="hljs-string">"Invalid text"</span>);
        <span class="hljs-keyword">this</span>.showFieldMsg(widget, isValid, <span class="hljs-string">'error'</span>);
      }
    }
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; labels.length; i++)
      <span class="hljs-keyword">this</span>.flash(labels[i], <span class="hljs-string">"#FFFACD"</span>, <span class="hljs-number">0</span>);
    <span class="hljs-keyword">return</span> rc;
  },
  <span class="hljs-attr">removeCurrentPrefix</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">id</span>) </span>{
    <span class="hljs-keyword">if</span> (id) {
      <span class="hljs-keyword">if</span> (id.indexOf(<span class="hljs-string">'current.'</span>) == <span class="hljs-number">0</span>) {
        id = id.substring(<span class="hljs-number">8</span>);
      }
      <span class="hljs-keyword">return</span> id;
    }
  },
  <span class="hljs-attr">isNumeric</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">internaltype</span>) </span>{
    <span class="hljs-keyword">if</span> (internaltype == <span class="hljs-string">'decimal'</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">if</span> (internaltype == <span class="hljs-string">'float'</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">if</span> (internaltype == <span class="hljs-string">'integer'</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">if</span> (internaltype == <span class="hljs-string">'numeric'</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  },
  <span class="hljs-attr">isInteger</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">internaltype</span>) </span>{
    <span class="hljs-keyword">if</span> (internaltype == <span class="hljs-string">'integer'</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  },
  <span class="hljs-attr">setTemplateValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName, value, displayValue</span>) </span>{
    fieldName = <span class="hljs-keyword">this</span>.removeCurrentPrefix(fieldName);
    <span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>.getControl(fieldName);
    <span class="hljs-keyword">if</span> (control)
      control.templateValue = <span class="hljs-string">'true'</span>;
    <span class="hljs-keyword">var</span> text = <span class="hljs-string">"Field modified by template"</span>;
    <span class="hljs-keyword">this</span>.setValue(fieldName, value, displayValue);
    <span class="hljs-keyword">this</span>.addDecoration(fieldName, <span class="hljs-string">'icon-success'</span>, text);
  },
  <span class="hljs-attr">setValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName, value, displayValue</span>) </span>{
    <span class="hljs-keyword">var</span> oldValue = <span class="hljs-keyword">this</span>.getValue(fieldName);
    fieldName = <span class="hljs-keyword">this</span>.removeCurrentPrefix(fieldName);
    <span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>.getControl(fieldName);
    <span class="hljs-keyword">if</span> (!control) {
      <span class="hljs-keyword">var</span> handler = <span class="hljs-keyword">this</span>.getPrefixHandler(fieldName);
      <span class="hljs-keyword">if</span> (handler)
        handler.getObject().setValue(handler.getFieldName(),
          value, displayValue);
      <span class="hljs-keyword">return</span>;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">if</span> (control.options &amp;&amp; control.options.length) {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; control.options.length; i++) {
          control.options[i].removeAttribute(<span class="hljs-string">'selected'</span>);
        }
      }
    }
    <span class="hljs-keyword">this</span>._internalChange = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">this</span>._setValue(fieldName, value, displayValue, <span class="hljs-literal">true</span>);
    <span class="hljs-keyword">this</span>._internalChange = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">this</span>._opticsInspectorLog(fieldName, oldValue);
  },
  <span class="hljs-attr">getNiBox</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName</span>) </span>{
    <span class="hljs-keyword">var</span> niName = <span class="hljs-string">'ni.'</span> + <span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">'.'</span> + fieldName;
    <span class="hljs-keyword">return</span> gel(niName);
  },
  <span class="hljs-attr">getDisplayBox</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName</span>) </span>{
    <span class="hljs-keyword">var</span> dName = <span class="hljs-string">'sys_display.'</span> + <span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">'.'</span> + fieldName;
    <span class="hljs-keyword">var</span> field = gel(dName);
    <span class="hljs-keyword">if</span> (field)
      <span class="hljs-keyword">return</span> field;
    dName = <span class="hljs-string">'sys_display.'</span> + fieldName;
    field = gel(dName);
    <span class="hljs-keyword">if</span> (field)
      <span class="hljs-keyword">return</span> field;
    <span class="hljs-keyword">var</span> handler = <span class="hljs-keyword">this</span>.getPrefixHandler(fieldName);
    <span class="hljs-keyword">if</span> (handler) {
      <span class="hljs-keyword">var</span> handlerObject = handler.getObject();
      <span class="hljs-keyword">return</span> handlerObject.getDisplayBox(handlerObject.removeCurrentPrefix(fieldName));
    }
    <span class="hljs-keyword">return</span>;
  },
  <span class="hljs-attr">clearValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName</span>) </span>{
    fieldName = <span class="hljs-keyword">this</span>.removeCurrentPrefix(fieldName);
    <span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>.getControl(fieldName);
    <span class="hljs-keyword">if</span> (!control)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">if</span> (!control.options) {
      <span class="hljs-keyword">this</span>._setValue(fieldName, <span class="hljs-string">''</span>);
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">var</span> selindex = control.selectedIndex;
    <span class="hljs-keyword">if</span> (selindex != <span class="hljs-number">-1</span>) {
      <span class="hljs-keyword">var</span> option = control.options[selindex];
      option.selected = <span class="hljs-literal">false</span>;
    }
    <span class="hljs-keyword">var</span> options = control.options;
    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; options.length; i++) {
      <span class="hljs-keyword">var</span> option = options[i];
      <span class="hljs-keyword">var</span> optval = option.value;
      <span class="hljs-keyword">if</span> (optval == <span class="hljs-string">''</span>) {
        option.selected = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">break</span>;
      }
    }
  },
  <span class="hljs-attr">_sanitizeFieldName</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName</span>) </span>{
    <span class="hljs-keyword">if</span> (fieldName) {
      fieldName = <span class="hljs-keyword">this</span>.removeCurrentPrefix(fieldName);
      fieldName = <span class="hljs-keyword">this</span>._removeTableName(fieldName);
    }
    <span class="hljs-keyword">return</span> fieldName;
  },
  <span class="hljs-attr">_removeTableName</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName</span>) </span>{
    <span class="hljs-keyword">if</span> (fieldName.indexOf(<span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">"."</span>) === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">var</span> length = <span class="hljs-keyword">this</span>.tableName.length + <span class="hljs-number">1</span>;
      fieldName = fieldName.substring(length);
    }
    <span class="hljs-keyword">return</span> fieldName;
  },
  <span class="hljs-attr">_setValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName, value, displayValue, updateRelated</span>) </span>{
    fieldName = <span class="hljs-keyword">this</span>._sanitizeFieldName(fieldName);
    <span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>.getControl(fieldName);
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> control === <span class="hljs-string">'undefined'</span>)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">var</span> readOnlyField = gel(<span class="hljs-string">'sys_readonly.'</span> + control.id);
    <span class="hljs-keyword">if</span> (readOnlyField) {
      <span class="hljs-keyword">if</span> (readOnlyField.tagName == <span class="hljs-string">"SPAN"</span>) {
        <span class="hljs-keyword">var</span> fieldType = readOnlyField.getAttribute(<span class="hljs-string">'gsft_fieldtype'</span>);
        <span class="hljs-keyword">if</span> (fieldType &amp;&amp; fieldType.indexOf(<span class="hljs-string">"html"</span>) &gt; <span class="hljs-number">-1</span>)
          readOnlyField.innerHTML = value;
        <span class="hljs-keyword">else</span>
          readOnlyField.innerHTML = htmlEscape(value);
      } <span class="hljs-keyword">else</span>
      <span class="hljs-keyword">if</span> (displayValue &amp;&amp; readOnlyField.tagName != <span class="hljs-string">"SELECT"</span>)
        readOnlyField.value = displayValue;
      <span class="hljs-keyword">else</span> {
        readOnlyField.value = value;
        control.value = value;
        onChange(<span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">"."</span> + fieldName);
        <span class="hljs-keyword">if</span> (readOnlyField.tagName == <span class="hljs-string">"SELECT"</span>)
          $j(readOnlyField).trigger(<span class="hljs-string">'change'</span>);
      }
    } <span class="hljs-keyword">else</span> {
      readOnlyField = gel(control.id + <span class="hljs-string">"_label"</span>);
      <span class="hljs-keyword">if</span> (readOnlyField) {
        displayValue = <span class="hljs-keyword">this</span>._ensureDisplayValue(fieldName, value, displayValue);
        <span class="hljs-keyword">if</span> (readOnlyField.tagName == <span class="hljs-string">'SPAN'</span>)
          readOnlyField.innerHTML = displayValue;
        <span class="hljs-keyword">else</span>
          readOnlyField.value = displayValue;
      }
    }
    <span class="hljs-keyword">if</span> (control &amp;&amp; control.id &amp;&amp; <span class="hljs-keyword">this</span>.elementHandlers[control.id] &amp;&amp; (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.elementHandlers[control.id].setValue == <span class="hljs-string">"function"</span>)) {
      <span class="hljs-keyword">this</span>.elementHandlers[control.id].setValue(value, displayValue);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">'select2'</span> <span class="hljs-keyword">in</span> $j(control).data()) {
      $j(control).select2(<span class="hljs-string">'val'</span>, value);
      onChange(<span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">"."</span> + fieldName);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (control.options) {
      <span class="hljs-keyword">var</span> i = <span class="hljs-keyword">this</span>._getSelectedIndex(control, value, displayValue);
      control.selectedIndex = i;
      onChange(<span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">"."</span> + fieldName);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (control.type == <span class="hljs-string">'hidden'</span>) {
      <span class="hljs-keyword">var</span> nibox = <span class="hljs-keyword">this</span>.getNiBox(fieldName);
      <span class="hljs-keyword">if</span> (nibox &amp;&amp; nibox.type == <span class="hljs-string">'checkbox'</span>) {
        <span class="hljs-keyword">if</span> (value &amp;&amp; value == <span class="hljs-string">'0'</span>)
          value = <span class="hljs-string">'false'</span>;
        <span class="hljs-keyword">if</span> (value &amp;&amp; value == <span class="hljs-string">'1'</span>)
          value = <span class="hljs-string">'true'</span>;
        control.value = value;
        onChange(<span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">"."</span> + fieldName);
        <span class="hljs-keyword">if</span> (value &amp;&amp; value == <span class="hljs-string">'false'</span>)
          nibox.checked = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value || value == <span class="hljs-string">'true'</span>)
          nibox.checked = <span class="hljs-string">'true'</span>;
        <span class="hljs-keyword">else</span>
          nibox.checked = <span class="hljs-literal">null</span>;
        setCheckBox(nibox);
        <span class="hljs-keyword">return</span>;
      }
      <span class="hljs-keyword">var</span> displaybox = <span class="hljs-keyword">this</span>.getDisplayBox(fieldName);
      <span class="hljs-keyword">if</span> (displaybox) {
        <span class="hljs-keyword">var</span> sel = gel(<span class="hljs-string">"sys_select."</span> + <span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">"."</span> + fieldName);
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span>(displayValue) == <span class="hljs-string">'undefined'</span> &amp;&amp; value)
          displayValue = <span class="hljs-keyword">this</span>._ensureDisplayValue(fieldName, value, displayValue);
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span>(displayValue) != <span class="hljs-string">'undefined'</span>) {
          control.value = value;
          displaybox.value = displayValue;
          onChange(<span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">"."</span> + fieldName);
          removeClassName(displaybox, <span class="hljs-string">'ref_invalid'</span>);
          removeClassName(displaybox, <span class="hljs-string">'ref_dynamic'</span>);
          displaybox.title = <span class="hljs-string">""</span>;
          <span class="hljs-keyword">this</span>._setReferenceSelect(control, sel, value, displayValue);
          refFlipImage(displaybox, control.id);
          <span class="hljs-keyword">if</span> (updateRelated) {
            updateRelatedGivenNameAndValue(<span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">'.'</span> + fieldName, value);
          }
          <span class="hljs-keyword">return</span>;
        }
        control.value = value;
        onChange(<span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">"."</span> + fieldName);
        <span class="hljs-keyword">if</span> (value == <span class="hljs-literal">null</span> || value == <span class="hljs-string">''</span>) {
          displaybox.value = <span class="hljs-string">''</span>;
          <span class="hljs-keyword">this</span>._setReferenceSelect(control, sel, value, <span class="hljs-string">''</span>);
          refFlipImage(displaybox, control.id);
          <span class="hljs-keyword">return</span>;
        }
        displaybox.value = displayValue;
        <span class="hljs-keyword">this</span>._setReferenceSelect(control, sel, value, displayValue);
        refFlipImage(displaybox, control.id);
        updateRelatedGivenNameAndValue(<span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">'.'</span> + fieldName, value);
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ($(control).hasClassName(<span class="hljs-string">'glide_destroy_filter'</span>) || $(control).hasClassName(<span class="hljs-string">'glideform-set-value'</span>)) {
        $j(control).val(value);
        onChange(<span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">"."</span> + fieldName);
      }
    } <span class="hljs-keyword">else</span> {
      control.value = value;
      onChange(<span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">"."</span> + fieldName);
    }
  },
  <span class="hljs-attr">_setReferenceSelect</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">control, sel, value, displayValue</span>) </span>{
    <span class="hljs-keyword">if</span> (control &amp;&amp; !control.options &amp;&amp; sel) {
      <span class="hljs-keyword">var</span> i = <span class="hljs-keyword">this</span>._getSelectedIndex(sel, value, displayValue);
      sel.selectedIndex = i;
    }
  },
  <span class="hljs-attr">_getSelectedIndex</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">control, value, displayValue</span>) </span>{
    <span class="hljs-keyword">var</span> options = control.options;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; options.length; i++) {
      <span class="hljs-keyword">var</span> option = options[i];
      <span class="hljs-keyword">if</span> (option.value == value) {
        <span class="hljs-keyword">return</span> i;
      }
    }
    <span class="hljs-keyword">var</span> dv = value;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span>(displayValue) != <span class="hljs-string">'undefined'</span>)
      dv = displayValue;
    <span class="hljs-keyword">var</span> newOption = <span class="hljs-keyword">new</span> Option(dv, value);
    control.options[control.options.length] = newOption;
    <span class="hljs-keyword">return</span> control.options.length - <span class="hljs-number">1</span>;
  },
  <span class="hljs-attr">_ensureDisplayValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName, value, displayValue</span>) </span>{
    <span class="hljs-keyword">if</span> (displayValue)
      <span class="hljs-keyword">return</span> displayValue;
    <span class="hljs-keyword">var</span> ed = <span class="hljs-keyword">this</span>.getGlideUIElement(fieldName);
    <span class="hljs-keyword">if</span> (!ed)
      <span class="hljs-keyword">return</span> displayValue;
    <span class="hljs-keyword">if</span> (ed.type != <span class="hljs-string">'reference'</span> &amp;&amp; ed.type != <span class="hljs-string">'domain_id'</span>)
      <span class="hljs-keyword">return</span> displayValue;
    <span class="hljs-keyword">var</span> ga = <span class="hljs-keyword">new</span> GlideAjax(<span class="hljs-string">'AjaxClientHelper'</span>);
    ga.addParam(<span class="hljs-string">'sysparm_name'</span>, <span class="hljs-string">'getDisplay'</span>);
    ga.addParam(<span class="hljs-string">'sysparm_table'</span>, ed.reference);
    ga.addParam(<span class="hljs-string">'sysparm_value'</span>, value);
    ga.getXMLWait();
    <span class="hljs-keyword">return</span> ga.getAnswer();
  },
  <span class="hljs-attr">getUniqueValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getValue(<span class="hljs-string">'sys_uniqueValue'</span>);
  },
  <span class="hljs-attr">getTitle</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getValue(<span class="hljs-string">'sys_titleValue'</span>);
  },
  <span class="hljs-attr">getValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName</span>) </span>{
    fieldName = <span class="hljs-keyword">this</span>.removeCurrentPrefix(fieldName);
    <span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>.getControl(fieldName);
    <span class="hljs-keyword">if</span> (!control) {
      <span class="hljs-keyword">var</span> handler = <span class="hljs-keyword">this</span>.getPrefixHandler(fieldName);
      <span class="hljs-keyword">if</span> (handler)
        <span class="hljs-keyword">return</span> handler.getObject().getValue(
          handler.getFieldName());
      <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._getValueFromControl(control);
  },
  <span class="hljs-attr">getDisplayValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getValue(<span class="hljs-string">'sys_displayValue'</span>);
  },
  <span class="hljs-attr">_getValueFromControl</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">control</span>) </span>{
    <span class="hljs-keyword">var</span> value;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.elementHandlers[control.id] &amp;&amp; (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.elementHandlers[control.id].getValue == <span class="hljs-string">"function"</span>)) {
      value = <span class="hljs-keyword">this</span>.elementHandlers[control.id].getValue();
    } <span class="hljs-keyword">else</span> {
      value = control.value;
    }
    <span class="hljs-keyword">return</span> (<span class="hljs-keyword">typeof</span> value !== <span class="hljs-string">'undefined'</span>) ? value.toString() : <span class="hljs-string">''</span>;
  },
  <span class="hljs-attr">getIntValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName</span>) </span>{
    <span class="hljs-keyword">var</span> val = <span class="hljs-keyword">this</span>.getValue(fieldName);
    <span class="hljs-keyword">if</span> (!val || val.length == <span class="hljs-number">0</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">parseInt</span>(formatClean(val));
  },
  <span class="hljs-attr">getDecimalValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName</span>) </span>{
    <span class="hljs-keyword">var</span> val = <span class="hljs-keyword">this</span>.getValue(fieldName);
    <span class="hljs-keyword">if</span> (!val || val.length == <span class="hljs-number">0</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">var</span> fc = formatClean(val);
    fc = fc.replace(<span class="hljs-regexp">/,/g</span>, <span class="hljs-string">'.'</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">parseFloat</span>(fc);
  },
  <span class="hljs-attr">getBooleanValue</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName</span>) </span>{
    <span class="hljs-keyword">var</span> val = <span class="hljs-keyword">this</span>.getValue(fieldName);
    val = val ? val + <span class="hljs-string">''</span> : val;
    <span class="hljs-keyword">if</span> (!val || val.length == <span class="hljs-number">0</span> || val == <span class="hljs-string">"false"</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  },
  <span class="hljs-attr">addOption</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName, choiceValue, choiceLabel, choiceIndex</span>) </span>{
    fieldName = <span class="hljs-keyword">this</span>.removeCurrentPrefix(fieldName);
    <span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>.getControl(fieldName);
    <span class="hljs-keyword">if</span> (!control) {
      <span class="hljs-keyword">var</span> handler = <span class="hljs-keyword">this</span>.getPrefixHandler(fieldName);
      <span class="hljs-keyword">if</span> (handler)
        handler.getObject().addOption(handler.getFieldName(), choiceValue, choiceLabel, choiceIndex);
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">if</span> (!control.options)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">var</span> len = control.options.length;
    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; len; i++) {
      <span class="hljs-keyword">if</span> (control.options[i].text == choiceLabel) {
        <span class="hljs-keyword">return</span>;
      }
    }
    <span class="hljs-keyword">if</span> (choiceIndex == <span class="hljs-literal">undefined</span>)
      choiceIndex = len;
    <span class="hljs-keyword">if</span> (choiceIndex &lt; <span class="hljs-number">0</span> || choiceIndex &gt; len)
      choiceIndex = len;
    <span class="hljs-keyword">var</span> newOption = <span class="hljs-keyword">new</span> Option(choiceLabel, choiceValue);
    <span class="hljs-keyword">var</span> value = choiceValue;
    <span class="hljs-keyword">if</span> (len &gt; <span class="hljs-number">0</span>) {
      value = <span class="hljs-keyword">this</span>.getValue(fieldName);
      control.options[len] = <span class="hljs-keyword">new</span> Option(<span class="hljs-string">''</span>, <span class="hljs-string">''</span>);
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = len; i &gt; choiceIndex; i--) {
        control.options[i].text = control.options[i - <span class="hljs-number">1</span>].text;
        control.options[i].value = control.options[i - <span class="hljs-number">1</span>].value;
      }
    }
    control.options[choiceIndex] = newOption;
    <span class="hljs-keyword">this</span>.setValue(fieldName, value);
  },
  <span class="hljs-attr">enableOption</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">control, choiceValue, choiceLabel</span>) </span>{
    <span class="hljs-keyword">var</span> len = control.options.length;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = len - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
      <span class="hljs-keyword">if</span> (control.options[i].text == choiceLabel &amp;&amp; control.options[i].value == choiceValue) {
        control.options[i].disabled = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  },
  <span class="hljs-attr">clearOptions</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName</span>) </span>{
    fieldName = <span class="hljs-keyword">this</span>.removeCurrentPrefix(fieldName);
    <span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>.getControl(fieldName);
    <span class="hljs-keyword">if</span> (control &amp;&amp; !control.options) {
      <span class="hljs-keyword">var</span> name = <span class="hljs-string">"sys_select."</span> + <span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">"."</span> + fieldName;
      control = gel(name);
    }
    <span class="hljs-keyword">if</span> (!control) {
      <span class="hljs-keyword">var</span> handler = <span class="hljs-keyword">this</span>.getPrefixHandler(fieldName);
      <span class="hljs-keyword">if</span> (handler)
        handler.getObject().clearOptions(handler.getFieldName());
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">if</span> (!control.options)
      <span class="hljs-keyword">return</span>;
    control.innerHTML = <span class="hljs-string">''</span>;
  },
  <span class="hljs-attr">getOptionControl</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName, choiceValue</span>) </span>{
    <span class="hljs-keyword">var</span> noPrefix = <span class="hljs-keyword">this</span>.removeCurrentPrefix(fieldName);
    <span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>.getControl(noPrefix);
    <span class="hljs-keyword">if</span> (control &amp;&amp; !control.options) {
      <span class="hljs-keyword">var</span> name = <span class="hljs-string">"sys_select."</span> + <span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">"."</span> + noPrefix;
      control = gel(name);
    }
    <span class="hljs-keyword">return</span> control;
  },
  <span class="hljs-attr">removeOption</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName, choiceValue</span>) </span>{
    <span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>.getOptionControl(fieldName, choiceValue);
    <span class="hljs-keyword">if</span> (!control)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">if</span> (!control.options)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">var</span> options = control.options;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; options.length; i++) {
      <span class="hljs-keyword">var</span> option = options[i];
      <span class="hljs-keyword">if</span> (option.value == choiceValue) {
        control.options[i] = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">break</span>;
      }
    }
  },
  <span class="hljs-attr">getOption</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName, choiceValue</span>) </span>{
    <span class="hljs-keyword">var</span> control = <span class="hljs-keyword">this</span>.getOptionControl(fieldName, choiceValue);
    <span class="hljs-keyword">if</span> (!control)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">if</span> (!control.options)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">var</span> options = control.options;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; options.length; i++) {
      <span class="hljs-keyword">var</span> option = options[i];
      <span class="hljs-keyword">if</span> (option.value == choiceValue)
        <span class="hljs-keyword">return</span> option;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  },
  <span class="hljs-attr">removeContextItem</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">itemID</span>) </span>{
    <span class="hljs-keyword">for</span> (av <span class="hljs-keyword">in</span> contextMenus) {
      <span class="hljs-keyword">if</span> (contextMenus[av]) {
        <span class="hljs-keyword">var</span> menu = contextMenus[av];
        <span class="hljs-keyword">var</span> c = menu.context;
        <span class="hljs-keyword">if</span> (c)
          <span class="hljs-keyword">this</span>.removeItem(menu, itemID);
      }
    }
  },
  <span class="hljs-attr">removeItem</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">menu, itemID</span>) </span>{
    <span class="hljs-keyword">var</span> items = menu.childNodes;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; items.length; i++) {
      <span class="hljs-keyword">var</span> item = items[i];
      <span class="hljs-keyword">if</span> (item.innerHTML == itemID) {
        menu.removeChild(item);
        clearNodes(item);
        <span class="hljs-keyword">break</span>;
      }
    }
    <span class="hljs-keyword">return</span>;
  },
  <span class="hljs-attr">getGlideUIElement</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName</span>) </span>{
    fieldName = <span class="hljs-keyword">this</span>.removeCurrentPrefix(fieldName);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>.elements.length; i++) {
      <span class="hljs-keyword">var</span> thisElement = <span class="hljs-keyword">this</span>.elements[i];
      <span class="hljs-keyword">if</span> (thisElement.fieldName == fieldName)
        <span class="hljs-keyword">return</span> thisElement;
    }
  },
  <span class="hljs-attr">getDerivedFields</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName</span>) </span>{
    <span class="hljs-keyword">var</span> parts = fieldName.split(<span class="hljs-string">"."</span>);
    parts.shift();
    fieldName = parts.join(<span class="hljs-string">"."</span>) + <span class="hljs-string">"."</span>;
    <span class="hljs-keyword">var</span> list = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>.elements.length; i++) {
      <span class="hljs-keyword">var</span> thisElement = <span class="hljs-keyword">this</span>.elements[i];
      <span class="hljs-keyword">if</span> (thisElement.fieldName.indexOf(fieldName) == <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">var</span> target = thisElement.fieldName.substring(fieldName.length);
        list.push(target);
      }
    }
    <span class="hljs-keyword">if</span> (list.length == <span class="hljs-number">0</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">return</span> list;
  },
  <span class="hljs-attr">_addDerivedWaiting</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName</span>) </span>{
    <span class="hljs-keyword">this</span>.derivedWaiting.push(fieldName);
  },
  <span class="hljs-attr">_isDerivedWaiting</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName</span>) </span>{
    <span class="hljs-keyword">var</span> tablePrefix = <span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">"."</span>;
    <span class="hljs-keyword">if</span> (fieldName.startsWith(tablePrefix))
      fieldName = fieldName.substring(tablePrefix.length);
    <span class="hljs-keyword">var</span> index = <span class="hljs-keyword">this</span>.derivedWaiting.indexOf(fieldName);
    <span class="hljs-keyword">return</span> (index != <span class="hljs-number">-1</span>);
  },
  <span class="hljs-attr">_removeDerivedWaiting</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName</span>) </span>{
    <span class="hljs-keyword">var</span> index = <span class="hljs-keyword">this</span>.derivedWaiting.indexOf(fieldName);
    <span class="hljs-keyword">if</span> (index &gt; <span class="hljs-number">-1</span>)
      <span class="hljs-keyword">this</span>.derivedWaiting.splice(index, <span class="hljs-number">1</span>);
  },
  <span class="hljs-attr">getReference</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName, callback</span>) </span>{
    <span class="hljs-keyword">var</span> opticsContext = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>[<span class="hljs-string">'g_optics_inspect_handler'</span>] &amp;&amp; g_optics_inspect_handler.opticsContextStack.length &gt; <span class="hljs-number">0</span>)
      opticsContext = g_optics_inspect_handler.opticsContextStack[g_optics_inspect_handler.opticsContextStack.length - <span class="hljs-number">1</span>];
    fieldName = <span class="hljs-keyword">this</span>.removeCurrentPrefix(fieldName);
    <span class="hljs-keyword">var</span> ed = <span class="hljs-keyword">this</span>.getGlideUIElement(fieldName);
    <span class="hljs-keyword">if</span> (!ed) {
      <span class="hljs-keyword">var</span> handler = <span class="hljs-keyword">this</span>.getPrefixHandler(fieldName);
      <span class="hljs-keyword">if</span> (handler)
        <span class="hljs-keyword">return</span> handler.getObject().getReference(handler.getFieldName(), callback);
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">if</span> (ed.type != <span class="hljs-string">'reference'</span> &amp;&amp; ed.type != <span class="hljs-string">'domain_id'</span>)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">var</span> value = <span class="hljs-keyword">this</span>.getValue(fieldName);
    <span class="hljs-keyword">var</span> gr = <span class="hljs-keyword">new</span> GlideRecord(ed.reference);
    <span class="hljs-keyword">if</span> (value == <span class="hljs-string">""</span>) {
      <span class="hljs-keyword">if</span> (callback)
        callback(gr);
      <span class="hljs-keyword">return</span> gr;
    }
    gr.addQuery(<span class="hljs-string">'sys_id'</span>, value);
    <span class="hljs-keyword">if</span> (callback) {
      <span class="hljs-keyword">var</span> fn = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">gr</span>) </span>{
        gr.next();
        <span class="hljs-keyword">if</span> (opticsContext)
          CustomEvent.fire(<span class="hljs-string">'glide_optics_inspect_put_context'</span>, opticsContext[<span class="hljs-string">"category"</span>], opticsContext[<span class="hljs-string">"name"</span>], opticsContext[<span class="hljs-string">"sys_id"</span>]);
        callback(gr);
        <span class="hljs-keyword">if</span> (opticsContext)
          CustomEvent.fire(<span class="hljs-string">'glide_optics_inspect_pop_context'</span>);
      };
      gr.query(fn);
      <span class="hljs-keyword">return</span>;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">var</span> sw = <span class="hljs-keyword">new</span> StopWatch();
      sw.jslog(<span class="hljs-string">"*** WARNING *** GlideForm: synchronous getReference call on "</span> + <span class="hljs-keyword">this</span>.getTableName());
    }
    gr.query();
    gr.next();
    <span class="hljs-keyword">return</span> gr;
  },
  <span class="hljs-attr">submit</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">actionName</span>) </span>{
    actionName = actionName || <span class="hljs-string">'sysverb_update'</span>;
    <span class="hljs-keyword">var</span> action = gel(actionName);
    <span class="hljs-keyword">if</span> (!action)
      action = <span class="hljs-keyword">this</span>._getLinkActionByAttribute(actionName);
    <span class="hljs-keyword">if</span> (action)
      <span class="hljs-keyword">return</span> gsftSubmit(action);
  },
  <span class="hljs-attr">_getLinkActionByAttribute</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">actionName, attribute</span>) </span>{
    <span class="hljs-keyword">var</span> attr = attribute || <span class="hljs-string">'gsft_action_name'</span>;
    <span class="hljs-keyword">var</span> selector = <span class="hljs-string">'a['</span> + attr + <span class="hljs-string">'="'</span> + actionName + <span class="hljs-string">'"]'</span>;
    <span class="hljs-keyword">var</span> el = $j(selector);
    <span class="hljs-keyword">if</span> (el.length === <span class="hljs-number">0</span>)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">return</span> el[<span class="hljs-number">0</span>];
  },
  <span class="hljs-attr">save</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.submit(<span class="hljs-string">'sysverb_update_and_stay'</span>);
  },
  <span class="hljs-attr">getActionName</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> form = <span class="hljs-keyword">this</span>.getFormElement();
    <span class="hljs-keyword">if</span> (form) {
      <span class="hljs-keyword">var</span> theButton = form.sys_action;
      <span class="hljs-keyword">if</span> (theButton)
        <span class="hljs-keyword">return</span> theButton.value;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.action;
  },
  <span class="hljs-attr">getTableName</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.tableName;
  },
  <span class="hljs-attr">getSections</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> $$(<span class="hljs-string">'form span.tabs2_section span[data-header-only="false"]'</span>);
  },
  <span class="hljs-attr">serialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">filterFunc</span>) </span>{
    <span class="hljs-keyword">var</span> formName = <span class="hljs-keyword">this</span>.tableName + <span class="hljs-string">'.do'</span>;
    <span class="hljs-keyword">if</span> (!filterFunc)
      <span class="hljs-keyword">return</span> Form.serialize(gel(formName)) + <span class="hljs-keyword">this</span>._serializeDisabled();
    <span class="hljs-keyword">var</span> elements = Form.getElements(gel(formName));
    <span class="hljs-keyword">var</span> queryComponents = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; elements.length; i++) {
      <span class="hljs-keyword">if</span> (filterFunc(elements[i])) {
        <span class="hljs-keyword">var</span> queryComponent;
        <span class="hljs-keyword">if</span> (elements[i].disabled)
          queryComponent = elements[i].id + <span class="hljs-string">'='</span> + <span class="hljs-built_in">encodeURIComponent</span>(elements[i].value);
        <span class="hljs-keyword">else</span>
          queryComponent = Form.Element.serialize(elements[i]);
        <span class="hljs-keyword">if</span> (queryComponent)
          queryComponents.push(queryComponent);
      }
    }
    <span class="hljs-keyword">return</span> queryComponents.join(<span class="hljs-string">'&amp;'</span>);
  },
  <span class="hljs-attr">_serializeDisabled</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> n = <span class="hljs-keyword">this</span>.disabledFields.length;
    <span class="hljs-keyword">var</span> dfa = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) {
      <span class="hljs-keyword">var</span> e = <span class="hljs-keyword">this</span>.disabledFields[i];
      <span class="hljs-keyword">if</span> (!e.value || !e.id)
        <span class="hljs-keyword">continue</span>;
      dfa.push(e.id + <span class="hljs-string">'='</span> + <span class="hljs-built_in">encodeURIComponent</span>(e.value));
    }
    <span class="hljs-keyword">if</span> (dfa.length)
      <span class="hljs-keyword">return</span> <span class="hljs-string">'&amp;'</span> + dfa.join(<span class="hljs-string">'&amp;'</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
  },
  <span class="hljs-attr">serializeChanged</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> s = <span class="hljs-keyword">this</span>.serializeTargetFields();
    <span class="hljs-keyword">var</span> f = <span class="hljs-keyword">this</span>.serialize(<span class="hljs-keyword">this</span>.changedFieldsFilter.bind(<span class="hljs-keyword">this</span>));
    <span class="hljs-keyword">if</span> (f)
      f = <span class="hljs-string">"&amp;"</span> + f;
    <span class="hljs-keyword">return</span> s + f;
  },
  <span class="hljs-attr">serializeChangedAll</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> s = <span class="hljs-keyword">this</span>.serializeTargetFields();
    <span class="hljs-keyword">var</span> f = <span class="hljs-keyword">this</span>.serialize(<span class="hljs-keyword">this</span>.allChangedFieldsFilter.bind(<span class="hljs-keyword">this</span>));
    <span class="hljs-keyword">if</span> (f)
      f = <span class="hljs-string">"&amp;"</span> + f;
    <span class="hljs-keyword">return</span> s + f;
  },
  <span class="hljs-attr">serializeTargetFields</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> s = <span class="hljs-keyword">this</span>._serializeElement(<span class="hljs-string">"sys_target"</span>);
    s += <span class="hljs-keyword">this</span>._serializeElement(<span class="hljs-string">"sys_uniqueValue"</span>);
    s += <span class="hljs-keyword">this</span>._serializeElement(<span class="hljs-string">"sys_row"</span>);
    s += <span class="hljs-keyword">this</span>._serializeElement(<span class="hljs-string">"sysparm_encoded_record"</span>);
    <span class="hljs-keyword">return</span> s;
  },
  <span class="hljs-attr">_serializeElement</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">id</span>) </span>{
    <span class="hljs-keyword">var</span> e = gel(id);
    <span class="hljs-keyword">if</span> (e) {
      <span class="hljs-keyword">var</span> queryComponent = Form.Element.serialize(e);
      <span class="hljs-keyword">if</span> (queryComponent)
        <span class="hljs-keyword">return</span> <span class="hljs-string">"&amp;"</span> + queryComponent;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
  },
  <span class="hljs-attr">changedFieldsFilter</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>) </span>{
    <span class="hljs-keyword">if</span> (element.changed &amp;&amp;
      element.id.startsWith(<span class="hljs-keyword">this</span>.getTableName() + <span class="hljs-string">"."</span>) &amp;&amp;
      (element.tagName.toUpperCase() != <span class="hljs-string">"TEXTAREA"</span>))
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">if</span> (element.id.startsWith(<span class="hljs-string">"ni.VE"</span>))
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">if</span> (element.name.startsWith(<span class="hljs-string">"ni.WATERMARK"</span>))
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  },
  <span class="hljs-attr">allChangedFieldsFilter</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>) </span>{
    <span class="hljs-keyword">if</span> (element.changed &amp;&amp; element.id.startsWith(<span class="hljs-keyword">this</span>.getTableName() + <span class="hljs-string">"."</span>))
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  },
  <span class="hljs-attr">flash</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">widgetName, color, count</span>) </span>{
    <span class="hljs-keyword">var</span> row = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">var</span> labels = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>();
    <span class="hljs-keyword">var</span> realLabel = <span class="hljs-keyword">this</span>.getLabel(widgetName);
    <span class="hljs-keyword">if</span> (realLabel)
      row = $(realLabel.parentNode.parentNode);
    <span class="hljs-keyword">else</span> {
      jslog(<span class="hljs-string">"flash() called for '"</span> + widgetName + <span class="hljs-string">"' but there is no label for it"</span>)
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">var</span> temp = row.select(<span class="hljs-string">'.label_left'</span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; temp.length; i++)
      labels.push(temp[i]);
    temp = row.select(<span class="hljs-string">'.label_right'</span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; temp.length; i++)
      labels.push(temp[i]);
    temp = row.select(<span class="hljs-string">'.label'</span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; temp.length; i++)
      labels.push(temp[i]);
    temp = row.select(<span class="hljs-string">'.control-label'</span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; temp.length; i++)
      labels.push(temp[i]);
    count = count + <span class="hljs-number">1</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; labels.length; i++) {
      <span class="hljs-keyword">var</span> widget = labels[i];
      <span class="hljs-keyword">if</span> (widget) {
        <span class="hljs-keyword">var</span> originalColor = widget.style.backgroundColor;
        widget.style.backgroundColor = color;
      }
    }
    <span class="hljs-keyword">if</span> (count &lt; <span class="hljs-number">4</span>)
      setTimeout(<span class="hljs-string">'g_form.flash("'</span> + widgetName + <span class="hljs-string">'", "'</span> + originalColor + <span class="hljs-string">'", '</span> + count + <span class="hljs-string">')'</span>, <span class="hljs-number">500</span>);
  },
  <span class="hljs-attr">enable</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> form = <span class="hljs-keyword">this</span>.getFormElement();
    <span class="hljs-keyword">if</span> (form)
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; form.elements.length; i++)
        form.elements[i].disabled = <span class="hljs-literal">false</span>;
  },
  <span class="hljs-attr">disable</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> form = <span class="hljs-keyword">this</span>.getFormElement();
    <span class="hljs-keyword">if</span> (form)
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; form.elements.length; i++)
        form.elements[i].disabled = <span class="hljs-literal">true</span>;
  },
  <span class="hljs-attr">showRelatedList</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">listTableName</span>) </span>{
    CustomEvent.fire(<span class="hljs-string">'related_lists.show'</span>, listTableName);
  },
  <span class="hljs-attr">hideRelatedList</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">listTableName</span>) </span>{
    CustomEvent.fire(<span class="hljs-string">'related_lists.hide'</span>, listTableName);
  },
  <span class="hljs-attr">getRelatedListNames</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.NOW.g_relatedLists)
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">window</span>.NOW.g_relatedLists.lists;
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.g_tabs2List) {
      <span class="hljs-keyword">var</span> relatedListNames = [];
      <span class="hljs-keyword">var</span> trimmedNames = g_tabs2List.tabIDs;
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; trimmedNames.length; i++)
        relatedListNames.push(trimmedNames[i].split(<span class="hljs-string">'.'</span>).slice(<span class="hljs-number">1</span>).join(<span class="hljs-string">'.'</span>));
      <span class="hljs-keyword">return</span> relatedListNames;
    }
    <span class="hljs-keyword">var</span> listWrapper = gel(<span class="hljs-string">"related_lists_wrapper"</span>);
    <span class="hljs-keyword">if</span> (!listWrapper)
      <span class="hljs-keyword">return</span> [];
    <span class="hljs-keyword">var</span> forthcomingTabs = listWrapper.getAttribute(<span class="hljs-string">'data-lists'</span>);
    <span class="hljs-keyword">if</span> (!forthcomingTabs)
      <span class="hljs-keyword">return</span> [];
    <span class="hljs-keyword">return</span> forthcomingTabs.split(<span class="hljs-string">','</span>);
  },
  <span class="hljs-attr">_getRelatedListID</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">listTableName</span>) </span>{
    <span class="hljs-keyword">var</span> relatedList = <span class="hljs-keyword">this</span>.findV2RelatedListName(listTableName);
    <span class="hljs-keyword">var</span> relatedListId;
    <span class="hljs-keyword">if</span> (relatedList)
      relatedListId = relatedList.getAttribute(<span class="hljs-string">"id"</span>);
    <span class="hljs-keyword">if</span> (!relatedListId)
      relatedListId = <span class="hljs-keyword">this</span>.getTableName() + <span class="hljs-string">"."</span> + listTableName;
    <span class="hljs-keyword">return</span> relatedListId;
  },
  <span class="hljs-attr">findV2RelatedListName</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">listTableName</span>) </span>{
    <span class="hljs-keyword">var</span> tableName = <span class="hljs-keyword">this</span>.getTableName();
    <span class="hljs-keyword">var</span> compareId = tableName + <span class="hljs-string">"."</span> + listTableName;
    <span class="hljs-keyword">var</span> rlw = gel(<span class="hljs-string">"related_lists_wrapper"</span>);
    <span class="hljs-keyword">if</span> (!rlw)
      <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; rlw.childNodes.length; i++) {
      <span class="hljs-keyword">var</span> node = rlw.childNodes[i];
      <span class="hljs-keyword">if</span> (node.nodeName != <span class="hljs-string">"DIV"</span>)
        <span class="hljs-keyword">continue</span>;
      <span class="hljs-keyword">var</span> idName = node.getAttribute(<span class="hljs-string">"id"</span>);
      <span class="hljs-keyword">if</span> (idName.length == <span class="hljs-number">0</span>)
        <span class="hljs-keyword">continue</span>;
      <span class="hljs-keyword">if</span> (idName.indexOf(compareId) &gt; <span class="hljs-number">-1</span>)
        <span class="hljs-keyword">return</span> node;
    }
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> GlideLists2 == <span class="hljs-string">"undefined"</span>)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> id <span class="hljs-keyword">in</span> GlideLists2) {
      <span class="hljs-keyword">var</span> list = GlideLists2[id];
      <span class="hljs-keyword">if</span> (list.getTableName() == listTableName &amp;&amp; list.getParentTable() == tableName)
        <span class="hljs-keyword">return</span> list.getContainer();
    }
    <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
  },
  <span class="hljs-attr">showRelatedLists</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> listNames = g_form.getRelatedListNames();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; listNames.length; i++) {
      <span class="hljs-keyword">this</span>.showRelatedList(listNames[i]);
    }
  },
  <span class="hljs-attr">hideRelatedLists</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> listNames = g_form.getRelatedListNames();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; listNames.length; i++) {
      <span class="hljs-keyword">this</span>.hideRelatedList(listNames[i]);
    }
  },
  <span class="hljs-attr">addInfoMessage</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">msg, id</span>) </span>{
    <span class="hljs-keyword">this</span>._addFormMessage(msg, <span class="hljs-string">"info"</span>, id);
  },
  <span class="hljs-attr">addWarningMessage</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">msg, id</span>) </span>{
    <span class="hljs-keyword">this</span>._addFormMessage(msg, <span class="hljs-string">"warning"</span>, id);
  },
  <span class="hljs-attr">addErrorMessage</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">msg, id</span>) </span>{
    <span class="hljs-keyword">this</span>._addFormMessage(msg, <span class="hljs-string">"error"</span>, id);
  },
  <span class="hljs-attr">_addFormMessage</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">msg, type, id</span>) </span>{
    GlideUI.get().addOutputMessage({
      <span class="hljs-attr">msg</span>: msg,
      <span class="hljs-attr">type</span>: type,
      <span class="hljs-attr">id</span>: id
    });
    <span class="hljs-keyword">var</span> scrollDiv = getFormContentParent();
    scrollDiv.scrollTop = <span class="hljs-number">0</span>;
  },
  <span class="hljs-attr">clearMessages</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    GlideUI.get().clearOutputMessages();
  },
  <span class="hljs-attr">showFieldMsg</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">input, message, type, scrollForm</span>) </span>{
    <span class="hljs-keyword">var</span> msgClass;
    <span class="hljs-keyword">var</span> msgImage;
    <span class="hljs-keyword">var</span> msgImageAlt;
    <span class="hljs-keyword">var</span> msgRowType;
    <span class="hljs-keyword">switch</span> (type) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">"info"</span>:
        msgClass = <span class="hljs-keyword">this</span>.INFO_CLASS;
        msgRowType = <span class="hljs-string">'info'</span> + <span class="hljs-keyword">this</span>.MSG_ROW;
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">"error"</span>:
        msgClass = <span class="hljs-keyword">this</span>.ERROR_CLASS;
        msgRowType = <span class="hljs-string">'error'</span> + <span class="hljs-keyword">this</span>.MSG_ROW;
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">"warning"</span>:
        msgClass = <span class="hljs-keyword">this</span>.WARNING_CLASS;
        msgRowType = <span class="hljs-string">'warning'</span> + <span class="hljs-keyword">this</span>.MSG_ROW;
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">default</span>:
        type = <span class="hljs-string">'info'</span>;
        msgClass = <span class="hljs-keyword">this</span>.INFO_CLASS;
        msgRowType = <span class="hljs-string">'info'</span> + <span class="hljs-keyword">this</span>.MSG_ROW;
        <span class="hljs-keyword">break</span>;
    }
    <span class="hljs-keyword">var</span> inputElement = input;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span>(inputElement) == <span class="hljs-string">"string"</span>)
      inputElement = <span class="hljs-keyword">this</span>.getControl(inputElement);
    <span class="hljs-keyword">if</span> (!inputElement) {
      <span class="hljs-keyword">var</span> handler = <span class="hljs-keyword">this</span>.getPrefixHandler(input);
      <span class="hljs-keyword">if</span> (handler) {
        <span class="hljs-keyword">var</span> handlerObject = handler.getObject();
        <span class="hljs-keyword">var</span> fieldName = handler.getFieldName();
        <span class="hljs-keyword">var</span> actualName = handlerObject.getActualName(fieldName);
        inputElement = handlerObject.getControl(actualName);
      }
    }
    <span class="hljs-keyword">if</span> (!inputElement || !message) {
      jslog(<span class="hljs-string">"ERROR: invalid field or missing message passed to g_form.showFieldMsg('"</span> + input + <span class="hljs-string">"','"</span> + message + <span class="hljs-string">"')"</span>);
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">if</span> (inputElement.id &amp;&amp; <span class="hljs-keyword">this</span>.elementHandlers[inputElement.id] &amp;&amp; (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.elementHandlers[inputElement.id].showFieldMsg == <span class="hljs-string">"function"</span>))
      <span class="hljs-keyword">this</span>.elementHandlers[inputElement.id].showFieldMsg(input, message, type);
    <span class="hljs-keyword">var</span> positionedCursor = <span class="hljs-keyword">this</span>._positionCursorAtError(inputElement, message);
    <span class="hljs-keyword">var</span> fieldRowId = <span class="hljs-string">"element."</span> + inputElement.id;
    <span class="hljs-keyword">var</span> fieldRow = <span class="hljs-built_in">document</span>.getElementById(fieldRowId);
    <span class="hljs-keyword">var</span> doc;
    <span class="hljs-keyword">var</span> isVariable = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">var</span> variableMsgRow = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">if</span> (!fieldRow) {
      <span class="hljs-keyword">var</span> parent = inputElement.parentNode;
      <span class="hljs-keyword">while</span> (parent != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">if</span> (parent.nodeName.toUpperCase() == <span class="hljs-string">'TR'</span>) {
          fieldRow = parent;
          isVariable = <span class="hljs-literal">true</span>;
          <span class="hljs-keyword">break</span>;
        }
        parent = parent.parentNode;
      }
    }
    <span class="hljs-keyword">if</span> (!fieldRow) {
      jslog(<span class="hljs-string">"Error adding field message. Couldn't find the row to add the field message to."</span>);
      <span class="hljs-keyword">return</span>;
    }
    doc = fieldRow.ownerDocument;
    <span class="hljs-keyword">var</span> inputContainer = inputElement.up(<span class="hljs-string">'.form-field'</span>);
    <span class="hljs-keyword">if</span> (!inputContainer)
      inputContainer = inputElement.up();
    <span class="hljs-keyword">var</span> fieldMsgContainer = inputContainer.down(<span class="hljs-string">'.fieldmsg-container'</span>);
    <span class="hljs-keyword">if</span> (!fieldMsgContainer) {
      fieldMsgContainer = doc.createElement(<span class="hljs-string">'div'</span>);
      fieldMsgContainer.className = <span class="hljs-string">'fieldmsg-container'</span>;
      <span class="hljs-keyword">if</span> (isVariable)
        fieldMsgContainer.className = <span class="hljs-string">'variable-field-msg'</span>;
      fieldMsgContainer.id = inputElement.id + <span class="hljs-string">'_fieldmsg'</span>;
      inputContainer.insert(fieldMsgContainer);
      inputElement.setAttribute(<span class="hljs-string">'aria-describedby'</span>, fieldMsgContainer.id);
    }
    <span class="hljs-keyword">var</span> fieldMsgRow = doc.createElement(<span class="hljs-string">'DIV'</span>);
    fieldMsgRow.className = msgClass;
    fieldMsgRow.hasFieldmsg = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">var</span> fieldmsgMsg = doc.createTextNode(message);
    fieldMsgRow.appendChild(fieldmsgMsg);
    fieldMsgContainer.insert(fieldMsgRow);
    <span class="hljs-keyword">if</span> (!positionedCursor)
      <span class="hljs-keyword">this</span>._scrollToElementTR(fieldRow, fieldMsgRow, scrollForm);
    _frameChanged();
  },
  <span class="hljs-attr">_scrollToElementTR</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">labelTR, msgTR, scrollForm</span>) </span>{
    <span class="hljs-keyword">var</span> scroll = scrollForm;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> scroll == <span class="hljs-string">"undefined"</span>) {
      <span class="hljs-keyword">var</span> scrollToMsg = gel(<span class="hljs-string">"ni.scroll_to_messsage_field"</span>);
      <span class="hljs-keyword">if</span> (scrollToMsg == <span class="hljs-literal">null</span>)
        scroll = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">if</span> (scrollToMsg.value != <span class="hljs-string">"false"</span>)
          scroll = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">else</span>
          scroll = <span class="hljs-literal">false</span>;
      }
    }
    <span class="hljs-keyword">if</span> (!scroll)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">var</span> scrollDiv = getFormContentParent();
    <span class="hljs-keyword">var</span> refControl = gel(<span class="hljs-string">"sys_target"</span>);
    <span class="hljs-keyword">var</span> ref;
    <span class="hljs-keyword">var</span> titleDiv;
    <span class="hljs-keyword">if</span> (refControl != <span class="hljs-literal">null</span>) {
      ref = refControl.value;
      titleDiv = gel(ref + <span class="hljs-string">".form_header"</span>);
    } <span class="hljs-keyword">else</span> {
      titleDiv = gel(<span class="hljs-string">"form_header"</span>);
    }
    <span class="hljs-keyword">var</span> headerHeight = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">if</span> (titleDiv &amp;&amp; titleDiv.clientHeight)
      headerHeight = titleDiv.clientHeight;
    <span class="hljs-keyword">var</span> topOfLabel = grabOffsetTop(labelTR);
    <span class="hljs-keyword">var</span> needToScroll = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">if</span> (topOfLabel &gt; scrollDiv.scrollTop + scrollDiv.clientHeight)
      needToScroll = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (topOfLabel &lt; scrollDiv.scrollTop + headerHeight)
      needToScroll = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">var</span> topOfMsg = grabOffsetTop(msgTR);
      <span class="hljs-keyword">if</span> (topOfMsg &gt; scrollDiv.scrollTop + scrollDiv.clientHeight)
        needToScroll = <span class="hljs-literal">true</span>;
    }
    <span class="hljs-keyword">if</span> (!needToScroll)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">var</span> scrollTopSetting = topOfLabel - headerHeight;
    <span class="hljs-keyword">if</span> (scrollDiv.id)
      setTimeout(<span class="hljs-string">"$('"</span> + scrollDiv.id + <span class="hljs-string">"').scrollTop = "</span> + scrollTopSetting, <span class="hljs-number">100</span>);
    <span class="hljs-keyword">else</span>
      scrollDiv.scrollTop = scrollTopSetting;
  },
  <span class="hljs-attr">showErrorBox</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">input, message, scrollForm</span>) </span>{
    <span class="hljs-keyword">this</span>.showFieldMsg(input, message, <span class="hljs-string">"error"</span>, scrollForm);
  },
  <span class="hljs-attr">hideFieldMsg</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">input, clearAll</span>) </span>{
    <span class="hljs-keyword">var</span> inputElement = input;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span>(inputElement) == <span class="hljs-string">"string"</span>)
      inputElement = <span class="hljs-keyword">this</span>.getControl(inputElement);
    <span class="hljs-keyword">if</span> (!inputElement) {
      <span class="hljs-keyword">var</span> handler = <span class="hljs-keyword">this</span>.getPrefixHandler(input);
      <span class="hljs-keyword">if</span> (handler) {
        <span class="hljs-keyword">var</span> handlerObject = handler.getObject();
        <span class="hljs-keyword">var</span> fieldName = handler.getFieldName();
        <span class="hljs-keyword">var</span> actualName = handlerObject.getActualName(fieldName);
        inputElement = handlerObject.getControl(actualName);
      }
    }
    <span class="hljs-keyword">if</span> (!inputElement) {
      jslog(<span class="hljs-string">"ERROR: invalid field ('"</span> + input + <span class="hljs-string">"') passed to g_form.hideFieldMsg"</span>);
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">if</span> (inputElement.id &amp;&amp; <span class="hljs-keyword">this</span>.elementHandlers[inputElement.id] &amp;&amp; (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.elementHandlers[inputElement.id].hideFieldMsg == <span class="hljs-string">"function"</span>))
      <span class="hljs-keyword">this</span>.elementHandlers[inputElement.id].hideFieldMsg(input, clearAll);
    <span class="hljs-keyword">var</span> fieldTrId = <span class="hljs-string">"element."</span> + inputElement.id;
    <span class="hljs-keyword">var</span> tr = <span class="hljs-built_in">document</span>.getElementById(fieldTrId);
    <span class="hljs-keyword">if</span> (!tr) {
      <span class="hljs-keyword">var</span> parent = inputElement.up(<span class="hljs-string">"div.form-field.input_controls"</span>);
      <span class="hljs-keyword">if</span> (!parent)
        parent = inputElement.up(<span class="hljs-string">"td"</span>);
      <span class="hljs-keyword">if</span> (parent) {
        <span class="hljs-keyword">var</span> msgs = $(parent).select(<span class="hljs-string">".variable-field-msg"</span>);
        <span class="hljs-keyword">if</span> (msgs)
          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; msgs.length; i++) {
            parent.removeChild(msgs[i]);
            <span class="hljs-keyword">if</span> (!clearAll)
              <span class="hljs-keyword">return</span>;
          }
      }
    }
    <span class="hljs-keyword">if</span> (tr == <span class="hljs-literal">null</span>)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">var</span> msgContainer = tr.down(<span class="hljs-string">'.fieldmsg-container'</span>);
    <span class="hljs-keyword">if</span> (!msgContainer)
      <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">if</span> (clearAll)
      msgContainer.update(<span class="hljs-string">''</span>);
    <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">var</span> messages = msgContainer.select(<span class="hljs-string">'.fieldmsg'</span>);
      <span class="hljs-keyword">if</span> (messages[<span class="hljs-number">0</span>])
        messages[<span class="hljs-number">0</span>].remove();
    }
  },
  <span class="hljs-attr">hasFieldMsgs</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">type</span>) </span>{
    <span class="hljs-keyword">var</span> formHasFieldMsgs = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">if</span> (type) {
      <span class="hljs-keyword">var</span> msgTRs = $(<span class="hljs-built_in">document</span>.body).select(<span class="hljs-string">'.fieldmsg.notification-'</span> + type);
      formHasFieldMsgs = msgTRs.length &gt; <span class="hljs-number">0</span>;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">var</span> msgTRs = $(<span class="hljs-built_in">document</span>.body).select(<span class="hljs-string">'.fieldmsg'</span>);
      formHasFieldMsgs = msgTRs.length &gt; <span class="hljs-number">0</span>;
    }
    <span class="hljs-keyword">return</span> formHasFieldMsgs;
  },
  <span class="hljs-attr">hideAllFieldMsgs</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">type</span>) </span>{
    <span class="hljs-keyword">if</span> (type) {
      <span class="hljs-keyword">var</span> msgTRs = $(<span class="hljs-built_in">document</span>.body).select(<span class="hljs-string">'.fieldmsg.notification-'</span> + type);
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; msgTRs.length; i++) {
        msgTRs[i].parentNode.removeChild(msgTRs[i]);
      }
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">var</span> msgTRs = $(<span class="hljs-built_in">document</span>.body).select(<span class="hljs-string">'.fieldmsg'</span>);
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; msgTRs.length; i++) {
        msgTRs[i].parentNode.removeChild(msgTRs[i]);
      }
    }
    CustomEvent.fire(<span class="hljs-string">'sn.form.hide_all_field_msg'</span>, type);
  },
  <span class="hljs-attr">hideErrorBox</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">input</span>) </span>{
    <span class="hljs-keyword">this</span>.hideFieldMsg(input);
  },
  <span class="hljs-attr">setStreamJournalFieldsDisplay</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">show</span>) </span>{
    CustomEvent.fire(<span class="hljs-string">'sn.stream.change_input_display'</span>, <span class="hljs-keyword">this</span>.getTableName(), show);
    CustomEvent.fire(<span class="hljs-string">'sn.form.change_input_display'</span>, !show);
  },
  <span class="hljs-attr">_positionCursorAtError</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">elem, message</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> elem == <span class="hljs-string">"undefined"</span> || elem.disabled)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">var</span> index = message.indexOf(<span class="hljs-string">"line ("</span>);
    <span class="hljs-keyword">if</span> (index &gt; <span class="hljs-number">-1</span>) {
      <span class="hljs-keyword">var</span> parenIndex = message.indexOf(<span class="hljs-string">")"</span>, index + <span class="hljs-number">6</span>);
      <span class="hljs-keyword">if</span> (parenIndex &gt; <span class="hljs-number">-1</span>) {
        <span class="hljs-keyword">var</span> lineNo = message.substring(index + <span class="hljs-number">6</span>, parenIndex);
        lineNo = <span class="hljs-built_in">parseInt</span>(lineNo, <span class="hljs-number">10</span>);
        index = message.indexOf(<span class="hljs-string">"("</span>, parenIndex);
        <span class="hljs-keyword">if</span> (index &gt; <span class="hljs-number">-1</span>) {
          parenIndex = message.indexOf(<span class="hljs-string">")"</span>, index);
          <span class="hljs-keyword">if</span> (parenIndex &gt; <span class="hljs-number">-1</span>) {
            <span class="hljs-keyword">var</span> columnNo = message.substring(index + <span class="hljs-number">1</span>, parenIndex);
            columnNo = <span class="hljs-built_in">parseInt</span>(columnNo, <span class="hljs-number">10</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._setCaretPositionLineColumn(elem, lineNo, columnNo);
          }
        } <span class="hljs-keyword">else</span>
          <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._setCaretPositionLineColumn(elem, lineNo, <span class="hljs-number">1</span>);
      }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  },
  <span class="hljs-attr">_setCaretPositionLineColumn</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">elem, lineNo, columnNo</span>) </span>{
    <span class="hljs-keyword">var</span> pl = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">var</span> data = elem.value;
    <span class="hljs-keyword">var</span> len = data.length;
    <span class="hljs-keyword">var</span> position = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">while</span> (pl &lt; lineNo &amp;&amp; position &gt; <span class="hljs-number">-1</span>) {
      position = data.indexOf(<span class="hljs-string">'\n'</span>, position);
      <span class="hljs-keyword">if</span> (position &gt; <span class="hljs-number">-1</span>)
        position++;
      pl++;
    }
    <span class="hljs-keyword">if</span> (position == <span class="hljs-number">-1</span>) {
      jslog(<span class="hljs-string">"Failed to find editor caret position for error"</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    position += columnNo - <span class="hljs-number">1</span>;
    <span class="hljs-keyword">if</span> (elem.createTextRange)
      position -= lineNo - <span class="hljs-number">1</span>;
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">this</span>._setCaretPosition(elem, position);
    } <span class="hljs-keyword">catch</span> (err) {
      jslog(<span class="hljs-string">"Failed to position cursor at the error"</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  },
  <span class="hljs-attr">_setCaretPosition</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">elem, caretPos</span>) </span>{
    <span class="hljs-keyword">if</span> (elem.createTextRange) {
      <span class="hljs-keyword">var</span> range = elem.createTextRange();
      range.move(<span class="hljs-string">'character'</span>, caretPos);
      range.select();
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">if</span> (elem.setSelectionRange) {
        <span class="hljs-keyword">if</span> (caretPos == <span class="hljs-number">0</span>)
          caretPos = <span class="hljs-number">1</span>;
        elem.setSelectionRange(caretPos, caretPos + <span class="hljs-number">1</span>);
        <span class="hljs-keyword">if</span> (isSafari || isChrome)
          elem.focus();
        <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">var</span> ev = <span class="hljs-built_in">document</span>.createEvent(<span class="hljs-string">"KeyEvents"</span>);
          ev.initKeyEvent(<span class="hljs-string">"keypress"</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>, <span class="hljs-built_in">window</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-number">0</span>, elem.value.charCodeAt(caretPos - <span class="hljs-number">1</span>));
          elem.dispatchEvent(ev);
          elem.focus();
        }
      } <span class="hljs-keyword">else</span>
        elem.focus();
    }
  },
  <span class="hljs-attr">disableAttachments</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> icon = gel(<span class="hljs-string">"header_add_attachment"</span>);
    <span class="hljs-keyword">if</span> (icon)
      icon.style.display = <span class="hljs-string">'none'</span>;
    AttachmentUploader.disableAttachments();
  },
  <span class="hljs-attr">enableAttachments</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> icon = gel(<span class="hljs-string">"header_add_attachment"</span>);
    <span class="hljs-keyword">if</span> (icon)
      icon.style.display = <span class="hljs-string">''</span>;
    AttachmentUploader.enableAttachments();
  },
  <span class="hljs-attr">hasField</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName</span>) </span>{
    <span class="hljs-keyword">return</span> !!<span class="hljs-keyword">this</span>.getControl(fieldName);
  },
  <span class="hljs-attr">setAction</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">action</span>) </span>{
    <span class="hljs-keyword">this</span>.action = action;
  },
  <span class="hljs-attr">getAction</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.action;
  },
  <span class="hljs-attr">setScope</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">scope</span>) </span>{
    <span class="hljs-keyword">this</span>.scope = scope;
  },
  <span class="hljs-attr">getScope</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.scope;
  },
  <span class="hljs-attr">setLiveUpdating</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">isLiveUpdating</span>) </span>{
    <span class="hljs-keyword">this</span>._isLiveUpdating = isLiveUpdating;
  },
  <span class="hljs-attr">isLiveUpdating</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._isLiveUpdating;
  },
  <span class="hljs-attr">_opticsInspectorLog</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fieldName, oldValue</span>) </span>{
    <span class="hljs-keyword">var</span> value = <span class="hljs-keyword">this</span>.getValue(fieldName);
    opticsLog(<span class="hljs-keyword">this</span>.getTableName(), fieldName, <span class="hljs-literal">null</span>, oldValue, value);
  },
  <span class="hljs-attr">type</span>: <span class="hljs-string">"GlideForm"</span>
});
<span class="hljs-keyword">var</span> GlideFormPrefixHandler = Class.create({
  <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">handlerObject</span>) </span>{
    <span class="hljs-keyword">this</span>.handlerObject = handlerObject;
    <span class="hljs-keyword">this</span>.fieldName = <span class="hljs-string">""</span>;
  },
  <span class="hljs-attr">getObject</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.handlerObject;
  },
  <span class="hljs-attr">getFieldName</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.fieldName;
  },
  <span class="hljs-attr">setFieldName</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">id</span>) </span>{
    <span class="hljs-keyword">this</span>.fieldName = id;
  },
  <span class="hljs-attr">type</span>: <span class="hljs-string">"GlideFormPrefixHandler"</span>
});;</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
