<div id="sc_cat_item" ng-if="::data.recordFound">
  <sp-widget widget="c.orderItemModal" ng-if="c.orderItemModal"></sp-widget>
  <div class="row" ng-if="::data.sc_cat_item" >
    <div class="col-sm-12" ng-class="{true: 'col-md-9', false: 'col-md-12'}[options.display_cart_on_right === 'true']" id="catItemTop">
      <!-- Info Message Box -->
      <div ng-if="data.show_wishlist_msg" class="alert alert-info">
        	{{::m.itemWishlistMsg}}
      </div>
      <!--	Success Message Box	-->
      <div class="alert alert-success" ng-if="data.showMsg" sc-bind-html-compile="m.actionMsg">
      </div>
     <div class="panel panel-default">
        <!-- Title Section -->
        <div class="wrapper-md b-b break-word item-header" ng-class="{true: '', false: 'sc-sticky-item-header'}[!c.data.sc_cat_item.short_description]" style="top: {{stickyHeaderTop}}">
        	<h1 class="h2 m-t-none m-b-sm font-thin" ng-if="::data.sc_cat_item.name">{{::data.sc_cat_item.name}}</h1>
        	<div class="text-muted sc-cat-item-short-description" ng-if="::data.sc_cat_item.short_description">{{::data.sc_cat_item.short_description}}</div>
      	</div>
        <div class="wrapper-md row b-b no-margin" ng-if="c.data.sc_cat_item.picture || c.data.sc_cat_item.description">
          <div class="col-sm-4 col-xs-12 no-padder" ng-if="c.data.sc_cat_item.picture">
            <div class="wrapper-md text-center">
              <i class="fa fa-chevron-left pointer" style="position:absolute; top:50%; left:4%; color:#CECECE" ng-if="options.image_gallery"></i>
              <img class="img-responsive catalog-item-image" alt="{{::data.sc_cat_item.name}}" style="display: inline" ng-src="{{::data.sc_cat_item.picture}}?t=medium" />
              <i class="fa fa-chevron-right pointer" style="position:absolute; top:50%; right:4%; color:#CECECE" ng-if="options.image_gallery"></i>
              <div class="image-gallery padding-top" ng-if="options.image_gallery">
                <i class="fa fa-circle active"></i>
                <i class="fa fa-circle"></i>
                <i class="fa fa-circle"></i>
              </div>
            </div>
          </div>
          <div class="col-xs-12 padder-md break-word"
               ng-class="{true: 'col-sm-12 no-padder', false: 'col-sm-8'}[!c.data.sc_cat_item.picture]">
            <div class="visible-md visible-lg" ng-class="{false : 'visible-xs visible-sm', true : 'hidden-xs hidden-sm'}[c.options.show_less_description === 'true']">
              <div ng-bind-html="::data.sc_cat_item.description"></div>
            </div>
            <div class="col-xs-12 col-sm-12 visible-xs visible-sm" ng-if="c.options.show_less_description === 'true'">
              <sc-toggle-data sn-data="::data.sc_cat_item.description"></sc-toggle-data>
        		</div>
          </div>
        </div>
        <div class="" ng-class="{'b-b wrapper-md': !data.no_fields}">
          <sp-cat-item item="::data.sc_cat_item" ></sp-cat-item>
          <form>
            <!-- display view and model -->
            <sp-model form-model="::data.sc_cat_item" mandatory="c.mandatory"></sp-model>
          </form>
        </div>
        <!-- Bottom cart -->
        <div class="inline-cart" ng-if="::options.display_cart_on_right !== 'true'">
          <div ng-if="data.sc_cat_item.sys_class_name != 'sc_cat_item_content'" class="wrapper-md b-b">
              <div class="m-b text-right" ng-if="data.showPrices && (data.sc_cat_item.price || data.sc_cat_item.recurring_price)" >
               <b>${Price}:</b> {{data.sc_cat_item.price}}<em ng-if="data.sc_cat_item.recurring_price" class="cat_item_price"> + {{data.sc_cat_item.recurring_price}}</em>
              </div>
              <div ng-if="::c.allowOrder()" class="text-right">
                <select ng-if="c.showQuantitySelector()"
                        ng-disabled="submitting"
                        class="form-control quantity-selector m-r-xs"
                        ng-model="c.quantity"
                        aria-label="${Quantity}"
                        ng-options="num for num in [1,2,3,4,5,6,7,8,9,10]">
                </select>
                <button tabindex="0" ng-if="c.showAddCartBtn()" name="add_to_cart" ng-disabled="submitting" ng-click="triggerAddToCart()" class="btn btn-default m-r-xs">
                  <i class="fa fa fa-shopping-cart m-r-xs"></i>
                  ${Add to Cart}
                </button>
                <button tabindex="0" ng-if="data.is_cart_item" name="update" ng-disabled="submitting" ng-click="triggerUpdateCart()" class="btn btn-default">
                  <i class="fa fa fa-shopping-cart m-r-xs"></i>
                  ${Update Cart}
                </button>
                <span class="form-group relative" ng-if="data.showWishlist && !data.is_cart_item && c.options.show_add_to_wishlist_button === 'true'">
                  <button ng-if="!data.is_wishlist_item" name="add_to_wishlist" ng-click="addToWishlist()" ng-disabled="submitting" class="btn btn-default m-r-xs">
                    <i class="icon icon-sp-wishlist m-r-xs" style="vertical-align: text-bottom;"></i>
                    ${Add to Wish List}
                  </button>
                  <button ng-if="data.is_wishlist_item" name="update_wishlist" ng-click="addToWishlist()" ng-disabled="submitting" class="btn btn-default m-r-xs">
                    <i class="icon icon-sp-wishlist m-r-xs" style="vertical-align: text-bottom;"></i>
                    ${Update Wish List}
                  </button>
                </span>
								<button ng-if="::c.showOrderNowButton()" tabindex="0" name="submit" ng-disabled="submitting" ng-click="triggerOnSubmit()" class="btn btn-primary">{{::submitButtonMsg}}</button>
                <span ng-if="submitting" style="padding-left:4px">${Submitting...}</span>
              </div>
              <div ng-show="hasMandatory(c.mandatory)" class="alert alert-info" style="margin-top: .5em" ng-if="c.options.show_field_validation_messages === 'true'">
                <span ng-if="hasMandatory(mandatory)">${Required information} </span>
                <label ng-repeat="f in c.mandatory" for="sp_formfield_{{::f.catalogFieldName}}" class="label label-danger sc-field-error-label" style="margin-right: .5em; display: inline-block;">{{::f.label}}</label>
              </div>
            </div>
        </div>
        <div class="wrapper-md row no-margin">
          <now-attachments-list template="sp_attachment_single_line" ></now-attachments-list>
          <label ng-if="!submitting" style="float:right;font-weight:normal;cursor:pointer;">
            <sp-attachment-button></sp-attachment-button>
            <span style="padding-left:4px;">${Add attachments}</span>
          </label>
          
        </div>
      </div>
      <div ng-if="::data.sc_cat_item.content_type == 'external'" class="wrapper-md">
        <a ng-href="{{::data.sc_cat_item.url}}" target={{::data.sc_cat_item.target}}>{{::data.sc_cat_item.url}} âžš</a>
      </div>
			<div ng-if="::data.sc_cat_item.content_type == 'kb'" class="wrapper-md">
        <a  ng-href="?id=kb_article&sys_id={{::data.sc_cat_item.kb_article}}">${Go to KB Article:} {{::data.sc_cat_item.kb_article_description}}</a>
      </div>
    </div>
    <!-- Right side content -->
    <div class="col-sm-12 col-md-3 right-side-cart" ng-show="::options.display_cart_on_right === 'true'">
      <!-- Right side cart( If you are chaning anything here, please change in bottom cart section also) -->
      <div ng-class="{true:'sc-fixed', false:'' }[options.display_cart_on_right === 'true']">
      	<div ng-if="data.sc_cat_item.sys_class_name != 'sc_cat_item_content'" class="panel panel-{{::options.color}} b wrapper-md">
           <div class="form-group" ng-if="::c.allowOrder()">
             <select ng-if="c.showQuantitySelector()"
                     style="text-indent: 6px;"
                     ng-disabled="submitting"
                     class="form-control"
                     ng-model="c.quantity"
                     aria-label="${Quantity}"
                     ng-options="num for num in [1,2,3,4,5,6,7,8,9,10]">
             </select>
           </div>
           <div class="form-group relative">
             <button tabindex="0" ng-if="c.showAddCartBtn()" name="add_to_cart" ng-disabled="submitting" ng-click="triggerAddToCart()" class="btn btn-default sc-btn form-control">
               <i class="fa fa fa-shopping-cart sc-order-widget-btn pull-left"></i>
               ${Add to Cart}
             </button>
             <button tabindex="0" ng-if="data.is_cart_item" name="update" ng-disabled="submitting" ng-click="triggerUpdateCart()" class="btn btn-default sc-btn form-control">
               <i class="fa fa fa-shopping-cart sc-order-widget-btn pull-left"></i>
               ${Update Cart}
             </button>
           </div>
           <div class="form-group relative" ng-if="data.showWishlist && !data.is_cart_item && c.options.show_add_to_wishlist_button === 'true'">
             <button ng-if="!data.is_wishlist_item" name="add_to_wishlist" ng-click="addToWishlist()" ng-disabled="submitting" class="btn btn-default sc-btn form-control">
               <i class="icon icon-sp-wishlist sc-order-widget-btn pull-left" style="top:5px"></i>
               ${Add to Wish List}
             </button>
             <button ng-if="data.is_wishlist_item" name="update_wishlist" ng-click="addToWishlist()" ng-disabled="submitting" class="btn btn-default sc-btn form-control">
             	<i class="icon icon-sp-wishlist sc-order-widget-btn pull-left" style="top:5px"></i>
             	${Update Wish List}
             </button>
           </div>
           <div class="form-group" ng-if="data.showPrices && data.sc_cat_item.price">
             <b>${Price}:</b> {{data.sc_cat_item.price}}<em ng-if="data.sc_cat_item.recurring_price" class="cat_item_price"> + {{data.sc_cat_item.recurring_price}}</em>
           </div>
           <div class="form-group">
             <button ng-if="::c.showOrderNowButton()" tabindex="0" name="submit" ng-disabled="submitting" ng-click="triggerOnSubmit()" class="btn btn-primary btn-block">{{::submitButtonMsg}}</button>
             <span ng-if="submitting" style="padding-left:4px">${Submitting...}</span>
           </div>
         </div>
      	<div class="sc-item-error-messages" ng-if="c.options.show_field_validation_messages === 'true'">
            <div class="row" ng-if="hasMandatory(c.mandatory)" class=" row alert alert-info" style="margin-top: .5em">
              <div class="col-sm-12">
                <div ng-if="hasMandatory(c.mandatory)">${Required information} </div>
                <label ng-repeat="f in c.mandatory" for="sp_formfield_{{::f.catalogFieldName}}" class="label label-danger sc-field-error-label">{{::f.label}}</label>
              </div>
           </div>
         </div>
      </div>
    </div>
  </div>
  <sp-message-dialog name="delete_attachment"
                       title="{{::m.dialogTitle}}"
                       message="{{::m.dialogMessage}}"
                       ok="{{::m.dialogOK}}"
                       cancel="{{::m.dialogCancel}}"
                       dialog-class="delete-dialog"></sp-message-dialog>
  <div ng-if="::!data.sc_cat_item" >
    <div class="panel panel-default">
      <div class="panel-heading"><h4 class="panel-title">${Item not found}</h4></div>
      <div class="panel-body wrapper">
        <p>${This item is not found or currently not available}</p>
        <p>${Suggestions}:</p>
        <ul>
          <li>${Try searching for the item}</li>
          <li>${Go to the Service Catalog homepage}</li>
        </ul>
      </div>
    </div>
  </div>
  <div class="sr-only" aria-live="assertive">{{::c.status}}</div>
</div>
<div ng-if="::!data.recordFound" class="alert alert-info">{{::m.invalidRecordMsg}}</div>
<now-message key="Added item to shopping cart" value="${Added item to shopping cart}"/>